(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))e(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&e(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();var iT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wh(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function B_(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var n=i.default;if(typeof n=="function"){var t=function e(){return this instanceof e?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};t.prototype=n.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(e){var r=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,r.get?r:{enumerable:!0,get:function(){return i[e]}})}),t}var Aw={exports:{}},rv={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oT;function ZN(){if(oT)return rv;oT=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function t(e,r,o){var a=null;if(o!==void 0&&(a=""+o),r.key!==void 0&&(a=""+r.key),"key"in r){o={};for(var s in r)s!=="key"&&(o[s]=r[s])}else o=r;return r=o.ref,{$$typeof:i,type:e,key:a,ref:r!==void 0?r:null,props:o}}return rv.Fragment=n,rv.jsx=t,rv.jsxs=t,rv}var aT;function QN(){return aT||(aT=1,Aw.exports=ZN()),Aw.exports}var j=QN(),kw={exports:{}},Mw={exports:{}},sT;function tR(){if(sT)return Mw.exports;sT=1;var i=Mw.exports={},n,t;function e(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=e}catch{n=e}try{typeof clearTimeout=="function"?t=clearTimeout:t=r}catch{t=r}})();function o(C){if(n===setTimeout)return setTimeout(C,0);if((n===e||!n)&&setTimeout)return n=setTimeout,setTimeout(C,0);try{return n(C,0)}catch{try{return n.call(null,C,0)}catch{return n.call(this,C,0)}}}function a(C){if(t===clearTimeout)return clearTimeout(C);if((t===r||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(C);try{return t(C)}catch{try{return t.call(null,C)}catch{return t.call(this,C)}}}var s=[],u=!1,c,h=-1;function v(){!u||!c||(u=!1,c.length?s=c.concat(s):h=-1,s.length&&m())}function m(){if(!u){var C=o(v);u=!0;for(var E=s.length;E;){for(c=s,s=[];++h<E;)c&&c[h].run();h=-1,E=s.length}c=null,u=!1,a(C)}}i.nextTick=function(C){var E=new Array(arguments.length-1);if(arguments.length>1)for(var D=1;D<arguments.length;D++)E[D-1]=arguments[D];s.push(new y(C,E)),s.length===1&&!u&&o(m)};function y(C,E){this.fun=C,this.array=E}y.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function _(){}return i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(C){return[]},i.binding=function(C){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(C){throw new Error("process.chdir is not supported")},i.umask=function(){return 0},Mw.exports}var eR=tR();const Oh=Wh(eR);var vn={},lT;function nR(){if(lT)return vn;lT=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),e=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),v=Symbol.iterator;function m(pt){return pt===null||typeof pt!="object"?null:(pt=v&&pt[v]||pt["@@iterator"],typeof pt=="function"?pt:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,C={};function E(pt,Dt,yt){this.props=pt,this.context=Dt,this.refs=C,this.updater=yt||y}E.prototype.isReactComponent={},E.prototype.setState=function(pt,Dt){if(typeof pt!="object"&&typeof pt!="function"&&pt!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,pt,Dt,"setState")},E.prototype.forceUpdate=function(pt){this.updater.enqueueForceUpdate(this,pt,"forceUpdate")};function D(){}D.prototype=E.prototype;function F(pt,Dt,yt){this.props=pt,this.context=Dt,this.refs=C,this.updater=yt||y}var V=F.prototype=new D;V.constructor=F,_(V,E.prototype),V.isPureReactComponent=!0;var K=Array.isArray,Z={H:null,A:null,T:null,S:null,V:null},ct=Object.prototype.hasOwnProperty;function ht(pt,Dt,yt,kt,Mt,Kt){return yt=Kt.ref,{$$typeof:i,type:pt,key:Dt,ref:yt!==void 0?yt:null,props:Kt}}function st(pt,Dt){return ht(pt.type,Dt,void 0,void 0,void 0,pt.props)}function et(pt){return typeof pt=="object"&&pt!==null&&pt.$$typeof===i}function nt(pt){var Dt={"=":"=0",":":"=2"};return"$"+pt.replace(/[=:]/g,function(yt){return Dt[yt]})}var it=/\/+/g;function $(pt,Dt){return typeof pt=="object"&&pt!==null&&pt.key!=null?nt(""+pt.key):Dt.toString(36)}function ft(){}function lt(pt){switch(pt.status){case"fulfilled":return pt.value;case"rejected":throw pt.reason;default:switch(typeof pt.status=="string"?pt.then(ft,ft):(pt.status="pending",pt.then(function(Dt){pt.status==="pending"&&(pt.status="fulfilled",pt.value=Dt)},function(Dt){pt.status==="pending"&&(pt.status="rejected",pt.reason=Dt)})),pt.status){case"fulfilled":return pt.value;case"rejected":throw pt.reason}}throw pt}function St(pt,Dt,yt,kt,Mt){var Kt=typeof pt;(Kt==="undefined"||Kt==="boolean")&&(pt=null);var Xt=!1;if(pt===null)Xt=!0;else switch(Kt){case"bigint":case"string":case"number":Xt=!0;break;case"object":switch(pt.$$typeof){case i:case n:Xt=!0;break;case h:return Xt=pt._init,St(Xt(pt._payload),Dt,yt,kt,Mt)}}if(Xt)return Mt=Mt(pt),Xt=kt===""?"."+$(pt,0):kt,K(Mt)?(yt="",Xt!=null&&(yt=Xt.replace(it,"$&/")+"/"),St(Mt,Dt,yt,"",function(be){return be})):Mt!=null&&(et(Mt)&&(Mt=st(Mt,yt+(Mt.key==null||pt&&pt.key===Mt.key?"":(""+Mt.key).replace(it,"$&/")+"/")+Xt)),Dt.push(Mt)),1;Xt=0;var Qt=kt===""?".":kt+":";if(K(pt))for(var ne=0;ne<pt.length;ne++)kt=pt[ne],Kt=Qt+$(kt,ne),Xt+=St(kt,Dt,yt,Kt,Mt);else if(ne=m(pt),typeof ne=="function")for(pt=ne.call(pt),ne=0;!(kt=pt.next()).done;)kt=kt.value,Kt=Qt+$(kt,ne++),Xt+=St(kt,Dt,yt,Kt,Mt);else if(Kt==="object"){if(typeof pt.then=="function")return St(lt(pt),Dt,yt,kt,Mt);throw Dt=String(pt),Error("Objects are not valid as a React child (found: "+(Dt==="[object Object]"?"object with keys {"+Object.keys(pt).join(", ")+"}":Dt)+"). If you meant to render a collection of children, use an array instead.")}return Xt}function U(pt,Dt,yt){if(pt==null)return pt;var kt=[],Mt=0;return St(pt,kt,"","",function(Kt){return Dt.call(yt,Kt,Mt++)}),kt}function _t(pt){if(pt._status===-1){var Dt=pt._result;Dt=Dt(),Dt.then(function(yt){(pt._status===0||pt._status===-1)&&(pt._status=1,pt._result=yt)},function(yt){(pt._status===0||pt._status===-1)&&(pt._status=2,pt._result=yt)}),pt._status===-1&&(pt._status=0,pt._result=Dt)}if(pt._status===1)return pt._result.default;throw pt._result}var Ot=typeof reportError=="function"?reportError:function(pt){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Dt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof pt=="object"&&pt!==null&&typeof pt.message=="string"?String(pt.message):String(pt),error:pt});if(!window.dispatchEvent(Dt))return}else if(typeof Oh=="object"&&typeof Oh.emit=="function"){Oh.emit("uncaughtException",pt);return}console.error(pt)};function zt(){}return vn.Children={map:U,forEach:function(pt,Dt,yt){U(pt,function(){Dt.apply(this,arguments)},yt)},count:function(pt){var Dt=0;return U(pt,function(){Dt++}),Dt},toArray:function(pt){return U(pt,function(Dt){return Dt})||[]},only:function(pt){if(!et(pt))throw Error("React.Children.only expected to receive a single React element child.");return pt}},vn.Component=E,vn.Fragment=t,vn.Profiler=r,vn.PureComponent=F,vn.StrictMode=e,vn.Suspense=u,vn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,vn.__COMPILER_RUNTIME={__proto__:null,c:function(pt){return Z.H.useMemoCache(pt)}},vn.cache=function(pt){return function(){return pt.apply(null,arguments)}},vn.cloneElement=function(pt,Dt,yt){if(pt==null)throw Error("The argument must be a React element, but you passed "+pt+".");var kt=_({},pt.props),Mt=pt.key,Kt=void 0;if(Dt!=null)for(Xt in Dt.ref!==void 0&&(Kt=void 0),Dt.key!==void 0&&(Mt=""+Dt.key),Dt)!ct.call(Dt,Xt)||Xt==="key"||Xt==="__self"||Xt==="__source"||Xt==="ref"&&Dt.ref===void 0||(kt[Xt]=Dt[Xt]);var Xt=arguments.length-2;if(Xt===1)kt.children=yt;else if(1<Xt){for(var Qt=Array(Xt),ne=0;ne<Xt;ne++)Qt[ne]=arguments[ne+2];kt.children=Qt}return ht(pt.type,Mt,void 0,void 0,Kt,kt)},vn.createContext=function(pt){return pt={$$typeof:a,_currentValue:pt,_currentValue2:pt,_threadCount:0,Provider:null,Consumer:null},pt.Provider=pt,pt.Consumer={$$typeof:o,_context:pt},pt},vn.createElement=function(pt,Dt,yt){var kt,Mt={},Kt=null;if(Dt!=null)for(kt in Dt.key!==void 0&&(Kt=""+Dt.key),Dt)ct.call(Dt,kt)&&kt!=="key"&&kt!=="__self"&&kt!=="__source"&&(Mt[kt]=Dt[kt]);var Xt=arguments.length-2;if(Xt===1)Mt.children=yt;else if(1<Xt){for(var Qt=Array(Xt),ne=0;ne<Xt;ne++)Qt[ne]=arguments[ne+2];Mt.children=Qt}if(pt&&pt.defaultProps)for(kt in Xt=pt.defaultProps,Xt)Mt[kt]===void 0&&(Mt[kt]=Xt[kt]);return ht(pt,Kt,void 0,void 0,null,Mt)},vn.createRef=function(){return{current:null}},vn.forwardRef=function(pt){return{$$typeof:s,render:pt}},vn.isValidElement=et,vn.lazy=function(pt){return{$$typeof:h,_payload:{_status:-1,_result:pt},_init:_t}},vn.memo=function(pt,Dt){return{$$typeof:c,type:pt,compare:Dt===void 0?null:Dt}},vn.startTransition=function(pt){var Dt=Z.T,yt={};Z.T=yt;try{var kt=pt(),Mt=Z.S;Mt!==null&&Mt(yt,kt),typeof kt=="object"&&kt!==null&&typeof kt.then=="function"&&kt.then(zt,Ot)}catch(Kt){Ot(Kt)}finally{Z.T=Dt}},vn.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},vn.use=function(pt){return Z.H.use(pt)},vn.useActionState=function(pt,Dt,yt){return Z.H.useActionState(pt,Dt,yt)},vn.useCallback=function(pt,Dt){return Z.H.useCallback(pt,Dt)},vn.useContext=function(pt){return Z.H.useContext(pt)},vn.useDebugValue=function(){},vn.useDeferredValue=function(pt,Dt){return Z.H.useDeferredValue(pt,Dt)},vn.useEffect=function(pt,Dt,yt){var kt=Z.H;if(typeof yt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return kt.useEffect(pt,Dt)},vn.useId=function(){return Z.H.useId()},vn.useImperativeHandle=function(pt,Dt,yt){return Z.H.useImperativeHandle(pt,Dt,yt)},vn.useInsertionEffect=function(pt,Dt){return Z.H.useInsertionEffect(pt,Dt)},vn.useLayoutEffect=function(pt,Dt){return Z.H.useLayoutEffect(pt,Dt)},vn.useMemo=function(pt,Dt){return Z.H.useMemo(pt,Dt)},vn.useOptimistic=function(pt,Dt){return Z.H.useOptimistic(pt,Dt)},vn.useReducer=function(pt,Dt,yt){return Z.H.useReducer(pt,Dt,yt)},vn.useRef=function(pt){return Z.H.useRef(pt)},vn.useState=function(pt){return Z.H.useState(pt)},vn.useSyncExternalStore=function(pt,Dt,yt){return Z.H.useSyncExternalStore(pt,Dt,yt)},vn.useTransition=function(){return Z.H.useTransition()},vn.version="19.1.0",vn}var uT;function wg(){return uT||(uT=1,kw.exports=nR()),kw.exports}var Nt=wg();const gc=Wh(Nt);var Dw={exports:{}},iv={},Pw={exports:{}},Nw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cT;function rR(){return cT||(cT=1,function(i){function n(U,_t){var Ot=U.length;U.push(_t);t:for(;0<Ot;){var zt=Ot-1>>>1,pt=U[zt];if(0<r(pt,_t))U[zt]=_t,U[Ot]=pt,Ot=zt;else break t}}function t(U){return U.length===0?null:U[0]}function e(U){if(U.length===0)return null;var _t=U[0],Ot=U.pop();if(Ot!==_t){U[0]=Ot;t:for(var zt=0,pt=U.length,Dt=pt>>>1;zt<Dt;){var yt=2*(zt+1)-1,kt=U[yt],Mt=yt+1,Kt=U[Mt];if(0>r(kt,Ot))Mt<pt&&0>r(Kt,kt)?(U[zt]=Kt,U[Mt]=Ot,zt=Mt):(U[zt]=kt,U[yt]=Ot,zt=yt);else if(Mt<pt&&0>r(Kt,Ot))U[zt]=Kt,U[Mt]=Ot,zt=Mt;else break t}}return _t}function r(U,_t){var Ot=U.sortIndex-_t.sortIndex;return Ot!==0?Ot:U.id-_t.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();i.unstable_now=function(){return a.now()-s}}var u=[],c=[],h=1,v=null,m=3,y=!1,_=!1,C=!1,E=!1,D=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function K(U){for(var _t=t(c);_t!==null;){if(_t.callback===null)e(c);else if(_t.startTime<=U)e(c),_t.sortIndex=_t.expirationTime,n(u,_t);else break;_t=t(c)}}function Z(U){if(C=!1,K(U),!_)if(t(u)!==null)_=!0,ct||(ct=!0,$());else{var _t=t(c);_t!==null&&St(Z,_t.startTime-U)}}var ct=!1,ht=-1,st=5,et=-1;function nt(){return E?!0:!(i.unstable_now()-et<st)}function it(){if(E=!1,ct){var U=i.unstable_now();et=U;var _t=!0;try{t:{_=!1,C&&(C=!1,F(ht),ht=-1),y=!0;var Ot=m;try{e:{for(K(U),v=t(u);v!==null&&!(v.expirationTime>U&&nt());){var zt=v.callback;if(typeof zt=="function"){v.callback=null,m=v.priorityLevel;var pt=zt(v.expirationTime<=U);if(U=i.unstable_now(),typeof pt=="function"){v.callback=pt,K(U),_t=!0;break e}v===t(u)&&e(u),K(U)}else e(u);v=t(u)}if(v!==null)_t=!0;else{var Dt=t(c);Dt!==null&&St(Z,Dt.startTime-U),_t=!1}}break t}finally{v=null,m=Ot,y=!1}_t=void 0}}finally{_t?$():ct=!1}}}var $;if(typeof V=="function")$=function(){V(it)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,lt=ft.port2;ft.port1.onmessage=it,$=function(){lt.postMessage(null)}}else $=function(){D(it,0)};function St(U,_t){ht=D(function(){U(i.unstable_now())},_t)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(U){U.callback=null},i.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):st=0<U?Math.floor(1e3/U):5},i.unstable_getCurrentPriorityLevel=function(){return m},i.unstable_next=function(U){switch(m){case 1:case 2:case 3:var _t=3;break;default:_t=m}var Ot=m;m=_t;try{return U()}finally{m=Ot}},i.unstable_requestPaint=function(){E=!0},i.unstable_runWithPriority=function(U,_t){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Ot=m;m=U;try{return _t()}finally{m=Ot}},i.unstable_scheduleCallback=function(U,_t,Ot){var zt=i.unstable_now();switch(typeof Ot=="object"&&Ot!==null?(Ot=Ot.delay,Ot=typeof Ot=="number"&&0<Ot?zt+Ot:zt):Ot=zt,U){case 1:var pt=-1;break;case 2:pt=250;break;case 5:pt=1073741823;break;case 4:pt=1e4;break;default:pt=5e3}return pt=Ot+pt,U={id:h++,callback:_t,priorityLevel:U,startTime:Ot,expirationTime:pt,sortIndex:-1},Ot>zt?(U.sortIndex=Ot,n(c,U),t(u)===null&&U===t(c)&&(C?(F(ht),ht=-1):C=!0,St(Z,Ot-zt))):(U.sortIndex=pt,n(u,U),_||y||(_=!0,ct||(ct=!0,$()))),U},i.unstable_shouldYield=nt,i.unstable_wrapCallback=function(U){var _t=m;return function(){var Ot=m;m=_t;try{return U.apply(this,arguments)}finally{m=Ot}}}}(Nw)),Nw}var fT;function iR(){return fT||(fT=1,Pw.exports=rR()),Pw.exports}var Rw={exports:{}},uo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dT;function oR(){if(dT)return uo;dT=1;var i=wg();function n(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var e={d:{f:t,r:function(){throw Error(n(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(u,c,h){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:u,containerInfo:c,implementation:h}}var a=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return uo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=e,uo.createPortal=function(u,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(n(299));return o(u,c,null,h)},uo.flushSync=function(u){var c=a.T,h=e.p;try{if(a.T=null,e.p=2,u)return u()}finally{a.T=c,e.p=h,e.d.f()}},uo.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,e.d.C(u,c))},uo.prefetchDNS=function(u){typeof u=="string"&&e.d.D(u)},uo.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var h=c.as,v=s(h,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,y=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;h==="style"?e.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:v,integrity:m,fetchPriority:y}):h==="script"&&e.d.X(u,{crossOrigin:v,integrity:m,fetchPriority:y,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},uo.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var h=s(c.as,c.crossOrigin);e.d.M(u,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&e.d.M(u)},uo.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var h=c.as,v=s(h,c.crossOrigin);e.d.L(u,h,{crossOrigin:v,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},uo.preloadModule=function(u,c){if(typeof u=="string")if(c){var h=s(c.as,c.crossOrigin);e.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else e.d.m(u)},uo.requestFormReset=function(u){e.d.r(u)},uo.unstable_batchedUpdates=function(u,c){return u(c)},uo.useFormState=function(u,c,h){return a.H.useFormState(u,c,h)},uo.useFormStatus=function(){return a.H.useHostTransitionStatus()},uo.version="19.1.0",uo}var hT;function lk(){if(hT)return Rw.exports;hT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Rw.exports=oR(),Rw.exports}var pT;function aR(){if(pT)return iv;pT=1;var i=iR(),n=wg(),t=lk();function e(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function o(l){var d=l,g=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(g=d.return),l=d.return;while(l)}return d.tag===3?g:null}function a(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function s(l){if(o(l)!==l)throw Error(e(188))}function u(l){var d=l.alternate;if(!d){if(d=o(l),d===null)throw Error(e(188));return d!==l?null:l}for(var g=l,x=d;;){var T=g.return;if(T===null)break;var M=T.alternate;if(M===null){if(x=T.return,x!==null){g=x;continue}break}if(T.child===M.child){for(M=T.child;M;){if(M===g)return s(T),l;if(M===x)return s(T),d;M=M.sibling}throw Error(e(188))}if(g.return!==x.return)g=T,x=M;else{for(var G=!1,at=T.child;at;){if(at===g){G=!0,g=T,x=M;break}if(at===x){G=!0,x=T,g=M;break}at=at.sibling}if(!G){for(at=M.child;at;){if(at===g){G=!0,g=M,x=T;break}if(at===x){G=!0,x=M,g=T;break}at=at.sibling}if(!G)throw Error(e(189))}}if(g.alternate!==x)throw Error(e(190))}if(g.tag!==3)throw Error(e(188));return g.stateNode.current===g?l:d}function c(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=c(l),d!==null)return d;l=l.sibling}return null}var h=Object.assign,v=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),V=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),ct=Symbol.for("react.suspense_list"),ht=Symbol.for("react.memo"),st=Symbol.for("react.lazy"),et=Symbol.for("react.activity"),nt=Symbol.for("react.memo_cache_sentinel"),it=Symbol.iterator;function $(l){return l===null||typeof l!="object"?null:(l=it&&l[it]||l["@@iterator"],typeof l=="function"?l:null)}var ft=Symbol.for("react.client.reference");function lt(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===ft?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case _:return"Fragment";case E:return"Profiler";case C:return"StrictMode";case Z:return"Suspense";case ct:return"SuspenseList";case et:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case V:return(l.displayName||"Context")+".Provider";case F:return(l._context.displayName||"Context")+".Consumer";case K:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case ht:return d=l.displayName||null,d!==null?d:lt(l.type)||"Memo";case st:d=l._payload,l=l._init;try{return lt(l(d))}catch{}}return null}var St=Array.isArray,U=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_t=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ot={pending:!1,data:null,method:null,action:null},zt=[],pt=-1;function Dt(l){return{current:l}}function yt(l){0>pt||(l.current=zt[pt],zt[pt]=null,pt--)}function kt(l,d){pt++,zt[pt]=l.current,l.current=d}var Mt=Dt(null),Kt=Dt(null),Xt=Dt(null),Qt=Dt(null);function ne(l,d){switch(kt(Xt,d),kt(Kt,l),kt(Mt,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?PC(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=PC(d),l=NC(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}yt(Mt),kt(Mt,l)}function be(){yt(Mt),yt(Kt),yt(Xt)}function Pe(l){l.memoizedState!==null&&kt(Qt,l);var d=Mt.current,g=NC(d,l.type);d!==g&&(kt(Kt,l),kt(Mt,g))}function Ee(l){Kt.current===l&&(yt(Mt),yt(Kt)),Qt.current===l&&(yt(Qt),Zp._currentValue=Ot)}var Oe=Object.prototype.hasOwnProperty,Ke=i.unstable_scheduleCallback,De=i.unstable_cancelCallback,Ut=i.unstable_shouldYield,ce=i.unstable_requestPaint,ie=i.unstable_now,P=i.unstable_getCurrentPriorityLevel,k=i.unstable_ImmediatePriority,N=i.unstable_UserBlockingPriority,q=i.unstable_NormalPriority,ut=i.unstable_LowPriority,Q=i.unstable_IdlePriority,gt=i.log,Tt=i.unstable_setDisableYieldValue,he=null,X=null;function L(l){if(typeof gt=="function"&&Tt(l),X&&typeof X.setStrictMode=="function")try{X.setStrictMode(he,l)}catch{}}var A=Math.clz32?Math.clz32:mt,W=Math.log,B=Math.LN2;function mt(l){return l>>>=0,l===0?32:31-(W(l)/B|0)|0}var dt=256,qt=4194304;function fe(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function de(l,d,g){var x=l.pendingLanes;if(x===0)return 0;var T=0,M=l.suspendedLanes,G=l.pingedLanes;l=l.warmLanes;var at=x&134217727;return at!==0?(x=at&~M,x!==0?T=fe(x):(G&=at,G!==0?T=fe(G):g||(g=at&~l,g!==0&&(T=fe(g))))):(at=x&~M,at!==0?T=fe(at):G!==0?T=fe(G):g||(g=x&~l,g!==0&&(T=fe(g)))),T===0?0:d!==0&&d!==T&&(d&M)===0&&(M=T&-T,g=d&-d,M>=g||M===32&&(g&4194048)!==0)?d:T}function ae(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function xe(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function en(){var l=dt;return dt<<=1,(dt&4194048)===0&&(dt=256),l}function dn(){var l=qt;return qt<<=1,(qt&62914560)===0&&(qt=4194304),l}function sn(l){for(var d=[],g=0;31>g;g++)d.push(l);return d}function Un(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Lr(l,d,g,x,T,M){var G=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var at=l.entanglements,At=l.expirationTimes,Ht=l.hiddenUpdates;for(g=G&~g;0<g;){var re=31-A(g),ue=1<<re;at[re]=0,At[re]=-1;var Wt=Ht[re];if(Wt!==null)for(Ht[re]=null,re=0;re<Wt.length;re++){var $t=Wt[re];$t!==null&&($t.lane&=-536870913)}g&=~ue}x!==0&&ot(l,x,0),M!==0&&T===0&&l.tag!==0&&(l.suspendedLanes|=M&~(G&~d))}function ot(l,d,g){l.pendingLanes|=d,l.suspendedLanes&=~d;var x=31-A(d);l.entangledLanes|=d,l.entanglements[x]=l.entanglements[x]|1073741824|g&4194090}function Ct(l,d){var g=l.entangledLanes|=d;for(l=l.entanglements;g;){var x=31-A(g),T=1<<x;T&d|l[x]&d&&(l[x]|=d),g&=~T}}function Lt(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function ee(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function we(){var l=_t.p;return l!==0?l:(l=window.event,l===void 0?32:ZC(l.type))}function Fe(l,d){var g=_t.p;try{return _t.p=l,d()}finally{_t.p=g}}var We=Math.random().toString(36).slice(2),cn="__reactFiber$"+We,Sn="__reactProps$"+We,Pn="__reactContainer$"+We,zi="__reactEvents$"+We,Gn="__reactListeners$"+We,_i="__reactHandles$"+We,Wi="__reactResources$"+We,gn="__reactMarker$"+We;function ir(l){delete l[cn],delete l[Sn],delete l[zi],delete l[Gn],delete l[_i]}function rn(l){var d=l[cn];if(d)return d;for(var g=l.parentNode;g;){if(d=g[Pn]||g[cn]){if(g=d.alternate,d.child!==null||g!==null&&g.child!==null)for(l=IC(l);l!==null;){if(g=l[cn])return g;l=IC(l)}return d}l=g,g=l.parentNode}return null}function br(l){if(l=l[cn]||l[Pn]){var d=l.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return l}return null}function He(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(e(33))}function qr(l){var d=l[Wi];return d||(d=l[Wi]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function An(l){l[gn]=!0}var wr=new Set,xr={};function Sr(l,d){pn(l,d),pn(l+"Capture",d)}function pn(l,d){for(xr[l]=d,l=0;l<d.length;l++)wr.add(d[l])}var Me=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jr={},Yn={};function Kr(l){return Oe.call(Yn,l)?!0:Oe.call(jr,l)?!1:Me.test(l)?Yn[l]=!0:(jr[l]=!0,!1)}function ln(l,d,g){if(Kr(d))if(g===null)l.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var x=d.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+g)}}function kn(l,d,g){if(g===null)l.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+g)}}function _r(l,d,g,x){if(x===null)l.removeAttribute(g);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(g);return}l.setAttributeNS(d,g,""+x)}}var qi,le;function Be(l){if(qi===void 0)try{throw Error()}catch(g){var d=g.stack.trim().match(/\n( *(at )?)/);qi=d&&d[1]||"",le=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qi+l+le}var Ki=!1;function tt(l,d){if(!l||Ki)return"";Ki=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(d){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch($t){var Wt=$t}Reflect.construct(l,[],ue)}else{try{ue.call()}catch($t){Wt=$t}l.call(ue.prototype)}}else{try{throw Error()}catch($t){Wt=$t}(ue=l())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch($t){if($t&&Wt&&typeof $t.stack=="string")return[$t.stack,Wt.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var M=x.DetermineComponentFrameRoot(),G=M[0],at=M[1];if(G&&at){var At=G.split(`
`),Ht=at.split(`
`);for(T=x=0;x<At.length&&!At[x].includes("DetermineComponentFrameRoot");)x++;for(;T<Ht.length&&!Ht[T].includes("DetermineComponentFrameRoot");)T++;if(x===At.length||T===Ht.length)for(x=At.length-1,T=Ht.length-1;1<=x&&0<=T&&At[x]!==Ht[T];)T--;for(;1<=x&&0<=T;x--,T--)if(At[x]!==Ht[T]){if(x!==1||T!==1)do if(x--,T--,0>T||At[x]!==Ht[T]){var re=`
`+At[x].replace(" at new "," at ");return l.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",l.displayName)),re}while(1<=x&&0<=T);break}}}finally{Ki=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?Be(g):""}function wt(l){switch(l.tag){case 26:case 27:case 5:return Be(l.type);case 16:return Be("Lazy");case 13:return Be("Suspense");case 19:return Be("SuspenseList");case 0:case 15:return tt(l.type,!1);case 11:return tt(l.type.render,!1);case 1:return tt(l.type,!0);case 31:return Be("Activity");default:return""}}function Jt(l){try{var d="";do d+=wt(l),l=l.return;while(l);return d}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function oe(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function pe(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function nn(l){var d=pe(l)?"checked":"value",g=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),x=""+l[d];if(!l.hasOwnProperty(d)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var T=g.get,M=g.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return T.call(this)},set:function(G){x=""+G,M.call(this,G)}}),Object.defineProperty(l,d,{enumerable:g.enumerable}),{getValue:function(){return x},setValue:function(G){x=""+G},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function on(l){l._valueTracker||(l._valueTracker=nn(l))}function Hn(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var g=d.getValue(),x="";return l&&(x=pe(l)?l.checked?"true":"false":l.value),l=x,l!==g?(d.setValue(l),!0):!1}function _n(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var oo=/[\n"\\]/g;function $r(l){return l.replace(oo,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function ha(l,d,g,x,T,M,G,at){l.name="",G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?l.type=G:l.removeAttribute("type"),d!=null?G==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+oe(d)):l.value!==""+oe(d)&&(l.value=""+oe(d)):G!=="submit"&&G!=="reset"||l.removeAttribute("value"),d!=null?pa(l,G,oe(d)):g!=null?pa(l,G,oe(g)):x!=null&&l.removeAttribute("value"),T==null&&M!=null&&(l.defaultChecked=!!M),T!=null&&(l.checked=T&&typeof T!="function"&&typeof T!="symbol"),at!=null&&typeof at!="function"&&typeof at!="symbol"&&typeof at!="boolean"?l.name=""+oe(at):l.removeAttribute("name")}function Na(l,d,g,x,T,M,G,at){if(M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(l.type=M),d!=null||g!=null){if(!(M!=="submit"&&M!=="reset"||d!=null))return;g=g!=null?""+oe(g):"",d=d!=null?""+oe(d):g,at||d===l.value||(l.value=d),l.defaultValue=d}x=x??T,x=typeof x!="function"&&typeof x!="symbol"&&!!x,l.checked=at?l.checked:!!x,l.defaultChecked=!!x,G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(l.name=G)}function pa(l,d,g){d==="number"&&_n(l.ownerDocument)===l||l.defaultValue===""+g||(l.defaultValue=""+g)}function Uo(l,d,g,x){if(l=l.options,d){d={};for(var T=0;T<g.length;T++)d["$"+g[T]]=!0;for(g=0;g<l.length;g++)T=d.hasOwnProperty("$"+l[g].value),l[g].selected!==T&&(l[g].selected=T),T&&x&&(l[g].defaultSelected=!0)}else{for(g=""+oe(g),d=null,T=0;T<l.length;T++){if(l[T].value===g){l[T].selected=!0,x&&(l[T].defaultSelected=!0);return}d!==null||l[T].disabled||(d=l[T])}d!==null&&(d.selected=!0)}}function cs(l,d,g){if(d!=null&&(d=""+oe(d),d!==l.value&&(l.value=d),g==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=g!=null?""+oe(g):""}function fs(l,d,g,x){if(d==null){if(x!=null){if(g!=null)throw Error(e(92));if(St(x)){if(1<x.length)throw Error(e(93));x=x[0]}g=x}g==null&&(g=""),d=g}g=oe(d),l.defaultValue=g,x=l.textContent,x===g&&x!==""&&x!==null&&(l.value=x)}function ao(l,d){if(d){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=d;return}}l.textContent=d}var Ra=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vo(l,d,g){var x=d.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?x?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":x?l.setProperty(d,g):typeof g!="number"||g===0||Ra.has(d)?d==="float"?l.cssFloat=g:l[d]=(""+g).trim():l[d]=g+"px"}function ds(l,d,g){if(d!=null&&typeof d!="object")throw Error(e(62));if(l=l.style,g!=null){for(var x in g)!g.hasOwnProperty(x)||d!=null&&d.hasOwnProperty(x)||(x.indexOf("--")===0?l.setProperty(x,""):x==="float"?l.cssFloat="":l[x]="");for(var T in d)x=d[T],d.hasOwnProperty(T)&&g[T]!==x&&Vo(l,T,x)}else for(var M in d)d.hasOwnProperty(M)&&Vo(l,M,d[M])}function ur(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ir=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ci(l){return bl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var vo=null;function ei(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Qn=null,va=null;function Fo(l){var d=br(l);if(d&&(l=d.stateNode)){var g=l[Sn]||null;t:switch(l=d.stateNode,d.type){case"input":if(ha(l,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),d=g.name,g.type==="radio"&&d!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+$r(""+d)+'"][type="radio"]'),d=0;d<g.length;d++){var x=g[d];if(x!==l&&x.form===l.form){var T=x[Sn]||null;if(!T)throw Error(e(90));ha(x,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(d=0;d<g.length;d++)x=g[d],x.form===l.form&&Hn(x)}break t;case"textarea":cs(l,g.value,g.defaultValue);break t;case"select":d=g.value,d!=null&&Uo(l,!!g.multiple,d,!1)}}}var $i=!1;function La(l,d,g){if($i)return l(d,g);$i=!0;try{var x=l(d);return x}finally{if($i=!1,(Qn!==null||va!==null)&&(hm(),Qn&&(d=Qn,l=va,va=Qn=null,Fo(d),l)))for(d=0;d<l.length;d++)Fo(l[d])}}function di(l,d){var g=l.stateNode;if(g===null)return null;var x=g[Sn]||null;if(x===null)return null;g=x[d];t:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(l=l.type,x=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!x;break t;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(e(231,d,typeof g));return g}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hs=!1;if(Or)try{var Ho={};Object.defineProperty(Ho,"passive",{get:function(){hs=!0}}),window.addEventListener("test",Ho,Ho),window.removeEventListener("test",Ho,Ho)}catch{hs=!1}var Ti=null,so=null,zo=null;function Wo(){if(zo)return zo;var l,d=so,g=d.length,x,T="value"in Ti?Ti.value:Ti.textContent,M=T.length;for(l=0;l<g&&d[l]===T[l];l++);var G=g-l;for(x=1;x<=G&&d[g-x]===T[M-x];x++);return zo=T.slice(l,1<x?1-x:void 0)}function je(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Le(){return!0}function mn(){return!1}function Re(l){function d(g,x,T,M,G){this._reactName=g,this._targetInst=T,this.type=x,this.nativeEvent=M,this.target=G,this.currentTarget=null;for(var at in l)l.hasOwnProperty(at)&&(g=l[at],this[at]=g?g(M):M[at]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?Le:mn,this.isPropagationStopped=mn,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Le)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Le)},persist:function(){},isPersistent:Le}),d}var Nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},or=Re(Nn),Br=h({},Nn,{view:0,detail:0}),qo=Re(Br),hi,pi,ni,Gi=h({},Br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wl,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==ni&&(ni&&l.type==="mousemove"?(hi=l.screenX-ni.screenX,pi=l.screenY-ni.screenY):pi=hi=0,ni=l),hi)},movementY:function(l){return"movementY"in l?l.movementY:pi}}),ja=Re(Gi),Ls=h({},Gi,{dataTransfer:0}),Gr=Re(Ls),Kf=h({},Br,{relatedTarget:0}),js=Re(Kf),$f=h({},Nn,{animationName:0,elapsedTime:0,pseudoElement:0}),Sc=Re($f),_c=h({},Nn,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),uu=Re(_c),Gf=h({},Nn,{data:0}),Cc=Re(Gf),cu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xf(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=Tc[l])?!!d[l]:!1}function wl(){return Xf}var fu=h({},Br,{key:function(l){if(l.key){var d=cu[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=je(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Yf[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wl,charCode:function(l){return l.type==="keypress"?je(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?je(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),ps=Re(fu),Jf=h({},Gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zf=Re(Jf),Ec=h({},Br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wl}),Is=Re(Ec),cr=h({},Nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bs=Re(cr),Ia=h({},Gi,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Us=Re(Ia),Qf=h({},Nn,{newState:0,oldState:0}),Oc=Re(Qf),Ac=[9,13,27,32],Vs=Or&&"CompositionEvent"in window,Ko=null;Or&&"documentMode"in document&&(Ko=document.documentMode);var td=Or&&"TextEvent"in window&&!Ko,kc=Or&&(!Vs||Ko&&8<Ko&&11>=Ko),vs=" ",du=!1;function Mc(l,d){switch(l){case"keyup":return Ac.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gs(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var vi=!1;function Fs(l,d){switch(l){case"compositionend":return gs(d);case"keypress":return d.which!==32?null:(du=!0,vs);case"textInput":return l=d.data,l===vs&&du?null:l;default:return null}}function xl(l,d){if(vi)return l==="compositionend"||!Vs&&Mc(l,d)?(l=Wo(),zo=so=Ti=null,vi=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return kc&&d.locale!=="ko"?null:d.data;default:return null}}var ed={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yi(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!ed[l.type]:d==="textarea"}function Ba(l,d,g,x){Qn?va?va.push(x):va=[x]:Qn=x,d=bm(d,"onChange"),0<d.length&&(g=new or("onChange","change",null,g,x),l.push({event:g,listeners:d}))}var z=null,rt=null;function xt(l){OC(l,0)}function Et(l){var d=He(l);if(Hn(d))return l}function Bt(l,d){if(l==="change")return d}var jt=!1;if(Or){var te;if(Or){var me="oninput"in document;if(!me){var Ze=document.createElement("div");Ze.setAttribute("oninput","return;"),me=typeof Ze.oninput=="function"}te=me}else te=!1;jt=te&&(!document.documentMode||9<document.documentMode)}function Ye(){z&&(z.detachEvent("onpropertychange",Ar),rt=z=null)}function Ar(l){if(l.propertyName==="value"&&Et(rt)){var d=[];Ba(d,rt,l,ei(l)),La(xt,d)}}function gi(l,d,g){l==="focusin"?(Ye(),z=d,rt=g,z.attachEvent("onpropertychange",Ar)):l==="focusout"&&Ye()}function nd(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Et(rt)}function Dc(l,d){if(l==="click")return Et(d)}function Mg(l,d){if(l==="input"||l==="change")return Et(d)}function Pc(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var lo=typeof Object.is=="function"?Object.is:Pc;function hu(l,d){if(lo(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var g=Object.keys(l),x=Object.keys(d);if(g.length!==x.length)return!1;for(x=0;x<g.length;x++){var T=g[x];if(!Oe.call(d,T)||!lo(l[T],d[T]))return!1}return!0}function rd(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Nc(l,d){var g=rd(l);l=0;for(var x;g;){if(g.nodeType===3){if(x=l+g.textContent.length,l<=d&&x>=d)return{node:g,offset:d-l};l=x}t:{for(;g;){if(g.nextSibling){g=g.nextSibling;break t}g=g.parentNode}g=void 0}g=rd(g)}}function Zh(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?Zh(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function Rc(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=_n(l.document);d instanceof l.HTMLIFrameElement;){try{var g=typeof d.contentWindow.location.href=="string"}catch{g=!1}if(g)l=d.contentWindow;else break;d=_n(l.document)}return d}function go(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var Dg=Or&&"documentMode"in document&&11>=document.documentMode,Hs=null,Lc=null,pu=null,id=!1;function od(l,d,g){var x=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;id||Hs==null||Hs!==_n(x)||(x=Hs,"selectionStart"in x&&go(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),pu&&hu(pu,x)||(pu=x,x=bm(Lc,"onSelect"),0<x.length&&(d=new or("onSelect","select",null,d,g),l.push({event:d,listeners:x}),d.target=Hs)))}function Sl(l,d){var g={};return g[l.toLowerCase()]=d.toLowerCase(),g["Webkit"+l]="webkit"+d,g["Moz"+l]="moz"+d,g}var vu={animationend:Sl("Animation","AnimationEnd"),animationiteration:Sl("Animation","AnimationIteration"),animationstart:Sl("Animation","AnimationStart"),transitionrun:Sl("Transition","TransitionRun"),transitionstart:Sl("Transition","TransitionStart"),transitioncancel:Sl("Transition","TransitionCancel"),transitionend:Sl("Transition","TransitionEnd")},Qh={},zs={};Or&&(zs=document.createElement("div").style,"AnimationEvent"in window||(delete vu.animationend.animation,delete vu.animationiteration.animation,delete vu.animationstart.animation),"TransitionEvent"in window||delete vu.transitionend.transition);function $o(l){if(Qh[l])return Qh[l];if(!vu[l])return l;var d=vu[l],g;for(g in d)if(d.hasOwnProperty(g)&&g in zs)return Qh[l]=d[g];return l}var _l=$o("animationend"),ad=$o("animationiteration"),sd=$o("animationstart"),Pg=$o("transitionrun"),tp=$o("transitionstart"),Cl=$o("transitioncancel"),Ws=$o("transitionend"),Ei=new Map,Ua="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ua.push("scrollEnd");function ri(l,d){Ei.set(l,d),Sr(d,[l])}var jc=new WeakMap;function Go(l,d){if(typeof l=="object"&&l!==null){var g=jc.get(l);return g!==void 0?g:(d={value:l,source:d,stack:Jt(d)},jc.set(l,d),d)}return{value:l,source:d,stack:Jt(d)}}var mo=[],Va=0,ld=0;function Ic(){for(var l=Va,d=ld=Va=0;d<l;){var g=mo[d];mo[d++]=null;var x=mo[d];mo[d++]=null;var T=mo[d];mo[d++]=null;var M=mo[d];if(mo[d++]=null,x!==null&&T!==null){var G=x.pending;G===null?T.next=T:(T.next=G.next,G.next=T),x.pending=T}M!==0&&np(g,T,M)}}function Tl(l,d,g,x){mo[Va++]=l,mo[Va++]=d,mo[Va++]=g,mo[Va++]=x,ld|=x,l.lanes|=x,l=l.alternate,l!==null&&(l.lanes|=x)}function ep(l,d,g,x){return Tl(l,d,g,x),gu(l)}function qs(l,d){return Tl(l,null,null,d),gu(l)}function np(l,d,g){l.lanes|=g;var x=l.alternate;x!==null&&(x.lanes|=g);for(var T=!1,M=l.return;M!==null;)M.childLanes|=g,x=M.alternate,x!==null&&(x.childLanes|=g),M.tag===22&&(l=M.stateNode,l===null||l._visibility&1||(T=!0)),l=M,M=M.return;return l.tag===3?(M=l.stateNode,T&&d!==null&&(T=31-A(g),l=M.hiddenUpdates,x=l[T],x===null?l[T]=[d]:x.push(d),d.lane=g|536870912),M):null}function gu(l){if(50<Wp)throw Wp=0,Zb=null,Error(e(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var Ks={};function mu(l,d,g,x){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oi(l,d,g,x){return new mu(l,d,g,x)}function ud(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Yo(l,d){var g=l.alternate;return g===null?(g=Oi(l.tag,d,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=d,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&65011712,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,d=l.dependencies,g.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function Ng(l,d){l.flags&=65011714;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,d=g.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function cd(l,d,g,x,T,M){var G=0;if(x=l,typeof l=="function")ud(l)&&(G=1);else if(typeof l=="string")G=UN(l,g,Mt.current)?26:l==="html"||l==="head"||l==="body"?27:5;else t:switch(l){case et:return l=Oi(31,g,d,T),l.elementType=et,l.lanes=M,l;case _:return El(g.children,T,M,d);case C:G=8,T|=24;break;case E:return l=Oi(12,g,d,T|2),l.elementType=E,l.lanes=M,l;case Z:return l=Oi(13,g,d,T),l.elementType=Z,l.lanes=M,l;case ct:return l=Oi(19,g,d,T),l.elementType=ct,l.lanes=M,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case D:case V:G=10;break t;case F:G=9;break t;case K:G=11;break t;case ht:G=14;break t;case st:G=16,x=null;break t}G=29,g=Error(e(130,l===null?"null":typeof l,"")),x=null}return d=Oi(G,g,d,T),d.elementType=l,d.type=x,d.lanes=M,d}function El(l,d,g,x){return l=Oi(7,l,x,d),l.lanes=g,l}function Bc(l,d,g){return l=Oi(6,l,null,d),l.lanes=g,l}function Uc(l,d,g){return d=Oi(4,l.children!==null?l.children:[],l.key,d),d.lanes=g,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var ga=[],Fa=0,fd=null,Ol=0,yo=[],Ai=0,$s=null,Xi=1,bo="";function wo(l,d){ga[Fa++]=Ol,ga[Fa++]=fd,fd=l,Ol=d}function yu(l,d,g){yo[Ai++]=Xi,yo[Ai++]=bo,yo[Ai++]=$s,$s=l;var x=Xi;l=bo;var T=32-A(x)-1;x&=~(1<<T),g+=1;var M=32-A(d)+T;if(30<M){var G=T-T%5;M=(x&(1<<G)-1).toString(32),x>>=G,T-=G,Xi=1<<32-A(d)+T|g<<T|x,bo=M+l}else Xi=1<<M|g<<T|x,bo=l}function Gs(l){l.return!==null&&(wo(l,1),yu(l,1,0))}function dd(l){for(;l===fd;)fd=ga[--Fa],ga[Fa]=null,Ol=ga[--Fa],ga[Fa]=null;for(;l===$s;)$s=yo[--Ai],yo[Ai]=null,bo=yo[--Ai],yo[Ai]=null,Xi=yo[--Ai],yo[Ai]=null}var ki=null,fr=null,Rn=!1,xo=null,Mi=!1,rp=Error(e(519));function Al(l){var d=Error(e(418,""));throw dr(Go(d,l)),rp}function Rg(l){var d=l.stateNode,g=l.type,x=l.memoizedProps;switch(d[cn]=l,d[Sn]=x,g){case"dialog":Tn("cancel",d),Tn("close",d);break;case"iframe":case"object":case"embed":Tn("load",d);break;case"video":case"audio":for(g=0;g<Kp.length;g++)Tn(Kp[g],d);break;case"source":Tn("error",d);break;case"img":case"image":case"link":Tn("error",d),Tn("load",d);break;case"details":Tn("toggle",d);break;case"input":Tn("invalid",d),Na(d,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0),on(d);break;case"select":Tn("invalid",d);break;case"textarea":Tn("invalid",d),fs(d,x.value,x.defaultValue,x.children),on(d)}g=x.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||d.textContent===""+g||x.suppressHydrationWarning===!0||DC(d.textContent,g)?(x.popover!=null&&(Tn("beforetoggle",d),Tn("toggle",d)),x.onScroll!=null&&Tn("scroll",d),x.onScrollEnd!=null&&Tn("scrollend",d),x.onClick!=null&&(d.onclick=wm),d=!0):d=!1,d||Al(l)}function Lg(l){for(ki=l.return;ki;)switch(ki.tag){case 5:case 13:Mi=!1;return;case 27:case 3:Mi=!0;return;default:ki=ki.return}}function Vc(l){if(l!==ki)return!1;if(!Rn)return Lg(l),Rn=!0,!1;var d=l.tag,g;if((g=d!==3&&d!==27)&&((g=d===5)&&(g=l.type,g=!(g!=="form"&&g!=="button")||pw(l.type,l.memoizedProps)),g=!g),g&&fr&&Al(l),Lg(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(e(317));t:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8)if(g=l.data,g==="/$"){if(d===0){fr=_s(l.nextSibling);break t}d--}else g!=="$"&&g!=="$!"&&g!=="$?"||d++;l=l.nextSibling}fr=null}}else d===27?(d=fr,Hu(l.type)?(l=yw,yw=null,fr=l):fr=d):fr=ki?_s(l.stateNode.nextSibling):null;return!0}function Fc(){fr=ki=null,Rn=!1}function Ji(){var l=xo;return l!==null&&(ta===null?ta=l:ta.push.apply(ta,l),xo=null),l}function dr(l){xo===null?xo=[l]:xo.push(l)}var ii=Dt(null),tr=null,So=null;function Ys(l,d,g){kt(ii,d._currentValue),d._currentValue=g}function Xo(l){l._currentValue=ii.current,yt(ii)}function ip(l,d,g){for(;l!==null;){var x=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,x!==null&&(x.childLanes|=d)):x!==null&&(x.childLanes&d)!==d&&(x.childLanes|=d),l===g)break;l=l.return}}function op(l,d,g,x){var T=l.child;for(T!==null&&(T.return=l);T!==null;){var M=T.dependencies;if(M!==null){var G=T.child;M=M.firstContext;t:for(;M!==null;){var at=M;M=T;for(var At=0;At<d.length;At++)if(at.context===d[At]){M.lanes|=g,at=M.alternate,at!==null&&(at.lanes|=g),ip(M.return,g,l),x||(G=null);break t}M=at.next}}else if(T.tag===18){if(G=T.return,G===null)throw Error(e(341));G.lanes|=g,M=G.alternate,M!==null&&(M.lanes|=g),ip(G,g,l),G=null}else G=T.child;if(G!==null)G.return=T;else for(G=T;G!==null;){if(G===l){G=null;break}if(T=G.sibling,T!==null){T.return=G.return,G=T;break}G=G.return}T=G}}function Hc(l,d,g,x){l=null;for(var T=d,M=!1;T!==null;){if(!M){if((T.flags&524288)!==0)M=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var G=T.alternate;if(G===null)throw Error(e(387));if(G=G.memoizedProps,G!==null){var at=T.type;lo(T.pendingProps.value,G.value)||(l!==null?l.push(at):l=[at])}}else if(T===Qt.current){if(G=T.alternate,G===null)throw Error(e(387));G.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(l!==null?l.push(Zp):l=[Zp])}T=T.return}l!==null&&op(d,l,g,x),d.flags|=262144}function bu(l){for(l=l.firstContext;l!==null;){if(!lo(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Xs(l){tr=l,So=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function oi(l){return pd(tr,l)}function hd(l,d){return tr===null&&Xs(l),pd(l,d)}function pd(l,d){var g=d._currentValue;if(d={context:d,memoizedValue:g,next:null},So===null){if(l===null)throw Error(e(308));So=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else So=So.next=d;return g}var ap=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(g,x){l.push(x)}};this.abort=function(){d.aborted=!0,l.forEach(function(g){return g()})}},jg=i.unstable_scheduleCallback,Ig=i.unstable_NormalPriority,kr={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vd(){return{controller:new ap,data:new Map,refCount:0}}function ms(l){l.refCount--,l.refCount===0&&jg(Ig,function(){l.controller.abort()})}var zc=null,wu=0,ai=0,kl=null;function Fb(l,d){if(zc===null){var g=zc=[];wu=0,ai=ow(),kl={status:"pending",value:void 0,then:function(x){g.push(x)}}}return wu++,d.then(sp,sp),d}function sp(){if(--wu===0&&zc!==null){kl!==null&&(kl.status="fulfilled");var l=zc;zc=null,ai=0,kl=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function _o(l,d){var g=[],x={status:"pending",value:null,reason:null,then:function(T){g.push(T)}};return l.then(function(){x.status="fulfilled",x.value=d;for(var T=0;T<g.length;T++)(0,g[T])(d)},function(T){for(x.status="rejected",x.reason=T,T=0;T<g.length;T++)(0,g[T])(void 0)}),x}var En=U.S;U.S=function(l,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&Fb(l,d),En!==null&&En(l,d)};var mi=Dt(null);function Ha(){var l=mi.current;return l!==null?l:sr.pooledCache}function ma(l,d){d===null?kt(mi,mi.current):kt(mi,d.pool)}function lp(){var l=Ha();return l===null?null:{parent:kr._currentValue,pool:l}}var Ml=Error(e(460)),up=Error(e(474)),gd=Error(e(542)),Wc={then:function(){}};function xu(l){return l=l.status,l==="fulfilled"||l==="rejected"}function qc(){}function md(l,d,g){switch(g=l[g],g===void 0?l.push(d):g!==d&&(d.then(qc,qc),d=g),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,fp(l),l;default:if(typeof d.status=="string")d.then(qc,qc);else{if(l=sr,l!==null&&100<l.shellSuspendCounter)throw Error(e(482));l=d,l.status="pending",l.then(function(x){if(d.status==="pending"){var T=d;T.status="fulfilled",T.value=x}},function(x){if(d.status==="pending"){var T=d;T.status="rejected",T.reason=x}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,fp(l),l}throw Jo=d,Ml}}var Jo=null;function cp(){if(Jo===null)throw Error(e(459));var l=Jo;return Jo=null,l}function fp(l){if(l===Ml||l===gd)throw Error(e(483))}var Js=!1;function Su(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kc(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function ys(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Zs(l,d,g){var x=l.updateQueue;if(x===null)return null;if(x=x.shared,(zn&2)!==0){var T=x.pending;return T===null?d.next=d:(d.next=T.next,T.next=d),x.pending=d,d=gu(l),np(l,null,g),d}return Tl(l,x,d,g),gu(l)}function _u(l,d,g){if(d=d.updateQueue,d!==null&&(d=d.shared,(g&4194048)!==0)){var x=d.lanes;x&=l.pendingLanes,g|=x,d.lanes=g,Ct(l,g)}}function dp(l,d){var g=l.updateQueue,x=l.alternate;if(x!==null&&(x=x.updateQueue,g===x)){var T=null,M=null;if(g=g.firstBaseUpdate,g!==null){do{var G={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};M===null?T=M=G:M=M.next=G,g=g.next}while(g!==null);M===null?T=M=d:M=M.next=d}else T=M=d;g={baseState:x.baseState,firstBaseUpdate:T,lastBaseUpdate:M,shared:x.shared,callbacks:x.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=d:l.next=d,g.lastBaseUpdate=d}var hp=!1;function Qs(){if(hp){var l=kl;if(l!==null)throw l}}function Cu(l,d,g,x){hp=!1;var T=l.updateQueue;Js=!1;var M=T.firstBaseUpdate,G=T.lastBaseUpdate,at=T.shared.pending;if(at!==null){T.shared.pending=null;var At=at,Ht=At.next;At.next=null,G===null?M=Ht:G.next=Ht,G=At;var re=l.alternate;re!==null&&(re=re.updateQueue,at=re.lastBaseUpdate,at!==G&&(at===null?re.firstBaseUpdate=Ht:at.next=Ht,re.lastBaseUpdate=At))}if(M!==null){var ue=T.baseState;G=0,re=Ht=At=null,at=M;do{var Wt=at.lane&-536870913,$t=Wt!==at.lane;if($t?(Mn&Wt)===Wt:(x&Wt)===Wt){Wt!==0&&Wt===ai&&(hp=!0),re!==null&&(re=re.next={lane:0,tag:at.tag,payload:at.payload,callback:null,next:null});t:{var tn=l,Xe=at;Wt=d;var Zn=g;switch(Xe.tag){case 1:if(tn=Xe.payload,typeof tn=="function"){ue=tn.call(Zn,ue,Wt);break t}ue=tn;break t;case 3:tn.flags=tn.flags&-65537|128;case 0:if(tn=Xe.payload,Wt=typeof tn=="function"?tn.call(Zn,ue,Wt):tn,Wt==null)break t;ue=h({},ue,Wt);break t;case 2:Js=!0}}Wt=at.callback,Wt!==null&&(l.flags|=64,$t&&(l.flags|=8192),$t=T.callbacks,$t===null?T.callbacks=[Wt]:$t.push(Wt))}else $t={lane:Wt,tag:at.tag,payload:at.payload,callback:at.callback,next:null},re===null?(Ht=re=$t,At=ue):re=re.next=$t,G|=Wt;if(at=at.next,at===null){if(at=T.shared.pending,at===null)break;$t=at,at=$t.next,$t.next=null,T.lastBaseUpdate=$t,T.shared.pending=null}}while(!0);re===null&&(At=ue),T.baseState=At,T.firstBaseUpdate=Ht,T.lastBaseUpdate=re,M===null&&(T.shared.lanes=0),Bu|=G,l.lanes=G,l.memoizedState=ue}}function Bg(l,d){if(typeof l!="function")throw Error(e(191,l));l.call(d)}function Ug(l,d){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)Bg(g[l],d)}var Dl=Dt(null),bs=Dt(0);function yd(l,d){l=Fl,kt(bs,l),kt(Dl,d),Fl=l|d.baseLanes}function Tu(){kt(bs,Fl),kt(Dl,Dl.current)}function bd(){Fl=bs.current,yt(Dl),yt(bs)}var za=0,hn=null,Vn=null,Mr=null,Ur=!1,ws=!1,tl=!1,$c=0,Eu=0,ya=null,wd=0;function Cr(){throw Error(e(321))}function xd(l,d){if(d===null)return!1;for(var g=0;g<d.length&&g<l.length;g++)if(!lo(l[g],d[g]))return!1;return!0}function Sd(l,d,g,x,T,M){return za=M,hn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,U.H=l===null||l.memoizedState===null?tm:Md,tl=!1,M=g(x,T),tl=!1,ws&&(M=pp(d,g,x,T)),Pl(l),M}function Pl(l){U.H=ef;var d=Vn!==null&&Vn.next!==null;if(za=0,Mr=Vn=hn=null,Ur=!1,Eu=0,ya=null,d)throw Error(e(300));l===null||si||(l=l.dependencies,l!==null&&bu(l)&&(si=!0))}function pp(l,d,g,x){hn=l;var T=0;do{if(ws&&(ya=null),Eu=0,ws=!1,25<=T)throw Error(e(301));if(T+=1,Mr=Vn=null,l.updateQueue!=null){var M=l.updateQueue;M.lastEffect=null,M.events=null,M.stores=null,M.memoCache!=null&&(M.memoCache.index=0)}U.H=nf,M=d(g,x)}while(ws);return M}function _d(){var l=U.H,d=l.useState()[0];return d=typeof d.then=="function"?Ou(d):d,l=l.useState()[0],(Vn!==null?Vn.memoizedState:null)!==l&&(hn.flags|=1024),d}function Cd(){var l=$c!==0;return $c=0,l}function Nl(l,d,g){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~g}function vp(l){if(Ur){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Ur=!1}za=0,Mr=Vn=hn=null,ws=!1,Eu=$c=0,ya=null}function Yr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mr===null?hn.memoizedState=Mr=l:Mr=Mr.next=l,Mr}function Dr(){if(Vn===null){var l=hn.alternate;l=l!==null?l.memoizedState:null}else l=Vn.next;var d=Mr===null?hn.memoizedState:Mr.next;if(d!==null)Mr=d,Vn=l;else{if(l===null)throw hn.alternate===null?Error(e(467)):Error(e(310));Vn=l,l={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},Mr===null?hn.memoizedState=Mr=l:Mr=Mr.next=l}return Mr}function Td(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ou(l){var d=Eu;return Eu+=1,ya===null&&(ya=[]),l=md(ya,l,d),d=hn,(Mr===null?d.memoizedState:Mr.next)===null&&(d=d.alternate,U.H=d===null||d.memoizedState===null?tm:Md),l}function el(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Ou(l);if(l.$$typeof===V)return oi(l)}throw Error(e(438,String(l)))}function Rl(l){var d=null,g=hn.updateQueue;if(g!==null&&(d=g.memoCache),d==null){var x=hn.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(d={data:x.data.map(function(T){return T.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),g===null&&(g=Td(),hn.updateQueue=g),g.memoCache=d,g=d.data[d.index],g===void 0)for(g=d.data[d.index]=Array(l),x=0;x<l;x++)g[x]=nt;return d.index++,g}function Co(l,d){return typeof d=="function"?d(l):d}function nl(l){var d=Dr();return Ed(d,Vn,l)}function Ed(l,d,g){var x=l.queue;if(x===null)throw Error(e(311));x.lastRenderedReducer=g;var T=l.baseQueue,M=x.pending;if(M!==null){if(T!==null){var G=T.next;T.next=M.next,M.next=G}d.baseQueue=T=M,x.pending=null}if(M=l.baseState,T===null)l.memoizedState=M;else{d=T.next;var at=G=null,At=null,Ht=d,re=!1;do{var ue=Ht.lane&-536870913;if(ue!==Ht.lane?(Mn&ue)===ue:(za&ue)===ue){var Wt=Ht.revertLane;if(Wt===0)At!==null&&(At=At.next={lane:0,revertLane:0,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null}),ue===ai&&(re=!0);else if((za&Wt)===Wt){Ht=Ht.next,Wt===ai&&(re=!0);continue}else ue={lane:0,revertLane:Ht.revertLane,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null},At===null?(at=At=ue,G=M):At=At.next=ue,hn.lanes|=Wt,Bu|=Wt;ue=Ht.action,tl&&g(M,ue),M=Ht.hasEagerState?Ht.eagerState:g(M,ue)}else Wt={lane:ue,revertLane:Ht.revertLane,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null},At===null?(at=At=Wt,G=M):At=At.next=Wt,hn.lanes|=ue,Bu|=ue;Ht=Ht.next}while(Ht!==null&&Ht!==d);if(At===null?G=M:At.next=at,!lo(M,l.memoizedState)&&(si=!0,re&&(g=kl,g!==null)))throw g;l.memoizedState=M,l.baseState=G,l.baseQueue=At,x.lastRenderedState=M}return T===null&&(x.lanes=0),[l.memoizedState,x.dispatch]}function gp(l){var d=Dr(),g=d.queue;if(g===null)throw Error(e(311));g.lastRenderedReducer=l;var x=g.dispatch,T=g.pending,M=d.memoizedState;if(T!==null){g.pending=null;var G=T=T.next;do M=l(M,G.action),G=G.next;while(G!==T);lo(M,d.memoizedState)||(si=!0),d.memoizedState=M,d.baseQueue===null&&(d.baseState=M),g.lastRenderedState=M}return[M,x]}function mp(l,d,g){var x=hn,T=Dr(),M=Rn;if(M){if(g===void 0)throw Error(e(407));g=g()}else g=d();var G=!lo((Vn||T).memoizedState,g);G&&(T.memoizedState=g,si=!0),T=T.queue;var at=Au.bind(null,x,T,l);if(Eo(2048,8,at,[l]),T.getSnapshot!==d||G||Mr!==null&&Mr.memoizedState.tag&1){if(x.flags|=2048,To(9,rl(),Ll.bind(null,x,T,g,d),null),sr===null)throw Error(e(349));M||(za&124)!==0||xs(x,d,g)}return g}function xs(l,d,g){l.flags|=16384,l={getSnapshot:d,value:g},d=hn.updateQueue,d===null?(d=Td(),hn.updateQueue=d,d.stores=[l]):(g=d.stores,g===null?d.stores=[l]:g.push(l))}function Ll(l,d,g,x){d.value=g,d.getSnapshot=x,Vg(d)&&yp(l)}function Au(l,d,g){return g(function(){Vg(d)&&yp(l)})}function Vg(l){var d=l.getSnapshot;l=l.value;try{var g=d();return!lo(l,g)}catch{return!0}}function yp(l){var d=qs(l,2);d!==null&&Ca(d,l,2)}function bp(l){var d=Yr();if(typeof l=="function"){var g=l;if(l=g(),tl){L(!0);try{g()}finally{L(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:l},d}function Fg(l,d,g,x){return l.baseState=g,Ed(l,Vn,typeof x=="function"?x:Co)}function Hb(l,d,g,x,T){if(tf(l))throw Error(e(485));if(l=d.action,l!==null){var M={payload:T,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(G){M.listeners.push(G)}};U.T!==null?g(!0):M.isTransition=!1,x(M),g=d.pending,g===null?(M.next=d.pending=M,Di(d,M)):(M.next=g.next,d.pending=g.next=M)}}function Di(l,d){var g=d.action,x=d.payload,T=l.state;if(d.isTransition){var M=U.T,G={};U.T=G;try{var at=g(T,x),At=U.S;At!==null&&At(G,at),wp(l,d,at)}catch(Ht){xp(l,d,Ht)}finally{U.T=M}}else try{M=g(T,x),wp(l,d,M)}catch(Ht){xp(l,d,Ht)}}function wp(l,d,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(x){Hg(l,d,x)},function(x){return xp(l,d,x)}):Hg(l,d,g)}function Hg(l,d,g){d.status="fulfilled",d.value=g,zg(d),l.state=g,d=l.pending,d!==null&&(g=d.next,g===d?l.pending=null:(g=g.next,d.next=g,Di(l,g)))}function xp(l,d,g){var x=l.pending;if(l.pending=null,x!==null){x=x.next;do d.status="rejected",d.reason=g,zg(d),d=d.next;while(d!==x)}l.action=null}function zg(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function Sp(l,d){return d}function _p(l,d){if(Rn){var g=sr.formState;if(g!==null){t:{var x=hn;if(Rn){if(fr){e:{for(var T=fr,M=Mi;T.nodeType!==8;){if(!M){T=null;break e}if(T=_s(T.nextSibling),T===null){T=null;break e}}M=T.data,T=M==="F!"||M==="F"?T:null}if(T){fr=_s(T.nextSibling),x=T.data==="F!";break t}}Al(x)}x=!1}x&&(d=g[0])}}return g=Yr(),g.memoizedState=g.baseState=d,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sp,lastRenderedState:d},g.queue=x,g=kp.bind(null,hn,x),x.dispatch=g,x=bp(!1),M=Qc.bind(null,hn,!1,x.queue),x=Yr(),T={state:d,dispatch:null,action:l,pending:null},x.queue=T,g=Hb.bind(null,hn,T,M,g),T.dispatch=g,x.memoizedState=l,[d,g,!1]}function Cp(l){var d=Dr();return Wg(d,Vn,l)}function Wg(l,d,g){if(d=Ed(l,d,Sp)[0],l=nl(Co)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var x=Ou(d)}catch(G){throw G===Ml?gd:G}else x=d;d=Dr();var T=d.queue,M=T.dispatch;return g!==d.memoizedState&&(hn.flags|=2048,To(9,rl(),zb.bind(null,T,g),null)),[x,M,l]}function zb(l,d){l.action=d}function qg(l){var d=Dr(),g=Vn;if(g!==null)return Wg(d,g,l);Dr(),d=d.memoizedState,g=Dr();var x=g.queue.dispatch;return g.memoizedState=l,[d,x,!1]}function To(l,d,g,x){return l={tag:l,create:g,deps:x,inst:d,next:null},d=hn.updateQueue,d===null&&(d=Td(),hn.updateQueue=d),g=d.lastEffect,g===null?d.lastEffect=l.next=l:(x=g.next,g.next=l,l.next=x,d.lastEffect=l),l}function rl(){return{destroy:void 0,resource:void 0}}function Gc(){return Dr().memoizedState}function il(l,d,g,x){var T=Yr();x=x===void 0?null:x,hn.flags|=l,T.memoizedState=To(1|d,rl(),g,x)}function Eo(l,d,g,x){var T=Dr();x=x===void 0?null:x;var M=T.memoizedState.inst;Vn!==null&&x!==null&&xd(x,Vn.memoizedState.deps)?T.memoizedState=To(d,M,g,x):(hn.flags|=l,T.memoizedState=To(1|d,M,g,x))}function Kg(l,d){il(8390656,8,l,d)}function $g(l,d){Eo(2048,8,l,d)}function jl(l,d){return Eo(4,2,l,d)}function Tp(l,d){return Eo(4,4,l,d)}function Ep(l,d){if(typeof d=="function"){l=l();var g=d(l);return function(){typeof g=="function"?g():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function Op(l,d,g){g=g!=null?g.concat([l]):null,Eo(4,4,Ep.bind(null,d,l),g)}function ku(){}function Il(l,d){var g=Dr();d=d===void 0?null:d;var x=g.memoizedState;return d!==null&&xd(d,x[1])?x[0]:(g.memoizedState=[l,d],l)}function Od(l,d){var g=Dr();d=d===void 0?null:d;var x=g.memoizedState;if(d!==null&&xd(d,x[1]))return x[0];if(x=l(),tl){L(!0);try{l()}finally{L(!1)}}return g.memoizedState=[x,d],x}function Yc(l,d,g){return g===void 0||(za&1073741824)!==0?l.memoizedState=d:(l.memoizedState=g,l=iC(),hn.lanes|=l,Bu|=l,g)}function Ad(l,d,g,x){return lo(g,d)?g:Dl.current!==null?(l=Yc(l,g,x),lo(l,d)||(si=!0),l):(za&42)===0?(si=!0,l.memoizedState=g):(l=iC(),hn.lanes|=l,Bu|=l,d)}function Gg(l,d,g,x,T){var M=_t.p;_t.p=M!==0&&8>M?M:8;var G=U.T,at={};U.T=at,Qc(l,!1,d,g);try{var At=T(),Ht=U.S;if(Ht!==null&&Ht(at,At),At!==null&&typeof At=="object"&&typeof At.then=="function"){var re=_o(At,x);Zc(l,d,re,_a(l))}else Zc(l,d,x,_a(l))}catch(ue){Zc(l,d,{then:function(){},status:"rejected",reason:ue},_a())}finally{_t.p=M,U.T=G}}function Xc(){}function kd(l,d,g,x){if(l.tag!==5)throw Error(e(476));var T=Yg(l).queue;Gg(l,T,d,Ot,g===null?Xc:function(){return Ap(l),g(x)})}function Yg(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:Ot,baseState:Ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:Ot},next:null};var g={};return d.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:g},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function Ap(l){var d=Yg(l).next.queue;Zc(l,d,{},_a())}function Mu(){return oi(Zp)}function Xg(){return Dr().memoizedState}function Jg(){return Dr().memoizedState}function Jc(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var g=_a();l=ys(g);var x=Zs(d,l,g);x!==null&&(Ca(x,d,g),_u(x,d,g)),d={cache:vd()},l.payload=d;return}d=d.return}}function Zg(l,d,g){var x=_a();g={lane:x,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},tf(l)?Qg(d,g):(g=ep(l,d,g,x),g!==null&&(Ca(g,l,x),Mp(g,d,x)))}function kp(l,d,g){var x=_a();Zc(l,d,g,x)}function Zc(l,d,g,x){var T={lane:x,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(tf(l))Qg(d,T);else{var M=l.alternate;if(l.lanes===0&&(M===null||M.lanes===0)&&(M=d.lastRenderedReducer,M!==null))try{var G=d.lastRenderedState,at=M(G,g);if(T.hasEagerState=!0,T.eagerState=at,lo(at,G))return Tl(l,d,T,0),sr===null&&Ic(),!1}catch{}finally{}if(g=ep(l,d,T,x),g!==null)return Ca(g,l,x),Mp(g,d,x),!0}return!1}function Qc(l,d,g,x){if(x={lane:2,revertLane:ow(),action:x,hasEagerState:!1,eagerState:null,next:null},tf(l)){if(d)throw Error(e(479))}else d=ep(l,g,x,2),d!==null&&Ca(d,l,2)}function tf(l){var d=l.alternate;return l===hn||d!==null&&d===hn}function Qg(l,d){ws=Ur=!0;var g=l.pending;g===null?d.next=d:(d.next=g.next,g.next=d),l.pending=d}function Mp(l,d,g){if((g&4194048)!==0){var x=d.lanes;x&=l.pendingLanes,g|=x,d.lanes=g,Ct(l,g)}}var ef={readContext:oi,use:el,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useLayoutEffect:Cr,useInsertionEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useSyncExternalStore:Cr,useId:Cr,useHostTransitionStatus:Cr,useFormState:Cr,useActionState:Cr,useOptimistic:Cr,useMemoCache:Cr,useCacheRefresh:Cr},tm={readContext:oi,use:el,useCallback:function(l,d){return Yr().memoizedState=[l,d===void 0?null:d],l},useContext:oi,useEffect:Kg,useImperativeHandle:function(l,d,g){g=g!=null?g.concat([l]):null,il(4194308,4,Ep.bind(null,d,l),g)},useLayoutEffect:function(l,d){return il(4194308,4,l,d)},useInsertionEffect:function(l,d){il(4,2,l,d)},useMemo:function(l,d){var g=Yr();d=d===void 0?null:d;var x=l();if(tl){L(!0);try{l()}finally{L(!1)}}return g.memoizedState=[x,d],x},useReducer:function(l,d,g){var x=Yr();if(g!==void 0){var T=g(d);if(tl){L(!0);try{g(d)}finally{L(!1)}}}else T=d;return x.memoizedState=x.baseState=T,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:T},x.queue=l,l=l.dispatch=Zg.bind(null,hn,l),[x.memoizedState,l]},useRef:function(l){var d=Yr();return l={current:l},d.memoizedState=l},useState:function(l){l=bp(l);var d=l.queue,g=kp.bind(null,hn,d);return d.dispatch=g,[l.memoizedState,g]},useDebugValue:ku,useDeferredValue:function(l,d){var g=Yr();return Yc(g,l,d)},useTransition:function(){var l=bp(!1);return l=Gg.bind(null,hn,l.queue,!0,!1),Yr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,g){var x=hn,T=Yr();if(Rn){if(g===void 0)throw Error(e(407));g=g()}else{if(g=d(),sr===null)throw Error(e(349));(Mn&124)!==0||xs(x,d,g)}T.memoizedState=g;var M={value:g,getSnapshot:d};return T.queue=M,Kg(Au.bind(null,x,M,l),[l]),x.flags|=2048,To(9,rl(),Ll.bind(null,x,M,g,d),null),g},useId:function(){var l=Yr(),d=sr.identifierPrefix;if(Rn){var g=bo,x=Xi;g=(x&~(1<<32-A(x)-1)).toString(32)+g,d=""+d+"R"+g,g=$c++,0<g&&(d+="H"+g.toString(32)),d+=""}else g=wd++,d=""+d+"r"+g.toString(32)+"";return l.memoizedState=d},useHostTransitionStatus:Mu,useFormState:_p,useActionState:_p,useOptimistic:function(l){var d=Yr();d.memoizedState=d.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=g,d=Qc.bind(null,hn,!0,g),g.dispatch=d,[l,d]},useMemoCache:Rl,useCacheRefresh:function(){return Yr().memoizedState=Jc.bind(null,hn)}},Md={readContext:oi,use:el,useCallback:Il,useContext:oi,useEffect:$g,useImperativeHandle:Op,useInsertionEffect:jl,useLayoutEffect:Tp,useMemo:Od,useReducer:nl,useRef:Gc,useState:function(){return nl(Co)},useDebugValue:ku,useDeferredValue:function(l,d){var g=Dr();return Ad(g,Vn.memoizedState,l,d)},useTransition:function(){var l=nl(Co)[0],d=Dr().memoizedState;return[typeof l=="boolean"?l:Ou(l),d]},useSyncExternalStore:mp,useId:Xg,useHostTransitionStatus:Mu,useFormState:Cp,useActionState:Cp,useOptimistic:function(l,d){var g=Dr();return Fg(g,Vn,l,d)},useMemoCache:Rl,useCacheRefresh:Jg},nf={readContext:oi,use:el,useCallback:Il,useContext:oi,useEffect:$g,useImperativeHandle:Op,useInsertionEffect:jl,useLayoutEffect:Tp,useMemo:Od,useReducer:gp,useRef:Gc,useState:function(){return gp(Co)},useDebugValue:ku,useDeferredValue:function(l,d){var g=Dr();return Vn===null?Yc(g,l,d):Ad(g,Vn.memoizedState,l,d)},useTransition:function(){var l=gp(Co)[0],d=Dr().memoizedState;return[typeof l=="boolean"?l:Ou(l),d]},useSyncExternalStore:mp,useId:Xg,useHostTransitionStatus:Mu,useFormState:qg,useActionState:qg,useOptimistic:function(l,d){var g=Dr();return Vn!==null?Fg(g,Vn,l,d):(g.baseState=l,[l,g.queue.dispatch])},useMemoCache:Rl,useCacheRefresh:Jg},Wa=null,rf=0;function of(l){var d=rf;return rf+=1,Wa===null&&(Wa=[]),md(Wa,l,d)}function af(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function Dd(l,d){throw d.$$typeof===v?Error(e(525)):(l=Object.prototype.toString.call(d),Error(e(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function em(l){var d=l._init;return d(l._payload)}function nm(l){function d(Vt,Rt){if(l){var Ft=Vt.deletions;Ft===null?(Vt.deletions=[Rt],Vt.flags|=16):Ft.push(Rt)}}function g(Vt,Rt){if(!l)return null;for(;Rt!==null;)d(Vt,Rt),Rt=Rt.sibling;return null}function x(Vt){for(var Rt=new Map;Vt!==null;)Vt.key!==null?Rt.set(Vt.key,Vt):Rt.set(Vt.index,Vt),Vt=Vt.sibling;return Rt}function T(Vt,Rt){return Vt=Yo(Vt,Rt),Vt.index=0,Vt.sibling=null,Vt}function M(Vt,Rt,Ft){return Vt.index=Ft,l?(Ft=Vt.alternate,Ft!==null?(Ft=Ft.index,Ft<Rt?(Vt.flags|=67108866,Rt):Ft):(Vt.flags|=67108866,Rt)):(Vt.flags|=1048576,Rt)}function G(Vt){return l&&Vt.alternate===null&&(Vt.flags|=67108866),Vt}function at(Vt,Rt,Ft,se){return Rt===null||Rt.tag!==6?(Rt=Bc(Ft,Vt.mode,se),Rt.return=Vt,Rt):(Rt=T(Rt,Ft),Rt.return=Vt,Rt)}function At(Vt,Rt,Ft,se){var Ue=Ft.type;return Ue===_?re(Vt,Rt,Ft.props.children,se,Ft.key):Rt!==null&&(Rt.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===st&&em(Ue)===Rt.type)?(Rt=T(Rt,Ft.props),af(Rt,Ft),Rt.return=Vt,Rt):(Rt=cd(Ft.type,Ft.key,Ft.props,null,Vt.mode,se),af(Rt,Ft),Rt.return=Vt,Rt)}function Ht(Vt,Rt,Ft,se){return Rt===null||Rt.tag!==4||Rt.stateNode.containerInfo!==Ft.containerInfo||Rt.stateNode.implementation!==Ft.implementation?(Rt=Uc(Ft,Vt.mode,se),Rt.return=Vt,Rt):(Rt=T(Rt,Ft.children||[]),Rt.return=Vt,Rt)}function re(Vt,Rt,Ft,se,Ue){return Rt===null||Rt.tag!==7?(Rt=El(Ft,Vt.mode,se,Ue),Rt.return=Vt,Rt):(Rt=T(Rt,Ft),Rt.return=Vt,Rt)}function ue(Vt,Rt,Ft){if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint")return Rt=Bc(""+Rt,Vt.mode,Ft),Rt.return=Vt,Rt;if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case m:return Ft=cd(Rt.type,Rt.key,Rt.props,null,Vt.mode,Ft),af(Ft,Rt),Ft.return=Vt,Ft;case y:return Rt=Uc(Rt,Vt.mode,Ft),Rt.return=Vt,Rt;case st:var se=Rt._init;return Rt=se(Rt._payload),ue(Vt,Rt,Ft)}if(St(Rt)||$(Rt))return Rt=El(Rt,Vt.mode,Ft,null),Rt.return=Vt,Rt;if(typeof Rt.then=="function")return ue(Vt,of(Rt),Ft);if(Rt.$$typeof===V)return ue(Vt,hd(Vt,Rt),Ft);Dd(Vt,Rt)}return null}function Wt(Vt,Rt,Ft,se){var Ue=Rt!==null?Rt.key:null;if(typeof Ft=="string"&&Ft!==""||typeof Ft=="number"||typeof Ft=="bigint")return Ue!==null?null:at(Vt,Rt,""+Ft,se);if(typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case m:return Ft.key===Ue?At(Vt,Rt,Ft,se):null;case y:return Ft.key===Ue?Ht(Vt,Rt,Ft,se):null;case st:return Ue=Ft._init,Ft=Ue(Ft._payload),Wt(Vt,Rt,Ft,se)}if(St(Ft)||$(Ft))return Ue!==null?null:re(Vt,Rt,Ft,se,null);if(typeof Ft.then=="function")return Wt(Vt,Rt,of(Ft),se);if(Ft.$$typeof===V)return Wt(Vt,Rt,hd(Vt,Ft),se);Dd(Vt,Ft)}return null}function $t(Vt,Rt,Ft,se,Ue){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Vt=Vt.get(Ft)||null,at(Rt,Vt,""+se,Ue);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case m:return Vt=Vt.get(se.key===null?Ft:se.key)||null,At(Rt,Vt,se,Ue);case y:return Vt=Vt.get(se.key===null?Ft:se.key)||null,Ht(Rt,Vt,se,Ue);case st:var xn=se._init;return se=xn(se._payload),$t(Vt,Rt,Ft,se,Ue)}if(St(se)||$(se))return Vt=Vt.get(Ft)||null,re(Rt,Vt,se,Ue,null);if(typeof se.then=="function")return $t(Vt,Rt,Ft,of(se),Ue);if(se.$$typeof===V)return $t(Vt,Rt,Ft,hd(Rt,se),Ue);Dd(Rt,se)}return null}function tn(Vt,Rt,Ft,se){for(var Ue=null,xn=null,qe=Rt,Je=Rt=0,Li=null;qe!==null&&Je<Ft.length;Je++){qe.index>Je?(Li=qe,qe=null):Li=qe.sibling;var Bn=Wt(Vt,qe,Ft[Je],se);if(Bn===null){qe===null&&(qe=Li);break}l&&qe&&Bn.alternate===null&&d(Vt,qe),Rt=M(Bn,Rt,Je),xn===null?Ue=Bn:xn.sibling=Bn,xn=Bn,qe=Li}if(Je===Ft.length)return g(Vt,qe),Rn&&wo(Vt,Je),Ue;if(qe===null){for(;Je<Ft.length;Je++)qe=ue(Vt,Ft[Je],se),qe!==null&&(Rt=M(qe,Rt,Je),xn===null?Ue=qe:xn.sibling=qe,xn=qe);return Rn&&wo(Vt,Je),Ue}for(qe=x(qe);Je<Ft.length;Je++)Li=$t(qe,Vt,Je,Ft[Je],se),Li!==null&&(l&&Li.alternate!==null&&qe.delete(Li.key===null?Je:Li.key),Rt=M(Li,Rt,Je),xn===null?Ue=Li:xn.sibling=Li,xn=Li);return l&&qe.forEach(function($u){return d(Vt,$u)}),Rn&&wo(Vt,Je),Ue}function Xe(Vt,Rt,Ft,se){if(Ft==null)throw Error(e(151));for(var Ue=null,xn=null,qe=Rt,Je=Rt=0,Li=null,Bn=Ft.next();qe!==null&&!Bn.done;Je++,Bn=Ft.next()){qe.index>Je?(Li=qe,qe=null):Li=qe.sibling;var $u=Wt(Vt,qe,Bn.value,se);if($u===null){qe===null&&(qe=Li);break}l&&qe&&$u.alternate===null&&d(Vt,qe),Rt=M($u,Rt,Je),xn===null?Ue=$u:xn.sibling=$u,xn=$u,qe=Li}if(Bn.done)return g(Vt,qe),Rn&&wo(Vt,Je),Ue;if(qe===null){for(;!Bn.done;Je++,Bn=Ft.next())Bn=ue(Vt,Bn.value,se),Bn!==null&&(Rt=M(Bn,Rt,Je),xn===null?Ue=Bn:xn.sibling=Bn,xn=Bn);return Rn&&wo(Vt,Je),Ue}for(qe=x(qe);!Bn.done;Je++,Bn=Ft.next())Bn=$t(qe,Vt,Je,Bn.value,se),Bn!==null&&(l&&Bn.alternate!==null&&qe.delete(Bn.key===null?Je:Bn.key),Rt=M(Bn,Rt,Je),xn===null?Ue=Bn:xn.sibling=Bn,xn=Bn);return l&&qe.forEach(function(JN){return d(Vt,JN)}),Rn&&wo(Vt,Je),Ue}function Zn(Vt,Rt,Ft,se){if(typeof Ft=="object"&&Ft!==null&&Ft.type===_&&Ft.key===null&&(Ft=Ft.props.children),typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case m:t:{for(var Ue=Ft.key;Rt!==null;){if(Rt.key===Ue){if(Ue=Ft.type,Ue===_){if(Rt.tag===7){g(Vt,Rt.sibling),se=T(Rt,Ft.props.children),se.return=Vt,Vt=se;break t}}else if(Rt.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===st&&em(Ue)===Rt.type){g(Vt,Rt.sibling),se=T(Rt,Ft.props),af(se,Ft),se.return=Vt,Vt=se;break t}g(Vt,Rt);break}else d(Vt,Rt);Rt=Rt.sibling}Ft.type===_?(se=El(Ft.props.children,Vt.mode,se,Ft.key),se.return=Vt,Vt=se):(se=cd(Ft.type,Ft.key,Ft.props,null,Vt.mode,se),af(se,Ft),se.return=Vt,Vt=se)}return G(Vt);case y:t:{for(Ue=Ft.key;Rt!==null;){if(Rt.key===Ue)if(Rt.tag===4&&Rt.stateNode.containerInfo===Ft.containerInfo&&Rt.stateNode.implementation===Ft.implementation){g(Vt,Rt.sibling),se=T(Rt,Ft.children||[]),se.return=Vt,Vt=se;break t}else{g(Vt,Rt);break}else d(Vt,Rt);Rt=Rt.sibling}se=Uc(Ft,Vt.mode,se),se.return=Vt,Vt=se}return G(Vt);case st:return Ue=Ft._init,Ft=Ue(Ft._payload),Zn(Vt,Rt,Ft,se)}if(St(Ft))return tn(Vt,Rt,Ft,se);if($(Ft)){if(Ue=$(Ft),typeof Ue!="function")throw Error(e(150));return Ft=Ue.call(Ft),Xe(Vt,Rt,Ft,se)}if(typeof Ft.then=="function")return Zn(Vt,Rt,of(Ft),se);if(Ft.$$typeof===V)return Zn(Vt,Rt,hd(Vt,Ft),se);Dd(Vt,Ft)}return typeof Ft=="string"&&Ft!==""||typeof Ft=="number"||typeof Ft=="bigint"?(Ft=""+Ft,Rt!==null&&Rt.tag===6?(g(Vt,Rt.sibling),se=T(Rt,Ft),se.return=Vt,Vt=se):(g(Vt,Rt),se=Bc(Ft,Vt.mode,se),se.return=Vt,Vt=se),G(Vt)):g(Vt,Rt)}return function(Vt,Rt,Ft,se){try{rf=0;var Ue=Zn(Vt,Rt,Ft,se);return Wa=null,Ue}catch(qe){if(qe===Ml||qe===gd)throw qe;var xn=Oi(29,qe,null,Vt.mode);return xn.lanes=se,xn.return=Vt,xn}finally{}}}var Bl=nm(!0),rm=nm(!1),Zo=Dt(null),ba=null;function qa(l){var d=l.alternate;kt(ar,ar.current&1),kt(Zo,l),ba===null&&(d===null||Dl.current!==null||d.memoizedState!==null)&&(ba=l)}function Dp(l){if(l.tag===22){if(kt(ar,ar.current),kt(Zo,l),ba===null){var d=l.alternate;d!==null&&d.memoizedState!==null&&(ba=l)}}else ol()}function ol(){kt(ar,ar.current),kt(Zo,Zo.current)}function Ka(l){yt(Zo),ba===l&&(ba=null),yt(ar)}var ar=Dt(0);function sf(l){for(var d=l;d!==null;){if(d.tag===13){var g=d.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||mw(g)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function Du(l,d,g,x){d=l.memoizedState,g=g(x,d),g=g==null?d:h({},d,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var Pp={enqueueSetState:function(l,d,g){l=l._reactInternals;var x=_a(),T=ys(x);T.payload=d,g!=null&&(T.callback=g),d=Zs(l,T,x),d!==null&&(Ca(d,l,x),_u(d,l,x))},enqueueReplaceState:function(l,d,g){l=l._reactInternals;var x=_a(),T=ys(x);T.tag=1,T.payload=d,g!=null&&(T.callback=g),d=Zs(l,T,x),d!==null&&(Ca(d,l,x),_u(d,l,x))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var g=_a(),x=ys(g);x.tag=2,d!=null&&(x.callback=d),d=Zs(l,x,g),d!==null&&(Ca(d,l,g),_u(d,l,g))}};function im(l,d,g,x,T,M,G){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(x,M,G):d.prototype&&d.prototype.isPureReactComponent?!hu(g,x)||!hu(T,M):!0}function om(l,d,g,x){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(g,x),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(g,x),d.state!==l&&Pp.enqueueReplaceState(d,d.state,null)}function Ln(l,d){var g=d;if("ref"in d){g={};for(var x in d)x!=="ref"&&(g[x]=d[x])}if(l=l.defaultProps){g===d&&(g=h({},g));for(var T in l)g[T]===void 0&&(g[T]=l[T])}return g}var Pd=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof Oh=="object"&&typeof Oh.emit=="function"){Oh.emit("uncaughtException",l);return}console.error(l)};function Nd(l){Pd(l)}function Pu(l){console.error(l)}function Qo(l){Pd(l)}function Ul(l,d){try{var g=l.onUncaughtError;g(d.value,{componentStack:d.stack})}catch(x){setTimeout(function(){throw x})}}function Rd(l,d,g){try{var x=l.onCaughtError;x(g.value,{componentStack:g.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function Ld(l,d,g){return g=ys(g),g.tag=3,g.payload={element:null},g.callback=function(){Ul(l,d)},g}function Np(l){return l=ys(l),l.tag=3,l}function Rp(l,d,g,x){var T=g.type.getDerivedStateFromError;if(typeof T=="function"){var M=x.value;l.payload=function(){return T(M)},l.callback=function(){Rd(d,g,x)}}var G=g.stateNode;G!==null&&typeof G.componentDidCatch=="function"&&(l.callback=function(){Rd(d,g,x),typeof T!="function"&&(Uu===null?Uu=new Set([this]):Uu.add(this));var at=x.stack;this.componentDidCatch(x.value,{componentStack:at!==null?at:""})})}function am(l,d,g,x,T){if(g.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(d=g.alternate,d!==null&&Hc(d,g,T,!0),g=Zo.current,g!==null){switch(g.tag){case 13:return ba===null?tw():g.alternate===null&&Fr===0&&(Fr=3),g.flags&=-257,g.flags|=65536,g.lanes=T,x===Wc?g.flags|=16384:(d=g.updateQueue,d===null?g.updateQueue=new Set([x]):d.add(x),nw(l,x,T)),!1;case 22:return g.flags|=65536,x===Wc?g.flags|=16384:(d=g.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([x])},g.updateQueue=d):(g=d.retryQueue,g===null?d.retryQueue=new Set([x]):g.add(x)),nw(l,x,T)),!1}throw Error(e(435,g.tag))}return nw(l,x,T),tw(),!1}if(Rn)return d=Zo.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=T,x!==rp&&(l=Error(e(422),{cause:x}),dr(Go(l,g)))):(x!==rp&&(d=Error(e(423),{cause:x}),dr(Go(d,g))),l=l.current.alternate,l.flags|=65536,T&=-T,l.lanes|=T,x=Go(x,g),T=Ld(l.stateNode,x,T),dp(l,T),Fr!==4&&(Fr=2)),!1;var M=Error(e(520),{cause:x});if(M=Go(M,g),zp===null?zp=[M]:zp.push(M),Fr!==4&&(Fr=2),d===null)return!0;x=Go(x,g),g=d;do{switch(g.tag){case 3:return g.flags|=65536,l=T&-T,g.lanes|=l,l=Ld(g.stateNode,x,l),dp(g,l),!1;case 1:if(d=g.type,M=g.stateNode,(g.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Uu===null||!Uu.has(M))))return g.flags|=65536,T&=-T,g.lanes|=T,T=Np(T),Rp(T,l,g,x),dp(g,T),!1}g=g.return}while(g!==null);return!1}var Lp=Error(e(461)),si=!1;function Xr(l,d,g,x){d.child=l===null?rm(d,null,g,x):Bl(d,l.child,g,x)}function jp(l,d,g,x,T){g=g.render;var M=d.ref;if("ref"in x){var G={};for(var at in x)at!=="ref"&&(G[at]=x[at])}else G=x;return Xs(d),x=Sd(l,d,g,G,M,T),at=Cd(),l!==null&&!si?(Nl(l,d,T),I(l,d,T)):(Rn&&at&&Gs(d),d.flags|=1,Xr(l,d,x,T),d.child)}function jn(l,d,g,x,T){if(l===null){var M=g.type;return typeof M=="function"&&!ud(M)&&M.defaultProps===void 0&&g.compare===null?(d.tag=15,d.type=M,Ip(l,d,M,x,T)):(l=cd(g.type,null,x,d,d.mode,T),l.ref=d.ref,l.return=d,d.child=l)}if(M=l.child,!H(l,T)){var G=M.memoizedProps;if(g=g.compare,g=g!==null?g:hu,g(G,x)&&l.ref===d.ref)return I(l,d,T)}return d.flags|=1,l=Yo(M,x),l.ref=d.ref,l.return=d,d.child=l}function Ip(l,d,g,x,T){if(l!==null){var M=l.memoizedProps;if(hu(M,x)&&l.ref===d.ref)if(si=!1,d.pendingProps=x=M,H(l,T))(l.flags&131072)!==0&&(si=!0);else return d.lanes=l.lanes,I(l,d,T)}return Nu(l,d,g,x,T)}function sm(l,d,g){var x=d.pendingProps,T=x.children,M=l!==null?l.memoizedState:null;if(x.mode==="hidden"){if((d.flags&128)!==0){if(x=M!==null?M.baseLanes|g:g,l!==null){for(T=d.child=l.child,M=0;T!==null;)M=M|T.lanes|T.childLanes,T=T.sibling;d.childLanes=M&~x}else d.childLanes=0,d.child=null;return Vl(l,d,x,g)}if((g&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&ma(d,M!==null?M.cachePool:null),M!==null?yd(d,M):Tu(),Dp(d);else return d.lanes=d.childLanes=536870912,Vl(l,d,M!==null?M.baseLanes|g:g,g)}else M!==null?(ma(d,M.cachePool),yd(d,M),ol(),d.memoizedState=null):(l!==null&&ma(d,null),Tu(),ol());return Xr(l,d,T,g),d.child}function Vl(l,d,g,x){var T=Ha();return T=T===null?null:{parent:kr._currentValue,pool:T},d.memoizedState={baseLanes:g,cachePool:T},l!==null&&ma(d,null),Tu(),Dp(d),l!==null&&Hc(l,d,x,!0),null}function jd(l,d){var g=d.ref;if(g===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(e(284));(l===null||l.ref!==g)&&(d.flags|=4194816)}}function Nu(l,d,g,x,T){return Xs(d),g=Sd(l,d,g,x,void 0,T),x=Cd(),l!==null&&!si?(Nl(l,d,T),I(l,d,T)):(Rn&&x&&Gs(d),d.flags|=1,Xr(l,d,g,T),d.child)}function lm(l,d,g,x,T,M){return Xs(d),d.updateQueue=null,g=pp(d,x,g,T),Pl(l),x=Cd(),l!==null&&!si?(Nl(l,d,M),I(l,d,M)):(Rn&&x&&Gs(d),d.flags|=1,Xr(l,d,g,M),d.child)}function hr(l,d,g,x,T){if(Xs(d),d.stateNode===null){var M=Ks,G=g.contextType;typeof G=="object"&&G!==null&&(M=oi(G)),M=new g(x,M),d.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,M.updater=Pp,d.stateNode=M,M._reactInternals=d,M=d.stateNode,M.props=x,M.state=d.memoizedState,M.refs={},Su(d),G=g.contextType,M.context=typeof G=="object"&&G!==null?oi(G):Ks,M.state=d.memoizedState,G=g.getDerivedStateFromProps,typeof G=="function"&&(Du(d,g,G,x),M.state=d.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(G=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),G!==M.state&&Pp.enqueueReplaceState(M,M.state,null),Cu(d,x,M,T),Qs(),M.state=d.memoizedState),typeof M.componentDidMount=="function"&&(d.flags|=4194308),x=!0}else if(l===null){M=d.stateNode;var at=d.memoizedProps,At=Ln(g,at);M.props=At;var Ht=M.context,re=g.contextType;G=Ks,typeof re=="object"&&re!==null&&(G=oi(re));var ue=g.getDerivedStateFromProps;re=typeof ue=="function"||typeof M.getSnapshotBeforeUpdate=="function",at=d.pendingProps!==at,re||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(at||Ht!==G)&&om(d,M,x,G),Js=!1;var Wt=d.memoizedState;M.state=Wt,Cu(d,x,M,T),Qs(),Ht=d.memoizedState,at||Wt!==Ht||Js?(typeof ue=="function"&&(Du(d,g,ue,x),Ht=d.memoizedState),(At=Js||im(d,g,At,x,Wt,Ht,G))?(re||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(d.flags|=4194308)):(typeof M.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=x,d.memoizedState=Ht),M.props=x,M.state=Ht,M.context=G,x=At):(typeof M.componentDidMount=="function"&&(d.flags|=4194308),x=!1)}else{M=d.stateNode,Kc(l,d),G=d.memoizedProps,re=Ln(g,G),M.props=re,ue=d.pendingProps,Wt=M.context,Ht=g.contextType,At=Ks,typeof Ht=="object"&&Ht!==null&&(At=oi(Ht)),at=g.getDerivedStateFromProps,(Ht=typeof at=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(G!==ue||Wt!==At)&&om(d,M,x,At),Js=!1,Wt=d.memoizedState,M.state=Wt,Cu(d,x,M,T),Qs();var $t=d.memoizedState;G!==ue||Wt!==$t||Js||l!==null&&l.dependencies!==null&&bu(l.dependencies)?(typeof at=="function"&&(Du(d,g,at,x),$t=d.memoizedState),(re=Js||im(d,g,re,x,Wt,$t,At)||l!==null&&l.dependencies!==null&&bu(l.dependencies))?(Ht||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(x,$t,At),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(x,$t,At)),typeof M.componentDidUpdate=="function"&&(d.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof M.componentDidUpdate!="function"||G===l.memoizedProps&&Wt===l.memoizedState||(d.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||G===l.memoizedProps&&Wt===l.memoizedState||(d.flags|=1024),d.memoizedProps=x,d.memoizedState=$t),M.props=x,M.state=$t,M.context=At,x=re):(typeof M.componentDidUpdate!="function"||G===l.memoizedProps&&Wt===l.memoizedState||(d.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||G===l.memoizedProps&&Wt===l.memoizedState||(d.flags|=1024),x=!1)}return M=x,jd(l,d),x=(d.flags&128)!==0,M||x?(M=d.stateNode,g=x&&typeof g.getDerivedStateFromError!="function"?null:M.render(),d.flags|=1,l!==null&&x?(d.child=Bl(d,l.child,null,T),d.child=Bl(d,null,g,T)):Xr(l,d,g,T),d.memoizedState=M.state,l=d.child):l=I(l,d,T),l}function um(l,d,g,x){return Fc(),d.flags|=256,Xr(l,d,g,x),d.child}var Bp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Up(l){return{baseLanes:l,cachePool:lp()}}function Ru(l,d,g){return l=l!==null?l.childLanes&~g:0,d&&(l|=$a),l}function f(l,d,g){var x=d.pendingProps,T=!1,M=(d.flags&128)!==0,G;if((G=M)||(G=l!==null&&l.memoizedState===null?!1:(ar.current&2)!==0),G&&(T=!0,d.flags&=-129),G=(d.flags&32)!==0,d.flags&=-33,l===null){if(Rn){if(T?qa(d):ol(),Rn){var at=fr,At;if(At=at){t:{for(At=at,at=Mi;At.nodeType!==8;){if(!at){at=null;break t}if(At=_s(At.nextSibling),At===null){at=null;break t}}at=At}at!==null?(d.memoizedState={dehydrated:at,treeContext:$s!==null?{id:Xi,overflow:bo}:null,retryLane:536870912,hydrationErrors:null},At=Oi(18,null,null,0),At.stateNode=at,At.return=d,d.child=At,ki=d,fr=null,At=!0):At=!1}At||Al(d)}if(at=d.memoizedState,at!==null&&(at=at.dehydrated,at!==null))return mw(at)?d.lanes=32:d.lanes=536870912,null;Ka(d)}return at=x.children,x=x.fallback,T?(ol(),T=d.mode,at=w({mode:"hidden",children:at},T),x=El(x,T,g,null),at.return=d,x.return=d,at.sibling=x,d.child=at,T=d.child,T.memoizedState=Up(g),T.childLanes=Ru(l,G,g),d.memoizedState=Bp,x):(qa(d),p(d,at))}if(At=l.memoizedState,At!==null&&(at=At.dehydrated,at!==null)){if(M)d.flags&256?(qa(d),d.flags&=-257,d=b(l,d,g)):d.memoizedState!==null?(ol(),d.child=l.child,d.flags|=128,d=null):(ol(),T=x.fallback,at=d.mode,x=w({mode:"visible",children:x.children},at),T=El(T,at,g,null),T.flags|=2,x.return=d,T.return=d,x.sibling=T,d.child=x,Bl(d,l.child,null,g),x=d.child,x.memoizedState=Up(g),x.childLanes=Ru(l,G,g),d.memoizedState=Bp,d=T);else if(qa(d),mw(at)){if(G=at.nextSibling&&at.nextSibling.dataset,G)var Ht=G.dgst;G=Ht,x=Error(e(419)),x.stack="",x.digest=G,dr({value:x,source:null,stack:null}),d=b(l,d,g)}else if(si||Hc(l,d,g,!1),G=(g&l.childLanes)!==0,si||G){if(G=sr,G!==null&&(x=g&-g,x=(x&42)!==0?1:Lt(x),x=(x&(G.suspendedLanes|g))!==0?0:x,x!==0&&x!==At.retryLane))throw At.retryLane=x,qs(l,x),Ca(G,l,x),Lp;at.data==="$?"||tw(),d=b(l,d,g)}else at.data==="$?"?(d.flags|=192,d.child=l.child,d=null):(l=At.treeContext,fr=_s(at.nextSibling),ki=d,Rn=!0,xo=null,Mi=!1,l!==null&&(yo[Ai++]=Xi,yo[Ai++]=bo,yo[Ai++]=$s,Xi=l.id,bo=l.overflow,$s=d),d=p(d,x.children),d.flags|=4096);return d}return T?(ol(),T=x.fallback,at=d.mode,At=l.child,Ht=At.sibling,x=Yo(At,{mode:"hidden",children:x.children}),x.subtreeFlags=At.subtreeFlags&65011712,Ht!==null?T=Yo(Ht,T):(T=El(T,at,g,null),T.flags|=2),T.return=d,x.return=d,x.sibling=T,d.child=x,x=T,T=d.child,at=l.child.memoizedState,at===null?at=Up(g):(At=at.cachePool,At!==null?(Ht=kr._currentValue,At=At.parent!==Ht?{parent:Ht,pool:Ht}:At):At=lp(),at={baseLanes:at.baseLanes|g,cachePool:At}),T.memoizedState=at,T.childLanes=Ru(l,G,g),d.memoizedState=Bp,x):(qa(d),g=l.child,l=g.sibling,g=Yo(g,{mode:"visible",children:x.children}),g.return=d,g.sibling=null,l!==null&&(G=d.deletions,G===null?(d.deletions=[l],d.flags|=16):G.push(l)),d.child=g,d.memoizedState=null,g)}function p(l,d){return d=w({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function w(l,d){return l=Oi(22,l,null,d),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function b(l,d,g){return Bl(d,l.child,null,g),l=p(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function S(l,d,g){l.lanes|=d;var x=l.alternate;x!==null&&(x.lanes|=d),ip(l.return,d,g)}function O(l,d,g,x,T){var M=l.memoizedState;M===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:x,tail:g,tailMode:T}:(M.isBackwards=d,M.rendering=null,M.renderingStartTime=0,M.last=x,M.tail=g,M.tailMode=T)}function R(l,d,g){var x=d.pendingProps,T=x.revealOrder,M=x.tail;if(Xr(l,d,x.children,g),x=ar.current,(x&2)!==0)x=x&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)t:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&S(l,g,d);else if(l.tag===19)S(l,g,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break t;for(;l.sibling===null;){if(l.return===null||l.return===d)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}x&=1}switch(kt(ar,x),T){case"forwards":for(g=d.child,T=null;g!==null;)l=g.alternate,l!==null&&sf(l)===null&&(T=g),g=g.sibling;g=T,g===null?(T=d.child,d.child=null):(T=g.sibling,g.sibling=null),O(d,!1,T,g,M);break;case"backwards":for(g=null,T=d.child,d.child=null;T!==null;){if(l=T.alternate,l!==null&&sf(l)===null){d.child=T;break}l=T.sibling,T.sibling=g,g=T,T=l}O(d,!0,g,null,M);break;case"together":O(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function I(l,d,g){if(l!==null&&(d.dependencies=l.dependencies),Bu|=d.lanes,(g&d.childLanes)===0)if(l!==null){if(Hc(l,d,g,!1),(g&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(e(153));if(d.child!==null){for(l=d.child,g=Yo(l,l.pendingProps),d.child=g,g.return=d;l.sibling!==null;)l=l.sibling,g=g.sibling=Yo(l,l.pendingProps),g.return=d;g.sibling=null}return d.child}function H(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&bu(l)))}function Y(l,d,g){switch(d.tag){case 3:ne(d,d.stateNode.containerInfo),Ys(d,kr,l.memoizedState.cache),Fc();break;case 27:case 5:Pe(d);break;case 4:ne(d,d.stateNode.containerInfo);break;case 10:Ys(d,d.type,d.memoizedProps.value);break;case 13:var x=d.memoizedState;if(x!==null)return x.dehydrated!==null?(qa(d),d.flags|=128,null):(g&d.child.childLanes)!==0?f(l,d,g):(qa(d),l=I(l,d,g),l!==null?l.sibling:null);qa(d);break;case 19:var T=(l.flags&128)!==0;if(x=(g&d.childLanes)!==0,x||(Hc(l,d,g,!1),x=(g&d.childLanes)!==0),T){if(x)return R(l,d,g);d.flags|=128}if(T=d.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),kt(ar,ar.current),x)break;return null;case 22:case 23:return d.lanes=0,sm(l,d,g);case 24:Ys(d,kr,l.memoizedState.cache)}return I(l,d,g)}function vt(l,d,g){if(l!==null)if(l.memoizedProps!==d.pendingProps)si=!0;else{if(!H(l,g)&&(d.flags&128)===0)return si=!1,Y(l,d,g);si=(l.flags&131072)!==0}else si=!1,Rn&&(d.flags&1048576)!==0&&yu(d,Ol,d.index);switch(d.lanes=0,d.tag){case 16:t:{l=d.pendingProps;var x=d.elementType,T=x._init;if(x=T(x._payload),d.type=x,typeof x=="function")ud(x)?(l=Ln(x,l),d.tag=1,d=hr(null,d,x,l,g)):(d.tag=0,d=Nu(null,d,x,l,g));else{if(x!=null){if(T=x.$$typeof,T===K){d.tag=11,d=jp(null,d,x,l,g);break t}else if(T===ht){d.tag=14,d=jn(null,d,x,l,g);break t}}throw d=lt(x)||x,Error(e(306,d,""))}}return d;case 0:return Nu(l,d,d.type,d.pendingProps,g);case 1:return x=d.type,T=Ln(x,d.pendingProps),hr(l,d,x,T,g);case 3:t:{if(ne(d,d.stateNode.containerInfo),l===null)throw Error(e(387));x=d.pendingProps;var M=d.memoizedState;T=M.element,Kc(l,d),Cu(d,x,null,g);var G=d.memoizedState;if(x=G.cache,Ys(d,kr,x),x!==M.cache&&op(d,[kr],g,!0),Qs(),x=G.element,M.isDehydrated)if(M={element:x,isDehydrated:!1,cache:G.cache},d.updateQueue.baseState=M,d.memoizedState=M,d.flags&256){d=um(l,d,x,g);break t}else if(x!==T){T=Go(Error(e(424)),d),dr(T),d=um(l,d,x,g);break t}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(fr=_s(l.firstChild),ki=d,Rn=!0,xo=null,Mi=!0,g=rm(d,null,x,g),d.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(Fc(),x===T){d=I(l,d,g);break t}Xr(l,d,x,g)}d=d.child}return d;case 26:return jd(l,d),l===null?(g=FC(d.type,null,d.pendingProps,null))?d.memoizedState=g:Rn||(g=d.type,l=d.pendingProps,x=xm(Xt.current).createElement(g),x[cn]=d,x[Sn]=l,eo(x,g,l),An(x),d.stateNode=x):d.memoizedState=FC(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return Pe(d),l===null&&Rn&&(x=d.stateNode=BC(d.type,d.pendingProps,Xt.current),ki=d,Mi=!0,T=fr,Hu(d.type)?(yw=T,fr=_s(x.firstChild)):fr=T),Xr(l,d,d.pendingProps.children,g),jd(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&Rn&&((T=x=fr)&&(x=EN(x,d.type,d.pendingProps,Mi),x!==null?(d.stateNode=x,ki=d,fr=_s(x.firstChild),Mi=!1,T=!0):T=!1),T||Al(d)),Pe(d),T=d.type,M=d.pendingProps,G=l!==null?l.memoizedProps:null,x=M.children,pw(T,M)?x=null:G!==null&&pw(T,G)&&(d.flags|=32),d.memoizedState!==null&&(T=Sd(l,d,_d,null,null,g),Zp._currentValue=T),jd(l,d),Xr(l,d,x,g),d.child;case 6:return l===null&&Rn&&((l=g=fr)&&(g=ON(g,d.pendingProps,Mi),g!==null?(d.stateNode=g,ki=d,fr=null,l=!0):l=!1),l||Al(d)),null;case 13:return f(l,d,g);case 4:return ne(d,d.stateNode.containerInfo),x=d.pendingProps,l===null?d.child=Bl(d,null,x,g):Xr(l,d,x,g),d.child;case 11:return jp(l,d,d.type,d.pendingProps,g);case 7:return Xr(l,d,d.pendingProps,g),d.child;case 8:return Xr(l,d,d.pendingProps.children,g),d.child;case 12:return Xr(l,d,d.pendingProps.children,g),d.child;case 10:return x=d.pendingProps,Ys(d,d.type,x.value),Xr(l,d,x.children,g),d.child;case 9:return T=d.type._context,x=d.pendingProps.children,Xs(d),T=oi(T),x=x(T),d.flags|=1,Xr(l,d,x,g),d.child;case 14:return jn(l,d,d.type,d.pendingProps,g);case 15:return Ip(l,d,d.type,d.pendingProps,g);case 19:return R(l,d,g);case 31:return x=d.pendingProps,g=d.mode,x={mode:x.mode,children:x.children},l===null?(g=w(x,g),g.ref=d.ref,d.child=g,g.return=d,d=g):(g=Yo(l.child,x),g.ref=d.ref,d.child=g,g.return=d,d=g),d;case 22:return sm(l,d,g);case 24:return Xs(d),x=oi(kr),l===null?(T=Ha(),T===null&&(T=sr,M=vd(),T.pooledCache=M,M.refCount++,M!==null&&(T.pooledCacheLanes|=g),T=M),d.memoizedState={parent:x,cache:T},Su(d),Ys(d,kr,T)):((l.lanes&g)!==0&&(Kc(l,d),Cu(d,null,null,g),Qs()),T=l.memoizedState,M=d.memoizedState,T.parent!==x?(T={parent:x,cache:x},d.memoizedState=T,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=T),Ys(d,kr,x)):(x=M.cache,Ys(d,kr,x),x!==T.cache&&op(d,[kr],g,!0))),Xr(l,d,d.pendingProps.children,g),d.child;case 29:throw d.pendingProps}throw Error(e(156,d.tag))}function bt(l){l.flags|=4}function It(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!KC(d)){if(d=Zo.current,d!==null&&((Mn&4194048)===Mn?ba!==null:(Mn&62914560)!==Mn&&(Mn&536870912)===0||d!==ba))throw Jo=Wc,up;l.flags|=8192}}function Pt(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?dn():536870912,l.lanes|=d,Vd|=d)}function Gt(l,d){if(!Rn)switch(l.tailMode){case"hidden":d=l.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var x=null;g!==null;)g.alternate!==null&&(x=g),g=g.sibling;x===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:x.sibling=null}}function Yt(l){var d=l.alternate!==null&&l.alternate.child===l.child,g=0,x=0;if(d)for(var T=l.child;T!==null;)g|=T.lanes|T.childLanes,x|=T.subtreeFlags&65011712,x|=T.flags&65011712,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)g|=T.lanes|T.childLanes,x|=T.subtreeFlags,x|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=x,l.childLanes=g,d}function ve(l,d,g){var x=d.pendingProps;switch(dd(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(d),null;case 1:return Yt(d),null;case 3:return g=d.stateNode,x=null,l!==null&&(x=l.memoizedState.cache),d.memoizedState.cache!==x&&(d.flags|=2048),Xo(kr),be(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(Vc(d)?bt(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Ji())),Yt(d),null;case 26:return g=d.memoizedState,l===null?(bt(d),g!==null?(Yt(d),It(d,g)):(Yt(d),d.flags&=-16777217)):g?g!==l.memoizedState?(bt(d),Yt(d),It(d,g)):(Yt(d),d.flags&=-16777217):(l.memoizedProps!==x&&bt(d),Yt(d),d.flags&=-16777217),null;case 27:Ee(d),g=Xt.current;var T=d.type;if(l!==null&&d.stateNode!=null)l.memoizedProps!==x&&bt(d);else{if(!x){if(d.stateNode===null)throw Error(e(166));return Yt(d),null}l=Mt.current,Vc(d)?Rg(d):(l=BC(T,x,g),d.stateNode=l,bt(d))}return Yt(d),null;case 5:if(Ee(d),g=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==x&&bt(d);else{if(!x){if(d.stateNode===null)throw Error(e(166));return Yt(d),null}if(l=Mt.current,Vc(d))Rg(d);else{switch(T=xm(Xt.current),l){case 1:l=T.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:l=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":l=T.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":l=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":l=T.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof x.is=="string"?T.createElement("select",{is:x.is}):T.createElement("select"),x.multiple?l.multiple=!0:x.size&&(l.size=x.size);break;default:l=typeof x.is=="string"?T.createElement(g,{is:x.is}):T.createElement(g)}}l[cn]=d,l[Sn]=x;t:for(T=d.child;T!==null;){if(T.tag===5||T.tag===6)l.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===d)break t;for(;T.sibling===null;){if(T.return===null||T.return===d)break t;T=T.return}T.sibling.return=T.return,T=T.sibling}d.stateNode=l;t:switch(eo(l,g,x),g){case"button":case"input":case"select":case"textarea":l=!!x.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&bt(d)}}return Yt(d),d.flags&=-16777217,null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==x&&bt(d);else{if(typeof x!="string"&&d.stateNode===null)throw Error(e(166));if(l=Xt.current,Vc(d)){if(l=d.stateNode,g=d.memoizedProps,x=null,T=ki,T!==null)switch(T.tag){case 27:case 5:x=T.memoizedProps}l[cn]=d,l=!!(l.nodeValue===g||x!==null&&x.suppressHydrationWarning===!0||DC(l.nodeValue,g)),l||Al(d)}else l=xm(l).createTextNode(x),l[cn]=d,d.stateNode=l}return Yt(d),null;case 13:if(x=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(T=Vc(d),x!==null&&x.dehydrated!==null){if(l===null){if(!T)throw Error(e(318));if(T=d.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(e(317));T[cn]=d}else Fc(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Yt(d),T=!1}else T=Ji(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=T),T=!0;if(!T)return d.flags&256?(Ka(d),d):(Ka(d),null)}if(Ka(d),(d.flags&128)!==0)return d.lanes=g,d;if(g=x!==null,l=l!==null&&l.memoizedState!==null,g){x=d.child,T=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(T=x.alternate.memoizedState.cachePool.pool);var M=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(M=x.memoizedState.cachePool.pool),M!==T&&(x.flags|=2048)}return g!==l&&g&&(d.child.flags|=8192),Pt(d,d.updateQueue),Yt(d),null;case 4:return be(),l===null&&uw(d.stateNode.containerInfo),Yt(d),null;case 10:return Xo(d.type),Yt(d),null;case 19:if(yt(ar),T=d.memoizedState,T===null)return Yt(d),null;if(x=(d.flags&128)!==0,M=T.rendering,M===null)if(x)Gt(T,!1);else{if(Fr!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(M=sf(l),M!==null){for(d.flags|=128,Gt(T,!1),l=M.updateQueue,d.updateQueue=l,Pt(d,l),d.subtreeFlags=0,l=g,g=d.child;g!==null;)Ng(g,l),g=g.sibling;return kt(ar,ar.current&1|2),d.child}l=l.sibling}T.tail!==null&&ie()>fm&&(d.flags|=128,x=!0,Gt(T,!1),d.lanes=4194304)}else{if(!x)if(l=sf(M),l!==null){if(d.flags|=128,x=!0,l=l.updateQueue,d.updateQueue=l,Pt(d,l),Gt(T,!0),T.tail===null&&T.tailMode==="hidden"&&!M.alternate&&!Rn)return Yt(d),null}else 2*ie()-T.renderingStartTime>fm&&g!==536870912&&(d.flags|=128,x=!0,Gt(T,!1),d.lanes=4194304);T.isBackwards?(M.sibling=d.child,d.child=M):(l=T.last,l!==null?l.sibling=M:d.child=M,T.last=M)}return T.tail!==null?(d=T.tail,T.rendering=d,T.tail=d.sibling,T.renderingStartTime=ie(),d.sibling=null,l=ar.current,kt(ar,x?l&1|2:l&1),d):(Yt(d),null);case 22:case 23:return Ka(d),bd(),x=d.memoizedState!==null,l!==null?l.memoizedState!==null!==x&&(d.flags|=8192):x&&(d.flags|=8192),x?(g&536870912)!==0&&(d.flags&128)===0&&(Yt(d),d.subtreeFlags&6&&(d.flags|=8192)):Yt(d),g=d.updateQueue,g!==null&&Pt(d,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),x=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==g&&(d.flags|=2048),l!==null&&yt(mi),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),d.memoizedState.cache!==g&&(d.flags|=2048),Xo(kr),Yt(d),null;case 25:return null;case 30:return null}throw Error(e(156,d.tag))}function Te(l,d){switch(dd(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Xo(kr),be(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return Ee(d),null;case 13:if(Ka(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(e(340));Fc()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return yt(ar),null;case 4:return be(),null;case 10:return Xo(d.type),null;case 22:case 23:return Ka(d),bd(),l!==null&&yt(mi),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Xo(kr),null;case 25:return null;default:return null}}function ke(l,d){switch(dd(d),d.tag){case 3:Xo(kr),be();break;case 26:case 27:case 5:Ee(d);break;case 4:be();break;case 13:Ka(d);break;case 19:yt(ar);break;case 10:Xo(d.type);break;case 22:case 23:Ka(d),bd(),l!==null&&yt(mi);break;case 24:Xo(kr)}}function _e(l,d){try{var g=d.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var T=x.next;g=T;do{if((g.tag&l)===l){x=void 0;var M=g.create,G=g.inst;x=M(),G.destroy=x}g=g.next}while(g!==T)}}catch(at){nr(d,d.return,at)}}function Ae(l,d,g){try{var x=d.updateQueue,T=x!==null?x.lastEffect:null;if(T!==null){var M=T.next;x=M;do{if((x.tag&l)===l){var G=x.inst,at=G.destroy;if(at!==void 0){G.destroy=void 0,T=d;var At=g,Ht=at;try{Ht()}catch(re){nr(T,At,re)}}}x=x.next}while(x!==M)}}catch(re){nr(d,d.return,re)}}function ze(l){var d=l.updateQueue;if(d!==null){var g=l.stateNode;try{Ug(d,g)}catch(x){nr(l,l.return,x)}}}function Ve(l,d,g){g.props=Ln(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(x){nr(l,d,x)}}function Qe(l,d){try{var g=l.ref;if(g!==null){switch(l.tag){case 26:case 27:case 5:var x=l.stateNode;break;case 30:x=l.stateNode;break;default:x=l.stateNode}typeof g=="function"?l.refCleanup=g(x):g.current=x}}catch(T){nr(l,d,T)}}function wn(l,d){var g=l.ref,x=l.refCleanup;if(g!==null)if(typeof x=="function")try{x()}catch(T){nr(l,d,T)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(T){nr(l,d,T)}else g.current=null}function Vr(l){var d=l.type,g=l.memoizedProps,x=l.stateNode;try{t:switch(d){case"button":case"input":case"select":case"textarea":g.autoFocus&&x.focus();break t;case"img":g.src?x.src=g.src:g.srcSet&&(x.srcset=g.srcSet)}}catch(T){nr(l,l.return,T)}}function Xn(l,d,g){try{var x=l.stateNode;xN(x,l.type,g,d),x[Sn]=d}catch(T){nr(l,l.return,T)}}function Zi(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Hu(l.type)||l.tag===4}function yi(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||Zi(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Hu(l.type)||l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function pr(l,d,g){var x=l.tag;if(x===5||x===6)l=l.stateNode,d?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(l,d):(d=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,d.appendChild(l),g=g._reactRootContainer,g!=null||d.onclick!==null||(d.onclick=wm));else if(x!==4&&(x===27&&Hu(l.type)&&(g=l.stateNode,d=null),l=l.child,l!==null))for(pr(l,d,g),l=l.sibling;l!==null;)pr(l,d,g),l=l.sibling}function li(l,d,g){var x=l.tag;if(x===5||x===6)l=l.stateNode,d?g.insertBefore(l,d):g.appendChild(l);else if(x!==4&&(x===27&&Hu(l.type)&&(g=l.stateNode),l=l.child,l!==null))for(li(l,d,g),l=l.sibling;l!==null;)li(l,d,g),l=l.sibling}function Jr(l){var d=l.stateNode,g=l.memoizedProps;try{for(var x=l.type,T=d.attributes;T.length;)d.removeAttributeNode(T[0]);eo(d,x,g),d[cn]=l,d[Sn]=g}catch(M){nr(l,l.return,M)}}var Fn=!1,fn=!1,er=!1,Pi=typeof WeakSet=="function"?WeakSet:Set,vr=null;function al(l,d){if(l=l.containerInfo,dw=Om,l=Rc(l),go(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else t:{g=(g=l.ownerDocument)&&g.defaultView||window;var x=g.getSelection&&g.getSelection();if(x&&x.rangeCount!==0){g=x.anchorNode;var T=x.anchorOffset,M=x.focusNode;x=x.focusOffset;try{g.nodeType,M.nodeType}catch{g=null;break t}var G=0,at=-1,At=-1,Ht=0,re=0,ue=l,Wt=null;e:for(;;){for(var $t;ue!==g||T!==0&&ue.nodeType!==3||(at=G+T),ue!==M||x!==0&&ue.nodeType!==3||(At=G+x),ue.nodeType===3&&(G+=ue.nodeValue.length),($t=ue.firstChild)!==null;)Wt=ue,ue=$t;for(;;){if(ue===l)break e;if(Wt===g&&++Ht===T&&(at=G),Wt===M&&++re===x&&(At=G),($t=ue.nextSibling)!==null)break;ue=Wt,Wt=ue.parentNode}ue=$t}g=at===-1||At===-1?null:{start:at,end:At}}else g=null}g=g||{start:0,end:0}}else g=null;for(hw={focusedElem:l,selectionRange:g},Om=!1,vr=d;vr!==null;)if(d=vr,l=d.child,(d.subtreeFlags&1024)!==0&&l!==null)l.return=d,vr=l;else for(;vr!==null;){switch(d=vr,M=d.alternate,l=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&M!==null){l=void 0,g=d,T=M.memoizedProps,M=M.memoizedState,x=g.stateNode;try{var tn=Ln(g.type,T,g.elementType===g.type);l=x.getSnapshotBeforeUpdate(tn,M),x.__reactInternalSnapshotBeforeUpdate=l}catch(Xe){nr(g,g.return,Xe)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,g=l.nodeType,g===9)gw(l);else if(g===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":gw(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(e(163))}if(l=d.sibling,l!==null){l.return=d.return,vr=l;break}vr=d.return}}function ui(l,d,g){var x=g.flags;switch(g.tag){case 0:case 11:case 15:Lu(l,g),x&4&&_e(5,g);break;case 1:if(Lu(l,g),x&4)if(l=g.stateNode,d===null)try{l.componentDidMount()}catch(G){nr(g,g.return,G)}else{var T=Ln(g.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(T,d,l.__reactInternalSnapshotBeforeUpdate)}catch(G){nr(g,g.return,G)}}x&64&&ze(g),x&512&&Qe(g,g.return);break;case 3:if(Lu(l,g),x&64&&(l=g.updateQueue,l!==null)){if(d=null,g.child!==null)switch(g.child.tag){case 27:case 5:d=g.child.stateNode;break;case 1:d=g.child.stateNode}try{Ug(l,d)}catch(G){nr(g,g.return,G)}}break;case 27:d===null&&x&4&&Jr(g);case 26:case 5:Lu(l,g),d===null&&x&4&&Vr(g),x&512&&Qe(g,g.return);break;case 12:Lu(l,g);break;case 13:Lu(l,g),x&4&&ll(l,g),x&64&&(l=g.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(g=cN.bind(null,g),AN(l,g))));break;case 22:if(x=g.memoizedState!==null||Fn,!x){d=d!==null&&d.memoizedState!==null||fn,T=Fn;var M=fn;Fn=x,(fn=d)&&!M?ju(l,g,(g.subtreeFlags&8772)!==0):Lu(l,g),Fn=T,fn=M}break;case 30:break;default:Lu(l,g)}}function wa(l){var d=l.alternate;d!==null&&(l.alternate=null,wa(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&ir(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var un=null,Ni=!1;function bi(l,d,g){for(g=g.child;g!==null;)sl(l,d,g),g=g.sibling}function sl(l,d,g){if(X&&typeof X.onCommitFiberUnmount=="function")try{X.onCommitFiberUnmount(he,g)}catch{}switch(g.tag){case 26:fn||wn(g,d),bi(l,d,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:fn||wn(g,d);var x=un,T=Ni;Hu(g.type)&&(un=g.stateNode,Ni=!1),bi(l,d,g),Gp(g.stateNode),un=x,Ni=T;break;case 5:fn||wn(g,d);case 6:if(x=un,T=Ni,un=null,bi(l,d,g),un=x,Ni=T,un!==null)if(Ni)try{(un.nodeType===9?un.body:un.nodeName==="HTML"?un.ownerDocument.body:un).removeChild(g.stateNode)}catch(M){nr(g,d,M)}else try{un.removeChild(g.stateNode)}catch(M){nr(g,d,M)}break;case 18:un!==null&&(Ni?(l=un,jC(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,g.stateNode),nv(l)):jC(un,g.stateNode));break;case 4:x=un,T=Ni,un=g.stateNode.containerInfo,Ni=!0,bi(l,d,g),un=x,Ni=T;break;case 0:case 11:case 14:case 15:fn||Ae(2,g,d),fn||Ae(4,g,d),bi(l,d,g);break;case 1:fn||(wn(g,d),x=g.stateNode,typeof x.componentWillUnmount=="function"&&Ve(g,d,x)),bi(l,d,g);break;case 21:bi(l,d,g);break;case 22:fn=(x=fn)||g.memoizedState!==null,bi(l,d,g),fn=x;break;default:bi(l,d,g)}}function ll(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{nv(l)}catch(g){nr(d,d.return,g)}}function Ri(l){switch(l.tag){case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new Pi),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new Pi),d;default:throw Error(e(435,l.tag))}}function ul(l,d){var g=Ri(l);d.forEach(function(x){var T=fN.bind(null,l,x);g.has(x)||(g.add(x),x.then(T,T))})}function Qi(l,d){var g=d.deletions;if(g!==null)for(var x=0;x<g.length;x++){var T=g[x],M=l,G=d,at=G;t:for(;at!==null;){switch(at.tag){case 27:if(Hu(at.type)){un=at.stateNode,Ni=!1;break t}break;case 5:un=at.stateNode,Ni=!1;break t;case 3:case 4:un=at.stateNode.containerInfo,Ni=!0;break t}at=at.return}if(un===null)throw Error(e(160));sl(M,G,T),un=null,Ni=!1,M=T.alternate,M!==null&&(M.return=null),T.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)X1(d,l),d=d.sibling}var Ss=null;function X1(l,d){var g=l.alternate,x=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Qi(d,l),xa(l),x&4&&(Ae(3,l,l.return),_e(3,l),Ae(5,l,l.return));break;case 1:Qi(d,l),xa(l),x&512&&(fn||g===null||wn(g,g.return)),x&64&&Fn&&(l=l.updateQueue,l!==null&&(x=l.callbacks,x!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?x:g.concat(x))));break;case 26:var T=Ss;if(Qi(d,l),xa(l),x&512&&(fn||g===null||wn(g,g.return)),x&4){var M=g!==null?g.memoizedState:null;if(x=l.memoizedState,g===null)if(x===null)if(l.stateNode===null){t:{x=l.type,g=l.memoizedProps,T=T.ownerDocument||T;e:switch(x){case"title":M=T.getElementsByTagName("title")[0],(!M||M[gn]||M[cn]||M.namespaceURI==="http://www.w3.org/2000/svg"||M.hasAttribute("itemprop"))&&(M=T.createElement(x),T.head.insertBefore(M,T.querySelector("head > title"))),eo(M,x,g),M[cn]=l,An(M),x=M;break t;case"link":var G=WC("link","href",T).get(x+(g.href||""));if(G){for(var at=0;at<G.length;at++)if(M=G[at],M.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&M.getAttribute("rel")===(g.rel==null?null:g.rel)&&M.getAttribute("title")===(g.title==null?null:g.title)&&M.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){G.splice(at,1);break e}}M=T.createElement(x),eo(M,x,g),T.head.appendChild(M);break;case"meta":if(G=WC("meta","content",T).get(x+(g.content||""))){for(at=0;at<G.length;at++)if(M=G[at],M.getAttribute("content")===(g.content==null?null:""+g.content)&&M.getAttribute("name")===(g.name==null?null:g.name)&&M.getAttribute("property")===(g.property==null?null:g.property)&&M.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&M.getAttribute("charset")===(g.charSet==null?null:g.charSet)){G.splice(at,1);break e}}M=T.createElement(x),eo(M,x,g),T.head.appendChild(M);break;default:throw Error(e(468,x))}M[cn]=l,An(M),x=M}l.stateNode=x}else qC(T,l.type,l.stateNode);else l.stateNode=zC(T,x,l.memoizedProps);else M!==x?(M===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):M.count--,x===null?qC(T,l.type,l.stateNode):zC(T,x,l.memoizedProps)):x===null&&l.stateNode!==null&&Xn(l,l.memoizedProps,g.memoizedProps)}break;case 27:Qi(d,l),xa(l),x&512&&(fn||g===null||wn(g,g.return)),g!==null&&x&4&&Xn(l,l.memoizedProps,g.memoizedProps);break;case 5:if(Qi(d,l),xa(l),x&512&&(fn||g===null||wn(g,g.return)),l.flags&32){T=l.stateNode;try{ao(T,"")}catch($t){nr(l,l.return,$t)}}x&4&&l.stateNode!=null&&(T=l.memoizedProps,Xn(l,T,g!==null?g.memoizedProps:T)),x&1024&&(er=!0);break;case 6:if(Qi(d,l),xa(l),x&4){if(l.stateNode===null)throw Error(e(162));x=l.memoizedProps,g=l.stateNode;try{g.nodeValue=x}catch($t){nr(l,l.return,$t)}}break;case 3:if(Cm=null,T=Ss,Ss=Sm(d.containerInfo),Qi(d,l),Ss=T,xa(l),x&4&&g!==null&&g.memoizedState.isDehydrated)try{nv(d.containerInfo)}catch($t){nr(l,l.return,$t)}er&&(er=!1,J1(l));break;case 4:x=Ss,Ss=Sm(l.stateNode.containerInfo),Qi(d,l),xa(l),Ss=x;break;case 12:Qi(d,l),xa(l);break;case 13:Qi(d,l),xa(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(Yb=ie()),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,ul(l,x)));break;case 22:T=l.memoizedState!==null;var At=g!==null&&g.memoizedState!==null,Ht=Fn,re=fn;if(Fn=Ht||T,fn=re||At,Qi(d,l),fn=re,Fn=Ht,xa(l),x&8192)t:for(d=l.stateNode,d._visibility=T?d._visibility&-2:d._visibility|1,T&&(g===null||At||Fn||fn||lf(l)),g=null,d=l;;){if(d.tag===5||d.tag===26){if(g===null){At=g=d;try{if(M=At.stateNode,T)G=M.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none";else{at=At.stateNode;var ue=At.memoizedProps.style,Wt=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;at.style.display=Wt==null||typeof Wt=="boolean"?"":(""+Wt).trim()}}catch($t){nr(At,At.return,$t)}}}else if(d.tag===6){if(g===null){At=d;try{At.stateNode.nodeValue=T?"":At.memoizedProps}catch($t){nr(At,At.return,$t)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break t;for(;d.sibling===null;){if(d.return===null||d.return===l)break t;g===d&&(g=null),d=d.return}g===d&&(g=null),d.sibling.return=d.return,d=d.sibling}x&4&&(x=l.updateQueue,x!==null&&(g=x.retryQueue,g!==null&&(x.retryQueue=null,ul(l,g))));break;case 19:Qi(d,l),xa(l),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,ul(l,x)));break;case 30:break;case 21:break;default:Qi(d,l),xa(l)}}function xa(l){var d=l.flags;if(d&2){try{for(var g,x=l.return;x!==null;){if(Zi(x)){g=x;break}x=x.return}if(g==null)throw Error(e(160));switch(g.tag){case 27:var T=g.stateNode,M=yi(l);li(l,M,T);break;case 5:var G=g.stateNode;g.flags&32&&(ao(G,""),g.flags&=-33);var at=yi(l);li(l,at,G);break;case 3:case 4:var At=g.stateNode.containerInfo,Ht=yi(l);pr(l,Ht,At);break;default:throw Error(e(161))}}catch(re){nr(l,l.return,re)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function J1(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;J1(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Lu(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)ui(l,d.alternate,d),d=d.sibling}function lf(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:Ae(4,d,d.return),lf(d);break;case 1:wn(d,d.return);var g=d.stateNode;typeof g.componentWillUnmount=="function"&&Ve(d,d.return,g),lf(d);break;case 27:Gp(d.stateNode);case 26:case 5:wn(d,d.return),lf(d);break;case 22:d.memoizedState===null&&lf(d);break;case 30:lf(d);break;default:lf(d)}l=l.sibling}}function ju(l,d,g){for(g=g&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var x=d.alternate,T=l,M=d,G=M.flags;switch(M.tag){case 0:case 11:case 15:ju(T,M,g),_e(4,M);break;case 1:if(ju(T,M,g),x=M,T=x.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Ht){nr(x,x.return,Ht)}if(x=M,T=x.updateQueue,T!==null){var at=x.stateNode;try{var At=T.shared.hiddenCallbacks;if(At!==null)for(T.shared.hiddenCallbacks=null,T=0;T<At.length;T++)Bg(At[T],at)}catch(Ht){nr(x,x.return,Ht)}}g&&G&64&&ze(M),Qe(M,M.return);break;case 27:Jr(M);case 26:case 5:ju(T,M,g),g&&x===null&&G&4&&Vr(M),Qe(M,M.return);break;case 12:ju(T,M,g);break;case 13:ju(T,M,g),g&&G&4&&ll(T,M);break;case 22:M.memoizedState===null&&ju(T,M,g),Qe(M,M.return);break;case 30:break;default:ju(T,M,g)}d=d.sibling}}function Wb(l,d){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&ms(g))}function qb(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&ms(l))}function cl(l,d,g,x){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Z1(l,d,g,x),d=d.sibling}function Z1(l,d,g,x){var T=d.flags;switch(d.tag){case 0:case 11:case 15:cl(l,d,g,x),T&2048&&_e(9,d);break;case 1:cl(l,d,g,x);break;case 3:cl(l,d,g,x),T&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&ms(l)));break;case 12:if(T&2048){cl(l,d,g,x),l=d.stateNode;try{var M=d.memoizedProps,G=M.id,at=M.onPostCommit;typeof at=="function"&&at(G,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(At){nr(d,d.return,At)}}else cl(l,d,g,x);break;case 13:cl(l,d,g,x);break;case 23:break;case 22:M=d.stateNode,G=d.alternate,d.memoizedState!==null?M._visibility&2?cl(l,d,g,x):Vp(l,d):M._visibility&2?cl(l,d,g,x):(M._visibility|=2,Id(l,d,g,x,(d.subtreeFlags&10256)!==0)),T&2048&&Wb(G,d);break;case 24:cl(l,d,g,x),T&2048&&qb(d.alternate,d);break;default:cl(l,d,g,x)}}function Id(l,d,g,x,T){for(T=T&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var M=l,G=d,at=g,At=x,Ht=G.flags;switch(G.tag){case 0:case 11:case 15:Id(M,G,at,At,T),_e(8,G);break;case 23:break;case 22:var re=G.stateNode;G.memoizedState!==null?re._visibility&2?Id(M,G,at,At,T):Vp(M,G):(re._visibility|=2,Id(M,G,at,At,T)),T&&Ht&2048&&Wb(G.alternate,G);break;case 24:Id(M,G,at,At,T),T&&Ht&2048&&qb(G.alternate,G);break;default:Id(M,G,at,At,T)}d=d.sibling}}function Vp(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var g=l,x=d,T=x.flags;switch(x.tag){case 22:Vp(g,x),T&2048&&Wb(x.alternate,x);break;case 24:Vp(g,x),T&2048&&qb(x.alternate,x);break;default:Vp(g,x)}d=d.sibling}}var Fp=8192;function Bd(l){if(l.subtreeFlags&Fp)for(l=l.child;l!==null;)Q1(l),l=l.sibling}function Q1(l){switch(l.tag){case 26:Bd(l),l.flags&Fp&&l.memoizedState!==null&&FN(Ss,l.memoizedState,l.memoizedProps);break;case 5:Bd(l);break;case 3:case 4:var d=Ss;Ss=Sm(l.stateNode.containerInfo),Bd(l),Ss=d;break;case 22:l.memoizedState===null&&(d=l.alternate,d!==null&&d.memoizedState!==null?(d=Fp,Fp=16777216,Bd(l),Fp=d):Bd(l));break;default:Bd(l)}}function tC(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Hp(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var g=0;g<d.length;g++){var x=d[g];vr=x,nC(x,l)}tC(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)eC(l),l=l.sibling}function eC(l){switch(l.tag){case 0:case 11:case 15:Hp(l),l.flags&2048&&Ae(9,l,l.return);break;case 3:Hp(l);break;case 12:Hp(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,cm(l)):Hp(l);break;default:Hp(l)}}function cm(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var g=0;g<d.length;g++){var x=d[g];vr=x,nC(x,l)}tC(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:Ae(8,d,d.return),cm(d);break;case 22:g=d.stateNode,g._visibility&2&&(g._visibility&=-3,cm(d));break;default:cm(d)}l=l.sibling}}function nC(l,d){for(;vr!==null;){var g=vr;switch(g.tag){case 0:case 11:case 15:Ae(8,g,d);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var x=g.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:ms(g.memoizedState.cache)}if(x=g.child,x!==null)x.return=g,vr=x;else t:for(g=l;vr!==null;){x=vr;var T=x.sibling,M=x.return;if(wa(x),x===g){vr=null;break t}if(T!==null){T.return=M,vr=T;break t}vr=M}}}var rN={getCacheForType:function(l){var d=oi(kr),g=d.data.get(l);return g===void 0&&(g=l(),d.data.set(l,g)),g}},iN=typeof WeakMap=="function"?WeakMap:Map,zn=0,sr=null,Cn=null,Mn=0,Wn=0,Sa=null,Iu=!1,Ud=!1,Kb=!1,Fl=0,Fr=0,Bu=0,uf=0,$b=0,$a=0,Vd=0,zp=null,ta=null,Gb=!1,Yb=0,fm=1/0,dm=null,Uu=null,to=0,Vu=null,Fd=null,Hd=0,Xb=0,Jb=null,rC=null,Wp=0,Zb=null;function _a(){if((zn&2)!==0&&Mn!==0)return Mn&-Mn;if(U.T!==null){var l=ai;return l!==0?l:ow()}return we()}function iC(){$a===0&&($a=(Mn&536870912)===0||Rn?en():536870912);var l=Zo.current;return l!==null&&(l.flags|=32),$a}function Ca(l,d,g){(l===sr&&(Wn===2||Wn===9)||l.cancelPendingCommit!==null)&&(zd(l,0),Fu(l,Mn,$a,!1)),Un(l,g),((zn&2)===0||l!==sr)&&(l===sr&&((zn&2)===0&&(uf|=g),Fr===4&&Fu(l,Mn,$a,!1)),fl(l))}function oC(l,d,g){if((zn&6)!==0)throw Error(e(327));var x=!g&&(d&124)===0&&(d&l.expiredLanes)===0||ae(l,d),T=x?sN(l,d):ew(l,d,!0),M=x;do{if(T===0){Ud&&!x&&Fu(l,d,0,!1);break}else{if(g=l.current.alternate,M&&!oN(g)){T=ew(l,d,!1),M=!1;continue}if(T===2){if(M=d,l.errorRecoveryDisabledLanes&M)var G=0;else G=l.pendingLanes&-536870913,G=G!==0?G:G&536870912?536870912:0;if(G!==0){d=G;t:{var at=l;T=zp;var At=at.current.memoizedState.isDehydrated;if(At&&(zd(at,G).flags|=256),G=ew(at,G,!1),G!==2){if(Kb&&!At){at.errorRecoveryDisabledLanes|=M,uf|=M,T=4;break t}M=ta,ta=T,M!==null&&(ta===null?ta=M:ta.push.apply(ta,M))}T=G}if(M=!1,T!==2)continue}}if(T===1){zd(l,0),Fu(l,d,0,!0);break}t:{switch(x=l,M=T,M){case 0:case 1:throw Error(e(345));case 4:if((d&4194048)!==d)break;case 6:Fu(x,d,$a,!Iu);break t;case 2:ta=null;break;case 3:case 5:break;default:throw Error(e(329))}if((d&62914560)===d&&(T=Yb+300-ie(),10<T)){if(Fu(x,d,$a,!Iu),de(x,0,!0)!==0)break t;x.timeoutHandle=RC(aC.bind(null,x,g,ta,dm,Gb,d,$a,uf,Vd,Iu,M,2,-0,0),T);break t}aC(x,g,ta,dm,Gb,d,$a,uf,Vd,Iu,M,0,-0,0)}}break}while(!0);fl(l)}function aC(l,d,g,x,T,M,G,at,At,Ht,re,ue,Wt,$t){if(l.timeoutHandle=-1,ue=d.subtreeFlags,(ue&8192||(ue&16785408)===16785408)&&(Jp={stylesheets:null,count:0,unsuspend:VN},Q1(d),ue=HN(),ue!==null)){l.cancelPendingCommit=ue(hC.bind(null,l,d,M,g,x,T,G,at,At,re,1,Wt,$t)),Fu(l,M,G,!Ht);return}hC(l,d,M,g,x,T,G,at,At)}function oN(l){for(var d=l;;){var g=d.tag;if((g===0||g===11||g===15)&&d.flags&16384&&(g=d.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var x=0;x<g.length;x++){var T=g[x],M=T.getSnapshot;T=T.value;try{if(!lo(M(),T))return!1}catch{return!1}}if(g=d.child,d.subtreeFlags&16384&&g!==null)g.return=d,d=g;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Fu(l,d,g,x){d&=~$b,d&=~uf,l.suspendedLanes|=d,l.pingedLanes&=~d,x&&(l.warmLanes|=d),x=l.expirationTimes;for(var T=d;0<T;){var M=31-A(T),G=1<<M;x[M]=-1,T&=~G}g!==0&&ot(l,g,d)}function hm(){return(zn&6)===0?(qp(0),!1):!0}function Qb(){if(Cn!==null){if(Wn===0)var l=Cn.return;else l=Cn,So=tr=null,vp(l),Wa=null,rf=0,l=Cn;for(;l!==null;)ke(l.alternate,l),l=l.return;Cn=null}}function zd(l,d){var g=l.timeoutHandle;g!==-1&&(l.timeoutHandle=-1,_N(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),Qb(),sr=l,Cn=g=Yo(l.current,null),Mn=d,Wn=0,Sa=null,Iu=!1,Ud=ae(l,d),Kb=!1,Vd=$a=$b=uf=Bu=Fr=0,ta=zp=null,Gb=!1,(d&8)!==0&&(d|=d&32);var x=l.entangledLanes;if(x!==0)for(l=l.entanglements,x&=d;0<x;){var T=31-A(x),M=1<<T;d|=l[T],x&=~M}return Fl=d,Ic(),g}function sC(l,d){hn=null,U.H=ef,d===Ml||d===gd?(d=cp(),Wn=3):d===up?(d=cp(),Wn=4):Wn=d===Lp?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Sa=d,Cn===null&&(Fr=1,Ul(l,Go(d,l.current)))}function lC(){var l=U.H;return U.H=ef,l===null?ef:l}function uC(){var l=U.A;return U.A=rN,l}function tw(){Fr=4,Iu||(Mn&4194048)!==Mn&&Zo.current!==null||(Ud=!0),(Bu&134217727)===0&&(uf&134217727)===0||sr===null||Fu(sr,Mn,$a,!1)}function ew(l,d,g){var x=zn;zn|=2;var T=lC(),M=uC();(sr!==l||Mn!==d)&&(dm=null,zd(l,d)),d=!1;var G=Fr;t:do try{if(Wn!==0&&Cn!==null){var at=Cn,At=Sa;switch(Wn){case 8:Qb(),G=6;break t;case 3:case 2:case 9:case 6:Zo.current===null&&(d=!0);var Ht=Wn;if(Wn=0,Sa=null,Wd(l,at,At,Ht),g&&Ud){G=0;break t}break;default:Ht=Wn,Wn=0,Sa=null,Wd(l,at,At,Ht)}}aN(),G=Fr;break}catch(re){sC(l,re)}while(!0);return d&&l.shellSuspendCounter++,So=tr=null,zn=x,U.H=T,U.A=M,Cn===null&&(sr=null,Mn=0,Ic()),G}function aN(){for(;Cn!==null;)cC(Cn)}function sN(l,d){var g=zn;zn|=2;var x=lC(),T=uC();sr!==l||Mn!==d?(dm=null,fm=ie()+500,zd(l,d)):Ud=ae(l,d);t:do try{if(Wn!==0&&Cn!==null){d=Cn;var M=Sa;e:switch(Wn){case 1:Wn=0,Sa=null,Wd(l,d,M,1);break;case 2:case 9:if(xu(M)){Wn=0,Sa=null,fC(d);break}d=function(){Wn!==2&&Wn!==9||sr!==l||(Wn=7),fl(l)},M.then(d,d);break t;case 3:Wn=7;break t;case 4:Wn=5;break t;case 7:xu(M)?(Wn=0,Sa=null,fC(d)):(Wn=0,Sa=null,Wd(l,d,M,7));break;case 5:var G=null;switch(Cn.tag){case 26:G=Cn.memoizedState;case 5:case 27:var at=Cn;if(!G||KC(G)){Wn=0,Sa=null;var At=at.sibling;if(At!==null)Cn=At;else{var Ht=at.return;Ht!==null?(Cn=Ht,pm(Ht)):Cn=null}break e}}Wn=0,Sa=null,Wd(l,d,M,5);break;case 6:Wn=0,Sa=null,Wd(l,d,M,6);break;case 8:Qb(),Fr=6;break t;default:throw Error(e(462))}}lN();break}catch(re){sC(l,re)}while(!0);return So=tr=null,U.H=x,U.A=T,zn=g,Cn!==null?0:(sr=null,Mn=0,Ic(),Fr)}function lN(){for(;Cn!==null&&!Ut();)cC(Cn)}function cC(l){var d=vt(l.alternate,l,Fl);l.memoizedProps=l.pendingProps,d===null?pm(l):Cn=d}function fC(l){var d=l,g=d.alternate;switch(d.tag){case 15:case 0:d=lm(g,d,d.pendingProps,d.type,void 0,Mn);break;case 11:d=lm(g,d,d.pendingProps,d.type.render,d.ref,Mn);break;case 5:vp(d);default:ke(g,d),d=Cn=Ng(d,Fl),d=vt(g,d,Fl)}l.memoizedProps=l.pendingProps,d===null?pm(l):Cn=d}function Wd(l,d,g,x){So=tr=null,vp(d),Wa=null,rf=0;var T=d.return;try{if(am(l,T,d,g,Mn)){Fr=1,Ul(l,Go(g,l.current)),Cn=null;return}}catch(M){if(T!==null)throw Cn=T,M;Fr=1,Ul(l,Go(g,l.current)),Cn=null;return}d.flags&32768?(Rn||x===1?l=!0:Ud||(Mn&536870912)!==0?l=!1:(Iu=l=!0,(x===2||x===9||x===3||x===6)&&(x=Zo.current,x!==null&&x.tag===13&&(x.flags|=16384))),dC(d,l)):pm(d)}function pm(l){var d=l;do{if((d.flags&32768)!==0){dC(d,Iu);return}l=d.return;var g=ve(d.alternate,d,Fl);if(g!==null){Cn=g;return}if(d=d.sibling,d!==null){Cn=d;return}Cn=d=l}while(d!==null);Fr===0&&(Fr=5)}function dC(l,d){do{var g=Te(l.alternate,l);if(g!==null){g.flags&=32767,Cn=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!d&&(l=l.sibling,l!==null)){Cn=l;return}Cn=l=g}while(l!==null);Fr=6,Cn=null}function hC(l,d,g,x,T,M,G,at,At){l.cancelPendingCommit=null;do vm();while(to!==0);if((zn&6)!==0)throw Error(e(327));if(d!==null){if(d===l.current)throw Error(e(177));if(M=d.lanes|d.childLanes,M|=ld,Lr(l,g,M,G,at,At),l===sr&&(Cn=sr=null,Mn=0),Fd=d,Vu=l,Hd=g,Xb=M,Jb=T,rC=x,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,dN(q,function(){return yC(),null})):(l.callbackNode=null,l.callbackPriority=0),x=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||x){x=U.T,U.T=null,T=_t.p,_t.p=2,G=zn,zn|=4;try{al(l,d,g)}finally{zn=G,_t.p=T,U.T=x}}to=1,pC(),vC(),gC()}}function pC(){if(to===1){to=0;var l=Vu,d=Fd,g=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||g){g=U.T,U.T=null;var x=_t.p;_t.p=2;var T=zn;zn|=4;try{X1(d,l);var M=hw,G=Rc(l.containerInfo),at=M.focusedElem,At=M.selectionRange;if(G!==at&&at&&at.ownerDocument&&Zh(at.ownerDocument.documentElement,at)){if(At!==null&&go(at)){var Ht=At.start,re=At.end;if(re===void 0&&(re=Ht),"selectionStart"in at)at.selectionStart=Ht,at.selectionEnd=Math.min(re,at.value.length);else{var ue=at.ownerDocument||document,Wt=ue&&ue.defaultView||window;if(Wt.getSelection){var $t=Wt.getSelection(),tn=at.textContent.length,Xe=Math.min(At.start,tn),Zn=At.end===void 0?Xe:Math.min(At.end,tn);!$t.extend&&Xe>Zn&&(G=Zn,Zn=Xe,Xe=G);var Vt=Nc(at,Xe),Rt=Nc(at,Zn);if(Vt&&Rt&&($t.rangeCount!==1||$t.anchorNode!==Vt.node||$t.anchorOffset!==Vt.offset||$t.focusNode!==Rt.node||$t.focusOffset!==Rt.offset)){var Ft=ue.createRange();Ft.setStart(Vt.node,Vt.offset),$t.removeAllRanges(),Xe>Zn?($t.addRange(Ft),$t.extend(Rt.node,Rt.offset)):(Ft.setEnd(Rt.node,Rt.offset),$t.addRange(Ft))}}}}for(ue=[],$t=at;$t=$t.parentNode;)$t.nodeType===1&&ue.push({element:$t,left:$t.scrollLeft,top:$t.scrollTop});for(typeof at.focus=="function"&&at.focus(),at=0;at<ue.length;at++){var se=ue[at];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Om=!!dw,hw=dw=null}finally{zn=T,_t.p=x,U.T=g}}l.current=d,to=2}}function vC(){if(to===2){to=0;var l=Vu,d=Fd,g=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||g){g=U.T,U.T=null;var x=_t.p;_t.p=2;var T=zn;zn|=4;try{ui(l,d.alternate,d)}finally{zn=T,_t.p=x,U.T=g}}to=3}}function gC(){if(to===4||to===3){to=0,ce();var l=Vu,d=Fd,g=Hd,x=rC;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?to=5:(to=0,Fd=Vu=null,mC(l,l.pendingLanes));var T=l.pendingLanes;if(T===0&&(Uu=null),ee(g),d=d.stateNode,X&&typeof X.onCommitFiberRoot=="function")try{X.onCommitFiberRoot(he,d,void 0,(d.current.flags&128)===128)}catch{}if(x!==null){d=U.T,T=_t.p,_t.p=2,U.T=null;try{for(var M=l.onRecoverableError,G=0;G<x.length;G++){var at=x[G];M(at.value,{componentStack:at.stack})}}finally{U.T=d,_t.p=T}}(Hd&3)!==0&&vm(),fl(l),T=l.pendingLanes,(g&4194090)!==0&&(T&42)!==0?l===Zb?Wp++:(Wp=0,Zb=l):Wp=0,qp(0)}}function mC(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,ms(d)))}function vm(l){return pC(),vC(),gC(),yC()}function yC(){if(to!==5)return!1;var l=Vu,d=Xb;Xb=0;var g=ee(Hd),x=U.T,T=_t.p;try{_t.p=32>g?32:g,U.T=null,g=Jb,Jb=null;var M=Vu,G=Hd;if(to=0,Fd=Vu=null,Hd=0,(zn&6)!==0)throw Error(e(331));var at=zn;if(zn|=4,eC(M.current),Z1(M,M.current,G,g),zn=at,qp(0,!1),X&&typeof X.onPostCommitFiberRoot=="function")try{X.onPostCommitFiberRoot(he,M)}catch{}return!0}finally{_t.p=T,U.T=x,mC(l,d)}}function bC(l,d,g){d=Go(g,d),d=Ld(l.stateNode,d,2),l=Zs(l,d,2),l!==null&&(Un(l,2),fl(l))}function nr(l,d,g){if(l.tag===3)bC(l,l,g);else for(;d!==null;){if(d.tag===3){bC(d,l,g);break}else if(d.tag===1){var x=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Uu===null||!Uu.has(x))){l=Go(g,l),g=Np(2),x=Zs(d,g,2),x!==null&&(Rp(g,x,d,l),Un(x,2),fl(x));break}}d=d.return}}function nw(l,d,g){var x=l.pingCache;if(x===null){x=l.pingCache=new iN;var T=new Set;x.set(d,T)}else T=x.get(d),T===void 0&&(T=new Set,x.set(d,T));T.has(g)||(Kb=!0,T.add(g),l=uN.bind(null,l,d,g),d.then(l,l))}function uN(l,d,g){var x=l.pingCache;x!==null&&x.delete(d),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,sr===l&&(Mn&g)===g&&(Fr===4||Fr===3&&(Mn&62914560)===Mn&&300>ie()-Yb?(zn&2)===0&&zd(l,0):$b|=g,Vd===Mn&&(Vd=0)),fl(l)}function wC(l,d){d===0&&(d=dn()),l=qs(l,d),l!==null&&(Un(l,d),fl(l))}function cN(l){var d=l.memoizedState,g=0;d!==null&&(g=d.retryLane),wC(l,g)}function fN(l,d){var g=0;switch(l.tag){case 13:var x=l.stateNode,T=l.memoizedState;T!==null&&(g=T.retryLane);break;case 19:x=l.stateNode;break;case 22:x=l.stateNode._retryCache;break;default:throw Error(e(314))}x!==null&&x.delete(d),wC(l,g)}function dN(l,d){return Ke(l,d)}var gm=null,qd=null,rw=!1,mm=!1,iw=!1,cf=0;function fl(l){l!==qd&&l.next===null&&(qd===null?gm=qd=l:qd=qd.next=l),mm=!0,rw||(rw=!0,pN())}function qp(l,d){if(!iw&&mm){iw=!0;do for(var g=!1,x=gm;x!==null;){if(l!==0){var T=x.pendingLanes;if(T===0)var M=0;else{var G=x.suspendedLanes,at=x.pingedLanes;M=(1<<31-A(42|l)+1)-1,M&=T&~(G&~at),M=M&201326741?M&201326741|1:M?M|2:0}M!==0&&(g=!0,CC(x,M))}else M=Mn,M=de(x,x===sr?M:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(M&3)===0||ae(x,M)||(g=!0,CC(x,M));x=x.next}while(g);iw=!1}}function hN(){xC()}function xC(){mm=rw=!1;var l=0;cf!==0&&(SN()&&(l=cf),cf=0);for(var d=ie(),g=null,x=gm;x!==null;){var T=x.next,M=SC(x,d);M===0?(x.next=null,g===null?gm=T:g.next=T,T===null&&(qd=g)):(g=x,(l!==0||(M&3)!==0)&&(mm=!0)),x=T}qp(l)}function SC(l,d){for(var g=l.suspendedLanes,x=l.pingedLanes,T=l.expirationTimes,M=l.pendingLanes&-62914561;0<M;){var G=31-A(M),at=1<<G,At=T[G];At===-1?((at&g)===0||(at&x)!==0)&&(T[G]=xe(at,d)):At<=d&&(l.expiredLanes|=at),M&=~at}if(d=sr,g=Mn,g=de(l,l===d?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),x=l.callbackNode,g===0||l===d&&(Wn===2||Wn===9)||l.cancelPendingCommit!==null)return x!==null&&x!==null&&De(x),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||ae(l,g)){if(d=g&-g,d===l.callbackPriority)return d;switch(x!==null&&De(x),ee(g)){case 2:case 8:g=N;break;case 32:g=q;break;case 268435456:g=Q;break;default:g=q}return x=_C.bind(null,l),g=Ke(g,x),l.callbackPriority=d,l.callbackNode=g,d}return x!==null&&x!==null&&De(x),l.callbackPriority=2,l.callbackNode=null,2}function _C(l,d){if(to!==0&&to!==5)return l.callbackNode=null,l.callbackPriority=0,null;var g=l.callbackNode;if(vm()&&l.callbackNode!==g)return null;var x=Mn;return x=de(l,l===sr?x:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),x===0?null:(oC(l,x,d),SC(l,ie()),l.callbackNode!=null&&l.callbackNode===g?_C.bind(null,l):null)}function CC(l,d){if(vm())return null;oC(l,d,!0)}function pN(){CN(function(){(zn&6)!==0?Ke(k,hN):xC()})}function ow(){return cf===0&&(cf=en()),cf}function TC(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Ci(""+l)}function EC(l,d){var g=d.ownerDocument.createElement("input");return g.name=d.name,g.value=d.value,l.id&&g.setAttribute("form",l.id),d.parentNode.insertBefore(g,d),l=new FormData(l),g.parentNode.removeChild(g),l}function vN(l,d,g,x,T){if(d==="submit"&&g&&g.stateNode===T){var M=TC((T[Sn]||null).action),G=x.submitter;G&&(d=(d=G[Sn]||null)?TC(d.formAction):G.getAttribute("formAction"),d!==null&&(M=d,G=null));var at=new or("action","action",null,x,T);l.push({event:at,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(cf!==0){var At=G?EC(T,G):new FormData(T);kd(g,{pending:!0,data:At,method:T.method,action:M},null,At)}}else typeof M=="function"&&(at.preventDefault(),At=G?EC(T,G):new FormData(T),kd(g,{pending:!0,data:At,method:T.method,action:M},M,At))},currentTarget:T}]})}}for(var aw=0;aw<Ua.length;aw++){var sw=Ua[aw],gN=sw.toLowerCase(),mN=sw[0].toUpperCase()+sw.slice(1);ri(gN,"on"+mN)}ri(_l,"onAnimationEnd"),ri(ad,"onAnimationIteration"),ri(sd,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(Pg,"onTransitionRun"),ri(tp,"onTransitionStart"),ri(Cl,"onTransitionCancel"),ri(Ws,"onTransitionEnd"),pn("onMouseEnter",["mouseout","mouseover"]),pn("onMouseLeave",["mouseout","mouseover"]),pn("onPointerEnter",["pointerout","pointerover"]),pn("onPointerLeave",["pointerout","pointerover"]),Sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kp));function OC(l,d){d=(d&4)!==0;for(var g=0;g<l.length;g++){var x=l[g],T=x.event;x=x.listeners;t:{var M=void 0;if(d)for(var G=x.length-1;0<=G;G--){var at=x[G],At=at.instance,Ht=at.currentTarget;if(at=at.listener,At!==M&&T.isPropagationStopped())break t;M=at,T.currentTarget=Ht;try{M(T)}catch(re){Pd(re)}T.currentTarget=null,M=At}else for(G=0;G<x.length;G++){if(at=x[G],At=at.instance,Ht=at.currentTarget,at=at.listener,At!==M&&T.isPropagationStopped())break t;M=at,T.currentTarget=Ht;try{M(T)}catch(re){Pd(re)}T.currentTarget=null,M=At}}}}function Tn(l,d){var g=d[zi];g===void 0&&(g=d[zi]=new Set);var x=l+"__bubble";g.has(x)||(AC(d,l,2,!1),g.add(x))}function lw(l,d,g){var x=0;d&&(x|=4),AC(g,l,x,d)}var ym="_reactListening"+Math.random().toString(36).slice(2);function uw(l){if(!l[ym]){l[ym]=!0,wr.forEach(function(g){g!=="selectionchange"&&(yN.has(g)||lw(g,!1,l),lw(g,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[ym]||(d[ym]=!0,lw("selectionchange",!1,d))}}function AC(l,d,g,x){switch(ZC(d)){case 2:var T=qN;break;case 8:T=KN;break;default:T=_w}g=T.bind(null,d,g,l),T=void 0,!hs||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(T=!0),x?T!==void 0?l.addEventListener(d,g,{capture:!0,passive:T}):l.addEventListener(d,g,!0):T!==void 0?l.addEventListener(d,g,{passive:T}):l.addEventListener(d,g,!1)}function cw(l,d,g,x,T){var M=x;if((d&1)===0&&(d&2)===0&&x!==null)t:for(;;){if(x===null)return;var G=x.tag;if(G===3||G===4){var at=x.stateNode.containerInfo;if(at===T)break;if(G===4)for(G=x.return;G!==null;){var At=G.tag;if((At===3||At===4)&&G.stateNode.containerInfo===T)return;G=G.return}for(;at!==null;){if(G=rn(at),G===null)return;if(At=G.tag,At===5||At===6||At===26||At===27){x=M=G;continue t}at=at.parentNode}}x=x.return}La(function(){var Ht=M,re=ei(g),ue=[];t:{var Wt=Ei.get(l);if(Wt!==void 0){var $t=or,tn=l;switch(l){case"keypress":if(je(g)===0)break t;case"keydown":case"keyup":$t=ps;break;case"focusin":tn="focus",$t=js;break;case"focusout":tn="blur",$t=js;break;case"beforeblur":case"afterblur":$t=js;break;case"click":if(g.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$t=ja;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$t=Gr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$t=Is;break;case _l:case ad:case sd:$t=Sc;break;case Ws:$t=Bs;break;case"scroll":case"scrollend":$t=qo;break;case"wheel":$t=Us;break;case"copy":case"cut":case"paste":$t=uu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$t=Zf;break;case"toggle":case"beforetoggle":$t=Oc}var Xe=(d&4)!==0,Zn=!Xe&&(l==="scroll"||l==="scrollend"),Vt=Xe?Wt!==null?Wt+"Capture":null:Wt;Xe=[];for(var Rt=Ht,Ft;Rt!==null;){var se=Rt;if(Ft=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||Ft===null||Vt===null||(se=di(Rt,Vt),se!=null&&Xe.push($p(Rt,se,Ft))),Zn)break;Rt=Rt.return}0<Xe.length&&(Wt=new $t(Wt,tn,null,g,re),ue.push({event:Wt,listeners:Xe}))}}if((d&7)===0){t:{if(Wt=l==="mouseover"||l==="pointerover",$t=l==="mouseout"||l==="pointerout",Wt&&g!==vo&&(tn=g.relatedTarget||g.fromElement)&&(rn(tn)||tn[Pn]))break t;if(($t||Wt)&&(Wt=re.window===re?re:(Wt=re.ownerDocument)?Wt.defaultView||Wt.parentWindow:window,$t?(tn=g.relatedTarget||g.toElement,$t=Ht,tn=tn?rn(tn):null,tn!==null&&(Zn=o(tn),Xe=tn.tag,tn!==Zn||Xe!==5&&Xe!==27&&Xe!==6)&&(tn=null)):($t=null,tn=Ht),$t!==tn)){if(Xe=ja,se="onMouseLeave",Vt="onMouseEnter",Rt="mouse",(l==="pointerout"||l==="pointerover")&&(Xe=Zf,se="onPointerLeave",Vt="onPointerEnter",Rt="pointer"),Zn=$t==null?Wt:He($t),Ft=tn==null?Wt:He(tn),Wt=new Xe(se,Rt+"leave",$t,g,re),Wt.target=Zn,Wt.relatedTarget=Ft,se=null,rn(re)===Ht&&(Xe=new Xe(Vt,Rt+"enter",tn,g,re),Xe.target=Ft,Xe.relatedTarget=Zn,se=Xe),Zn=se,$t&&tn)e:{for(Xe=$t,Vt=tn,Rt=0,Ft=Xe;Ft;Ft=Kd(Ft))Rt++;for(Ft=0,se=Vt;se;se=Kd(se))Ft++;for(;0<Rt-Ft;)Xe=Kd(Xe),Rt--;for(;0<Ft-Rt;)Vt=Kd(Vt),Ft--;for(;Rt--;){if(Xe===Vt||Vt!==null&&Xe===Vt.alternate)break e;Xe=Kd(Xe),Vt=Kd(Vt)}Xe=null}else Xe=null;$t!==null&&kC(ue,Wt,$t,Xe,!1),tn!==null&&Zn!==null&&kC(ue,Zn,tn,Xe,!0)}}t:{if(Wt=Ht?He(Ht):window,$t=Wt.nodeName&&Wt.nodeName.toLowerCase(),$t==="select"||$t==="input"&&Wt.type==="file")var Ue=Bt;else if(Yi(Wt))if(jt)Ue=Mg;else{Ue=nd;var xn=gi}else $t=Wt.nodeName,!$t||$t.toLowerCase()!=="input"||Wt.type!=="checkbox"&&Wt.type!=="radio"?Ht&&ur(Ht.elementType)&&(Ue=Bt):Ue=Dc;if(Ue&&(Ue=Ue(l,Ht))){Ba(ue,Ue,g,re);break t}xn&&xn(l,Wt,Ht),l==="focusout"&&Ht&&Wt.type==="number"&&Ht.memoizedProps.value!=null&&pa(Wt,"number",Wt.value)}switch(xn=Ht?He(Ht):window,l){case"focusin":(Yi(xn)||xn.contentEditable==="true")&&(Hs=xn,Lc=Ht,pu=null);break;case"focusout":pu=Lc=Hs=null;break;case"mousedown":id=!0;break;case"contextmenu":case"mouseup":case"dragend":id=!1,od(ue,g,re);break;case"selectionchange":if(Dg)break;case"keydown":case"keyup":od(ue,g,re)}var qe;if(Vs)t:{switch(l){case"compositionstart":var Je="onCompositionStart";break t;case"compositionend":Je="onCompositionEnd";break t;case"compositionupdate":Je="onCompositionUpdate";break t}Je=void 0}else vi?Mc(l,g)&&(Je="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(Je="onCompositionStart");Je&&(kc&&g.locale!=="ko"&&(vi||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&vi&&(qe=Wo()):(Ti=re,so="value"in Ti?Ti.value:Ti.textContent,vi=!0)),xn=bm(Ht,Je),0<xn.length&&(Je=new Cc(Je,l,null,g,re),ue.push({event:Je,listeners:xn}),qe?Je.data=qe:(qe=gs(g),qe!==null&&(Je.data=qe)))),(qe=td?Fs(l,g):xl(l,g))&&(Je=bm(Ht,"onBeforeInput"),0<Je.length&&(xn=new Cc("onBeforeInput","beforeinput",null,g,re),ue.push({event:xn,listeners:Je}),xn.data=qe)),vN(ue,l,Ht,g,re)}OC(ue,d)})}function $p(l,d,g){return{instance:l,listener:d,currentTarget:g}}function bm(l,d){for(var g=d+"Capture",x=[];l!==null;){var T=l,M=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||M===null||(T=di(l,g),T!=null&&x.unshift($p(l,T,M)),T=di(l,d),T!=null&&x.push($p(l,T,M))),l.tag===3)return x;l=l.return}return[]}function Kd(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function kC(l,d,g,x,T){for(var M=d._reactName,G=[];g!==null&&g!==x;){var at=g,At=at.alternate,Ht=at.stateNode;if(at=at.tag,At!==null&&At===x)break;at!==5&&at!==26&&at!==27||Ht===null||(At=Ht,T?(Ht=di(g,M),Ht!=null&&G.unshift($p(g,Ht,At))):T||(Ht=di(g,M),Ht!=null&&G.push($p(g,Ht,At)))),g=g.return}G.length!==0&&l.push({event:d,listeners:G})}var bN=/\r\n?/g,wN=/\u0000|\uFFFD/g;function MC(l){return(typeof l=="string"?l:""+l).replace(bN,`
`).replace(wN,"")}function DC(l,d){return d=MC(d),MC(l)===d}function wm(){}function Jn(l,d,g,x,T,M){switch(g){case"children":typeof x=="string"?d==="body"||d==="textarea"&&x===""||ao(l,x):(typeof x=="number"||typeof x=="bigint")&&d!=="body"&&ao(l,""+x);break;case"className":kn(l,"class",x);break;case"tabIndex":kn(l,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":kn(l,g,x);break;case"style":ds(l,x,M);break;case"data":if(d!=="object"){kn(l,"data",x);break}case"src":case"href":if(x===""&&(d!=="a"||g!=="href")){l.removeAttribute(g);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){l.removeAttribute(g);break}x=Ci(""+x),l.setAttribute(g,x);break;case"action":case"formAction":if(typeof x=="function"){l.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof M=="function"&&(g==="formAction"?(d!=="input"&&Jn(l,d,"name",T.name,T,null),Jn(l,d,"formEncType",T.formEncType,T,null),Jn(l,d,"formMethod",T.formMethod,T,null),Jn(l,d,"formTarget",T.formTarget,T,null)):(Jn(l,d,"encType",T.encType,T,null),Jn(l,d,"method",T.method,T,null),Jn(l,d,"target",T.target,T,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){l.removeAttribute(g);break}x=Ci(""+x),l.setAttribute(g,x);break;case"onClick":x!=null&&(l.onclick=wm);break;case"onScroll":x!=null&&Tn("scroll",l);break;case"onScrollEnd":x!=null&&Tn("scrollend",l);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(e(61));if(g=x.__html,g!=null){if(T.children!=null)throw Error(e(60));l.innerHTML=g}}break;case"multiple":l.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":l.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){l.removeAttribute("xlink:href");break}g=Ci(""+x),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(g,""+x):l.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(g,""):l.removeAttribute(g);break;case"capture":case"download":x===!0?l.setAttribute(g,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(g,x):l.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?l.setAttribute(g,x):l.removeAttribute(g);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?l.removeAttribute(g):l.setAttribute(g,x);break;case"popover":Tn("beforetoggle",l),Tn("toggle",l),ln(l,"popover",x);break;case"xlinkActuate":_r(l,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":_r(l,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":_r(l,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":_r(l,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":_r(l,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":_r(l,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":_r(l,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":_r(l,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":_r(l,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":ln(l,"is",x);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=Ir.get(g)||g,ln(l,g,x))}}function fw(l,d,g,x,T,M){switch(g){case"style":ds(l,x,M);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(e(61));if(g=x.__html,g!=null){if(T.children!=null)throw Error(e(60));l.innerHTML=g}}break;case"children":typeof x=="string"?ao(l,x):(typeof x=="number"||typeof x=="bigint")&&ao(l,""+x);break;case"onScroll":x!=null&&Tn("scroll",l);break;case"onScrollEnd":x!=null&&Tn("scrollend",l);break;case"onClick":x!=null&&(l.onclick=wm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xr.hasOwnProperty(g))t:{if(g[0]==="o"&&g[1]==="n"&&(T=g.endsWith("Capture"),d=g.slice(2,T?g.length-7:void 0),M=l[Sn]||null,M=M!=null?M[g]:null,typeof M=="function"&&l.removeEventListener(d,M,T),typeof x=="function")){typeof M!="function"&&M!==null&&(g in l?l[g]=null:l.hasAttribute(g)&&l.removeAttribute(g)),l.addEventListener(d,x,T);break t}g in l?l[g]=x:x===!0?l.setAttribute(g,""):ln(l,g,x)}}}function eo(l,d,g){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tn("error",l),Tn("load",l);var x=!1,T=!1,M;for(M in g)if(g.hasOwnProperty(M)){var G=g[M];if(G!=null)switch(M){case"src":x=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(e(137,d));default:Jn(l,d,M,G,g,null)}}T&&Jn(l,d,"srcSet",g.srcSet,g,null),x&&Jn(l,d,"src",g.src,g,null);return;case"input":Tn("invalid",l);var at=M=G=T=null,At=null,Ht=null;for(x in g)if(g.hasOwnProperty(x)){var re=g[x];if(re!=null)switch(x){case"name":T=re;break;case"type":G=re;break;case"checked":At=re;break;case"defaultChecked":Ht=re;break;case"value":M=re;break;case"defaultValue":at=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(e(137,d));break;default:Jn(l,d,x,re,g,null)}}Na(l,M,at,At,Ht,G,T,!1),on(l);return;case"select":Tn("invalid",l),x=G=M=null;for(T in g)if(g.hasOwnProperty(T)&&(at=g[T],at!=null))switch(T){case"value":M=at;break;case"defaultValue":G=at;break;case"multiple":x=at;default:Jn(l,d,T,at,g,null)}d=M,g=G,l.multiple=!!x,d!=null?Uo(l,!!x,d,!1):g!=null&&Uo(l,!!x,g,!0);return;case"textarea":Tn("invalid",l),M=T=x=null;for(G in g)if(g.hasOwnProperty(G)&&(at=g[G],at!=null))switch(G){case"value":x=at;break;case"defaultValue":T=at;break;case"children":M=at;break;case"dangerouslySetInnerHTML":if(at!=null)throw Error(e(91));break;default:Jn(l,d,G,at,g,null)}fs(l,x,T,M),on(l);return;case"option":for(At in g)if(g.hasOwnProperty(At)&&(x=g[At],x!=null))switch(At){case"selected":l.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:Jn(l,d,At,x,g,null)}return;case"dialog":Tn("beforetoggle",l),Tn("toggle",l),Tn("cancel",l),Tn("close",l);break;case"iframe":case"object":Tn("load",l);break;case"video":case"audio":for(x=0;x<Kp.length;x++)Tn(Kp[x],l);break;case"image":Tn("error",l),Tn("load",l);break;case"details":Tn("toggle",l);break;case"embed":case"source":case"link":Tn("error",l),Tn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ht in g)if(g.hasOwnProperty(Ht)&&(x=g[Ht],x!=null))switch(Ht){case"children":case"dangerouslySetInnerHTML":throw Error(e(137,d));default:Jn(l,d,Ht,x,g,null)}return;default:if(ur(d)){for(re in g)g.hasOwnProperty(re)&&(x=g[re],x!==void 0&&fw(l,d,re,x,g,void 0));return}}for(at in g)g.hasOwnProperty(at)&&(x=g[at],x!=null&&Jn(l,d,at,x,g,null))}function xN(l,d,g,x){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,M=null,G=null,at=null,At=null,Ht=null,re=null;for($t in g){var ue=g[$t];if(g.hasOwnProperty($t)&&ue!=null)switch($t){case"checked":break;case"value":break;case"defaultValue":At=ue;default:x.hasOwnProperty($t)||Jn(l,d,$t,null,x,ue)}}for(var Wt in x){var $t=x[Wt];if(ue=g[Wt],x.hasOwnProperty(Wt)&&($t!=null||ue!=null))switch(Wt){case"type":M=$t;break;case"name":T=$t;break;case"checked":Ht=$t;break;case"defaultChecked":re=$t;break;case"value":G=$t;break;case"defaultValue":at=$t;break;case"children":case"dangerouslySetInnerHTML":if($t!=null)throw Error(e(137,d));break;default:$t!==ue&&Jn(l,d,Wt,$t,x,ue)}}ha(l,G,at,At,Ht,re,M,T);return;case"select":$t=G=at=Wt=null;for(M in g)if(At=g[M],g.hasOwnProperty(M)&&At!=null)switch(M){case"value":break;case"multiple":$t=At;default:x.hasOwnProperty(M)||Jn(l,d,M,null,x,At)}for(T in x)if(M=x[T],At=g[T],x.hasOwnProperty(T)&&(M!=null||At!=null))switch(T){case"value":Wt=M;break;case"defaultValue":at=M;break;case"multiple":G=M;default:M!==At&&Jn(l,d,T,M,x,At)}d=at,g=G,x=$t,Wt!=null?Uo(l,!!g,Wt,!1):!!x!=!!g&&(d!=null?Uo(l,!!g,d,!0):Uo(l,!!g,g?[]:"",!1));return;case"textarea":$t=Wt=null;for(at in g)if(T=g[at],g.hasOwnProperty(at)&&T!=null&&!x.hasOwnProperty(at))switch(at){case"value":break;case"children":break;default:Jn(l,d,at,null,x,T)}for(G in x)if(T=x[G],M=g[G],x.hasOwnProperty(G)&&(T!=null||M!=null))switch(G){case"value":Wt=T;break;case"defaultValue":$t=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(e(91));break;default:T!==M&&Jn(l,d,G,T,x,M)}cs(l,Wt,$t);return;case"option":for(var tn in g)if(Wt=g[tn],g.hasOwnProperty(tn)&&Wt!=null&&!x.hasOwnProperty(tn))switch(tn){case"selected":l.selected=!1;break;default:Jn(l,d,tn,null,x,Wt)}for(At in x)if(Wt=x[At],$t=g[At],x.hasOwnProperty(At)&&Wt!==$t&&(Wt!=null||$t!=null))switch(At){case"selected":l.selected=Wt&&typeof Wt!="function"&&typeof Wt!="symbol";break;default:Jn(l,d,At,Wt,x,$t)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in g)Wt=g[Xe],g.hasOwnProperty(Xe)&&Wt!=null&&!x.hasOwnProperty(Xe)&&Jn(l,d,Xe,null,x,Wt);for(Ht in x)if(Wt=x[Ht],$t=g[Ht],x.hasOwnProperty(Ht)&&Wt!==$t&&(Wt!=null||$t!=null))switch(Ht){case"children":case"dangerouslySetInnerHTML":if(Wt!=null)throw Error(e(137,d));break;default:Jn(l,d,Ht,Wt,x,$t)}return;default:if(ur(d)){for(var Zn in g)Wt=g[Zn],g.hasOwnProperty(Zn)&&Wt!==void 0&&!x.hasOwnProperty(Zn)&&fw(l,d,Zn,void 0,x,Wt);for(re in x)Wt=x[re],$t=g[re],!x.hasOwnProperty(re)||Wt===$t||Wt===void 0&&$t===void 0||fw(l,d,re,Wt,x,$t);return}}for(var Vt in g)Wt=g[Vt],g.hasOwnProperty(Vt)&&Wt!=null&&!x.hasOwnProperty(Vt)&&Jn(l,d,Vt,null,x,Wt);for(ue in x)Wt=x[ue],$t=g[ue],!x.hasOwnProperty(ue)||Wt===$t||Wt==null&&$t==null||Jn(l,d,ue,Wt,x,$t)}var dw=null,hw=null;function xm(l){return l.nodeType===9?l:l.ownerDocument}function PC(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function NC(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function pw(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var vw=null;function SN(){var l=window.event;return l&&l.type==="popstate"?l===vw?!1:(vw=l,!0):(vw=null,!1)}var RC=typeof setTimeout=="function"?setTimeout:void 0,_N=typeof clearTimeout=="function"?clearTimeout:void 0,LC=typeof Promise=="function"?Promise:void 0,CN=typeof queueMicrotask=="function"?queueMicrotask:typeof LC<"u"?function(l){return LC.resolve(null).then(l).catch(TN)}:RC;function TN(l){setTimeout(function(){throw l})}function Hu(l){return l==="head"}function jC(l,d){var g=d,x=0,T=0;do{var M=g.nextSibling;if(l.removeChild(g),M&&M.nodeType===8)if(g=M.data,g==="/$"){if(0<x&&8>x){g=x;var G=l.ownerDocument;if(g&1&&Gp(G.documentElement),g&2&&Gp(G.body),g&4)for(g=G.head,Gp(g),G=g.firstChild;G;){var at=G.nextSibling,At=G.nodeName;G[gn]||At==="SCRIPT"||At==="STYLE"||At==="LINK"&&G.rel.toLowerCase()==="stylesheet"||g.removeChild(G),G=at}}if(T===0){l.removeChild(M),nv(d);return}T--}else g==="$"||g==="$?"||g==="$!"?T++:x=g.charCodeAt(0)-48;else x=0;g=M}while(g);nv(d)}function gw(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var g=d;switch(d=d.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":gw(g),ir(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}l.removeChild(g)}}function EN(l,d,g,x){for(;l.nodeType===1;){var T=g;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!x&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(x){if(!l[gn])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(M=l.getAttribute("rel"),M==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(M!==T.rel||l.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||l.getAttribute("title")!==(T.title==null?null:T.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(M=l.getAttribute("src"),(M!==(T.src==null?null:T.src)||l.getAttribute("type")!==(T.type==null?null:T.type)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&M&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var M=T.name==null?null:""+T.name;if(T.type==="hidden"&&l.getAttribute("name")===M)return l}else return l;if(l=_s(l.nextSibling),l===null)break}return null}function ON(l,d,g){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!g||(l=_s(l.nextSibling),l===null))return null;return l}function mw(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function AN(l,d){var g=l.ownerDocument;if(l.data!=="$?"||g.readyState==="complete")d();else{var x=function(){d(),g.removeEventListener("DOMContentLoaded",x)};g.addEventListener("DOMContentLoaded",x),l._reactRetry=x}}function _s(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return l}var yw=null;function IC(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"){if(d===0)return l;d--}else g==="/$"&&d++}l=l.previousSibling}return null}function BC(l,d,g){switch(d=xm(g),l){case"html":if(l=d.documentElement,!l)throw Error(e(452));return l;case"head":if(l=d.head,!l)throw Error(e(453));return l;case"body":if(l=d.body,!l)throw Error(e(454));return l;default:throw Error(e(451))}}function Gp(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);ir(l)}var Ga=new Map,UC=new Set;function Sm(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Hl=_t.d;_t.d={f:kN,r:MN,D:DN,C:PN,L:NN,m:RN,X:jN,S:LN,M:IN};function kN(){var l=Hl.f(),d=hm();return l||d}function MN(l){var d=br(l);d!==null&&d.tag===5&&d.type==="form"?Ap(d):Hl.r(l)}var $d=typeof document>"u"?null:document;function VC(l,d,g){var x=$d;if(x&&typeof d=="string"&&d){var T=$r(d);T='link[rel="'+l+'"][href="'+T+'"]',typeof g=="string"&&(T+='[crossorigin="'+g+'"]'),UC.has(T)||(UC.add(T),l={rel:l,crossOrigin:g,href:d},x.querySelector(T)===null&&(d=x.createElement("link"),eo(d,"link",l),An(d),x.head.appendChild(d)))}}function DN(l){Hl.D(l),VC("dns-prefetch",l,null)}function PN(l,d){Hl.C(l,d),VC("preconnect",l,d)}function NN(l,d,g){Hl.L(l,d,g);var x=$d;if(x&&l&&d){var T='link[rel="preload"][as="'+$r(d)+'"]';d==="image"&&g&&g.imageSrcSet?(T+='[imagesrcset="'+$r(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(T+='[imagesizes="'+$r(g.imageSizes)+'"]')):T+='[href="'+$r(l)+'"]';var M=T;switch(d){case"style":M=Gd(l);break;case"script":M=Yd(l)}Ga.has(M)||(l=h({rel:"preload",href:d==="image"&&g&&g.imageSrcSet?void 0:l,as:d},g),Ga.set(M,l),x.querySelector(T)!==null||d==="style"&&x.querySelector(Yp(M))||d==="script"&&x.querySelector(Xp(M))||(d=x.createElement("link"),eo(d,"link",l),An(d),x.head.appendChild(d)))}}function RN(l,d){Hl.m(l,d);var g=$d;if(g&&l){var x=d&&typeof d.as=="string"?d.as:"script",T='link[rel="modulepreload"][as="'+$r(x)+'"][href="'+$r(l)+'"]',M=T;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":M=Yd(l)}if(!Ga.has(M)&&(l=h({rel:"modulepreload",href:l},d),Ga.set(M,l),g.querySelector(T)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Xp(M)))return}x=g.createElement("link"),eo(x,"link",l),An(x),g.head.appendChild(x)}}}function LN(l,d,g){Hl.S(l,d,g);var x=$d;if(x&&l){var T=qr(x).hoistableStyles,M=Gd(l);d=d||"default";var G=T.get(M);if(!G){var at={loading:0,preload:null};if(G=x.querySelector(Yp(M)))at.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":d},g),(g=Ga.get(M))&&bw(l,g);var At=G=x.createElement("link");An(At),eo(At,"link",l),At._p=new Promise(function(Ht,re){At.onload=Ht,At.onerror=re}),At.addEventListener("load",function(){at.loading|=1}),At.addEventListener("error",function(){at.loading|=2}),at.loading|=4,_m(G,d,x)}G={type:"stylesheet",instance:G,count:1,state:at},T.set(M,G)}}}function jN(l,d){Hl.X(l,d);var g=$d;if(g&&l){var x=qr(g).hoistableScripts,T=Yd(l),M=x.get(T);M||(M=g.querySelector(Xp(T)),M||(l=h({src:l,async:!0},d),(d=Ga.get(T))&&ww(l,d),M=g.createElement("script"),An(M),eo(M,"link",l),g.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},x.set(T,M))}}function IN(l,d){Hl.M(l,d);var g=$d;if(g&&l){var x=qr(g).hoistableScripts,T=Yd(l),M=x.get(T);M||(M=g.querySelector(Xp(T)),M||(l=h({src:l,async:!0,type:"module"},d),(d=Ga.get(T))&&ww(l,d),M=g.createElement("script"),An(M),eo(M,"link",l),g.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},x.set(T,M))}}function FC(l,d,g,x){var T=(T=Xt.current)?Sm(T):null;if(!T)throw Error(e(446));switch(l){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(d=Gd(g.href),g=qr(T).hoistableStyles,x=g.get(d),x||(x={type:"style",instance:null,count:0,state:null},g.set(d,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){l=Gd(g.href);var M=qr(T).hoistableStyles,G=M.get(l);if(G||(T=T.ownerDocument||T,G={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},M.set(l,G),(M=T.querySelector(Yp(l)))&&!M._p&&(G.instance=M,G.state.loading=5),Ga.has(l)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Ga.set(l,g),M||BN(T,l,g,G.state))),d&&x===null)throw Error(e(528,""));return G}if(d&&x!==null)throw Error(e(529,""));return null;case"script":return d=g.async,g=g.src,typeof g=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Yd(g),g=qr(T).hoistableScripts,x=g.get(d),x||(x={type:"script",instance:null,count:0,state:null},g.set(d,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(e(444,l))}}function Gd(l){return'href="'+$r(l)+'"'}function Yp(l){return'link[rel="stylesheet"]['+l+"]"}function HC(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function BN(l,d,g,x){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?x.loading=1:(d=l.createElement("link"),x.preload=d,d.addEventListener("load",function(){return x.loading|=1}),d.addEventListener("error",function(){return x.loading|=2}),eo(d,"link",g),An(d),l.head.appendChild(d))}function Yd(l){return'[src="'+$r(l)+'"]'}function Xp(l){return"script[async]"+l}function zC(l,d,g){if(d.count++,d.instance===null)switch(d.type){case"style":var x=l.querySelector('style[data-href~="'+$r(g.href)+'"]');if(x)return d.instance=x,An(x),x;var T=h({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return x=(l.ownerDocument||l).createElement("style"),An(x),eo(x,"style",T),_m(x,g.precedence,l),d.instance=x;case"stylesheet":T=Gd(g.href);var M=l.querySelector(Yp(T));if(M)return d.state.loading|=4,d.instance=M,An(M),M;x=HC(g),(T=Ga.get(T))&&bw(x,T),M=(l.ownerDocument||l).createElement("link"),An(M);var G=M;return G._p=new Promise(function(at,At){G.onload=at,G.onerror=At}),eo(M,"link",x),d.state.loading|=4,_m(M,g.precedence,l),d.instance=M;case"script":return M=Yd(g.src),(T=l.querySelector(Xp(M)))?(d.instance=T,An(T),T):(x=g,(T=Ga.get(M))&&(x=h({},g),ww(x,T)),l=l.ownerDocument||l,T=l.createElement("script"),An(T),eo(T,"link",x),l.head.appendChild(T),d.instance=T);case"void":return null;default:throw Error(e(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(x=d.instance,d.state.loading|=4,_m(x,g.precedence,l));return d.instance}function _m(l,d,g){for(var x=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=x.length?x[x.length-1]:null,M=T,G=0;G<x.length;G++){var at=x[G];if(at.dataset.precedence===d)M=at;else if(M!==T)break}M?M.parentNode.insertBefore(l,M.nextSibling):(d=g.nodeType===9?g.head:g,d.insertBefore(l,d.firstChild))}function bw(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function ww(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var Cm=null;function WC(l,d,g){if(Cm===null){var x=new Map,T=Cm=new Map;T.set(g,x)}else T=Cm,x=T.get(g),x||(x=new Map,T.set(g,x));if(x.has(l))return x;for(x.set(l,null),g=g.getElementsByTagName(l),T=0;T<g.length;T++){var M=g[T];if(!(M[gn]||M[cn]||l==="link"&&M.getAttribute("rel")==="stylesheet")&&M.namespaceURI!=="http://www.w3.org/2000/svg"){var G=M.getAttribute(d)||"";G=l+G;var at=x.get(G);at?at.push(M):x.set(G,[M])}}return x}function qC(l,d,g){l=l.ownerDocument||l,l.head.insertBefore(g,d==="title"?l.querySelector("head > title"):null)}function UN(l,d,g){if(g===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function KC(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Jp=null;function VN(){}function FN(l,d,g){if(Jp===null)throw Error(e(475));var x=Jp;if(d.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var T=Gd(g.href),M=l.querySelector(Yp(T));if(M){l=M._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(x.count++,x=Tm.bind(x),l.then(x,x)),d.state.loading|=4,d.instance=M,An(M);return}M=l.ownerDocument||l,g=HC(g),(T=Ga.get(T))&&bw(g,T),M=M.createElement("link"),An(M);var G=M;G._p=new Promise(function(at,At){G.onload=at,G.onerror=At}),eo(M,"link",g),d.instance=M}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(x.count++,d=Tm.bind(x),l.addEventListener("load",d),l.addEventListener("error",d))}}function HN(){if(Jp===null)throw Error(e(475));var l=Jp;return l.stylesheets&&l.count===0&&xw(l,l.stylesheets),0<l.count?function(d){var g=setTimeout(function(){if(l.stylesheets&&xw(l,l.stylesheets),l.unsuspend){var x=l.unsuspend;l.unsuspend=null,x()}},6e4);return l.unsuspend=d,function(){l.unsuspend=null,clearTimeout(g)}}:null}function Tm(){if(this.count--,this.count===0){if(this.stylesheets)xw(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Em=null;function xw(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Em=new Map,d.forEach(zN,l),Em=null,Tm.call(l))}function zN(l,d){if(!(d.state.loading&4)){var g=Em.get(l);if(g)var x=g.get(null);else{g=new Map,Em.set(l,g);for(var T=l.querySelectorAll("link[data-precedence],style[data-precedence]"),M=0;M<T.length;M++){var G=T[M];(G.nodeName==="LINK"||G.getAttribute("media")!=="not all")&&(g.set(G.dataset.precedence,G),x=G)}x&&g.set(null,x)}T=d.instance,G=T.getAttribute("data-precedence"),M=g.get(G)||x,M===x&&g.set(null,T),g.set(G,T),this.count++,x=Tm.bind(this),T.addEventListener("load",x),T.addEventListener("error",x),M?M.parentNode.insertBefore(T,M.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(T,l.firstChild)),d.state.loading|=4}}var Zp={$$typeof:V,Provider:null,Consumer:null,_currentValue:Ot,_currentValue2:Ot,_threadCount:0};function WN(l,d,g,x,T,M,G,at){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sn(0),this.hiddenUpdates=sn(null),this.identifierPrefix=x,this.onUncaughtError=T,this.onCaughtError=M,this.onRecoverableError=G,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=at,this.incompleteTransitions=new Map}function $C(l,d,g,x,T,M,G,at,At,Ht,re,ue){return l=new WN(l,d,g,G,at,At,Ht,ue),d=1,M===!0&&(d|=24),M=Oi(3,null,null,d),l.current=M,M.stateNode=l,d=vd(),d.refCount++,l.pooledCache=d,d.refCount++,M.memoizedState={element:x,isDehydrated:g,cache:d},Su(M),l}function GC(l){return l?(l=Ks,l):Ks}function YC(l,d,g,x,T,M){T=GC(T),x.context===null?x.context=T:x.pendingContext=T,x=ys(d),x.payload={element:g},M=M===void 0?null:M,M!==null&&(x.callback=M),g=Zs(l,x,d),g!==null&&(Ca(g,l,d),_u(g,l,d))}function XC(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<d?g:d}}function Sw(l,d){XC(l,d),(l=l.alternate)&&XC(l,d)}function JC(l){if(l.tag===13){var d=qs(l,67108864);d!==null&&Ca(d,l,67108864),Sw(l,67108864)}}var Om=!0;function qN(l,d,g,x){var T=U.T;U.T=null;var M=_t.p;try{_t.p=2,_w(l,d,g,x)}finally{_t.p=M,U.T=T}}function KN(l,d,g,x){var T=U.T;U.T=null;var M=_t.p;try{_t.p=8,_w(l,d,g,x)}finally{_t.p=M,U.T=T}}function _w(l,d,g,x){if(Om){var T=Cw(x);if(T===null)cw(l,d,x,Am,g),QC(l,x);else if(GN(T,l,d,g,x))x.stopPropagation();else if(QC(l,x),d&4&&-1<$N.indexOf(l)){for(;T!==null;){var M=br(T);if(M!==null)switch(M.tag){case 3:if(M=M.stateNode,M.current.memoizedState.isDehydrated){var G=fe(M.pendingLanes);if(G!==0){var at=M;for(at.pendingLanes|=2,at.entangledLanes|=2;G;){var At=1<<31-A(G);at.entanglements[1]|=At,G&=~At}fl(M),(zn&6)===0&&(fm=ie()+500,qp(0))}}break;case 13:at=qs(M,2),at!==null&&Ca(at,M,2),hm(),Sw(M,2)}if(M=Cw(x),M===null&&cw(l,d,x,Am,g),M===T)break;T=M}T!==null&&x.stopPropagation()}else cw(l,d,x,null,g)}}function Cw(l){return l=ei(l),Tw(l)}var Am=null;function Tw(l){if(Am=null,l=rn(l),l!==null){var d=o(l);if(d===null)l=null;else{var g=d.tag;if(g===13){if(l=a(d),l!==null)return l;l=null}else if(g===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return Am=l,null}function ZC(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(P()){case k:return 2;case N:return 8;case q:case ut:return 32;case Q:return 268435456;default:return 32}default:return 32}}var Ew=!1,zu=null,Wu=null,qu=null,Qp=new Map,tv=new Map,Ku=[],$N="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function QC(l,d){switch(l){case"focusin":case"focusout":zu=null;break;case"dragenter":case"dragleave":Wu=null;break;case"mouseover":case"mouseout":qu=null;break;case"pointerover":case"pointerout":Qp.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":tv.delete(d.pointerId)}}function ev(l,d,g,x,T,M){return l===null||l.nativeEvent!==M?(l={blockedOn:d,domEventName:g,eventSystemFlags:x,nativeEvent:M,targetContainers:[T]},d!==null&&(d=br(d),d!==null&&JC(d)),l):(l.eventSystemFlags|=x,d=l.targetContainers,T!==null&&d.indexOf(T)===-1&&d.push(T),l)}function GN(l,d,g,x,T){switch(d){case"focusin":return zu=ev(zu,l,d,g,x,T),!0;case"dragenter":return Wu=ev(Wu,l,d,g,x,T),!0;case"mouseover":return qu=ev(qu,l,d,g,x,T),!0;case"pointerover":var M=T.pointerId;return Qp.set(M,ev(Qp.get(M)||null,l,d,g,x,T)),!0;case"gotpointercapture":return M=T.pointerId,tv.set(M,ev(tv.get(M)||null,l,d,g,x,T)),!0}return!1}function tT(l){var d=rn(l.target);if(d!==null){var g=o(d);if(g!==null){if(d=g.tag,d===13){if(d=a(g),d!==null){l.blockedOn=d,Fe(l.priority,function(){if(g.tag===13){var x=_a();x=Lt(x);var T=qs(g,x);T!==null&&Ca(T,g,x),Sw(g,x)}});return}}else if(d===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function km(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var g=Cw(l.nativeEvent);if(g===null){g=l.nativeEvent;var x=new g.constructor(g.type,g);vo=x,g.target.dispatchEvent(x),vo=null}else return d=br(g),d!==null&&JC(d),l.blockedOn=g,!1;d.shift()}return!0}function eT(l,d,g){km(l)&&g.delete(d)}function YN(){Ew=!1,zu!==null&&km(zu)&&(zu=null),Wu!==null&&km(Wu)&&(Wu=null),qu!==null&&km(qu)&&(qu=null),Qp.forEach(eT),tv.forEach(eT)}function Mm(l,d){l.blockedOn===d&&(l.blockedOn=null,Ew||(Ew=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,YN)))}var Dm=null;function nT(l){Dm!==l&&(Dm=l,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Dm===l&&(Dm=null);for(var d=0;d<l.length;d+=3){var g=l[d],x=l[d+1],T=l[d+2];if(typeof x!="function"){if(Tw(x||g)===null)continue;break}var M=br(g);M!==null&&(l.splice(d,3),d-=3,kd(M,{pending:!0,data:T,method:g.method,action:x},x,T))}}))}function nv(l){function d(At){return Mm(At,l)}zu!==null&&Mm(zu,l),Wu!==null&&Mm(Wu,l),qu!==null&&Mm(qu,l),Qp.forEach(d),tv.forEach(d);for(var g=0;g<Ku.length;g++){var x=Ku[g];x.blockedOn===l&&(x.blockedOn=null)}for(;0<Ku.length&&(g=Ku[0],g.blockedOn===null);)tT(g),g.blockedOn===null&&Ku.shift();if(g=(l.ownerDocument||l).$$reactFormReplay,g!=null)for(x=0;x<g.length;x+=3){var T=g[x],M=g[x+1],G=T[Sn]||null;if(typeof M=="function")G||nT(g);else if(G){var at=null;if(M&&M.hasAttribute("formAction")){if(T=M,G=M[Sn]||null)at=G.formAction;else if(Tw(T)!==null)continue}else at=G.action;typeof at=="function"?g[x+1]=at:(g.splice(x,3),x-=3),nT(g)}}}function Ow(l){this._internalRoot=l}Pm.prototype.render=Ow.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(e(409));var g=d.current,x=_a();YC(g,x,l,d,null,null)},Pm.prototype.unmount=Ow.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;YC(l.current,2,null,l,null,null),hm(),d[Pn]=null}};function Pm(l){this._internalRoot=l}Pm.prototype.unstable_scheduleHydration=function(l){if(l){var d=we();l={blockedOn:null,target:l,priority:d};for(var g=0;g<Ku.length&&d!==0&&d<Ku[g].priority;g++);Ku.splice(g,0,l),g===0&&tT(l)}};var rT=n.version;if(rT!=="19.1.0")throw Error(e(527,rT,"19.1.0"));_t.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(e(188)):(l=Object.keys(l).join(","),Error(e(268,l)));return l=u(d),l=l!==null?c(l):null,l=l===null?null:l.stateNode,l};var XN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nm.isDisabled&&Nm.supportsFiber)try{he=Nm.inject(XN),X=Nm}catch{}}return iv.createRoot=function(l,d){if(!r(l))throw Error(e(299));var g=!1,x="",T=Nd,M=Pu,G=Qo,at=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(x=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(M=d.onCaughtError),d.onRecoverableError!==void 0&&(G=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(at=d.unstable_transitionCallbacks)),d=$C(l,1,!1,null,null,g,x,T,M,G,at,null),l[Pn]=d.current,uw(l),new Ow(d)},iv.hydrateRoot=function(l,d,g){if(!r(l))throw Error(e(299));var x=!1,T="",M=Nd,G=Pu,at=Qo,At=null,Ht=null;return g!=null&&(g.unstable_strictMode===!0&&(x=!0),g.identifierPrefix!==void 0&&(T=g.identifierPrefix),g.onUncaughtError!==void 0&&(M=g.onUncaughtError),g.onCaughtError!==void 0&&(G=g.onCaughtError),g.onRecoverableError!==void 0&&(at=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(At=g.unstable_transitionCallbacks),g.formState!==void 0&&(Ht=g.formState)),d=$C(l,1,!0,d,g??null,x,T,M,G,at,At,Ht),d.context=GC(null),g=d.current,x=_a(),x=Lt(x),T=ys(x),T.callback=null,Zs(g,T,x),g=x,d.current.lanes=g,Un(d,g),fl(d),l[Pn]=d.current,uw(l),new Pm(d)},iv.version="19.1.0",iv}var vT;function sR(){if(vT)return Dw.exports;vT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Dw.exports=aR(),Dw.exports}var lR=sR();const uR=Wh(lR);var ov={},gT;function cR(){if(gT)return ov;gT=1,Object.defineProperty(ov,"__esModule",{value:!0}),ov.parse=a,ov.serialize=c;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,e=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,o=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function a(m,y){const _=new o,C=m.length;if(C<2)return _;const E=(y==null?void 0:y.decode)||h;let D=0;do{const F=m.indexOf("=",D);if(F===-1)break;const V=m.indexOf(";",D),K=V===-1?C:V;if(F>K){D=m.lastIndexOf(";",F-1)+1;continue}const Z=s(m,D,F),ct=u(m,F,Z),ht=m.slice(Z,ct);if(_[ht]===void 0){let st=s(m,F+1,K),et=u(m,K,st);const nt=E(m.slice(st,et));_[ht]=nt}D=K+1}while(D<C);return _}function s(m,y,_){do{const C=m.charCodeAt(y);if(C!==32&&C!==9)return y}while(++y<_);return _}function u(m,y,_){for(;y>_;){const C=m.charCodeAt(--y);if(C!==32&&C!==9)return y+1}return _}function c(m,y,_){const C=(_==null?void 0:_.encode)||encodeURIComponent;if(!i.test(m))throw new TypeError(`argument name is invalid: ${m}`);const E=C(y);if(!n.test(E))throw new TypeError(`argument val is invalid: ${y}`);let D=m+"="+E;if(!_)return D;if(_.maxAge!==void 0){if(!Number.isInteger(_.maxAge))throw new TypeError(`option maxAge is invalid: ${_.maxAge}`);D+="; Max-Age="+_.maxAge}if(_.domain){if(!t.test(_.domain))throw new TypeError(`option domain is invalid: ${_.domain}`);D+="; Domain="+_.domain}if(_.path){if(!e.test(_.path))throw new TypeError(`option path is invalid: ${_.path}`);D+="; Path="+_.path}if(_.expires){if(!v(_.expires)||!Number.isFinite(_.expires.valueOf()))throw new TypeError(`option expires is invalid: ${_.expires}`);D+="; Expires="+_.expires.toUTCString()}if(_.httpOnly&&(D+="; HttpOnly"),_.secure&&(D+="; Secure"),_.partitioned&&(D+="; Partitioned"),_.priority)switch(typeof _.priority=="string"?_.priority.toLowerCase():void 0){case"low":D+="; Priority=Low";break;case"medium":D+="; Priority=Medium";break;case"high":D+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${_.priority}`)}if(_.sameSite)switch(typeof _.sameSite=="string"?_.sameSite.toLowerCase():_.sameSite){case!0:case"strict":D+="; SameSite=Strict";break;case"lax":D+="; SameSite=Lax";break;case"none":D+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${_.sameSite}`)}return D}function h(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function v(m){return r.call(m)==="[object Date]"}return ov}cR();var mT="popstate";function fR(i={}){function n(e,r){let{pathname:o,search:a,hash:s}=e.location;return uS("",{pathname:o,search:a,hash:s},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(e,r){return typeof r=="string"?r:Qv(r)}return hR(n,t,null,i)}function Er(i,n){if(i===!1||i===null||typeof i>"u")throw new Error(n)}function Ms(i,n){if(!i){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function dR(){return Math.random().toString(36).substring(2,10)}function yT(i,n){return{usr:i.state,key:i.key,idx:n}}function uS(i,n,t=null,e){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof n=="string"?qh(n):n,state:t,key:n&&n.key||e||dR()}}function Qv({pathname:i="/",search:n="",hash:t=""}){return n&&n!=="?"&&(i+=n.charAt(0)==="?"?n:"?"+n),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function qh(i){let n={};if(i){let t=i.indexOf("#");t>=0&&(n.hash=i.substring(t),i=i.substring(0,t));let e=i.indexOf("?");e>=0&&(n.search=i.substring(e),i=i.substring(0,e)),i&&(n.pathname=i)}return n}function hR(i,n,t,e={}){let{window:r=document.defaultView,v5Compat:o=!1}=e,a=r.history,s="POP",u=null,c=h();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function h(){return(a.state||{idx:null}).idx}function v(){s="POP";let E=h(),D=E==null?null:E-c;c=E,u&&u({action:s,location:C.location,delta:D})}function m(E,D){s="PUSH";let F=uS(C.location,E,D);c=h()+1;let V=yT(F,c),K=C.createHref(F);try{a.pushState(V,"",K)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;r.location.assign(K)}o&&u&&u({action:s,location:C.location,delta:1})}function y(E,D){s="REPLACE";let F=uS(C.location,E,D);c=h();let V=yT(F,c),K=C.createHref(F);a.replaceState(V,"",K),o&&u&&u({action:s,location:C.location,delta:0})}function _(E){let D=r.location.origin!=="null"?r.location.origin:r.location.href,F=typeof E=="string"?E:Qv(E);return F=F.replace(/ $/,"%20"),Er(D,`No window.location.(origin|href) available to create URL for href: ${F}`),new URL(F,D)}let C={get action(){return s},get location(){return i(r,a)},listen(E){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(mT,v),u=E,()=>{r.removeEventListener(mT,v),u=null}},createHref(E){return n(r,E)},createURL:_,encodeLocation(E){let D=_(E);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:m,replace:y,go(E){return a.go(E)}};return C}function uk(i,n,t="/"){return pR(i,n,t,!1)}function pR(i,n,t,e){let r=typeof n=="string"?qh(n):n,o=iu(r.pathname||"/",t);if(o==null)return null;let a=ck(i);vR(a);let s=null;for(let u=0;s==null&&u<a.length;++u){let c=ER(o);s=CR(a[u],c,e)}return s}function ck(i,n=[],t=[],e=""){let r=(o,a,s)=>{let u={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(Er(u.relativePath.startsWith(e),`Absolute route path "${u.relativePath}" nested under path "${e}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(e.length));let c=Ql([e,u.relativePath]),h=t.concat(u);o.children&&o.children.length>0&&(Er(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),ck(o.children,n,h,c)),!(o.path==null&&!o.index)&&n.push({path:c,score:SR(c,o.index),routesMeta:h})};return i.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))r(o,a);else for(let u of fk(o.path))r(o,a,u)}),n}function fk(i){let n=i.split("/");if(n.length===0)return[];let[t,...e]=n,r=t.endsWith("?"),o=t.replace(/\?$/,"");if(e.length===0)return r?[o,""]:[o];let a=fk(e.join("/")),s=[];return s.push(...a.map(u=>u===""?o:[o,u].join("/"))),r&&s.push(...a),s.map(u=>i.startsWith("/")&&u===""?"/":u)}function vR(i){i.sort((n,t)=>n.score!==t.score?t.score-n.score:_R(n.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}var gR=/^:[\w-]+$/,mR=3,yR=2,bR=1,wR=10,xR=-2,bT=i=>i==="*";function SR(i,n){let t=i.split("/"),e=t.length;return t.some(bT)&&(e+=xR),n&&(e+=yR),t.filter(r=>!bT(r)).reduce((r,o)=>r+(gR.test(o)?mR:o===""?bR:wR),e)}function _R(i,n){return i.length===n.length&&i.slice(0,-1).every((e,r)=>e===n[r])?i[i.length-1]-n[n.length-1]:0}function CR(i,n,t=!1){let{routesMeta:e}=i,r={},o="/",a=[];for(let s=0;s<e.length;++s){let u=e[s],c=s===e.length-1,h=o==="/"?n:n.slice(o.length)||"/",v=wy({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),m=u.route;if(!v&&c&&t&&!e[e.length-1].route.index&&(v=wy({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!v)return null;Object.assign(r,v.params),a.push({params:r,pathname:Ql([o,v.pathname]),pathnameBase:MR(Ql([o,v.pathnameBase])),route:m}),v.pathnameBase!=="/"&&(o=Ql([o,v.pathnameBase]))}return a}function wy(i,n){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,e]=TR(i.path,i.caseSensitive,i.end),r=n.match(t);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),s=r.slice(1);return{params:e.reduce((c,{paramName:h,isOptional:v},m)=>{if(h==="*"){let _=s[m]||"";a=o.slice(0,o.length-_.length).replace(/(.)\/+$/,"$1")}const y=s[m];return v&&!y?c[h]=void 0:c[h]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:i}}function TR(i,n=!1,t=!0){Ms(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let e=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,u)=>(e.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(e.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,n?void 0:"i"),e]}function ER(i){try{return i.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Ms(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),i}}function iu(i,n){if(n==="/")return i;if(!i.toLowerCase().startsWith(n.toLowerCase()))return null;let t=n.endsWith("/")?n.length-1:n.length,e=i.charAt(t);return e&&e!=="/"?null:i.slice(t)||"/"}function OR(i,n="/"){let{pathname:t,search:e="",hash:r=""}=typeof i=="string"?qh(i):i;return{pathname:t?t.startsWith("/")?t:AR(t,n):n,search:DR(e),hash:PR(r)}}function AR(i,n){let t=n.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Lw(i,n,t,e){return`Cannot include a '${i}' character in a manually specified \`to.${n}\` field [${JSON.stringify(e)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kR(i){return i.filter((n,t)=>t===0||n.route.path&&n.route.path.length>0)}function U_(i){let n=kR(i);return n.map((t,e)=>e===n.length-1?t.pathname:t.pathnameBase)}function V_(i,n,t,e=!1){let r;typeof i=="string"?r=qh(i):(r={...i},Er(!r.pathname||!r.pathname.includes("?"),Lw("?","pathname","search",r)),Er(!r.pathname||!r.pathname.includes("#"),Lw("#","pathname","hash",r)),Er(!r.search||!r.search.includes("#"),Lw("#","search","hash",r)));let o=i===""||r.pathname==="",a=o?"/":r.pathname,s;if(a==null)s=t;else{let v=n.length-1;if(!e&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),v-=1;r.pathname=m.join("/")}s=v>=0?n[v]:"/"}let u=OR(r,s),c=a&&a!=="/"&&a.endsWith("/"),h=(o||a===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}var Ql=i=>i.join("/").replace(/\/\/+/g,"/"),MR=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),DR=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,PR=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function NR(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var dk=["POST","PUT","PATCH","DELETE"];new Set(dk);var RR=["GET",...dk];new Set(RR);var Kh=Nt.createContext(null);Kh.displayName="DataRouter";var yb=Nt.createContext(null);yb.displayName="DataRouterState";var hk=Nt.createContext({isTransitioning:!1});hk.displayName="ViewTransition";var LR=Nt.createContext(new Map);LR.displayName="Fetchers";var jR=Nt.createContext(null);jR.displayName="Await";var Ps=Nt.createContext(null);Ps.displayName="Navigation";var xg=Nt.createContext(null);xg.displayName="Location";var Ns=Nt.createContext({outlet:null,matches:[],isDataRoute:!1});Ns.displayName="Route";var F_=Nt.createContext(null);F_.displayName="RouteError";function IR(i,{relative:n}={}){Er($h(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:e}=Nt.useContext(Ps),{hash:r,pathname:o,search:a}=Sg(i,{relative:n}),s=o;return t!=="/"&&(s=o==="/"?t:Ql([t,o])),e.createHref({pathname:s,search:a,hash:r})}function $h(){return Nt.useContext(xg)!=null}function us(){return Er($h(),"useLocation() may be used only in the context of a <Router> component."),Nt.useContext(xg).location}var pk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vk(i){Nt.useContext(Ps).static||Nt.useLayoutEffect(i)}function Rs(){let{isDataRoute:i}=Nt.useContext(Ns);return i?XR():BR()}function BR(){Er($h(),"useNavigate() may be used only in the context of a <Router> component.");let i=Nt.useContext(Kh),{basename:n,navigator:t}=Nt.useContext(Ps),{matches:e}=Nt.useContext(Ns),{pathname:r}=us(),o=JSON.stringify(U_(e)),a=Nt.useRef(!1);return vk(()=>{a.current=!0}),Nt.useCallback((u,c={})=>{if(Ms(a.current,pk),!a.current)return;if(typeof u=="number"){t.go(u);return}let h=V_(u,JSON.parse(o),r,c.relative==="path");i==null&&n!=="/"&&(h.pathname=h.pathname==="/"?n:Ql([n,h.pathname])),(c.replace?t.replace:t.push)(h,c.state,c)},[n,t,o,r,i])}Nt.createContext(null);function gk(){let{matches:i}=Nt.useContext(Ns),n=i[i.length-1];return n?n.params:{}}function Sg(i,{relative:n}={}){let{matches:t}=Nt.useContext(Ns),{pathname:e}=us(),r=JSON.stringify(U_(t));return Nt.useMemo(()=>V_(i,JSON.parse(r),e,n==="path"),[i,r,e,n])}function UR(i,n){return mk(i,n)}function mk(i,n,t,e){var F;Er($h(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r,static:o}=Nt.useContext(Ps),{matches:a}=Nt.useContext(Ns),s=a[a.length-1],u=s?s.params:{},c=s?s.pathname:"/",h=s?s.pathnameBase:"/",v=s&&s.route;{let V=v&&v.path||"";yk(c,!v||V.endsWith("*")||V.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${V}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${V}"> to <Route path="${V==="/"?"*":`${V}/*`}">.`)}let m=us(),y;if(n){let V=typeof n=="string"?qh(n):n;Er(h==="/"||((F=V.pathname)==null?void 0:F.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${V.pathname}" was given in the \`location\` prop.`),y=V}else y=m;let _=y.pathname||"/",C=_;if(h!=="/"){let V=h.replace(/^\//,"").split("/");C="/"+_.replace(/^\//,"").split("/").slice(V.length).join("/")}let E=!o&&t&&t.matches&&t.matches.length>0?t.matches:uk(i,{pathname:C});Ms(v||E!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Ms(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=WR(E&&E.map(V=>Object.assign({},V,{params:Object.assign({},u,V.params),pathname:Ql([h,r.encodeLocation?r.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?h:Ql([h,r.encodeLocation?r.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),a,t,e);return n&&D?Nt.createElement(xg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},D):D}function VR(){let i=YR(),n=NR(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,e="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:e},o={padding:"2px 4px",backgroundColor:e},a=null;return console.error("Error handled by React Router default ErrorBoundary:",i),a=Nt.createElement(Nt.Fragment,null,Nt.createElement("p",null," Hey developer "),Nt.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Nt.createElement("code",{style:o},"ErrorBoundary")," or"," ",Nt.createElement("code",{style:o},"errorElement")," prop on your route.")),Nt.createElement(Nt.Fragment,null,Nt.createElement("h2",null,"Unexpected Application Error!"),Nt.createElement("h3",{style:{fontStyle:"italic"}},n),t?Nt.createElement("pre",{style:r},t):null,a)}var FR=Nt.createElement(VR,null),HR=class extends Nt.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,n){return n.location!==i.location||n.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:n.error,location:n.location,revalidation:i.revalidation||n.revalidation}}componentDidCatch(i,n){console.error("React Router caught the following error during render",i,n)}render(){return this.state.error!==void 0?Nt.createElement(Ns.Provider,{value:this.props.routeContext},Nt.createElement(F_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zR({routeContext:i,match:n,children:t}){let e=Nt.useContext(Kh);return e&&e.static&&e.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(e.staticContext._deepestRenderedBoundaryId=n.route.id),Nt.createElement(Ns.Provider,{value:i},t)}function WR(i,n=[],t=null,e=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(n.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let r=i,o=t==null?void 0:t.errors;if(o!=null){let u=r.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);Er(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,u+1))}let a=!1,s=-1;if(t)for(let u=0;u<r.length;u++){let c=r[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(s=u),c.route.id){let{loaderData:h,errors:v}=t,m=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!v||v[c.route.id]===void 0);if(c.route.lazy||m){a=!0,s>=0?r=r.slice(0,s+1):r=[r[0]];break}}}return r.reduceRight((u,c,h)=>{let v,m=!1,y=null,_=null;t&&(v=o&&c.route.id?o[c.route.id]:void 0,y=c.route.errorElement||FR,a&&(s<0&&h===0?(yk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,_=null):s===h&&(m=!0,_=c.route.hydrateFallbackElement||null)));let C=n.concat(r.slice(0,h+1)),E=()=>{let D;return v?D=y:m?D=_:c.route.Component?D=Nt.createElement(c.route.Component,null):c.route.element?D=c.route.element:D=u,Nt.createElement(zR,{match:c,routeContext:{outlet:u,matches:C,isDataRoute:t!=null},children:D})};return t&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?Nt.createElement(HR,{location:t.location,revalidation:t.revalidation,component:y,error:v,children:E(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):E()},null)}function H_(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qR(i){let n=Nt.useContext(Kh);return Er(n,H_(i)),n}function KR(i){let n=Nt.useContext(yb);return Er(n,H_(i)),n}function $R(i){let n=Nt.useContext(Ns);return Er(n,H_(i)),n}function z_(i){let n=$R(i),t=n.matches[n.matches.length-1];return Er(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function GR(){return z_("useRouteId")}function YR(){var e;let i=Nt.useContext(F_),n=KR("useRouteError"),t=z_("useRouteError");return i!==void 0?i:(e=n.errors)==null?void 0:e[t]}function XR(){let{router:i}=qR("useNavigate"),n=z_("useNavigate"),t=Nt.useRef(!1);return vk(()=>{t.current=!0}),Nt.useCallback(async(r,o={})=>{Ms(t.current,pk),t.current&&(typeof r=="number"?i.navigate(r):await i.navigate(r,{fromRouteId:n,...o}))},[i,n])}var wT={};function yk(i,n,t){!n&&!wT[i]&&(wT[i]=!0,Ms(!1,t))}Nt.memo(JR);function JR({routes:i,future:n,state:t}){return mk(i,void 0,t,n)}function Dv({to:i,replace:n,state:t,relative:e}){Er($h(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=Nt.useContext(Ps);Ms(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=Nt.useContext(Ns),{pathname:a}=us(),s=Rs(),u=V_(i,U_(o),a,e==="path"),c=JSON.stringify(u);return Nt.useEffect(()=>{s(JSON.parse(c),{replace:n,state:t,relative:e})},[s,c,e,n,t]),null}function ea(i){Er(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZR({basename:i="/",children:n=null,location:t,navigationType:e="POP",navigator:r,static:o=!1}){Er(!$h(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=i.replace(/^\/*/,"/"),s=Nt.useMemo(()=>({basename:a,navigator:r,static:o,future:{}}),[a,r,o]);typeof t=="string"&&(t=qh(t));let{pathname:u="/",search:c="",hash:h="",state:v=null,key:m="default"}=t,y=Nt.useMemo(()=>{let _=iu(u,a);return _==null?null:{location:{pathname:_,search:c,hash:h,state:v,key:m},navigationType:e}},[a,u,c,h,v,m,e]);return Ms(y!=null,`<Router basename="${a}"> is not able to match the URL "${u}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:Nt.createElement(Ps.Provider,{value:s},Nt.createElement(xg.Provider,{children:n,value:y}))}function QR({children:i,location:n}){return UR(cS(i),n)}function cS(i,n=[]){let t=[];return Nt.Children.forEach(i,(e,r)=>{if(!Nt.isValidElement(e))return;let o=[...n,r];if(e.type===Nt.Fragment){t.push.apply(t,cS(e.props.children,o));return}Er(e.type===ea,`[${typeof e.type=="string"?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Er(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:e.props.hasErrorBoundary===!0||e.props.ErrorBoundary!=null||e.props.errorElement!=null,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=cS(e.props.children,o)),t.push(a)}),t}var iy="get",oy="application/x-www-form-urlencoded";function bb(i){return i!=null&&typeof i.tagName=="string"}function tL(i){return bb(i)&&i.tagName.toLowerCase()==="button"}function eL(i){return bb(i)&&i.tagName.toLowerCase()==="form"}function nL(i){return bb(i)&&i.tagName.toLowerCase()==="input"}function rL(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function iL(i,n){return i.button===0&&(!n||n==="_self")&&!rL(i)}var Rm=null;function oL(){if(Rm===null)try{new FormData(document.createElement("form"),0),Rm=!1}catch{Rm=!0}return Rm}var aL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jw(i){return i!=null&&!aL.has(i)?(Ms(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${oy}"`),null):i}function sL(i,n){let t,e,r,o,a;if(eL(i)){let s=i.getAttribute("action");e=s?iu(s,n):null,t=i.getAttribute("method")||iy,r=jw(i.getAttribute("enctype"))||oy,o=new FormData(i)}else if(tL(i)||nL(i)&&(i.type==="submit"||i.type==="image")){let s=i.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=i.getAttribute("formaction")||s.getAttribute("action");if(e=u?iu(u,n):null,t=i.getAttribute("formmethod")||s.getAttribute("method")||iy,r=jw(i.getAttribute("formenctype"))||jw(s.getAttribute("enctype"))||oy,o=new FormData(s,i),!oL()){let{name:c,type:h,value:v}=i;if(h==="image"){let m=c?`${c}.`:"";o.append(`${m}x`,"0"),o.append(`${m}y`,"0")}else c&&o.append(c,v)}}else{if(bb(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=iy,e=null,r=oy,a=i}return o&&r==="text/plain"&&(a=o,o=void 0),{action:e,method:t.toLowerCase(),encType:r,formData:o,body:a}}function W_(i,n){if(i===!1||i===null||typeof i>"u")throw new Error(n)}async function lL(i,n){if(i.id in n)return n[i.id];try{let t=await import(i.module);return n[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uL(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function cL(i,n,t){let e=await Promise.all(i.map(async r=>{let o=n.routes[r.route.id];if(o){let a=await lL(o,t);return a.links?a.links():[]}return[]}));return pL(e.flat(1).filter(uL).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function xT(i,n,t,e,r,o){let a=(u,c)=>t[c]?u.route.id!==t[c].route.id:!0,s=(u,c)=>{var h;return t[c].pathname!==u.pathname||((h=t[c].route.path)==null?void 0:h.endsWith("*"))&&t[c].params["*"]!==u.params["*"]};return o==="assets"?n.filter((u,c)=>a(u,c)||s(u,c)):o==="data"?n.filter((u,c)=>{var v;let h=e.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(a(u,c)||s(u,c))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(i,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function fL(i,n,{includeHydrateFallback:t}={}){return dL(i.map(e=>{let r=n.routes[e.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function dL(i){return[...new Set(i)]}function hL(i){let n={},t=Object.keys(i).sort();for(let e of t)n[e]=i[e];return n}function pL(i,n){let t=new Set;return new Set(n),i.reduce((e,r)=>{let o=JSON.stringify(hL(r));return t.has(o)||(t.add(o),e.push({key:o,link:r})),e},[])}var vL=new Set([100,101,204,205]);function gL(i,n){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":n&&iu(t.pathname,n)==="/"?t.pathname=`${n.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function bk(){let i=Nt.useContext(Kh);return W_(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function mL(){let i=Nt.useContext(yb);return W_(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var q_=Nt.createContext(void 0);q_.displayName="FrameworkContext";function wk(){let i=Nt.useContext(q_);return W_(i,"You must render this element inside a <HydratedRouter> element"),i}function yL(i,n){let t=Nt.useContext(q_),[e,r]=Nt.useState(!1),[o,a]=Nt.useState(!1),{onFocus:s,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:v}=n,m=Nt.useRef(null);Nt.useEffect(()=>{if(i==="render"&&a(!0),i==="viewport"){let C=D=>{D.forEach(F=>{a(F.isIntersecting)})},E=new IntersectionObserver(C,{threshold:.5});return m.current&&E.observe(m.current),()=>{E.disconnect()}}},[i]),Nt.useEffect(()=>{if(e){let C=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(C)}}},[e]);let y=()=>{r(!0)},_=()=>{r(!1),a(!1)};return t?i!=="intent"?[o,m,{}]:[o,m,{onFocus:av(s,y),onBlur:av(u,_),onMouseEnter:av(c,y),onMouseLeave:av(h,_),onTouchStart:av(v,y)}]:[!1,m,{}]}function av(i,n){return t=>{i&&i(t),t.defaultPrevented||n(t)}}function bL({page:i,...n}){let{router:t}=bk(),e=Nt.useMemo(()=>uk(t.routes,i,t.basename),[t.routes,i,t.basename]);return e?Nt.createElement(xL,{page:i,matches:e,...n}):null}function wL(i){let{manifest:n,routeModules:t}=wk(),[e,r]=Nt.useState([]);return Nt.useEffect(()=>{let o=!1;return cL(i,n,t).then(a=>{o||r(a)}),()=>{o=!0}},[i,n,t]),e}function xL({page:i,matches:n,...t}){let e=us(),{manifest:r,routeModules:o}=wk(),{basename:a}=bk(),{loaderData:s,matches:u}=mL(),c=Nt.useMemo(()=>xT(i,n,u,r,e,"data"),[i,n,u,r,e]),h=Nt.useMemo(()=>xT(i,n,u,r,e,"assets"),[i,n,u,r,e]),v=Nt.useMemo(()=>{if(i===e.pathname+e.search+e.hash)return[];let _=new Set,C=!1;if(n.forEach(D=>{var V;let F=r.routes[D.route.id];!F||!F.hasLoader||(!c.some(K=>K.route.id===D.route.id)&&D.route.id in s&&((V=o[D.route.id])!=null&&V.shouldRevalidate)||F.hasClientLoader?C=!0:_.add(D.route.id))}),_.size===0)return[];let E=gL(i,a);return C&&_.size>0&&E.searchParams.set("_routes",n.filter(D=>_.has(D.route.id)).map(D=>D.route.id).join(",")),[E.pathname+E.search]},[a,s,e,r,c,n,i,o]),m=Nt.useMemo(()=>fL(h,r),[h,r]),y=wL(h);return Nt.createElement(Nt.Fragment,null,v.map(_=>Nt.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...t})),m.map(_=>Nt.createElement("link",{key:_,rel:"modulepreload",href:_,...t})),y.map(({key:_,link:C})=>Nt.createElement("link",{key:_,...C})))}function SL(...i){return n=>{i.forEach(t=>{typeof t=="function"?t(n):t!=null&&(t.current=n)})}}var xk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xk&&(window.__reactRouterVersion="7.5.2")}catch{}function _L({basename:i,children:n,window:t}){let e=Nt.useRef();e.current==null&&(e.current=fR({window:t,v5Compat:!0}));let r=e.current,[o,a]=Nt.useState({action:r.action,location:r.location}),s=Nt.useCallback(u=>{Nt.startTransition(()=>a(u))},[a]);return Nt.useLayoutEffect(()=>r.listen(s),[r,s]),Nt.createElement(ZR,{basename:i,children:n,location:o.location,navigationType:o.action,navigator:r})}var Sk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tr=Nt.forwardRef(function({onClick:n,discover:t="render",prefetch:e="none",relative:r,reloadDocument:o,replace:a,state:s,target:u,to:c,preventScrollReset:h,viewTransition:v,...m},y){let{basename:_}=Nt.useContext(Ps),C=typeof c=="string"&&Sk.test(c),E,D=!1;if(typeof c=="string"&&C&&(E=c,xk))try{let et=new URL(window.location.href),nt=c.startsWith("//")?new URL(et.protocol+c):new URL(c),it=iu(nt.pathname,_);nt.origin===et.origin&&it!=null?c=it+nt.search+nt.hash:D=!0}catch{Ms(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=IR(c,{relative:r}),[V,K,Z]=yL(e,m),ct=OL(c,{replace:a,state:s,target:u,preventScrollReset:h,relative:r,viewTransition:v});function ht(et){n&&n(et),et.defaultPrevented||ct(et)}let st=Nt.createElement("a",{...m,...Z,href:E||F,onClick:D||o?n:ht,ref:SL(y,K),target:u,"data-discover":!C&&t==="render"?"true":void 0});return V&&!C?Nt.createElement(Nt.Fragment,null,st,Nt.createElement(bL,{page:F})):st});Tr.displayName="Link";var CL=Nt.forwardRef(function({"aria-current":n="page",caseSensitive:t=!1,className:e="",end:r=!1,style:o,to:a,viewTransition:s,children:u,...c},h){let v=Sg(a,{relative:c.relative}),m=us(),y=Nt.useContext(yb),{navigator:_,basename:C}=Nt.useContext(Ps),E=y!=null&&PL(v)&&s===!0,D=_.encodeLocation?_.encodeLocation(v).pathname:v.pathname,F=m.pathname,V=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(F=F.toLowerCase(),V=V?V.toLowerCase():null,D=D.toLowerCase()),V&&C&&(V=iu(V,C)||V);const K=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let Z=F===D||!r&&F.startsWith(D)&&F.charAt(K)==="/",ct=V!=null&&(V===D||!r&&V.startsWith(D)&&V.charAt(D.length)==="/"),ht={isActive:Z,isPending:ct,isTransitioning:E},st=Z?n:void 0,et;typeof e=="function"?et=e(ht):et=[e,Z?"active":null,ct?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let nt=typeof o=="function"?o(ht):o;return Nt.createElement(Tr,{...c,"aria-current":st,className:et,ref:h,style:nt,to:a,viewTransition:s},typeof u=="function"?u(ht):u)});CL.displayName="NavLink";var TL=Nt.forwardRef(({discover:i="render",fetcherKey:n,navigate:t,reloadDocument:e,replace:r,state:o,method:a=iy,action:s,onSubmit:u,relative:c,preventScrollReset:h,viewTransition:v,...m},y)=>{let _=ML(),C=DL(s,{relative:c}),E=a.toLowerCase()==="get"?"get":"post",D=typeof s=="string"&&Sk.test(s),F=V=>{if(u&&u(V),V.defaultPrevented)return;V.preventDefault();let K=V.nativeEvent.submitter,Z=(K==null?void 0:K.getAttribute("formmethod"))||a;_(K||V.currentTarget,{fetcherKey:n,method:Z,navigate:t,replace:r,state:o,relative:c,preventScrollReset:h,viewTransition:v})};return Nt.createElement("form",{ref:y,method:E,action:C,onSubmit:e?u:F,...m,"data-discover":!D&&i==="render"?"true":void 0})});TL.displayName="Form";function EL(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _k(i){let n=Nt.useContext(Kh);return Er(n,EL(i)),n}function OL(i,{target:n,replace:t,state:e,preventScrollReset:r,relative:o,viewTransition:a}={}){let s=Rs(),u=us(),c=Sg(i,{relative:o});return Nt.useCallback(h=>{if(iL(h,n)){h.preventDefault();let v=t!==void 0?t:Qv(u)===Qv(c);s(i,{replace:v,state:e,preventScrollReset:r,relative:o,viewTransition:a})}},[u,s,c,t,e,n,i,r,o,a])}var AL=0,kL=()=>`__${String(++AL)}__`;function ML(){let{router:i}=_k("useSubmit"),{basename:n}=Nt.useContext(Ps),t=GR();return Nt.useCallback(async(e,r={})=>{let{action:o,method:a,encType:s,formData:u,body:c}=sL(e,n);if(r.navigate===!1){let h=r.fetcherKey||kL();await i.fetch(h,t,r.action||o,{preventScrollReset:r.preventScrollReset,formData:u,body:c,formMethod:r.method||a,formEncType:r.encType||s,flushSync:r.flushSync})}else await i.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:u,body:c,formMethod:r.method||a,formEncType:r.encType||s,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[i,n,t])}function DL(i,{relative:n}={}){let{basename:t}=Nt.useContext(Ps),e=Nt.useContext(Ns);Er(e,"useFormAction must be used inside a RouteContext");let[r]=e.matches.slice(-1),o={...Sg(i||".",{relative:n})},a=us();if(i==null){o.search=a.search;let s=new URLSearchParams(o.search),u=s.getAll("index");if(u.some(h=>h==="")){s.delete("index"),u.filter(v=>v).forEach(v=>s.append("index",v));let h=s.toString();o.search=h?`?${h}`:""}}return(!i||i===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Ql([t,o.pathname])),Qv(o)}function PL(i,n={}){let t=Nt.useContext(hk);Er(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:e}=_k("useViewTransitionState"),r=Sg(i,{relative:n.relative});if(!t.isTransitioning)return!1;let o=iu(t.currentLocation.pathname,e)||t.currentLocation.pathname,a=iu(t.nextLocation.pathname,e)||t.nextLocation.pathname;return wy(r.pathname,a)!=null||wy(r.pathname,o)!=null}new TextEncoder;[...vL];var NL=lk();const RL=Wh(NL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jL=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,t,e)=>e?e.toUpperCase():t.toLowerCase()),ST=i=>{const n=jL(i);return n.charAt(0).toUpperCase()+n.slice(1)},Ck=(...i)=>i.filter((n,t,e)=>!!n&&n.trim()!==""&&e.indexOf(n)===t).join(" ").trim(),IL=i=>{for(const n in i)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=Nt.forwardRef(({color:i="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:e,className:r="",children:o,iconNode:a,...s},u)=>Nt.createElement("svg",{ref:u,...BL,width:n,height:n,stroke:i,strokeWidth:e?Number(t)*24/Number(n):t,className:Ck("lucide",r),...!o&&!IL(s)&&{"aria-hidden":"true"},...s},[...a.map(([c,h])=>Nt.createElement(c,h)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=(i,n)=>{const t=Nt.forwardRef(({className:e,...r},o)=>Nt.createElement(UL,{ref:o,iconNode:n,className:Ck(`lucide-${LL(ST(i))}`,`lucide-${i}`,e),...r}));return t.displayName=ST(i),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],FL=Dn("arrow-left",VL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],zL=Dn("bold",HL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],_T=Dn("chart-column",WL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],KL=Dn("chevron-right",qL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],CT=Dn("clock",$L);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],YL=Dn("copy",GL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],TT=Dn("eye",XL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],ZL=Dn("history",JL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],tj=Dn("image",QL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],nj=Dn("info",ej);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],ij=Dn("italic",rj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],aj=Dn("layout-template",oj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],lj=Dn("link-2",sj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],cj=Dn("list-ordered",uj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],dj=Dn("list",fj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ET=Dn("log-out",hj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]],OT=Dn("mail-open",pj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],gf=Dn("mail",vj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],mj=Dn("menu",gj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],AT=Dn("mouse-pointer-click",yj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],fS=Dn("pen-line",bj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Tk=Dn("plus",wj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],Sj=Dn("redo",xj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],kT=Dn("refresh-cw",_j);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Tj=Dn("save",Cj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Oj=Dn("search",Ej);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],kj=Dn("sparkles",Aj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ek=Dn("trash-2",Mj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ok=Dn("trending-up",Dj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],Nj=Dn("undo",Pj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],MT=Dn("user",Rj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],DT=Dn("users",Lj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ak=Dn("x",jj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Bj=Dn("zap",Ij);function Uj(){const[i,n]=Nt.useState([]),[t,e]=Nt.useState(!0),[r,o]=Nt.useState(""),[a,s]=Nt.useState(""),u=Rs();Nt.useEffect(()=>{const C=localStorage.getItem("user_id");if(!C){o("User ID not found. Please log in again."),e(!1);return}fetch(`https://kbm7qykb6f.execute-api.us-east-1.amazonaws.com/campaigns?user_id=${C}`).then(E=>E.json()).then(E=>{E.campaigns?n(E.campaigns):n([]),e(!1)}).catch(E=>{console.error("Error fetching campaign list:",E),o("Unable to load campaign list."),e(!1)})},[]);const c=C=>{const E=C.replace("campaign#","");u(`/campaign/${E}`)},h=async C=>{if(window.confirm("Are you sure you want to delete this campaign?"))try{if(!(await fetch(`https://kbm7qykb6f.execute-api.us-east-1.amazonaws.com/campaigns/${C.replace("campaign#","")}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Deletion failed");n(i.filter(D=>D.campaign_id!==C))}catch(E){console.error("Error deleting campaign:",E),alert("Unable to delete campaign. Please try again.")}},v=C=>{switch(C){case"SCHEDULED":return"bg-yellow-300 border-yellow-500";case"SENT":return"bg-green-200 border-green-400";case"OPENED":return"bg-green-400 border-green-600";case"CLICKED":return"bg-blue-400 border-blue-600";case"FAILED":return"bg-red-300 border-red-500";case"DRAFT":return"bg-gray-300 border-gray-500";default:return"bg-purple-300 border-purple-500"}},m=C=>{const D={SCHEDULED:{icon:"",text:"Scheduled",color:"bg-yellow-100 text-yellow-800 border-yellow-300"},SENT:{icon:"",text:"Sent",color:"bg-green-100 text-green-800 border-green-300"},OPENED:{icon:"",text:"Opened",color:"bg-green-200 text-green-900 border-green-400"},CLICKED:{icon:"",text:"Clicked",color:"bg-blue-200 text-blue-900 border-blue-400"},FAILED:{icon:"",text:"Failed",color:"bg-red-100 text-red-800 border-red-300"},DRAFT:{icon:"",text:"Draft",color:"bg-gray-100 text-gray-800 border-gray-300"}}[C]||{icon:"",text:C,color:"bg-purple-100 text-purple-800 border-purple-300"};return j.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-semibold border-2 ${D.color}`,children:[j.jsx("span",{className:"text-lg",children:D.icon}),D.text]})},y=C=>C?new Date(C).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(/,/,"").replace(/\//g,"-"):"",_=i.filter(C=>{var E,D;return((E=C.subject)==null?void 0:E.toLowerCase().includes(a.toLowerCase()))||((D=C.campaign_id)==null?void 0:D.toLowerCase().includes(a.toLowerCase()))});return!t&&i.length===0?j.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-6",children:j.jsx("div",{className:"max-w-6xl mx-auto",children:j.jsxs("div",{className:"text-center py-20",children:[j.jsx("div",{className:"mb-8",children:j.jsx(gf,{size:120,className:"mx-auto text-purple-300"})}),j.jsx("h1",{className:"text-5xl font-bold text-gray-800 mb-4",children:"Welcome to Email Marketing Platform!"}),j.jsx("p",{className:"text-xl text-gray-600 mb-12",children:"You haven't created any campaigns yet. Let's get started!"}),j.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[j.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all hover:scale-105",children:[j.jsx("div",{className:"text-6xl mb-4",children:""}),j.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Regular Campaign"}),j.jsx("p",{className:"text-gray-600 mb-6",children:"Send one-time emails to your audience. Perfect for newsletters, announcements, and promotions."}),j.jsx(Tr,{to:"/create",children:j.jsx("button",{className:"w-full bg-gradient-to-r from-blue-500 to-cyan-500 text-white py-4 rounded-xl font-bold text-lg hover:scale-105 transition",children:"Create Regular Campaign"})})]}),j.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-pink-600 text-white rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all hover:scale-105",children:[j.jsx("div",{className:"text-6xl mb-4",children:""}),j.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Drip Campaign (Automated)"}),j.jsx("p",{className:"mb-6 opacity-90",children:"Smart email sequences based on user behavior. Automatically send different emails to openers vs non-openers."}),j.jsx(Tr,{to:"/drip-builder",children:j.jsx("button",{className:"w-full bg-white text-purple-600 py-4 rounded-xl font-bold text-lg hover:scale-105 transition",children:"Create Drip Campaign"})})]})]}),j.jsxs("div",{className:"mt-12",children:[j.jsx("p",{className:"text-gray-600 mb-4",children:"Want to start with a template?"}),j.jsx(Tr,{to:"/templates",children:j.jsx("button",{className:"px-8 py-3 bg-white text-purple-600 rounded-xl font-semibold hover:shadow-lg transition border-2 border-purple-200",children:"Browse Template Library"})})]})]})})}):j.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-6",children:j.jsxs("div",{className:"max-w-7xl mx-auto",children:[j.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[j.jsxs("div",{children:[j.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:" My Campaigns"}),j.jsx("p",{className:"text-gray-600",children:"Manage and track your email campaigns"})]}),j.jsxs("div",{className:"flex gap-3",children:[j.jsx(Tr,{to:"/create",children:j.jsxs("button",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-6 py-3 rounded-xl font-semibold hover:scale-105 transition shadow-lg",children:[j.jsx(Tk,{size:20}),"New Campaign"]})}),j.jsx(Tr,{to:"/drip-dashboard",children:j.jsxs("button",{className:"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-xl font-semibold hover:scale-105 transition shadow-lg",children:[j.jsx(Ok,{size:20}),"Drip Dashboard"]})})]})]}),j.jsxs("div",{className:"grid lg:grid-cols-4 gap-6",children:[j.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[j.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-md",children:j.jsxs("div",{className:"relative",children:[j.jsx(Oj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),j.jsx("input",{type:"text",placeholder:"Search campaigns by subject or ID...",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-400 focus:outline-none",value:a,onChange:C=>s(C.target.value)})]})}),j.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-md",children:[j.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:" Status Guide:"}),j.jsxs("div",{className:"flex flex-wrap gap-3",children:[j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx("div",{className:"w-4 h-4 rounded bg-yellow-300 border-2 border-yellow-500"}),j.jsx("span",{className:"text-sm",children:"Scheduled"})]}),j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx("div",{className:"w-4 h-4 rounded bg-green-200 border-2 border-green-400"}),j.jsx("span",{className:"text-sm",children:"Sent"})]}),j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx("div",{className:"w-4 h-4 rounded bg-green-400 border-2 border-green-600"}),j.jsx("span",{className:"text-sm",children:"Opened"})]}),j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx("div",{className:"w-4 h-4 rounded bg-blue-400 border-2 border-blue-600"}),j.jsx("span",{className:"text-sm",children:"Clicked"})]}),j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx("div",{className:"w-4 h-4 rounded bg-red-300 border-2 border-red-500"}),j.jsx("span",{className:"text-sm",children:"Failed"})]})]})]}),t?j.jsxs("div",{className:"text-center py-12",children:[j.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mx-auto"}),j.jsx("p",{className:"mt-4 text-gray-600",children:"Loading campaigns..."})]}):r?j.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-6 text-center",children:j.jsx("p",{className:"text-red-600 font-semibold",children:r})}):_.length>0?j.jsx("div",{className:"space-y-4",children:_.map((C,E)=>j.jsx("div",{className:`bg-white p-6 border-2 rounded-2xl shadow-md cursor-pointer hover:shadow-xl transition-all ${v(C.status)}`,onClick:()=>c(C.campaign_id),children:j.jsxs("div",{className:"flex justify-between items-start gap-4",children:[j.jsxs("div",{className:"flex-1",children:[j.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[j.jsx("span",{className:"text-xs font-mono text-gray-500 bg-gray-100 px-2 py-1 rounded",children:C.campaign_id.replace("campaign#","")}),m(C.status)]}),j.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:C.subject}),j.jsxs("p",{className:"text-sm text-gray-600",children:[" ",y(C.timestamp)]})]}),j.jsx("button",{onClick:D=>{D.stopPropagation(),h(C.campaign_id)},className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition font-semibold",children:"Delete"})]})},E))}):j.jsx("div",{className:"bg-white rounded-2xl p-12 text-center shadow-md",children:j.jsxs("p",{className:"text-gray-500 text-lg",children:['No campaigns found matching "',a,'"']})})]}),j.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[j.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-pink-600 text-white rounded-2xl p-6 shadow-xl sticky top-6",children:[j.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[j.jsx(Bj,{size:32,className:"text-yellow-300"}),j.jsx("h3",{className:"text-xl font-bold",children:"Try Drip Campaigns"})]}),j.jsx("p",{className:"text-sm mb-4 opacity-90",children:"Send smarter emails that adapt based on user behavior. Automatically send different content to engaged vs unengaged users."}),j.jsxs("div",{className:"space-y-3 mb-6",children:[j.jsxs("div",{className:"flex items-start gap-2",children:[j.jsx("span",{className:"text-green-300",children:""}),j.jsx("span",{className:"text-sm",children:"Behavior-based automation"})]}),j.jsxs("div",{className:"flex items-start gap-2",children:[j.jsx("span",{className:"text-green-300",children:""}),j.jsx("span",{className:"text-sm",children:"Higher engagement rates"})]}),j.jsxs("div",{className:"flex items-start gap-2",children:[j.jsx("span",{className:"text-green-300",children:""}),j.jsx("span",{className:"text-sm",children:"Set it and forget it"})]})]}),j.jsx(Tr,{to:"/drip-builder",children:j.jsx("button",{className:"w-full bg-white text-purple-600 py-3 rounded-xl font-bold hover:scale-105 transition",children:"Create Drip Campaign"})}),j.jsx(Tr,{to:"/drip-dashboard",children:j.jsx("button",{className:"w-full mt-2 bg-white/10 text-white py-2 rounded-xl font-semibold hover:bg-white/20 transition text-sm",children:"View Dashboard"})})]}),j.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-md",children:[j.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:" Quick Stats"}),j.jsxs("div",{className:"space-y-3",children:[j.jsxs("div",{className:"flex justify-between",children:[j.jsx("span",{className:"text-gray-600",children:"Total Campaigns:"}),j.jsx("span",{className:"font-bold text-purple-600",children:i.length})]}),j.jsxs("div",{className:"flex justify-between",children:[j.jsx("span",{className:"text-gray-600",children:"Active:"}),j.jsx("span",{className:"font-bold text-green-600",children:i.filter(C=>C.status==="OPENED"||C.status==="CLICKED").length})]}),j.jsxs("div",{className:"flex justify-between",children:[j.jsx("span",{className:"text-gray-600",children:"Scheduled:"}),j.jsx("span",{className:"font-bold text-yellow-600",children:i.filter(C=>C.status==="SCHEDULED").length})]})]})]})]})]})]})})}var Iw={exports:{}},Bw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PT;function Vj(){if(PT)return Bw;PT=1;var i=wg();function n(v,m){return v===m&&(v!==0||1/v===1/m)||v!==v&&m!==m}var t=typeof Object.is=="function"?Object.is:n,e=i.useState,r=i.useEffect,o=i.useLayoutEffect,a=i.useDebugValue;function s(v,m){var y=m(),_=e({inst:{value:y,getSnapshot:m}}),C=_[0].inst,E=_[1];return o(function(){C.value=y,C.getSnapshot=m,u(C)&&E({inst:C})},[v,y,m]),r(function(){return u(C)&&E({inst:C}),v(function(){u(C)&&E({inst:C})})},[v]),a(y),y}function u(v){var m=v.getSnapshot;v=v.value;try{var y=m();return!t(v,y)}catch{return!0}}function c(v,m){return m()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:s;return Bw.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:h,Bw}var NT;function kk(){return NT||(NT=1,Iw.exports=Vj()),Iw.exports}var Mk=kk();function no(i){this.content=i}no.prototype={constructor:no,find:function(i){for(var n=0;n<this.content.length;n+=2)if(this.content[n]===i)return n;return-1},get:function(i){var n=this.find(i);return n==-1?void 0:this.content[n+1]},update:function(i,n,t){var e=t&&t!=i?this.remove(t):this,r=e.find(i),o=e.content.slice();return r==-1?o.push(t||i,n):(o[r+1]=n,t&&(o[r]=t)),new no(o)},remove:function(i){var n=this.find(i);if(n==-1)return this;var t=this.content.slice();return t.splice(n,2),new no(t)},addToStart:function(i,n){return new no([i,n].concat(this.remove(i).content))},addToEnd:function(i,n){var t=this.remove(i).content.slice();return t.push(i,n),new no(t)},addBefore:function(i,n,t){var e=this.remove(n),r=e.content.slice(),o=e.find(i);return r.splice(o==-1?r.length:o,0,n,t),new no(r)},forEach:function(i){for(var n=0;n<this.content.length;n+=2)i(this.content[n],this.content[n+1])},prepend:function(i){return i=no.from(i),i.size?new no(i.content.concat(this.subtract(i).content)):this},append:function(i){return i=no.from(i),i.size?new no(this.subtract(i).content.concat(i.content)):this},subtract:function(i){var n=this;i=no.from(i);for(var t=0;t<i.content.length;t+=2)n=n.remove(i.content[t]);return n},toObject:function(){var i={};return this.forEach(function(n,t){i[n]=t}),i},get size(){return this.content.length>>1}};no.from=function(i){if(i instanceof no)return i;var n=[];if(i)for(var t in i)n.push(t,i[t]);return new no(n)};function Dk(i,n,t){for(let e=0;;e++){if(e==i.childCount||e==n.childCount)return i.childCount==n.childCount?null:t;let r=i.child(e),o=n.child(e);if(r==o){t+=r.nodeSize;continue}if(!r.sameMarkup(o))return t;if(r.isText&&r.text!=o.text){for(let a=0;r.text[a]==o.text[a];a++)t++;return t}if(r.content.size||o.content.size){let a=Dk(r.content,o.content,t+1);if(a!=null)return a}t+=r.nodeSize}}function Pk(i,n,t,e){for(let r=i.childCount,o=n.childCount;;){if(r==0||o==0)return r==o?null:{a:t,b:e};let a=i.child(--r),s=n.child(--o),u=a.nodeSize;if(a==s){t-=u,e-=u;continue}if(!a.sameMarkup(s))return{a:t,b:e};if(a.isText&&a.text!=s.text){let c=0,h=Math.min(a.text.length,s.text.length);for(;c<h&&a.text[a.text.length-c-1]==s.text[s.text.length-c-1];)c++,t--,e--;return{a:t,b:e}}if(a.content.size||s.content.size){let c=Pk(a.content,s.content,t-1,e-1);if(c)return c}t-=u,e-=u}}class ge{constructor(n,t){if(this.content=n,this.size=t||0,t==null)for(let e=0;e<n.length;e++)this.size+=n[e].nodeSize}nodesBetween(n,t,e,r=0,o){for(let a=0,s=0;s<t;a++){let u=this.content[a],c=s+u.nodeSize;if(c>n&&e(u,r+s,o||null,a)!==!1&&u.content.size){let h=s+1;u.nodesBetween(Math.max(0,n-h),Math.min(u.content.size,t-h),e,r+h)}s=c}}descendants(n){this.nodesBetween(0,this.size,n)}textBetween(n,t,e,r){let o="",a=!0;return this.nodesBetween(n,t,(s,u)=>{let c=s.isText?s.text.slice(Math.max(n,u)-u,t-u):s.isLeaf?r?typeof r=="function"?r(s):r:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&c||s.isTextblock)&&e&&(a?a=!1:o+=e),o+=c},0),o}append(n){if(!n.size)return this;if(!this.size)return n;let t=this.lastChild,e=n.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(e)&&(r[r.length-1]=t.withText(t.text+e.text),o=1);o<n.content.length;o++)r.push(n.content[o]);return new ge(r,this.size+n.size)}cut(n,t=this.size){if(n==0&&t==this.size)return this;let e=[],r=0;if(t>n)for(let o=0,a=0;a<t;o++){let s=this.content[o],u=a+s.nodeSize;u>n&&((a<n||u>t)&&(s.isText?s=s.cut(Math.max(0,n-a),Math.min(s.text.length,t-a)):s=s.cut(Math.max(0,n-a-1),Math.min(s.content.size,t-a-1))),e.push(s),r+=s.nodeSize),a=u}return new ge(e,r)}cutByIndex(n,t){return n==t?ge.empty:n==0&&t==this.content.length?this:new ge(this.content.slice(n,t))}replaceChild(n,t){let e=this.content[n];if(e==t)return this;let r=this.content.slice(),o=this.size+t.nodeSize-e.nodeSize;return r[n]=t,new ge(r,o)}addToStart(n){return new ge([n].concat(this.content),this.size+n.nodeSize)}addToEnd(n){return new ge(this.content.concat(n),this.size+n.nodeSize)}eq(n){if(this.content.length!=n.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(n.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(n){let t=this.content[n];if(!t)throw new RangeError("Index "+n+" out of range for "+this);return t}maybeChild(n){return this.content[n]||null}forEach(n){for(let t=0,e=0;t<this.content.length;t++){let r=this.content[t];n(r,e,t),e+=r.nodeSize}}findDiffStart(n,t=0){return Dk(this,n,t)}findDiffEnd(n,t=this.size,e=n.size){return Pk(this,n,t,e)}findIndex(n){if(n==0)return Lm(0,n);if(n==this.size)return Lm(this.content.length,n);if(n>this.size||n<0)throw new RangeError(`Position ${n} outside of fragment (${this})`);for(let t=0,e=0;;t++){let r=this.child(t),o=e+r.nodeSize;if(o>=n)return o==n?Lm(t+1,o):Lm(t,e);e=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(n=>n.toJSON()):null}static fromJSON(n,t){if(!t)return ge.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ge(t.map(n.nodeFromJSON))}static fromArray(n){if(!n.length)return ge.empty;let t,e=0;for(let r=0;r<n.length;r++){let o=n[r];e+=o.nodeSize,r&&o.isText&&n[r-1].sameMarkup(o)?(t||(t=n.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new ge(t||n,e)}static from(n){if(!n)return ge.empty;if(n instanceof ge)return n;if(Array.isArray(n))return this.fromArray(n);if(n.attrs)return new ge([n],n.nodeSize);throw new RangeError("Can not convert "+n+" to a Fragment"+(n.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ge.empty=new ge([],0);const Uw={index:0,offset:0};function Lm(i,n){return Uw.index=i,Uw.offset=n,Uw}function xy(i,n){if(i===n)return!0;if(!(i&&typeof i=="object")||!(n&&typeof n=="object"))return!1;let t=Array.isArray(i);if(Array.isArray(n)!=t)return!1;if(t){if(i.length!=n.length)return!1;for(let e=0;e<i.length;e++)if(!xy(i[e],n[e]))return!1}else{for(let e in i)if(!(e in n)||!xy(i[e],n[e]))return!1;for(let e in n)if(!(e in i))return!1}return!0}let rr=class dS{constructor(n,t){this.type=n,this.attrs=t}addToSet(n){let t,e=!1;for(let r=0;r<n.length;r++){let o=n[r];if(this.eq(o))return n;if(this.type.excludes(o.type))t||(t=n.slice(0,r));else{if(o.type.excludes(this.type))return n;!e&&o.type.rank>this.type.rank&&(t||(t=n.slice(0,r)),t.push(this),e=!0),t&&t.push(o)}}return t||(t=n.slice()),e||t.push(this),t}removeFromSet(n){for(let t=0;t<n.length;t++)if(this.eq(n[t]))return n.slice(0,t).concat(n.slice(t+1));return n}isInSet(n){for(let t=0;t<n.length;t++)if(this.eq(n[t]))return!0;return!1}eq(n){return this==n||this.type==n.type&&xy(this.attrs,n.attrs)}toJSON(){let n={type:this.type.name};for(let t in this.attrs){n.attrs=this.attrs;break}return n}static fromJSON(n,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let e=n.marks[t.type];if(!e)throw new RangeError(`There is no mark type ${t.type} in this schema`);let r=e.create(t.attrs);return e.checkAttrs(r.attrs),r}static sameSet(n,t){if(n==t)return!0;if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(!n[e].eq(t[e]))return!1;return!0}static setFrom(n){if(!n||Array.isArray(n)&&n.length==0)return dS.none;if(n instanceof dS)return[n];let t=n.slice();return t.sort((e,r)=>e.type.rank-r.type.rank),t}};rr.none=[];class Sy extends Error{}class Ne{constructor(n,t,e){this.content=n,this.openStart=t,this.openEnd=e}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(n,t){let e=Rk(this.content,n+this.openStart,t);return e&&new Ne(e,this.openStart,this.openEnd)}removeBetween(n,t){return new Ne(Nk(this.content,n+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(n){return this.content.eq(n.content)&&this.openStart==n.openStart&&this.openEnd==n.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let n={content:this.content.toJSON()};return this.openStart>0&&(n.openStart=this.openStart),this.openEnd>0&&(n.openEnd=this.openEnd),n}static fromJSON(n,t){if(!t)return Ne.empty;let e=t.openStart||0,r=t.openEnd||0;if(typeof e!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ne(ge.fromJSON(n,t.content),e,r)}static maxOpen(n,t=!0){let e=0,r=0;for(let o=n.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)e++;for(let o=n.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)r++;return new Ne(n,e,r)}}Ne.empty=new Ne(ge.empty,0,0);function Nk(i,n,t){let{index:e,offset:r}=i.findIndex(n),o=i.maybeChild(e),{index:a,offset:s}=i.findIndex(t);if(r==n||o.isText){if(s!=t&&!i.child(a).isText)throw new RangeError("Removing non-flat range");return i.cut(0,n).append(i.cut(t))}if(e!=a)throw new RangeError("Removing non-flat range");return i.replaceChild(e,o.copy(Nk(o.content,n-r-1,t-r-1)))}function Rk(i,n,t,e){let{index:r,offset:o}=i.findIndex(n),a=i.maybeChild(r);if(o==n||a.isText)return e&&!e.canReplace(r,r,t)?null:i.cut(0,n).append(t).append(i.cut(n));let s=Rk(a.content,n-o-1,t,a);return s&&i.replaceChild(r,a.copy(s))}function Fj(i,n,t){if(t.openStart>i.depth)throw new Sy("Inserted content deeper than insertion position");if(i.depth-t.openStart!=n.depth-t.openEnd)throw new Sy("Inconsistent open depths");return Lk(i,n,t,0)}function Lk(i,n,t,e){let r=i.index(e),o=i.node(e);if(r==n.index(e)&&e<i.depth-t.openStart){let a=Lk(i,n,t,e+1);return o.copy(o.content.replaceChild(r,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&i.depth==e&&n.depth==e){let a=i.parent,s=a.content;return Df(a,s.cut(0,i.parentOffset).append(t.content).append(s.cut(n.parentOffset)))}else{let{start:a,end:s}=Hj(t,i);return Df(o,Ik(i,a,s,n,e))}else return Df(o,_y(i,n,e))}function jk(i,n){if(!n.type.compatibleContent(i.type))throw new Sy("Cannot join "+n.type.name+" onto "+i.type.name)}function hS(i,n,t){let e=i.node(t);return jk(e,n.node(t)),e}function Mf(i,n){let t=n.length-1;t>=0&&i.isText&&i.sameMarkup(n[t])?n[t]=i.withText(n[t].text+i.text):n.push(i)}function Pv(i,n,t,e){let r=(n||i).node(t),o=0,a=n?n.index(t):r.childCount;i&&(o=i.index(t),i.depth>t?o++:i.textOffset&&(Mf(i.nodeAfter,e),o++));for(let s=o;s<a;s++)Mf(r.child(s),e);n&&n.depth==t&&n.textOffset&&Mf(n.nodeBefore,e)}function Df(i,n){return i.type.checkContent(n),i.copy(n)}function Ik(i,n,t,e,r){let o=i.depth>r&&hS(i,n,r+1),a=e.depth>r&&hS(t,e,r+1),s=[];return Pv(null,i,r,s),o&&a&&n.index(r)==t.index(r)?(jk(o,a),Mf(Df(o,Ik(i,n,t,e,r+1)),s)):(o&&Mf(Df(o,_y(i,n,r+1)),s),Pv(n,t,r,s),a&&Mf(Df(a,_y(t,e,r+1)),s)),Pv(e,null,r,s),new ge(s)}function _y(i,n,t){let e=[];if(Pv(null,i,t,e),i.depth>t){let r=hS(i,n,t+1);Mf(Df(r,_y(i,n,t+1)),e)}return Pv(n,null,t,e),new ge(e)}function Hj(i,n){let t=n.depth-i.openStart,r=n.node(t).copy(i.content);for(let o=t-1;o>=0;o--)r=n.node(o).copy(ge.from(r));return{start:r.resolveNoCache(i.openStart+t),end:r.resolveNoCache(r.content.size-i.openEnd-t)}}class tg{constructor(n,t,e){this.pos=n,this.path=t,this.parentOffset=e,this.depth=t.length/3-1}resolveDepth(n){return n==null?this.depth:n<0?this.depth+n:n}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(n){return this.path[this.resolveDepth(n)*3]}index(n){return this.path[this.resolveDepth(n)*3+1]}indexAfter(n){return n=this.resolveDepth(n),this.index(n)+(n==this.depth&&!this.textOffset?0:1)}start(n){return n=this.resolveDepth(n),n==0?0:this.path[n*3-1]+1}end(n){return n=this.resolveDepth(n),this.start(n)+this.node(n).content.size}before(n){if(n=this.resolveDepth(n),!n)throw new RangeError("There is no position before the top-level node");return n==this.depth+1?this.pos:this.path[n*3-1]}after(n){if(n=this.resolveDepth(n),!n)throw new RangeError("There is no position after the top-level node");return n==this.depth+1?this.pos:this.path[n*3-1]+this.path[n*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let n=this.parent,t=this.index(this.depth);if(t==n.childCount)return null;let e=this.pos-this.path[this.path.length-1],r=n.child(t);return e?n.child(t).cut(e):r}get nodeBefore(){let n=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(n).cut(0,t):n==0?null:this.parent.child(n-1)}posAtIndex(n,t){t=this.resolveDepth(t);let e=this.path[t*3],r=t==0?0:this.path[t*3-1]+1;for(let o=0;o<n;o++)r+=e.child(o).nodeSize;return r}marks(){let n=this.parent,t=this.index();if(n.content.size==0)return rr.none;if(this.textOffset)return n.child(t).marks;let e=n.maybeChild(t-1),r=n.maybeChild(t);if(!e){let s=e;e=r,r=s}let o=e.marks;for(var a=0;a<o.length;a++)o[a].type.spec.inclusive===!1&&(!r||!o[a].isInSet(r.marks))&&(o=o[a--].removeFromSet(o));return o}marksAcross(n){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let e=t.marks,r=n.parent.maybeChild(n.index());for(var o=0;o<e.length;o++)e[o].type.spec.inclusive===!1&&(!r||!e[o].isInSet(r.marks))&&(e=e[o--].removeFromSet(e));return e}sharedDepth(n){for(let t=this.depth;t>0;t--)if(this.start(t)<=n&&this.end(t)>=n)return t;return 0}blockRange(n=this,t){if(n.pos<this.pos)return n.blockRange(this);for(let e=this.depth-(this.parent.inlineContent||this.pos==n.pos?1:0);e>=0;e--)if(n.pos<=this.end(e)&&(!t||t(this.node(e))))return new Cy(this,n,e);return null}sameParent(n){return this.pos-this.parentOffset==n.pos-n.parentOffset}max(n){return n.pos>this.pos?n:this}min(n){return n.pos<this.pos?n:this}toString(){let n="";for(let t=1;t<=this.depth;t++)n+=(n?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return n+":"+this.parentOffset}static resolve(n,t){if(!(t>=0&&t<=n.content.size))throw new RangeError("Position "+t+" out of range");let e=[],r=0,o=t;for(let a=n;;){let{index:s,offset:u}=a.content.findIndex(o),c=o-u;if(e.push(a,s,r+u),!c||(a=a.child(s),a.isText))break;o=c-1,r+=u+1}return new tg(t,e,o)}static resolveCached(n,t){let e=RT.get(n);if(e)for(let o=0;o<e.elts.length;o++){let a=e.elts[o];if(a.pos==t)return a}else RT.set(n,e=new zj);let r=e.elts[e.i]=tg.resolve(n,t);return e.i=(e.i+1)%Wj,r}}class zj{constructor(){this.elts=[],this.i=0}}const Wj=12,RT=new WeakMap;class Cy{constructor(n,t,e){this.$from=n,this.$to=t,this.depth=e}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const qj=Object.create(null);let cc=class pS{constructor(n,t,e,r=rr.none){this.type=n,this.attrs=t,this.marks=r,this.content=e||ge.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(n){return this.content.child(n)}maybeChild(n){return this.content.maybeChild(n)}forEach(n){this.content.forEach(n)}nodesBetween(n,t,e,r=0){this.content.nodesBetween(n,t,e,r,this)}descendants(n){this.nodesBetween(0,this.content.size,n)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(n,t,e,r){return this.content.textBetween(n,t,e,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(n){return this==n||this.sameMarkup(n)&&this.content.eq(n.content)}sameMarkup(n){return this.hasMarkup(n.type,n.attrs,n.marks)}hasMarkup(n,t,e){return this.type==n&&xy(this.attrs,t||n.defaultAttrs||qj)&&rr.sameSet(this.marks,e||rr.none)}copy(n=null){return n==this.content?this:new pS(this.type,this.attrs,n,this.marks)}mark(n){return n==this.marks?this:new pS(this.type,this.attrs,this.content,n)}cut(n,t=this.content.size){return n==0&&t==this.content.size?this:this.copy(this.content.cut(n,t))}slice(n,t=this.content.size,e=!1){if(n==t)return Ne.empty;let r=this.resolve(n),o=this.resolve(t),a=e?0:r.sharedDepth(t),s=r.start(a),c=r.node(a).content.cut(r.pos-s,o.pos-s);return new Ne(c,r.depth-a,o.depth-a)}replace(n,t,e){return Fj(this.resolve(n),this.resolve(t),e)}nodeAt(n){for(let t=this;;){let{index:e,offset:r}=t.content.findIndex(n);if(t=t.maybeChild(e),!t)return null;if(r==n||t.isText)return t;n-=r+1}}childAfter(n){let{index:t,offset:e}=this.content.findIndex(n);return{node:this.content.maybeChild(t),index:t,offset:e}}childBefore(n){if(n==0)return{node:null,index:0,offset:0};let{index:t,offset:e}=this.content.findIndex(n);if(e<n)return{node:this.content.child(t),index:t,offset:e};let r=this.content.child(t-1);return{node:r,index:t-1,offset:e-r.nodeSize}}resolve(n){return tg.resolveCached(this,n)}resolveNoCache(n){return tg.resolve(this,n)}rangeHasMark(n,t,e){let r=!1;return t>n&&this.nodesBetween(n,t,o=>(e.isInSet(o.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let n=this.type.name;return this.content.size&&(n+="("+this.content.toStringInner()+")"),Bk(this.marks,n)}contentMatchAt(n){let t=this.type.contentMatch.matchFragment(this.content,0,n);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(n,t,e=ge.empty,r=0,o=e.childCount){let a=this.contentMatchAt(n).matchFragment(e,r,o),s=a&&a.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let u=r;u<o;u++)if(!this.type.allowsMarks(e.child(u).marks))return!1;return!0}canReplaceWith(n,t,e,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(n).matchType(e),a=o&&o.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(n){return n.content.size?this.canReplace(this.childCount,this.childCount,n.content):this.type.compatibleContent(n.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let n=rr.none;for(let t=0;t<this.marks.length;t++){let e=this.marks[t];e.type.checkAttrs(e.attrs),n=e.addToSet(n)}if(!rr.sameSet(n,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let n={type:this.type.name};for(let t in this.attrs){n.attrs=this.attrs;break}return this.content.size&&(n.content=this.content.toJSON()),this.marks.length&&(n.marks=this.marks.map(t=>t.toJSON())),n}static fromJSON(n,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let e;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");e=t.marks.map(n.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return n.text(t.text,e)}let r=ge.fromJSON(n,t.content),o=n.nodeType(t.type).create(t.attrs,r,e);return o.type.checkAttrs(o.attrs),o}};cc.prototype.text=void 0;class Ty extends cc{constructor(n,t,e,r){if(super(n,t,null,r),!e)throw new RangeError("Empty text nodes are not allowed");this.text=e}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Bk(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(n,t){return this.text.slice(n,t)}get nodeSize(){return this.text.length}mark(n){return n==this.marks?this:new Ty(this.type,this.attrs,this.text,n)}withText(n){return n==this.text?this:new Ty(this.type,this.attrs,n,this.marks)}cut(n=0,t=this.text.length){return n==0&&t==this.text.length?this:this.withText(this.text.slice(n,t))}eq(n){return this.sameMarkup(n)&&this.text==n.text}toJSON(){let n=super.toJSON();return n.text=this.text,n}}function Bk(i,n){for(let t=i.length-1;t>=0;t--)n=i[t].type.name+"("+n+")";return n}class Lf{constructor(n){this.validEnd=n,this.next=[],this.wrapCache=[]}static parse(n,t){let e=new Kj(n,t);if(e.next==null)return Lf.empty;let r=Uk(e);e.next&&e.err("Unexpected trailing text");let o=Qj(Zj(r));return tI(o,e),o}matchType(n){for(let t=0;t<this.next.length;t++)if(this.next[t].type==n)return this.next[t].next;return null}matchFragment(n,t=0,e=n.childCount){let r=this;for(let o=t;r&&o<e;o++)r=r.matchType(n.child(o).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let n=0;n<this.next.length;n++){let{type:t}=this.next[n];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(n){for(let t=0;t<this.next.length;t++)for(let e=0;e<n.next.length;e++)if(this.next[t].type==n.next[e].type)return!0;return!1}fillBefore(n,t=!1,e=0){let r=[this];function o(a,s){let u=a.matchFragment(n,e);if(u&&(!t||u.validEnd))return ge.from(s.map(c=>c.createAndFill()));for(let c=0;c<a.next.length;c++){let{type:h,next:v}=a.next[c];if(!(h.isText||h.hasRequiredAttrs())&&r.indexOf(v)==-1){r.push(v);let m=o(v,s.concat(h));if(m)return m}}return null}return o(this,[])}findWrapping(n){for(let e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==n)return this.wrapCache[e+1];let t=this.computeWrapping(n);return this.wrapCache.push(n,t),t}computeWrapping(n){let t=Object.create(null),e=[{match:this,type:null,via:null}];for(;e.length;){let r=e.shift(),o=r.match;if(o.matchType(n)){let a=[];for(let s=r;s.type;s=s.via)a.push(s.type);return a.reverse()}for(let a=0;a<o.next.length;a++){let{type:s,next:u}=o.next[a];!s.isLeaf&&!s.hasRequiredAttrs()&&!(s.name in t)&&(!r.type||u.validEnd)&&(e.push({match:s.contentMatch,type:s,via:r}),t[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(n){if(n>=this.next.length)throw new RangeError(`There's no ${n}th edge in this content match`);return this.next[n]}toString(){let n=[];function t(e){n.push(e);for(let r=0;r<e.next.length;r++)n.indexOf(e.next[r].next)==-1&&t(e.next[r].next)}return t(this),n.map((e,r)=>{let o=r+(e.validEnd?"*":" ")+" ";for(let a=0;a<e.next.length;a++)o+=(a?", ":"")+e.next[a].type.name+"->"+n.indexOf(e.next[a].next);return o}).join(`
`)}}Lf.empty=new Lf(!0);class Kj{constructor(n,t){this.string=n,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=n.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(n){return this.next==n&&(this.pos++||!0)}err(n){throw new SyntaxError(n+" (in content expression '"+this.string+"')")}}function Uk(i){let n=[];do n.push($j(i));while(i.eat("|"));return n.length==1?n[0]:{type:"choice",exprs:n}}function $j(i){let n=[];do n.push(Gj(i));while(i.next&&i.next!=")"&&i.next!="|");return n.length==1?n[0]:{type:"seq",exprs:n}}function Gj(i){let n=Jj(i);for(;;)if(i.eat("+"))n={type:"plus",expr:n};else if(i.eat("*"))n={type:"star",expr:n};else if(i.eat("?"))n={type:"opt",expr:n};else if(i.eat("{"))n=Yj(i,n);else break;return n}function LT(i){/\D/.test(i.next)&&i.err("Expected number, got '"+i.next+"'");let n=Number(i.next);return i.pos++,n}function Yj(i,n){let t=LT(i),e=t;return i.eat(",")&&(i.next!="}"?e=LT(i):e=-1),i.eat("}")||i.err("Unclosed braced range"),{type:"range",min:t,max:e,expr:n}}function Xj(i,n){let t=i.nodeTypes,e=t[n];if(e)return[e];let r=[];for(let o in t){let a=t[o];a.isInGroup(n)&&r.push(a)}return r.length==0&&i.err("No node type or group '"+n+"' found"),r}function Jj(i){if(i.eat("(")){let n=Uk(i);return i.eat(")")||i.err("Missing closing paren"),n}else if(/\W/.test(i.next))i.err("Unexpected token '"+i.next+"'");else{let n=Xj(i,i.next).map(t=>(i.inline==null?i.inline=t.isInline:i.inline!=t.isInline&&i.err("Mixing inline and block content"),{type:"name",value:t}));return i.pos++,n.length==1?n[0]:{type:"choice",exprs:n}}}function Zj(i){let n=[[]];return r(o(i,0),t()),n;function t(){return n.push([])-1}function e(a,s,u){let c={term:u,to:s};return n[a].push(c),c}function r(a,s){a.forEach(u=>u.to=s)}function o(a,s){if(a.type=="choice")return a.exprs.reduce((u,c)=>u.concat(o(c,s)),[]);if(a.type=="seq")for(let u=0;;u++){let c=o(a.exprs[u],s);if(u==a.exprs.length-1)return c;r(c,s=t())}else if(a.type=="star"){let u=t();return e(s,u),r(o(a.expr,u),u),[e(u)]}else if(a.type=="plus"){let u=t();return r(o(a.expr,s),u),r(o(a.expr,u),u),[e(u)]}else{if(a.type=="opt")return[e(s)].concat(o(a.expr,s));if(a.type=="range"){let u=s;for(let c=0;c<a.min;c++){let h=t();r(o(a.expr,u),h),u=h}if(a.max==-1)r(o(a.expr,u),u);else for(let c=a.min;c<a.max;c++){let h=t();e(u,h),r(o(a.expr,u),h),u=h}return[e(u)]}else{if(a.type=="name")return[e(s,void 0,a.value)];throw new Error("Unknown expr type")}}}}function Vk(i,n){return n-i}function jT(i,n){let t=[];return e(n),t.sort(Vk);function e(r){let o=i[r];if(o.length==1&&!o[0].term)return e(o[0].to);t.push(r);for(let a=0;a<o.length;a++){let{term:s,to:u}=o[a];!s&&t.indexOf(u)==-1&&e(u)}}}function Qj(i){let n=Object.create(null);return t(jT(i,0));function t(e){let r=[];e.forEach(a=>{i[a].forEach(({term:s,to:u})=>{if(!s)return;let c;for(let h=0;h<r.length;h++)r[h][0]==s&&(c=r[h][1]);jT(i,u).forEach(h=>{c||r.push([s,c=[]]),c.indexOf(h)==-1&&c.push(h)})})});let o=n[e.join(",")]=new Lf(e.indexOf(i.length-1)>-1);for(let a=0;a<r.length;a++){let s=r[a][1].sort(Vk);o.next.push({type:r[a][0],next:n[s.join(",")]||t(s)})}return o}}function tI(i,n){for(let t=0,e=[i];t<e.length;t++){let r=e[t],o=!r.validEnd,a=[];for(let s=0;s<r.next.length;s++){let{type:u,next:c}=r.next[s];a.push(u.name),o&&!(u.isText||u.hasRequiredAttrs())&&(o=!1),e.indexOf(c)==-1&&e.push(c)}o&&n.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Fk(i){let n=Object.create(null);for(let t in i){let e=i[t];if(!e.hasDefault)return null;n[t]=e.default}return n}function Hk(i,n){let t=Object.create(null);for(let e in i){let r=n&&n[e];if(r===void 0){let o=i[e];if(o.hasDefault)r=o.default;else throw new RangeError("No value supplied for attribute "+e)}t[e]=r}return t}function zk(i,n,t,e){for(let r in n)if(!(r in i))throw new RangeError(`Unsupported attribute ${r} for ${t} of type ${r}`);for(let r in i){let o=i[r];o.validate&&o.validate(n[r])}}function Wk(i,n){let t=Object.create(null);if(n)for(let e in n)t[e]=new nI(i,e,n[e]);return t}let IT=class qk{constructor(n,t,e){this.name=n,this.schema=t,this.spec=e,this.markSet=null,this.groups=e.group?e.group.split(" "):[],this.attrs=Wk(n,e.attrs),this.defaultAttrs=Fk(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(e.inline||n=="text"),this.isText=n=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Lf.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(n){return this.groups.indexOf(n)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let n in this.attrs)if(this.attrs[n].isRequired)return!0;return!1}compatibleContent(n){return this==n||this.contentMatch.compatible(n.contentMatch)}computeAttrs(n){return!n&&this.defaultAttrs?this.defaultAttrs:Hk(this.attrs,n)}create(n=null,t,e){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new cc(this,this.computeAttrs(n),ge.from(t),rr.setFrom(e))}createChecked(n=null,t,e){return t=ge.from(t),this.checkContent(t),new cc(this,this.computeAttrs(n),t,rr.setFrom(e))}createAndFill(n=null,t,e){if(n=this.computeAttrs(n),t=ge.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let r=this.contentMatch.matchFragment(t),o=r&&r.fillBefore(ge.empty,!0);return o?new cc(this,n,t.append(o),rr.setFrom(e)):null}validContent(n){let t=this.contentMatch.matchFragment(n);if(!t||!t.validEnd)return!1;for(let e=0;e<n.childCount;e++)if(!this.allowsMarks(n.child(e).marks))return!1;return!0}checkContent(n){if(!this.validContent(n))throw new RangeError(`Invalid content for node ${this.name}: ${n.toString().slice(0,50)}`)}checkAttrs(n){zk(this.attrs,n,"node",this.name)}allowsMarkType(n){return this.markSet==null||this.markSet.indexOf(n)>-1}allowsMarks(n){if(this.markSet==null)return!0;for(let t=0;t<n.length;t++)if(!this.allowsMarkType(n[t].type))return!1;return!0}allowedMarks(n){if(this.markSet==null)return n;let t;for(let e=0;e<n.length;e++)this.allowsMarkType(n[e].type)?t&&t.push(n[e]):t||(t=n.slice(0,e));return t?t.length?t:rr.none:n}static compile(n,t){let e=Object.create(null);n.forEach((o,a)=>e[o]=new qk(o,t,a));let r=t.spec.topNode||"doc";if(!e[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!e.text)throw new RangeError("Every schema needs a 'text' type");for(let o in e.text.attrs)throw new RangeError("The text node type should not have attributes");return e}};function eI(i,n,t){let e=t.split("|");return r=>{let o=r===null?"null":typeof r;if(e.indexOf(o)<0)throw new RangeError(`Expected value of type ${e} for attribute ${n} on type ${i}, got ${o}`)}}class nI{constructor(n,t,e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default,this.validate=typeof e.validate=="string"?eI(n,t,e.validate):e.validate}get isRequired(){return!this.hasDefault}}class wb{constructor(n,t,e,r){this.name=n,this.rank=t,this.schema=e,this.spec=r,this.attrs=Wk(n,r.attrs),this.excluded=null;let o=Fk(this.attrs);this.instance=o?new rr(this,o):null}create(n=null){return!n&&this.instance?this.instance:new rr(this,Hk(this.attrs,n))}static compile(n,t){let e=Object.create(null),r=0;return n.forEach((o,a)=>e[o]=new wb(o,r++,t,a)),e}removeFromSet(n){for(var t=0;t<n.length;t++)n[t].type==this&&(n=n.slice(0,t).concat(n.slice(t+1)),t--);return n}isInSet(n){for(let t=0;t<n.length;t++)if(n[t].type==this)return n[t]}checkAttrs(n){zk(this.attrs,n,"mark",this.name)}excludes(n){return this.excluded.indexOf(n)>-1}}class Kk{constructor(n){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let r in n)t[r]=n[r];t.nodes=no.from(n.nodes),t.marks=no.from(n.marks||{}),this.nodes=IT.compile(this.spec.nodes,this),this.marks=wb.compile(this.spec.marks,this);let e=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let o=this.nodes[r],a=o.spec.content||"",s=o.spec.marks;if(o.contentMatch=e[a]||(e[a]=Lf.parse(a,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=s=="_"?null:s?BT(this,s.split(" ")):s==""||!o.inlineContent?[]:null}for(let r in this.marks){let o=this.marks[r],a=o.spec.excludes;o.excluded=a==null?[o]:a==""?[]:BT(this,a.split(" "))}this.nodeFromJSON=r=>cc.fromJSON(this,r),this.markFromJSON=r=>rr.fromJSON(this,r),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(n,t=null,e,r){if(typeof n=="string")n=this.nodeType(n);else if(n instanceof IT){if(n.schema!=this)throw new RangeError("Node type from different schema used ("+n.name+")")}else throw new RangeError("Invalid node type: "+n);return n.createChecked(t,e,r)}text(n,t){let e=this.nodes.text;return new Ty(e,e.defaultAttrs,n,rr.setFrom(t))}mark(n,t){return typeof n=="string"&&(n=this.marks[n]),n.create(t)}nodeType(n){let t=this.nodes[n];if(!t)throw new RangeError("Unknown node type: "+n);return t}}function BT(i,n){let t=[];for(let e=0;e<n.length;e++){let r=n[e],o=i.marks[r],a=o;if(o)t.push(o);else for(let s in i.marks){let u=i.marks[s];(r=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(r)>-1)&&t.push(a=u)}if(!a)throw new SyntaxError("Unknown mark type: '"+n[e]+"'")}return t}function rI(i){return i.tag!=null}function iI(i){return i.style!=null}let Nv=class vS{constructor(n,t){this.schema=n,this.rules=t,this.tags=[],this.styles=[];let e=this.matchedStyles=[];t.forEach(r=>{if(rI(r))this.tags.push(r);else if(iI(r)){let o=/[^=]*/.exec(r.style)[0];e.indexOf(o)<0&&e.push(o),this.styles.push(r)}}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let o=n.nodes[r.node];return o.contentMatch.matchType(o)})}parse(n,t={}){let e=new VT(this,t,!1);return e.addAll(n,rr.none,t.from,t.to),e.finish()}parseSlice(n,t={}){let e=new VT(this,t,!0);return e.addAll(n,rr.none,t.from,t.to),Ne.maxOpen(e.finish())}matchTag(n,t,e){for(let r=e?this.tags.indexOf(e)+1:0;r<this.tags.length;r++){let o=this.tags[r];if(sI(n,o.tag)&&(o.namespace===void 0||n.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let a=o.getAttrs(n);if(a===!1)continue;o.attrs=a||void 0}return o}}}matchStyle(n,t,e,r){for(let o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){let a=this.styles[o],s=a.style;if(!(s.indexOf(n)!=0||a.context&&!e.matchesContext(a.context)||s.length>n.length&&(s.charCodeAt(n.length)!=61||s.slice(n.length+1)!=t))){if(a.getAttrs){let u=a.getAttrs(t);if(u===!1)continue;a.attrs=u||void 0}return a}}}static schemaRules(n){let t=[];function e(r){let o=r.priority==null?50:r.priority,a=0;for(;a<t.length;a++){let s=t[a];if((s.priority==null?50:s.priority)<o)break}t.splice(a,0,r)}for(let r in n.marks){let o=n.marks[r].spec.parseDOM;o&&o.forEach(a=>{e(a=FT(a)),a.mark||a.ignore||a.clearMark||(a.mark=r)})}for(let r in n.nodes){let o=n.nodes[r].spec.parseDOM;o&&o.forEach(a=>{e(a=FT(a)),a.node||a.ignore||a.mark||(a.node=r)})}return t}static fromSchema(n){return n.cached.domParser||(n.cached.domParser=new vS(n,vS.schemaRules(n)))}};const $k={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},oI={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Gk={ol:!0,ul:!0},eg=1,gS=2,ay=4;function UT(i,n,t){return n!=null?(n?eg:0)|(n==="full"?gS:0):i&&i.whitespace=="pre"?eg|gS:t&-5}class jm{constructor(n,t,e,r,o,a){this.type=n,this.attrs=t,this.marks=e,this.solid=r,this.options=a,this.content=[],this.activeMarks=rr.none,this.match=o||(a&ay?null:n.contentMatch)}findWrapping(n){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(ge.from(n));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let e=this.type.contentMatch,r;return(r=e.findWrapping(n.type))?(this.match=e,r):null}}return this.match.findWrapping(n.type)}finish(n){if(!(this.options&eg)){let e=this.content[this.content.length-1],r;if(e&&e.isText&&(r=/[ \t\r\n\u000c]+$/.exec(e.text))){let o=e;e.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-r[0].length))}}let t=ge.from(this.content);return!n&&this.match&&(t=t.append(this.match.fillBefore(ge.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(n){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:n.parentNode&&!$k.hasOwnProperty(n.parentNode.nodeName.toLowerCase())}}class VT{constructor(n,t,e){this.parser=n,this.options=t,this.isOpen=e,this.open=0,this.localPreserveWS=!1;let r=t.topNode,o,a=UT(null,t.preserveWhitespace,0)|(e?ay:0);r?o=new jm(r.type,r.attrs,rr.none,!0,t.topMatch||r.type.contentMatch,a):e?o=new jm(null,null,rr.none,!0,null,a):o=new jm(n.schema.topNodeType,null,rr.none,!0,null,a),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(n,t){n.nodeType==3?this.addTextNode(n,t):n.nodeType==1&&this.addElement(n,t)}addTextNode(n,t){let e=n.nodeValue,r=this.top,o=r.options&gS?"full":this.localPreserveWS||(r.options&eg)>0,{schema:a}=this.parser;if(o==="full"||r.inlineContext(n)||/[^ \t\r\n\u000c]/.test(e)){if(o)if(o==="full")e=e.replace(/\r\n?/g,`
`);else if(a.linebreakReplacement&&/[\r\n]/.test(e)&&this.top.findWrapping(a.linebreakReplacement.create())){let s=e.split(/\r?\n|\r/);for(let u=0;u<s.length;u++)u&&this.insertNode(a.linebreakReplacement.create(),t,!0),s[u]&&this.insertNode(a.text(s[u]),t,!/\S/.test(s[u]));e=""}else e=e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){let s=r.content[r.content.length-1],u=n.previousSibling;(!s||u&&u.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(e=e.slice(1))}e&&this.insertNode(a.text(e),t,!/\S/.test(e)),this.findInText(n)}else this.findInside(n)}addElement(n,t,e){let r=this.localPreserveWS,o=this.top;(n.tagName=="PRE"||/pre/.test(n.style&&n.style.whiteSpace))&&(this.localPreserveWS=!0);let a=n.nodeName.toLowerCase(),s;Gk.hasOwnProperty(a)&&this.parser.normalizeLists&&aI(n);let u=this.options.ruleFromNode&&this.options.ruleFromNode(n)||(s=this.parser.matchTag(n,this,e));t:if(u?u.ignore:oI.hasOwnProperty(a))this.findInside(n),this.ignoreFallback(n,t);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(n=u.skip);let c,h=this.needsBlock;if($k.hasOwnProperty(a))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!n.firstChild){this.leafFallback(n,t);break t}let v=u&&u.skip?t:this.readStyles(n,t);v&&this.addAll(n,v),c&&this.sync(o),this.needsBlock=h}else{let c=this.readStyles(n,t);c&&this.addElementByRule(n,u,c,u.consuming===!1?s:void 0)}this.localPreserveWS=r}leafFallback(n,t){n.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(n.ownerDocument.createTextNode(`
`),t)}ignoreFallback(n,t){n.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(n,t){let e=n.style;if(e&&e.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let o=this.parser.matchedStyles[r],a=e.getPropertyValue(o);if(a)for(let s=void 0;;){let u=this.parser.matchStyle(o,a,this,s);if(!u)break;if(u.ignore)return null;if(u.clearMark?t=t.filter(c=>!u.clearMark(c)):t=t.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)s=u;else break}}return t}addElementByRule(n,t,e,r){let o,a;if(t.node)if(a=this.parser.schema.nodes[t.node],a.isLeaf)this.insertNode(a.create(t.attrs),e,n.nodeName=="BR")||this.leafFallback(n,e);else{let u=this.enter(a,t.attrs||null,e,t.preserveWhitespace);u&&(o=!0,e=u)}else{let u=this.parser.schema.marks[t.mark];e=e.concat(u.create(t.attrs))}let s=this.top;if(a&&a.isLeaf)this.findInside(n);else if(r)this.addElement(n,e,r);else if(t.getContent)this.findInside(n),t.getContent(n,this.parser.schema).forEach(u=>this.insertNode(u,e,!1));else{let u=n;typeof t.contentElement=="string"?u=n.querySelector(t.contentElement):typeof t.contentElement=="function"?u=t.contentElement(n):t.contentElement&&(u=t.contentElement),this.findAround(n,u,!0),this.addAll(u,e),this.findAround(n,u,!1)}o&&this.sync(s)&&this.open--}addAll(n,t,e,r){let o=e||0;for(let a=e?n.childNodes[e]:n.firstChild,s=r==null?null:n.childNodes[r];a!=s;a=a.nextSibling,++o)this.findAtPoint(n,o),this.addDOM(a,t);this.findAtPoint(n,o)}findPlace(n,t,e){let r,o;for(let a=this.open,s=0;a>=0;a--){let u=this.nodes[a],c=u.findWrapping(n);if(c&&(!r||r.length>c.length+s)&&(r=c,o=u,!c.length))break;if(u.solid){if(e)break;s+=2}}if(!r)return null;this.sync(o);for(let a=0;a<r.length;a++)t=this.enterInner(r[a],null,t,!1);return t}insertNode(n,t,e){if(n.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let r=this.findPlace(n,t,e);if(r){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(n.type));let a=rr.none;for(let s of r.concat(n.marks))(o.type?o.type.allowsMarkType(s.type):HT(s.type,n.type))&&(a=s.addToSet(a));return o.content.push(n.mark(a)),!0}return!1}enter(n,t,e,r){let o=this.findPlace(n.create(t),e,!1);return o&&(o=this.enterInner(n,t,e,!0,r)),o}enterInner(n,t,e,r=!1,o){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(n);let s=UT(n,o,a.options);a.options&ay&&a.content.length==0&&(s|=ay);let u=rr.none;return e=e.filter(c=>(a.type?a.type.allowsMarkType(c.type):HT(c.type,n))?(u=c.addToSet(u),!1):!0),this.nodes.push(new jm(n,t,u,r,null,s)),this.open++,e}closeExtra(n=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(n));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(n){for(let t=this.open;t>=0;t--){if(this.nodes[t]==n)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=eg)}return!1}get currentPos(){this.closeExtra();let n=0;for(let t=this.open;t>=0;t--){let e=this.nodes[t].content;for(let r=e.length-1;r>=0;r--)n+=e[r].nodeSize;t&&n++}return n}findAtPoint(n,t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==n&&this.find[e].offset==t&&(this.find[e].pos=this.currentPos)}findInside(n){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&n.nodeType==1&&n.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(n,t,e){if(n!=t&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&n.nodeType==1&&n.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(e?2:4)&&(this.find[r].pos=this.currentPos)}findInText(n){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==n&&(this.find[t].pos=this.currentPos-(n.nodeValue.length-this.find[t].offset))}matchesContext(n){if(n.indexOf("|")>-1)return n.split(/\s*\|\s*/).some(this.matchesContext,this);let t=n.split("/"),e=this.options.context,r=!this.isOpen&&(!e||e.parent.type==this.nodes[0].type),o=-(e?e.depth+1:0)+(r?0:1),a=(s,u)=>{for(;s>=0;s--){let c=t[s];if(c==""){if(s==t.length-1||s==0)continue;for(;u>=o;u--)if(a(s-1,u))return!0;return!1}else{let h=u>0||u==0&&r?this.nodes[u].type:e&&u>=o?e.node(u-o).type:null;if(!h||h.name!=c&&!h.isInGroup(c))return!1;u--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let n=this.options.context;if(n)for(let t=n.depth;t>=0;t--){let e=n.node(t).contentMatchAt(n.indexAfter(t)).defaultType;if(e&&e.isTextblock&&e.defaultAttrs)return e}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}}function aI(i){for(let n=i.firstChild,t=null;n;n=n.nextSibling){let e=n.nodeType==1?n.nodeName.toLowerCase():null;e&&Gk.hasOwnProperty(e)&&t?(t.appendChild(n),n=t):e=="li"?t=n:e&&(t=null)}}function sI(i,n){return(i.matches||i.msMatchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector).call(i,n)}function FT(i){let n={};for(let t in i)n[t]=i[t];return n}function HT(i,n){let t=n.schema.nodes;for(let e in t){let r=t[e];if(!r.allowsMarkType(i))continue;let o=[],a=s=>{o.push(s);for(let u=0;u<s.edgeCount;u++){let{type:c,next:h}=s.edge(u);if(c==n||o.indexOf(h)<0&&a(h))return!0}};if(a(r.contentMatch))return!0}}class Wf{constructor(n,t){this.nodes=n,this.marks=t}serializeFragment(n,t={},e){e||(e=Vw(t).createDocumentFragment());let r=e,o=[];return n.forEach(a=>{if(o.length||a.marks.length){let s=0,u=0;for(;s<o.length&&u<a.marks.length;){let c=a.marks[u];if(!this.marks[c.type.name]){u++;continue}if(!c.eq(o[s][0])||c.type.spec.spanning===!1)break;s++,u++}for(;s<o.length;)r=o.pop()[1];for(;u<a.marks.length;){let c=a.marks[u++],h=this.serializeMark(c,a.isInline,t);h&&(o.push([c,r]),r.appendChild(h.dom),r=h.contentDOM||h.dom)}}r.appendChild(this.serializeNodeInner(a,t))}),e}serializeNodeInner(n,t){let{dom:e,contentDOM:r}=sy(Vw(t),this.nodes[n.type.name](n),null,n.attrs);if(r){if(n.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(n.content,t,r)}return e}serializeNode(n,t={}){let e=this.serializeNodeInner(n,t);for(let r=n.marks.length-1;r>=0;r--){let o=this.serializeMark(n.marks[r],n.isInline,t);o&&((o.contentDOM||o.dom).appendChild(e),e=o.dom)}return e}serializeMark(n,t,e={}){let r=this.marks[n.type.name];return r&&sy(Vw(e),r(n,t),null,n.attrs)}static renderSpec(n,t,e=null,r){return sy(n,t,e,r)}static fromSchema(n){return n.cached.domSerializer||(n.cached.domSerializer=new Wf(this.nodesFromSchema(n),this.marksFromSchema(n)))}static nodesFromSchema(n){let t=zT(n.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(n){return zT(n.marks)}}function zT(i){let n={};for(let t in i){let e=i[t].spec.toDOM;e&&(n[t]=e)}return n}function Vw(i){return i.document||window.document}const WT=new WeakMap;function lI(i){let n=WT.get(i);return n===void 0&&WT.set(i,n=uI(i)),n}function uI(i){let n=null;function t(e){if(e&&typeof e=="object")if(Array.isArray(e))if(typeof e[0]=="string")n||(n=[]),n.push(e);else for(let r=0;r<e.length;r++)t(e[r]);else for(let r in e)t(e[r])}return t(i),n}function sy(i,n,t,e){if(typeof n=="string")return{dom:i.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let r=n[0],o;if(typeof r!="string")throw new RangeError("Invalid array passed to renderSpec");if(e&&(o=lI(e))&&o.indexOf(n)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=r.indexOf(" ");a>0&&(t=r.slice(0,a),r=r.slice(a+1));let s,u=t?i.createElementNS(t,r):i.createElement(r),c=n[1],h=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){h=2;for(let v in c)if(c[v]!=null){let m=v.indexOf(" ");m>0?u.setAttributeNS(v.slice(0,m),v.slice(m+1),c[v]):v=="style"&&u.style?u.style.cssText=c[v]:u.setAttribute(v,c[v])}}for(let v=h;v<n.length;v++){let m=n[v];if(m===0){if(v<n.length-1||v>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:y,contentDOM:_}=sy(i,m,t,e);if(u.appendChild(y),_){if(s)throw new RangeError("Multiple content holes");s=_}}}return{dom:u,contentDOM:s}}const Yk=65535,Xk=Math.pow(2,16);function cI(i,n){return i+n*Xk}function qT(i){return i&Yk}function fI(i){return(i-(i&Yk))/Xk}const Jk=1,Zk=2,ly=4,Qk=8;class mS{constructor(n,t,e){this.pos=n,this.delInfo=t,this.recover=e}get deleted(){return(this.delInfo&Qk)>0}get deletedBefore(){return(this.delInfo&(Jk|ly))>0}get deletedAfter(){return(this.delInfo&(Zk|ly))>0}get deletedAcross(){return(this.delInfo&ly)>0}}class Ma{constructor(n,t=!1){if(this.ranges=n,this.inverted=t,!n.length&&Ma.empty)return Ma.empty}recover(n){let t=0,e=qT(n);if(!this.inverted)for(let r=0;r<e;r++)t+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[e*3]+t+fI(n)}mapResult(n,t=1){return this._map(n,t,!1)}map(n,t=1){return this._map(n,t,!0)}_map(n,t,e){let r=0,o=this.inverted?2:1,a=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let u=this.ranges[s]-(this.inverted?r:0);if(u>n)break;let c=this.ranges[s+o],h=this.ranges[s+a],v=u+c;if(n<=v){let m=c?n==u?-1:n==v?1:t:t,y=u+r+(m<0?0:h);if(e)return y;let _=n==(t<0?u:v)?null:cI(s/3,n-u),C=n==u?Zk:n==v?Jk:ly;return(t<0?n!=u:n!=v)&&(C|=Qk),new mS(y,C,_)}r+=h-c}return e?n+r:new mS(n+r,0,null)}touches(n,t){let e=0,r=qT(t),o=this.inverted?2:1,a=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let u=this.ranges[s]-(this.inverted?e:0);if(u>n)break;let c=this.ranges[s+o],h=u+c;if(n<=h&&s==r*3)return!0;e+=this.ranges[s+a]-c}return!1}forEach(n){let t=this.inverted?2:1,e=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let a=this.ranges[r],s=a-(this.inverted?o:0),u=a+(this.inverted?0:o),c=this.ranges[r+t],h=this.ranges[r+e];n(s,s+c,u,u+h),o+=h-c}}invert(){return new Ma(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(n){return n==0?Ma.empty:new Ma(n<0?[0,-n,0]:[0,0,n])}}Ma.empty=new Ma([]);class ng{constructor(n,t,e=0,r=n?n.length:0){this.mirror=t,this.from=e,this.to=r,this._maps=n||[],this.ownData=!(n||t)}get maps(){return this._maps}slice(n=0,t=this.maps.length){return new ng(this._maps,this.mirror,n,t)}appendMap(n,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(n),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(n){for(let t=0,e=this._maps.length;t<n._maps.length;t++){let r=n.getMirror(t);this.appendMap(n._maps[t],r!=null&&r<t?e+r:void 0)}}getMirror(n){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==n)return this.mirror[t+(t%2?-1:1)]}}setMirror(n,t){this.mirror||(this.mirror=[]),this.mirror.push(n,t)}appendMappingInverted(n){for(let t=n.maps.length-1,e=this._maps.length+n._maps.length;t>=0;t--){let r=n.getMirror(t);this.appendMap(n._maps[t].invert(),r!=null&&r>t?e-r-1:void 0)}}invert(){let n=new ng;return n.appendMappingInverted(this),n}map(n,t=1){if(this.mirror)return this._map(n,t,!0);for(let e=this.from;e<this.to;e++)n=this._maps[e].map(n,t);return n}mapResult(n,t=1){return this._map(n,t,!1)}_map(n,t,e){let r=0;for(let o=this.from;o<this.to;o++){let a=this._maps[o],s=a.mapResult(n,t);if(s.recover!=null){let u=this.getMirror(o);if(u!=null&&u>o&&u<this.to){o=u,n=this._maps[u].recover(s.recover);continue}}r|=s.delInfo,n=s.pos}return e?n:new mS(n,r,null)}}const Fw=Object.create(null);class po{getMap(){return Ma.empty}merge(n){return null}static fromJSON(n,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let e=Fw[t.stepType];if(!e)throw new RangeError(`No step type ${t.stepType} defined`);return e.fromJSON(n,t)}static jsonID(n,t){if(n in Fw)throw new RangeError("Duplicate use of step JSON ID "+n);return Fw[n]=t,t.prototype.jsonID=n,t}}class ci{constructor(n,t){this.doc=n,this.failed=t}static ok(n){return new ci(n,null)}static fail(n){return new ci(null,n)}static fromReplace(n,t,e,r){try{return ci.ok(n.replace(t,e,r))}catch(o){if(o instanceof Sy)return ci.fail(o.message);throw o}}}function K_(i,n,t){let e=[];for(let r=0;r<i.childCount;r++){let o=i.child(r);o.content.size&&(o=o.copy(K_(o.content,n,o))),o.isInline&&(o=n(o,t,r)),e.push(o)}return ge.fromArray(e)}class ac extends po{constructor(n,t,e){super(),this.from=n,this.to=t,this.mark=e}apply(n){let t=n.slice(this.from,this.to),e=n.resolve(this.from),r=e.node(e.sharedDepth(this.to)),o=new Ne(K_(t.content,(a,s)=>!a.isAtom||!s.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),r),t.openStart,t.openEnd);return ci.fromReplace(n,this.from,this.to,o)}invert(){return new As(this.from,this.to,this.mark)}map(n){let t=n.mapResult(this.from,1),e=n.mapResult(this.to,-1);return t.deleted&&e.deleted||t.pos>=e.pos?null:new ac(t.pos,e.pos,this.mark)}merge(n){return n instanceof ac&&n.mark.eq(this.mark)&&this.from<=n.to&&this.to>=n.from?new ac(Math.min(this.from,n.from),Math.max(this.to,n.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(n,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ac(t.from,t.to,n.markFromJSON(t.mark))}}po.jsonID("addMark",ac);class As extends po{constructor(n,t,e){super(),this.from=n,this.to=t,this.mark=e}apply(n){let t=n.slice(this.from,this.to),e=new Ne(K_(t.content,r=>r.mark(this.mark.removeFromSet(r.marks)),n),t.openStart,t.openEnd);return ci.fromReplace(n,this.from,this.to,e)}invert(){return new ac(this.from,this.to,this.mark)}map(n){let t=n.mapResult(this.from,1),e=n.mapResult(this.to,-1);return t.deleted&&e.deleted||t.pos>=e.pos?null:new As(t.pos,e.pos,this.mark)}merge(n){return n instanceof As&&n.mark.eq(this.mark)&&this.from<=n.to&&this.to>=n.from?new As(Math.min(this.from,n.from),Math.max(this.to,n.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(n,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new As(t.from,t.to,n.markFromJSON(t.mark))}}po.jsonID("removeMark",As);class sc extends po{constructor(n,t){super(),this.pos=n,this.mark=t}apply(n){let t=n.nodeAt(this.pos);if(!t)return ci.fail("No node at mark step's position");let e=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return ci.fromReplace(n,this.pos,this.pos+1,new Ne(ge.from(e),0,t.isLeaf?0:1))}invert(n){let t=n.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let r=0;r<t.marks.length;r++)if(!t.marks[r].isInSet(e))return new sc(this.pos,t.marks[r]);return new sc(this.pos,this.mark)}}return new jf(this.pos,this.mark)}map(n){let t=n.mapResult(this.pos,1);return t.deletedAfter?null:new sc(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(n,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new sc(t.pos,n.markFromJSON(t.mark))}}po.jsonID("addNodeMark",sc);class jf extends po{constructor(n,t){super(),this.pos=n,this.mark=t}apply(n){let t=n.nodeAt(this.pos);if(!t)return ci.fail("No node at mark step's position");let e=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return ci.fromReplace(n,this.pos,this.pos+1,new Ne(ge.from(e),0,t.isLeaf?0:1))}invert(n){let t=n.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new sc(this.pos,this.mark)}map(n){let t=n.mapResult(this.pos,1);return t.deletedAfter?null:new jf(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(n,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new jf(t.pos,n.markFromJSON(t.mark))}}po.jsonID("removeNodeMark",jf);class Ui extends po{constructor(n,t,e,r=!1){super(),this.from=n,this.to=t,this.slice=e,this.structure=r}apply(n){return this.structure&&yS(n,this.from,this.to)?ci.fail("Structure replace would overwrite content"):ci.fromReplace(n,this.from,this.to,this.slice)}getMap(){return new Ma([this.from,this.to-this.from,this.slice.size])}invert(n){return new Ui(this.from,this.from+this.slice.size,n.slice(this.from,this.to))}map(n){let t=n.mapResult(this.from,1),e=n.mapResult(this.to,-1);return t.deletedAcross&&e.deletedAcross?null:new Ui(t.pos,Math.max(t.pos,e.pos),this.slice,this.structure)}merge(n){if(!(n instanceof Ui)||n.structure||this.structure)return null;if(this.from+this.slice.size==n.from&&!this.slice.openEnd&&!n.slice.openStart){let t=this.slice.size+n.slice.size==0?Ne.empty:new Ne(this.slice.content.append(n.slice.content),this.slice.openStart,n.slice.openEnd);return new Ui(this.from,this.to+(n.to-n.from),t,this.structure)}else if(n.to==this.from&&!this.slice.openStart&&!n.slice.openEnd){let t=this.slice.size+n.slice.size==0?Ne.empty:new Ne(n.slice.content.append(this.slice.content),n.slice.openStart,this.slice.openEnd);return new Ui(n.from,this.to,t,this.structure)}else return null}toJSON(){let n={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(n.slice=this.slice.toJSON()),this.structure&&(n.structure=!0),n}static fromJSON(n,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ui(t.from,t.to,Ne.fromJSON(n,t.slice),!!t.structure)}}po.jsonID("replace",Ui);class Vi extends po{constructor(n,t,e,r,o,a,s=!1){super(),this.from=n,this.to=t,this.gapFrom=e,this.gapTo=r,this.slice=o,this.insert=a,this.structure=s}apply(n){if(this.structure&&(yS(n,this.from,this.gapFrom)||yS(n,this.gapTo,this.to)))return ci.fail("Structure gap-replace would overwrite content");let t=n.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return ci.fail("Gap is not a flat range");let e=this.slice.insertAt(this.insert,t.content);return e?ci.fromReplace(n,this.from,this.to,e):ci.fail("Content does not fit in gap")}getMap(){return new Ma([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(n){let t=this.gapTo-this.gapFrom;return new Vi(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,n.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(n){let t=n.mapResult(this.from,1),e=n.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:n.map(this.gapFrom,-1),o=this.to==this.gapTo?e.pos:n.map(this.gapTo,1);return t.deletedAcross&&e.deletedAcross||r<t.pos||o>e.pos?null:new Vi(t.pos,e.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let n={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(n.slice=this.slice.toJSON()),this.structure&&(n.structure=!0),n}static fromJSON(n,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Vi(t.from,t.to,t.gapFrom,t.gapTo,Ne.fromJSON(n,t.slice),t.insert,!!t.structure)}}po.jsonID("replaceAround",Vi);function yS(i,n,t){let e=i.resolve(n),r=t-n,o=e.depth;for(;r>0&&o>0&&e.indexAfter(o)==e.node(o).childCount;)o--,r--;if(r>0){let a=e.node(o).maybeChild(e.indexAfter(o));for(;r>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,r--}}return!1}function dI(i,n,t,e){let r=[],o=[],a,s;i.doc.nodesBetween(n,t,(u,c,h)=>{if(!u.isInline)return;let v=u.marks;if(!e.isInSet(v)&&h.type.allowsMarkType(e.type)){let m=Math.max(c,n),y=Math.min(c+u.nodeSize,t),_=e.addToSet(v);for(let C=0;C<v.length;C++)v[C].isInSet(_)||(a&&a.to==m&&a.mark.eq(v[C])?a.to=y:r.push(a=new As(m,y,v[C])));s&&s.to==m?s.to=y:o.push(s=new ac(m,y,e))}}),r.forEach(u=>i.step(u)),o.forEach(u=>i.step(u))}function hI(i,n,t,e){let r=[],o=0;i.doc.nodesBetween(n,t,(a,s)=>{if(!a.isInline)return;o++;let u=null;if(e instanceof wb){let c=a.marks,h;for(;h=e.isInSet(c);)(u||(u=[])).push(h),c=h.removeFromSet(c)}else e?e.isInSet(a.marks)&&(u=[e]):u=a.marks;if(u&&u.length){let c=Math.min(s+a.nodeSize,t);for(let h=0;h<u.length;h++){let v=u[h],m;for(let y=0;y<r.length;y++){let _=r[y];_.step==o-1&&v.eq(r[y].style)&&(m=_)}m?(m.to=c,m.step=o):r.push({style:v,from:Math.max(s,n),to:c,step:o})}}}),r.forEach(a=>i.step(new As(a.from,a.to,a.style)))}function $_(i,n,t,e=t.contentMatch,r=!0){let o=i.doc.nodeAt(n),a=[],s=n+1;for(let u=0;u<o.childCount;u++){let c=o.child(u),h=s+c.nodeSize,v=e.matchType(c.type);if(!v)a.push(new Ui(s,h,Ne.empty));else{e=v;for(let m=0;m<c.marks.length;m++)t.allowsMarkType(c.marks[m].type)||i.step(new As(s,h,c.marks[m]));if(r&&c.isText&&t.whitespace!="pre"){let m,y=/\r?\n|\r/g,_;for(;m=y.exec(c.text);)_||(_=new Ne(ge.from(t.schema.text(" ",t.allowedMarks(c.marks))),0,0)),a.push(new Ui(s+m.index,s+m.index+m[0].length,_))}}s=h}if(!e.validEnd){let u=e.fillBefore(ge.empty,!0);i.replace(s,s,new Ne(u,0,0))}for(let u=a.length-1;u>=0;u--)i.step(a[u])}function pI(i,n,t){return(n==0||i.canReplace(n,i.childCount))&&(t==i.childCount||i.canReplace(0,t))}function Gh(i){let t=i.parent.content.cutByIndex(i.startIndex,i.endIndex);for(let e=i.depth,r=0,o=0;;--e){let a=i.$from.node(e),s=i.$from.index(e)+r,u=i.$to.indexAfter(e)-o;if(e<i.depth&&a.canReplace(s,u,t))return e;if(e==0||a.type.spec.isolating||!pI(a,s,u))break;s&&(r=1),u<a.childCount&&(o=1)}return null}function vI(i,n,t){let{$from:e,$to:r,depth:o}=n,a=e.before(o+1),s=r.after(o+1),u=a,c=s,h=ge.empty,v=0;for(let _=o,C=!1;_>t;_--)C||e.index(_)>0?(C=!0,h=ge.from(e.node(_).copy(h)),v++):u--;let m=ge.empty,y=0;for(let _=o,C=!1;_>t;_--)C||r.after(_+1)<r.end(_)?(C=!0,m=ge.from(r.node(_).copy(m)),y++):c++;i.step(new Vi(u,c,a,s,new Ne(h.append(m),v,y),h.size-v,!0))}function G_(i,n,t=null,e=i){let r=gI(i,n),o=r&&mI(e,n);return o?r.map(KT).concat({type:n,attrs:t}).concat(o.map(KT)):null}function KT(i){return{type:i,attrs:null}}function gI(i,n){let{parent:t,startIndex:e,endIndex:r}=i,o=t.contentMatchAt(e).findWrapping(n);if(!o)return null;let a=o.length?o[0]:n;return t.canReplaceWith(e,r,a)?o:null}function mI(i,n){let{parent:t,startIndex:e,endIndex:r}=i,o=t.child(e),a=n.contentMatch.findWrapping(o.type);if(!a)return null;let u=(a.length?a[a.length-1]:n).contentMatch;for(let c=e;u&&c<r;c++)u=u.matchType(t.child(c).type);return!u||!u.validEnd?null:a}function yI(i,n,t){let e=ge.empty;for(let a=t.length-1;a>=0;a--){if(e.size){let s=t[a].type.contentMatch.matchFragment(e);if(!s||!s.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}e=ge.from(t[a].type.create(t[a].attrs,e))}let r=n.start,o=n.end;i.step(new Vi(r,o,r,o,new Ne(e,0,0),t.length,!0))}function bI(i,n,t,e,r){if(!e.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=i.steps.length;i.doc.nodesBetween(n,t,(a,s)=>{let u=typeof r=="function"?r(a):r;if(a.isTextblock&&!a.hasMarkup(e,u)&&wI(i.doc,i.mapping.slice(o).map(s),e)){let c=null;if(e.schema.linebreakReplacement){let y=e.whitespace=="pre",_=!!e.contentMatch.matchType(e.schema.linebreakReplacement);y&&!_?c=!1:!y&&_&&(c=!0)}c===!1&&eM(i,a,s,o),$_(i,i.mapping.slice(o).map(s,1),e,void 0,c===null);let h=i.mapping.slice(o),v=h.map(s,1),m=h.map(s+a.nodeSize,1);return i.step(new Vi(v,m,v+1,m-1,new Ne(ge.from(e.create(u,null,a.marks)),0,0),1,!0)),c===!0&&tM(i,a,s,o),!1}})}function tM(i,n,t,e){n.forEach((r,o)=>{if(r.isText){let a,s=/\r?\n|\r/g;for(;a=s.exec(r.text);){let u=i.mapping.slice(e).map(t+1+o+a.index);i.replaceWith(u,u+1,n.type.schema.linebreakReplacement.create())}}})}function eM(i,n,t,e){n.forEach((r,o)=>{if(r.type==r.type.schema.linebreakReplacement){let a=i.mapping.slice(e).map(t+1+o);i.replaceWith(a,a+1,n.type.schema.text(`
`))}})}function wI(i,n,t){let e=i.resolve(n),r=e.index();return e.parent.canReplaceWith(r,r+1,t)}function xI(i,n,t,e,r){let o=i.doc.nodeAt(n);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let a=t.create(e,null,r||o.marks);if(o.isLeaf)return i.replaceWith(n,n+o.nodeSize,a);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);i.step(new Vi(n,n+o.nodeSize,n+1,n+o.nodeSize-1,new Ne(ge.from(a),0,0),1,!0))}function tu(i,n,t=1,e){let r=i.resolve(n),o=r.depth-t,a=e&&e[e.length-1]||r.parent;if(o<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!a.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let c=r.depth-1,h=t-2;c>o;c--,h--){let v=r.node(c),m=r.index(c);if(v.type.spec.isolating)return!1;let y=v.content.cutByIndex(m,v.childCount),_=e&&e[h+1];_&&(y=y.replaceChild(0,_.type.create(_.attrs)));let C=e&&e[h]||v;if(!v.canReplace(m+1,v.childCount)||!C.type.validContent(y))return!1}let s=r.indexAfter(o),u=e&&e[0];return r.node(o).canReplaceWith(s,s,u?u.type:r.node(o+1).type)}function SI(i,n,t=1,e){let r=i.doc.resolve(n),o=ge.empty,a=ge.empty;for(let s=r.depth,u=r.depth-t,c=t-1;s>u;s--,c--){o=ge.from(r.node(s).copy(o));let h=e&&e[c];a=ge.from(h?h.type.create(h.attrs,a):r.node(s).copy(a))}i.step(new Ui(n,n,new Ne(o.append(a),t,t),!0))}function wc(i,n){let t=i.resolve(n),e=t.index();return nM(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(e,e+1)}function _I(i,n){n.content.size||i.type.compatibleContent(n.type);let t=i.contentMatchAt(i.childCount),{linebreakReplacement:e}=i.type.schema;for(let r=0;r<n.childCount;r++){let o=n.child(r),a=o.type==e?i.type.schema.nodes.text:o.type;if(t=t.matchType(a),!t||!i.type.allowsMarks(o.marks))return!1}return t.validEnd}function nM(i,n){return!!(i&&n&&!i.isLeaf&&_I(i,n))}function xb(i,n,t=-1){let e=i.resolve(n);for(let r=e.depth;;r--){let o,a,s=e.index(r);if(r==e.depth?(o=e.nodeBefore,a=e.nodeAfter):t>0?(o=e.node(r+1),s++,a=e.node(r).maybeChild(s)):(o=e.node(r).maybeChild(s-1),a=e.node(r+1)),o&&!o.isTextblock&&nM(o,a)&&e.node(r).canReplace(s,s+1))return n;if(r==0)break;n=t<0?e.before(r):e.after(r)}}function CI(i,n,t){let e=null,{linebreakReplacement:r}=i.doc.type.schema,o=i.doc.resolve(n-t),a=o.node().type;if(r&&a.inlineContent){let h=a.whitespace=="pre",v=!!a.contentMatch.matchType(r);h&&!v?e=!1:!h&&v&&(e=!0)}let s=i.steps.length;if(e===!1){let h=i.doc.resolve(n+t);eM(i,h.node(),h.before(),s)}a.inlineContent&&$_(i,n+t-1,a,o.node().contentMatchAt(o.index()),e==null);let u=i.mapping.slice(s),c=u.map(n-t);if(i.step(new Ui(c,u.map(n+t,-1),Ne.empty,!0)),e===!0){let h=i.doc.resolve(c);tM(i,h.node(),h.before(),i.steps.length)}return i}function TI(i,n,t){let e=i.resolve(n);if(e.parent.canReplaceWith(e.index(),e.index(),t))return n;if(e.parentOffset==0)for(let r=e.depth-1;r>=0;r--){let o=e.index(r);if(e.node(r).canReplaceWith(o,o,t))return e.before(r+1);if(o>0)return null}if(e.parentOffset==e.parent.content.size)for(let r=e.depth-1;r>=0;r--){let o=e.indexAfter(r);if(e.node(r).canReplaceWith(o,o,t))return e.after(r+1);if(o<e.node(r).childCount)return null}return null}function rM(i,n,t){let e=i.resolve(n);if(!t.content.size)return n;let r=t.content;for(let o=0;o<t.openStart;o++)r=r.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let a=e.depth;a>=0;a--){let s=a==e.depth?0:e.pos<=(e.start(a+1)+e.end(a+1))/2?-1:1,u=e.index(a)+(s>0?1:0),c=e.node(a),h=!1;if(o==1)h=c.canReplace(u,u,r);else{let v=c.contentMatchAt(u).findWrapping(r.firstChild.type);h=v&&c.canReplaceWith(u,u,v[0])}if(h)return s==0?e.pos:s<0?e.before(a+1):e.after(a+1)}return null}function Sb(i,n,t=n,e=Ne.empty){if(n==t&&!e.size)return null;let r=i.resolve(n),o=i.resolve(t);return iM(r,o,e)?new Ui(n,t,e):new EI(r,o,e).fit()}function iM(i,n,t){return!t.openStart&&!t.openEnd&&i.start()==n.start()&&i.parent.canReplace(i.index(),n.index(),t.content)}class EI{constructor(n,t,e){this.$from=n,this.$to=t,this.unplaced=e,this.frontier=[],this.placed=ge.empty;for(let r=0;r<=n.depth;r++){let o=n.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(n.indexAfter(r))})}for(let r=n.depth;r>0;r--)this.placed=ge.from(n.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let n=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,e=this.$from,r=this.close(n<0?this.$to:e.doc.resolve(n));if(!r)return null;let o=this.placed,a=e.depth,s=r.depth;for(;a&&s&&o.childCount==1;)o=o.firstChild.content,a--,s--;let u=new Ne(o,a,s);return n>-1?new Vi(e.pos,n,this.$to.pos,this.$to.end(),u,t):u.size||e.pos!=this.$to.pos?new Ui(e.pos,r.pos,u):null}findFittable(){let n=this.unplaced.openStart;for(let t=this.unplaced.content,e=0,r=this.unplaced.openEnd;e<n;e++){let o=t.firstChild;if(t.childCount>1&&(r=0),o.type.spec.isolating&&r<=e){n=e;break}t=o.content}for(let t=1;t<=2;t++)for(let e=t==1?n:this.unplaced.openStart;e>=0;e--){let r,o=null;e?(o=Hw(this.unplaced.content,e-1).firstChild,r=o.content):r=this.unplaced.content;let a=r.firstChild;for(let s=this.depth;s>=0;s--){let{type:u,match:c}=this.frontier[s],h,v=null;if(t==1&&(a?c.matchType(a.type)||(v=c.fillBefore(ge.from(a),!1)):o&&u.compatibleContent(o.type)))return{sliceDepth:e,frontierDepth:s,parent:o,inject:v};if(t==2&&a&&(h=c.findWrapping(a.type)))return{sliceDepth:e,frontierDepth:s,parent:o,wrap:h};if(o&&c.matchType(o.type))break}}}openMore(){let{content:n,openStart:t,openEnd:e}=this.unplaced,r=Hw(n,t);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new Ne(n,t+1,Math.max(e,r.size+t>=n.size-e?t+1:0)),!0)}dropNode(){let{content:n,openStart:t,openEnd:e}=this.unplaced,r=Hw(n,t);if(r.childCount<=1&&t>0){let o=n.size-t<=t+r.size;this.unplaced=new Ne(Sv(n,t-1,1),t-1,o?t-1:e)}else this.unplaced=new Ne(Sv(n,t,1),t,e)}placeNodes({sliceDepth:n,frontierDepth:t,parent:e,inject:r,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let C=0;C<o.length;C++)this.openFrontierNode(o[C]);let a=this.unplaced,s=e?e.content:a.content,u=a.openStart-n,c=0,h=[],{match:v,type:m}=this.frontier[t];if(r){for(let C=0;C<r.childCount;C++)h.push(r.child(C));v=v.matchFragment(r)}let y=s.size+n-(a.content.size-a.openEnd);for(;c<s.childCount;){let C=s.child(c),E=v.matchType(C.type);if(!E)break;c++,(c>1||u==0||C.content.size)&&(v=E,h.push(oM(C.mark(m.allowedMarks(C.marks)),c==1?u:0,c==s.childCount?y:-1)))}let _=c==s.childCount;_||(y=-1),this.placed=_v(this.placed,t,ge.from(h)),this.frontier[t].match=v,_&&y<0&&e&&e.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let C=0,E=s;C<y;C++){let D=E.lastChild;this.frontier.push({type:D.type,match:D.contentMatchAt(D.childCount)}),E=D.content}this.unplaced=_?n==0?Ne.empty:new Ne(Sv(a.content,n-1,1),n-1,y<0?a.openEnd:n-1):new Ne(Sv(a.content,n,c),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let n=this.frontier[this.depth],t;if(!n.type.isTextblock||!zw(this.$to,this.$to.depth,n.type,n.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:e}=this.$to,r=this.$to.after(e);for(;e>1&&r==this.$to.end(--e);)++r;return r}findCloseLevel(n){t:for(let t=Math.min(this.depth,n.depth);t>=0;t--){let{match:e,type:r}=this.frontier[t],o=t<n.depth&&n.end(t+1)==n.pos+(n.depth-(t+1)),a=zw(n,t,r,e,o);if(a){for(let s=t-1;s>=0;s--){let{match:u,type:c}=this.frontier[s],h=zw(n,s,c,u,!0);if(!h||h.childCount)continue t}return{depth:t,fit:a,move:o?n.doc.resolve(n.after(t+1)):n}}}}close(n){let t=this.findCloseLevel(n);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=_v(this.placed,t.depth,t.fit)),n=t.move;for(let e=t.depth+1;e<=n.depth;e++){let r=n.node(e),o=r.type.contentMatch.fillBefore(r.content,!0,n.index(e));this.openFrontierNode(r.type,r.attrs,o)}return n}openFrontierNode(n,t=null,e){let r=this.frontier[this.depth];r.match=r.match.matchType(n),this.placed=_v(this.placed,this.depth,ge.from(n.create(t,e))),this.frontier.push({type:n,match:n.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(ge.empty,!0);t.childCount&&(this.placed=_v(this.placed,this.frontier.length,t))}}function Sv(i,n,t){return n==0?i.cutByIndex(t,i.childCount):i.replaceChild(0,i.firstChild.copy(Sv(i.firstChild.content,n-1,t)))}function _v(i,n,t){return n==0?i.append(t):i.replaceChild(i.childCount-1,i.lastChild.copy(_v(i.lastChild.content,n-1,t)))}function Hw(i,n){for(let t=0;t<n;t++)i=i.firstChild.content;return i}function oM(i,n,t){if(n<=0)return i;let e=i.content;return n>1&&(e=e.replaceChild(0,oM(e.firstChild,n-1,e.childCount==1?t-1:0))),n>0&&(e=i.type.contentMatch.fillBefore(e).append(e),t<=0&&(e=e.append(i.type.contentMatch.matchFragment(e).fillBefore(ge.empty,!0)))),i.copy(e)}function zw(i,n,t,e,r){let o=i.node(n),a=r?i.indexAfter(n):i.index(n);if(a==o.childCount&&!t.compatibleContent(o.type))return null;let s=e.fillBefore(o.content,!0,a);return s&&!OI(t,o.content,a)?s:null}function OI(i,n,t){for(let e=t;e<n.childCount;e++)if(!i.allowsMarks(n.child(e).marks))return!0;return!1}function AI(i){return i.spec.defining||i.spec.definingForContent}function kI(i,n,t,e){if(!e.size)return i.deleteRange(n,t);let r=i.doc.resolve(n),o=i.doc.resolve(t);if(iM(r,o,e))return i.step(new Ui(n,t,e));let a=sM(r,o);a[a.length-1]==0&&a.pop();let s=-(r.depth+1);a.unshift(s);for(let m=r.depth,y=r.pos-1;m>0;m--,y--){let _=r.node(m).type.spec;if(_.defining||_.definingAsContext||_.isolating)break;a.indexOf(m)>-1?s=m:r.before(m)==y&&a.splice(1,0,-m)}let u=a.indexOf(s),c=[],h=e.openStart;for(let m=e.content,y=0;;y++){let _=m.firstChild;if(c.push(_),y==e.openStart)break;m=_.content}for(let m=h-1;m>=0;m--){let y=c[m],_=AI(y.type);if(_&&!y.sameMarkup(r.node(Math.abs(s)-1)))h=m;else if(_||!y.type.isTextblock)break}for(let m=e.openStart;m>=0;m--){let y=(m+h+1)%(e.openStart+1),_=c[y];if(_)for(let C=0;C<a.length;C++){let E=a[(C+u)%a.length],D=!0;E<0&&(D=!1,E=-E);let F=r.node(E-1),V=r.index(E-1);if(F.canReplaceWith(V,V,_.type,_.marks))return i.replace(r.before(E),D?o.after(E):t,new Ne(aM(e.content,0,e.openStart,y),y,e.openEnd))}}let v=i.steps.length;for(let m=a.length-1;m>=0&&(i.replace(n,t,e),!(i.steps.length>v));m--){let y=a[m];y<0||(n=r.before(y),t=o.after(y))}}function aM(i,n,t,e,r){if(n<t){let o=i.firstChild;i=i.replaceChild(0,o.copy(aM(o.content,n+1,t,e,o)))}if(n>e){let o=r.contentMatchAt(0),a=o.fillBefore(i).append(i);i=a.append(o.matchFragment(a).fillBefore(ge.empty,!0))}return i}function MI(i,n,t,e){if(!e.isInline&&n==t&&i.doc.resolve(n).parent.content.size){let r=TI(i.doc,n,e.type);r!=null&&(n=t=r)}i.replaceRange(n,t,new Ne(ge.from(e),0,0))}function DI(i,n,t){let e=i.doc.resolve(n),r=i.doc.resolve(t),o=sM(e,r);for(let a=0;a<o.length;a++){let s=o[a],u=a==o.length-1;if(u&&s==0||e.node(s).type.contentMatch.validEnd)return i.delete(e.start(s),r.end(s));if(s>0&&(u||e.node(s-1).canReplace(e.index(s-1),r.indexAfter(s-1))))return i.delete(e.before(s),r.after(s))}for(let a=1;a<=e.depth&&a<=r.depth;a++)if(n-e.start(a)==e.depth-a&&t>e.end(a)&&r.end(a)-t!=r.depth-a&&e.start(a-1)==r.start(a-1)&&e.node(a-1).canReplace(e.index(a-1),r.index(a-1)))return i.delete(e.before(a),t);i.delete(n,t)}function sM(i,n){let t=[],e=Math.min(i.depth,n.depth);for(let r=e;r>=0;r--){let o=i.start(r);if(o<i.pos-(i.depth-r)||n.end(r)>n.pos+(n.depth-r)||i.node(r).type.spec.isolating||n.node(r).type.spec.isolating)break;(o==n.start(r)||r==i.depth&&r==n.depth&&i.parent.inlineContent&&n.parent.inlineContent&&r&&n.start(r-1)==o-1)&&t.push(r)}return t}class Ah extends po{constructor(n,t,e){super(),this.pos=n,this.attr=t,this.value=e}apply(n){let t=n.nodeAt(this.pos);if(!t)return ci.fail("No node at attribute step's position");let e=Object.create(null);for(let o in t.attrs)e[o]=t.attrs[o];e[this.attr]=this.value;let r=t.type.create(e,null,t.marks);return ci.fromReplace(n,this.pos,this.pos+1,new Ne(ge.from(r),0,t.isLeaf?0:1))}getMap(){return Ma.empty}invert(n){return new Ah(this.pos,this.attr,n.nodeAt(this.pos).attrs[this.attr])}map(n){let t=n.mapResult(this.pos,1);return t.deletedAfter?null:new Ah(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(n,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ah(t.pos,t.attr,t.value)}}po.jsonID("attr",Ah);class rg extends po{constructor(n,t){super(),this.attr=n,this.value=t}apply(n){let t=Object.create(null);for(let r in n.attrs)t[r]=n.attrs[r];t[this.attr]=this.value;let e=n.type.create(t,n.content,n.marks);return ci.ok(e)}getMap(){return Ma.empty}invert(n){return new rg(this.attr,n.attrs[this.attr])}map(n){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(n,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new rg(t.attr,t.value)}}po.jsonID("docAttr",rg);let Ph=class extends Error{};Ph=function i(n){let t=Error.call(this,n);return t.__proto__=i.prototype,t};Ph.prototype=Object.create(Error.prototype);Ph.prototype.constructor=Ph;Ph.prototype.name="TransformError";class lM{constructor(n){this.doc=n,this.steps=[],this.docs=[],this.mapping=new ng}get before(){return this.docs.length?this.docs[0]:this.doc}step(n){let t=this.maybeStep(n);if(t.failed)throw new Ph(t.failed);return this}maybeStep(n){let t=n.apply(this.doc);return t.failed||this.addStep(n,t.doc),t}get docChanged(){return this.steps.length>0}addStep(n,t){this.docs.push(this.doc),this.steps.push(n),this.mapping.appendMap(n.getMap()),this.doc=t}replace(n,t=n,e=Ne.empty){let r=Sb(this.doc,n,t,e);return r&&this.step(r),this}replaceWith(n,t,e){return this.replace(n,t,new Ne(ge.from(e),0,0))}delete(n,t){return this.replace(n,t,Ne.empty)}insert(n,t){return this.replaceWith(n,n,t)}replaceRange(n,t,e){return kI(this,n,t,e),this}replaceRangeWith(n,t,e){return MI(this,n,t,e),this}deleteRange(n,t){return DI(this,n,t),this}lift(n,t){return vI(this,n,t),this}join(n,t=1){return CI(this,n,t),this}wrap(n,t){return yI(this,n,t),this}setBlockType(n,t=n,e,r=null){return bI(this,n,t,e,r),this}setNodeMarkup(n,t,e=null,r){return xI(this,n,t,e,r),this}setNodeAttribute(n,t,e){return this.step(new Ah(n,t,e)),this}setDocAttribute(n,t){return this.step(new rg(n,t)),this}addNodeMark(n,t){return this.step(new sc(n,t)),this}removeNodeMark(n,t){let e=this.doc.nodeAt(n);if(!e)throw new RangeError("No node at position "+n);if(t instanceof rr)t.isInSet(e.marks)&&this.step(new jf(n,t));else{let r=e.marks,o,a=[];for(;o=t.isInSet(r);)a.push(new jf(n,o)),r=o.removeFromSet(r);for(let s=a.length-1;s>=0;s--)this.step(a[s])}return this}split(n,t=1,e){return SI(this,n,t,e),this}addMark(n,t,e){return dI(this,n,t,e),this}removeMark(n,t,e){return hI(this,n,t,e),this}clearIncompatible(n,t,e){return $_(this,n,t,e),this}}const Ww=Object.create(null);class bn{constructor(n,t,e){this.$anchor=n,this.$head=t,this.ranges=e||[new PI(n.min(t),n.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let n=this.ranges;for(let t=0;t<n.length;t++)if(n[t].$from.pos!=n[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(n,t=Ne.empty){let e=t.content.lastChild,r=null;for(let s=0;s<t.openEnd;s++)r=e,e=e.lastChild;let o=n.steps.length,a=this.ranges;for(let s=0;s<a.length;s++){let{$from:u,$to:c}=a[s],h=n.mapping.slice(o);n.replaceRange(h.map(u.pos),h.map(c.pos),s?Ne.empty:t),s==0&&YT(n,o,(e?e.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(n,t){let e=n.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:a,$to:s}=r[o],u=n.mapping.slice(e),c=u.map(a.pos),h=u.map(s.pos);o?n.deleteRange(c,h):(n.replaceRangeWith(c,h,t),YT(n,e,t.isInline?-1:1))}}static findFrom(n,t,e=!1){let r=n.parent.inlineContent?new an(n):rh(n.node(0),n.parent,n.pos,n.index(),t,e);if(r)return r;for(let o=n.depth-1;o>=0;o--){let a=t<0?rh(n.node(0),n.node(o),n.before(o+1),n.index(o),t,e):rh(n.node(0),n.node(o),n.after(o+1),n.index(o)+1,t,e);if(a)return a}return null}static near(n,t=1){return this.findFrom(n,t)||this.findFrom(n,-t)||new Pa(n.node(0))}static atStart(n){return rh(n,n,0,0,1)||new Pa(n)}static atEnd(n){return rh(n,n,n.content.size,n.childCount,-1)||new Pa(n)}static fromJSON(n,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let e=Ww[t.type];if(!e)throw new RangeError(`No selection type ${t.type} defined`);return e.fromJSON(n,t)}static jsonID(n,t){if(n in Ww)throw new RangeError("Duplicate use of selection JSON ID "+n);return Ww[n]=t,t.prototype.jsonID=n,t}getBookmark(){return an.between(this.$anchor,this.$head).getBookmark()}}bn.prototype.visible=!0;class PI{constructor(n,t){this.$from=n,this.$to=t}}let $T=!1;function GT(i){!$T&&!i.parent.inlineContent&&($T=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+i.parent.type.name+")"))}class an extends bn{constructor(n,t=n){GT(n),GT(t),super(n,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(n,t){let e=n.resolve(t.map(this.head));if(!e.parent.inlineContent)return bn.near(e);let r=n.resolve(t.map(this.anchor));return new an(r.parent.inlineContent?r:e,e)}replace(n,t=Ne.empty){if(super.replace(n,t),t==Ne.empty){let e=this.$from.marksAcross(this.$to);e&&n.ensureMarks(e)}}eq(n){return n instanceof an&&n.anchor==this.anchor&&n.head==this.head}getBookmark(){return new _b(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(n,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new an(n.resolve(t.anchor),n.resolve(t.head))}static create(n,t,e=t){let r=n.resolve(t);return new this(r,e==t?r:n.resolve(e))}static between(n,t,e){let r=n.pos-t.pos;if((!e||r)&&(e=r>=0?1:-1),!t.parent.inlineContent){let o=bn.findFrom(t,e,!0)||bn.findFrom(t,-e,!0);if(o)t=o.$head;else return bn.near(t,e)}return n.parent.inlineContent||(r==0?n=t:(n=(bn.findFrom(n,-e,!0)||bn.findFrom(n,e,!0)).$anchor,n.pos<t.pos!=r<0&&(n=t))),new an(n,t)}}bn.jsonID("text",an);class _b{constructor(n,t){this.anchor=n,this.head=t}map(n){return new _b(n.map(this.anchor),n.map(this.head))}resolve(n){return an.between(n.resolve(this.anchor),n.resolve(this.head))}}class Ge extends bn{constructor(n){let t=n.nodeAfter,e=n.node(0).resolve(n.pos+t.nodeSize);super(n,e),this.node=t}map(n,t){let{deleted:e,pos:r}=t.mapResult(this.anchor),o=n.resolve(r);return e?bn.near(o):new Ge(o)}content(){return new Ne(ge.from(this.node),0,0)}eq(n){return n instanceof Ge&&n.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Y_(this.anchor)}static fromJSON(n,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ge(n.resolve(t.anchor))}static create(n,t){return new Ge(n.resolve(t))}static isSelectable(n){return!n.isText&&n.type.spec.selectable!==!1}}Ge.prototype.visible=!1;bn.jsonID("node",Ge);class Y_{constructor(n){this.anchor=n}map(n){let{deleted:t,pos:e}=n.mapResult(this.anchor);return t?new _b(e,e):new Y_(e)}resolve(n){let t=n.resolve(this.anchor),e=t.nodeAfter;return e&&Ge.isSelectable(e)?new Ge(t):bn.near(t)}}class Pa extends bn{constructor(n){super(n.resolve(0),n.resolve(n.content.size))}replace(n,t=Ne.empty){if(t==Ne.empty){n.delete(0,n.doc.content.size);let e=bn.atStart(n.doc);e.eq(n.selection)||n.setSelection(e)}else super.replace(n,t)}toJSON(){return{type:"all"}}static fromJSON(n){return new Pa(n)}map(n){return new Pa(n)}eq(n){return n instanceof Pa}getBookmark(){return NI}}bn.jsonID("all",Pa);const NI={map(){return this},resolve(i){return new Pa(i)}};function rh(i,n,t,e,r,o=!1){if(n.inlineContent)return an.create(i,t);for(let a=e-(r>0?0:1);r>0?a<n.childCount:a>=0;a+=r){let s=n.child(a);if(s.isAtom){if(!o&&Ge.isSelectable(s))return Ge.create(i,t-(r<0?s.nodeSize:0))}else{let u=rh(i,s,t+r,r<0?s.childCount:0,r,o);if(u)return u}t+=s.nodeSize*r}return null}function YT(i,n,t){let e=i.steps.length-1;if(e<n)return;let r=i.steps[e];if(!(r instanceof Ui||r instanceof Vi))return;let o=i.mapping.maps[e],a;o.forEach((s,u,c,h)=>{a==null&&(a=h)}),i.setSelection(bn.near(i.doc.resolve(a),t))}const XT=1,JT=2,ZT=4;class RI extends lM{constructor(n){super(n.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=n.selection,this.storedMarks=n.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(n){if(n.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=n,this.curSelectionFor=this.steps.length,this.updated=(this.updated|XT)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&XT)>0}setStoredMarks(n){return this.storedMarks=n,this.updated|=JT,this}ensureMarks(n){return rr.sameSet(this.storedMarks||this.selection.$from.marks(),n)||this.setStoredMarks(n),this}addStoredMark(n){return this.ensureMarks(n.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(n){return this.ensureMarks(n.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&JT)>0}addStep(n,t){super.addStep(n,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(n){return this.time=n,this}replaceSelection(n){return this.selection.replace(this,n),this}replaceSelectionWith(n,t=!0){let e=this.selection;return t&&(n=n.mark(this.storedMarks||(e.empty?e.$from.marks():e.$from.marksAcross(e.$to)||rr.none))),e.replaceWith(this,n),this}deleteSelection(){return this.selection.replace(this),this}insertText(n,t,e){let r=this.doc.type.schema;if(t==null)return n?this.replaceSelectionWith(r.text(n),!0):this.deleteSelection();{if(e==null&&(e=t),!n)return this.deleteRange(t,e);let o=this.storedMarks;if(!o){let a=this.doc.resolve(t);o=e==t?a.marks():a.marksAcross(this.doc.resolve(e))}return this.replaceRangeWith(t,e,r.text(n,o)),!this.selection.empty&&this.selection.to==t+n.length&&this.setSelection(bn.near(this.selection.$to)),this}}setMeta(n,t){return this.meta[typeof n=="string"?n:n.key]=t,this}getMeta(n){return this.meta[typeof n=="string"?n:n.key]}get isGeneric(){for(let n in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=ZT,this}get scrolledIntoView(){return(this.updated&ZT)>0}}function QT(i,n){return!n||!i?i:i.bind(n)}class Cv{constructor(n,t,e){this.name=n,this.init=QT(t.init,e),this.apply=QT(t.apply,e)}}const LI=[new Cv("doc",{init(i){return i.doc||i.schema.topNodeType.createAndFill()},apply(i){return i.doc}}),new Cv("selection",{init(i,n){return i.selection||bn.atStart(n.doc)},apply(i){return i.selection}}),new Cv("storedMarks",{init(i){return i.storedMarks||null},apply(i,n,t,e){return e.selection.$cursor?i.storedMarks:null}}),new Cv("scrollToSelection",{init(){return 0},apply(i,n){return i.scrolledIntoView?n+1:n}})];class qw{constructor(n,t){this.schema=n,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=LI.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new Cv(e.key,e.spec.state,e))})}}class ch{constructor(n){this.config=n}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(n){return this.applyTransaction(n).state}filterTransaction(n,t=-1){for(let e=0;e<this.config.plugins.length;e++)if(e!=t){let r=this.config.plugins[e];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,n,this))return!1}return!0}applyTransaction(n){if(!this.filterTransaction(n))return{state:this,transactions:[]};let t=[n],e=this.applyInner(n),r=null;for(;;){let o=!1;for(let a=0;a<this.config.plugins.length;a++){let s=this.config.plugins[a];if(s.spec.appendTransaction){let u=r?r[a].n:0,c=r?r[a].state:this,h=u<t.length&&s.spec.appendTransaction.call(s,u?t.slice(u):t,c,e);if(h&&e.filterTransaction(h,a)){if(h.setMeta("appendedTransaction",n),!r){r=[];for(let v=0;v<this.config.plugins.length;v++)r.push(v<a?{state:e,n:t.length}:{state:this,n:0})}t.push(h),e=e.applyInner(h),o=!0}r&&(r[a]={state:e,n:t.length})}}if(!o)return{state:e,transactions:t}}}applyInner(n){if(!n.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new ch(this.config),e=this.config.fields;for(let r=0;r<e.length;r++){let o=e[r];t[o.name]=o.apply(n,this[o.name],this,t)}return t}get tr(){return new RI(this)}static create(n){let t=new qw(n.doc?n.doc.type.schema:n.schema,n.plugins),e=new ch(t);for(let r=0;r<t.fields.length;r++)e[t.fields[r].name]=t.fields[r].init(n,e);return e}reconfigure(n){let t=new qw(this.schema,n.plugins),e=t.fields,r=new ch(t);for(let o=0;o<e.length;o++){let a=e[o].name;r[a]=this.hasOwnProperty(a)?this[a]:e[o].init(n,r)}return r}toJSON(n){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),n&&typeof n=="object")for(let e in n){if(e=="doc"||e=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=n[e],o=r.spec.state;o&&o.toJSON&&(t[e]=o.toJSON.call(r,this[r.key]))}return t}static fromJSON(n,t,e){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!n.schema)throw new RangeError("Required config field 'schema' missing");let r=new qw(n.schema,n.plugins),o=new ch(r);return r.fields.forEach(a=>{if(a.name=="doc")o.doc=cc.fromJSON(n.schema,t.doc);else if(a.name=="selection")o.selection=bn.fromJSON(o.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(n.schema.markFromJSON));else{if(e)for(let s in e){let u=e[s],c=u.spec.state;if(u.key==a.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,s)){o[a.name]=c.fromJSON.call(u,n,t[s],o);return}}o[a.name]=a.init(n,o)}}),o}}function uM(i,n,t){for(let e in i){let r=i[e];r instanceof Function?r=r.bind(n):e=="handleDOMEvents"&&(r=uM(r,n,{})),t[e]=r}return t}class Rr{constructor(n){this.spec=n,this.props={},n.props&&uM(n.props,this,this.props),this.key=n.key?n.key.key:cM("plugin")}getState(n){return n[this.key]}}const Kw=Object.create(null);function cM(i){return i in Kw?i+"$"+ ++Kw[i]:(Kw[i]=0,i+"$")}class Si{constructor(n="key"){this.key=cM(n)}get(n){return n.config.pluginsByKey[this.key]}getState(n){return n[this.key]}}const X_=(i,n)=>i.selection.empty?!1:(n&&n(i.tr.deleteSelection().scrollIntoView()),!0);function fM(i,n){let{$cursor:t}=i.selection;return!t||(n?!n.endOfTextblock("backward",i):t.parentOffset>0)?null:t}const dM=(i,n,t)=>{let e=fM(i,t);if(!e)return!1;let r=J_(e);if(!r){let a=e.blockRange(),s=a&&Gh(a);return s==null?!1:(n&&n(i.tr.lift(a,s).scrollIntoView()),!0)}let o=r.nodeBefore;if(xM(i,r,n,-1))return!0;if(e.parent.content.size==0&&(Nh(o,"end")||Ge.isSelectable(o)))for(let a=e.depth;;a--){let s=Sb(i.doc,e.before(a),e.after(a),Ne.empty);if(s&&s.slice.size<s.to-s.from){if(n){let u=i.tr.step(s);u.setSelection(Nh(o,"end")?bn.findFrom(u.doc.resolve(u.mapping.map(r.pos,-1)),-1):Ge.create(u.doc,r.pos-o.nodeSize)),n(u.scrollIntoView())}return!0}if(a==1||e.node(a-1).childCount>1)break}return o.isAtom&&r.depth==e.depth-1?(n&&n(i.tr.delete(r.pos-o.nodeSize,r.pos).scrollIntoView()),!0):!1},jI=(i,n,t)=>{let e=fM(i,t);if(!e)return!1;let r=J_(e);return r?hM(i,r,n):!1},II=(i,n,t)=>{let e=vM(i,t);if(!e)return!1;let r=Z_(e);return r?hM(i,r,n):!1};function hM(i,n,t){let e=n.nodeBefore,r=e,o=n.pos-1;for(;!r.isTextblock;o--){if(r.type.spec.isolating)return!1;let h=r.lastChild;if(!h)return!1;r=h}let a=n.nodeAfter,s=a,u=n.pos+1;for(;!s.isTextblock;u++){if(s.type.spec.isolating)return!1;let h=s.firstChild;if(!h)return!1;s=h}let c=Sb(i.doc,o,u,Ne.empty);if(!c||c.from!=o||c instanceof Ui&&c.slice.size>=u-o)return!1;if(t){let h=i.tr.step(c);h.setSelection(an.create(h.doc,o)),t(h.scrollIntoView())}return!0}function Nh(i,n,t=!1){for(let e=i;e;e=n=="start"?e.firstChild:e.lastChild){if(e.isTextblock)return!0;if(t&&e.childCount!=1)return!1}return!1}const pM=(i,n,t)=>{let{$head:e,empty:r}=i.selection,o=e;if(!r)return!1;if(e.parent.isTextblock){if(t?!t.endOfTextblock("backward",i):e.parentOffset>0)return!1;o=J_(e)}let a=o&&o.nodeBefore;return!a||!Ge.isSelectable(a)?!1:(n&&n(i.tr.setSelection(Ge.create(i.doc,o.pos-a.nodeSize)).scrollIntoView()),!0)};function J_(i){if(!i.parent.type.spec.isolating)for(let n=i.depth-1;n>=0;n--){if(i.index(n)>0)return i.doc.resolve(i.before(n+1));if(i.node(n).type.spec.isolating)break}return null}function vM(i,n){let{$cursor:t}=i.selection;return!t||(n?!n.endOfTextblock("forward",i):t.parentOffset<t.parent.content.size)?null:t}const gM=(i,n,t)=>{let e=vM(i,t);if(!e)return!1;let r=Z_(e);if(!r)return!1;let o=r.nodeAfter;if(xM(i,r,n,1))return!0;if(e.parent.content.size==0&&(Nh(o,"start")||Ge.isSelectable(o))){let a=Sb(i.doc,e.before(),e.after(),Ne.empty);if(a&&a.slice.size<a.to-a.from){if(n){let s=i.tr.step(a);s.setSelection(Nh(o,"start")?bn.findFrom(s.doc.resolve(s.mapping.map(r.pos)),1):Ge.create(s.doc,s.mapping.map(r.pos))),n(s.scrollIntoView())}return!0}}return o.isAtom&&r.depth==e.depth-1?(n&&n(i.tr.delete(r.pos,r.pos+o.nodeSize).scrollIntoView()),!0):!1},mM=(i,n,t)=>{let{$head:e,empty:r}=i.selection,o=e;if(!r)return!1;if(e.parent.isTextblock){if(t?!t.endOfTextblock("forward",i):e.parentOffset<e.parent.content.size)return!1;o=Z_(e)}let a=o&&o.nodeAfter;return!a||!Ge.isSelectable(a)?!1:(n&&n(i.tr.setSelection(Ge.create(i.doc,o.pos)).scrollIntoView()),!0)};function Z_(i){if(!i.parent.type.spec.isolating)for(let n=i.depth-1;n>=0;n--){let t=i.node(n);if(i.index(n)+1<t.childCount)return i.doc.resolve(i.after(n+1));if(t.type.spec.isolating)break}return null}const BI=(i,n)=>{let t=i.selection,e=t instanceof Ge,r;if(e){if(t.node.isTextblock||!wc(i.doc,t.from))return!1;r=t.from}else if(r=xb(i.doc,t.from,-1),r==null)return!1;if(n){let o=i.tr.join(r);e&&o.setSelection(Ge.create(o.doc,r-i.doc.resolve(r).nodeBefore.nodeSize)),n(o.scrollIntoView())}return!0},UI=(i,n)=>{let t=i.selection,e;if(t instanceof Ge){if(t.node.isTextblock||!wc(i.doc,t.to))return!1;e=t.to}else if(e=xb(i.doc,t.to,1),e==null)return!1;return n&&n(i.tr.join(e).scrollIntoView()),!0},VI=(i,n)=>{let{$from:t,$to:e}=i.selection,r=t.blockRange(e),o=r&&Gh(r);return o==null?!1:(n&&n(i.tr.lift(r,o).scrollIntoView()),!0)},yM=(i,n)=>{let{$head:t,$anchor:e}=i.selection;return!t.parent.type.spec.code||!t.sameParent(e)?!1:(n&&n(i.tr.insertText(`
`).scrollIntoView()),!0)};function Q_(i){for(let n=0;n<i.edgeCount;n++){let{type:t}=i.edge(n);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const FI=(i,n)=>{let{$head:t,$anchor:e}=i.selection;if(!t.parent.type.spec.code||!t.sameParent(e))return!1;let r=t.node(-1),o=t.indexAfter(-1),a=Q_(r.contentMatchAt(o));if(!a||!r.canReplaceWith(o,o,a))return!1;if(n){let s=t.after(),u=i.tr.replaceWith(s,s,a.createAndFill());u.setSelection(bn.near(u.doc.resolve(s),1)),n(u.scrollIntoView())}return!0},bM=(i,n)=>{let t=i.selection,{$from:e,$to:r}=t;if(t instanceof Pa||e.parent.inlineContent||r.parent.inlineContent)return!1;let o=Q_(r.parent.contentMatchAt(r.indexAfter()));if(!o||!o.isTextblock)return!1;if(n){let a=(!e.parentOffset&&r.index()<r.parent.childCount?e:r).pos,s=i.tr.insert(a,o.createAndFill());s.setSelection(an.create(s.doc,a+1)),n(s.scrollIntoView())}return!0},wM=(i,n)=>{let{$cursor:t}=i.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(tu(i.doc,o))return n&&n(i.tr.split(o).scrollIntoView()),!0}let e=t.blockRange(),r=e&&Gh(e);return r==null?!1:(n&&n(i.tr.lift(e,r).scrollIntoView()),!0)};function HI(i){return(n,t)=>{let{$from:e,$to:r}=n.selection;if(n.selection instanceof Ge&&n.selection.node.isBlock)return!e.parentOffset||!tu(n.doc,e.pos)?!1:(t&&t(n.tr.split(e.pos).scrollIntoView()),!0);if(!e.depth)return!1;let o=[],a,s,u=!1,c=!1;for(let y=e.depth;;y--)if(e.node(y).isBlock){u=e.end(y)==e.pos+(e.depth-y),c=e.start(y)==e.pos-(e.depth-y),s=Q_(e.node(y-1).contentMatchAt(e.indexAfter(y-1))),o.unshift(u&&s?{type:s}:null),a=y;break}else{if(y==1)return!1;o.unshift(null)}let h=n.tr;(n.selection instanceof an||n.selection instanceof Pa)&&h.deleteSelection();let v=h.mapping.map(e.pos),m=tu(h.doc,v,o.length,o);if(m||(o[0]=s?{type:s}:null,m=tu(h.doc,v,o.length,o)),!m)return!1;if(h.split(v,o.length,o),!u&&c&&e.node(a).type!=s){let y=h.mapping.map(e.before(a)),_=h.doc.resolve(y);s&&e.node(a-1).canReplaceWith(_.index(),_.index()+1,s)&&h.setNodeMarkup(h.mapping.map(e.before(a)),s)}return t&&t(h.scrollIntoView()),!0}}const zI=HI(),WI=(i,n)=>{let{$from:t,to:e}=i.selection,r,o=t.sharedDepth(e);return o==0?!1:(r=t.before(o),n&&n(i.tr.setSelection(Ge.create(i.doc,r))),!0)};function qI(i,n,t){let e=n.nodeBefore,r=n.nodeAfter,o=n.index();return!e||!r||!e.type.compatibleContent(r.type)?!1:!e.content.size&&n.parent.canReplace(o-1,o)?(t&&t(i.tr.delete(n.pos-e.nodeSize,n.pos).scrollIntoView()),!0):!n.parent.canReplace(o,o+1)||!(r.isTextblock||wc(i.doc,n.pos))?!1:(t&&t(i.tr.join(n.pos).scrollIntoView()),!0)}function xM(i,n,t,e){let r=n.nodeBefore,o=n.nodeAfter,a,s,u=r.type.spec.isolating||o.type.spec.isolating;if(!u&&qI(i,n,t))return!0;let c=!u&&n.parent.canReplace(n.index(),n.index()+1);if(c&&(a=(s=r.contentMatchAt(r.childCount)).findWrapping(o.type))&&s.matchType(a[0]||o.type).validEnd){if(t){let y=n.pos+o.nodeSize,_=ge.empty;for(let D=a.length-1;D>=0;D--)_=ge.from(a[D].create(null,_));_=ge.from(r.copy(_));let C=i.tr.step(new Vi(n.pos-1,y,n.pos,y,new Ne(_,1,0),a.length,!0)),E=C.doc.resolve(y+2*a.length);E.nodeAfter&&E.nodeAfter.type==r.type&&wc(C.doc,E.pos)&&C.join(E.pos),t(C.scrollIntoView())}return!0}let h=o.type.spec.isolating||e>0&&u?null:bn.findFrom(n,1),v=h&&h.$from.blockRange(h.$to),m=v&&Gh(v);if(m!=null&&m>=n.depth)return t&&t(i.tr.lift(v,m).scrollIntoView()),!0;if(c&&Nh(o,"start",!0)&&Nh(r,"end")){let y=r,_=[];for(;_.push(y),!y.isTextblock;)y=y.lastChild;let C=o,E=1;for(;!C.isTextblock;C=C.firstChild)E++;if(y.canReplace(y.childCount,y.childCount,C.content)){if(t){let D=ge.empty;for(let V=_.length-1;V>=0;V--)D=ge.from(_[V].copy(D));let F=i.tr.step(new Vi(n.pos-_.length,n.pos+o.nodeSize,n.pos+E,n.pos+o.nodeSize-E,new Ne(D,_.length,0),0,!0));t(F.scrollIntoView())}return!0}}return!1}function SM(i){return function(n,t){let e=n.selection,r=i<0?e.$from:e.$to,o=r.depth;for(;r.node(o).isInline;){if(!o)return!1;o--}return r.node(o).isTextblock?(t&&t(n.tr.setSelection(an.create(n.doc,i<0?r.start(o):r.end(o)))),!0):!1}}const KI=SM(-1),$I=SM(1);function GI(i,n=null){return function(t,e){let{$from:r,$to:o}=t.selection,a=r.blockRange(o),s=a&&G_(a,i,n);return s?(e&&e(t.tr.wrap(a,s).scrollIntoView()),!0):!1}}function tE(i,n=null){return function(t,e){let r=!1;for(let o=0;o<t.selection.ranges.length&&!r;o++){let{$from:{pos:a},$to:{pos:s}}=t.selection.ranges[o];t.doc.nodesBetween(a,s,(u,c)=>{if(r)return!1;if(!(!u.isTextblock||u.hasMarkup(i,n)))if(u.type==i)r=!0;else{let h=t.doc.resolve(c),v=h.index();r=h.parent.canReplaceWith(v,v+1,i)}})}if(!r)return!1;if(e){let o=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:s},$to:{pos:u}}=t.selection.ranges[a];o.setBlockType(s,u,i,n)}e(o.scrollIntoView())}return!0}}function t1(...i){return function(n,t,e){for(let r=0;r<i.length;r++)if(i[r](n,t,e))return!0;return!1}}t1(X_,dM,pM);t1(X_,gM,mM);t1(yM,bM,wM,zI);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function YI(i,n=null){return function(t,e){let{$from:r,$to:o}=t.selection,a=r.blockRange(o);if(!a)return!1;let s=e?t.tr:null;return XI(s,a,i,n)?(e&&e(s.scrollIntoView()),!0):!1}}function XI(i,n,t,e=null){let r=!1,o=n,a=n.$from.doc;if(n.depth>=2&&n.$from.node(n.depth-1).type.compatibleContent(t)&&n.startIndex==0){if(n.$from.index(n.depth-1)==0)return!1;let u=a.resolve(n.start-2);o=new Cy(u,u,n.depth),n.endIndex<n.parent.childCount&&(n=new Cy(n.$from,a.resolve(n.$to.end(n.depth)),n.depth)),r=!0}let s=G_(o,t,e,n);return s?(i&&JI(i,n,s,r,t),!0):!1}function JI(i,n,t,e,r){let o=ge.empty;for(let h=t.length-1;h>=0;h--)o=ge.from(t[h].type.create(t[h].attrs,o));i.step(new Vi(n.start-(e?2:0),n.end,n.start,n.end,new Ne(o,0,0),t.length,!0));let a=0;for(let h=0;h<t.length;h++)t[h].type==r&&(a=h+1);let s=t.length-a,u=n.start+t.length-(e?2:0),c=n.parent;for(let h=n.startIndex,v=n.endIndex,m=!0;h<v;h++,m=!1)!m&&tu(i.doc,u,s)&&(i.split(u,s),u+=2*s),u+=c.child(h).nodeSize;return i}function ZI(i){return function(n,t){let{$from:e,$to:r}=n.selection,o=e.blockRange(r,a=>a.childCount>0&&a.firstChild.type==i);return o?t?e.node(o.depth-1).type==i?QI(n,t,i,o):t3(n,t,o):!0:!1}}function QI(i,n,t,e){let r=i.tr,o=e.end,a=e.$to.end(e.depth);o<a&&(r.step(new Vi(o-1,a,o,a,new Ne(ge.from(t.create(null,e.parent.copy())),1,0),1,!0)),e=new Cy(r.doc.resolve(e.$from.pos),r.doc.resolve(a),e.depth));const s=Gh(e);if(s==null)return!1;r.lift(e,s);let u=r.doc.resolve(r.mapping.map(o,-1)-1);return wc(r.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&r.join(u.pos),n(r.scrollIntoView()),!0}function t3(i,n,t){let e=i.tr,r=t.parent;for(let y=t.end,_=t.endIndex-1,C=t.startIndex;_>C;_--)y-=r.child(_).nodeSize,e.delete(y-1,y+1);let o=e.doc.resolve(t.start),a=o.nodeAfter;if(e.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let s=t.startIndex==0,u=t.endIndex==r.childCount,c=o.node(-1),h=o.index(-1);if(!c.canReplace(h+(s?0:1),h+1,a.content.append(u?ge.empty:ge.from(r))))return!1;let v=o.pos,m=v+a.nodeSize;return e.step(new Vi(v-(s?1:0),m+(u?1:0),v+1,m-1,new Ne((s?ge.empty:ge.from(r.copy(ge.empty))).append(u?ge.empty:ge.from(r.copy(ge.empty))),s?0:1,u?0:1),s?0:1)),n(e.scrollIntoView()),!0}function e3(i){return function(n,t){let{$from:e,$to:r}=n.selection,o=e.blockRange(r,c=>c.childCount>0&&c.firstChild.type==i);if(!o)return!1;let a=o.startIndex;if(a==0)return!1;let s=o.parent,u=s.child(a-1);if(u.type!=i)return!1;if(t){let c=u.lastChild&&u.lastChild.type==s.type,h=ge.from(c?i.create():null),v=new Ne(ge.from(i.create(null,ge.from(s.type.create(null,h)))),c?3:1,0),m=o.start,y=o.end;t(n.tr.step(new Vi(m-(c?3:1),y,m,y,v,1,!0)).scrollIntoView())}return!0}}const ro=function(i){for(var n=0;;n++)if(i=i.previousSibling,!i)return n},Rh=function(i){let n=i.assignedSlot||i.parentNode;return n&&n.nodeType==11?n.host:n};let bS=null;const $l=function(i,n,t){let e=bS||(bS=document.createRange());return e.setEnd(i,t??i.nodeValue.length),e.setStart(i,n||0),e},n3=function(){bS=null},If=function(i,n,t,e){return t&&(eE(i,n,t,e,-1)||eE(i,n,t,e,1))},r3=/^(img|br|input|textarea|hr)$/i;function eE(i,n,t,e,r){for(var o;;){if(i==t&&n==e)return!0;if(n==(r<0?0:ts(i))){let a=i.parentNode;if(!a||a.nodeType!=1||_g(i)||r3.test(i.nodeName)||i.contentEditable=="false")return!1;n=ro(i)+(r<0?0:1),i=a}else if(i.nodeType==1){let a=i.childNodes[n+(r<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((o=a.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)n+=r;else return!1;else i=a,n=r<0?ts(i):0}else return!1}}function ts(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function i3(i,n){for(;;){if(i.nodeType==3&&n)return i;if(i.nodeType==1&&n>0){if(i.contentEditable=="false")return null;i=i.childNodes[n-1],n=ts(i)}else if(i.parentNode&&!_g(i))n=ro(i),i=i.parentNode;else return null}}function o3(i,n){for(;;){if(i.nodeType==3&&n<i.nodeValue.length)return i;if(i.nodeType==1&&n<i.childNodes.length){if(i.contentEditable=="false")return null;i=i.childNodes[n],n=0}else if(i.parentNode&&!_g(i))n=ro(i)+1,i=i.parentNode;else return null}}function a3(i,n,t){for(let e=n==0,r=n==ts(i);e||r;){if(i==t)return!0;let o=ro(i);if(i=i.parentNode,!i)return!1;e=e&&o==0,r=r&&o==ts(i)}}function _g(i){let n;for(let t=i;t&&!(n=t.pmViewDesc);t=t.parentNode);return n&&n.node&&n.node.isBlock&&(n.dom==i||n.contentDOM==i)}const Cb=function(i){return i.focusNode&&If(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)};function mf(i,n){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=i,t.key=t.code=n,t}function s3(i){let n=i.activeElement;for(;n&&n.shadowRoot;)n=n.shadowRoot.activeElement;return n}function l3(i,n,t){if(i.caretPositionFromPoint)try{let e=i.caretPositionFromPoint(n,t);if(e)return{node:e.offsetNode,offset:Math.min(ts(e.offsetNode),e.offset)}}catch{}if(i.caretRangeFromPoint){let e=i.caretRangeFromPoint(n,t);if(e)return{node:e.startContainer,offset:Math.min(ts(e.startContainer),e.startOffset)}}}const ml=typeof navigator<"u"?navigator:null,nE=typeof document<"u"?document:null,xc=ml&&ml.userAgent||"",wS=/Edge\/(\d+)/.exec(xc),_M=/MSIE \d/.exec(xc),xS=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(xc),ca=!!(_M||xS||wS),fc=_M?document.documentMode:xS?+xS[1]:wS?+wS[1]:0,is=!ca&&/gecko\/(\d+)/i.test(xc);is&&+(/Firefox\/(\d+)/.exec(xc)||[0,0])[1];const SS=!ca&&/Chrome\/(\d+)/.exec(xc),ho=!!SS,CM=SS?+SS[1]:0,Lo=!ca&&!!ml&&/Apple Computer/.test(ml.vendor),Lh=Lo&&(/Mobile\/\w+/.test(xc)||!!ml&&ml.maxTouchPoints>2),Za=Lh||(ml?/Mac/.test(ml.platform):!1),u3=ml?/Win/.test(ml.platform):!1,Jl=/Android \d/.test(xc),Cg=!!nE&&"webkitFontSmoothing"in nE.documentElement.style,c3=Cg?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function f3(i){let n=i.defaultView&&i.defaultView.visualViewport;return n?{left:0,right:n.width,top:0,bottom:n.height}:{left:0,right:i.documentElement.clientWidth,top:0,bottom:i.documentElement.clientHeight}}function zl(i,n){return typeof i=="number"?i:i[n]}function d3(i){let n=i.getBoundingClientRect(),t=n.width/i.offsetWidth||1,e=n.height/i.offsetHeight||1;return{left:n.left,right:n.left+i.clientWidth*t,top:n.top,bottom:n.top+i.clientHeight*e}}function rE(i,n,t){let e=i.someProp("scrollThreshold")||0,r=i.someProp("scrollMargin")||5,o=i.dom.ownerDocument;for(let a=t||i.dom;a;){if(a.nodeType!=1){a=Rh(a);continue}let s=a,u=s==o.body,c=u?f3(o):d3(s),h=0,v=0;if(n.top<c.top+zl(e,"top")?v=-(c.top-n.top+zl(r,"top")):n.bottom>c.bottom-zl(e,"bottom")&&(v=n.bottom-n.top>c.bottom-c.top?n.top+zl(r,"top")-c.top:n.bottom-c.bottom+zl(r,"bottom")),n.left<c.left+zl(e,"left")?h=-(c.left-n.left+zl(r,"left")):n.right>c.right-zl(e,"right")&&(h=n.right-c.right+zl(r,"right")),h||v)if(u)o.defaultView.scrollBy(h,v);else{let y=s.scrollLeft,_=s.scrollTop;v&&(s.scrollTop+=v),h&&(s.scrollLeft+=h);let C=s.scrollLeft-y,E=s.scrollTop-_;n={left:n.left-C,top:n.top-E,right:n.right-C,bottom:n.bottom-E}}let m=u?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(m))break;a=m=="absolute"?a.offsetParent:Rh(a)}}function h3(i){let n=i.dom.getBoundingClientRect(),t=Math.max(0,n.top),e,r;for(let o=(n.left+n.right)/2,a=t+1;a<Math.min(innerHeight,n.bottom);a+=5){let s=i.root.elementFromPoint(o,a);if(!s||s==i.dom||!i.dom.contains(s))continue;let u=s.getBoundingClientRect();if(u.top>=t-20){e=s,r=u.top;break}}return{refDOM:e,refTop:r,stack:TM(i.dom)}}function TM(i){let n=[],t=i.ownerDocument;for(let e=i;e&&(n.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),i!=t);e=Rh(e));return n}function p3({refDOM:i,refTop:n,stack:t}){let e=i?i.getBoundingClientRect().top:0;EM(t,e==0?0:e-n)}function EM(i,n){for(let t=0;t<i.length;t++){let{dom:e,top:r,left:o}=i[t];e.scrollTop!=r+n&&(e.scrollTop=r+n),e.scrollLeft!=o&&(e.scrollLeft=o)}}let Xd=null;function v3(i){if(i.setActive)return i.setActive();if(Xd)return i.focus(Xd);let n=TM(i);i.focus(Xd==null?{get preventScroll(){return Xd={preventScroll:!0},!0}}:void 0),Xd||(Xd=!1,EM(n,0))}function OM(i,n){let t,e=2e8,r,o=0,a=n.top,s=n.top,u,c;for(let h=i.firstChild,v=0;h;h=h.nextSibling,v++){let m;if(h.nodeType==1)m=h.getClientRects();else if(h.nodeType==3)m=$l(h).getClientRects();else continue;for(let y=0;y<m.length;y++){let _=m[y];if(_.top<=a&&_.bottom>=s){a=Math.max(_.bottom,a),s=Math.min(_.top,s);let C=_.left>n.left?_.left-n.left:_.right<n.left?n.left-_.right:0;if(C<e){t=h,e=C,r=C&&t.nodeType==3?{left:_.right<n.left?_.right:_.left,top:n.top}:n,h.nodeType==1&&C&&(o=v+(n.left>=(_.left+_.right)/2?1:0));continue}}else _.top>n.top&&!u&&_.left<=n.left&&_.right>=n.left&&(u=h,c={left:Math.max(_.left,Math.min(_.right,n.left)),top:_.top});!t&&(n.left>=_.right&&n.top>=_.top||n.left>=_.left&&n.top>=_.bottom)&&(o=v+1)}}return!t&&u&&(t=u,r=c,e=0),t&&t.nodeType==3?g3(t,r):!t||e&&t.nodeType==1?{node:i,offset:o}:OM(t,r)}function g3(i,n){let t=i.nodeValue.length,e=document.createRange();for(let r=0;r<t;r++){e.setEnd(i,r+1),e.setStart(i,r);let o=Ju(e,1);if(o.top!=o.bottom&&e1(n,o))return{node:i,offset:r+(n.left>=(o.left+o.right)/2?1:0)}}return{node:i,offset:0}}function e1(i,n){return i.left>=n.left-1&&i.left<=n.right+1&&i.top>=n.top-1&&i.top<=n.bottom+1}function m3(i,n){let t=i.parentNode;return t&&/^li$/i.test(t.nodeName)&&n.left<i.getBoundingClientRect().left?t:i}function y3(i,n,t){let{node:e,offset:r}=OM(n,t),o=-1;if(e.nodeType==1&&!e.firstChild){let a=e.getBoundingClientRect();o=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return i.docView.posFromDOM(e,r,o)}function b3(i,n,t,e){let r=-1;for(let o=n,a=!1;o!=i.dom;){let s=i.docView.nearestDesc(o,!0),u;if(!s)return null;if(s.dom.nodeType==1&&(s.node.isBlock&&s.parent||!s.contentDOM)&&((u=s.dom.getBoundingClientRect()).width||u.height)&&(s.node.isBlock&&s.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(s.dom.nodeName)&&(!a&&u.left>e.left||u.top>e.top?r=s.posBefore:(!a&&u.right<e.left||u.bottom<e.top)&&(r=s.posAfter),a=!0),!s.contentDOM&&r<0&&!s.node.isText))return(s.node.isBlock?e.top<(u.top+u.bottom)/2:e.left<(u.left+u.right)/2)?s.posBefore:s.posAfter;o=s.dom.parentNode}return r>-1?r:i.docView.posFromDOM(n,t,-1)}function AM(i,n,t){let e=i.childNodes.length;if(e&&t.top<t.bottom)for(let r=Math.max(0,Math.min(e-1,Math.floor(e*(n.top-t.top)/(t.bottom-t.top))-2)),o=r;;){let a=i.childNodes[o];if(a.nodeType==1){let s=a.getClientRects();for(let u=0;u<s.length;u++){let c=s[u];if(e1(n,c))return AM(a,n,c)}}if((o=(o+1)%e)==r)break}return i}function w3(i,n){let t=i.dom.ownerDocument,e,r=0,o=l3(t,n.left,n.top);o&&({node:e,offset:r}=o);let a=(i.root.elementFromPoint?i.root:t).elementFromPoint(n.left,n.top),s;if(!a||!i.dom.contains(a.nodeType!=1?a.parentNode:a)){let c=i.dom.getBoundingClientRect();if(!e1(n,c)||(a=AM(i.dom,n,c),!a))return null}if(Lo)for(let c=a;e&&c;c=Rh(c))c.draggable&&(e=void 0);if(a=m3(a,n),e){if(is&&e.nodeType==1&&(r=Math.min(r,e.childNodes.length),r<e.childNodes.length)){let h=e.childNodes[r],v;h.nodeName=="IMG"&&(v=h.getBoundingClientRect()).right<=n.left&&v.bottom>n.top&&r++}let c;Cg&&r&&e.nodeType==1&&(c=e.childNodes[r-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=n.top&&r--,e==i.dom&&r==e.childNodes.length-1&&e.lastChild.nodeType==1&&n.top>e.lastChild.getBoundingClientRect().bottom?s=i.state.doc.content.size:(r==0||e.nodeType!=1||e.childNodes[r-1].nodeName!="BR")&&(s=b3(i,e,r,n))}s==null&&(s=y3(i,a,n));let u=i.docView.nearestDesc(a,!0);return{pos:s,inside:u?u.posAtStart-u.border:-1}}function iE(i){return i.top<i.bottom||i.left<i.right}function Ju(i,n){let t=i.getClientRects();if(t.length){let e=t[n<0?0:t.length-1];if(iE(e))return e}return Array.prototype.find.call(t,iE)||i.getBoundingClientRect()}const x3=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function kM(i,n,t){let{node:e,offset:r,atom:o}=i.docView.domFromPos(n,t<0?-1:1),a=Cg||is;if(e.nodeType==3)if(a&&(x3.test(e.nodeValue)||(t<0?!r:r==e.nodeValue.length))){let u=Ju($l(e,r,r),t);if(is&&r&&/\s/.test(e.nodeValue[r-1])&&r<e.nodeValue.length){let c=Ju($l(e,r-1,r-1),-1);if(c.top==u.top){let h=Ju($l(e,r,r+1),-1);if(h.top!=u.top)return sv(h,h.left<c.left)}}return u}else{let u=r,c=r,h=t<0?1:-1;return t<0&&!r?(c++,h=-1):t>=0&&r==e.nodeValue.length?(u--,h=1):t<0?u--:c++,sv(Ju($l(e,u,c),h),h<0)}if(!i.state.doc.resolve(n-(o||0)).parent.inlineContent){if(o==null&&r&&(t<0||r==ts(e))){let u=e.childNodes[r-1];if(u.nodeType==1)return $w(u.getBoundingClientRect(),!1)}if(o==null&&r<ts(e)){let u=e.childNodes[r];if(u.nodeType==1)return $w(u.getBoundingClientRect(),!0)}return $w(e.getBoundingClientRect(),t>=0)}if(o==null&&r&&(t<0||r==ts(e))){let u=e.childNodes[r-1],c=u.nodeType==3?$l(u,ts(u)-(a?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(c)return sv(Ju(c,1),!1)}if(o==null&&r<ts(e)){let u=e.childNodes[r];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let c=u?u.nodeType==3?$l(u,0,a?0:1):u.nodeType==1?u:null:null;if(c)return sv(Ju(c,-1),!0)}return sv(Ju(e.nodeType==3?$l(e):e,-t),t>=0)}function sv(i,n){if(i.width==0)return i;let t=n?i.left:i.right;return{top:i.top,bottom:i.bottom,left:t,right:t}}function $w(i,n){if(i.height==0)return i;let t=n?i.top:i.bottom;return{top:t,bottom:t,left:i.left,right:i.right}}function MM(i,n,t){let e=i.state,r=i.root.activeElement;e!=n&&i.updateState(n),r!=i.dom&&i.focus();try{return t()}finally{e!=n&&i.updateState(e),r!=i.dom&&r&&r.focus()}}function S3(i,n,t){let e=n.selection,r=t=="up"?e.$from:e.$to;return MM(i,n,()=>{let{node:o}=i.docView.domFromPos(r.pos,t=="up"?-1:1);for(;;){let s=i.docView.nearestDesc(o,!0);if(!s)break;if(s.node.isBlock){o=s.contentDOM||s.dom;break}o=s.dom.parentNode}let a=kM(i,r.pos,1);for(let s=o.firstChild;s;s=s.nextSibling){let u;if(s.nodeType==1)u=s.getClientRects();else if(s.nodeType==3)u=$l(s,0,s.nodeValue.length).getClientRects();else continue;for(let c=0;c<u.length;c++){let h=u[c];if(h.bottom>h.top+1&&(t=="up"?a.top-h.top>(h.bottom-a.top)*2:h.bottom-a.bottom>(a.bottom-h.top)*2))return!1}}return!0})}const _3=/[\u0590-\u08ac]/;function C3(i,n,t){let{$head:e}=n.selection;if(!e.parent.isTextblock)return!1;let r=e.parentOffset,o=!r,a=r==e.parent.content.size,s=i.domSelection();return s?!_3.test(e.parent.textContent)||!s.modify?t=="left"||t=="backward"?o:a:MM(i,n,()=>{let{focusNode:u,focusOffset:c,anchorNode:h,anchorOffset:v}=i.domSelectionRange(),m=s.caretBidiLevel;s.modify("move",t,"character");let y=e.depth?i.docView.domAfterPos(e.before()):i.dom,{focusNode:_,focusOffset:C}=i.domSelectionRange(),E=_&&!y.contains(_.nodeType==1?_:_.parentNode)||u==_&&c==C;try{s.collapse(h,v),u&&(u!=h||c!=v)&&s.extend&&s.extend(u,c)}catch{}return m!=null&&(s.caretBidiLevel=m),E}):e.pos==e.start()||e.pos==e.end()}let oE=null,aE=null,sE=!1;function T3(i,n,t){return oE==n&&aE==t?sE:(oE=n,aE=t,sE=t=="up"||t=="down"?S3(i,n,t):C3(i,n,t))}const as=0,lE=1,Sf=2,yl=3;class Tg{constructor(n,t,e,r){this.parent=n,this.children=t,this.dom=e,this.contentDOM=r,this.dirty=as,e.pmViewDesc=this}matchesWidget(n){return!1}matchesMark(n){return!1}matchesNode(n,t,e){return!1}matchesHack(n){return!1}parseRule(){return null}stopEvent(n){return!1}get size(){let n=0;for(let t=0;t<this.children.length;t++)n+=this.children[t].size;return n}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let n=0;n<this.children.length;n++)this.children[n].destroy()}posBeforeChild(n){for(let t=0,e=this.posAtStart;;t++){let r=this.children[t];if(r==n)return e;e+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(n,t,e){if(this.contentDOM&&this.contentDOM.contains(n.nodeType==1?n:n.parentNode))if(e<0){let o,a;if(n==this.contentDOM)o=n.childNodes[t-1];else{for(;n.parentNode!=this.contentDOM;)n=n.parentNode;o=n.previousSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(a)+a.size:this.posAtStart}else{let o,a;if(n==this.contentDOM)o=n.childNodes[t];else{for(;n.parentNode!=this.contentDOM;)n=n.parentNode;o=n.nextSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(a):this.posAtEnd}let r;if(n==this.dom&&this.contentDOM)r=t>ro(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=n.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=n;;o=o.parentNode){if(o==this.dom){r=!1;break}if(o.previousSibling)break}if(r==null&&t==n.childNodes.length)for(let o=n;;o=o.parentNode){if(o==this.dom){r=!0;break}if(o.nextSibling)break}}return r??e>0?this.posAtEnd:this.posAtStart}nearestDesc(n,t=!1){for(let e=!0,r=n;r;r=r.parentNode){let o=this.getDesc(r),a;if(o&&(!t||o.node))if(e&&(a=o.nodeDOM)&&!(a.nodeType==1?a.contains(n.nodeType==1?n:n.parentNode):a==n))e=!1;else return o}}getDesc(n){let t=n.pmViewDesc;for(let e=t;e;e=e.parent)if(e==this)return t}posFromDOM(n,t,e){for(let r=n;r;r=r.parentNode){let o=this.getDesc(r);if(o)return o.localPosFromDOM(n,t,e)}return-1}descAt(n){for(let t=0,e=0;t<this.children.length;t++){let r=this.children[t],o=e+r.size;if(e==n&&o!=e){for(;!r.border&&r.children.length;)for(let a=0;a<r.children.length;a++){let s=r.children[a];if(s.size){r=s;break}}return r}if(n<o)return r.descAt(n-e-r.border);e=o}}domFromPos(n,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:n+1};let e=0,r=0;for(let o=0;e<this.children.length;e++){let a=this.children[e],s=o+a.size;if(s>n||a instanceof PM){r=n-o;break}o=s}if(r)return this.children[e].domFromPos(r-this.children[e].border,t);for(let o;e&&!(o=this.children[e-1]).size&&o instanceof DM&&o.side>=0;e--);if(t<=0){let o,a=!0;for(;o=e?this.children[e-1]:null,!(!o||o.dom.parentNode==this.contentDOM);e--,a=!1);return o&&t&&a&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?ro(o.dom)+1:0}}else{let o,a=!0;for(;o=e<this.children.length?this.children[e]:null,!(!o||o.dom.parentNode==this.contentDOM);e++,a=!1);return o&&a&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?ro(o.dom):this.contentDOM.childNodes.length}}}parseRange(n,t,e=0){if(this.children.length==0)return{node:this.contentDOM,from:n,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,o=-1;for(let a=e,s=0;;s++){let u=this.children[s],c=a+u.size;if(r==-1&&n<=c){let h=a+u.border;if(n>=h&&t<=c-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(n,t,h);n=a;for(let v=s;v>0;v--){let m=this.children[v-1];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(1)){r=ro(m.dom)+1;break}n-=m.size}r==-1&&(r=0)}if(r>-1&&(c>t||s==this.children.length-1)){t=c;for(let h=s+1;h<this.children.length;h++){let v=this.children[h];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(-1)){o=ro(v.dom);break}t+=v.size}o==-1&&(o=this.contentDOM.childNodes.length);break}a=c}return{node:this.contentDOM,from:n,to:t,fromOffset:r,toOffset:o}}emptyChildAt(n){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[n<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(n)}domAfterPos(n){let{node:t,offset:e}=this.domFromPos(n,0);if(t.nodeType!=1||e==t.childNodes.length)throw new RangeError("No node after pos "+n);return t.childNodes[e]}setSelection(n,t,e,r=!1){let o=Math.min(n,t),a=Math.max(n,t);for(let y=0,_=0;y<this.children.length;y++){let C=this.children[y],E=_+C.size;if(o>_&&a<E)return C.setSelection(n-_-C.border,t-_-C.border,e,r);_=E}let s=this.domFromPos(n,n?-1:1),u=t==n?s:this.domFromPos(t,t?-1:1),c=e.root.getSelection(),h=e.domSelectionRange(),v=!1;if((is||Lo)&&n==t){let{node:y,offset:_}=s;if(y.nodeType==3){if(v=!!(_&&y.nodeValue[_-1]==`
`),v&&_==y.nodeValue.length)for(let C=y,E;C;C=C.parentNode){if(E=C.nextSibling){E.nodeName=="BR"&&(s=u={node:E.parentNode,offset:ro(E)+1});break}let D=C.pmViewDesc;if(D&&D.node&&D.node.isBlock)break}}else{let C=y.childNodes[_-1];v=C&&(C.nodeName=="BR"||C.contentEditable=="false")}}if(is&&h.focusNode&&h.focusNode!=u.node&&h.focusNode.nodeType==1){let y=h.focusNode.childNodes[h.focusOffset];y&&y.contentEditable=="false"&&(r=!0)}if(!(r||v&&Lo)&&If(s.node,s.offset,h.anchorNode,h.anchorOffset)&&If(u.node,u.offset,h.focusNode,h.focusOffset))return;let m=!1;if((c.extend||n==t)&&!(v&&is)){c.collapse(s.node,s.offset);try{n!=t&&c.extend(u.node,u.offset),m=!0}catch{}}if(!m){if(n>t){let _=s;s=u,u=_}let y=document.createRange();y.setEnd(u.node,u.offset),y.setStart(s.node,s.offset),c.removeAllRanges(),c.addRange(y)}}ignoreMutation(n){return!this.contentDOM&&n.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(n,t){for(let e=0,r=0;r<this.children.length;r++){let o=this.children[r],a=e+o.size;if(e==a?n<=a&&t>=e:n<a&&t>e){let s=e+o.border,u=a-o.border;if(n>=s&&t<=u){this.dirty=n==e||t==a?Sf:lE,n==s&&t==u&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=yl:o.markDirty(n-s,t-s);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Sf:yl}e=a}this.dirty=Sf}markParentsDirty(){let n=1;for(let t=this.parent;t;t=t.parent,n++){let e=n==1?Sf:lE;t.dirty<e&&(t.dirty=e)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(n){return!1}}class DM extends Tg{constructor(n,t,e,r){let o,a=t.type.toDOM;if(typeof a=="function"&&(a=a(e,()=>{if(!o)return r;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(a.nodeType!=1){let s=document.createElement("span");s.appendChild(a),a=s}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(n,[],a,null),this.widget=t,this.widget=t,o=this}matchesWidget(n){return this.dirty==as&&n.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(n){let t=this.widget.spec.stopEvent;return t?t(n):!1}ignoreMutation(n){return n.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class E3 extends Tg{constructor(n,t,e,r){super(n,[],t,null),this.textDOM=e,this.text=r}get size(){return this.text.length}localPosFromDOM(n,t){return n!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(n){return{node:this.textDOM,offset:n}}ignoreMutation(n){return n.type==="characterData"&&n.target.nodeValue==n.oldValue}}class Bf extends Tg{constructor(n,t,e,r,o){super(n,[],e,r),this.mark=t,this.spec=o}static create(n,t,e,r){let o=r.nodeViews[t.type.name],a=o&&o(t,r,e);return(!a||!a.dom)&&(a=Wf.renderSpec(document,t.type.spec.toDOM(t,e),null,t.attrs)),new Bf(n,t,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&yl||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(n){return this.dirty!=yl&&this.mark.eq(n)}markDirty(n,t){if(super.markDirty(n,t),this.dirty!=as){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=as}}slice(n,t,e){let r=Bf.create(this.parent,this.mark,!0,e),o=this.children,a=this.size;t<a&&(o=CS(o,t,a,e)),n>0&&(o=CS(o,0,n,e));for(let s=0;s<o.length;s++)o[s].parent=r;return r.children=o,r}ignoreMutation(n){return this.spec.ignoreMutation?this.spec.ignoreMutation(n):super.ignoreMutation(n)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class dc extends Tg{constructor(n,t,e,r,o,a,s,u,c){super(n,[],o,a),this.node=t,this.outerDeco=e,this.innerDeco=r,this.nodeDOM=s}static create(n,t,e,r,o,a){let s=o.nodeViews[t.type.name],u,c=s&&s(t,o,()=>{if(!u)return a;if(u.parent)return u.parent.posBeforeChild(u)},e,r),h=c&&c.dom,v=c&&c.contentDOM;if(t.isText){if(!h)h=document.createTextNode(t.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:v}=Wf.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!v&&!t.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),t.type.spec.draggable&&(h.draggable=!0));let m=h;return h=LM(h,e,t),c?u=new O3(n,t,e,r,h,v||null,m,c,o,a+1):t.isText?new Tb(n,t,e,r,h,m,o):new dc(n,t,e,r,h,v||null,m,o,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let n={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(n.preserveWhitespace="full"),!this.contentDOM)n.getContent=()=>this.node.content;else if(!this.contentLost)n.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let e=this.children[t];if(this.dom.contains(e.dom.parentNode)){n.contentElement=e.dom.parentNode;break}}n.contentElement||(n.getContent=()=>ge.empty)}return n}matchesNode(n,t,e){return this.dirty==as&&n.eq(this.node)&&Ey(t,this.outerDeco)&&e.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(n,t){let e=this.node.inlineContent,r=t,o=n.composing?this.localCompositionInfo(n,t):null,a=o&&o.pos>-1?o:null,s=o&&o.pos<0,u=new k3(this,a&&a.node,n);P3(this.node,this.innerDeco,(c,h,v)=>{c.spec.marks?u.syncToMarks(c.spec.marks,e,n):c.type.side>=0&&!v&&u.syncToMarks(h==this.node.childCount?rr.none:this.node.child(h).marks,e,n),u.placeWidget(c,n,r)},(c,h,v,m)=>{u.syncToMarks(c.marks,e,n);let y;u.findNodeMatch(c,h,v,m)||s&&n.state.selection.from>r&&n.state.selection.to<r+c.nodeSize&&(y=u.findIndexWithChild(o.node))>-1&&u.updateNodeAt(c,h,v,y,n)||u.updateNextNode(c,h,v,n,m,r)||u.addNode(c,h,v,n,r),r+=c.nodeSize}),u.syncToMarks([],e,n),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==Sf)&&(a&&this.protectLocalComposition(n,a),NM(this.contentDOM,this.children,n),Lh&&N3(this.dom))}localCompositionInfo(n,t){let{from:e,to:r}=n.state.selection;if(!(n.state.selection instanceof an)||e<t||r>t+this.node.content.size)return null;let o=n.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let a=o.nodeValue,s=R3(this.node.content,a,e-t,r-t);return s<0?null:{node:o,pos:s,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(n,{node:t,pos:e,text:r}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let a=new E3(this,o,t,r);n.input.compositionNodes.push(a),this.children=CS(this.children,e,e+r.length,n,a)}update(n,t,e,r){return this.dirty==yl||!n.sameMarkup(this.node)?!1:(this.updateInner(n,t,e,r),!0)}updateInner(n,t,e,r){this.updateOuterDeco(t),this.node=n,this.innerDeco=e,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=as}updateOuterDeco(n){if(Ey(n,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,e=this.dom;this.dom=RM(this.dom,this.nodeDOM,_S(this.outerDeco,this.node,t),_S(n,this.node,t)),this.dom!=e&&(e.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=n}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function uE(i,n,t,e,r){LM(e,n,i);let o=new dc(void 0,i,n,t,e,e,e,r,0);return o.contentDOM&&o.updateChildren(r,0),o}class Tb extends dc{constructor(n,t,e,r,o,a,s){super(n,t,e,r,o,null,a,s,0)}parseRule(){let n=this.nodeDOM.parentNode;for(;n&&n!=this.dom&&!n.pmIsDeco;)n=n.parentNode;return{skip:n||!0}}update(n,t,e,r){return this.dirty==yl||this.dirty!=as&&!this.inParent()||!n.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=as||n.text!=this.node.text)&&n.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=n.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=n,this.dirty=as,!0)}inParent(){let n=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==n)return!0;return!1}domFromPos(n){return{node:this.nodeDOM,offset:n}}localPosFromDOM(n,t,e){return n==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(n,t,e)}ignoreMutation(n){return n.type!="characterData"&&n.type!="selection"}slice(n,t,e){let r=this.node.cut(n,t),o=document.createTextNode(r.text);return new Tb(this.parent,r,this.outerDeco,this.innerDeco,o,o,e)}markDirty(n,t){super.markDirty(n,t),this.dom!=this.nodeDOM&&(n==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=yl)}get domAtom(){return!1}isText(n){return this.node.text==n}}class PM extends Tg{parseRule(){return{ignore:!0}}matchesHack(n){return this.dirty==as&&this.dom.nodeName==n}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class O3 extends dc{constructor(n,t,e,r,o,a,s,u,c,h){super(n,t,e,r,o,a,s,c,h),this.spec=u}update(n,t,e,r){if(this.dirty==yl)return!1;if(this.spec.update&&(this.node.type==n.type||this.spec.multiType)){let o=this.spec.update(n,t,e);return o&&this.updateInner(n,t,e,r),o}else return!this.contentDOM&&!n.isLeaf?!1:super.update(n,t,e,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(n,t,e,r){this.spec.setSelection?this.spec.setSelection(n,t,e.root):super.setSelection(n,t,e,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(n){return this.spec.stopEvent?this.spec.stopEvent(n):!1}ignoreMutation(n){return this.spec.ignoreMutation?this.spec.ignoreMutation(n):super.ignoreMutation(n)}}function NM(i,n,t){let e=i.firstChild,r=!1;for(let o=0;o<n.length;o++){let a=n[o],s=a.dom;if(s.parentNode==i){for(;s!=e;)e=cE(e),r=!0;e=e.nextSibling}else r=!0,i.insertBefore(s,e);if(a instanceof Bf){let u=e?e.previousSibling:i.lastChild;NM(a.contentDOM,a.children,t),e=u?u.nextSibling:i.firstChild}}for(;e;)e=cE(e),r=!0;r&&t.trackWrites==i&&(t.trackWrites=null)}const Rv=function(i){i&&(this.nodeName=i)};Rv.prototype=Object.create(null);const _f=[new Rv];function _S(i,n,t){if(i.length==0)return _f;let e=t?_f[0]:new Rv,r=[e];for(let o=0;o<i.length;o++){let a=i[o].type.attrs;if(a){a.nodeName&&r.push(e=new Rv(a.nodeName));for(let s in a){let u=a[s];u!=null&&(t&&r.length==1&&r.push(e=new Rv(n.isInline?"span":"div")),s=="class"?e.class=(e.class?e.class+" ":"")+u:s=="style"?e.style=(e.style?e.style+";":"")+u:s!="nodeName"&&(e[s]=u))}}}return r}function RM(i,n,t,e){if(t==_f&&e==_f)return n;let r=n;for(let o=0;o<e.length;o++){let a=e[o],s=t[o];if(o){let u;s&&s.nodeName==a.nodeName&&r!=i&&(u=r.parentNode)&&u.nodeName.toLowerCase()==a.nodeName||(u=document.createElement(a.nodeName),u.pmIsDeco=!0,u.appendChild(r),s=_f[0]),r=u}A3(r,s||_f[0],a)}return r}function A3(i,n,t){for(let e in n)e!="class"&&e!="style"&&e!="nodeName"&&!(e in t)&&i.removeAttribute(e);for(let e in t)e!="class"&&e!="style"&&e!="nodeName"&&t[e]!=n[e]&&i.setAttribute(e,t[e]);if(n.class!=t.class){let e=n.class?n.class.split(" ").filter(Boolean):[],r=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<e.length;o++)r.indexOf(e[o])==-1&&i.classList.remove(e[o]);for(let o=0;o<r.length;o++)e.indexOf(r[o])==-1&&i.classList.add(r[o]);i.classList.length==0&&i.removeAttribute("class")}if(n.style!=t.style){if(n.style){let e=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=e.exec(n.style);)i.style.removeProperty(r[1])}t.style&&(i.style.cssText+=t.style)}}function LM(i,n,t){return RM(i,i,_f,_S(n,t,i.nodeType!=1))}function Ey(i,n){if(i.length!=n.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].type.eq(n[t].type))return!1;return!0}function cE(i){let n=i.nextSibling;return i.parentNode.removeChild(i),n}class k3{constructor(n,t,e){this.lock=t,this.view=e,this.index=0,this.stack=[],this.changed=!1,this.top=n,this.preMatch=M3(n.node.content,n)}destroyBetween(n,t){if(n!=t){for(let e=n;e<t;e++)this.top.children[e].destroy();this.top.children.splice(n,t-n),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(n,t,e){let r=0,o=this.stack.length>>1,a=Math.min(o,n.length);for(;r<a&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(n[r])&&n[r].type.spec.spanning!==!1;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=as,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<n.length;){this.stack.push(this.top,this.index+1);let s=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let c=this.top.children[u];if(c.matchesMark(n[o])&&!this.isLocked(c.dom)){s=u;break}}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{let u=Bf.create(this.top,n[o],t,e);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,o++}}findNodeMatch(n,t,e,r){let o=-1,a;if(r>=this.preMatch.index&&(a=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&a.matchesNode(n,t,e))o=this.top.children.indexOf(a,this.index);else for(let s=this.index,u=Math.min(this.top.children.length,s+5);s<u;s++){let c=this.top.children[s];if(c.matchesNode(n,t,e)&&!this.preMatch.matched.has(c)){o=s;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(n,t,e,r,o){let a=this.top.children[r];return a.dirty==yl&&a.dom==a.contentDOM&&(a.dirty=Sf),a.update(n,t,e,o)?(this.destroyBetween(this.index,r),this.index++,!0):!1}findIndexWithChild(n){for(;;){let t=n.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let e=n.pmViewDesc;if(e){for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==e)return r}return-1}n=t}}updateNextNode(n,t,e,r,o,a){for(let s=this.index;s<this.top.children.length;s++){let u=this.top.children[s];if(u instanceof dc){let c=this.preMatch.matched.get(u);if(c!=null&&c!=o)return!1;let h=u.dom,v,m=this.isLocked(h)&&!(n.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==n.text&&u.dirty!=yl&&Ey(t,u.outerDeco));if(!m&&u.update(n,t,e,r))return this.destroyBetween(this.index,s),u.dom!=h&&(this.changed=!0),this.index++,!0;if(!m&&(v=this.recreateWrapper(u,n,t,e,r,a)))return this.destroyBetween(this.index,s),this.top.children[this.index]=v,v.contentDOM&&(v.dirty=Sf,v.updateChildren(r,a+1),v.dirty=as),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(n,t,e,r,o,a){if(n.dirty||t.isAtom||!n.children.length||!n.node.content.eq(t.content)||!Ey(e,n.outerDeco)||!r.eq(n.innerDeco))return null;let s=dc.create(this.top,t,e,r,o,a);if(s.contentDOM){s.children=n.children,n.children=[];for(let u of s.children)u.parent=s}return n.destroy(),s}addNode(n,t,e,r,o){let a=dc.create(this.top,n,t,e,r,o);a.contentDOM&&a.updateChildren(r,o+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(n,t,e){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(n)&&(n==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let o=new DM(this.top,n,t,e);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let n=this.top.children[this.index-1],t=this.top;for(;n instanceof Bf;)t=n,n=t.children[t.children.length-1];(!n||!(n instanceof Tb)||/\n$/.test(n.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(n.node.text))&&((Lo||ho)&&n&&n.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(n,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(n))this.index++;else{let e=document.createElement(n);n=="IMG"&&(e.className="ProseMirror-separator",e.alt=""),n=="BR"&&(e.className="ProseMirror-trailingBreak");let r=new PM(this.top,[],e,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(n){return this.lock&&(n==this.lock||n.nodeType==1&&n.contains(this.lock.parentNode))}}function M3(i,n){let t=n,e=t.children.length,r=i.childCount,o=new Map,a=[];t:for(;r>0;){let s;for(;;)if(e){let c=t.children[e-1];if(c instanceof Bf)t=c,e=c.children.length;else{s=c,e--;break}}else{if(t==n)break t;e=t.parent.children.indexOf(t),t=t.parent}let u=s.node;if(u){if(u!=i.child(r-1))break;--r,o.set(s,r),a.push(s)}}return{index:r,matched:o,matches:a.reverse()}}function D3(i,n){return i.type.side-n.type.side}function P3(i,n,t,e){let r=n.locals(i),o=0;if(r.length==0){for(let c=0;c<i.childCount;c++){let h=i.child(c);e(h,r,n.forChild(o,h),c),o+=h.nodeSize}return}let a=0,s=[],u=null;for(let c=0;;){let h,v;for(;a<r.length&&r[a].to==o;){let E=r[a++];E.widget&&(h?(v||(v=[h])).push(E):h=E)}if(h)if(v){v.sort(D3);for(let E=0;E<v.length;E++)t(v[E],c,!!u)}else t(h,c,!!u);let m,y;if(u)y=-1,m=u,u=null;else if(c<i.childCount)y=c,m=i.child(c++);else break;for(let E=0;E<s.length;E++)s[E].to<=o&&s.splice(E--,1);for(;a<r.length&&r[a].from<=o&&r[a].to>o;)s.push(r[a++]);let _=o+m.nodeSize;if(m.isText){let E=_;a<r.length&&r[a].from<E&&(E=r[a].from);for(let D=0;D<s.length;D++)s[D].to<E&&(E=s[D].to);E<_&&(u=m.cut(E-o),m=m.cut(0,E-o),_=E,y=-1)}else for(;a<r.length&&r[a].to<_;)a++;let C=m.isInline&&!m.isLeaf?s.filter(E=>!E.inline):s.slice();e(m,C,n.forChild(o,m),y),o=_}}function N3(i){if(i.nodeName=="UL"||i.nodeName=="OL"){let n=i.style.cssText;i.style.cssText=n+"; list-style: square !important",window.getComputedStyle(i).listStyle,i.style.cssText=n}}function R3(i,n,t,e){for(let r=0,o=0;r<i.childCount&&o<=e;){let a=i.child(r++),s=o;if(o+=a.nodeSize,!a.isText)continue;let u=a.text;for(;r<i.childCount;){let c=i.child(r++);if(o+=c.nodeSize,!c.isText)break;u+=c.text}if(o>=t){if(o>=e&&u.slice(e-n.length-s,e-s)==n)return e-n.length;let c=s<e?u.lastIndexOf(n,e-s-1):-1;if(c>=0&&c+n.length+s>=t)return s+c;if(t==e&&u.length>=e+n.length-s&&u.slice(e-s,e-s+n.length)==n)return e}}return-1}function CS(i,n,t,e,r){let o=[];for(let a=0,s=0;a<i.length;a++){let u=i[a],c=s,h=s+=u.size;c>=t||h<=n?o.push(u):(c<n&&o.push(u.slice(0,n-c,e)),r&&(o.push(r),r=void 0),h>t&&o.push(u.slice(t-c,u.size,e)))}return o}function n1(i,n=null){let t=i.domSelectionRange(),e=i.state.doc;if(!t.focusNode)return null;let r=i.docView.nearestDesc(t.focusNode),o=r&&r.size==0,a=i.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let s=e.resolve(a),u,c;if(Cb(t)){for(u=a;r&&!r.node;)r=r.parent;let v=r.node;if(r&&v.isAtom&&Ge.isSelectable(v)&&r.parent&&!(v.isInline&&a3(t.focusNode,t.focusOffset,r.dom))){let m=r.posBefore;c=new Ge(a==m?s:e.resolve(m))}}else{if(t instanceof i.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let v=a,m=a;for(let y=0;y<t.rangeCount;y++){let _=t.getRangeAt(y);v=Math.min(v,i.docView.posFromDOM(_.startContainer,_.startOffset,1)),m=Math.max(m,i.docView.posFromDOM(_.endContainer,_.endOffset,-1))}if(v<0)return null;[u,a]=m==i.state.selection.anchor?[m,v]:[v,m],s=e.resolve(a)}else u=i.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(u<0)return null}let h=e.resolve(u);if(!c){let v=n=="pointer"||i.state.selection.head<s.pos&&!o?1:-1;c=r1(i,h,s,v)}return c}function jM(i){return i.editable?i.hasFocus():BM(i)&&document.activeElement&&document.activeElement.contains(i.dom)}function eu(i,n=!1){let t=i.state.selection;if(IM(i,t),!!jM(i)){if(!n&&i.input.mouseDown&&i.input.mouseDown.allowDefault&&ho){let e=i.domSelectionRange(),r=i.domObserver.currentSelection;if(e.anchorNode&&r.anchorNode&&If(e.anchorNode,e.anchorOffset,r.anchorNode,r.anchorOffset)){i.input.mouseDown.delayedSelectionSync=!0,i.domObserver.setCurSelection();return}}if(i.domObserver.disconnectSelection(),i.cursorWrapper)j3(i);else{let{anchor:e,head:r}=t,o,a;fE&&!(t instanceof an)&&(t.$from.parent.inlineContent||(o=dE(i,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=dE(i,t.to))),i.docView.setSelection(e,r,i,n),fE&&(o&&hE(o),a&&hE(a)),t.visible?i.dom.classList.remove("ProseMirror-hideselection"):(i.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&L3(i))}i.domObserver.setCurSelection(),i.domObserver.connectSelection()}}const fE=Lo||ho&&CM<63;function dE(i,n){let{node:t,offset:e}=i.docView.domFromPos(n,0),r=e<t.childNodes.length?t.childNodes[e]:null,o=e?t.childNodes[e-1]:null;if(Lo&&r&&r.contentEditable=="false")return Gw(r);if((!r||r.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(r)return Gw(r);if(o)return Gw(o)}}function Gw(i){return i.contentEditable="true",Lo&&i.draggable&&(i.draggable=!1,i.wasDraggable=!0),i}function hE(i){i.contentEditable="false",i.wasDraggable&&(i.draggable=!0,i.wasDraggable=null)}function L3(i){let n=i.dom.ownerDocument;n.removeEventListener("selectionchange",i.input.hideSelectionGuard);let t=i.domSelectionRange(),e=t.anchorNode,r=t.anchorOffset;n.addEventListener("selectionchange",i.input.hideSelectionGuard=()=>{(t.anchorNode!=e||t.anchorOffset!=r)&&(n.removeEventListener("selectionchange",i.input.hideSelectionGuard),setTimeout(()=>{(!jM(i)||i.state.selection.visible)&&i.dom.classList.remove("ProseMirror-hideselection")},20))})}function j3(i){let n=i.domSelection();if(!n)return;let t=i.cursorWrapper.dom,e=t.nodeName=="IMG";e?n.collapse(t.parentNode,ro(t)+1):n.collapse(t,0),!e&&!i.state.selection.visible&&ca&&fc<=11&&(t.disabled=!0,t.disabled=!1)}function IM(i,n){if(n instanceof Ge){let t=i.docView.descAt(n.from);t!=i.lastSelectedViewDesc&&(pE(i),t&&t.selectNode(),i.lastSelectedViewDesc=t)}else pE(i)}function pE(i){i.lastSelectedViewDesc&&(i.lastSelectedViewDesc.parent&&i.lastSelectedViewDesc.deselectNode(),i.lastSelectedViewDesc=void 0)}function r1(i,n,t,e){return i.someProp("createSelectionBetween",r=>r(i,n,t))||an.between(n,t,e)}function vE(i){return i.editable&&!i.hasFocus()?!1:BM(i)}function BM(i){let n=i.domSelectionRange();if(!n.anchorNode)return!1;try{return i.dom.contains(n.anchorNode.nodeType==3?n.anchorNode.parentNode:n.anchorNode)&&(i.editable||i.dom.contains(n.focusNode.nodeType==3?n.focusNode.parentNode:n.focusNode))}catch{return!1}}function I3(i){let n=i.docView.domFromPos(i.state.selection.anchor,0),t=i.domSelectionRange();return If(n.node,n.offset,t.anchorNode,t.anchorOffset)}function TS(i,n){let{$anchor:t,$head:e}=i.selection,r=n>0?t.max(e):t.min(e),o=r.parent.inlineContent?r.depth?i.doc.resolve(n>0?r.after():r.before()):null:r;return o&&bn.findFrom(o,n)}function Zu(i,n){return i.dispatch(i.state.tr.setSelection(n).scrollIntoView()),!0}function gE(i,n,t){let e=i.state.selection;if(e instanceof an)if(t.indexOf("s")>-1){let{$head:r}=e,o=r.textOffset?null:n<0?r.nodeBefore:r.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let a=i.state.doc.resolve(r.pos+o.nodeSize*(n<0?-1:1));return Zu(i,new an(e.$anchor,a))}else if(e.empty){if(i.endOfTextblock(n>0?"forward":"backward")){let r=TS(i.state,n);return r&&r instanceof Ge?Zu(i,r):!1}else if(!(Za&&t.indexOf("m")>-1)){let r=e.$head,o=r.textOffset?null:n<0?r.nodeBefore:r.nodeAfter,a;if(!o||o.isText)return!1;let s=n<0?r.pos-o.nodeSize:r.pos;return o.isAtom||(a=i.docView.descAt(s))&&!a.contentDOM?Ge.isSelectable(o)?Zu(i,new Ge(n<0?i.state.doc.resolve(r.pos-o.nodeSize):r)):Cg?Zu(i,new an(i.state.doc.resolve(n<0?s:s+o.nodeSize))):!1:!1}}else return!1;else{if(e instanceof Ge&&e.node.isInline)return Zu(i,new an(n>0?e.$to:e.$from));{let r=TS(i.state,n);return r?Zu(i,r):!1}}}function Oy(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function Lv(i,n){let t=i.pmViewDesc;return t&&t.size==0&&(n<0||i.nextSibling||i.nodeName!="BR")}function Jd(i,n){return n<0?B3(i):U3(i)}function B3(i){let n=i.domSelectionRange(),t=n.focusNode,e=n.focusOffset;if(!t)return;let r,o,a=!1;for(is&&t.nodeType==1&&e<Oy(t)&&Lv(t.childNodes[e],-1)&&(a=!0);;)if(e>0){if(t.nodeType!=1)break;{let s=t.childNodes[e-1];if(Lv(s,-1))r=t,o=--e;else if(s.nodeType==3)t=s,e=t.nodeValue.length;else break}}else{if(UM(t))break;{let s=t.previousSibling;for(;s&&Lv(s,-1);)r=t.parentNode,o=ro(s),s=s.previousSibling;if(s)t=s,e=Oy(t);else{if(t=t.parentNode,t==i.dom)break;e=0}}}a?ES(i,t,e):r&&ES(i,r,o)}function U3(i){let n=i.domSelectionRange(),t=n.focusNode,e=n.focusOffset;if(!t)return;let r=Oy(t),o,a;for(;;)if(e<r){if(t.nodeType!=1)break;let s=t.childNodes[e];if(Lv(s,1))o=t,a=++e;else break}else{if(UM(t))break;{let s=t.nextSibling;for(;s&&Lv(s,1);)o=s.parentNode,a=ro(s)+1,s=s.nextSibling;if(s)t=s,e=0,r=Oy(t);else{if(t=t.parentNode,t==i.dom)break;e=r=0}}}o&&ES(i,o,a)}function UM(i){let n=i.pmViewDesc;return n&&n.node&&n.node.isBlock}function V3(i,n){for(;i&&n==i.childNodes.length&&!_g(i);)n=ro(i)+1,i=i.parentNode;for(;i&&n<i.childNodes.length;){let t=i.childNodes[n];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;i=t,n=0}}function F3(i,n){for(;i&&!n&&!_g(i);)n=ro(i),i=i.parentNode;for(;i&&n;){let t=i.childNodes[n-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;i=t,n=i.childNodes.length}}function ES(i,n,t){if(n.nodeType!=3){let o,a;(a=V3(n,t))?(n=a,t=0):(o=F3(n,t))&&(n=o,t=o.nodeValue.length)}let e=i.domSelection();if(!e)return;if(Cb(e)){let o=document.createRange();o.setEnd(n,t),o.setStart(n,t),e.removeAllRanges(),e.addRange(o)}else e.extend&&e.extend(n,t);i.domObserver.setCurSelection();let{state:r}=i;setTimeout(()=>{i.state==r&&eu(i)},50)}function mE(i,n){let t=i.state.doc.resolve(n);if(!(ho||u3)&&t.parent.inlineContent){let r=i.coordsAtPos(n);if(n>t.start()){let o=i.coordsAtPos(n-1),a=(o.top+o.bottom)/2;if(a>r.top&&a<r.bottom&&Math.abs(o.left-r.left)>1)return o.left<r.left?"ltr":"rtl"}if(n<t.end()){let o=i.coordsAtPos(n+1),a=(o.top+o.bottom)/2;if(a>r.top&&a<r.bottom&&Math.abs(o.left-r.left)>1)return o.left>r.left?"ltr":"rtl"}}return getComputedStyle(i.dom).direction=="rtl"?"rtl":"ltr"}function yE(i,n,t){let e=i.state.selection;if(e instanceof an&&!e.empty||t.indexOf("s")>-1||Za&&t.indexOf("m")>-1)return!1;let{$from:r,$to:o}=e;if(!r.parent.inlineContent||i.endOfTextblock(n<0?"up":"down")){let a=TS(i.state,n);if(a&&a instanceof Ge)return Zu(i,a)}if(!r.parent.inlineContent){let a=n<0?r:o,s=e instanceof Pa?bn.near(a,n):bn.findFrom(a,n);return s?Zu(i,s):!1}return!1}function bE(i,n){if(!(i.state.selection instanceof an))return!0;let{$head:t,$anchor:e,empty:r}=i.state.selection;if(!t.sameParent(e))return!0;if(!r)return!1;if(i.endOfTextblock(n>0?"forward":"backward"))return!0;let o=!t.textOffset&&(n<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let a=i.state.tr;return n<0?a.delete(t.pos-o.nodeSize,t.pos):a.delete(t.pos,t.pos+o.nodeSize),i.dispatch(a),!0}return!1}function wE(i,n,t){i.domObserver.stop(),n.contentEditable=t,i.domObserver.start()}function H3(i){if(!Lo||i.state.selection.$head.parentOffset>0)return!1;let{focusNode:n,focusOffset:t}=i.domSelectionRange();if(n&&n.nodeType==1&&t==0&&n.firstChild&&n.firstChild.contentEditable=="false"){let e=n.firstChild;wE(i,e,"true"),setTimeout(()=>wE(i,e,"false"),20)}return!1}function z3(i){let n="";return i.ctrlKey&&(n+="c"),i.metaKey&&(n+="m"),i.altKey&&(n+="a"),i.shiftKey&&(n+="s"),n}function W3(i,n){let t=n.keyCode,e=z3(n);if(t==8||Za&&t==72&&e=="c")return bE(i,-1)||Jd(i,-1);if(t==46&&!n.shiftKey||Za&&t==68&&e=="c")return bE(i,1)||Jd(i,1);if(t==13||t==27)return!0;if(t==37||Za&&t==66&&e=="c"){let r=t==37?mE(i,i.state.selection.from)=="ltr"?-1:1:-1;return gE(i,r,e)||Jd(i,r)}else if(t==39||Za&&t==70&&e=="c"){let r=t==39?mE(i,i.state.selection.from)=="ltr"?1:-1:1;return gE(i,r,e)||Jd(i,r)}else{if(t==38||Za&&t==80&&e=="c")return yE(i,-1,e)||Jd(i,-1);if(t==40||Za&&t==78&&e=="c")return H3(i)||yE(i,1,e)||Jd(i,1);if(e==(Za?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function i1(i,n){i.someProp("transformCopied",y=>{n=y(n,i)});let t=[],{content:e,openStart:r,openEnd:o}=n;for(;r>1&&o>1&&e.childCount==1&&e.firstChild.childCount==1;){r--,o--;let y=e.firstChild;t.push(y.type.name,y.attrs!=y.type.defaultAttrs?y.attrs:null),e=y.content}let a=i.someProp("clipboardSerializer")||Wf.fromSchema(i.state.schema),s=qM(),u=s.createElement("div");u.appendChild(a.serializeFragment(e,{document:s}));let c=u.firstChild,h,v=0;for(;c&&c.nodeType==1&&(h=WM[c.nodeName.toLowerCase()]);){for(let y=h.length-1;y>=0;y--){let _=s.createElement(h[y]);for(;u.firstChild;)_.appendChild(u.firstChild);u.appendChild(_),v++}c=u.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${r} ${o}${v?` -${v}`:""} ${JSON.stringify(t)}`);let m=i.someProp("clipboardTextSerializer",y=>y(n,i))||n.content.textBetween(0,n.content.size,`

`);return{dom:u,text:m,slice:n}}function VM(i,n,t,e,r){let o=r.parent.type.spec.code,a,s;if(!t&&!n)return null;let u=!!n&&(e||o||!t);if(u){if(i.someProp("transformPastedText",m=>{n=m(n,o||e,i)}),o)return s=new Ne(ge.from(i.state.schema.text(n.replace(/\r\n?/g,`
`))),0,0),i.someProp("transformPasted",m=>{s=m(s,i,!0)}),s;let v=i.someProp("clipboardTextParser",m=>m(n,r,e,i));if(v)s=v;else{let m=r.marks(),{schema:y}=i.state,_=Wf.fromSchema(y);a=document.createElement("div"),n.split(/(?:\r\n?|\n)+/).forEach(C=>{let E=a.appendChild(document.createElement("p"));C&&E.appendChild(_.serializeNode(y.text(C,m)))})}}else i.someProp("transformPastedHTML",v=>{t=v(t,i)}),a=G3(t),Cg&&Y3(a);let c=a&&a.querySelector("[data-pm-slice]"),h=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let v=+h[3];v>0;v--){let m=a.firstChild;for(;m&&m.nodeType!=1;)m=m.nextSibling;if(!m)break;a=m}if(s||(s=(i.someProp("clipboardParser")||i.someProp("domParser")||Nv.fromSchema(i.state.schema)).parseSlice(a,{preserveWhitespace:!!(u||h),context:r,ruleFromNode(m){return m.nodeName=="BR"&&!m.nextSibling&&m.parentNode&&!q3.test(m.parentNode.nodeName)?{ignore:!0}:null}})),h)s=X3(xE(s,+h[1],+h[2]),h[4]);else if(s=Ne.maxOpen(K3(s.content,r),!0),s.openStart||s.openEnd){let v=0,m=0;for(let y=s.content.firstChild;v<s.openStart&&!y.type.spec.isolating;v++,y=y.firstChild);for(let y=s.content.lastChild;m<s.openEnd&&!y.type.spec.isolating;m++,y=y.lastChild);s=xE(s,v,m)}return i.someProp("transformPasted",v=>{s=v(s,i,u)}),s}const q3=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function K3(i,n){if(i.childCount<2)return i;for(let t=n.depth;t>=0;t--){let r=n.node(t).contentMatchAt(n.index(t)),o,a=[];if(i.forEach(s=>{if(!a)return;let u=r.findWrapping(s.type),c;if(!u)return a=null;if(c=a.length&&o.length&&HM(u,o,s,a[a.length-1],0))a[a.length-1]=c;else{a.length&&(a[a.length-1]=zM(a[a.length-1],o.length));let h=FM(s,u);a.push(h),r=r.matchType(h.type),o=u}}),a)return ge.from(a)}return i}function FM(i,n,t=0){for(let e=n.length-1;e>=t;e--)i=n[e].create(null,ge.from(i));return i}function HM(i,n,t,e,r){if(r<i.length&&r<n.length&&i[r]==n[r]){let o=HM(i,n,t,e.lastChild,r+1);if(o)return e.copy(e.content.replaceChild(e.childCount-1,o));if(e.contentMatchAt(e.childCount).matchType(r==i.length-1?t.type:i[r+1]))return e.copy(e.content.append(ge.from(FM(t,i,r+1))))}}function zM(i,n){if(n==0)return i;let t=i.content.replaceChild(i.childCount-1,zM(i.lastChild,n-1)),e=i.contentMatchAt(i.childCount).fillBefore(ge.empty,!0);return i.copy(t.append(e))}function OS(i,n,t,e,r,o){let a=n<0?i.firstChild:i.lastChild,s=a.content;return i.childCount>1&&(o=0),r<e-1&&(s=OS(s,n,t,e,r+1,o)),r>=t&&(s=n<0?a.contentMatchAt(0).fillBefore(s,o<=r).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(ge.empty,!0))),i.replaceChild(n<0?0:i.childCount-1,a.copy(s))}function xE(i,n,t){return n<i.openStart&&(i=new Ne(OS(i.content,-1,n,i.openStart,0,i.openEnd),n,i.openEnd)),t<i.openEnd&&(i=new Ne(OS(i.content,1,t,i.openEnd,0,0),i.openStart,t)),i}const WM={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let SE=null;function qM(){return SE||(SE=document.implementation.createHTMLDocument("title"))}let Yw=null;function $3(i){let n=window.trustedTypes;return n?(Yw||(Yw=n.defaultPolicy||n.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Yw.createHTML(i)):i}function G3(i){let n=/^(\s*<meta [^>]*>)*/.exec(i);n&&(i=i.slice(n[0].length));let t=qM().createElement("div"),e=/<([a-z][^>\s]+)/i.exec(i),r;if((r=e&&WM[e[1].toLowerCase()])&&(i=r.map(o=>"<"+o+">").join("")+i+r.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=$3(i),r)for(let o=0;o<r.length;o++)t=t.querySelector(r[o])||t;return t}function Y3(i){let n=i.querySelectorAll(ho?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<n.length;t++){let e=n[t];e.childNodes.length==1&&e.textContent==""&&e.parentNode&&e.parentNode.replaceChild(i.ownerDocument.createTextNode(" "),e)}}function X3(i,n){if(!i.size)return i;let t=i.content.firstChild.type.schema,e;try{e=JSON.parse(n)}catch{return i}let{content:r,openStart:o,openEnd:a}=i;for(let s=e.length-2;s>=0;s-=2){let u=t.nodes[e[s]];if(!u||u.hasRequiredAttrs())break;r=ge.from(u.create(e[s+1],r)),o++,a++}return new Ne(r,o,a)}const jo={},Io={},J3={touchstart:!0,touchmove:!0};class Z3{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Q3(i){for(let n in jo){let t=jo[n];i.dom.addEventListener(n,i.input.eventHandlers[n]=e=>{e4(i,e)&&!o1(i,e)&&(i.editable||!(e.type in Io))&&t(i,e)},J3[n]?{passive:!0}:void 0)}Lo&&i.dom.addEventListener("input",()=>null),AS(i)}function lc(i,n){i.input.lastSelectionOrigin=n,i.input.lastSelectionTime=Date.now()}function t4(i){i.domObserver.stop();for(let n in i.input.eventHandlers)i.dom.removeEventListener(n,i.input.eventHandlers[n]);clearTimeout(i.input.composingTimeout),clearTimeout(i.input.lastIOSEnterFallbackTimeout)}function AS(i){i.someProp("handleDOMEvents",n=>{for(let t in n)i.input.eventHandlers[t]||i.dom.addEventListener(t,i.input.eventHandlers[t]=e=>o1(i,e))})}function o1(i,n){return i.someProp("handleDOMEvents",t=>{let e=t[n.type];return e?e(i,n)||n.defaultPrevented:!1})}function e4(i,n){if(!n.bubbles)return!0;if(n.defaultPrevented)return!1;for(let t=n.target;t!=i.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(n))return!1;return!0}function n4(i,n){!o1(i,n)&&jo[n.type]&&(i.editable||!(n.type in Io))&&jo[n.type](i,n)}Io.keydown=(i,n)=>{let t=n;if(i.input.shiftKey=t.keyCode==16||t.shiftKey,!$M(i,t)&&(i.input.lastKeyCode=t.keyCode,i.input.lastKeyCodeTime=Date.now(),!(Jl&&ho&&t.keyCode==13)))if(t.keyCode!=229&&i.domObserver.forceFlush(),Lh&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let e=Date.now();i.input.lastIOSEnter=e,i.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{i.input.lastIOSEnter==e&&(i.someProp("handleKeyDown",r=>r(i,mf(13,"Enter"))),i.input.lastIOSEnter=0)},200)}else i.someProp("handleKeyDown",e=>e(i,t))||W3(i,t)?t.preventDefault():lc(i,"key")};Io.keyup=(i,n)=>{n.keyCode==16&&(i.input.shiftKey=!1)};Io.keypress=(i,n)=>{let t=n;if($M(i,t)||!t.charCode||t.ctrlKey&&!t.altKey||Za&&t.metaKey)return;if(i.someProp("handleKeyPress",r=>r(i,t))){t.preventDefault();return}let e=i.state.selection;if(!(e instanceof an)||!e.$from.sameParent(e.$to)){let r=String.fromCharCode(t.charCode),o=()=>i.state.tr.insertText(r).scrollIntoView();!/[\r\n]/.test(r)&&!i.someProp("handleTextInput",a=>a(i,e.$from.pos,e.$to.pos,r,o))&&i.dispatch(o()),t.preventDefault()}};function Eb(i){return{left:i.clientX,top:i.clientY}}function r4(i,n){let t=n.x-i.clientX,e=n.y-i.clientY;return t*t+e*e<100}function a1(i,n,t,e,r){if(e==-1)return!1;let o=i.state.doc.resolve(e);for(let a=o.depth+1;a>0;a--)if(i.someProp(n,s=>a>o.depth?s(i,t,o.nodeAfter,o.before(a),r,!0):s(i,t,o.node(a),o.before(a),r,!1)))return!0;return!1}function kh(i,n,t){if(i.focused||i.focus(),i.state.selection.eq(n))return;let e=i.state.tr.setSelection(n);e.setMeta("pointer",!0),i.dispatch(e)}function i4(i,n){if(n==-1)return!1;let t=i.state.doc.resolve(n),e=t.nodeAfter;return e&&e.isAtom&&Ge.isSelectable(e)?(kh(i,new Ge(t)),!0):!1}function o4(i,n){if(n==-1)return!1;let t=i.state.selection,e,r;t instanceof Ge&&(e=t.node);let o=i.state.doc.resolve(n);for(let a=o.depth+1;a>0;a--){let s=a>o.depth?o.nodeAfter:o.node(a);if(Ge.isSelectable(s)){e&&t.$from.depth>0&&a>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?r=o.before(t.$from.depth):r=o.before(a);break}}return r!=null?(kh(i,Ge.create(i.state.doc,r)),!0):!1}function a4(i,n,t,e,r){return a1(i,"handleClickOn",n,t,e)||i.someProp("handleClick",o=>o(i,n,e))||(r?o4(i,t):i4(i,t))}function s4(i,n,t,e){return a1(i,"handleDoubleClickOn",n,t,e)||i.someProp("handleDoubleClick",r=>r(i,n,e))}function l4(i,n,t,e){return a1(i,"handleTripleClickOn",n,t,e)||i.someProp("handleTripleClick",r=>r(i,n,e))||u4(i,t,e)}function u4(i,n,t){if(t.button!=0)return!1;let e=i.state.doc;if(n==-1)return e.inlineContent?(kh(i,an.create(e,0,e.content.size)),!0):!1;let r=e.resolve(n);for(let o=r.depth+1;o>0;o--){let a=o>r.depth?r.nodeAfter:r.node(o),s=r.before(o);if(a.inlineContent)kh(i,an.create(e,s+1,s+1+a.content.size));else if(Ge.isSelectable(a))kh(i,Ge.create(e,s));else continue;return!0}}function s1(i){return Ay(i)}const KM=Za?"metaKey":"ctrlKey";jo.mousedown=(i,n)=>{let t=n;i.input.shiftKey=t.shiftKey;let e=s1(i),r=Date.now(),o="singleClick";r-i.input.lastClick.time<500&&r4(t,i.input.lastClick)&&!t[KM]&&i.input.lastClick.button==t.button&&(i.input.lastClick.type=="singleClick"?o="doubleClick":i.input.lastClick.type=="doubleClick"&&(o="tripleClick")),i.input.lastClick={time:r,x:t.clientX,y:t.clientY,type:o,button:t.button};let a=i.posAtCoords(Eb(t));a&&(o=="singleClick"?(i.input.mouseDown&&i.input.mouseDown.done(),i.input.mouseDown=new c4(i,a,t,!!e)):(o=="doubleClick"?s4:l4)(i,a.pos,a.inside,t)?t.preventDefault():lc(i,"pointer"))};class c4{constructor(n,t,e,r){this.view=n,this.pos=t,this.event=e,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=n.state.doc,this.selectNode=!!e[KM],this.allowDefault=e.shiftKey;let o,a;if(t.inside>-1)o=n.state.doc.nodeAt(t.inside),a=t.inside;else{let h=n.state.doc.resolve(t.pos);o=h.parent,a=h.depth?h.before():0}const s=r?null:e.target,u=s?n.docView.nearestDesc(s,!0):null;this.target=u&&u.nodeDOM.nodeType==1?u.nodeDOM:null;let{selection:c}=n.state;(e.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof Ge&&c.from<=a&&c.to>a)&&(this.mightDrag={node:o,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&is&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),n.root.addEventListener("mouseup",this.up=this.up.bind(this)),n.root.addEventListener("mousemove",this.move=this.move.bind(this)),lc(n,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>eu(this.view)),this.view.input.mouseDown=null}up(n){if(this.done(),!this.view.dom.contains(n.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Eb(n))),this.updateAllowDefault(n),this.allowDefault||!t?lc(this.view,"pointer"):a4(this.view,t.pos,t.inside,n,this.selectNode)?n.preventDefault():n.button==0&&(this.flushed||Lo&&this.mightDrag&&!this.mightDrag.node.isAtom||ho&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(kh(this.view,bn.near(this.view.state.doc.resolve(t.pos))),n.preventDefault()):lc(this.view,"pointer")}move(n){this.updateAllowDefault(n),lc(this.view,"pointer"),n.buttons==0&&this.done()}updateAllowDefault(n){!this.allowDefault&&(Math.abs(this.event.x-n.clientX)>4||Math.abs(this.event.y-n.clientY)>4)&&(this.allowDefault=!0)}}jo.touchstart=i=>{i.input.lastTouch=Date.now(),s1(i),lc(i,"pointer")};jo.touchmove=i=>{i.input.lastTouch=Date.now(),lc(i,"pointer")};jo.contextmenu=i=>s1(i);function $M(i,n){return i.composing?!0:Lo&&Math.abs(n.timeStamp-i.input.compositionEndedAt)<500?(i.input.compositionEndedAt=-2e8,!0):!1}const f4=Jl?5e3:-1;Io.compositionstart=Io.compositionupdate=i=>{if(!i.composing){i.domObserver.flush();let{state:n}=i,t=n.selection.$to;if(n.selection instanceof an&&(n.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(e=>e.type.spec.inclusive===!1)))i.markCursor=i.state.storedMarks||t.marks(),Ay(i,!0),i.markCursor=null;else if(Ay(i,!n.selection.empty),is&&n.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let e=i.domSelectionRange();for(let r=e.focusNode,o=e.focusOffset;r&&r.nodeType==1&&o!=0;){let a=o<0?r.lastChild:r.childNodes[o-1];if(!a)break;if(a.nodeType==3){let s=i.domSelection();s&&s.collapse(a,a.nodeValue.length);break}else r=a,o=-1}}i.input.composing=!0}GM(i,f4)};Io.compositionend=(i,n)=>{i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=n.timeStamp,i.input.compositionPendingChanges=i.domObserver.pendingRecords().length?i.input.compositionID:0,i.input.compositionNode=null,i.input.compositionPendingChanges&&Promise.resolve().then(()=>i.domObserver.flush()),i.input.compositionID++,GM(i,20))};function GM(i,n){clearTimeout(i.input.composingTimeout),n>-1&&(i.input.composingTimeout=setTimeout(()=>Ay(i),n))}function YM(i){for(i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=h4());i.input.compositionNodes.length>0;)i.input.compositionNodes.pop().markParentsDirty()}function d4(i){let n=i.domSelectionRange();if(!n.focusNode)return null;let t=i3(n.focusNode,n.focusOffset),e=o3(n.focusNode,n.focusOffset);if(t&&e&&t!=e){let r=e.pmViewDesc,o=i.domObserver.lastChangedTextNode;if(t==o||e==o)return o;if(!r||!r.isText(e.nodeValue))return e;if(i.input.compositionNode==e){let a=t.pmViewDesc;if(!(!a||!a.isText(t.nodeValue)))return e}}return t||e}function h4(){let i=document.createEvent("Event");return i.initEvent("event",!0,!0),i.timeStamp}function Ay(i,n=!1){if(!(Jl&&i.domObserver.flushingSoon>=0)){if(i.domObserver.forceFlush(),YM(i),n||i.docView&&i.docView.dirty){let t=n1(i),e=i.state.selection;return t&&!t.eq(e)?i.dispatch(i.state.tr.setSelection(t)):(i.markCursor||n)&&!e.$from.node(e.$from.sharedDepth(e.to)).inlineContent?i.dispatch(i.state.tr.deleteSelection()):i.updateState(i.state),!0}return!1}}function p4(i,n){if(!i.dom.parentNode)return;let t=i.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(n),t.style.cssText="position: fixed; left: -10000px; top: 10px";let e=getSelection(),r=document.createRange();r.selectNodeContents(n),i.dom.blur(),e.removeAllRanges(),e.addRange(r),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),i.focus()},50)}const ig=ca&&fc<15||Lh&&c3<604;jo.copy=Io.cut=(i,n)=>{let t=n,e=i.state.selection,r=t.type=="cut";if(e.empty)return;let o=ig?null:t.clipboardData,a=e.content(),{dom:s,text:u}=i1(i,a);o?(t.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",u)):p4(i,s),r&&i.dispatch(i.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function v4(i){return i.openStart==0&&i.openEnd==0&&i.content.childCount==1?i.content.firstChild:null}function g4(i,n){if(!i.dom.parentNode)return;let t=i.input.shiftKey||i.state.selection.$from.parent.type.spec.code,e=i.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(e.contentEditable="true"),e.style.cssText="position: fixed; left: -10000px; top: 10px",e.focus();let r=i.input.shiftKey&&i.input.lastKeyCode!=45;setTimeout(()=>{i.focus(),e.parentNode&&e.parentNode.removeChild(e),t?og(i,e.value,null,r,n):og(i,e.textContent,e.innerHTML,r,n)},50)}function og(i,n,t,e,r){let o=VM(i,n,t,e,i.state.selection.$from);if(i.someProp("handlePaste",u=>u(i,r,o||Ne.empty)))return!0;if(!o)return!1;let a=v4(o),s=a?i.state.tr.replaceSelectionWith(a,e):i.state.tr.replaceSelection(o);return i.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function XM(i){let n=i.getData("text/plain")||i.getData("Text");if(n)return n;let t=i.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Io.paste=(i,n)=>{let t=n;if(i.composing&&!Jl)return;let e=ig?null:t.clipboardData,r=i.input.shiftKey&&i.input.lastKeyCode!=45;e&&og(i,XM(e),e.getData("text/html"),r,t)?t.preventDefault():g4(i,t)};class JM{constructor(n,t,e){this.slice=n,this.move=t,this.node=e}}const m4=Za?"altKey":"ctrlKey";function ZM(i,n){let t=i.someProp("dragCopies",e=>!e(n));return t??!n[m4]}jo.dragstart=(i,n)=>{let t=n,e=i.input.mouseDown;if(e&&e.done(),!t.dataTransfer)return;let r=i.state.selection,o=r.empty?null:i.posAtCoords(Eb(t)),a;if(!(o&&o.pos>=r.from&&o.pos<=(r instanceof Ge?r.to-1:r.to))){if(e&&e.mightDrag)a=Ge.create(i.state.doc,e.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let v=i.docView.nearestDesc(t.target,!0);v&&v.node.type.spec.draggable&&v!=i.docView&&(a=Ge.create(i.state.doc,v.posBefore))}}let s=(a||i.state.selection).content(),{dom:u,text:c,slice:h}=i1(i,s);(!t.dataTransfer.files.length||!ho||CM>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(ig?"Text":"text/html",u.innerHTML),t.dataTransfer.effectAllowed="copyMove",ig||t.dataTransfer.setData("text/plain",c),i.dragging=new JM(h,ZM(i,t),a)};jo.dragend=i=>{let n=i.dragging;window.setTimeout(()=>{i.dragging==n&&(i.dragging=null)},50)};Io.dragover=Io.dragenter=(i,n)=>n.preventDefault();Io.drop=(i,n)=>{let t=n,e=i.dragging;if(i.dragging=null,!t.dataTransfer)return;let r=i.posAtCoords(Eb(t));if(!r)return;let o=i.state.doc.resolve(r.pos),a=e&&e.slice;a?i.someProp("transformPasted",_=>{a=_(a,i,!1)}):a=VM(i,XM(t.dataTransfer),ig?null:t.dataTransfer.getData("text/html"),!1,o);let s=!!(e&&ZM(i,t));if(i.someProp("handleDrop",_=>_(i,t,a||Ne.empty,s))){t.preventDefault();return}if(!a)return;t.preventDefault();let u=a?rM(i.state.doc,o.pos,a):o.pos;u==null&&(u=o.pos);let c=i.state.tr;if(s){let{node:_}=e;_?_.replace(c):c.deleteSelection()}let h=c.mapping.map(u),v=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,m=c.doc;if(v?c.replaceRangeWith(h,h,a.content.firstChild):c.replaceRange(h,h,a),c.doc.eq(m))return;let y=c.doc.resolve(h);if(v&&Ge.isSelectable(a.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(a.content.firstChild))c.setSelection(new Ge(y));else{let _=c.mapping.map(u);c.mapping.maps[c.mapping.maps.length-1].forEach((C,E,D,F)=>_=F),c.setSelection(r1(i,y,c.doc.resolve(_)))}i.focus(),i.dispatch(c.setMeta("uiEvent","drop"))};jo.focus=i=>{i.input.lastFocus=Date.now(),i.focused||(i.domObserver.stop(),i.dom.classList.add("ProseMirror-focused"),i.domObserver.start(),i.focused=!0,setTimeout(()=>{i.docView&&i.hasFocus()&&!i.domObserver.currentSelection.eq(i.domSelectionRange())&&eu(i)},20))};jo.blur=(i,n)=>{let t=n;i.focused&&(i.domObserver.stop(),i.dom.classList.remove("ProseMirror-focused"),i.domObserver.start(),t.relatedTarget&&i.dom.contains(t.relatedTarget)&&i.domObserver.currentSelection.clear(),i.focused=!1)};jo.beforeinput=(i,n)=>{if(ho&&Jl&&n.inputType=="deleteContentBackward"){i.domObserver.flushSoon();let{domChangeCount:e}=i.input;setTimeout(()=>{if(i.input.domChangeCount!=e||(i.dom.blur(),i.focus(),i.someProp("handleKeyDown",o=>o(i,mf(8,"Backspace")))))return;let{$cursor:r}=i.state.selection;r&&r.pos>0&&i.dispatch(i.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let i in Io)jo[i]=Io[i];function ag(i,n){if(i==n)return!0;for(let t in i)if(i[t]!==n[t])return!1;for(let t in n)if(!(t in i))return!1;return!0}class ky{constructor(n,t){this.toDOM=n,this.spec=t||Pf,this.side=this.spec.side||0}map(n,t,e,r){let{pos:o,deleted:a}=n.mapResult(t.from+r,this.side<0?-1:1);return a?null:new No(o-e,o-e,this)}valid(){return!0}eq(n){return this==n||n instanceof ky&&(this.spec.key&&this.spec.key==n.spec.key||this.toDOM==n.toDOM&&ag(this.spec,n.spec))}destroy(n){this.spec.destroy&&this.spec.destroy(n)}}class hc{constructor(n,t){this.attrs=n,this.spec=t||Pf}map(n,t,e,r){let o=n.map(t.from+r,this.spec.inclusiveStart?-1:1)-e,a=n.map(t.to+r,this.spec.inclusiveEnd?1:-1)-e;return o>=a?null:new No(o,a,this)}valid(n,t){return t.from<t.to}eq(n){return this==n||n instanceof hc&&ag(this.attrs,n.attrs)&&ag(this.spec,n.spec)}static is(n){return n.type instanceof hc}destroy(){}}class l1{constructor(n,t){this.attrs=n,this.spec=t||Pf}map(n,t,e,r){let o=n.mapResult(t.from+r,1);if(o.deleted)return null;let a=n.mapResult(t.to+r,-1);return a.deleted||a.pos<=o.pos?null:new No(o.pos-e,a.pos-e,this)}valid(n,t){let{index:e,offset:r}=n.content.findIndex(t.from),o;return r==t.from&&!(o=n.child(e)).isText&&r+o.nodeSize==t.to}eq(n){return this==n||n instanceof l1&&ag(this.attrs,n.attrs)&&ag(this.spec,n.spec)}destroy(){}}class No{constructor(n,t,e){this.from=n,this.to=t,this.type=e}copy(n,t){return new No(n,t,this.type)}eq(n,t=0){return this.type.eq(n.type)&&this.from+t==n.from&&this.to+t==n.to}map(n,t,e){return this.type.map(n,this,t,e)}static widget(n,t,e){return new No(n,n,new ky(t,e))}static inline(n,t,e,r){return new No(n,t,new hc(e,r))}static node(n,t,e,r){return new No(n,t,new l1(e,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof hc}get widget(){return this.type instanceof ky}}const ih=[],Pf={};class Pr{constructor(n,t){this.local=n.length?n:ih,this.children=t.length?t:ih}static create(n,t){return t.length?My(t,n,0,Pf):fo}find(n,t,e){let r=[];return this.findInner(n??0,t??1e9,r,0,e),r}findInner(n,t,e,r,o){for(let a=0;a<this.local.length;a++){let s=this.local[a];s.from<=t&&s.to>=n&&(!o||o(s.spec))&&e.push(s.copy(s.from+r,s.to+r))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>n){let s=this.children[a]+1;this.children[a+2].findInner(n-s,t-s,e,r+s,o)}}map(n,t,e){return this==fo||n.maps.length==0?this:this.mapInner(n,t,0,0,e||Pf)}mapInner(n,t,e,r,o){let a;for(let s=0;s<this.local.length;s++){let u=this.local[s].map(n,e,r);u&&u.type.valid(t,u)?(a||(a=[])).push(u):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?y4(this.children,a||[],n,t,e,r,o):a?new Pr(a.sort(Nf),ih):fo}add(n,t){return t.length?this==fo?Pr.create(n,t):this.addInner(n,t,0):this}addInner(n,t,e){let r,o=0;n.forEach((s,u)=>{let c=u+e,h;if(h=t2(t,s,c)){for(r||(r=this.children.slice());o<r.length&&r[o]<u;)o+=3;r[o]==u?r[o+2]=r[o+2].addInner(s,h,c+1):r.splice(o,0,u,u+s.nodeSize,My(h,s,c+1,Pf)),o+=3}});let a=QM(o?e2(t):t,-e);for(let s=0;s<a.length;s++)a[s].type.valid(n,a[s])||a.splice(s--,1);return new Pr(a.length?this.local.concat(a).sort(Nf):this.local,r||this.children)}remove(n){return n.length==0||this==fo?this:this.removeInner(n,0)}removeInner(n,t){let e=this.children,r=this.local;for(let o=0;o<e.length;o+=3){let a,s=e[o]+t,u=e[o+1]+t;for(let h=0,v;h<n.length;h++)(v=n[h])&&v.from>s&&v.to<u&&(n[h]=null,(a||(a=[])).push(v));if(!a)continue;e==this.children&&(e=this.children.slice());let c=e[o+2].removeInner(a,s+1);c!=fo?e[o+2]=c:(e.splice(o,3),o-=3)}if(r.length){for(let o=0,a;o<n.length;o++)if(a=n[o])for(let s=0;s<r.length;s++)r[s].eq(a,t)&&(r==this.local&&(r=this.local.slice()),r.splice(s--,1))}return e==this.children&&r==this.local?this:r.length||e.length?new Pr(r,e):fo}forChild(n,t){if(this==fo)return this;if(t.isLeaf)return Pr.empty;let e,r;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=n){this.children[s]==n&&(e=this.children[s+2]);break}let o=n+1,a=o+t.content.size;for(let s=0;s<this.local.length;s++){let u=this.local[s];if(u.from<a&&u.to>o&&u.type instanceof hc){let c=Math.max(o,u.from)-o,h=Math.min(a,u.to)-o;c<h&&(r||(r=[])).push(u.copy(c,h))}}if(r){let s=new Pr(r.sort(Nf),ih);return e?new ic([s,e]):s}return e||fo}eq(n){if(this==n)return!0;if(!(n instanceof Pr)||this.local.length!=n.local.length||this.children.length!=n.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(n.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=n.children[t]||this.children[t+1]!=n.children[t+1]||!this.children[t+2].eq(n.children[t+2]))return!1;return!0}locals(n){return u1(this.localsInner(n))}localsInner(n){if(this==fo)return ih;if(n.inlineContent||!this.local.some(hc.is))return this.local;let t=[];for(let e=0;e<this.local.length;e++)this.local[e].type instanceof hc||t.push(this.local[e]);return t}forEachSet(n){n(this)}}Pr.empty=new Pr([],[]);Pr.removeOverlap=u1;const fo=Pr.empty;class ic{constructor(n){this.members=n}map(n,t){const e=this.members.map(r=>r.map(n,t,Pf));return ic.from(e)}forChild(n,t){if(t.isLeaf)return Pr.empty;let e=[];for(let r=0;r<this.members.length;r++){let o=this.members[r].forChild(n,t);o!=fo&&(o instanceof ic?e=e.concat(o.members):e.push(o))}return ic.from(e)}eq(n){if(!(n instanceof ic)||n.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(n.members[t]))return!1;return!0}locals(n){let t,e=!0;for(let r=0;r<this.members.length;r++){let o=this.members[r].localsInner(n);if(o.length)if(!t)t=o;else{e&&(t=t.slice(),e=!1);for(let a=0;a<o.length;a++)t.push(o[a])}}return t?u1(e?t:t.sort(Nf)):ih}static from(n){switch(n.length){case 0:return fo;case 1:return n[0];default:return new ic(n.every(t=>t instanceof Pr)?n:n.reduce((t,e)=>t.concat(e instanceof Pr?e:e.members),[]))}}forEachSet(n){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(n)}}function y4(i,n,t,e,r,o,a){let s=i.slice();for(let c=0,h=o;c<t.maps.length;c++){let v=0;t.maps[c].forEach((m,y,_,C)=>{let E=C-_-(y-m);for(let D=0;D<s.length;D+=3){let F=s[D+1];if(F<0||m>F+h-v)continue;let V=s[D]+h-v;y>=V?s[D+1]=m<=V?-2:-1:m>=h&&E&&(s[D]+=E,s[D+1]+=E)}v+=E}),h=t.maps[c].map(h,-1)}let u=!1;for(let c=0;c<s.length;c+=3)if(s[c+1]<0){if(s[c+1]==-2){u=!0,s[c+1]=-1;continue}let h=t.map(i[c]+o),v=h-r;if(v<0||v>=e.content.size){u=!0;continue}let m=t.map(i[c+1]+o,-1),y=m-r,{index:_,offset:C}=e.content.findIndex(v),E=e.maybeChild(_);if(E&&C==v&&C+E.nodeSize==y){let D=s[c+2].mapInner(t,E,h+1,i[c]+o+1,a);D!=fo?(s[c]=v,s[c+1]=y,s[c+2]=D):(s[c+1]=-2,u=!0)}else u=!0}if(u){let c=b4(s,i,n,t,r,o,a),h=My(c,e,0,a);n=h.local;for(let v=0;v<s.length;v+=3)s[v+1]<0&&(s.splice(v,3),v-=3);for(let v=0,m=0;v<h.children.length;v+=3){let y=h.children[v];for(;m<s.length&&s[m]<y;)m+=3;s.splice(m,0,h.children[v],h.children[v+1],h.children[v+2])}}return new Pr(n.sort(Nf),s)}function QM(i,n){if(!n||!i.length)return i;let t=[];for(let e=0;e<i.length;e++){let r=i[e];t.push(new No(r.from+n,r.to+n,r.type))}return t}function b4(i,n,t,e,r,o,a){function s(u,c){for(let h=0;h<u.local.length;h++){let v=u.local[h].map(e,r,c);v?t.push(v):a.onRemove&&a.onRemove(u.local[h].spec)}for(let h=0;h<u.children.length;h+=3)s(u.children[h+2],u.children[h]+c+1)}for(let u=0;u<i.length;u+=3)i[u+1]==-1&&s(i[u+2],n[u]+o+1);return t}function t2(i,n,t){if(n.isLeaf)return null;let e=t+n.nodeSize,r=null;for(let o=0,a;o<i.length;o++)(a=i[o])&&a.from>t&&a.to<e&&((r||(r=[])).push(a),i[o]=null);return r}function e2(i){let n=[];for(let t=0;t<i.length;t++)i[t]!=null&&n.push(i[t]);return n}function My(i,n,t,e){let r=[],o=!1;n.forEach((s,u)=>{let c=t2(i,s,u+t);if(c){o=!0;let h=My(c,s,t+u+1,e);h!=fo&&r.push(u,u+s.nodeSize,h)}});let a=QM(o?e2(i):i,-t).sort(Nf);for(let s=0;s<a.length;s++)a[s].type.valid(n,a[s])||(e.onRemove&&e.onRemove(a[s].spec),a.splice(s--,1));return a.length||r.length?new Pr(a,r):fo}function Nf(i,n){return i.from-n.from||i.to-n.to}function u1(i){let n=i;for(let t=0;t<n.length-1;t++){let e=n[t];if(e.from!=e.to)for(let r=t+1;r<n.length;r++){let o=n[r];if(o.from==e.from){o.to!=e.to&&(n==i&&(n=i.slice()),n[r]=o.copy(o.from,e.to),_E(n,r+1,o.copy(e.to,o.to)));continue}else{o.from<e.to&&(n==i&&(n=i.slice()),n[t]=e.copy(e.from,o.from),_E(n,r,e.copy(o.from,e.to)));break}}}return n}function _E(i,n,t){for(;n<i.length&&Nf(t,i[n])>0;)n++;i.splice(n,0,t)}function Xw(i){let n=[];return i.someProp("decorations",t=>{let e=t(i.state);e&&e!=fo&&n.push(e)}),i.cursorWrapper&&n.push(Pr.create(i.state.doc,[i.cursorWrapper.deco])),ic.from(n)}const w4={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},x4=ca&&fc<=11;class S4{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(n){this.anchorNode=n.anchorNode,this.anchorOffset=n.anchorOffset,this.focusNode=n.focusNode,this.focusOffset=n.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(n){return n.anchorNode==this.anchorNode&&n.anchorOffset==this.anchorOffset&&n.focusNode==this.focusNode&&n.focusOffset==this.focusOffset}}class _4{constructor(n,t){this.view=n,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new S4,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let r=0;r<e.length;r++)this.queue.push(e[r]);ca&&fc<=11&&e.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),x4&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,w4)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let n=this.observer.takeRecords();if(n.length){for(let t=0;t<n.length;t++)this.queue.push(n[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(vE(this.view)){if(this.suppressingSelectionUpdates)return eu(this.view);if(ca&&fc<=11&&!this.view.state.selection.empty){let n=this.view.domSelectionRange();if(n.focusNode&&If(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(n){if(!n.focusNode)return!0;let t=new Set,e;for(let o=n.focusNode;o;o=Rh(o))t.add(o);for(let o=n.anchorNode;o;o=Rh(o))if(t.has(o)){e=o;break}let r=e&&this.view.docView.nearestDesc(e);if(r&&r.ignoreMutation({type:"selection",target:e.nodeType==3?e.parentNode:e}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let n of this.observer.takeRecords())this.queue.push(n);return this.queue}flush(){let{view:n}=this;if(!n.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let e=n.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&vE(n)&&!this.ignoreSelectionChange(e),o=-1,a=-1,s=!1,u=[];if(n.editable)for(let h=0;h<t.length;h++){let v=this.registerMutation(t[h],u);v&&(o=o<0?v.from:Math.min(v.from,o),a=a<0?v.to:Math.max(v.to,a),v.typeOver&&(s=!0))}if(is&&u.length){let h=u.filter(v=>v.nodeName=="BR");if(h.length==2){let[v,m]=h;v.parentNode&&v.parentNode.parentNode==m.parentNode?m.remove():v.remove()}else{let{focusNode:v}=this.currentSelection;for(let m of h){let y=m.parentNode;y&&y.nodeName=="LI"&&(!v||E4(n,v)!=y)&&m.remove()}}}let c=null;o<0&&r&&n.input.lastFocus>Date.now()-200&&Math.max(n.input.lastTouch,n.input.lastClick.time)<Date.now()-300&&Cb(e)&&(c=n1(n))&&c.eq(bn.near(n.state.doc.resolve(0),1))?(n.input.lastFocus=0,eu(n),this.currentSelection.set(e),n.scrollToSelection()):(o>-1||r)&&(o>-1&&(n.docView.markDirty(o,a),C4(n)),this.handleDOMChange(o,a,s,u),n.docView&&n.docView.dirty?n.updateState(n.state):this.currentSelection.eq(e)||eu(n),this.currentSelection.set(e))}registerMutation(n,t){if(t.indexOf(n.target)>-1)return null;let e=this.view.docView.nearestDesc(n.target);if(n.type=="attributes"&&(e==this.view.docView||n.attributeName=="contenteditable"||n.attributeName=="style"&&!n.oldValue&&!n.target.getAttribute("style"))||!e||e.ignoreMutation(n))return null;if(n.type=="childList"){for(let h=0;h<n.addedNodes.length;h++){let v=n.addedNodes[h];t.push(v),v.nodeType==3&&(this.lastChangedTextNode=v)}if(e.contentDOM&&e.contentDOM!=e.dom&&!e.contentDOM.contains(n.target))return{from:e.posBefore,to:e.posAfter};let r=n.previousSibling,o=n.nextSibling;if(ca&&fc<=11&&n.addedNodes.length)for(let h=0;h<n.addedNodes.length;h++){let{previousSibling:v,nextSibling:m}=n.addedNodes[h];(!v||Array.prototype.indexOf.call(n.addedNodes,v)<0)&&(r=v),(!m||Array.prototype.indexOf.call(n.addedNodes,m)<0)&&(o=m)}let a=r&&r.parentNode==n.target?ro(r)+1:0,s=e.localPosFromDOM(n.target,a,-1),u=o&&o.parentNode==n.target?ro(o):n.target.childNodes.length,c=e.localPosFromDOM(n.target,u,1);return{from:s,to:c}}else return n.type=="attributes"?{from:e.posAtStart-e.border,to:e.posAtEnd+e.border}:(this.lastChangedTextNode=n.target,{from:e.posAtStart,to:e.posAtEnd,typeOver:n.target.nodeValue==n.oldValue})}}let CE=new WeakMap,TE=!1;function C4(i){if(!CE.has(i)&&(CE.set(i,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(i.dom).whiteSpace)!==-1)){if(i.requiresGeckoHackNode=is,TE)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),TE=!0}}function EE(i,n){let t=n.startContainer,e=n.startOffset,r=n.endContainer,o=n.endOffset,a=i.domAtPos(i.state.selection.anchor);return If(a.node,a.offset,r,o)&&([t,e,r,o]=[r,o,t,e]),{anchorNode:t,anchorOffset:e,focusNode:r,focusOffset:o}}function T4(i,n){if(n.getComposedRanges){let r=n.getComposedRanges(i.root)[0];if(r)return EE(i,r)}let t;function e(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return i.dom.addEventListener("beforeinput",e,!0),document.execCommand("indent"),i.dom.removeEventListener("beforeinput",e,!0),t?EE(i,t):null}function E4(i,n){for(let t=n.parentNode;t&&t!=i.dom;t=t.parentNode){let e=i.docView.nearestDesc(t,!0);if(e&&e.node.isBlock)return t}return null}function O4(i,n,t){let{node:e,fromOffset:r,toOffset:o,from:a,to:s}=i.docView.parseRange(n,t),u=i.domSelectionRange(),c,h=u.anchorNode;if(h&&i.dom.contains(h.nodeType==1?h:h.parentNode)&&(c=[{node:h,offset:u.anchorOffset}],Cb(u)||c.push({node:u.focusNode,offset:u.focusOffset})),ho&&i.input.lastKeyCode===8)for(let E=o;E>r;E--){let D=e.childNodes[E-1],F=D.pmViewDesc;if(D.nodeName=="BR"&&!F){o=E;break}if(!F||F.size)break}let v=i.state.doc,m=i.someProp("domParser")||Nv.fromSchema(i.state.schema),y=v.resolve(a),_=null,C=m.parse(e,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:r,to:o,preserveWhitespace:y.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:A4,context:y});if(c&&c[0].pos!=null){let E=c[0].pos,D=c[1]&&c[1].pos;D==null&&(D=E),_={anchor:E+a,head:D+a}}return{doc:C,sel:_,from:a,to:s}}function A4(i){let n=i.pmViewDesc;if(n)return n.parseRule();if(i.nodeName=="BR"&&i.parentNode){if(Lo&&/^(ul|ol)$/i.test(i.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(i.parentNode.lastChild==i||Lo&&/^(tr|table)$/i.test(i.parentNode.nodeName))return{ignore:!0}}else if(i.nodeName=="IMG"&&i.getAttribute("mark-placeholder"))return{ignore:!0};return null}const k4=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function M4(i,n,t,e,r){let o=i.input.compositionPendingChanges||(i.composing?i.input.compositionID:0);if(i.input.compositionPendingChanges=0,n<0){let ht=i.input.lastSelectionTime>Date.now()-50?i.input.lastSelectionOrigin:null,st=n1(i,ht);if(st&&!i.state.selection.eq(st)){if(ho&&Jl&&i.input.lastKeyCode===13&&Date.now()-100<i.input.lastKeyCodeTime&&i.someProp("handleKeyDown",nt=>nt(i,mf(13,"Enter"))))return;let et=i.state.tr.setSelection(st);ht=="pointer"?et.setMeta("pointer",!0):ht=="key"&&et.scrollIntoView(),o&&et.setMeta("composition",o),i.dispatch(et)}return}let a=i.state.doc.resolve(n),s=a.sharedDepth(t);n=a.before(s+1),t=i.state.doc.resolve(t).after(s+1);let u=i.state.selection,c=O4(i,n,t),h=i.state.doc,v=h.slice(c.from,c.to),m,y;i.input.lastKeyCode===8&&Date.now()-100<i.input.lastKeyCodeTime?(m=i.state.selection.to,y="end"):(m=i.state.selection.from,y="start"),i.input.lastKeyCode=null;let _=N4(v.content,c.doc.content,c.from,m,y);if(_&&i.input.domChangeCount++,(Lh&&i.input.lastIOSEnter>Date.now()-225||Jl)&&r.some(ht=>ht.nodeType==1&&!k4.test(ht.nodeName))&&(!_||_.endA>=_.endB)&&i.someProp("handleKeyDown",ht=>ht(i,mf(13,"Enter")))){i.input.lastIOSEnter=0;return}if(!_)if(e&&u instanceof an&&!u.empty&&u.$head.sameParent(u.$anchor)&&!i.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))_={start:u.from,endA:u.to,endB:u.to};else{if(c.sel){let ht=OE(i,i.state.doc,c.sel);if(ht&&!ht.eq(i.state.selection)){let st=i.state.tr.setSelection(ht);o&&st.setMeta("composition",o),i.dispatch(st)}}return}i.state.selection.from<i.state.selection.to&&_.start==_.endB&&i.state.selection instanceof an&&(_.start>i.state.selection.from&&_.start<=i.state.selection.from+2&&i.state.selection.from>=c.from?_.start=i.state.selection.from:_.endA<i.state.selection.to&&_.endA>=i.state.selection.to-2&&i.state.selection.to<=c.to&&(_.endB+=i.state.selection.to-_.endA,_.endA=i.state.selection.to)),ca&&fc<=11&&_.endB==_.start+1&&_.endA==_.start&&_.start>c.from&&c.doc.textBetween(_.start-c.from-1,_.start-c.from+1)==" "&&(_.start--,_.endA--,_.endB--);let C=c.doc.resolveNoCache(_.start-c.from),E=c.doc.resolveNoCache(_.endB-c.from),D=h.resolve(_.start),F=C.sameParent(E)&&C.parent.inlineContent&&D.end()>=_.endA;if((Lh&&i.input.lastIOSEnter>Date.now()-225&&(!F||r.some(ht=>ht.nodeName=="DIV"||ht.nodeName=="P"))||!F&&C.pos<c.doc.content.size&&(!C.sameParent(E)||!C.parent.inlineContent)&&C.pos<E.pos&&!/\S/.test(c.doc.textBetween(C.pos,E.pos,"","")))&&i.someProp("handleKeyDown",ht=>ht(i,mf(13,"Enter")))){i.input.lastIOSEnter=0;return}if(i.state.selection.anchor>_.start&&P4(h,_.start,_.endA,C,E)&&i.someProp("handleKeyDown",ht=>ht(i,mf(8,"Backspace")))){Jl&&ho&&i.domObserver.suppressSelectionUpdates();return}ho&&_.endB==_.start&&(i.input.lastChromeDelete=Date.now()),Jl&&!F&&C.start()!=E.start()&&E.parentOffset==0&&C.depth==E.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==_.endA&&(_.endB-=2,E=c.doc.resolveNoCache(_.endB-c.from),setTimeout(()=>{i.someProp("handleKeyDown",function(ht){return ht(i,mf(13,"Enter"))})},20));let V=_.start,K=_.endA,Z=ht=>{let st=ht||i.state.tr.replace(V,K,c.doc.slice(_.start-c.from,_.endB-c.from));if(c.sel){let et=OE(i,st.doc,c.sel);et&&!(ho&&i.composing&&et.empty&&(_.start!=_.endB||i.input.lastChromeDelete<Date.now()-100)&&(et.head==V||et.head==st.mapping.map(K)-1)||ca&&et.empty&&et.head==V)&&st.setSelection(et)}return o&&st.setMeta("composition",o),st.scrollIntoView()},ct;if(F)if(C.pos==E.pos){ca&&fc<=11&&C.parentOffset==0&&(i.domObserver.suppressSelectionUpdates(),setTimeout(()=>eu(i),20));let ht=Z(i.state.tr.delete(V,K)),st=h.resolve(_.start).marksAcross(h.resolve(_.endA));st&&ht.ensureMarks(st),i.dispatch(ht)}else if(_.endA==_.endB&&(ct=D4(C.parent.content.cut(C.parentOffset,E.parentOffset),D.parent.content.cut(D.parentOffset,_.endA-D.start())))){let ht=Z(i.state.tr);ct.type=="add"?ht.addMark(V,K,ct.mark):ht.removeMark(V,K,ct.mark),i.dispatch(ht)}else if(C.parent.child(C.index()).isText&&C.index()==E.index()-(E.textOffset?0:1)){let ht=C.parent.textBetween(C.parentOffset,E.parentOffset),st=()=>Z(i.state.tr.insertText(ht,V,K));i.someProp("handleTextInput",et=>et(i,V,K,ht,st))||i.dispatch(st())}else i.dispatch(Z());else i.dispatch(Z())}function OE(i,n,t){return Math.max(t.anchor,t.head)>n.content.size?null:r1(i,n.resolve(t.anchor),n.resolve(t.head))}function D4(i,n){let t=i.firstChild.marks,e=n.firstChild.marks,r=t,o=e,a,s,u;for(let h=0;h<e.length;h++)r=e[h].removeFromSet(r);for(let h=0;h<t.length;h++)o=t[h].removeFromSet(o);if(r.length==1&&o.length==0)s=r[0],a="add",u=h=>h.mark(s.addToSet(h.marks));else if(r.length==0&&o.length==1)s=o[0],a="remove",u=h=>h.mark(s.removeFromSet(h.marks));else return null;let c=[];for(let h=0;h<n.childCount;h++)c.push(u(n.child(h)));if(ge.from(c).eq(i))return{mark:s,type:a}}function P4(i,n,t,e,r){if(t-n<=r.pos-e.pos||Jw(e,!0,!1)<r.pos)return!1;let o=i.resolve(n);if(!e.parent.isTextblock){let s=o.nodeAfter;return s!=null&&t==n+s.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let a=i.resolve(Jw(o,!0,!0));return!a.parent.isTextblock||a.pos>t||Jw(a,!0,!1)<t?!1:e.parent.content.cut(e.parentOffset).eq(a.parent.content)}function Jw(i,n,t){let e=i.depth,r=n?i.end():i.pos;for(;e>0&&(n||i.indexAfter(e)==i.node(e).childCount);)e--,r++,n=!1;if(t){let o=i.node(e).maybeChild(i.indexAfter(e));for(;o&&!o.isLeaf;)o=o.firstChild,r++}return r}function N4(i,n,t,e,r){let o=i.findDiffStart(n,t);if(o==null)return null;let{a,b:s}=i.findDiffEnd(n,t+i.size,t+n.size);if(r=="end"){let u=Math.max(0,o-Math.min(a,s));e-=a+u-o}if(a<o&&i.size<n.size){let u=e<=o&&e>=a?o-e:0;o-=u,o&&o<n.size&&AE(n.textBetween(o-1,o+1))&&(o+=u?1:-1),s=o+(s-a),a=o}else if(s<o){let u=e<=o&&e>=s?o-e:0;o-=u,o&&o<i.size&&AE(i.textBetween(o-1,o+1))&&(o+=u?1:-1),a=o+(a-s),s=o}return{start:o,endA:a,endB:s}}function AE(i){if(i.length!=2)return!1;let n=i.charCodeAt(0),t=i.charCodeAt(1);return n>=56320&&n<=57343&&t>=55296&&t<=56319}let n2=class{constructor(n,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Z3,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(NE),this.dispatch=this.dispatch.bind(this),this.dom=n&&n.mount||document.createElement("div"),n&&(n.appendChild?n.appendChild(this.dom):typeof n=="function"?n(this.dom):n.mount&&(this.mounted=!0)),this.editable=DE(this),ME(this),this.nodeViews=PE(this),this.docView=uE(this.state.doc,kE(this),Xw(this),this.dom,this),this.domObserver=new _4(this,(e,r,o,a)=>M4(this,e,r,o,a)),this.domObserver.start(),Q3(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let n=this._props;this._props={};for(let t in n)this._props[t]=n[t];this._props.state=this.state}return this._props}update(n){n.handleDOMEvents!=this._props.handleDOMEvents&&AS(this);let t=this._props;this._props=n,n.plugins&&(n.plugins.forEach(NE),this.directPlugins=n.plugins),this.updateStateInner(n.state,t)}setProps(n){let t={};for(let e in this._props)t[e]=this._props[e];t.state=this.state;for(let e in n)t[e]=n[e];this.update(t)}updateState(n){this.updateStateInner(n,this._props)}updateStateInner(n,t){var e;let r=this.state,o=!1,a=!1;n.storedMarks&&this.composing&&(YM(this),a=!0),this.state=n;let s=r.plugins!=n.plugins||this._props.plugins!=t.plugins;if(s||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let y=PE(this);L4(y,this.nodeViews)&&(this.nodeViews=y,o=!0)}(s||t.handleDOMEvents!=this._props.handleDOMEvents)&&AS(this),this.editable=DE(this),ME(this);let u=Xw(this),c=kE(this),h=r.plugins!=n.plugins&&!r.doc.eq(n.doc)?"reset":n.scrollToSelection>r.scrollToSelection?"to selection":"preserve",v=o||!this.docView.matchesNode(n.doc,c,u);(v||!n.selection.eq(r.selection))&&(a=!0);let m=h=="preserve"&&a&&this.dom.style.overflowAnchor==null&&h3(this);if(a){this.domObserver.stop();let y=v&&(ca||ho)&&!this.composing&&!r.selection.empty&&!n.selection.empty&&R4(r.selection,n.selection);if(v){let _=ho?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=d4(this)),(o||!this.docView.update(n.doc,c,u,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=uE(n.doc,c,u,this.dom,this)),_&&!this.trackWrites&&(y=!0)}y||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&I3(this))?eu(this,y):(IM(this,n.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),!((e=this.dragging)===null||e===void 0)&&e.node&&!r.doc.eq(n.doc)&&this.updateDraggedNode(this.dragging,r),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():m&&p3(m)}scrollToSelection(){let n=this.domSelectionRange().focusNode;if(!(!n||!this.dom.contains(n.nodeType==1?n:n.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Ge){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&rE(this,t.getBoundingClientRect(),n)}else rE(this,this.coordsAtPos(this.state.selection.head,1),n)}}destroyPluginViews(){let n;for(;n=this.pluginViews.pop();)n.destroy&&n.destroy()}updatePluginViews(n){if(!n||n.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let e=this.directPlugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let e=this.state.plugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let e=this.pluginViews[t];e.update&&e.update(this,n)}}updateDraggedNode(n,t){let e=n.node,r=-1;if(this.state.doc.nodeAt(e.from)==e.node)r=e.from;else{let o=e.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==e.node&&(r=o)}this.dragging=new JM(n.slice,n.move,r<0?void 0:Ge.create(this.state.doc,r))}someProp(n,t){let e=this._props&&this._props[n],r;if(e!=null&&(r=t?t(e):e))return r;for(let a=0;a<this.directPlugins.length;a++){let s=this.directPlugins[a].props[n];if(s!=null&&(r=t?t(s):s))return r}let o=this.state.plugins;if(o)for(let a=0;a<o.length;a++){let s=o[a].props[n];if(s!=null&&(r=t?t(s):s))return r}}hasFocus(){if(ca){let n=this.root.activeElement;if(n==this.dom)return!0;if(!n||!this.dom.contains(n))return!1;for(;n&&this.dom!=n&&this.dom.contains(n);){if(n.contentEditable=="false")return!1;n=n.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&v3(this.dom),eu(this),this.domObserver.start()}get root(){let n=this._root;if(n==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return n||document}updateRoot(){this._root=null}posAtCoords(n){return w3(this,n)}coordsAtPos(n,t=1){return kM(this,n,t)}domAtPos(n,t=0){return this.docView.domFromPos(n,t)}nodeDOM(n){let t=this.docView.descAt(n);return t?t.nodeDOM:null}posAtDOM(n,t,e=-1){let r=this.docView.posFromDOM(n,t,e);if(r==null)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(n,t){return T3(this,t||this.state,n)}pasteHTML(n,t){return og(this,"",n,!1,t||new ClipboardEvent("paste"))}pasteText(n,t){return og(this,n,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(n){return i1(this,n)}destroy(){this.docView&&(t4(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Xw(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,n3())}get isDestroyed(){return this.docView==null}dispatchEvent(n){return n4(this,n)}domSelectionRange(){let n=this.domSelection();return n?Lo&&this.root.nodeType===11&&s3(this.dom.ownerDocument)==this.dom&&T4(this,n)||n:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}};n2.prototype.dispatch=function(i){let n=this._props.dispatchTransaction;n?n.call(this,i):this.updateState(this.state.apply(i))};function kE(i){let n=Object.create(null);return n.class="ProseMirror",n.contenteditable=String(i.editable),i.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(i.state)),t)for(let e in t)e=="class"?n.class+=" "+t[e]:e=="style"?n.style=(n.style?n.style+";":"")+t[e]:!n[e]&&e!="contenteditable"&&e!="nodeName"&&(n[e]=String(t[e]))}),n.translate||(n.translate="no"),[No.node(0,i.state.doc.content.size,n)]}function ME(i){if(i.markCursor){let n=document.createElement("img");n.className="ProseMirror-separator",n.setAttribute("mark-placeholder","true"),n.setAttribute("alt",""),i.cursorWrapper={dom:n,deco:No.widget(i.state.selection.from,n,{raw:!0,marks:i.markCursor})}}else i.cursorWrapper=null}function DE(i){return!i.someProp("editable",n=>n(i.state)===!1)}function R4(i,n){let t=Math.min(i.$anchor.sharedDepth(i.head),n.$anchor.sharedDepth(n.head));return i.$anchor.start(t)!=n.$anchor.start(t)}function PE(i){let n=Object.create(null);function t(e){for(let r in e)Object.prototype.hasOwnProperty.call(n,r)||(n[r]=e[r])}return i.someProp("nodeViews",t),i.someProp("markViews",t),n}function L4(i,n){let t=0,e=0;for(let r in i){if(i[r]!=n[r])return!0;t++}for(let r in n)e++;return t!=e}function NE(i){if(i.spec.state||i.spec.filterTransaction||i.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var mc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Dy={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},j4=typeof navigator<"u"&&/Mac/.test(navigator.platform),I4=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var io=0;io<10;io++)mc[48+io]=mc[96+io]=String(io);for(var io=1;io<=24;io++)mc[io+111]="F"+io;for(var io=65;io<=90;io++)mc[io]=String.fromCharCode(io+32),Dy[io]=String.fromCharCode(io);for(var Zw in mc)Dy.hasOwnProperty(Zw)||(Dy[Zw]=mc[Zw]);function B4(i){var n=j4&&i.metaKey&&i.shiftKey&&!i.ctrlKey&&!i.altKey||I4&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",t=!n&&i.key||(i.shiftKey?Dy:mc)[i.keyCode]||i.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const U4=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),V4=typeof navigator<"u"&&/Win/.test(navigator.platform);function F4(i){let n=i.split(/-(?!$)/),t=n[n.length-1];t=="Space"&&(t=" ");let e,r,o,a;for(let s=0;s<n.length-1;s++){let u=n[s];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))e=!0;else if(/^(c|ctrl|control)$/i.test(u))r=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))U4?a=!0:r=!0;else throw new Error("Unrecognized modifier name: "+u)}return e&&(t="Alt-"+t),r&&(t="Ctrl-"+t),a&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function H4(i){let n=Object.create(null);for(let t in i)n[F4(t)]=i[t];return n}function Qw(i,n,t=!0){return n.altKey&&(i="Alt-"+i),n.ctrlKey&&(i="Ctrl-"+i),n.metaKey&&(i="Meta-"+i),t&&n.shiftKey&&(i="Shift-"+i),i}function z4(i){return new Rr({props:{handleKeyDown:r2(i)}})}function r2(i){let n=H4(i);return function(t,e){let r=B4(e),o,a=n[Qw(r,e)];if(a&&a(t.state,t.dispatch,t))return!0;if(r.length==1&&r!=" "){if(e.shiftKey){let s=n[Qw(r,e,!1)];if(s&&s(t.state,t.dispatch,t))return!0}if((e.altKey||e.metaKey||e.ctrlKey)&&!(V4&&e.ctrlKey&&e.altKey)&&(o=mc[e.keyCode])&&o!=r){let s=n[Qw(o,e)];if(s&&s(t.state,t.dispatch,t))return!0}}return!1}}var W4=Object.defineProperty,c1=(i,n)=>{for(var t in n)W4(i,t,{get:n[t],enumerable:!0})};function Ob(i){const{state:n,transaction:t}=i;let{selection:e}=t,{doc:r}=t,{storedMarks:o}=t;return{...n,apply:n.apply.bind(n),applyTransaction:n.applyTransaction.bind(n),plugins:n.plugins,schema:n.schema,reconfigure:n.reconfigure.bind(n),toJSON:n.toJSON.bind(n),get storedMarks(){return o},get selection(){return e},get doc(){return r},get tr(){return e=t.selection,r=t.doc,o=t.storedMarks,t}}}var Ab=class{constructor(i){this.editor=i.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=i.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:i,editor:n,state:t}=this,{view:e}=n,{tr:r}=t,o=this.buildProps(r);return Object.fromEntries(Object.entries(i).map(([a,s])=>[a,(...c)=>{const h=s(...c)(o);return!r.getMeta("preventDispatch")&&!this.hasCustomState&&e.dispatch(r),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(i,n=!0){const{rawCommands:t,editor:e,state:r}=this,{view:o}=e,a=[],s=!!i,u=i||r.tr,c=()=>(!s&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(u),a.every(v=>v===!0)),h={...Object.fromEntries(Object.entries(t).map(([v,m])=>[v,(..._)=>{const C=this.buildProps(u,n),E=m(..._)(C);return a.push(E),h}])),run:c};return h}createCan(i){const{rawCommands:n,state:t}=this,e=!1,r=i||t.tr,o=this.buildProps(r,e);return{...Object.fromEntries(Object.entries(n).map(([s,u])=>[s,(...c)=>u(...c)({...o,dispatch:void 0})])),chain:()=>this.createChain(r,e)}}buildProps(i,n=!0){const{rawCommands:t,editor:e,state:r}=this,{view:o}=e,a={tr:i,editor:e,view:o,state:Ob({state:r,transaction:i}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(i,n),can:()=>this.createCan(i),get commands(){return Object.fromEntries(Object.entries(t).map(([s,u])=>[s,(...c)=>u(...c)(a)]))}};return a}},i2={};c1(i2,{blur:()=>q4,clearContent:()=>K4,clearNodes:()=>$4,command:()=>G4,createParagraphNear:()=>Y4,cut:()=>X4,deleteCurrentNode:()=>J4,deleteNode:()=>Z4,deleteRange:()=>Q4,deleteSelection:()=>tB,enter:()=>eB,exitCode:()=>nB,extendMarkRange:()=>rB,first:()=>iB,focus:()=>aB,forEach:()=>sB,insertContent:()=>lB,insertContentAt:()=>fB,joinBackward:()=>pB,joinDown:()=>hB,joinForward:()=>vB,joinItemBackward:()=>gB,joinItemForward:()=>mB,joinTextblockBackward:()=>yB,joinTextblockForward:()=>bB,joinUp:()=>dB,keyboardShortcut:()=>xB,lift:()=>SB,liftEmptyBlock:()=>_B,liftListItem:()=>CB,newlineInCode:()=>TB,resetAttributes:()=>EB,scrollIntoView:()=>OB,selectAll:()=>AB,selectNodeBackward:()=>kB,selectNodeForward:()=>MB,selectParentNode:()=>DB,selectTextblockEnd:()=>PB,selectTextblockStart:()=>NB,setContent:()=>RB,setMark:()=>ZB,setMeta:()=>QB,setNode:()=>tU,setNodeSelection:()=>eU,setTextDirection:()=>nU,setTextSelection:()=>rU,sinkListItem:()=>iU,splitBlock:()=>oU,splitListItem:()=>aU,toggleList:()=>sU,toggleMark:()=>lU,toggleNode:()=>uU,toggleWrap:()=>cU,undoInputRule:()=>fU,unsetAllMarks:()=>dU,unsetMark:()=>hU,unsetTextDirection:()=>pU,updateAttributes:()=>vU,wrapIn:()=>gU,wrapInList:()=>mU});var q4=()=>({editor:i,view:n})=>(requestAnimationFrame(()=>{var t;i.isDestroyed||(n.dom.blur(),(t=window==null?void 0:window.getSelection())==null||t.removeAllRanges())}),!0),K4=(i=!0)=>({commands:n})=>n.setContent("",{emitUpdate:i}),$4=()=>({state:i,tr:n,dispatch:t})=>{const{selection:e}=n,{ranges:r}=e;return t&&r.forEach(({$from:o,$to:a})=>{i.doc.nodesBetween(o.pos,a.pos,(s,u)=>{if(s.type.isText)return;const{doc:c,mapping:h}=n,v=c.resolve(h.map(u)),m=c.resolve(h.map(u+s.nodeSize)),y=v.blockRange(m);if(!y)return;const _=Gh(y);if(s.type.isTextblock){const{defaultType:C}=v.parent.contentMatchAt(v.index());n.setNodeMarkup(y.start,C)}(_||_===0)&&n.lift(y,_)})}),!0},G4=i=>n=>i(n),Y4=()=>({state:i,dispatch:n})=>bM(i,n),X4=(i,n)=>({editor:t,tr:e})=>{const{state:r}=t,o=r.doc.slice(i.from,i.to);e.deleteRange(i.from,i.to);const a=e.mapping.map(n);return e.insert(a,o.content),e.setSelection(new an(e.doc.resolve(Math.max(a-1,0)))),!0},J4=()=>({tr:i,dispatch:n})=>{const{selection:t}=i,e=t.$anchor.node();if(e.content.size>0)return!1;const r=i.selection.$anchor;for(let o=r.depth;o>0;o-=1)if(r.node(o).type===e.type){if(n){const s=r.before(o),u=r.after(o);i.delete(s,u).scrollIntoView()}return!0}return!1};function fi(i,n){if(typeof i=="string"){if(!n.nodes[i])throw Error(`There is no node type named '${i}'. Maybe you forgot to add the extension?`);return n.nodes[i]}return i}var Z4=i=>({tr:n,state:t,dispatch:e})=>{const r=fi(i,t.schema),o=n.selection.$anchor;for(let a=o.depth;a>0;a-=1)if(o.node(a).type===r){if(e){const u=o.before(a),c=o.after(a);n.delete(u,c).scrollIntoView()}return!0}return!1},Q4=i=>({tr:n,dispatch:t})=>{const{from:e,to:r}=i;return t&&n.delete(e,r),!0},tB=()=>({state:i,dispatch:n})=>X_(i,n),eB=()=>({commands:i})=>i.keyboardShortcut("Enter"),nB=()=>({state:i,dispatch:n})=>FI(i,n);function f1(i){return Object.prototype.toString.call(i)==="[object RegExp]"}function Py(i,n,t={strict:!0}){const e=Object.keys(n);return e.length?e.every(r=>t.strict?n[r]===i[r]:f1(n[r])?n[r].test(i[r]):n[r]===i[r]):!0}function o2(i,n,t={}){return i.find(e=>e.type===n&&Py(Object.fromEntries(Object.keys(t).map(r=>[r,e.attrs[r]])),t))}function RE(i,n,t={}){return!!o2(i,n,t)}function d1(i,n,t){var e;if(!i||!n)return;let r=i.parent.childAfter(i.parentOffset);if((!r.node||!r.node.marks.some(h=>h.type===n))&&(r=i.parent.childBefore(i.parentOffset)),!r.node||!r.node.marks.some(h=>h.type===n)||(t=t||((e=r.node.marks[0])==null?void 0:e.attrs),!o2([...r.node.marks],n,t)))return;let a=r.index,s=i.start()+r.offset,u=a+1,c=s+r.node.nodeSize;for(;a>0&&RE([...i.parent.child(a-1).marks],n,t);)a-=1,s-=i.parent.child(a).nodeSize;for(;u<i.parent.childCount&&RE([...i.parent.child(u).marks],n,t);)c+=i.parent.child(u).nodeSize,u+=1;return{from:s,to:c}}function su(i,n){if(typeof i=="string"){if(!n.marks[i])throw Error(`There is no mark type named '${i}'. Maybe you forgot to add the extension?`);return n.marks[i]}return i}var rB=(i,n={})=>({tr:t,state:e,dispatch:r})=>{const o=su(i,e.schema),{doc:a,selection:s}=t,{$from:u,from:c,to:h}=s;if(r){const v=d1(u,o,n);if(v&&v.from<=c&&v.to>=h){const m=an.create(a,v.from,v.to);t.setSelection(m)}}return!0},iB=i=>n=>{const t=typeof i=="function"?i(n):i;for(let e=0;e<t.length;e+=1)if(t[e](n))return!0;return!1};function a2(i){return i instanceof an}function Cf(i=0,n=0,t=0){return Math.min(Math.max(i,n),t)}function s2(i,n=null){if(!n)return null;const t=bn.atStart(i),e=bn.atEnd(i);if(n==="start"||n===!0)return t;if(n==="end")return e;const r=t.from,o=e.to;return n==="all"?an.create(i,Cf(0,r,o),Cf(i.content.size,r,o)):an.create(i,Cf(n,r,o),Cf(n,r,o))}function oB(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function h1(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var aB=(i=null,n={})=>({editor:t,view:e,tr:r,dispatch:o})=>{n={scrollIntoView:!0,...n};const a=()=>{(h1()||oB())&&e.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(e.focus(),n!=null&&n.scrollIntoView&&t.commands.scrollIntoView())})};if(e.hasFocus()&&i===null||i===!1)return!0;if(o&&i===null&&!a2(t.state.selection))return a(),!0;const s=s2(r.doc,i)||t.state.selection,u=t.state.selection.eq(s);return o&&(u||r.setSelection(s),u&&r.storedMarks&&r.setStoredMarks(r.storedMarks),a()),!0},sB=(i,n)=>t=>i.every((e,r)=>n(e,{...t,index:r})),lB=(i,n)=>({tr:t,commands:e})=>e.insertContentAt({from:t.selection.from,to:t.selection.to},i,n),l2=i=>{const n=i.childNodes;for(let t=n.length-1;t>=0;t-=1){const e=n[t];e.nodeType===3&&e.nodeValue&&/^(\n\s\s|\n)$/.test(e.nodeValue)?i.removeChild(e):e.nodeType===1&&l2(e)}return i};function Im(i){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const n=`<body>${i}</body>`,t=new window.DOMParser().parseFromString(n,"text/html").body;return l2(t)}function sg(i,n,t){if(i instanceof cc||i instanceof ge)return i;t={slice:!0,parseOptions:{},...t};const e=typeof i=="object"&&i!==null,r=typeof i=="string";if(e)try{if(Array.isArray(i)&&i.length>0)return ge.fromArray(i.map(s=>n.nodeFromJSON(s)));const a=n.nodeFromJSON(i);return t.errorOnInvalidContent&&a.check(),a}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",i,"Error:",o),sg("",n,t)}if(r){if(t.errorOnInvalidContent){let a=!1,s="";const u=new Kk({topNode:n.spec.topNode,marks:n.spec.marks,nodes:n.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(a=!0,s=typeof c=="string"?c:c.outerHTML,null)}]}})});if(t.slice?Nv.fromSchema(u).parseSlice(Im(i),t.parseOptions):Nv.fromSchema(u).parse(Im(i),t.parseOptions),t.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${s}`)})}const o=Nv.fromSchema(n);return t.slice?o.parseSlice(Im(i),t.parseOptions).content:o.parse(Im(i),t.parseOptions)}return sg("",n,t)}function uB(i,n,t){const e=i.steps.length-1;if(e<n)return;const r=i.steps[e];if(!(r instanceof Ui||r instanceof Vi))return;const o=i.mapping.maps[e];let a=0;o.forEach((s,u,c,h)=>{a===0&&(a=h)}),i.setSelection(bn.near(i.doc.resolve(a),t))}var cB=i=>!("type"in i),fB=(i,n,t)=>({tr:e,dispatch:r,editor:o})=>{var a;if(r){t={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let s;const u=E=>{o.emit("contentError",{editor:o,error:E,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{sg(n,o.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(E){u(E)}try{s=sg(n,o.schema,{parseOptions:c,errorOnInvalidContent:(a=t.errorOnInvalidContent)!=null?a:o.options.enableContentCheck})}catch(E){return u(E),!1}let{from:h,to:v}=typeof i=="number"?{from:i,to:i}:{from:i.from,to:i.to},m=!0,y=!0;if((cB(s)?s:[s]).forEach(E=>{E.check(),m=m?E.isText&&E.marks.length===0:!1,y=y?E.isBlock:!1}),h===v&&y){const{parent:E}=e.doc.resolve(h);E.isTextblock&&!E.type.spec.code&&!E.childCount&&(h-=1,v+=1)}let C;if(m){if(Array.isArray(n))C=n.map(E=>E.text||"").join("");else if(n instanceof ge){let E="";n.forEach(D=>{D.text&&(E+=D.text)}),C=E}else typeof n=="object"&&n&&n.text?C=n.text:C=n;e.insertText(C,h,v)}else{C=s;const E=e.doc.resolve(h),D=E.node(),F=E.parentOffset===0,V=D.isText||D.isTextblock,K=D.content.size>0;F&&V&&K&&(h=Math.max(0,h-1)),e.replaceWith(h,v,C)}t.updateSelection&&uB(e,e.steps.length-1,-1),t.applyInputRules&&e.setMeta("applyInputRules",{from:h,text:C}),t.applyPasteRules&&e.setMeta("applyPasteRules",{from:h,text:C})}return!0},dB=()=>({state:i,dispatch:n})=>BI(i,n),hB=()=>({state:i,dispatch:n})=>UI(i,n),pB=()=>({state:i,dispatch:n})=>dM(i,n),vB=()=>({state:i,dispatch:n})=>gM(i,n),gB=()=>({state:i,dispatch:n,tr:t})=>{try{const e=xb(i.doc,i.selection.$from.pos,-1);return e==null?!1:(t.join(e,2),n&&n(t),!0)}catch{return!1}},mB=()=>({state:i,dispatch:n,tr:t})=>{try{const e=xb(i.doc,i.selection.$from.pos,1);return e==null?!1:(t.join(e,2),n&&n(t),!0)}catch{return!1}},yB=()=>({state:i,dispatch:n})=>jI(i,n),bB=()=>({state:i,dispatch:n})=>II(i,n);function u2(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function wB(i){const n=i.split(/-(?!$)/);let t=n[n.length-1];t==="Space"&&(t=" ");let e,r,o,a;for(let s=0;s<n.length-1;s+=1){const u=n[s];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))e=!0;else if(/^(c|ctrl|control)$/i.test(u))r=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))h1()||u2()?a=!0:r=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return e&&(t=`Alt-${t}`),r&&(t=`Ctrl-${t}`),a&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}var xB=i=>({editor:n,view:t,tr:e,dispatch:r})=>{const o=wB(i).split(/-(?!$)/),a=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),s=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),u=n.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,s))});return u==null||u.steps.forEach(c=>{const h=c.map(e.mapping);h&&r&&e.maybeStep(h)}),!0};function yc(i,n,t={}){const{from:e,to:r,empty:o}=i.selection,a=n?fi(n,i.schema):null,s=[];i.doc.nodesBetween(e,r,(v,m)=>{if(v.isText)return;const y=Math.max(e,m),_=Math.min(r,m+v.nodeSize);s.push({node:v,from:y,to:_})});const u=r-e,c=s.filter(v=>a?a.name===v.node.type.name:!0).filter(v=>Py(v.node.attrs,t,{strict:!1}));return o?!!c.length:c.reduce((v,m)=>v+m.to-m.from,0)>=u}var SB=(i,n={})=>({state:t,dispatch:e})=>{const r=fi(i,t.schema);return yc(t,r,n)?VI(t,e):!1},_B=()=>({state:i,dispatch:n})=>wM(i,n),CB=i=>({state:n,dispatch:t})=>{const e=fi(i,n.schema);return ZI(e)(n,t)},TB=()=>({state:i,dispatch:n})=>yM(i,n);function kb(i,n){return n.nodes[i]?"node":n.marks[i]?"mark":null}function LE(i,n){const t=typeof n=="string"?[n]:n;return Object.keys(i).reduce((e,r)=>(t.includes(r)||(e[r]=i[r]),e),{})}var EB=(i,n)=>({tr:t,state:e,dispatch:r})=>{let o=null,a=null;const s=kb(typeof i=="string"?i:i.name,e.schema);if(!s)return!1;s==="node"&&(o=fi(i,e.schema)),s==="mark"&&(a=su(i,e.schema));let u=!1;return t.selection.ranges.forEach(c=>{e.doc.nodesBetween(c.$from.pos,c.$to.pos,(h,v)=>{o&&o===h.type&&(u=!0,r&&t.setNodeMarkup(v,void 0,LE(h.attrs,n))),a&&h.marks.length&&h.marks.forEach(m=>{a===m.type&&(u=!0,r&&t.addMark(v,v+h.nodeSize,a.create(LE(m.attrs,n))))})})}),u},OB=()=>({tr:i,dispatch:n})=>(n&&i.scrollIntoView(),!0),AB=()=>({tr:i,dispatch:n})=>{if(n){const t=new Pa(i.doc);i.setSelection(t)}return!0},kB=()=>({state:i,dispatch:n})=>pM(i,n),MB=()=>({state:i,dispatch:n})=>mM(i,n),DB=()=>({state:i,dispatch:n})=>WI(i,n),PB=()=>({state:i,dispatch:n})=>$I(i,n),NB=()=>({state:i,dispatch:n})=>KI(i,n);function kS(i,n,t={},e={}){return sg(i,n,{slice:!1,parseOptions:t,errorOnInvalidContent:e.errorOnInvalidContent})}var RB=(i,{errorOnInvalidContent:n,emitUpdate:t=!0,parseOptions:e={}}={})=>({editor:r,tr:o,dispatch:a,commands:s})=>{const{doc:u}=o;if(e.preserveWhitespace!=="full"){const c=kS(i,r.schema,e,{errorOnInvalidContent:n??r.options.enableContentCheck});return a&&o.replaceWith(0,u.content.size,c).setMeta("preventUpdate",!t),!0}return a&&o.setMeta("preventUpdate",!t),s.insertContentAt({from:0,to:u.content.size},i,{parseOptions:e,errorOnInvalidContent:n??r.options.enableContentCheck})};function c2(i,n){const t=su(n,i.schema),{from:e,to:r,empty:o}=i.selection,a=[];o?(i.storedMarks&&a.push(...i.storedMarks),a.push(...i.selection.$head.marks())):i.doc.nodesBetween(e,r,u=>{a.push(...u.marks)});const s=a.find(u=>u.type.name===t.name);return s?{...s.attrs}:{}}function f2(i,n){const t=new lM(i);return n.forEach(e=>{e.steps.forEach(r=>{t.step(r)})}),t}function LB(i){for(let n=0;n<i.edgeCount;n+=1){const{type:t}=i.edge(n);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function jB(i,n,t){const e=[];return i.nodesBetween(n.from,n.to,(r,o)=>{t(r)&&e.push({node:r,pos:o})}),e}function IB(i,n){for(let t=i.depth;t>0;t-=1){const e=i.node(t);if(n(e))return{pos:t>0?i.before(t):0,start:i.start(t),depth:t,node:e}}}function Mb(i){return n=>IB(n.$from,i)}function $e(i,n,t){return i.config[n]===void 0&&i.parent?$e(i.parent,n,t):typeof i.config[n]=="function"?i.config[n].bind({...t,parent:i.parent?$e(i.parent,n,t):null}):i.config[n]}function p1(i){return i.map(n=>{const t={name:n.name,options:n.options,storage:n.storage},e=$e(n,"addExtensions",t);return e?[n,...p1(e())]:n}).flat(10)}function v1(i,n){const t=Wf.fromSchema(n).serializeFragment(i),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(t),r.innerHTML}function d2(i){return typeof i=="function"}function Kn(i,n=void 0,...t){return d2(i)?n?i.bind(n)(...t):i(...t):i}function BB(i={}){return Object.keys(i).length===0&&i.constructor===Object}function jh(i){const n=i.filter(r=>r.type==="extension"),t=i.filter(r=>r.type==="node"),e=i.filter(r=>r.type==="mark");return{baseExtensions:n,nodeExtensions:t,markExtensions:e}}function h2(i){const n=[],{nodeExtensions:t,markExtensions:e}=jh(i),r=[...t,...e],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return i.forEach(a=>{const s={name:a.name,options:a.options,storage:a.storage,extensions:r},u=$e(a,"addGlobalAttributes",s);if(!u)return;u().forEach(h=>{h.types.forEach(v=>{Object.entries(h.attributes).forEach(([m,y])=>{n.push({type:v,name:m,attribute:{...o,...y}})})})})}),r.forEach(a=>{const s={name:a.name,options:a.options,storage:a.storage},u=$e(a,"addAttributes",s);if(!u)return;const c=u();Object.entries(c).forEach(([h,v])=>{const m={...o,...v};typeof(m==null?void 0:m.default)=="function"&&(m.default=m.default()),m!=null&&m.isRequired&&(m==null?void 0:m.default)===void 0&&delete m.default,n.push({type:a.name,name:h,attribute:m})})}),n}function Qr(...i){return i.filter(n=>!!n).reduce((n,t)=>{const e={...n};return Object.entries(t).forEach(([r,o])=>{if(!e[r]){e[r]=o;return}if(r==="class"){const s=o?String(o).split(" "):[],u=e[r]?e[r].split(" "):[],c=s.filter(h=>!u.includes(h));e[r]=[...u,...c].join(" ")}else if(r==="style"){const s=o?o.split(";").map(h=>h.trim()).filter(Boolean):[],u=e[r]?e[r].split(";").map(h=>h.trim()).filter(Boolean):[],c=new Map;u.forEach(h=>{const[v,m]=h.split(":").map(y=>y.trim());c.set(v,m)}),s.forEach(h=>{const[v,m]=h.split(":").map(y=>y.trim());c.set(v,m)}),e[r]=Array.from(c.entries()).map(([h,v])=>`${h}: ${v}`).join("; ")}else e[r]=o}),e},{})}function Ny(i,n){return n.filter(t=>t.type===i.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(i.attrs)||{}:{[t.name]:i.attrs[t.name]}).reduce((t,e)=>Qr(t,e),{})}function UB(i){return typeof i!="string"?i:i.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(i):i==="true"?!0:i==="false"?!1:i}function jE(i,n){return"style"in i?i:{...i,getAttrs:t=>{const e=i.getAttrs?i.getAttrs(t):i.attrs;if(e===!1)return!1;const r=n.reduce((o,a)=>{const s=a.attribute.parseHTML?a.attribute.parseHTML(t):UB(t.getAttribute(a.name));return s==null?o:{...o,[a.name]:s}},{});return{...e,...r}}}}function IE(i){return Object.fromEntries(Object.entries(i).filter(([n,t])=>n==="attrs"&&BB(t)?!1:t!=null))}function BE(i){var n,t;const e={};return!((n=i==null?void 0:i.attribute)!=null&&n.isRequired)&&"default"in((i==null?void 0:i.attribute)||{})&&(e.default=i.attribute.default),((t=i==null?void 0:i.attribute)==null?void 0:t.validate)!==void 0&&(e.validate=i.attribute.validate),[i.name,e]}function VB(i,n){var t;const e=h2(i),{nodeExtensions:r,markExtensions:o}=jh(i),a=(t=r.find(c=>$e(c,"topNode")))==null?void 0:t.name,s=Object.fromEntries(r.map(c=>{const h=e.filter(D=>D.type===c.name),v={name:c.name,options:c.options,storage:c.storage,editor:n},m=i.reduce((D,F)=>{const V=$e(F,"extendNodeSchema",v);return{...D,...V?V(c):{}}},{}),y=IE({...m,content:Kn($e(c,"content",v)),marks:Kn($e(c,"marks",v)),group:Kn($e(c,"group",v)),inline:Kn($e(c,"inline",v)),atom:Kn($e(c,"atom",v)),selectable:Kn($e(c,"selectable",v)),draggable:Kn($e(c,"draggable",v)),code:Kn($e(c,"code",v)),whitespace:Kn($e(c,"whitespace",v)),linebreakReplacement:Kn($e(c,"linebreakReplacement",v)),defining:Kn($e(c,"defining",v)),isolating:Kn($e(c,"isolating",v)),attrs:Object.fromEntries(h.map(BE))}),_=Kn($e(c,"parseHTML",v));_&&(y.parseDOM=_.map(D=>jE(D,h)));const C=$e(c,"renderHTML",v);C&&(y.toDOM=D=>C({node:D,HTMLAttributes:Ny(D,h)}));const E=$e(c,"renderText",v);return E&&(y.toText=E),[c.name,y]})),u=Object.fromEntries(o.map(c=>{const h=e.filter(E=>E.type===c.name),v={name:c.name,options:c.options,storage:c.storage,editor:n},m=i.reduce((E,D)=>{const F=$e(D,"extendMarkSchema",v);return{...E,...F?F(c):{}}},{}),y=IE({...m,inclusive:Kn($e(c,"inclusive",v)),excludes:Kn($e(c,"excludes",v)),group:Kn($e(c,"group",v)),spanning:Kn($e(c,"spanning",v)),code:Kn($e(c,"code",v)),attrs:Object.fromEntries(h.map(BE))}),_=Kn($e(c,"parseHTML",v));_&&(y.parseDOM=_.map(E=>jE(E,h)));const C=$e(c,"renderHTML",v);return C&&(y.toDOM=E=>C({mark:E,HTMLAttributes:Ny(E,h)})),[c.name,y]}));return new Kk({topNode:a,nodes:s,marks:u})}function FB(i){const n=i.filter((t,e)=>i.indexOf(t)!==e);return Array.from(new Set(n))}function g1(i){return i.sort((t,e)=>{const r=$e(t,"priority")||100,o=$e(e,"priority")||100;return r>o?-1:r<o?1:0})}function p2(i){const n=g1(p1(i)),t=FB(n.map(e=>e.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(e=>`'${e}'`).join(", ")}]. This can lead to issues.`),n}function v2(i,n,t){const{from:e,to:r}=n,{blockSeparator:o=`

`,textSerializers:a={}}=t||{};let s="";return i.nodesBetween(e,r,(u,c,h,v)=>{var m;u.isBlock&&c>e&&(s+=o);const y=a==null?void 0:a[u.type.name];if(y)return h&&(s+=y({node:u,pos:c,parent:h,index:v,range:n})),!1;u.isText&&(s+=(m=u==null?void 0:u.text)==null?void 0:m.slice(Math.max(e,c)-c,r-c))}),s}function HB(i,n){const t={from:0,to:i.content.size};return v2(i,t,n)}function g2(i){return Object.fromEntries(Object.entries(i.nodes).filter(([,n])=>n.spec.toText).map(([n,t])=>[n,t.spec.toText]))}function zB(i,n){const t=fi(n,i.schema),{from:e,to:r}=i.selection,o=[];i.doc.nodesBetween(e,r,s=>{o.push(s)});const a=o.reverse().find(s=>s.type.name===t.name);return a?{...a.attrs}:{}}function m2(i,n){const t=kb(typeof n=="string"?n:n.name,i.schema);return t==="node"?zB(i,n):t==="mark"?c2(i,n):{}}function WB(i,n=JSON.stringify){const t={};return i.filter(e=>{const r=n(e);return Object.prototype.hasOwnProperty.call(t,r)?!1:t[r]=!0})}function qB(i){const n=WB(i);return n.length===1?n:n.filter((t,e)=>!n.filter((o,a)=>a!==e).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function y2(i){const{mapping:n,steps:t}=i,e=[];return n.maps.forEach((r,o)=>{const a=[];if(r.ranges.length)r.forEach((s,u)=>{a.push({from:s,to:u})});else{const{from:s,to:u}=t[o];if(s===void 0||u===void 0)return;a.push({from:s,to:u})}a.forEach(({from:s,to:u})=>{const c=n.slice(o).map(s,-1),h=n.slice(o).map(u),v=n.invert().map(c,-1),m=n.invert().map(h);e.push({oldRange:{from:v,to:m},newRange:{from:c,to:h}})})}),qB(e)}function m1(i,n,t){const e=[];return i===n?t.resolve(i).marks().forEach(r=>{const o=t.resolve(i),a=d1(o,r.type);a&&e.push({mark:r,...a})}):t.nodesBetween(i,n,(r,o)=>{!r||(r==null?void 0:r.nodeSize)===void 0||e.push(...r.marks.map(a=>({from:o,to:o+r.nodeSize,mark:a})))}),e}var KB=(i,n,t,e=20)=>{const r=i.doc.resolve(t);let o=e,a=null;for(;o>0&&a===null;){const s=r.node(o);(s==null?void 0:s.type.name)===n?a=s:o-=1}return[a,o]};function tx(i,n){return n.nodes[i]||n.marks[i]||null}function uy(i,n,t){return Object.fromEntries(Object.entries(t).filter(([e])=>{const r=i.find(o=>o.type===n&&o.name===e);return r?r.attribute.keepOnSplit:!1}))}var $B=(i,n=500)=>{let t="";const e=i.parentOffset;return i.parent.nodesBetween(Math.max(0,e-n),e,(r,o,a,s)=>{var u,c;const h=((c=(u=r.type.spec).toText)==null?void 0:c.call(u,{node:r,pos:o,parent:a,index:s}))||r.textContent||"%leaf%";t+=r.isAtom&&!r.isText?h:h.slice(0,Math.max(0,e-o))}),t};function MS(i,n,t={}){const{empty:e,ranges:r}=i.selection,o=n?su(n,i.schema):null;if(e)return!!(i.storedMarks||i.selection.$from.marks()).filter(v=>o?o.name===v.type.name:!0).find(v=>Py(v.attrs,t,{strict:!1}));let a=0;const s=[];if(r.forEach(({$from:v,$to:m})=>{const y=v.pos,_=m.pos;i.doc.nodesBetween(y,_,(C,E)=>{if(!C.isText&&!C.marks.length)return;const D=Math.max(y,E),F=Math.min(_,E+C.nodeSize),V=F-D;a+=V,s.push(...C.marks.map(K=>({mark:K,from:D,to:F})))})}),a===0)return!1;const u=s.filter(v=>o?o.name===v.mark.type.name:!0).filter(v=>Py(v.mark.attrs,t,{strict:!1})).reduce((v,m)=>v+m.to-m.from,0),c=s.filter(v=>o?v.mark.type!==o&&v.mark.type.excludes(o):!0).reduce((v,m)=>v+m.to-m.from,0);return(u>0?u+c:u)>=a}function GB(i,n,t={}){if(!n)return yc(i,null,t)||MS(i,null,t);const e=kb(n,i.schema);return e==="node"?yc(i,n,t):e==="mark"?MS(i,n,t):!1}var YB=(i,n)=>{const{$from:t,$to:e,$anchor:r}=i.selection;if(n){const o=Mb(s=>s.type.name===n)(i.selection);if(!o)return!1;const a=i.doc.resolve(o.pos+1);return r.pos+1===a.end()}return!(e.parentOffset<e.parent.nodeSize-2||t.pos!==e.pos)},XB=i=>{const{$from:n,$to:t}=i.selection;return!(n.parentOffset>0||n.pos!==t.pos)};function UE(i,n){return Array.isArray(n)?n.some(t=>(typeof t=="string"?t:t.name)===i.name):n}function VE(i,n){const{nodeExtensions:t}=jh(n),e=t.find(a=>a.name===i);if(!e)return!1;const r={name:e.name,options:e.options,storage:e.storage},o=Kn($e(e,"group",r));return typeof o!="string"?!1:o.split(" ").includes("list")}function Db(i,{checkChildren:n=!0,ignoreWhitespace:t=!1}={}){var e;if(t){if(i.type.name==="hardBreak")return!0;if(i.isText)return/^\s*$/m.test((e=i.text)!=null?e:"")}if(i.isText)return!i.text;if(i.isAtom||i.isLeaf)return!1;if(i.content.childCount===0)return!0;if(n){let r=!0;return i.content.forEach(o=>{r!==!1&&(Db(o,{ignoreWhitespace:t,checkChildren:n})||(r=!1))}),r}return!1}function b2(i){return i instanceof Ge}function JB(i,n,t){var e;const{selection:r}=n;let o=null;if(a2(r)&&(o=r.$cursor),o){const s=(e=i.storedMarks)!=null?e:o.marks();return o.parent.type.allowsMarkType(t)&&(!!t.isInSet(s)||!s.some(c=>c.type.excludes(t)))}const{ranges:a}=r;return a.some(({$from:s,$to:u})=>{let c=s.depth===0?i.doc.inlineContent&&i.doc.type.allowsMarkType(t):!1;return i.doc.nodesBetween(s.pos,u.pos,(h,v,m)=>{if(c)return!1;if(h.isInline){const y=!m||m.type.allowsMarkType(t),_=!!t.isInSet(h.marks)||!h.marks.some(C=>C.type.excludes(t));c=y&&_}return!c}),c})}var ZB=(i,n={})=>({tr:t,state:e,dispatch:r})=>{const{selection:o}=t,{empty:a,ranges:s}=o,u=su(i,e.schema);if(r)if(a){const c=c2(e,u);t.addStoredMark(u.create({...c,...n}))}else s.forEach(c=>{const h=c.$from.pos,v=c.$to.pos;e.doc.nodesBetween(h,v,(m,y)=>{const _=Math.max(y,h),C=Math.min(y+m.nodeSize,v);m.marks.find(D=>D.type===u)?m.marks.forEach(D=>{u===D.type&&t.addMark(_,C,u.create({...D.attrs,...n}))}):t.addMark(_,C,u.create(n))})});return JB(e,t,u)},QB=(i,n)=>({tr:t})=>(t.setMeta(i,n),!0),tU=(i,n={})=>({state:t,dispatch:e,chain:r})=>{const o=fi(i,t.schema);let a;return t.selection.$anchor.sameParent(t.selection.$head)&&(a=t.selection.$anchor.parent.attrs),o.isTextblock?r().command(({commands:s})=>tE(o,{...a,...n})(t)?!0:s.clearNodes()).command(({state:s})=>tE(o,{...a,...n})(s,e)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},eU=i=>({tr:n,dispatch:t})=>{if(t){const{doc:e}=n,r=Cf(i,0,e.content.size),o=Ge.create(e,r);n.setSelection(o)}return!0},nU=(i,n)=>({tr:t,state:e,dispatch:r})=>{const{selection:o}=e;let a,s;return typeof n=="number"?(a=n,s=n):n&&"from"in n&&"to"in n?(a=n.from,s=n.to):(a=o.from,s=o.to),r&&t.doc.nodesBetween(a,s,(u,c)=>{u.isText||t.setNodeMarkup(c,void 0,{...u.attrs,dir:i})}),!0},rU=i=>({tr:n,dispatch:t})=>{if(t){const{doc:e}=n,{from:r,to:o}=typeof i=="number"?{from:i,to:i}:i,a=an.atStart(e).from,s=an.atEnd(e).to,u=Cf(r,a,s),c=Cf(o,a,s),h=an.create(e,u,c);n.setSelection(h)}return!0},iU=i=>({state:n,dispatch:t})=>{const e=fi(i,n.schema);return e3(e)(n,t)};function FE(i,n){const t=i.storedMarks||i.selection.$to.parentOffset&&i.selection.$from.marks();if(t){const e=t.filter(r=>n==null?void 0:n.includes(r.type.name));i.tr.ensureMarks(e)}}var oU=({keepMarks:i=!0}={})=>({tr:n,state:t,dispatch:e,editor:r})=>{const{selection:o,doc:a}=n,{$from:s,$to:u}=o,c=r.extensionManager.attributes,h=uy(c,s.node().type.name,s.node().attrs);if(o instanceof Ge&&o.node.isBlock)return!s.parentOffset||!tu(a,s.pos)?!1:(e&&(i&&FE(t,r.extensionManager.splittableMarks),n.split(s.pos).scrollIntoView()),!0);if(!s.parent.isBlock)return!1;const v=u.parentOffset===u.parent.content.size,m=s.depth===0?void 0:LB(s.node(-1).contentMatchAt(s.indexAfter(-1)));let y=v&&m?[{type:m,attrs:h}]:void 0,_=tu(n.doc,n.mapping.map(s.pos),1,y);if(!y&&!_&&tu(n.doc,n.mapping.map(s.pos),1,m?[{type:m}]:void 0)&&(_=!0,y=m?[{type:m,attrs:h}]:void 0),e){if(_&&(o instanceof an&&n.deleteSelection(),n.split(n.mapping.map(s.pos),1,y),m&&!v&&!s.parentOffset&&s.parent.type!==m)){const C=n.mapping.map(s.before()),E=n.doc.resolve(C);s.node(-1).canReplaceWith(E.index(),E.index()+1,m)&&n.setNodeMarkup(n.mapping.map(s.before()),m)}i&&FE(t,r.extensionManager.splittableMarks),n.scrollIntoView()}return _},aU=(i,n={})=>({tr:t,state:e,dispatch:r,editor:o})=>{var a;const s=fi(i,e.schema),{$from:u,$to:c}=e.selection,h=e.selection.node;if(h&&h.isBlock||u.depth<2||!u.sameParent(c))return!1;const v=u.node(-1);if(v.type!==s)return!1;const m=o.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==s||u.index(-2)!==u.node(-2).childCount-1)return!1;if(r){let D=ge.empty;const F=u.index(-1)?1:u.index(-2)?2:3;for(let st=u.depth-F;st>=u.depth-3;st-=1)D=ge.from(u.node(st).copy(D));const V=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,K={...uy(m,u.node().type.name,u.node().attrs),...n},Z=((a=s.contentMatch.defaultType)==null?void 0:a.createAndFill(K))||void 0;D=D.append(ge.from(s.createAndFill(null,Z)||void 0));const ct=u.before(u.depth-(F-1));t.replace(ct,u.after(-V),new Ne(D,4-F,0));let ht=-1;t.doc.nodesBetween(ct,t.doc.content.size,(st,et)=>{if(ht>-1)return!1;st.isTextblock&&st.content.size===0&&(ht=et+1)}),ht>-1&&t.setSelection(an.near(t.doc.resolve(ht))),t.scrollIntoView()}return!0}const y=c.pos===u.end()?v.contentMatchAt(0).defaultType:null,_={...uy(m,v.type.name,v.attrs),...n},C={...uy(m,u.node().type.name,u.node().attrs),...n};t.delete(u.pos,c.pos);const E=y?[{type:s,attrs:_},{type:y,attrs:C}]:[{type:s,attrs:_}];if(!tu(t.doc,u.pos,2))return!1;if(r){const{selection:D,storedMarks:F}=e,{splittableMarks:V}=o.extensionManager,K=F||D.$to.parentOffset&&D.$from.marks();if(t.split(u.pos,2,E).scrollIntoView(),!K||!r)return!0;const Z=K.filter(ct=>V.includes(ct.type.name));t.ensureMarks(Z)}return!0},ex=(i,n)=>{const t=Mb(a=>a.type===n)(i.selection);if(!t)return!0;const e=i.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(e===void 0)return!0;const r=i.doc.nodeAt(e);return t.node.type===(r==null?void 0:r.type)&&wc(i.doc,t.pos)&&i.join(t.pos),!0},nx=(i,n)=>{const t=Mb(a=>a.type===n)(i.selection);if(!t)return!0;const e=i.doc.resolve(t.start).after(t.depth);if(e===void 0)return!0;const r=i.doc.nodeAt(e);return t.node.type===(r==null?void 0:r.type)&&wc(i.doc,e)&&i.join(e),!0},sU=(i,n,t,e={})=>({editor:r,tr:o,state:a,dispatch:s,chain:u,commands:c,can:h})=>{const{extensions:v,splittableMarks:m}=r.extensionManager,y=fi(i,a.schema),_=fi(n,a.schema),{selection:C,storedMarks:E}=a,{$from:D,$to:F}=C,V=D.blockRange(F),K=E||C.$to.parentOffset&&C.$from.marks();if(!V)return!1;const Z=Mb(ct=>VE(ct.type.name,v))(C);if(V.depth>=1&&Z&&V.depth-Z.depth<=1){if(Z.node.type===y)return c.liftListItem(_);if(VE(Z.node.type.name,v)&&y.validContent(Z.node.content)&&s)return u().command(()=>(o.setNodeMarkup(Z.pos,y),!0)).command(()=>ex(o,y)).command(()=>nx(o,y)).run()}return!t||!K||!s?u().command(()=>h().wrapInList(y,e)?!0:c.clearNodes()).wrapInList(y,e).command(()=>ex(o,y)).command(()=>nx(o,y)).run():u().command(()=>{const ct=h().wrapInList(y,e),ht=K.filter(st=>m.includes(st.type.name));return o.ensureMarks(ht),ct?!0:c.clearNodes()}).wrapInList(y,e).command(()=>ex(o,y)).command(()=>nx(o,y)).run()},lU=(i,n={},t={})=>({state:e,commands:r})=>{const{extendEmptyMarkRange:o=!1}=t,a=su(i,e.schema);return MS(e,a,n)?r.unsetMark(a,{extendEmptyMarkRange:o}):r.setMark(a,n)},uU=(i,n,t={})=>({state:e,commands:r})=>{const o=fi(i,e.schema),a=fi(n,e.schema),s=yc(e,o,t);let u;return e.selection.$anchor.sameParent(e.selection.$head)&&(u=e.selection.$anchor.parent.attrs),s?r.setNode(a,u):r.setNode(o,{...u,...t})},cU=(i,n={})=>({state:t,commands:e})=>{const r=fi(i,t.schema);return yc(t,r,n)?e.lift(r):e.wrapIn(r,n)},fU=()=>({state:i,dispatch:n})=>{const t=i.plugins;for(let e=0;e<t.length;e+=1){const r=t[e];let o;if(r.spec.isInputRules&&(o=r.getState(i))){if(n){const a=i.tr,s=o.transform;for(let u=s.steps.length-1;u>=0;u-=1)a.step(s.steps[u].invert(s.docs[u]));if(o.text){const u=a.doc.resolve(o.from).marks();a.replaceWith(o.from,o.to,i.schema.text(o.text,u))}else a.delete(o.from,o.to)}return!0}}return!1},dU=()=>({tr:i,dispatch:n})=>{const{selection:t}=i,{empty:e,ranges:r}=t;return e||n&&r.forEach(o=>{i.removeMark(o.$from.pos,o.$to.pos)}),!0},hU=(i,n={})=>({tr:t,state:e,dispatch:r})=>{var o;const{extendEmptyMarkRange:a=!1}=n,{selection:s}=t,u=su(i,e.schema),{$from:c,empty:h,ranges:v}=s;if(!r)return!0;if(h&&a){let{from:m,to:y}=s;const _=(o=c.marks().find(E=>E.type===u))==null?void 0:o.attrs,C=d1(c,u,_);C&&(m=C.from,y=C.to),t.removeMark(m,y,u)}else v.forEach(m=>{t.removeMark(m.$from.pos,m.$to.pos,u)});return t.removeStoredMark(u),!0},pU=i=>({tr:n,state:t,dispatch:e})=>{const{selection:r}=t;let o,a;return typeof i=="number"?(o=i,a=i):i&&"from"in i&&"to"in i?(o=i.from,a=i.to):(o=r.from,a=r.to),e&&n.doc.nodesBetween(o,a,(s,u)=>{if(s.isText)return;const c={...s.attrs};delete c.dir,n.setNodeMarkup(u,void 0,c)}),!0},vU=(i,n={})=>({tr:t,state:e,dispatch:r})=>{let o=null,a=null;const s=kb(typeof i=="string"?i:i.name,e.schema);if(!s)return!1;s==="node"&&(o=fi(i,e.schema)),s==="mark"&&(a=su(i,e.schema));let u=!1;return t.selection.ranges.forEach(c=>{const h=c.$from.pos,v=c.$to.pos;let m,y,_,C;t.selection.empty?e.doc.nodesBetween(h,v,(E,D)=>{o&&o===E.type&&(u=!0,_=Math.max(D,h),C=Math.min(D+E.nodeSize,v),m=D,y=E)}):e.doc.nodesBetween(h,v,(E,D)=>{D<h&&o&&o===E.type&&(u=!0,_=Math.max(D,h),C=Math.min(D+E.nodeSize,v),m=D,y=E),D>=h&&D<=v&&(o&&o===E.type&&(u=!0,r&&t.setNodeMarkup(D,void 0,{...E.attrs,...n})),a&&E.marks.length&&E.marks.forEach(F=>{if(a===F.type&&(u=!0,r)){const V=Math.max(D,h),K=Math.min(D+E.nodeSize,v);t.addMark(V,K,a.create({...F.attrs,...n}))}}))}),y&&(m!==void 0&&r&&t.setNodeMarkup(m,void 0,{...y.attrs,...n}),a&&y.marks.length&&y.marks.forEach(E=>{a===E.type&&r&&t.addMark(_,C,a.create({...E.attrs,...n}))}))}),u},gU=(i,n={})=>({state:t,dispatch:e})=>{const r=fi(i,t.schema);return GI(r,n)(t,e)},mU=(i,n={})=>({state:t,dispatch:e})=>{const r=fi(i,t.schema);return YI(r,n)(t,e)},yU=class{constructor(){this.callbacks={}}on(i,n){return this.callbacks[i]||(this.callbacks[i]=[]),this.callbacks[i].push(n),this}emit(i,...n){const t=this.callbacks[i];return t&&t.forEach(e=>e.apply(this,n)),this}off(i,n){const t=this.callbacks[i];return t&&(n?this.callbacks[i]=t.filter(e=>e!==n):delete this.callbacks[i]),this}once(i,n){const t=(...e)=>{this.off(i,t),n.apply(this,e)};return this.on(i,t)}removeAllListeners(){this.callbacks={}}},Pb=class{constructor(i){var n;this.find=i.find,this.handler=i.handler,this.undoable=(n=i.undoable)!=null?n:!0}},bU=(i,n)=>{if(f1(n))return n.exec(i);const t=n(i);if(!t)return null;const e=[t.text];return e.index=t.index,e.input=i,e.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),e.push(t.replaceWith)),e};function Bm(i){var n;const{editor:t,from:e,to:r,text:o,rules:a,plugin:s}=i,{view:u}=t;if(u.composing)return!1;const c=u.state.doc.resolve(e);if(c.parent.type.spec.code||(n=c.nodeBefore||c.nodeAfter)!=null&&n.marks.find(m=>m.type.spec.code))return!1;let h=!1;const v=$B(c)+o;return a.forEach(m=>{if(h)return;const y=bU(v,m.find);if(!y)return;const _=u.state.tr,C=Ob({state:u.state,transaction:_}),E={from:e-(y[0].length-o.length),to:r},{commands:D,chain:F,can:V}=new Ab({editor:t,state:C});m.handler({state:C,range:E,match:y,commands:D,chain:F,can:V})===null||!_.steps.length||(m.undoable&&_.setMeta(s,{transform:_,from:e,to:r,text:o}),u.dispatch(_),h=!0)}),h}function wU(i){const{editor:n,rules:t}=i,e=new Rr({state:{init(){return null},apply(r,o,a){const s=r.getMeta(e);if(s)return s;const u=r.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:h}=u;typeof h=="string"?h=h:h=v1(ge.from(h),a.schema);const{from:v}=u,m=v+h.length;Bm({editor:n,from:v,to:m,text:h,rules:t,plugin:e})}),r.selectionSet||r.docChanged?null:o}},props:{handleTextInput(r,o,a,s){return Bm({editor:n,from:o,to:a,text:s,rules:t,plugin:e})},handleDOMEvents:{compositionend:r=>(setTimeout(()=>{const{$cursor:o}=r.state.selection;o&&Bm({editor:n,from:o.pos,to:o.pos,text:"",rules:t,plugin:e})}),!1)},handleKeyDown(r,o){if(o.key!=="Enter")return!1;const{$cursor:a}=r.state.selection;return a?Bm({editor:n,from:a.pos,to:a.pos,text:`
`,rules:t,plugin:e}):!1}},isInputRules:!0});return e}function xU(i){return Object.prototype.toString.call(i).slice(8,-1)}function Um(i){return xU(i)!=="Object"?!1:i.constructor===Object&&Object.getPrototypeOf(i)===Object.prototype}function w2(i,n){const t={...i};return Um(i)&&Um(n)&&Object.keys(n).forEach(e=>{Um(n[e])&&Um(i[e])?t[e]=w2(i[e],n[e]):t[e]=n[e]}),t}var y1=class{constructor(i={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...i},this.name=this.config.name}get options(){return{...Kn($e(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Kn($e(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(i={}){const n=this.extend({...this.config,addOptions:()=>w2(this.options,i)});return n.name=this.name,n.parent=this.parent,n}extend(i={}){const n=new this.constructor({...this.config,...i});return n.parent=this,this.child=n,n.name="name"in i?i.name:n.parent.name,n}},qf=class x2 extends y1{constructor(){super(...arguments),this.type="mark"}static create(n={}){const t=typeof n=="function"?n():n;return new x2(t)}static handleExit({editor:n,mark:t}){const{tr:e}=n.state,r=n.state.selection.$from;if(r.pos===r.end()){const a=r.marks();if(!!!a.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const u=a.find(c=>(c==null?void 0:c.type.name)===t.name);return u&&e.removeStoredMark(u),e.insertText(" ",r.pos),n.view.dispatch(e),!0}return!1}configure(n){return super.configure(n)}extend(n){const t=typeof n=="function"?n():n;return super.extend(t)}};function SU(i){return typeof i=="number"}var _U=class{constructor(i){this.find=i.find,this.handler=i.handler}},CU=(i,n,t)=>{if(f1(n))return[...i.matchAll(n)];const e=n(i,t);return e?e.map(r=>{const o=[r.text];return o.index=r.index,o.input=i,o.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(r.replaceWith)),o}):[]};function TU(i){const{editor:n,state:t,from:e,to:r,rule:o,pasteEvent:a,dropEvent:s}=i,{commands:u,chain:c,can:h}=new Ab({editor:n,state:t}),v=[];return t.doc.nodesBetween(e,r,(y,_)=>{var C,E,D,F,V;if((E=(C=y.type)==null?void 0:C.spec)!=null&&E.code||!(y.isText||y.isTextblock||y.isInline))return;const K=(V=(F=(D=y.content)==null?void 0:D.size)!=null?F:y.nodeSize)!=null?V:0,Z=Math.max(e,_),ct=Math.min(r,_+K);if(Z>=ct)return;const ht=y.isText?y.text||"":y.textBetween(Z-_,ct-_,void 0,"");CU(ht,o.find,a).forEach(et=>{if(et.index===void 0)return;const nt=Z+et.index+1,it=nt+et[0].length,$={from:t.tr.mapping.map(nt),to:t.tr.mapping.map(it)},ft=o.handler({state:t,range:$,match:et,commands:u,chain:c,can:h,pasteEvent:a,dropEvent:s});v.push(ft)})}),v.every(y=>y!==null)}var Vm=null,EU=i=>{var n;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(n=t.clipboardData)==null||n.setData("text/html",i),t};function OU(i){const{editor:n,rules:t}=i;let e=null,r=!1,o=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,s;try{s=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{s=null}const u=({state:h,from:v,to:m,rule:y,pasteEvt:_})=>{const C=h.tr,E=Ob({state:h,transaction:C});if(!(!TU({editor:n,state:E,from:Math.max(v-1,0),to:m.b-1,rule:y,pasteEvent:_,dropEvent:s})||!C.steps.length)){try{s=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{s=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,C}};return t.map(h=>new Rr({view(v){const m=_=>{var C;e=(C=v.dom.parentElement)!=null&&C.contains(_.target)?v.dom.parentElement:null,e&&(Vm=n)},y=()=>{Vm&&(Vm=null)};return window.addEventListener("dragstart",m),window.addEventListener("dragend",y),{destroy(){window.removeEventListener("dragstart",m),window.removeEventListener("dragend",y)}}},props:{handleDOMEvents:{drop:(v,m)=>{if(o=e===v.dom.parentElement,s=m,!o){const y=Vm;y!=null&&y.isEditable&&setTimeout(()=>{const _=y.state.selection;_&&y.commands.deleteRange({from:_.from,to:_.to})},10)}return!1},paste:(v,m)=>{var y;const _=(y=m.clipboardData)==null?void 0:y.getData("text/html");return a=m,r=!!(_!=null&&_.includes("data-pm-slice")),!1}}},appendTransaction:(v,m,y)=>{const _=v[0],C=_.getMeta("uiEvent")==="paste"&&!r,E=_.getMeta("uiEvent")==="drop"&&!o,D=_.getMeta("applyPasteRules"),F=!!D;if(!C&&!E&&!F)return;if(F){let{text:Z}=D;typeof Z=="string"?Z=Z:Z=v1(ge.from(Z),y.schema);const{from:ct}=D,ht=ct+Z.length,st=EU(Z);return u({rule:h,state:y,from:ct,to:{b:ht},pasteEvt:st})}const V=m.doc.content.findDiffStart(y.doc.content),K=m.doc.content.findDiffEnd(y.doc.content);if(!(!SU(V)||!K||V===K.b))return u({rule:h,state:y,from:V,to:K,pasteEvt:a})}}))}var Nb=class{constructor(i,n){this.splittableMarks=[],this.editor=n,this.baseExtensions=i,this.extensions=p2(i),this.schema=VB(this.extensions,n),this.setupExtensions()}get commands(){return this.extensions.reduce((i,n)=>{const t={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:this.editor,type:tx(n.name,this.schema)},e=$e(n,"addCommands",t);return e?{...i,...e()}:i},{})}get plugins(){const{editor:i}=this;return g1([...this.extensions].reverse()).flatMap(e=>{const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:i,type:tx(e.name,this.schema)},o=[],a=$e(e,"addKeyboardShortcuts",r);let s={};if(e.type==="mark"&&$e(e,"exitable",r)&&(s.ArrowRight=()=>qf.handleExit({editor:i,mark:e})),a){const m=Object.fromEntries(Object.entries(a()).map(([y,_])=>[y,()=>_({editor:i})]));s={...s,...m}}const u=z4(s);o.push(u);const c=$e(e,"addInputRules",r);if(UE(e,i.options.enableInputRules)&&c){const m=c();if(m&&m.length){const y=wU({editor:i,rules:m}),_=Array.isArray(y)?y:[y];o.push(..._)}}const h=$e(e,"addPasteRules",r);if(UE(e,i.options.enablePasteRules)&&h){const m=h();if(m&&m.length){const y=OU({editor:i,rules:m});o.push(...y)}}const v=$e(e,"addProseMirrorPlugins",r);if(v){const m=v();o.push(...m)}return o})}get attributes(){return h2(this.extensions)}get nodeViews(){const{editor:i}=this,{nodeExtensions:n}=jh(this.extensions);return Object.fromEntries(n.filter(t=>!!$e(t,"addNodeView")).map(t=>{const e=this.attributes.filter(u=>u.type===t.name),r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:i,type:fi(t.name,this.schema)},o=$e(t,"addNodeView",r);if(!o)return[];const a=o();if(!a)return[];const s=(u,c,h,v,m)=>{const y=Ny(u,e);return a({node:u,view:c,getPos:h,decorations:v,innerDecorations:m,editor:i,extension:t,HTMLAttributes:y})};return[t.name,s]}))}get markViews(){const{editor:i}=this,{markExtensions:n}=jh(this.extensions);return Object.fromEntries(n.filter(t=>!!$e(t,"addMarkView")).map(t=>{const e=this.attributes.filter(s=>s.type===t.name),r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:i,type:su(t.name,this.schema)},o=$e(t,"addMarkView",r);if(!o)return[];const a=(s,u,c)=>{const h=Ny(s,e);return o()({mark:s,view:u,inline:c,editor:i,extension:t,HTMLAttributes:h,updateAttributes:v=>{HU(s,i,v)}})};return[t.name,a]}))}setupExtensions(){const i=this.extensions;this.editor.extensionStorage=Object.fromEntries(i.map(n=>[n.name,n.storage])),i.forEach(n=>{var t;const e={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:this.editor,type:tx(n.name,this.schema)};n.type==="mark"&&((t=Kn($e(n,"keepOnSplit",e)))==null||t)&&this.splittableMarks.push(n.name);const r=$e(n,"onBeforeCreate",e),o=$e(n,"onCreate",e),a=$e(n,"onUpdate",e),s=$e(n,"onSelectionUpdate",e),u=$e(n,"onTransaction",e),c=$e(n,"onFocus",e),h=$e(n,"onBlur",e),v=$e(n,"onDestroy",e);r&&this.editor.on("beforeCreate",r),o&&this.editor.on("create",o),a&&this.editor.on("update",a),s&&this.editor.on("selectionUpdate",s),u&&this.editor.on("transaction",u),c&&this.editor.on("focus",c),h&&this.editor.on("blur",h),v&&this.editor.on("destroy",v)})}};Nb.resolve=p2;Nb.sort=g1;Nb.flatten=p1;var AU={};c1(AU,{ClipboardTextSerializer:()=>_2,Commands:()=>C2,Delete:()=>T2,Drop:()=>E2,Editable:()=>O2,FocusEvents:()=>k2,Keymap:()=>M2,Paste:()=>D2,Tabindex:()=>P2,TextDirection:()=>N2,focusEventsPluginKey:()=>A2});var ti=class S2 extends y1{constructor(){super(...arguments),this.type="extension"}static create(n={}){const t=typeof n=="function"?n():n;return new S2(t)}configure(n){return super.configure(n)}extend(n){const t=typeof n=="function"?n():n;return super.extend(t)}},_2=ti.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Rr({key:new Si("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:i}=this,{state:n,schema:t}=i,{doc:e,selection:r}=n,{ranges:o}=r,a=Math.min(...o.map(h=>h.$from.pos)),s=Math.max(...o.map(h=>h.$to.pos)),u=g2(t);return v2(e,{from:a,to:s},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),C2=ti.create({name:"commands",addCommands(){return{...i2}}}),T2=ti.create({name:"delete",onUpdate({transaction:i,appendedTransactions:n}){var t,e,r;const o=()=>{var a,s,u,c;if((c=(u=(s=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:s.filterTransaction)==null?void 0:u.call(s,i))!=null?c:i.getMeta("y-sync$"))return;const h=f2(i.before,[i,...n]);y2(h).forEach(y=>{h.mapping.mapResult(y.oldRange.from).deletedAfter&&h.mapping.mapResult(y.oldRange.to).deletedBefore&&h.before.nodesBetween(y.oldRange.from,y.oldRange.to,(_,C)=>{const E=C+_.nodeSize-2,D=y.oldRange.from<=C&&E<=y.oldRange.to;this.editor.emit("delete",{type:"node",node:_,from:C,to:E,newFrom:h.mapping.map(C),newTo:h.mapping.map(E),deletedRange:y.oldRange,newRange:y.newRange,partial:!D,editor:this.editor,transaction:i,combinedTransform:h})})});const m=h.mapping;h.steps.forEach((y,_)=>{var C,E;if(y instanceof As){const D=m.slice(_).map(y.from,-1),F=m.slice(_).map(y.to),V=m.invert().map(D,-1),K=m.invert().map(F),Z=(C=h.doc.nodeAt(D-1))==null?void 0:C.marks.some(ht=>ht.eq(y.mark)),ct=(E=h.doc.nodeAt(F))==null?void 0:E.marks.some(ht=>ht.eq(y.mark));this.editor.emit("delete",{type:"mark",mark:y.mark,from:y.from,to:y.to,deletedRange:{from:V,to:K},newRange:{from:D,to:F},partial:!!(ct||Z),editor:this.editor,transaction:i,combinedTransform:h})}})};(r=(e=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:e.async)==null||r?setTimeout(o,0):o()}}),E2=ti.create({name:"drop",addProseMirrorPlugins(){return[new Rr({key:new Si("tiptapDrop"),props:{handleDrop:(i,n,t,e)=>{this.editor.emit("drop",{editor:this.editor,event:n,slice:t,moved:e})}}})]}}),O2=ti.create({name:"editable",addProseMirrorPlugins(){return[new Rr({key:new Si("editable"),props:{editable:()=>this.editor.options.editable}})]}}),A2=new Si("focusEvents"),k2=ti.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:i}=this;return[new Rr({key:A2,props:{handleDOMEvents:{focus:(n,t)=>{i.isFocused=!0;const e=i.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return n.dispatch(e),!1},blur:(n,t)=>{i.isFocused=!1;const e=i.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return n.dispatch(e),!1}}}})]}}),M2=ti.create({name:"keymap",addKeyboardShortcuts(){const i=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:s})=>{const{selection:u,doc:c}=s,{empty:h,$anchor:v}=u,{pos:m,parent:y}=v,_=v.parent.isTextblock&&m>0?s.doc.resolve(m-1):v,C=_.parent.type.spec.isolating,E=v.pos-v.parentOffset,D=C&&_.parent.childCount===1?E===v.pos:bn.atStart(c).from===m;return!h||!y.type.isTextblock||y.textContent.length||!D||D&&v.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),n=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),e={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:i,"Mod-Backspace":i,"Shift-Backspace":i,Delete:n,"Mod-Delete":n,"Mod-a":()=>this.editor.commands.selectAll()},r={...e},o={...e,"Ctrl-h":i,"Alt-Backspace":i,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return h1()||u2()?o:r},addProseMirrorPlugins(){return[new Rr({key:new Si("clearDocument"),appendTransaction:(i,n,t)=>{if(i.some(C=>C.getMeta("composition")))return;const e=i.some(C=>C.docChanged)&&!n.doc.eq(t.doc),r=i.some(C=>C.getMeta("preventClearDocument"));if(!e||r)return;const{empty:o,from:a,to:s}=n.selection,u=bn.atStart(n.doc).from,c=bn.atEnd(n.doc).to;if(o||!(a===u&&s===c)||!Db(t.doc))return;const m=t.tr,y=Ob({state:t,transaction:m}),{commands:_}=new Ab({editor:this.editor,state:y});if(_.clearNodes(),!!m.steps.length)return m}})]}}),D2=ti.create({name:"paste",addProseMirrorPlugins(){return[new Rr({key:new Si("tiptapPaste"),props:{handlePaste:(i,n,t)=>{this.editor.emit("paste",{editor:this.editor,event:n,slice:t})}}})]}}),P2=ti.create({name:"tabindex",addProseMirrorPlugins(){return[new Rr({key:new Si("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),N2=ti.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:i}=jh(this.extensions);return[{types:i.filter(n=>n.name!=="text").map(n=>n.name),attributes:{dir:{default:this.options.direction,parseHTML:n=>{const t=n.getAttribute("dir");return t&&(t==="ltr"||t==="rtl"||t==="auto")?t:this.options.direction},renderHTML:n=>n.dir?{dir:n.dir}:{}}}}]},addProseMirrorPlugins(){return[new Rr({key:new Si("textDirection"),props:{attributes:()=>{const i=this.options.direction;return i?{dir:i}:{}}}})]}}),kU=class oh{constructor(n,t,e=!1,r=null){this.currentNode=null,this.actualDepth=null,this.isBlock=e,this.resolvedPos=n,this.editor=t,this.currentNode=r}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var n;return(n=this.actualDepth)!=null?n:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(n){let t=this.from,e=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,e=this.to-1}this.editor.commands.insertContentAt({from:t,to:e},n)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const n=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(n);return new oh(t,this.editor)}get before(){let n=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return n.depth!==this.depth&&(n=this.resolvedPos.doc.resolve(this.from-3)),new oh(n,this.editor)}get after(){let n=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return n.depth!==this.depth&&(n=this.resolvedPos.doc.resolve(this.to+3)),new oh(n,this.editor)}get children(){const n=[];return this.node.content.forEach((t,e)=>{const r=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,a=this.pos+e+(o?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const s=this.resolvedPos.doc.resolve(a);if(!r&&s.depth<=this.depth)return;const u=new oh(s,this.editor,r,r?t:null);r&&(u.actualDepth=this.depth+1),n.push(new oh(s,this.editor,r,r?t:null))}),n}get firstChild(){return this.children[0]||null}get lastChild(){const n=this.children;return n[n.length-1]||null}closest(n,t={}){let e=null,r=this.parent;for(;r&&!e;){if(r.node.type.name===n)if(Object.keys(t).length>0){const o=r.node.attrs,a=Object.keys(t);for(let s=0;s<a.length;s+=1){const u=a[s];if(o[u]!==t[u])break}}else e=r;r=r.parent}return e}querySelector(n,t={}){return this.querySelectorAll(n,t,!0)[0]||null}querySelectorAll(n,t={},e=!1){let r=[];if(!this.children||this.children.length===0)return r;const o=Object.keys(t);return this.children.forEach(a=>{e&&r.length>0||(a.node.type.name===n&&o.every(u=>t[u]===a.node.attrs[u])&&r.push(a),!(e&&r.length>0)&&(r=r.concat(a.querySelectorAll(n,t,e))))}),r}setAttribute(n){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...n}),this.editor.view.dispatch(t)}},MU=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function DU(i,n,t){const e=document.querySelector("style[data-tiptap-style]");if(e!==null)return e;const r=document.createElement("style");return n&&r.setAttribute("nonce",n),r.setAttribute("data-tiptap-style",""),r.innerHTML=i,document.getElementsByTagName("head")[0].appendChild(r),r}var PU=class extends yU{constructor(n={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:o,moved:a})=>this.options.onDrop(r,o,a)),this.on("paste",({event:r,slice:o})=>this.options.onPaste(r,o)),this.on("delete",this.options.onDelete);const t=this.createDoc(),e=s2(t,this.options.autofocus);this.editorState=ch.create({doc:t,schema:this.schema,selection:e||void 0}),this.options.element&&this.mount(this.options.element)}mount(n){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(n),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const n=this.editorView.dom;n!=null&&n.editor&&delete n.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(n){console.warn("Failed to remove CSS element:",n)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=DU(MU,this.options.injectNonce))}setOptions(n={}){this.options={...this.options,...n},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,t=!0){this.setOptions({editable:n}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:n=>{this.editorState=n},dispatch:n=>{this.dispatchTransaction(n)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(n,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in n)return Reflect.get(n,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(n,t){const e=d2(t)?t(n,[...this.state.plugins]):[...this.state.plugins,n],r=this.state.reconfigure({plugins:e});return this.view.updateState(r),r}unregisterPlugin(n){if(this.isDestroyed)return;const t=this.state.plugins;let e=t;if([].concat(n).forEach(o=>{const a=typeof o=="string"?`${o}$`:o.key;e=e.filter(s=>!s.key.startsWith(a))}),t.length===e.length)return;const r=this.state.reconfigure({plugins:e});return this.view.updateState(r),r}createExtensionManager(){var n,t;const r=[...this.options.enableCoreExtensions?[O2,_2.configure({blockSeparator:(t=(n=this.options.coreExtensionOptions)==null?void 0:n.clipboardTextSerializer)==null?void 0:t.blockSeparator}),C2,k2,M2,P2,E2,D2,T2,N2.configure({direction:this.options.textDirection})].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new Nb(r,this)}createCommandManager(){this.commandManager=new Ab({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let n;try{n=kS(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(e=>e.name!=="collaboration"),this.createExtensionManager()}}),n=kS(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return n}createView(n){var t;this.editorView=new n2(n,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const e=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(e),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=n;return}n.steps.forEach(h=>{var v;return(v=this.capturedTransaction)==null?void 0:v.step(h)});return}const{state:t,transactions:e}=this.state.applyTransaction(n),r=!this.state.selection.eq(t.selection),o=e.includes(n),a=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:n,nextState:t}),!o)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:n,appendedTransactions:e.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:n});const s=e.findLast(h=>h.getMeta("focus")||h.getMeta("blur")),u=s==null?void 0:s.getMeta("focus"),c=s==null?void 0:s.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:s}),c&&this.emit("blur",{editor:this,event:c.event,transaction:s}),!(n.getMeta("preventUpdate")||!e.some(h=>h.docChanged)||a.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:n,appendedTransactions:e.slice(1)})}getAttributes(n){return m2(this.state,n)}isActive(n,t){const e=typeof n=="string"?n:null,r=typeof n=="string"?t:n;return GB(this.state,e,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return v1(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:t=`

`,textSerializers:e={}}=n||{};return HB(this.state.doc,{blockSeparator:t,textSerializers:{...g2(this.schema),...e}})}get isEmpty(){return Db(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var n,t;return(t=(n=this.editorView)==null?void 0:n.isDestroyed)!=null?t:!0}$node(n,t){var e;return((e=this.$doc)==null?void 0:e.querySelector(n,t))||null}$nodes(n,t){var e;return((e=this.$doc)==null?void 0:e.querySelectorAll(n,t))||null}$pos(n){const t=this.state.doc.resolve(n);return new kU(t,this)}get $doc(){return this.$pos(0)}};function Ih(i){return new Pb({find:i.find,handler:({state:n,range:t,match:e})=>{const r=Kn(i.getAttributes,void 0,e);if(r===!1||r===null)return null;const{tr:o}=n,a=e[e.length-1],s=e[0];if(a){const u=s.search(/\S/),c=t.from+s.indexOf(a),h=c+a.length;if(m1(t.from,t.to,n.doc).filter(y=>y.mark.type.excluded.find(C=>C===i.type&&C!==y.mark.type)).filter(y=>y.to>c).length)return null;h<t.to&&o.delete(h,t.to),c>t.from&&o.delete(t.from+u,c);const m=t.from+u+a.length;o.addMark(t.from+u,m,i.type.create(r||{})),o.removeStoredMark(i.type)}},undoable:i.undoable})}function R2(i){return new Pb({find:i.find,handler:({state:n,range:t,match:e})=>{const r=Kn(i.getAttributes,void 0,e)||{},{tr:o}=n,a=t.from;let s=t.to;const u=i.type.create(r);if(e[1]){const c=e[0].lastIndexOf(e[1]);let h=a+c;h>s?h=s:s=h+e[1].length;const v=e[0][e[0].length-1];o.insertText(v,a+e[0].length-1),o.replaceWith(h,s,u)}else if(e[0]){const c=i.type.isInline?a:a-1;o.insert(c,i.type.create(r)).delete(o.mapping.map(a),o.mapping.map(s))}o.scrollIntoView()},undoable:i.undoable})}function DS(i){return new Pb({find:i.find,handler:({state:n,range:t,match:e})=>{const r=n.doc.resolve(t.from),o=Kn(i.getAttributes,void 0,e)||{};if(!r.node(-1).canReplaceWith(r.index(-1),r.indexAfter(-1),i.type))return null;n.tr.delete(t.from,t.to).setBlockType(t.from,t.from,i.type,o)},undoable:i.undoable})}function Bh(i){return new Pb({find:i.find,handler:({state:n,range:t,match:e,chain:r})=>{const o=Kn(i.getAttributes,void 0,e)||{},a=n.tr.delete(t.from,t.to),u=a.doc.resolve(t.from).blockRange(),c=u&&G_(u,i.type,o);if(!c)return null;if(a.wrap(u,c),i.keepMarks&&i.editor){const{selection:v,storedMarks:m}=n,{splittableMarks:y}=i.editor.extensionManager,_=m||v.$to.parentOffset&&v.$from.marks();if(_){const C=_.filter(E=>y.includes(E.type.name));a.ensureMarks(C)}}if(i.keepAttributes){const v=i.type.name==="bulletList"||i.type.name==="orderedList"?"listItem":"taskList";r().updateAttributes(v,o).run()}const h=a.doc.resolve(t.from-1).nodeBefore;h&&h.type===i.type&&wc(a.doc,t.from-1)&&(!i.joinPredicate||i.joinPredicate(e,h))&&a.join(t.from-1)},undoable:i.undoable})}var NU=i=>"touches"in i,RU=class{constructor(i){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.handleMouseMove=a=>{if(!this.isResizing||!this.activeHandle)return;const s=a.clientX-this.startX,u=a.clientY-this.startY;this.handleResize(s,u)},this.handleTouchMove=a=>{if(!this.isResizing||!this.activeHandle)return;const s=a.touches[0];if(!s)return;const u=s.clientX-this.startX,c=s.clientY-this.startY;this.handleResize(u,c)},this.handleMouseUp=()=>{if(!this.isResizing)return;const a=this.element.offsetWidth,s=this.element.offsetHeight;this.onCommit(a,s),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!1)};var n,t,e,r,o;this.node=i.node,this.element=i.element,this.contentElement=i.contentElement,this.getPos=i.getPos,this.onResize=i.onResize,this.onCommit=i.onCommit,this.onUpdate=i.onUpdate,(n=i.options)!=null&&n.min&&(this.minSize={...this.minSize,...i.options.min}),(t=i.options)!=null&&t.max&&(this.maxSize=i.options.max),(e=i==null?void 0:i.options)!=null&&e.directions&&(this.directions=i.options.directions),(r=i.options)!=null&&r.preserveAspectRatio&&(this.preserveAspectRatio=i.options.preserveAspectRatio),(o=i.options)!=null&&o.className&&(this.classNames={container:i.options.className.container||"",wrapper:i.options.className.wrapper||"",handle:i.options.className.handle||"",resizing:i.options.className.resizing||""}),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles()}get dom(){return this.container}get contentDOM(){return this.contentElement}update(i,n,t){return i.type!==this.node.type?!1:(this.node=i,this.onUpdate?this.onUpdate(i,n,t):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.container.remove()}createContainer(){const i=document.createElement("div");return i.dataset.resizeContainer="",i.dataset.node=this.node.type.name,i.style.display="flex",i.style.justifyContent="flex-start",i.style.alignItems="flex-start",this.classNames.container&&(i.className=this.classNames.container),i.appendChild(this.wrapper),i}createWrapper(){const i=document.createElement("div");return i.style.position="relative",i.style.display="block",i.dataset.resizeWrapper="",this.classNames.wrapper&&(i.className=this.classNames.wrapper),i.appendChild(this.element),i}createHandle(i){const n=document.createElement("div");return n.dataset.resizeHandle=i,n.style.position="absolute",this.classNames.handle&&(n.className=this.classNames.handle),n}positionHandle(i,n){const t=n.includes("top"),e=n.includes("bottom"),r=n.includes("left"),o=n.includes("right");t&&(i.style.top="0"),e&&(i.style.bottom="0"),r&&(i.style.left="0"),o&&(i.style.right="0"),(n==="top"||n==="bottom")&&(i.style.left="0",i.style.right="0"),(n==="left"||n==="right")&&(i.style.top="0",i.style.bottom="0")}attachHandles(){this.directions.forEach(i=>{const n=this.createHandle(i);this.positionHandle(n,i),n.addEventListener("mousedown",t=>this.handleResizeStart(t,i)),n.addEventListener("touchstart",t=>this.handleResizeStart(t,i)),this.wrapper.appendChild(n)})}applyInitialSize(){const i=this.node.attrs.width,n=this.node.attrs.height;i?(this.element.style.width=`${i}px`,this.initialWidth=i):this.initialWidth=this.element.offsetWidth,n?(this.element.style.height=`${n}px`,this.initialHeight=n):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(i,n){i.preventDefault(),i.stopPropagation(),this.isResizing=!0,this.activeHandle=n,NU(i)?(this.startX=i.touches[0].clientX,this.startY=i.touches[0].clientY):(this.startX=i.clientX,this.startY=i.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(i,n){if(!this.activeHandle)return;const t=this.preserveAspectRatio||this.isShiftKeyPressed,{width:e,height:r}=this.calculateNewDimensions(this.activeHandle,i,n),o=this.applyConstraints(e,r,t);this.element.style.width=`${o.width}px`,this.element.style.height=`${o.height}px`,this.onResize&&this.onResize(o.width,o.height)}calculateNewDimensions(i,n,t){let e=this.startWidth,r=this.startHeight;const o=i.includes("right"),a=i.includes("left"),s=i.includes("bottom"),u=i.includes("top");return o?e=this.startWidth+n:a&&(e=this.startWidth-n),s?r=this.startHeight+t:u&&(r=this.startHeight-t),(i==="right"||i==="left")&&(e=this.startWidth+(o?n:-n)),(i==="top"||i==="bottom")&&(r=this.startHeight+(s?t:-t)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(e,r,i):{width:e,height:r}}applyConstraints(i,n,t){var e,r,o,a;if(!t){let c=Math.max(this.minSize.width,i),h=Math.max(this.minSize.height,n);return(e=this.maxSize)!=null&&e.width&&(c=Math.min(this.maxSize.width,c)),(r=this.maxSize)!=null&&r.height&&(h=Math.min(this.maxSize.height,h)),{width:c,height:h}}let s=i,u=n;return s<this.minSize.width&&(s=this.minSize.width,u=s/this.aspectRatio),u<this.minSize.height&&(u=this.minSize.height,s=u*this.aspectRatio),(o=this.maxSize)!=null&&o.width&&s>this.maxSize.width&&(s=this.maxSize.width,u=s/this.aspectRatio),(a=this.maxSize)!=null&&a.height&&u>this.maxSize.height&&(u=this.maxSize.height,s=u*this.aspectRatio),{width:s,height:u}}applyAspectRatio(i,n,t){const e=t==="left"||t==="right",r=t==="top"||t==="bottom";return e?{width:i,height:i/this.aspectRatio}:r?{width:n*this.aspectRatio,height:n}:{width:i,height:i/this.aspectRatio}}};function LU(i,n){const{selection:t}=i,{$from:e}=t;if(t instanceof Ge){const o=e.index();return e.parent.canReplaceWith(o,o+1,n)}let r=e.depth;for(;r>=0;){const o=e.index(r);if(e.node(r).contentMatchAt(o).matchType(n))return!0;r-=1}return!1}var jU={};c1(jU,{createAtomBlockMarkdownSpec:()=>IU,createBlockMarkdownSpec:()=>BU,createInlineMarkdownSpec:()=>FU,parseAttributes:()=>b1,parseIndentedBlocks:()=>PS,renderNestedMarkdownContent:()=>x1,serializeAttributes:()=>w1});function b1(i){if(!(i!=null&&i.trim()))return{};const n={},t=[],e=i.replace(/["']([^"']*)["']/g,c=>(t.push(c),`__QUOTED_${t.length-1}__`)),r=e.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(r){const c=r.map(h=>h.trim().slice(1));n.class=c.join(" ")}const o=e.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(n.id=o[1]);const a=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(e.matchAll(a)).forEach(([,c,h])=>{var v;const m=parseInt(((v=h.match(/__QUOTED_(\d+)__/))==null?void 0:v[1])||"0",10),y=t[m];y&&(n[c]=y.slice(1,-1))});const u=e.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return u&&u.split(/\s+/).filter(Boolean).forEach(h=>{h.match(/^[a-zA-Z][\w-]*$/)&&(n[h]=!0)}),n}function w1(i){if(!i||Object.keys(i).length===0)return"";const n=[];return i.class&&String(i.class).split(/\s+/).filter(Boolean).forEach(e=>n.push(`.${e}`)),i.id&&n.push(`#${i.id}`),Object.entries(i).forEach(([t,e])=>{t==="class"||t==="id"||(e===!0?n.push(t):e!==!1&&e!=null&&n.push(`${t}="${String(e)}"`))}),n.join(" ")}function IU(i){const{nodeName:n,name:t,parseAttributes:e=b1,serializeAttributes:r=w1,defaultAttributes:o={},requiredAttributes:a=[],allowedAttributes:s}=i,u=t||n,c=h=>{if(!s)return h;const v={};return s.forEach(m=>{m in h&&(v[m]=h[m])}),v};return{parseMarkdown:(h,v)=>{const m={...o,...h.attributes};return v.createNode(n,m,[])},markdownTokenizer:{name:n,level:"block",start(h){var v;const m=new RegExp(`^:::${u}(?:\\s|$)`,"m"),y=(v=h.match(m))==null?void 0:v.index;return y!==void 0?y:-1},tokenize(h,v,m){const y=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),_=h.match(y);if(!_)return;const C=_[1]||"",E=e(C);if(!a.find(F=>!(F in E)))return{type:n,raw:_[0],attributes:E}}},renderMarkdown:h=>{const v=c(h.attrs||{}),m=r(v),y=m?` {${m}}`:"";return`:::${u}${y} :::`}}}function BU(i){const{nodeName:n,name:t,getContent:e,parseAttributes:r=b1,serializeAttributes:o=w1,defaultAttributes:a={},content:s="block",allowedAttributes:u}=i,c=t||n,h=v=>{if(!u)return v;const m={};return u.forEach(y=>{y in v&&(m[y]=v[y])}),m};return{parseMarkdown:(v,m)=>{let y;if(e){const C=e(v);y=typeof C=="string"?[{type:"text",text:C}]:C}else s==="block"?y=m.parseChildren(v.tokens||[]):y=m.parseInline(v.tokens||[]);const _={...a,...v.attributes};return m.createNode(n,_,y)},markdownTokenizer:{name:n,level:"block",start(v){var m;const y=new RegExp(`^:::${c}`,"m"),_=(m=v.match(y))==null?void 0:m.index;return _!==void 0?_:-1},tokenize(v,m,y){var _;const C=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),E=v.match(C);if(!E)return;const[D,F=""]=E,V=r(F);let K=1;const Z=D.length;let ct="";const ht=/^:::([\w-]*)(\s.*)?/gm,st=v.slice(Z);for(ht.lastIndex=0;;){const et=ht.exec(st);if(et===null)break;const nt=et.index,it=et[1];if(!((_=et[2])!=null&&_.endsWith(":::"))){if(it)K+=1;else if(K-=1,K===0){const $=st.slice(0,nt);ct=$.trim();const ft=v.slice(0,Z+nt+et[0].length);let lt=[];if(ct)if(s==="block")for(lt=y.blockTokens($),lt.forEach(St=>{St.text&&(!St.tokens||St.tokens.length===0)&&(St.tokens=y.inlineTokens(St.text))});lt.length>0;){const St=lt[lt.length-1];if(St.type==="paragraph"&&(!St.text||St.text.trim()===""))lt.pop();else break}else lt=y.inlineTokens(ct);return{type:n,raw:ft,attributes:V,content:ct,tokens:lt}}}}}},renderMarkdown:(v,m)=>{const y=h(v.attrs||{}),_=o(y),C=_?` {${_}}`:"",E=m.renderChildren(v.content||[],`

`);return`:::${c}${C}

${E}

:::`}}}function UU(i){if(!i.trim())return{};const n={},t=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let e=t.exec(i);for(;e!==null;){const[,r,o,a]=e;n[r]=o||a,e=t.exec(i)}return n}function VU(i){return Object.entries(i).filter(([,n])=>n!=null).map(([n,t])=>`${n}="${t}"`).join(" ")}function FU(i){const{nodeName:n,name:t,getContent:e,parseAttributes:r=UU,serializeAttributes:o=VU,defaultAttributes:a={},selfClosing:s=!1,allowedAttributes:u}=i,c=t||n,h=m=>{if(!u)return m;const y={};return u.forEach(_=>{_ in m&&(y[_]=m[_])}),y},v=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(m,y)=>{const _={...a,...m.attributes};if(s)return y.createNode(n,_);const C=e?e(m):m.content||"";return C?y.createNode(n,_,[y.createTextNode(C)]):y.createNode(n,_,[])},markdownTokenizer:{name:n,level:"inline",start(m){const y=s?new RegExp(`\\[${v}\\s*[^\\]]*\\]`):new RegExp(`\\[${v}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${v}\\]`),_=m.match(y),C=_==null?void 0:_.index;return C!==void 0?C:-1},tokenize(m,y,_){const C=s?new RegExp(`^\\[${v}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${v}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${v}\\]`),E=m.match(C);if(!E)return;let D="",F="";if(s){const[,K]=E;F=K}else{const[,K,Z]=E;F=K,D=Z||""}const V=r(F.trim());return{type:n,raw:E[0],content:D.trim(),attributes:V}}},renderMarkdown:m=>{let y="";e?y=e(m):m.content&&m.content.length>0&&(y=m.content.filter(D=>D.type==="text").map(D=>D.text).join(""));const _=h(m.attrs||{}),C=o(_),E=C?` ${C}`:"";return s?`[${c}${E}]`:`[${c}${E}]${y}[/${c}]`}}}function PS(i,n,t){var e,r,o,a;const s=i.split(`
`),u=[];let c="",h=0;const v=n.baseIndentSize||2;for(;h<s.length;){const m=s[h],y=m.match(n.itemPattern);if(!y){if(u.length>0)break;if(m.trim()===""){h+=1,c=`${c}${m}
`;continue}else return}const _=n.extractItemData(y),{indentLevel:C,mainContent:E}=_;c=`${c}${m}
`;const D=[E];for(h+=1;h<s.length;){const Z=s[h];if(Z.trim()===""){const ht=s.slice(h+1).findIndex(nt=>nt.trim()!=="");if(ht===-1)break;if((((r=(e=s[h+1+ht].match(/^(\s*)/))==null?void 0:e[1])==null?void 0:r.length)||0)>C){D.push(Z),c=`${c}${Z}
`,h+=1;continue}else break}if((((a=(o=Z.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:a.length)||0)>C)D.push(Z),c=`${c}${Z}
`,h+=1;else break}let F;const V=D.slice(1);if(V.length>0){const Z=V.map(ct=>ct.slice(C+v)).join(`
`);Z.trim()&&(n.customNestedParser?F=n.customNestedParser(Z):F=t.blockTokens(Z))}const K=n.createToken(_,F);u.push(K)}if(u.length!==0)return{items:u,raw:c}}function x1(i,n,t,e){if(!i||!Array.isArray(i.content))return"";const r=typeof t=="function"?t(e):t,[o,...a]=i.content,s=n.renderChildren([o]),u=[`${r}${s}`];return a&&a.length>0&&a.forEach(c=>{const h=n.renderChildren([c]);if(h){const v=h.split(`
`).map(m=>m?n.indent(m):"").join(`
`);u.push(v)}}),u.join(`
`)}function HU(i,n,t={}){const{state:e}=n,{doc:r,tr:o}=e,a=i;r.descendants((s,u)=>{const c=o.mapping.map(u),h=o.mapping.map(u)+s.nodeSize;let v=null;if(s.marks.forEach(y=>{if(y!==a)return!1;v=y}),!v)return;let m=!1;if(Object.keys(t).forEach(y=>{t[y]!==v.attrs[y]&&(m=!0)}),m){const y=i.type.create({...i.attrs,...t});o.removeMark(c,h,i.type),o.addMark(c,h,y)}}),o.docChanged&&n.view.dispatch(o)}var fa=class L2 extends y1{constructor(){super(...arguments),this.type="node"}static create(n={}){const t=typeof n=="function"?n():n;return new L2(t)}configure(n){return super.configure(n)}extend(n){const t=typeof n=="function"?n():n;return super.extend(t)}};function Uf(i){return new _U({find:i.find,handler:({state:n,range:t,match:e,pasteEvent:r})=>{const o=Kn(i.getAttributes,void 0,e,r);if(o===!1||o===null)return null;const{tr:a}=n,s=e[e.length-1],u=e[0];let c=t.to;if(s){const h=u.search(/\S/),v=t.from+u.indexOf(s),m=v+s.length;if(m1(t.from,t.to,n.doc).filter(_=>_.mark.type.excluded.find(E=>E===i.type&&E!==_.mark.type)).filter(_=>_.to>v).length)return null;m<t.to&&a.delete(m,t.to),v>t.from&&a.delete(t.from+h,v),c=t.from+h+s.length,a.addMark(t.from+h,c,i.type.create(o||{})),a.removeStoredMark(i.type)}}})}var rx,HE;function zU(){return HE||(HE=1,rx=function i(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){if(n.constructor!==t.constructor)return!1;var e,r,o;if(Array.isArray(n)){if(e=n.length,e!=t.length)return!1;for(r=e;r--!==0;)if(!i(n[r],t[r]))return!1;return!0}if(n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;for(r of n.entries())if(!t.has(r[0]))return!1;for(r of n.entries())if(!i(r[1],t.get(r[0])))return!1;return!0}if(n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;for(r of n.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(t)){if(e=n.length,e!=t.length)return!1;for(r=e;r--!==0;)if(n[r]!==t[r])return!1;return!0}if(n.constructor===RegExp)return n.source===t.source&&n.flags===t.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===t.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===t.toString();if(o=Object.keys(n),e=o.length,e!==Object.keys(t).length)return!1;for(r=e;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return!1;for(r=e;r--!==0;){var a=o[r];if(!(a==="_owner"&&n.$$typeof)&&!i(n[a],t[a]))return!1}return!0}return n!==n&&t!==t}),rx}var WU=zU();const qU=Wh(WU);var ix={exports:{}},ox={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE;function KU(){if(zE)return ox;zE=1;var i=wg(),n=kk();function t(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var e=typeof Object.is=="function"?Object.is:t,r=n.useSyncExternalStore,o=i.useRef,a=i.useEffect,s=i.useMemo,u=i.useDebugValue;return ox.useSyncExternalStoreWithSelector=function(c,h,v,m,y){var _=o(null);if(_.current===null){var C={hasValue:!1,value:null};_.current=C}else C=_.current;_=s(function(){function D(ct){if(!F){if(F=!0,V=ct,ct=m(ct),y!==void 0&&C.hasValue){var ht=C.value;if(y(ht,ct))return K=ht}return K=ct}if(ht=K,e(V,ct))return ht;var st=m(ct);return y!==void 0&&y(ht,st)?(V=ct,ht):(V=ct,K=st)}var F=!1,V,K,Z=v===void 0?null:v;return[function(){return D(h())},Z===null?void 0:function(){return D(Z())}]},[h,v,m,y]);var E=r(c,_[0],_[1]);return a(function(){C.hasValue=!0,C.value=E},[E]),u(E),E},ox}var WE;function $U(){return WE||(WE=1,ix.exports=KU()),ix.exports}var GU=$U(),YU=(...i)=>n=>{i.forEach(t=>{typeof t=="function"?t(n):t&&(t.current=n)})},XU=({contentComponent:i})=>{const n=Mk.useSyncExternalStore(i.subscribe,i.getSnapshot,i.getServerSnapshot);return j.jsx(j.Fragment,{children:Object.values(n)})};function JU(){const i=new Set;let n={};return{subscribe(t){return i.add(t),()=>{i.delete(t)}},getSnapshot(){return n},getServerSnapshot(){return n},setRenderer(t,e){n={...n,[t]:RL.createPortal(e.reactElement,e.element,t)},i.forEach(r=>r())},removeRenderer(t){const e={...n};delete e[t],n=e,i.forEach(r=>r())}}}var ZU=class extends gc.Component{constructor(i){var n;super(i),this.editorContentRef=gc.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((n=i.editor)!=null&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const i=this.props.editor;if(i&&!i.isDestroyed&&i.options.element){if(i.contentComponent)return;const n=this.editorContentRef.current;n.append(i.view.dom),i.setOptions({element:n}),i.contentComponent=JU(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=i.contentComponent.subscribe(()=>{this.setState(t=>t.hasContentComponentInitialized?t:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),i.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var i;const n=this.props.editor;if(n){this.initialized=!1,n.isDestroyed||n.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),n.contentComponent=null;try{if(!((i=n.view.dom)!=null&&i.firstChild))return;const t=document.createElement("div");t.append(n.view.dom),n.setOptions({element:t})}catch{}}}render(){const{editor:i,innerRef:n,...t}=this.props;return j.jsxs(j.Fragment,{children:[j.jsx("div",{ref:YU(n,this.editorContentRef),...t}),(i==null?void 0:i.contentComponent)&&j.jsx(XU,{contentComponent:i.contentComponent})]})}},QU=Nt.forwardRef((i,n)=>{const t=gc.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[i.editor]);return gc.createElement(ZU,{key:t,innerRef:n,...i})}),tV=gc.memo(QU),eV=typeof window<"u"?Nt.useLayoutEffect:Nt.useEffect,nV=class{constructor(i){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=i,this.lastSnapshot={editor:i,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(i){return this.subscribers.add(i),()=>{this.subscribers.delete(i)}}watch(i){if(this.editor=i,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(e=>e())},t=this.editor;return t.on("transaction",n),()=>{t.off("transaction",n)}}}};function rV(i){var n;const[t]=Nt.useState(()=>new nV(i.editor)),e=GU.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,i.selector,(n=i.equalityFn)!=null?n:qU);return eV(()=>t.watch(i.editor),[i.editor,t]),Nt.useDebugValue(e),e}var iV=!1,NS=typeof window>"u",oV=NS||!!(typeof window<"u"&&window.next),aV=class j2{constructor(n){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=n,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(n){this.editor=n,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?NS||oV?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const n={...this.options.current,onBeforeCreate:(...e)=>{var r,o;return(o=(r=this.options.current).onBeforeCreate)==null?void 0:o.call(r,...e)},onBlur:(...e)=>{var r,o;return(o=(r=this.options.current).onBlur)==null?void 0:o.call(r,...e)},onCreate:(...e)=>{var r,o;return(o=(r=this.options.current).onCreate)==null?void 0:o.call(r,...e)},onDestroy:(...e)=>{var r,o;return(o=(r=this.options.current).onDestroy)==null?void 0:o.call(r,...e)},onFocus:(...e)=>{var r,o;return(o=(r=this.options.current).onFocus)==null?void 0:o.call(r,...e)},onSelectionUpdate:(...e)=>{var r,o;return(o=(r=this.options.current).onSelectionUpdate)==null?void 0:o.call(r,...e)},onTransaction:(...e)=>{var r,o;return(o=(r=this.options.current).onTransaction)==null?void 0:o.call(r,...e)},onUpdate:(...e)=>{var r,o;return(o=(r=this.options.current).onUpdate)==null?void 0:o.call(r,...e)},onContentError:(...e)=>{var r,o;return(o=(r=this.options.current).onContentError)==null?void 0:o.call(r,...e)},onDrop:(...e)=>{var r,o;return(o=(r=this.options.current).onDrop)==null?void 0:o.call(r,...e)},onPaste:(...e)=>{var r,o;return(o=(r=this.options.current).onPaste)==null?void 0:o.call(r,...e)},onDelete:(...e)=>{var r,o;return(o=(r=this.options.current).onDelete)==null?void 0:o.call(r,...e)}};return new PU(n)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(n){return this.subscriptions.add(n),()=>{this.subscriptions.delete(n)}}static compareOptions(n,t){return Object.keys(n).every(e=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(e)?!0:e==="extensions"&&n.extensions&&t.extensions?n.extensions.length!==t.extensions.length?!1:n.extensions.every((r,o)=>{var a;return r===((a=t.extensions)==null?void 0:a[o])}):n[e]===t[e])}onRender(n){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&n.length===0?j2.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(n),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(n){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=n;return}if(this.previousDeps.length===n.length&&this.previousDeps.every((e,r)=>e===n[r]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=n}scheduleDestroy(){const n=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===n){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===n&&this.setEditor(null))},1)}};function sV(i={},n=[]){const t=Nt.useRef(i);t.current=i;const[e]=Nt.useState(()=>new aV(t)),r=Mk.useSyncExternalStore(e.subscribe,e.getEditor,e.getServerSnapshot);return Nt.useDebugValue(r),Nt.useEffect(e.onRender(n)),rV({editor:r,selector:({transactionNumber:o})=>i.shouldRerenderOnTransaction===!1||i.shouldRerenderOnTransaction===void 0?null:i.immediatelyRender&&o===0?0:o+1}),r}var lV=Nt.createContext({editor:null});lV.Consumer;var uV=Nt.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),cV=()=>Nt.useContext(uV);gc.forwardRef((i,n)=>{const{onDragStart:t}=cV(),e=i.as||"div";return j.jsx(e,{...i,ref:n,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...i.style}})});gc.createContext({markViewContentRef:()=>{}});var Ry=(i,n)=>{if(i==="slot")return 0;if(i instanceof Function)return i(n);const{children:t,...e}=n??{};if(i==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[i,e,t]},fV=/^\s*>\s$/,dV=fa.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:i}){return Ry("blockquote",{...Qr(this.options.HTMLAttributes,i),children:Ry("slot",{})})},parseMarkdown:(i,n)=>n.createNode("blockquote",void 0,n.parseChildren(i.tokens||[])),renderMarkdown:(i,n)=>{if(!i.content)return"";const t=">",e=[];return i.content.forEach(r=>{const s=n.renderChildren([r]).split(`
`).map(u=>u.trim()===""?t:`${t} ${u}`);e.push(s.join(`
`))}),e.join(`
${t}
`)},addCommands(){return{setBlockquote:()=>({commands:i})=>i.wrapIn(this.name),toggleBlockquote:()=>({commands:i})=>i.toggleWrap(this.name),unsetBlockquote:()=>({commands:i})=>i.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Bh({find:fV,type:this.type})]}}),hV=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,pV=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,vV=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,gV=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,mV=qf.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:i=>i.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:i=>i.type.name===this.name},{style:"font-weight",getAttrs:i=>/^(bold(er)?|[5-9]\d{2,})$/.test(i)&&null}]},renderHTML({HTMLAttributes:i}){return Ry("strong",{...Qr(this.options.HTMLAttributes,i),children:Ry("slot",{})})},markdownTokenName:"strong",parseMarkdown:(i,n)=>n.applyMark("bold",n.parseInline(i.tokens||[])),renderMarkdown:(i,n)=>`**${n.renderChildren(i)}**`,addCommands(){return{setBold:()=>({commands:i})=>i.setMark(this.name),toggleBold:()=>({commands:i})=>i.toggleMark(this.name),unsetBold:()=>({commands:i})=>i.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ih({find:hV,type:this.type}),Ih({find:vV,type:this.type})]},addPasteRules(){return[Uf({find:pV,type:this.type}),Uf({find:gV,type:this.type})]}}),yV=/(^|[^`])`([^`]+)`(?!`)$/,bV=/(^|[^`])`([^`]+)`(?!`)/g,wV=qf.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:i}){return["code",Qr(this.options.HTMLAttributes,i),0]},markdownTokenName:"codespan",parseMarkdown:(i,n)=>n.applyMark("code",[{type:"text",text:i.text||""}]),renderMarkdown:(i,n)=>i.content?`\`${n.renderChildren(i.content)}\``:"",addCommands(){return{setCode:()=>({commands:i})=>i.setMark(this.name),toggleCode:()=>({commands:i})=>i.toggleMark(this.name),unsetCode:()=>({commands:i})=>i.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ih({find:yV,type:this.type})]},addPasteRules(){return[Uf({find:bV,type:this.type})]}}),ax=4,xV=/^```([a-z]+)?[\s\n]$/,SV=/^~~~([a-z]+)?[\s\n]$/,_V=fa.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:ax,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:i=>{var n;const{languageClassPrefix:t}=this.options;if(!t)return null;const o=[...((n=i.firstElementChild)==null?void 0:n.classList)||[]].filter(a=>a.startsWith(t)).map(a=>a.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:i,HTMLAttributes:n}){return["pre",Qr(this.options.HTMLAttributes,n),["code",{class:i.attrs.language?this.options.languageClassPrefix+i.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(i,n)=>{var t;return((t=i.raw)==null?void 0:t.startsWith("```"))===!1&&i.codeBlockStyle!=="indented"?[]:n.createNode("codeBlock",{language:i.lang||null},i.text?[n.createTextNode(i.text)]:[])},renderMarkdown:(i,n)=>{var t;let e="";const r=((t=i.attrs)==null?void 0:t.language)||"";return i.content?e=[`\`\`\`${r}`,n.renderChildren(i.content),"```"].join(`
`):e=`\`\`\`${r}

\`\`\``,e},addCommands(){return{setCodeBlock:i=>({commands:n})=>n.setNode(this.name,i),toggleCodeBlock:i=>({commands:n})=>n.toggleNode(this.name,"paragraph",i)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:i,$anchor:n}=this.editor.state.selection,t=n.pos===1;return!i||n.parent.type.name!==this.name?!1:t||!n.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:i})=>{var n;if(!this.options.enableTabIndentation)return!1;const t=(n=this.options.tabSize)!=null?n:ax,{state:e}=i,{selection:r}=e,{$from:o,empty:a}=r;if(o.parent.type!==this.type)return!1;const s=" ".repeat(t);return a?i.commands.insertContent(s):i.commands.command(({tr:u})=>{const{from:c,to:h}=r,y=e.doc.textBetween(c,h,`
`,`
`).split(`
`).map(_=>s+_).join(`
`);return u.replaceWith(c,h,e.schema.text(y)),!0})},"Shift-Tab":({editor:i})=>{var n;if(!this.options.enableTabIndentation)return!1;const t=(n=this.options.tabSize)!=null?n:ax,{state:e}=i,{selection:r}=e,{$from:o,empty:a}=r;return o.parent.type!==this.type?!1:a?i.commands.command(({tr:s})=>{var u;const{pos:c}=o,h=o.start(),v=o.end(),y=e.doc.textBetween(h,v,`
`,`
`).split(`
`);let _=0,C=0;const E=c-h;for(let ct=0;ct<y.length;ct+=1){if(C+y[ct].length>=E){_=ct;break}C+=y[ct].length+1}const F=((u=y[_].match(/^ */))==null?void 0:u[0])||"",V=Math.min(F.length,t);if(V===0)return!0;let K=h;for(let ct=0;ct<_;ct+=1)K+=y[ct].length+1;return s.delete(K,K+V),c-K<=V&&s.setSelection(an.create(s.doc,K)),!0}):i.commands.command(({tr:s})=>{const{from:u,to:c}=r,m=e.doc.textBetween(u,c,`
`,`
`).split(`
`).map(y=>{var _;const C=((_=y.match(/^ */))==null?void 0:_[0])||"",E=Math.min(C.length,t);return y.slice(E)}).join(`
`);return s.replaceWith(u,c,e.schema.text(m)),!0})},Enter:({editor:i})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:n}=i,{selection:t}=n,{$from:e,empty:r}=t;if(!r||e.parent.type!==this.type)return!1;const o=e.parentOffset===e.parent.nodeSize-2,a=e.parent.textContent.endsWith(`

`);return!o||!a?!1:i.chain().command(({tr:s})=>(s.delete(e.pos-2,e.pos),!0)).exitCode().run()},ArrowDown:({editor:i})=>{if(!this.options.exitOnArrowDown)return!1;const{state:n}=i,{selection:t,doc:e}=n,{$from:r,empty:o}=t;if(!o||r.parent.type!==this.type||!(r.parentOffset===r.parent.nodeSize-2))return!1;const s=r.after();return s===void 0?!1:e.nodeAt(s)?i.commands.command(({tr:c})=>(c.setSelection(bn.near(e.resolve(s))),!0)):i.commands.exitCode()}}},addInputRules(){return[DS({find:xV,type:this.type,getAttributes:i=>({language:i[1]})}),DS({find:SV,type:this.type,getAttributes:i=>({language:i[1]})})]},addProseMirrorPlugins(){return[new Rr({key:new Si("codeBlockVSCodeHandler"),props:{handlePaste:(i,n)=>{if(!n.clipboardData||this.editor.isActive(this.type.name))return!1;const t=n.clipboardData.getData("text/plain"),e=n.clipboardData.getData("vscode-editor-data"),r=e?JSON.parse(e):void 0,o=r==null?void 0:r.mode;if(!t||!o)return!1;const{tr:a,schema:s}=i.state,u=s.text(t.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:o},u)),a.selection.$from.parent.type!==this.type&&a.setSelection(an.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),i.dispatch(a),!0}}})]}}),CV=fa.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(i,n)=>i.content?n.renderChildren(i.content,`

`):""}),TV=fa.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:i}){return["br",Qr(this.options.HTMLAttributes,i)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:i,chain:n,state:t,editor:e})=>i.first([()=>i.exitCode(),()=>i.command(()=>{const{selection:r,storedMarks:o}=t;if(r.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:s}=e.extensionManager,u=o||r.$to.parentOffset&&r.$from.marks();return n().insertContent({type:this.name}).command(({tr:c,dispatch:h})=>{if(h&&u&&a){const v=u.filter(m=>s.includes(m.type.name));c.ensureMarks(v)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),EV=fa.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(i=>({tag:`h${i}`,attrs:{level:i}}))},renderHTML({node:i,HTMLAttributes:n}){return[`h${this.options.levels.includes(i.attrs.level)?i.attrs.level:this.options.levels[0]}`,Qr(this.options.HTMLAttributes,n),0]},parseMarkdown:(i,n)=>n.createNode("heading",{level:i.depth||1},n.parseInline(i.tokens||[])),renderMarkdown:(i,n)=>{var t;const e=(t=i.attrs)!=null&&t.level?parseInt(i.attrs.level,10):1,r="#".repeat(e);return i.content?`${r} ${n.renderChildren(i.content)}`:""},addCommands(){return{setHeading:i=>({commands:n})=>this.options.levels.includes(i.level)?n.setNode(this.name,i):!1,toggleHeading:i=>({commands:n})=>this.options.levels.includes(i.level)?n.toggleNode(this.name,"paragraph",i):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((i,n)=>({...i,[`Mod-Alt-${n}`]:()=>this.editor.commands.toggleHeading({level:n})}),{})},addInputRules(){return this.options.levels.map(i=>DS({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${i}})\\s$`),type:this.type,getAttributes:{level:i}}))}}),OV=fa.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:i}){return["hr",Qr(this.options.HTMLAttributes,i)]},markdownTokenName:"hr",parseMarkdown:(i,n)=>n.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:i,state:n})=>{if(!LU(n,n.schema.nodes[this.name]))return!1;const{selection:t}=n,{$to:e}=t,r=i();return b2(t)?r.insertContentAt(e.pos,{type:this.name}):r.insertContent({type:this.name}),r.command(({state:o,tr:a,dispatch:s})=>{if(s){const{$to:u}=a.selection,c=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?a.setSelection(an.create(a.doc,u.pos+1)):u.nodeAfter.isBlock?a.setSelection(Ge.create(a.doc,u.pos)):a.setSelection(an.create(a.doc,u.pos));else{const h=o.schema.nodes[this.options.nextNodeType]||u.parent.type.contentMatch.defaultType,v=h==null?void 0:h.create();v&&(a.insert(c,v),a.setSelection(an.create(a.doc,c+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[R2({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),AV=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,kV=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,MV=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,DV=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,PV=qf.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:i=>i.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:i=>i.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:i}){return["em",Qr(this.options.HTMLAttributes,i),0]},addCommands(){return{setItalic:()=>({commands:i})=>i.setMark(this.name),toggleItalic:()=>({commands:i})=>i.toggleMark(this.name),unsetItalic:()=>({commands:i})=>i.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(i,n)=>n.applyMark("italic",n.parseInline(i.tokens||[])),renderMarkdown:(i,n)=>`*${n.renderChildren(i)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ih({find:AV,type:this.type}),Ih({find:MV,type:this.type})]},addPasteRules(){return[Uf({find:kV,type:this.type}),Uf({find:DV,type:this.type})]}});const NV="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",RV="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",RS="numeric",LS="ascii",jS="alpha",jv="asciinumeric",Tv="alphanumeric",IS="domain",I2="emoji",LV="scheme",jV="slashscheme",sx="whitespace";function IV(i,n){return i in n||(n[i]=[]),n[i]}function Tf(i,n,t){n[RS]&&(n[jv]=!0,n[Tv]=!0),n[LS]&&(n[jv]=!0,n[jS]=!0),n[jv]&&(n[Tv]=!0),n[jS]&&(n[Tv]=!0),n[Tv]&&(n[IS]=!0),n[I2]&&(n[IS]=!0);for(const e in n){const r=IV(e,t);r.indexOf(i)<0&&r.push(i)}}function BV(i,n){const t={};for(const e in n)n[e].indexOf(i)>=0&&(t[e]=!0);return t}function aa(i=null){this.j={},this.jr=[],this.jd=null,this.t=i}aa.groups={};aa.prototype={accepts(){return!!this.t},go(i){const n=this,t=n.j[i];if(t)return t;for(let e=0;e<n.jr.length;e++){const r=n.jr[e][0],o=n.jr[e][1];if(o&&r.test(i))return o}return n.jd},has(i,n=!1){return n?i in this.j:!!this.go(i)},ta(i,n,t,e){for(let r=0;r<i.length;r++)this.tt(i[r],n,t,e)},tr(i,n,t,e){e=e||aa.groups;let r;return n&&n.j?r=n:(r=new aa(n),t&&e&&Tf(n,t,e)),this.jr.push([i,r]),r},ts(i,n,t,e){let r=this;const o=i.length;if(!o)return r;for(let a=0;a<o-1;a++)r=r.tt(i[a]);return r.tt(i[o-1],n,t,e)},tt(i,n,t,e){e=e||aa.groups;const r=this;if(n&&n.j)return r.j[i]=n,n;const o=n;let a,s=r.go(i);if(s?(a=new aa,Object.assign(a.j,s.j),a.jr.push.apply(a.jr,s.jr),a.jd=s.jd,a.t=s.t):a=new aa,o){if(e)if(a.t&&typeof a.t=="string"){const u=Object.assign(BV(a.t,e),t);Tf(o,u,e)}else t&&Tf(o,t,e);a.t=o}return r.j[i]=a,a}};const yn=(i,n,t,e,r)=>i.ta(n,t,e,r),Hr=(i,n,t,e,r)=>i.tr(n,t,e,r),qE=(i,n,t,e,r)=>i.ts(n,t,e,r),Se=(i,n,t,e,r)=>i.tt(n,t,e,r),Kl="WORD",BS="UWORD",B2="ASCIINUMERICAL",U2="ALPHANUMERICAL",lg="LOCALHOST",US="TLD",VS="UTLD",cy="SCHEME",ah="SLASH_SCHEME",S1="NUM",FS="WS",_1="NL",Iv="OPENBRACE",Bv="CLOSEBRACE",Ly="OPENBRACKET",jy="CLOSEBRACKET",Iy="OPENPAREN",By="CLOSEPAREN",Uy="OPENANGLEBRACKET",Vy="CLOSEANGLEBRACKET",Fy="FULLWIDTHLEFTPAREN",Hy="FULLWIDTHRIGHTPAREN",zy="LEFTCORNERBRACKET",Wy="RIGHTCORNERBRACKET",qy="LEFTWHITECORNERBRACKET",Ky="RIGHTWHITECORNERBRACKET",$y="FULLWIDTHLESSTHAN",Gy="FULLWIDTHGREATERTHAN",Yy="AMPERSAND",Xy="APOSTROPHE",Jy="ASTERISK",Qu="AT",Zy="BACKSLASH",Qy="BACKTICK",t0="CARET",oc="COLON",C1="COMMA",e0="DOLLAR",dl="DOT",n0="EQUALS",T1="EXCLAMATION",Xa="HYPHEN",Uv="PERCENT",r0="PIPE",i0="PLUS",o0="POUND",Vv="QUERY",E1="QUOTE",V2="FULLWIDTHMIDDLEDOT",O1="SEMI",hl="SLASH",Fv="TILDE",a0="UNDERSCORE",F2="EMOJI",s0="SYM";var H2=Object.freeze({__proto__:null,ALPHANUMERICAL:U2,AMPERSAND:Yy,APOSTROPHE:Xy,ASCIINUMERICAL:B2,ASTERISK:Jy,AT:Qu,BACKSLASH:Zy,BACKTICK:Qy,CARET:t0,CLOSEANGLEBRACKET:Vy,CLOSEBRACE:Bv,CLOSEBRACKET:jy,CLOSEPAREN:By,COLON:oc,COMMA:C1,DOLLAR:e0,DOT:dl,EMOJI:F2,EQUALS:n0,EXCLAMATION:T1,FULLWIDTHGREATERTHAN:Gy,FULLWIDTHLEFTPAREN:Fy,FULLWIDTHLESSTHAN:$y,FULLWIDTHMIDDLEDOT:V2,FULLWIDTHRIGHTPAREN:Hy,HYPHEN:Xa,LEFTCORNERBRACKET:zy,LEFTWHITECORNERBRACKET:qy,LOCALHOST:lg,NL:_1,NUM:S1,OPENANGLEBRACKET:Uy,OPENBRACE:Iv,OPENBRACKET:Ly,OPENPAREN:Iy,PERCENT:Uv,PIPE:r0,PLUS:i0,POUND:o0,QUERY:Vv,QUOTE:E1,RIGHTCORNERBRACKET:Wy,RIGHTWHITECORNERBRACKET:Ky,SCHEME:cy,SEMI:O1,SLASH:hl,SLASH_SCHEME:ah,SYM:s0,TILDE:Fv,TLD:US,UNDERSCORE:a0,UTLD:VS,UWORD:BS,WORD:Kl,WS:FS});const Wl=/[a-z]/,lv=new RegExp("\\p{L}","u"),lx=new RegExp("\\p{Emoji}","u"),ql=/\d/,ux=/\s/,KE="\r",cx=`
`,UV="",VV="",fx="";let Fm=null,Hm=null;function FV(i=[]){const n={};aa.groups=n;const t=new aa;Fm==null&&(Fm=$E(NV)),Hm==null&&(Hm=$E(RV)),Se(t,"'",Xy),Se(t,"{",Iv),Se(t,"}",Bv),Se(t,"[",Ly),Se(t,"]",jy),Se(t,"(",Iy),Se(t,")",By),Se(t,"<",Uy),Se(t,">",Vy),Se(t,"",Fy),Se(t,"",Hy),Se(t,"",zy),Se(t,"",Wy),Se(t,"",qy),Se(t,"",Ky),Se(t,"",$y),Se(t,"",Gy),Se(t,"&",Yy),Se(t,"*",Jy),Se(t,"@",Qu),Se(t,"`",Qy),Se(t,"^",t0),Se(t,":",oc),Se(t,",",C1),Se(t,"$",e0),Se(t,".",dl),Se(t,"=",n0),Se(t,"!",T1),Se(t,"-",Xa),Se(t,"%",Uv),Se(t,"|",r0),Se(t,"+",i0),Se(t,"#",o0),Se(t,"?",Vv),Se(t,'"',E1),Se(t,"/",hl),Se(t,";",O1),Se(t,"~",Fv),Se(t,"_",a0),Se(t,"\\",Zy),Se(t,"",V2);const e=Hr(t,ql,S1,{[RS]:!0});Hr(e,ql,e);const r=Hr(e,Wl,B2,{[jv]:!0}),o=Hr(e,lv,U2,{[Tv]:!0}),a=Hr(t,Wl,Kl,{[LS]:!0});Hr(a,ql,r),Hr(a,Wl,a),Hr(r,ql,r),Hr(r,Wl,r);const s=Hr(t,lv,BS,{[jS]:!0});Hr(s,Wl),Hr(s,ql,o),Hr(s,lv,s),Hr(o,ql,o),Hr(o,Wl),Hr(o,lv,o);const u=Se(t,cx,_1,{[sx]:!0}),c=Se(t,KE,FS,{[sx]:!0}),h=Hr(t,ux,FS,{[sx]:!0});Se(t,fx,h),Se(c,cx,u),Se(c,fx,h),Hr(c,ux,h),Se(h,KE),Se(h,cx),Hr(h,ux,h),Se(h,fx,h);const v=Hr(t,lx,F2,{[I2]:!0});Se(v,"#"),Hr(v,lx,v),Se(v,UV,v);const m=Se(v,VV);Se(m,"#"),Hr(m,lx,v);const y=[[Wl,a],[ql,r]],_=[[Wl,null],[lv,s],[ql,o]];for(let C=0;C<Fm.length;C++)Gu(t,Fm[C],US,Kl,y);for(let C=0;C<Hm.length;C++)Gu(t,Hm[C],VS,BS,_);Tf(US,{tld:!0,ascii:!0},n),Tf(VS,{utld:!0,alpha:!0},n),Gu(t,"file",cy,Kl,y),Gu(t,"mailto",cy,Kl,y),Gu(t,"http",ah,Kl,y),Gu(t,"https",ah,Kl,y),Gu(t,"ftp",ah,Kl,y),Gu(t,"ftps",ah,Kl,y),Tf(cy,{scheme:!0,ascii:!0},n),Tf(ah,{slashscheme:!0,ascii:!0},n),i=i.sort((C,E)=>C[0]>E[0]?1:-1);for(let C=0;C<i.length;C++){const E=i[C][0],F=i[C][1]?{[LV]:!0}:{[jV]:!0};E.indexOf("-")>=0?F[IS]=!0:Wl.test(E)?ql.test(E)?F[jv]=!0:F[LS]=!0:F[RS]=!0,qE(t,E,E,F)}return qE(t,"localhost",lg,{ascii:!0}),t.jd=new aa(s0),{start:t,tokens:Object.assign({groups:n},H2)}}function z2(i,n){const t=HV(n.replace(/[A-Z]/g,s=>s.toLowerCase())),e=t.length,r=[];let o=0,a=0;for(;a<e;){let s=i,u=null,c=0,h=null,v=-1,m=-1;for(;a<e&&(u=s.go(t[a]));)s=u,s.accepts()?(v=0,m=0,h=s):v>=0&&(v+=t[a].length,m++),c+=t[a].length,o+=t[a].length,a++;o-=v,a-=m,c-=v,r.push({t:h.t,v:n.slice(o-c,o),s:o-c,e:o})}return r}function HV(i){const n=[],t=i.length;let e=0;for(;e<t;){let r=i.charCodeAt(e),o,a=r<55296||r>56319||e+1===t||(o=i.charCodeAt(e+1))<56320||o>57343?i[e]:i.slice(e,e+2);n.push(a),e+=a.length}return n}function Gu(i,n,t,e,r){let o;const a=n.length;for(let s=0;s<a-1;s++){const u=n[s];i.j[u]?o=i.j[u]:(o=new aa(e),o.jr=r.slice(),i.j[u]=o),i=o}return o=new aa(t),o.jr=r.slice(),i.j[n[a-1]]=o,o}function $E(i){const n=[],t=[];let e=0,r="0123456789";for(;e<i.length;){let o=0;for(;r.indexOf(i[e+o])>=0;)o++;if(o>0){n.push(t.join(""));for(let a=parseInt(i.substring(e,e+o),10);a>0;a--)t.pop();e+=o}else t.push(i[e]),e++}return n}const ug={defaultProtocol:"http",events:null,format:GE,formatHref:GE,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function A1(i,n=null){let t=Object.assign({},ug);i&&(t=Object.assign(t,i instanceof A1?i.o:i));const e=t.ignoreTags,r=[];for(let o=0;o<e.length;o++)r.push(e[o].toUpperCase());this.o=t,n&&(this.defaultRender=n),this.ignoreTags=r}A1.prototype={o:ug,ignoreTags:[],defaultRender(i){return i},check(i){return this.get("validate",i.toString(),i)},get(i,n,t){const e=n!=null;let r=this.o[i];return r&&(typeof r=="object"?(r=t.t in r?r[t.t]:ug[i],typeof r=="function"&&e&&(r=r(n,t))):typeof r=="function"&&e&&(r=r(n,t.t,t)),r)},getObj(i,n,t){let e=this.o[i];return typeof e=="function"&&n!=null&&(e=e(n,t.t,t)),e},render(i){const n=i.render(this);return(this.get("render",null,i)||this.defaultRender)(n,i.t,i)}};function GE(i){return i}function W2(i,n){this.t="token",this.v=i,this.tk=n}W2.prototype={isLink:!1,toString(){return this.v},toHref(i){return this.toString()},toFormattedString(i){const n=this.toString(),t=i.get("truncate",n,this),e=i.get("format",n,this);return t&&e.length>t?e.substring(0,t)+"":e},toFormattedHref(i){return i.get("formatHref",this.toHref(i.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(i=ug.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(i),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(i){return{type:this.t,value:this.toFormattedString(i),isLink:this.isLink,href:this.toFormattedHref(i),start:this.startIndex(),end:this.endIndex()}},validate(i){return i.get("validate",this.toString(),this)},render(i){const n=this,t=this.toHref(i.get("defaultProtocol")),e=i.get("formatHref",t,this),r=i.get("tagName",t,n),o=this.toFormattedString(i),a={},s=i.get("className",t,n),u=i.get("target",t,n),c=i.get("rel",t,n),h=i.getObj("attributes",t,n),v=i.getObj("events",t,n);return a.href=e,s&&(a.class=s),u&&(a.target=u),c&&(a.rel=c),h&&Object.assign(a,h),{tagName:r,attributes:a,content:o,eventListeners:v}}};function Rb(i,n){class t extends W2{constructor(r,o){super(r,o),this.t=i}}for(const e in n)t.prototype[e]=n[e];return t.t=i,t}const YE=Rb("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),XE=Rb("text"),zV=Rb("nl"),zm=Rb("url",{isLink:!0,toHref(i=ug.defaultProtocol){return this.hasProtocol()?this.v:`${i}://${this.v}`},hasProtocol(){const i=this.tk;return i.length>=2&&i[0].t!==lg&&i[1].t===oc}}),Ya=i=>new aa(i);function WV({groups:i}){const n=i.domain.concat([Yy,Jy,Qu,Zy,Qy,t0,e0,n0,Xa,S1,Uv,r0,i0,o0,hl,s0,Fv,a0]),t=[Xy,oc,C1,dl,T1,Uv,Vv,E1,O1,Uy,Vy,Iv,Bv,jy,Ly,Iy,By,Fy,Hy,zy,Wy,qy,Ky,$y,Gy],e=[Yy,Xy,Jy,Zy,Qy,t0,e0,n0,Xa,Iv,Bv,Uv,r0,i0,o0,Vv,hl,s0,Fv,a0],r=Ya(),o=Se(r,Fv);yn(o,e,o),yn(o,i.domain,o);const a=Ya(),s=Ya(),u=Ya();yn(r,i.domain,a),yn(r,i.scheme,s),yn(r,i.slashscheme,u),yn(a,e,o),yn(a,i.domain,a);const c=Se(a,Qu);Se(o,Qu,c),Se(s,Qu,c),Se(u,Qu,c);const h=Se(o,dl);yn(h,e,o),yn(h,i.domain,o);const v=Ya();yn(c,i.domain,v),yn(v,i.domain,v);const m=Se(v,dl);yn(m,i.domain,v);const y=Ya(YE);yn(m,i.tld,y),yn(m,i.utld,y),Se(c,lg,y);const _=Se(v,Xa);Se(_,Xa,_),yn(_,i.domain,v),yn(y,i.domain,v),Se(y,dl,m),Se(y,Xa,_);const C=Se(y,oc);yn(C,i.numeric,YE);const E=Se(a,Xa),D=Se(a,dl);Se(E,Xa,E),yn(E,i.domain,a),yn(D,e,o),yn(D,i.domain,a);const F=Ya(zm);yn(D,i.tld,F),yn(D,i.utld,F),yn(F,i.domain,a),yn(F,e,o),Se(F,dl,D),Se(F,Xa,E),Se(F,Qu,c);const V=Se(F,oc),K=Ya(zm);yn(V,i.numeric,K);const Z=Ya(zm),ct=Ya();yn(Z,n,Z),yn(Z,t,ct),yn(ct,n,Z),yn(ct,t,ct),Se(F,hl,Z),Se(K,hl,Z);const ht=Se(s,oc),st=Se(u,oc),et=Se(st,hl),nt=Se(et,hl);yn(s,i.domain,a),Se(s,dl,D),Se(s,Xa,E),yn(u,i.domain,a),Se(u,dl,D),Se(u,Xa,E),yn(ht,i.domain,Z),Se(ht,hl,Z),Se(ht,Vv,Z),yn(nt,i.domain,Z),yn(nt,n,Z),Se(nt,hl,Z);const it=[[Iv,Bv],[Ly,jy],[Iy,By],[Uy,Vy],[Fy,Hy],[zy,Wy],[qy,Ky],[$y,Gy]];for(let $=0;$<it.length;$++){const[ft,lt]=it[$],St=Se(Z,ft);Se(ct,ft,St),Se(St,lt,Z);const U=Ya(zm);yn(St,n,U);const _t=Ya();yn(St,t),yn(U,n,U),yn(U,t,_t),yn(_t,n,U),yn(_t,t,_t),Se(U,lt,Z),Se(_t,lt,Z)}return Se(r,lg,F),Se(r,_1,zV),{start:r,tokens:H2}}function qV(i,n,t){let e=t.length,r=0,o=[],a=[];for(;r<e;){let s=i,u=null,c=null,h=0,v=null,m=-1;for(;r<e&&!(u=s.go(t[r].t));)a.push(t[r++]);for(;r<e&&(c=u||s.go(t[r].t));)u=null,s=c,s.accepts()?(m=0,v=s):m>=0&&m++,r++,h++;if(m<0)r-=h,r<e&&(a.push(t[r]),r++);else{a.length>0&&(o.push(dx(XE,n,a)),a=[]),r-=m,h-=m;const y=v.t,_=t.slice(r-h,r);o.push(dx(y,n,_))}}return a.length>0&&o.push(dx(XE,n,a)),o}function dx(i,n,t){const e=t[0].s,r=t[t.length-1].e,o=n.slice(e,r);return new i(o,t)}const KV=typeof console<"u"&&console&&console.warn||(()=>{}),$V="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",mr={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function GV(){return aa.groups={},mr.scanner=null,mr.parser=null,mr.tokenQueue=[],mr.pluginQueue=[],mr.customSchemes=[],mr.initialized=!1,mr}function JE(i,n=!1){if(mr.initialized&&KV(`linkifyjs: already initialized - will not register custom scheme "${i}" ${$V}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(i))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);mr.customSchemes.push([i,n])}function YV(){mr.scanner=FV(mr.customSchemes);for(let i=0;i<mr.tokenQueue.length;i++)mr.tokenQueue[i][1]({scanner:mr.scanner});mr.parser=WV(mr.scanner.tokens);for(let i=0;i<mr.pluginQueue.length;i++)mr.pluginQueue[i][1]({scanner:mr.scanner,parser:mr.parser});return mr.initialized=!0,mr}function k1(i){return mr.initialized||YV(),qV(mr.parser.start,i,z2(mr.scanner.start,i))}k1.scan=z2;function q2(i,n=null,t=null){if(n&&typeof n=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${n}; must be a string`);t=n,n=null}const e=new A1(t),r=k1(i),o=[];for(let a=0;a<r.length;a++){const s=r[a];s.isLink&&(!n||s.t===n)&&e.check(s)&&o.push(s.toFormattedObject(e))}return o}var M1="[\0- -\u2029]",XV=new RegExp(M1),JV=new RegExp(`${M1}$`),ZV=new RegExp(M1,"g");function QV(i){return i.length===1?i[0].isLink:i.length===3&&i[1].isLink?["()","[]"].includes(i[0].value+i[2].value):!1}function t6(i){return new Rr({key:new Si("autolink"),appendTransaction:(n,t,e)=>{const r=n.some(c=>c.docChanged)&&!t.doc.eq(e.doc),o=n.some(c=>c.getMeta("preventAutolink"));if(!r||o)return;const{tr:a}=e,s=f2(t.doc,[...n]);if(y2(s).forEach(({newRange:c})=>{const h=jB(e.doc,c,y=>y.isTextblock);let v,m;if(h.length>1)v=h[0],m=e.doc.textBetween(v.pos,v.pos+v.node.nodeSize,void 0," ");else if(h.length){const y=e.doc.textBetween(c.from,c.to," "," ");if(!JV.test(y))return;v=h[0],m=e.doc.textBetween(v.pos,c.to,void 0," ")}if(v&&m){const y=m.split(XV).filter(Boolean);if(y.length<=0)return!1;const _=y[y.length-1],C=v.pos+m.lastIndexOf(_);if(!_)return!1;const E=k1(_).map(D=>D.toObject(i.defaultProtocol));if(!QV(E))return!1;E.filter(D=>D.isLink).map(D=>({...D,from:C+D.start+1,to:C+D.end+1})).filter(D=>e.schema.marks.code?!e.doc.rangeHasMark(D.from,D.to,e.schema.marks.code):!0).filter(D=>i.validate(D.value)).filter(D=>i.shouldAutoLink(D.value)).forEach(D=>{m1(D.from,D.to,e.doc).some(F=>F.mark.type===i.type)||a.addMark(D.from,D.to,i.type.create({href:D.href}))})}}),!!a.steps.length)return a}})}function e6(i){return new Rr({key:new Si("handleClickLink"),props:{handleClick:(n,t,e)=>{var r,o;if(e.button!==0||!n.editable)return!1;let a=null;if(e.target instanceof HTMLAnchorElement)a=e.target;else{let h=e.target;const v=[];for(;h.nodeName!=="DIV";)v.push(h),h=h.parentNode;a=v.find(m=>m.nodeName==="A")}if(!a)return!1;const s=m2(n.state,i.type.name),u=(r=a==null?void 0:a.href)!=null?r:s.href,c=(o=a==null?void 0:a.target)!=null?o:s.target;return i.enableClickSelection&&i.editor.commands.extendMarkRange(i.type.name),a&&u?(window.open(u,c),!0):!1}}})}function n6(i){return new Rr({key:new Si("handlePasteLink"),props:{handlePaste:(n,t,e)=>{const{shouldAutoLink:r}=i,{state:o}=n,{selection:a}=o,{empty:s}=a;if(s)return!1;let u="";e.content.forEach(h=>{u+=h.textContent});const c=q2(u,{defaultProtocol:i.defaultProtocol}).find(h=>h.isLink&&h.value===u);return!u||!c||r!==void 0&&!r(c.href)?!1:i.editor.commands.setMark(i.type,{href:c.href})}}})}function ff(i,n){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return n&&n.forEach(e=>{const r=typeof e=="string"?e:e.scheme;r&&t.push(r)}),!i||i.replace(ZV,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var K2=qf.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(i=>{if(typeof i=="string"){JE(i);return}JE(i.scheme,i.optionalSlashes)})},onDestroy(){GV()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(i,n)=>!!ff(i,n.protocols),validate:i=>!!i,shouldAutoLink:i=>!!i}},addAttributes(){return{href:{default:null,parseHTML(i){return i.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:i=>{const n=i.getAttribute("href");return!n||!this.options.isAllowedUri(n,{defaultValidate:t=>!!ff(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:i}){return this.options.isAllowedUri(i.href,{defaultValidate:n=>!!ff(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Qr(this.options.HTMLAttributes,i),0]:["a",Qr(this.options.HTMLAttributes,{...i,href:""}),0]},markdownTokenName:"link",parseMarkdown:(i,n)=>n.applyMark("link",n.parseInline(i.tokens||[]),{href:i.href,title:i.title||null}),renderMarkdown:(i,n)=>{var t;const e=((t=i.attrs)==null?void 0:t.href)||"";return`[${n.renderChildren(i)}](${e})`},addCommands(){return{setLink:i=>({chain:n})=>{const{href:t}=i;return this.options.isAllowedUri(t,{defaultValidate:e=>!!ff(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?n().setMark(this.name,i).setMeta("preventAutolink",!0).run():!1},toggleLink:i=>({chain:n})=>{const{href:t}=i||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:e=>!!ff(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:n().toggleMark(this.name,i,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:i})=>i().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Uf({find:i=>{const n=[];if(i){const{protocols:t,defaultProtocol:e}=this.options,r=q2(i).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:a=>!!ff(a,t),protocols:t,defaultProtocol:e}));r.length&&r.forEach(o=>{this.options.shouldAutoLink(o.value)&&n.push({text:o.value,data:{href:o.href},index:o.start})})}return n},type:this.type,getAttributes:i=>{var n;return{href:(n=i.data)==null?void 0:n.href}}})]},addProseMirrorPlugins(){const i=[],{protocols:n,defaultProtocol:t}=this.options;return this.options.autolink&&i.push(t6({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:e=>this.options.isAllowedUri(e,{defaultValidate:r=>!!ff(r,n),protocols:n,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&i.push(e6({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&i.push(n6({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),i}}),r6=K2,i6=Object.defineProperty,o6=(i,n)=>{for(var t in n)i6(i,t,{get:n[t],enumerable:!0})},a6="listItem",ZE="textStyle",QE=/^\s*([-+*])\s$/,$2=fa.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:i}){return["ul",Qr(this.options.HTMLAttributes,i),0]},markdownTokenName:"list",parseMarkdown:(i,n)=>i.type!=="list"||i.ordered?[]:{type:"bulletList",content:i.items?n.parseChildren(i.items):[]},renderMarkdown:(i,n)=>i.content?n.renderChildren(i.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:i,chain:n})=>this.options.keepAttributes?n().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(a6,this.editor.getAttributes(ZE)).run():i.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let i=Bh({find:QE,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(i=Bh({find:QE,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ZE),editor:this.editor})),[i]}}),G2=fa.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:i}){return["li",Qr(this.options.HTMLAttributes,i),0]},markdownTokenName:"list_item",parseMarkdown:(i,n)=>{if(i.type!=="list_item")return[];let t=[];if(i.tokens&&i.tokens.length>0)if(i.tokens.some(r=>r.type==="paragraph"))t=n.parseChildren(i.tokens);else{const r=i.tokens[0];if(r&&r.type==="text"&&r.tokens&&r.tokens.length>0){if(t=[{type:"paragraph",content:n.parseInline(r.tokens)}],i.tokens.length>1){const a=i.tokens.slice(1),s=n.parseChildren(a);t.push(...s)}}else t=n.parseChildren(i.tokens)}return t.length===0&&(t=[{type:"paragraph",content:[]}]),{type:"listItem",content:t}},renderMarkdown:(i,n,t)=>x1(i,n,e=>e.parentType==="bulletList"?"- ":e.parentType==="orderedList"?`${e.index+1}. `:"- ",t),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),s6={};o6(s6,{findListItemPos:()=>Eg,getNextListDepth:()=>D1,handleBackspace:()=>HS,handleDelete:()=>zS,hasListBefore:()=>Y2,hasListItemAfter:()=>l6,hasListItemBefore:()=>X2,listItemHasSubList:()=>J2,nextListIsDeeper:()=>Z2,nextListIsHigher:()=>Q2});var Eg=(i,n)=>{const{$from:t}=n.selection,e=fi(i,n.schema);let r=null,o=t.depth,a=t.pos,s=null;for(;o>0&&s===null;)r=t.node(o),r.type===e?s=o:(o-=1,a-=1);return s===null?null:{$pos:n.doc.resolve(a),depth:s}},D1=(i,n)=>{const t=Eg(i,n);if(!t)return!1;const[,e]=KB(n,i,t.$pos.pos+4);return e},Y2=(i,n,t)=>{const{$anchor:e}=i.selection,r=Math.max(0,e.pos-2),o=i.doc.resolve(r).node();return!(!o||!t.includes(o.type.name))},X2=(i,n)=>{var t;const{$anchor:e}=n.selection,r=n.doc.resolve(e.pos-2);return!(r.index()===0||((t=r.nodeBefore)==null?void 0:t.type.name)!==i)},J2=(i,n,t)=>{if(!t)return!1;const e=fi(i,n.schema);let r=!1;return t.descendants(o=>{o.type===e&&(r=!0)}),r},HS=(i,n,t)=>{if(i.commands.undoInputRule())return!0;if(i.state.selection.from!==i.state.selection.to)return!1;if(!yc(i.state,n)&&Y2(i.state,n,t)){const{$anchor:s}=i.state.selection,u=i.state.doc.resolve(s.before()-1),c=[];u.node().descendants((m,y)=>{m.type.name===n&&c.push({node:m,pos:y})});const h=c.at(-1);if(!h)return!1;const v=i.state.doc.resolve(u.start()+h.pos+1);return i.chain().cut({from:s.start()-1,to:s.end()+1},v.end()).joinForward().run()}if(!yc(i.state,n)||!XB(i.state))return!1;const e=Eg(n,i.state);if(!e)return!1;const o=i.state.doc.resolve(e.$pos.pos-2).node(e.depth),a=J2(n,i.state,o);return X2(n,i.state)&&!a?i.commands.joinItemBackward():i.chain().liftListItem(n).run()},Z2=(i,n)=>{const t=D1(i,n),e=Eg(i,n);return!e||!t?!1:t>e.depth},Q2=(i,n)=>{const t=D1(i,n),e=Eg(i,n);return!e||!t?!1:t<e.depth},zS=(i,n)=>{if(!yc(i.state,n)||!YB(i.state,n))return!1;const{selection:t}=i.state,{$from:e,$to:r}=t;return!t.empty&&e.sameParent(r)?!1:Z2(n,i.state)?i.chain().focus(i.state.selection.from+4).lift(n).joinBackward().run():Q2(n,i.state)?i.chain().joinForward().joinBackward().run():i.commands.joinItemForward()},l6=(i,n)=>{var t;const{$anchor:e}=n.selection,r=n.doc.resolve(e.pos-e.parentOffset-2);return!(r.index()===r.parent.childCount-1||((t=r.nodeAfter)==null?void 0:t.type.name)!==i)},tD=ti.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:i})=>{let n=!1;return this.options.listTypes.forEach(({itemName:t})=>{i.state.schema.nodes[t]!==void 0&&zS(i,t)&&(n=!0)}),n},"Mod-Delete":({editor:i})=>{let n=!1;return this.options.listTypes.forEach(({itemName:t})=>{i.state.schema.nodes[t]!==void 0&&zS(i,t)&&(n=!0)}),n},Backspace:({editor:i})=>{let n=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:e})=>{i.state.schema.nodes[t]!==void 0&&HS(i,t,e)&&(n=!0)}),n},"Mod-Backspace":({editor:i})=>{let n=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:e})=>{i.state.schema.nodes[t]!==void 0&&HS(i,t,e)&&(n=!0)}),n}}}}),tO=/^(\s*)(\d+)\.\s+(.*)$/,u6=/^\s/;function c6(i){const n=[];let t=0,e=0;for(;t<i.length;){const r=i[t],o=r.match(tO);if(!o)break;const[,a,s,u]=o,c=a.length;let h=u,v=t+1;const m=[r];for(;v<i.length;){const y=i[v];if(y.match(tO))break;if(y.trim()==="")m.push(y),h+=`
`,v+=1;else if(y.match(u6))m.push(y),h+=`
${y.slice(c+2)}`,v+=1;else break}n.push({indent:c,number:parseInt(s,10),content:h.trim(),raw:m.join(`
`)}),e=v,t=v}return[n,e]}function eD(i,n,t){var e;const r=[];let o=0;for(;o<i.length;){const a=i[o];if(a.indent===n){const s=a.content.split(`
`),u=((e=s[0])==null?void 0:e.trim())||"",c=[];u&&c.push({type:"paragraph",raw:u,tokens:t.inlineTokens(u)});const h=s.slice(1).join(`
`).trim();if(h){const y=t.blockTokens(h);c.push(...y)}let v=o+1;const m=[];for(;v<i.length&&i[v].indent>n;)m.push(i[v]),v+=1;if(m.length>0){const y=Math.min(...m.map(C=>C.indent)),_=eD(m,y,t);c.push({type:"list",ordered:!0,start:m[0].number,items:_,raw:m.map(C=>C.raw).join(`
`)})}r.push({type:"list_item",raw:a.raw,tokens:c}),o=v}else o+=1}return r}function f6(i,n){return i.map(t=>{if(t.type!=="list_item")return n.parseChildren([t])[0];const e=[];return t.tokens&&t.tokens.length>0&&t.tokens.forEach(r=>{if(r.type==="paragraph"||r.type==="list"||r.type==="blockquote"||r.type==="code")e.push(...n.parseChildren([r]));else if(r.type==="text"&&r.tokens){const o=n.parseChildren([r]);e.push({type:"paragraph",content:o})}else{const o=n.parseChildren([r]);o.length>0&&e.push(...o)}}),{type:"listItem",content:e}})}var d6="listItem",eO="textStyle",nO=/^(\d+)\.\s$/,nD=fa.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:i=>i.hasAttribute("start")?parseInt(i.getAttribute("start")||"",10):1},type:{default:null,parseHTML:i=>i.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:i}){const{start:n,...t}=i;return n===1?["ol",Qr(this.options.HTMLAttributes,t),0]:["ol",Qr(this.options.HTMLAttributes,i),0]},markdownTokenName:"list",parseMarkdown:(i,n)=>{if(i.type!=="list"||!i.ordered)return[];const t=i.start||1,e=i.items?f6(i.items,n):[];return t!==1?{type:"orderedList",attrs:{start:t},content:e}:{type:"orderedList",content:e}},renderMarkdown:(i,n)=>i.content?n.renderChildren(i.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:i=>{const n=i.match(/^(\s*)(\d+)\.\s+/),t=n==null?void 0:n.index;return t!==void 0?t:-1},tokenize:(i,n,t)=>{var e;const r=i.split(`
`),[o,a]=c6(r);if(o.length===0)return;const s=eD(o,0,t);return s.length===0?void 0:{type:"list",ordered:!0,start:((e=o[0])==null?void 0:e.number)||1,items:s,raw:r.slice(0,a).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:i,chain:n})=>this.options.keepAttributes?n().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(d6,this.editor.getAttributes(eO)).run():i.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let i=Bh({find:nO,type:this.type,getAttributes:n=>({start:+n[1]}),joinPredicate:(n,t)=>t.childCount+t.attrs.start===+n[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(i=Bh({find:nO,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:n=>({start:+n[1],...this.editor.getAttributes(eO)}),joinPredicate:(n,t)=>t.childCount+t.attrs.start===+n[1],editor:this.editor})),[i]}}),h6=/^\s*(\[([( |x])?\])\s$/,p6=fa.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:i=>{const n=i.getAttribute("data-checked");return n===""||n==="true"},renderHTML:i=>({"data-checked":i.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:i,HTMLAttributes:n}){return["li",Qr(this.options.HTMLAttributes,n,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:i.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(i,n)=>{const t=[];if(i.tokens&&i.tokens.length>0?t.push(n.createNode("paragraph",{},n.parseInline(i.tokens))):i.text?t.push(n.createNode("paragraph",{},[n.createNode("text",{text:i.text})])):t.push(n.createNode("paragraph",{},[])),i.nestedTokens&&i.nestedTokens.length>0){const e=n.parseChildren(i.nestedTokens);t.push(...e)}return n.createNode("taskItem",{checked:i.checked||!1},t)},renderMarkdown:(i,n)=>{var t;const r=`- [${(t=i.attrs)!=null&&t.checked?"x":" "}] `;return x1(i,n,r)},addKeyboardShortcuts(){const i={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...i,Tab:()=>this.editor.commands.sinkListItem(this.name)}:i},addNodeView(){return({node:i,HTMLAttributes:n,getPos:t,editor:e})=>{const r=document.createElement("li"),o=document.createElement("label"),a=document.createElement("span"),s=document.createElement("input"),u=document.createElement("div"),c=h=>{var v,m;s.ariaLabel=((m=(v=this.options.a11y)==null?void 0:v.checkboxLabel)==null?void 0:m.call(v,h,s.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};return c(i),o.contentEditable="false",s.type="checkbox",s.addEventListener("mousedown",h=>h.preventDefault()),s.addEventListener("change",h=>{if(!e.isEditable&&!this.options.onReadOnlyChecked){s.checked=!s.checked;return}const{checked:v}=h.target;e.isEditable&&typeof t=="function"&&e.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:m})=>{const y=t();if(typeof y!="number")return!1;const _=m.doc.nodeAt(y);return m.setNodeMarkup(y,void 0,{..._==null?void 0:_.attrs,checked:v}),!0}).run(),!e.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(i,v)||(s.checked=!s.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,v])=>{r.setAttribute(h,v)}),r.dataset.checked=i.attrs.checked,s.checked=i.attrs.checked,o.append(s,a),r.append(o,u),Object.entries(n).forEach(([h,v])=>{r.setAttribute(h,v)}),{dom:r,contentDOM:u,update:h=>h.type!==this.type?!1:(r.dataset.checked=h.attrs.checked,s.checked=h.attrs.checked,c(h),!0)}}},addInputRules(){return[Bh({find:h6,type:this.type,getAttributes:i=>({checked:i[i.length-1]==="x"})})]}}),v6=fa.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:i}){return["ul",Qr(this.options.HTMLAttributes,i,{"data-type":this.name}),0]},parseMarkdown:(i,n)=>n.createNode("taskList",{},n.parseChildren(i.items||[])),renderMarkdown:(i,n)=>i.content?n.renderChildren(i.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(i){var n;const t=(n=i.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:n.index;return t!==void 0?t:-1},tokenize(i,n,t){const e=o=>{const a=PS(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,u)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:t.inlineTokens(s.mainContent),nestedTokens:u}),customNestedParser:e},t);return a?[{type:"taskList",raw:a.raw,items:a.items}]:t.blockTokens(o)},r=PS(i,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,a)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:t.inlineTokens(o.mainContent),nestedTokens:a}),customNestedParser:e},t);if(r)return{type:"taskList",raw:r.raw,items:r.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:i})=>i.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});ti.create({name:"listKit",addExtensions(){const i=[];return this.options.bulletList!==!1&&i.push($2.configure(this.options.bulletList)),this.options.listItem!==!1&&i.push(G2.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(tD.configure(this.options.listKeymap)),this.options.orderedList!==!1&&i.push(nD.configure(this.options.orderedList)),this.options.taskItem!==!1&&i.push(p6.configure(this.options.taskItem)),this.options.taskList!==!1&&i.push(v6.configure(this.options.taskList)),i}});var g6=fa.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:i}){return["p",Qr(this.options.HTMLAttributes,i),0]},parseMarkdown:(i,n)=>{const t=i.tokens||[];return t.length===1&&t[0].type==="image"?n.parseChildren([t[0]]):n.createNode("paragraph",void 0,n.parseInline(t))},renderMarkdown:(i,n)=>!i||!Array.isArray(i.content)?"":n.renderChildren(i.content),addCommands(){return{setParagraph:()=>({commands:i})=>i.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),m6=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,y6=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,b6=qf.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:i=>i.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:i}){return["s",Qr(this.options.HTMLAttributes,i),0]},markdownTokenName:"del",parseMarkdown:(i,n)=>n.applyMark("strike",n.parseInline(i.tokens||[])),renderMarkdown:(i,n)=>`~~${n.renderChildren(i)}~~`,addCommands(){return{setStrike:()=>({commands:i})=>i.setMark(this.name),toggleStrike:()=>({commands:i})=>i.toggleMark(this.name),unsetStrike:()=>({commands:i})=>i.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ih({find:m6,type:this.type})]},addPasteRules(){return[Uf({find:y6,type:this.type})]}}),w6=fa.create({name:"text",group:"inline",parseMarkdown:i=>({type:"text",text:i.text||""}),renderMarkdown:i=>i.text||""}),x6=qf.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:i=>i.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:i}){return["u",Qr(this.options.HTMLAttributes,i),0]},parseMarkdown(i,n){return n.applyMark(this.name||"underline",n.parseInline(i.tokens||[]))},renderMarkdown(i,n){return`++${n.renderChildren(i)}++`},markdownTokenizer:{name:"underline",level:"inline",start(i){return i.indexOf("++")},tokenize(i,n,t){const r=/^(\+\+)([\s\S]+?)(\+\+)/.exec(i);if(!r)return;const o=r[2].trim();return{type:"underline",raw:r[0],text:o,tokens:t.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:i})=>i.setMark(this.name),toggleUnderline:()=>({commands:i})=>i.toggleMark(this.name),unsetUnderline:()=>({commands:i})=>i.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function S6(i={}){return new Rr({view(n){return new _6(n,i)}})}class _6{constructor(n,t){var e;this.editorView=n,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(e=t.width)!==null&&e!==void 0?e:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(r=>{let o=a=>{this[r](a)};return n.dom.addEventListener(r,o),{name:r,handler:o}})}destroy(){this.handlers.forEach(({name:n,handler:t})=>this.editorView.dom.removeEventListener(n,t))}update(n,t){this.cursorPos!=null&&t.doc!=n.state.doc&&(this.cursorPos>n.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(n){n!=this.cursorPos&&(this.cursorPos=n,n==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let n=this.editorView.state.doc.resolve(this.cursorPos),t=!n.parent.inlineContent,e,r=this.editorView.dom,o=r.getBoundingClientRect(),a=o.width/r.offsetWidth,s=o.height/r.offsetHeight;if(t){let v=n.nodeBefore,m=n.nodeAfter;if(v||m){let y=this.editorView.nodeDOM(this.cursorPos-(v?v.nodeSize:0));if(y){let _=y.getBoundingClientRect(),C=v?_.bottom:_.top;v&&m&&(C=(C+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let E=this.width/2*s;e={left:_.left,right:_.right,top:C-E,bottom:C+E}}}}if(!e){let v=this.editorView.coordsAtPos(this.cursorPos),m=this.width/2*a;e={left:v.left-m,right:v.left+m,top:v.top,bottom:v.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let c,h;if(!u||u==document.body&&getComputedStyle(u).position=="static")c=-pageXOffset,h=-pageYOffset;else{let v=u.getBoundingClientRect(),m=v.width/u.offsetWidth,y=v.height/u.offsetHeight;c=v.left-u.scrollLeft*m,h=v.top-u.scrollTop*y}this.element.style.left=(e.left-c)/a+"px",this.element.style.top=(e.top-h)/s+"px",this.element.style.width=(e.right-e.left)/a+"px",this.element.style.height=(e.bottom-e.top)/s+"px"}scheduleRemoval(n){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),n)}dragover(n){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:n.clientX,top:n.clientY}),e=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=e&&e.type.spec.disableDropCursor,o=typeof r=="function"?r(this.editorView,t,n):r;if(t&&!o){let a=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let s=rM(this.editorView.state.doc,a,this.editorView.dragging.slice);s!=null&&(a=s)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(n){this.editorView.dom.contains(n.relatedTarget)||this.setCursor(null)}}class zr extends bn{constructor(n){super(n,n)}map(n,t){let e=n.resolve(t.map(this.head));return zr.valid(e)?new zr(e):bn.near(e)}content(){return Ne.empty}eq(n){return n instanceof zr&&n.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(n,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new zr(n.resolve(t.pos))}getBookmark(){return new P1(this.anchor)}static valid(n){let t=n.parent;if(t.isTextblock||!C6(n)||!T6(n))return!1;let e=t.type.spec.allowGapCursor;if(e!=null)return e;let r=t.contentMatchAt(n.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(n,t,e=!1){t:for(;;){if(!e&&zr.valid(n))return n;let r=n.pos,o=null;for(let a=n.depth;;a--){let s=n.node(a);if(t>0?n.indexAfter(a)<s.childCount:n.index(a)>0){o=s.child(t>0?n.indexAfter(a):n.index(a)-1);break}else if(a==0)return null;r+=t;let u=n.doc.resolve(r);if(zr.valid(u))return u}for(;;){let a=t>0?o.firstChild:o.lastChild;if(!a){if(o.isAtom&&!o.isText&&!Ge.isSelectable(o)){n=n.doc.resolve(r+o.nodeSize*t),e=!1;continue t}break}o=a,r+=t;let s=n.doc.resolve(r);if(zr.valid(s))return s}return null}}}zr.prototype.visible=!1;zr.findFrom=zr.findGapCursorFrom;bn.jsonID("gapcursor",zr);class P1{constructor(n){this.pos=n}map(n){return new P1(n.map(this.pos))}resolve(n){let t=n.resolve(this.pos);return zr.valid(t)?new zr(t):bn.near(t)}}function rD(i){return i.isAtom||i.spec.isolating||i.spec.createGapCursor}function C6(i){for(let n=i.depth;n>=0;n--){let t=i.index(n),e=i.node(n);if(t==0){if(e.type.spec.isolating)return!0;continue}for(let r=e.child(t-1);;r=r.lastChild){if(r.childCount==0&&!r.inlineContent||rD(r.type))return!0;if(r.inlineContent)return!1}}return!0}function T6(i){for(let n=i.depth;n>=0;n--){let t=i.indexAfter(n),e=i.node(n);if(t==e.childCount){if(e.type.spec.isolating)return!0;continue}for(let r=e.child(t);;r=r.firstChild){if(r.childCount==0&&!r.inlineContent||rD(r.type))return!0;if(r.inlineContent)return!1}}return!0}function E6(){return new Rr({props:{decorations:M6,createSelectionBetween(i,n,t){return n.pos==t.pos&&zr.valid(t)?new zr(t):null},handleClick:A6,handleKeyDown:O6,handleDOMEvents:{beforeinput:k6}}})}const O6=r2({ArrowLeft:Wm("horiz",-1),ArrowRight:Wm("horiz",1),ArrowUp:Wm("vert",-1),ArrowDown:Wm("vert",1)});function Wm(i,n){const t=i=="vert"?n>0?"down":"up":n>0?"right":"left";return function(e,r,o){let a=e.selection,s=n>0?a.$to:a.$from,u=a.empty;if(a instanceof an){if(!o.endOfTextblock(t)||s.depth==0)return!1;u=!1,s=e.doc.resolve(n>0?s.after():s.before())}let c=zr.findGapCursorFrom(s,n,u);return c?(r&&r(e.tr.setSelection(new zr(c))),!0):!1}}function A6(i,n,t){if(!i||!i.editable)return!1;let e=i.state.doc.resolve(n);if(!zr.valid(e))return!1;let r=i.posAtCoords({left:t.clientX,top:t.clientY});return r&&r.inside>-1&&Ge.isSelectable(i.state.doc.nodeAt(r.inside))?!1:(i.dispatch(i.state.tr.setSelection(new zr(e))),!0)}function k6(i,n){if(n.inputType!="insertCompositionText"||!(i.state.selection instanceof zr))return!1;let{$from:t}=i.state.selection,e=t.parent.contentMatchAt(t.index()).findWrapping(i.state.schema.nodes.text);if(!e)return!1;let r=ge.empty;for(let a=e.length-1;a>=0;a--)r=ge.from(e[a].createAndFill(null,r));let o=i.state.tr.replace(t.pos,t.pos,new Ne(r,0,0));return o.setSelection(an.near(o.doc.resolve(t.pos+1))),i.dispatch(o),!1}function M6(i){if(!(i.selection instanceof zr))return null;let n=document.createElement("div");return n.className="ProseMirror-gapcursor",Pr.create(i.doc,[No.widget(i.selection.head,n,{key:"gapcursor"})])}var l0=200,Fi=function(){};Fi.prototype.append=function(n){return n.length?(n=Fi.from(n),!this.length&&n||n.length<l0&&this.leafAppend(n)||this.length<l0&&n.leafPrepend(this)||this.appendInner(n)):this};Fi.prototype.prepend=function(n){return n.length?Fi.from(n).append(this):this};Fi.prototype.appendInner=function(n){return new D6(this,n)};Fi.prototype.slice=function(n,t){return n===void 0&&(n=0),t===void 0&&(t=this.length),n>=t?Fi.empty:this.sliceInner(Math.max(0,n),Math.min(this.length,t))};Fi.prototype.get=function(n){if(!(n<0||n>=this.length))return this.getInner(n)};Fi.prototype.forEach=function(n,t,e){t===void 0&&(t=0),e===void 0&&(e=this.length),t<=e?this.forEachInner(n,t,e,0):this.forEachInvertedInner(n,t,e,0)};Fi.prototype.map=function(n,t,e){t===void 0&&(t=0),e===void 0&&(e=this.length);var r=[];return this.forEach(function(o,a){return r.push(n(o,a))},t,e),r};Fi.from=function(n){return n instanceof Fi?n:n&&n.length?new iD(n):Fi.empty};var iD=function(i){function n(e){i.call(this),this.values=e}i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n;var t={length:{configurable:!0},depth:{configurable:!0}};return n.prototype.flatten=function(){return this.values},n.prototype.sliceInner=function(r,o){return r==0&&o==this.length?this:new n(this.values.slice(r,o))},n.prototype.getInner=function(r){return this.values[r]},n.prototype.forEachInner=function(r,o,a,s){for(var u=o;u<a;u++)if(r(this.values[u],s+u)===!1)return!1},n.prototype.forEachInvertedInner=function(r,o,a,s){for(var u=o-1;u>=a;u--)if(r(this.values[u],s+u)===!1)return!1},n.prototype.leafAppend=function(r){if(this.length+r.length<=l0)return new n(this.values.concat(r.flatten()))},n.prototype.leafPrepend=function(r){if(this.length+r.length<=l0)return new n(r.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(n.prototype,t),n}(Fi);Fi.empty=new iD([]);var D6=function(i){function n(t,e){i.call(this),this.left=t,this.right=e,this.length=t.length+e.length,this.depth=Math.max(t.depth,e.depth)+1}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},n.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},n.prototype.forEachInner=function(e,r,o,a){var s=this.left.length;if(r<s&&this.left.forEachInner(e,r,Math.min(o,s),a)===!1||o>s&&this.right.forEachInner(e,Math.max(r-s,0),Math.min(this.length,o)-s,a+s)===!1)return!1},n.prototype.forEachInvertedInner=function(e,r,o,a){var s=this.left.length;if(r>s&&this.right.forEachInvertedInner(e,r-s,Math.max(o,s)-s,a+s)===!1||o<s&&this.left.forEachInvertedInner(e,Math.min(r,s),o,a)===!1)return!1},n.prototype.sliceInner=function(e,r){if(e==0&&r==this.length)return this;var o=this.left.length;return r<=o?this.left.slice(e,r):e>=o?this.right.slice(e-o,r-o):this.left.slice(e,o).append(this.right.slice(0,r-o))},n.prototype.leafAppend=function(e){var r=this.right.leafAppend(e);if(r)return new n(this.left,r)},n.prototype.leafPrepend=function(e){var r=this.left.leafPrepend(e);if(r)return new n(r,this.right)},n.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new n(this.left,new n(this.right,e)):new n(this,e)},n}(Fi);const P6=500;class Os{constructor(n,t){this.items=n,this.eventCount=t}popEvent(n,t){if(this.eventCount==0)return null;let e=this.items.length;for(;;e--)if(this.items.get(e-1).selection){--e;break}let r,o;t&&(r=this.remapping(e,this.items.length),o=r.maps.length);let a=n.tr,s,u,c=[],h=[];return this.items.forEach((v,m)=>{if(!v.step){r||(r=this.remapping(e,m+1),o=r.maps.length),o--,h.push(v);return}if(r){h.push(new pl(v.map));let y=v.step.map(r.slice(o)),_;y&&a.maybeStep(y).doc&&(_=a.mapping.maps[a.mapping.maps.length-1],c.push(new pl(_,void 0,void 0,c.length+h.length))),o--,_&&r.appendMap(_,o)}else a.maybeStep(v.step);if(v.selection)return s=r?v.selection.map(r.slice(o)):v.selection,u=new Os(this.items.slice(0,e).append(h.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:a,selection:s}}addTransform(n,t,e,r){let o=[],a=this.eventCount,s=this.items,u=!r&&s.length?s.get(s.length-1):null;for(let h=0;h<n.steps.length;h++){let v=n.steps[h].invert(n.docs[h]),m=new pl(n.mapping.maps[h],v,t),y;(y=u&&u.merge(m))&&(m=y,h?o.pop():s=s.slice(0,s.length-1)),o.push(m),t&&(a++,t=void 0),r||(u=m)}let c=a-e.depth;return c>R6&&(s=N6(s,c),a-=c),new Os(s.append(o),a)}remapping(n,t){let e=new ng;return this.items.forEach((r,o)=>{let a=r.mirrorOffset!=null&&o-r.mirrorOffset>=n?e.maps.length-r.mirrorOffset:void 0;e.appendMap(r.map,a)},n,t),e}addMaps(n){return this.eventCount==0?this:new Os(this.items.append(n.map(t=>new pl(t))),this.eventCount)}rebased(n,t){if(!this.eventCount)return this;let e=[],r=Math.max(0,this.items.length-t),o=n.mapping,a=n.steps.length,s=this.eventCount;this.items.forEach(m=>{m.selection&&s--},r);let u=t;this.items.forEach(m=>{let y=o.getMirror(--u);if(y==null)return;a=Math.min(a,y);let _=o.maps[y];if(m.step){let C=n.steps[y].invert(n.docs[y]),E=m.selection&&m.selection.map(o.slice(u+1,y));E&&s++,e.push(new pl(_,C,E))}else e.push(new pl(_))},r);let c=[];for(let m=t;m<a;m++)c.push(new pl(o.maps[m]));let h=this.items.slice(0,r).append(c).append(e),v=new Os(h,s);return v.emptyItemCount()>P6&&(v=v.compress(this.items.length-e.length)),v}emptyItemCount(){let n=0;return this.items.forEach(t=>{t.step||n++}),n}compress(n=this.items.length){let t=this.remapping(0,n),e=t.maps.length,r=[],o=0;return this.items.forEach((a,s)=>{if(s>=n)r.push(a),a.selection&&o++;else if(a.step){let u=a.step.map(t.slice(e)),c=u&&u.getMap();if(e--,c&&t.appendMap(c,e),u){let h=a.selection&&a.selection.map(t.slice(e));h&&o++;let v=new pl(c.invert(),u,h),m,y=r.length-1;(m=r.length&&r[y].merge(v))?r[y]=m:r.push(v)}}else a.map&&e--},this.items.length,0),new Os(Fi.from(r.reverse()),o)}}Os.empty=new Os(Fi.empty,0);function N6(i,n){let t;return i.forEach((e,r)=>{if(e.selection&&n--==0)return t=r,!1}),i.slice(t)}class pl{constructor(n,t,e,r){this.map=n,this.step=t,this.selection=e,this.mirrorOffset=r}merge(n){if(this.step&&n.step&&!n.selection){let t=n.step.merge(this.step);if(t)return new pl(t.getMap().invert(),t,this.selection)}}}class tc{constructor(n,t,e,r,o){this.done=n,this.undone=t,this.prevRanges=e,this.prevTime=r,this.prevComposition=o}}const R6=20;function L6(i,n,t,e){let r=t.getMeta(Rf),o;if(r)return r.historyState;t.getMeta(B6)&&(i=new tc(i.done,i.undone,null,0,-1));let a=t.getMeta("appendedTransaction");if(t.steps.length==0)return i;if(a&&a.getMeta(Rf))return a.getMeta(Rf).redo?new tc(i.done.addTransform(t,void 0,e,fy(n)),i.undone,rO(t.mapping.maps),i.prevTime,i.prevComposition):new tc(i.done,i.undone.addTransform(t,void 0,e,fy(n)),null,i.prevTime,i.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let s=t.getMeta("composition"),u=i.prevTime==0||!a&&i.prevComposition!=s&&(i.prevTime<(t.time||0)-e.newGroupDelay||!j6(t,i.prevRanges)),c=a?hx(i.prevRanges,t.mapping):rO(t.mapping.maps);return new tc(i.done.addTransform(t,u?n.selection.getBookmark():void 0,e,fy(n)),Os.empty,c,t.time,s??i.prevComposition)}else return(o=t.getMeta("rebased"))?new tc(i.done.rebased(t,o),i.undone.rebased(t,o),hx(i.prevRanges,t.mapping),i.prevTime,i.prevComposition):new tc(i.done.addMaps(t.mapping.maps),i.undone.addMaps(t.mapping.maps),hx(i.prevRanges,t.mapping),i.prevTime,i.prevComposition)}function j6(i,n){if(!n)return!1;if(!i.docChanged)return!0;let t=!1;return i.mapping.maps[0].forEach((e,r)=>{for(let o=0;o<n.length;o+=2)e<=n[o+1]&&r>=n[o]&&(t=!0)}),t}function rO(i){let n=[];for(let t=i.length-1;t>=0&&n.length==0;t--)i[t].forEach((e,r,o,a)=>n.push(o,a));return n}function hx(i,n){if(!i)return null;let t=[];for(let e=0;e<i.length;e+=2){let r=n.map(i[e],1),o=n.map(i[e+1],-1);r<=o&&t.push(r,o)}return t}function I6(i,n,t){let e=fy(n),r=Rf.get(n).spec.config,o=(t?i.undone:i.done).popEvent(n,e);if(!o)return null;let a=o.selection.resolve(o.transform.doc),s=(t?i.done:i.undone).addTransform(o.transform,n.selection.getBookmark(),r,e),u=new tc(t?s:o.remaining,t?o.remaining:s,null,0,-1);return o.transform.setSelection(a).setMeta(Rf,{redo:t,historyState:u})}let px=!1,iO=null;function fy(i){let n=i.plugins;if(iO!=n){px=!1,iO=n;for(let t=0;t<n.length;t++)if(n[t].spec.historyPreserveItems){px=!0;break}}return px}const Rf=new Si("history"),B6=new Si("closeHistory");function U6(i={}){return i={depth:i.depth||100,newGroupDelay:i.newGroupDelay||500},new Rr({key:Rf,state:{init(){return new tc(Os.empty,Os.empty,null,0,-1)},apply(n,t,e){return L6(t,e,n,i)}},config:i,props:{handleDOMEvents:{beforeinput(n,t){let e=t.inputType,r=e=="historyUndo"?aD:e=="historyRedo"?sD:null;return!r||!n.editable?!1:(t.preventDefault(),r(n.state,n.dispatch))}}}})}function oD(i,n){return(t,e)=>{let r=Rf.getState(t);if(!r||(i?r.undone:r.done).eventCount==0)return!1;if(e){let o=I6(r,t,i);o&&e(n?o.scrollIntoView():o)}return!0}}const aD=oD(!1,!0),sD=oD(!0,!0);ti.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:i=>i.length,wordCounter:i=>i.split(" ").filter(n=>n!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=i=>{const n=(i==null?void 0:i.node)||this.editor.state.doc;if(((i==null?void 0:i.mode)||this.options.mode)==="textSize"){const e=n.textBetween(0,n.content.size,void 0," ");return this.options.textCounter(e)}return n.nodeSize},this.storage.words=i=>{const n=(i==null?void 0:i.node)||this.editor.state.doc,t=n.textBetween(0,n.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let i=!1;return[new Rr({key:new Si("characterCount"),appendTransaction:(n,t,e)=>{if(i)return;const r=this.options.limit;if(r==null||r===0){i=!0;return}const o=this.storage.characters({node:e.doc});if(o>r){const a=o-r,s=0,u=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${r} characters. Content was automatically trimmed.`);const c=e.tr.deleteRange(s,u);return i=!0,c}i=!0},filterTransaction:(n,t)=>{const e=this.options.limit;if(!n.docChanged||e===0||e===null||e===void 0)return!0;const r=this.storage.characters({node:t.doc}),o=this.storage.characters({node:n.doc});if(o<=e||r>e&&o>e&&o<=r)return!0;if(r>e&&o>e&&o>r||!n.getMeta("paste"))return!1;const s=n.selection.$head.pos,u=o-e,c=s-u,h=s;return n.deleteRange(c,h),!(this.storage.characters({node:n.doc})>e)}})]}});var V6=ti.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[S6(this.options)]}});ti.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Rr({key:new Si("focus"),props:{decorations:({doc:i,selection:n})=>{const{isEditable:t,isFocused:e}=this.editor,{anchor:r}=n,o=[];if(!t||!e)return Pr.create(i,[]);let a=0;this.options.mode==="deepest"&&i.descendants((u,c)=>{if(u.isText)return;if(!(r>=c&&r<=c+u.nodeSize-1))return!1;a+=1});let s=0;return i.descendants((u,c)=>{if(u.isText||!(r>=c&&r<=c+u.nodeSize-1))return!1;if(s+=1,this.options.mode==="deepest"&&a-s>0||this.options.mode==="shallowest"&&s>1)return this.options.mode==="deepest";o.push(No.node(c,c+u.nodeSize,{class:this.options.className}))}),Pr.create(i,o)}}})]}});var F6=ti.create({name:"gapCursor",addProseMirrorPlugins(){return[E6()]},extendNodeSchema(i){var n;const t={name:i.name,options:i.options,storage:i.storage};return{allowGapCursor:(n=Kn($e(i,"allowGapCursor",t)))!=null?n:null}}});ti.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Rr({key:new Si("placeholder"),props:{decorations:({doc:i,selection:n})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:e}=n,r=[];if(!t)return null;const o=this.editor.isEmpty;return i.descendants((a,s)=>{const u=e>=s&&e<=s+a.nodeSize,c=!a.isLeaf&&Db(a);if((u||!this.options.showOnlyCurrent)&&c){const h=[this.options.emptyNodeClass];o&&h.push(this.options.emptyEditorClass);const v=No.node(s,s+a.nodeSize,{class:h.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:s,hasAnchor:u}):this.options.placeholder});r.push(v)}return this.options.includeChildren}),Pr.create(i,r)}}})]}});ti.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:i,options:n}=this;return[new Rr({key:new Si("selection"),props:{decorations(t){return t.selection.empty||i.isFocused||!i.isEditable||b2(t.selection)||i.view.dragging?null:Pr.create(t.doc,[No.inline(t.selection.from,t.selection.to,{class:n.className})])}}})]}});function oO({types:i,node:n}){return n&&Array.isArray(i)&&i.includes(n.type)||(n==null?void 0:n.type)===i}var H6=ti.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var i;const n=new Si(this.name),t=((i=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:i.name)||this.options.node||"paragraph",e=Object.entries(this.editor.schema.nodes).map(([,r])=>r).filter(r=>(this.options.notAfter||[]).concat(t).includes(r.name));return[new Rr({key:n,appendTransaction:(r,o,a)=>{const{doc:s,tr:u,schema:c}=a,h=n.getState(a),v=s.content.size,m=c.nodes[t];if(h)return u.insert(v,m.create())},state:{init:(r,o)=>{const a=o.tr.doc.lastChild;return!oO({node:a,types:e})},apply:(r,o)=>{if(!r.docChanged||r.getMeta("__uniqueIDTransaction"))return o;const a=r.doc.lastChild;return!oO({node:a,types:e})}}})]}}),z6=ti.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:i,dispatch:n})=>aD(i,n),redo:()=>({state:i,dispatch:n})=>sD(i,n)}},addProseMirrorPlugins(){return[U6(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),W6=ti.create({name:"starterKit",addExtensions(){var i,n,t,e;const r=[];return this.options.bold!==!1&&r.push(mV.configure(this.options.bold)),this.options.blockquote!==!1&&r.push(dV.configure(this.options.blockquote)),this.options.bulletList!==!1&&r.push($2.configure(this.options.bulletList)),this.options.code!==!1&&r.push(wV.configure(this.options.code)),this.options.codeBlock!==!1&&r.push(_V.configure(this.options.codeBlock)),this.options.document!==!1&&r.push(CV.configure(this.options.document)),this.options.dropcursor!==!1&&r.push(V6.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&r.push(F6.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&r.push(TV.configure(this.options.hardBreak)),this.options.heading!==!1&&r.push(EV.configure(this.options.heading)),this.options.undoRedo!==!1&&r.push(z6.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&r.push(OV.configure(this.options.horizontalRule)),this.options.italic!==!1&&r.push(PV.configure(this.options.italic)),this.options.listItem!==!1&&r.push(G2.configure(this.options.listItem)),this.options.listKeymap!==!1&&r.push(tD.configure((i=this.options)==null?void 0:i.listKeymap)),this.options.link!==!1&&r.push(K2.configure((n=this.options)==null?void 0:n.link)),this.options.orderedList!==!1&&r.push(nD.configure(this.options.orderedList)),this.options.paragraph!==!1&&r.push(g6.configure(this.options.paragraph)),this.options.strike!==!1&&r.push(b6.configure(this.options.strike)),this.options.text!==!1&&r.push(w6.configure(this.options.text)),this.options.underline!==!1&&r.push(x6.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&r.push(H6.configure((e=this.options)==null?void 0:e.trailingNode)),r}}),q6=W6,K6=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,$6=fa.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:i}){return["img",Qr(this.options.HTMLAttributes,i)]},parseMarkdown:(i,n)=>n.createNode("image",{src:i.href,title:i.title,alt:i.text}),renderMarkdown:i=>{var n,t,e,r,o,a;const s=(t=(n=i.attrs)==null?void 0:n.src)!=null?t:"",u=(r=(e=i.attrs)==null?void 0:e.alt)!=null?r:"",c=(a=(o=i.attrs)==null?void 0:o.title)!=null?a:"";return c?`![${u}](${s} "${c}")`:`![${u}](${s})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u"||!this.editor.isEditable)return null;const{directions:i,minWidth:n,minHeight:t,alwaysPreserveAspectRatio:e}=this.options.resize;return({node:r,getPos:o,HTMLAttributes:a})=>{const s=document.createElement("img");Object.entries(a).forEach(([h,v])=>{if(v!=null)switch(h){case"width":case"height":break;default:s.setAttribute(h,v);break}}),s.src=a.src;const u=new RU({element:s,node:r,getPos:o,onResize:(h,v)=>{s.style.width=`${h}px`,s.style.height=`${v}px`},onCommit:(h,v)=>{const m=o();m!==void 0&&this.editor.chain().setNodeSelection(m).updateAttributes(this.name,{width:h,height:v}).run()},onUpdate:(h,v,m)=>h.type===r.type,options:{directions:i,min:{width:n,height:t},preserveAspectRatio:e===!0}}),c=u.dom;return c.style.visibility="hidden",c.style.pointerEvents="none",s.onload=()=>{c.style.visibility="",c.style.pointerEvents=""},u}},addCommands(){return{setImage:i=>({commands:n})=>n.insertContent({type:this.name,attrs:i})}},addInputRules(){return[R2({find:K6,type:this.type,getAttributes:i=>{const[,,n,t,e]=i;return{src:t,alt:n,title:e}}})]}}),G6=$6;const Y6=({value:i,onChange:n})=>{const t=sV({extensions:[q6.configure({link:!1}),r6.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 underline"}}),G6.configure({HTMLAttributes:{class:"rounded-lg max-w-full h-auto"}})],content:i||"",onUpdate:({editor:r})=>{n(r.getHTML())},editorProps:{attributes:{class:"prose prose-lg max-w-none focus:outline-none min-h-96 p-6"}}});if(!t)return null;const e=()=>{const r=window.prompt("Nhp URL hnh nh:");r&&t.chain().focus().setImage({src:r}).run()};return j.jsxs("div",{className:"border-2 border-gray-300 rounded-xl overflow-hidden shadow-lg",children:[j.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-b border-gray-300 p-4 flex gap-3 flex-wrap items-center",children:[j.jsx("button",{onClick:()=>t.chain().focus().toggleBold().run(),className:`p-3 rounded-lg hover:bg-white transition ${t.isActive("bold")?"bg-white shadow-md":""}`,children:j.jsx(zL,{size:22})}),j.jsx("button",{onClick:()=>t.chain().focus().toggleItalic().run(),className:`p-3 rounded-lg hover:bg-white transition ${t.isActive("italic")?"bg-white shadow-md":""}`,children:j.jsx(ij,{size:22})}),j.jsx("button",{onClick:()=>t.chain().focus().toggleBulletList().run(),className:`p-3 rounded-lg hover:bg-white transition ${t.isActive("bulletList")?"bg-white shadow-md":""}`,children:j.jsx(dj,{size:22})}),j.jsx("button",{onClick:()=>t.chain().focus().toggleOrderedList().run(),className:`p-3 rounded-lg hover:bg-white transition ${t.isActive("orderedList")?"bg-white shadow-md":""}`,children:j.jsx(cj,{size:22})}),j.jsx("button",{onClick:()=>{const r=window.prompt("Nhp URL lin kt:");r&&t.chain().focus().setLink({href:r}).run()},className:`p-3 rounded-lg hover:bg-white transition ${t.isActive("link")?"bg-white shadow-md":""}`,children:j.jsx(lj,{size:22})}),j.jsx("button",{onClick:e,className:"p-3 rounded-lg hover:bg-white transition",children:j.jsx(tj,{size:22})}),j.jsxs("div",{className:"ml-auto flex gap-2",children:[j.jsx("button",{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),className:"p-3 rounded-lg hover:bg-white transition disabled:opacity-50",children:j.jsx(Nj,{size:22})}),j.jsx("button",{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),className:"p-3 rounded-lg hover:bg-white transition disabled:opacity-50",children:j.jsx(Sj,{size:22})})]})]}),j.jsx(tV,{editor:t,className:"bg-white"})]})},X6=()=>{Object.keys(localStorage).forEach(i=>{i.startsWith("gjs-")&&(localStorage.removeItem(i),console.log(`Removed: ${i}`))})},J6=()=>{const i=[],n=new Map;for(let t=0;t<localStorage.length;t++){const e=localStorage.key(t);if(e&&e.startsWith("template_"))try{const r=JSON.parse(localStorage.getItem(e)),o=`${r.name}-${(r.html||"").substring(0,100)}`;n.has(o)?(localStorage.removeItem(e),console.log(`Removed duplicate: ${e}`)):(n.set(o,e),i.push({key:e,data:r}))}catch(r){console.error(`Error processing ${e}`,r)}}return i.length},Z6=i=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.trim());function Q6(){const[i,n]=Nt.useState(""),[t,e]=Nt.useState(""),[r,o]=Nt.useState(""),[a,s]=Nt.useState(""),[u,c]=Nt.useState(""),[h,v]=Nt.useState(""),[m,y]=Nt.useState(!1),[_,C]=Nt.useState(""),[E,D]=Nt.useState(!1),[F,V]=Nt.useState([]),K=Rs();Nt.useEffect(()=>{X6(),J6(),Z()},[]);const Z=()=>{const st=[],et=new Set;for(let nt=0;nt<localStorage.length;nt++){const it=localStorage.key(nt);if(it&&it.startsWith("template_")&&!it.startsWith("gjs-"))try{const $=JSON.parse(localStorage.getItem(it)),ft=`${$.name}-${($.html||"").substring(0,100)}`;if(et.has(ft))continue;et.add(ft),st.push({id:it,name:$.name||"Untitled Template",html:$.html||"",css:$.css||"",createdAt:$.createdAt||null,preview:($.html||"").substring(0,200)+"..."})}catch($){console.error(`Error loading template ${it}:`,$)}}st.sort((nt,it)=>nt.createdAt?it.createdAt?new Date(it.createdAt)-new Date(nt.createdAt):-1:1),V(st)},ct=st=>{let et=st.html;if(st.css&&st.css.trim()&&(et.includes("<style>")?et=et.replace(/<style>[\s\S]*?<\/style>/g,`<style>${st.css}</style>`):et=`<style>${st.css}</style>${et}`),e(et),!i){const nt=st.name.includes("Template")?st.name.replace("Template","").trim():st.name;n(nt||"Your Subject Here")}D(!1),v(` Template applied: ${st.name}`),setTimeout(()=>v(""),3e3)},ht=async st=>{st.preventDefault(),y(!0),c(""),v(""),C("");const et=r.split(",").map(lt=>lt.trim()).filter(lt=>lt),nt=et.filter(lt=>!Z6(lt));if(nt.length>0){C(` Invalid email: ${nt.join(", ")}. Please check again!`),y(!1);return}if(et.length===0){C(" Please enter at least 1 email!"),y(!1);return}const it=a?new Date(a).toISOString():null,ft={user_id:localStorage.getItem("user_id"),subject:i,content:t,recipients:et,scheduleTime:it};try{const lt=await fetch("https://kbm7qykb6f.execute-api.us-east-1.amazonaws.com/campaigns",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(ft)}),St=await lt.json();lt.ok?(v(` Campaign created successfully! ID: ${St.campaignId}`),setTimeout(()=>K("/campaigns"),2500)):C(` Error: ${St.message||"Unknown error"}`)}catch(lt){console.error(lt),C(" Connection error to API")}finally{y(!1)}};return j.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[j.jsxs("div",{className:"text-center mb-10",children:[j.jsx("h1",{className:"text-5xl font-bold text-gray-800 mb-3",children:"Create Regular Campaign (Send Once)"}),j.jsx("p",{className:"text-xl text-red-600 font-semibold mb-6",children:"Want to send automated email sequences based on user behavior?"}),j.jsx("div",{className:"flex justify-center gap-6",children:j.jsx(Tr,{to:"/drip-builder",className:"px-10 py-5 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-2xl font-bold rounded-3xl hover:scale-110 transition shadow-2xl",children:" Drip Campaign Builder"})})]}),j.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-10",children:[j.jsxs("div",{className:"mb-8 text-center",children:[j.jsxs("button",{onClick:()=>{Z(),D(!0)},className:"inline-flex items-center gap-4 px-12 py-6 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-3xl font-bold rounded-3xl hover:scale-110 transition-all shadow-2xl",children:[j.jsx(aj,{size:48}),"Choose from Saved Templates (",F.length,")",j.jsx(kj,{size:40})]}),j.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Use templates with just 1 click!"}),j.jsx(Tr,{to:"/templates",className:"inline-block mt-3 text-purple-600 hover:underline text-lg font-semibold",children:" Or create new template in Template Library"})]}),j.jsxs("form",{onSubmit:ht,className:"space-y-8",children:[j.jsx("input",{type:"text",placeholder:"Email subject",className:"w-full p-5 border-2 border-purple-400 rounded-2xl text-xl font-bold",value:i,onChange:st=>n(st.target.value),required:!0}),j.jsxs("div",{className:"mb-10",children:[j.jsx("label",{className:"block text-3xl font-bold text-gray-800 mb-6",children:"Email content"}),j.jsx(Y6,{value:t,onChange:e}),j.jsxs("div",{className:"mt-8 p-8 bg-gradient-to-br from-gray-50 to-gray-100 rounded-3xl border-4 border-dashed border-purple-300",children:[j.jsx("p",{className:"text-2xl font-bold text-purple-700 mb-4",children:"Preview:"}),j.jsx("div",{className:"prose prose-xl max-w-none",dangerouslySetInnerHTML:{__html:t||"<p class='text-gray-500 italic'>No content yet... Choose a template to start faster!</p>"}})]})]}),j.jsx("textarea",{placeholder:"Email list, separated by commas (e.g: email1@gmail.com, email2@yahoo.com)",className:"w-full p-5 border-2 border-gray-300 rounded-2xl text-xl min-h-32",value:r,onChange:st=>o(st.target.value),required:!0}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-xl font-bold mb-3",children:" Schedule send (optional)"}),j.jsx("input",{type:"datetime-local",className:"w-full p-5 border-2 border-gray-300 rounded-2xl text-xl",value:a,onChange:st=>s(st.target.value)}),j.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Leave empty to send immediately"})]}),j.jsx("button",{type:"submit",disabled:m,className:`w-full py-8 text-4xl font-bold rounded-3xl transition-all transform hover:scale-105 shadow-2xl ${m?"bg-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-cyan-600 text-white hover:from-blue-700 hover:to-cyan-700"}`,children:m?" CREATING CAMPAIGN...":" CREATE CAMPAIGN NOW"})]}),E&&j.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-6",children:j.jsxs("div",{className:"bg-white rounded-3xl shadow-3xl max-w-6xl w-full max-h-[90vh] overflow-y-auto p-10",children:[j.jsxs("div",{className:"flex justify-between items-center mb-8",children:[j.jsx("h2",{className:"text-5xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:" Choose Saved Template"}),j.jsx("button",{onClick:()=>D(!1),className:"text-6xl font-bold text-gray-500 hover:text-gray-800 hover:scale-110 transition",children:""})]}),F.length===0?j.jsxs("div",{className:"text-center py-20",children:[j.jsx("p",{className:"text-3xl text-gray-500 mb-6",children:"No templates yet."}),j.jsx(Tr,{to:"/templates",className:"inline-block px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-2xl font-bold rounded-2xl hover:scale-105 transition",onClick:()=>D(!1),children:" Create New Template"})]}):j.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:F.map(st=>j.jsxs("div",{className:"border-4 border-purple-300 rounded-3xl overflow-hidden hover:scale-105 transition shadow-xl bg-white",children:[j.jsx("div",{className:"bg-gray-100 p-6 h-64 overflow-hidden relative",children:j.jsx("div",{dangerouslySetInnerHTML:{__html:st.html},className:"scale-50 origin-top-left transform-gpu",style:{width:"200%",height:"200%"}})}),j.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-pink-50",children:[j.jsx("h3",{className:"text-2xl font-bold text-purple-800 mb-2",children:st.name}),st.createdAt&&j.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[" ",new Date(st.createdAt).toLocaleDateString("en-US")]}),j.jsx("button",{onClick:()=>ct(st),className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-xl font-bold rounded-2xl hover:scale-105 transition",children:" Use This Template"})]})]},st.id))})]})}),h&&j.jsx("div",{className:"mt-10 p-8 bg-green-100 border-4 border-green-500 rounded-3xl text-center animate-bounce",children:j.jsx("p",{className:"text-4xl font-bold text-green-700",children:h})}),_&&j.jsx("div",{className:"mt-8 p-6 bg-red-100 border-4 border-red-500 rounded-3xl text-center",children:j.jsx("p",{className:"text-2xl text-red-600 font-bold",children:_})})]})]})}function t5(){const{id:i}=gk(),[n,t]=Nt.useState(null),[e,r]=Nt.useState([]),[o,a]=Nt.useState(!0),[s,u]=Nt.useState(null),[c,h]=Nt.useState(!1),v=async()=>{try{console.log("Campaign ID from useParams:",i);const E=await(await fetch(`https://kbm7qykb6f.execute-api.us-east-1.amazonaws.com/campaigns/${i}`)).json();if(console.log("Raw campaign data returned:",JSON.stringify(E)),E.emails&&E.emails.length>0){const D={...E.emails[0],timestamp:E.emails[0].timestamp};t(D)}else t(null)}catch(C){console.error("Error fetching campaign:",C),t(null)}},m=async()=>{try{const E=await(await fetch(`https://kbm7qykb6f.execute-api.us-east-1.amazonaws.com/campaigns/${i}/tracking`)).json();console.log("Raw tracking data returned:",JSON.stringify(E));const D=(E.tracking||[]).map(F=>({...F,timestamp:F.timestamp}));r(D)}catch(C){console.error("Error fetching tracking:",C),r([])}},y=async()=>{const C=localStorage.getItem("token");if(!C){console.log("No token found, skipping stats fetch."),a(!1);return}try{console.log("Fetching stats with id:",i);const E=await fetch(`https://kbm7qykb6f.execute-api.us-east-1.amazonaws.com/campaigns/${i}/stats`,{headers:{Authorization:`Bearer ${C}`}});if(!E.ok){const F=await E.text();throw console.error(`Error fetching stats, status: ${E.status}, response: ${F}`),new Error("Error fetching stats")}const D=await E.json();console.log("Stats returned from API:",D),u(D)}catch(E){console.error("Detailed error fetching stats:",E)}finally{a(!1)}};Nt.useEffect(()=>{v(),m(),y()},[i]),Nt.useEffect(()=>{const C=setInterval(y,3e4);return()=>clearInterval(C)},[i]);const _=async()=>{const C=localStorage.getItem("token");if(!C){alert("Please log in to resend emails.");return}const E=i.startsWith("campaign#")?i.replace("campaign#",""):i;console.log("Normalized ID for resend:",E),h(!0);try{const D=await fetch(`https://kbm7qykb6f.execute-api.us-east-1.amazonaws.com/campaigns/${E}/resend`,{method:"POST",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"}});if(!D.ok){const V=await D.text();let K;try{K=JSON.parse(V)}catch{console.error("Response not JSON:",V),K={body:V}}throw alert(K.body||"Unable to resend campaign, please try again."),new Error("Error resending campaign")}const F=await D.json();alert(`Resend campaign created successfully: ${F.message}`),await v(),await m(),await y()}catch(D){console.error("Error resending campaign:",D),alert("Unable to resend campaign, please try again.")}finally{h(!1)}};return o?j.jsx("div",{children:"Loading..."}):n?j.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[j.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Campaign Details"}),j.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[j.jsxs("p",{children:[j.jsx("strong",{children:"Recipients:"})," ",n.recipients?Array.isArray(n.recipients)?n.recipients.join(", "):String(n.recipients):"No recipients"]}),j.jsxs("p",{children:[j.jsx("strong",{children:"Subject:"})," ",n.subject]}),j.jsxs("p",{children:[j.jsx("strong",{children:"Content:"})," ",n.body]}),j.jsxs("p",{children:[j.jsx("strong",{children:"Status:"})," ",n.status]}),j.jsxs("p",{children:[j.jsx("strong",{children:"Time:"})," ",(s==null?void 0:s.timestamp)||n.timestamp]})]}),j.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Email Response Tracking"}),j.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:e.length===0?j.jsx("p",{children:"No response data available."}):j.jsx("ul",{className:"list-disc list-inside",children:e.map((C,E)=>j.jsxs("li",{children:[C.event_type," - ",C.timestamp]},E))})}),j.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[j.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Campaign Statistics"}),s?j.jsxs(j.Fragment,{children:[j.jsxs("p",{children:[j.jsx("strong",{children:"Emails Sent:"})," ",s.total_sent||0]}),j.jsxs("p",{children:[j.jsx("strong",{children:"Open Rate:"})," ",s.open_rate?s.open_rate.toFixed(2):0,"%"]}),j.jsxs("p",{children:[j.jsx("strong",{children:"Click Rate:"})," ",s.click_rate?s.click_rate.toFixed(2):0,"%"]})]}):j.jsx("p",{children:"No statistics available."})]}),j.jsxs("div",{className:"mt-4 flex space-x-4",children:[j.jsxs(Tr,{to:"/campaigns",className:"text-blue-600 hover:underline",children:[" "," Back to List"]}),j.jsx("button",{onClick:_,disabled:c,className:`px-4 py-2 rounded flex items-center ${c?"bg-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:c?j.jsxs(j.Fragment,{children:[j.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[j.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),j.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-16 0z"})]}),"Sending..."]}):"Resend to Unopened"})]})]}):j.jsx("div",{children:"Campaign not found."})}function e5(){const{campaignId:i}=gk(),[n,t]=Nt.useState([]),[e,r]=Nt.useState(!0);return Nt.useEffect(()=>{(async()=>{try{const s=await(await fetch(`https://kbm7qykb6f.execute-api.us-east-1.amazonaws.com/campaigns/${i}/tracking`)).json();t(s.tracking||[])}catch(a){console.error("Error fetching tracking data:",a)}finally{r(!1)}})()},[i]),e?j.jsx("p",{className:"p-4",children:"Loading data..."}):j.jsxs("div",{className:"p-4",children:[j.jsx("h2",{className:"text-xl font-bold mb-4",children:"Email Response Status"}),n.length===0?j.jsx("p",{children:"No response data available for this campaign."}):j.jsxs("table",{className:"table-auto w-full border",children:[j.jsx("thead",{children:j.jsxs("tr",{className:"bg-gray-100",children:[j.jsx("th",{className:"border px-2 py-1",children:"Event Type"}),j.jsx("th",{className:"border px-2 py-1",children:"Recipient"}),j.jsx("th",{className:"border px-2 py-1",children:"Time"})]})}),j.jsx("tbody",{children:n.map((o,a)=>{var s;return j.jsxs("tr",{children:[j.jsx("td",{className:"border px-2 py-1",children:o.event_type}),j.jsx("td",{className:"border px-2 py-1",children:(s=o.recipients)==null?void 0:s.join(", ")}),j.jsx("td",{className:"border px-2 py-1",children:o.timestamp})]},a)})})]})]})}/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var n5=function(){function i(t){var e=t||{},r=e.ValidationData,o=e.Username,a=e.Password,s=e.AuthParameters,u=e.ClientMetadata;this.validationData=r||{},this.authParameters=s||{},this.clientMetadata=u||{},this.username=o,this.password=a}var n=i.prototype;return n.getUsername=function(){return this.username},n.getPassword=function(){return this.password},n.getValidationData=function(){return this.validationData},n.getAuthParameters=function(){return this.authParameters},n.getClientMetadata=function(){return this.clientMetadata},i}(),vx={},uv={},aO;function lD(){if(aO)return uv;aO=1,uv.byteLength=s,uv.toByteArray=c,uv.fromByteArray=m;for(var i=[],n=[],t=typeof Uint8Array<"u"?Uint8Array:Array,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=e.length;r<o;++r)i[r]=e[r],n[e.charCodeAt(r)]=r;n[45]=62,n[95]=63;function a(y){var _=y.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=y.indexOf("=");C===-1&&(C=_);var E=C===_?0:4-C%4;return[C,E]}function s(y){var _=a(y),C=_[0],E=_[1];return(C+E)*3/4-E}function u(y,_,C){return(_+C)*3/4-C}function c(y){var _,C=a(y),E=C[0],D=C[1],F=new t(u(y,E,D)),V=0,K=D>0?E-4:E,Z;for(Z=0;Z<K;Z+=4)_=n[y.charCodeAt(Z)]<<18|n[y.charCodeAt(Z+1)]<<12|n[y.charCodeAt(Z+2)]<<6|n[y.charCodeAt(Z+3)],F[V++]=_>>16&255,F[V++]=_>>8&255,F[V++]=_&255;return D===2&&(_=n[y.charCodeAt(Z)]<<2|n[y.charCodeAt(Z+1)]>>4,F[V++]=_&255),D===1&&(_=n[y.charCodeAt(Z)]<<10|n[y.charCodeAt(Z+1)]<<4|n[y.charCodeAt(Z+2)]>>2,F[V++]=_>>8&255,F[V++]=_&255),F}function h(y){return i[y>>18&63]+i[y>>12&63]+i[y>>6&63]+i[y&63]}function v(y,_,C){for(var E,D=[],F=_;F<C;F+=3)E=(y[F]<<16&16711680)+(y[F+1]<<8&65280)+(y[F+2]&255),D.push(h(E));return D.join("")}function m(y){for(var _,C=y.length,E=C%3,D=[],F=16383,V=0,K=C-E;V<K;V+=F)D.push(v(y,V,V+F>K?K:V+F));return E===1?(_=y[C-1],D.push(i[_>>2]+i[_<<4&63]+"==")):E===2&&(_=(y[C-2]<<8)+y[C-1],D.push(i[_>>10]+i[_>>4&63]+i[_<<2&63]+"=")),D.join("")}return uv}var qm={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var sO;function uD(){return sO||(sO=1,qm.read=function(i,n,t,e,r){var o,a,s=r*8-e-1,u=(1<<s)-1,c=u>>1,h=-7,v=t?r-1:0,m=t?-1:1,y=i[n+v];for(v+=m,o=y&(1<<-h)-1,y>>=-h,h+=s;h>0;o=o*256+i[n+v],v+=m,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=e;h>0;a=a*256+i[n+v],v+=m,h-=8);if(o===0)o=1-c;else{if(o===u)return a?NaN:(y?-1:1)*(1/0);a=a+Math.pow(2,e),o=o-c}return(y?-1:1)*a*Math.pow(2,o-e)},qm.write=function(i,n,t,e,r,o){var a,s,u,c=o*8-r-1,h=(1<<c)-1,v=h>>1,m=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=e?0:o-1,_=e?1:-1,C=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(s=isNaN(n)?1:0,a=h):(a=Math.floor(Math.log(n)/Math.LN2),n*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+v>=1?n+=m/u:n+=m*Math.pow(2,1-v),n*u>=2&&(a++,u/=2),a+v>=h?(s=0,a=h):a+v>=1?(s=(n*u-1)*Math.pow(2,r),a=a+v):(s=n*Math.pow(2,v-1)*Math.pow(2,r),a=0));r>=8;i[t+y]=s&255,y+=_,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;i[t+y]=a&255,y+=_,a/=256,c-=8);i[t+y-_]|=C*128}),qm}var gx,lO;function r5(){if(lO)return gx;lO=1;var i={}.toString;return gx=Array.isArray||function(n){return i.call(n)=="[object Array]"},gx}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var uO;function i5(){return uO||(uO=1,function(i){var n=lD(),t=uD(),e=r5();i.Buffer=s,i.SlowBuffer=D,i.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=iT.TYPED_ARRAY_SUPPORT!==void 0?iT.TYPED_ARRAY_SUPPORT:r(),i.kMaxLength=o();function r(){try{var P=new Uint8Array(1);return P.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},P.foo()===42&&typeof P.subarray=="function"&&P.subarray(1,1).byteLength===0}catch{return!1}}function o(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(P,k){if(o()<k)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(P=new Uint8Array(k),P.__proto__=s.prototype):(P===null&&(P=new s(k)),P.length=k),P}function s(P,k,N){if(!s.TYPED_ARRAY_SUPPORT&&!(this instanceof s))return new s(P,k,N);if(typeof P=="number"){if(typeof k=="string")throw new Error("If encoding is specified then the first argument must be a string");return v(this,P)}return u(this,P,k,N)}s.poolSize=8192,s._augment=function(P){return P.__proto__=s.prototype,P};function u(P,k,N,q){if(typeof k=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&k instanceof ArrayBuffer?_(P,k,N,q):typeof k=="string"?m(P,k,N):C(P,k)}s.from=function(P,k,N){return u(null,P,k,N)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0}));function c(P){if(typeof P!="number")throw new TypeError('"size" argument must be a number');if(P<0)throw new RangeError('"size" argument must not be negative')}function h(P,k,N,q){return c(k),k<=0?a(P,k):N!==void 0?typeof q=="string"?a(P,k).fill(N,q):a(P,k).fill(N):a(P,k)}s.alloc=function(P,k,N){return h(null,P,k,N)};function v(P,k){if(c(k),P=a(P,k<0?0:E(k)|0),!s.TYPED_ARRAY_SUPPORT)for(var N=0;N<k;++N)P[N]=0;return P}s.allocUnsafe=function(P){return v(null,P)},s.allocUnsafeSlow=function(P){return v(null,P)};function m(P,k,N){if((typeof N!="string"||N==="")&&(N="utf8"),!s.isEncoding(N))throw new TypeError('"encoding" must be a valid string encoding');var q=F(k,N)|0;P=a(P,q);var ut=P.write(k,N);return ut!==q&&(P=P.slice(0,ut)),P}function y(P,k){var N=k.length<0?0:E(k.length)|0;P=a(P,N);for(var q=0;q<N;q+=1)P[q]=k[q]&255;return P}function _(P,k,N,q){if(k.byteLength,N<0||k.byteLength<N)throw new RangeError("'offset' is out of bounds");if(k.byteLength<N+(q||0))throw new RangeError("'length' is out of bounds");return N===void 0&&q===void 0?k=new Uint8Array(k):q===void 0?k=new Uint8Array(k,N):k=new Uint8Array(k,N,q),s.TYPED_ARRAY_SUPPORT?(P=k,P.__proto__=s.prototype):P=y(P,k),P}function C(P,k){if(s.isBuffer(k)){var N=E(k.length)|0;return P=a(P,N),P.length===0||k.copy(P,0,0,N),P}if(k){if(typeof ArrayBuffer<"u"&&k.buffer instanceof ArrayBuffer||"length"in k)return typeof k.length!="number"||ie(k.length)?a(P,0):y(P,k);if(k.type==="Buffer"&&e(k.data))return y(P,k.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function E(P){if(P>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return P|0}function D(P){return+P!=P&&(P=0),s.alloc(+P)}s.isBuffer=function(k){return!!(k!=null&&k._isBuffer)},s.compare=function(k,N){if(!s.isBuffer(k)||!s.isBuffer(N))throw new TypeError("Arguments must be Buffers");if(k===N)return 0;for(var q=k.length,ut=N.length,Q=0,gt=Math.min(q,ut);Q<gt;++Q)if(k[Q]!==N[Q]){q=k[Q],ut=N[Q];break}return q<ut?-1:ut<q?1:0},s.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(k,N){if(!e(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return s.alloc(0);var q;if(N===void 0)for(N=0,q=0;q<k.length;++q)N+=k[q].length;var ut=s.allocUnsafe(N),Q=0;for(q=0;q<k.length;++q){var gt=k[q];if(!s.isBuffer(gt))throw new TypeError('"list" argument must be an Array of Buffers');gt.copy(ut,Q),Q+=gt.length}return ut};function F(P,k){if(s.isBuffer(P))return P.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(P)||P instanceof ArrayBuffer))return P.byteLength;typeof P!="string"&&(P=""+P);var N=P.length;if(N===0)return 0;for(var q=!1;;)switch(k){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":case void 0:return Oe(P).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N*2;case"hex":return N>>>1;case"base64":return Ut(P).length;default:if(q)return Oe(P).length;k=(""+k).toLowerCase(),q=!0}}s.byteLength=F;function V(P,k,N){var q=!1;if((k===void 0||k<0)&&(k=0),k>this.length||((N===void 0||N>this.length)&&(N=this.length),N<=0)||(N>>>=0,k>>>=0,N<=k))return"";for(P||(P="utf8");;)switch(P){case"hex":return zt(this,k,N);case"utf8":case"utf-8":return lt(this,k,N);case"ascii":return _t(this,k,N);case"latin1":case"binary":return Ot(this,k,N);case"base64":return ft(this,k,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pt(this,k,N);default:if(q)throw new TypeError("Unknown encoding: "+P);P=(P+"").toLowerCase(),q=!0}}s.prototype._isBuffer=!0;function K(P,k,N){var q=P[k];P[k]=P[N],P[N]=q}s.prototype.swap16=function(){var k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var N=0;N<k;N+=2)K(this,N,N+1);return this},s.prototype.swap32=function(){var k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var N=0;N<k;N+=4)K(this,N,N+3),K(this,N+1,N+2);return this},s.prototype.swap64=function(){var k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var N=0;N<k;N+=8)K(this,N,N+7),K(this,N+1,N+6),K(this,N+2,N+5),K(this,N+3,N+4);return this},s.prototype.toString=function(){var k=this.length|0;return k===0?"":arguments.length===0?lt(this,0,k):V.apply(this,arguments)},s.prototype.equals=function(k){if(!s.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:s.compare(this,k)===0},s.prototype.inspect=function(){var k="",N=i.INSPECT_MAX_BYTES;return this.length>0&&(k=this.toString("hex",0,N).match(/.{2}/g).join(" "),this.length>N&&(k+=" ... ")),"<Buffer "+k+">"},s.prototype.compare=function(k,N,q,ut,Q){if(!s.isBuffer(k))throw new TypeError("Argument must be a Buffer");if(N===void 0&&(N=0),q===void 0&&(q=k?k.length:0),ut===void 0&&(ut=0),Q===void 0&&(Q=this.length),N<0||q>k.length||ut<0||Q>this.length)throw new RangeError("out of range index");if(ut>=Q&&N>=q)return 0;if(ut>=Q)return-1;if(N>=q)return 1;if(N>>>=0,q>>>=0,ut>>>=0,Q>>>=0,this===k)return 0;for(var gt=Q-ut,Tt=q-N,he=Math.min(gt,Tt),X=this.slice(ut,Q),L=k.slice(N,q),A=0;A<he;++A)if(X[A]!==L[A]){gt=X[A],Tt=L[A];break}return gt<Tt?-1:Tt<gt?1:0};function Z(P,k,N,q,ut){if(P.length===0)return-1;if(typeof N=="string"?(q=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),N=+N,isNaN(N)&&(N=ut?0:P.length-1),N<0&&(N=P.length+N),N>=P.length){if(ut)return-1;N=P.length-1}else if(N<0)if(ut)N=0;else return-1;if(typeof k=="string"&&(k=s.from(k,q)),s.isBuffer(k))return k.length===0?-1:ct(P,k,N,q,ut);if(typeof k=="number")return k=k&255,s.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?ut?Uint8Array.prototype.indexOf.call(P,k,N):Uint8Array.prototype.lastIndexOf.call(P,k,N):ct(P,[k],N,q,ut);throw new TypeError("val must be string, number or Buffer")}function ct(P,k,N,q,ut){var Q=1,gt=P.length,Tt=k.length;if(q!==void 0&&(q=String(q).toLowerCase(),q==="ucs2"||q==="ucs-2"||q==="utf16le"||q==="utf-16le")){if(P.length<2||k.length<2)return-1;Q=2,gt/=2,Tt/=2,N/=2}function he(B,mt){return Q===1?B[mt]:B.readUInt16BE(mt*Q)}var X;if(ut){var L=-1;for(X=N;X<gt;X++)if(he(P,X)===he(k,L===-1?0:X-L)){if(L===-1&&(L=X),X-L+1===Tt)return L*Q}else L!==-1&&(X-=X-L),L=-1}else for(N+Tt>gt&&(N=gt-Tt),X=N;X>=0;X--){for(var A=!0,W=0;W<Tt;W++)if(he(P,X+W)!==he(k,W)){A=!1;break}if(A)return X}return-1}s.prototype.includes=function(k,N,q){return this.indexOf(k,N,q)!==-1},s.prototype.indexOf=function(k,N,q){return Z(this,k,N,q,!0)},s.prototype.lastIndexOf=function(k,N,q){return Z(this,k,N,q,!1)};function ht(P,k,N,q){N=Number(N)||0;var ut=P.length-N;q?(q=Number(q),q>ut&&(q=ut)):q=ut;var Q=k.length;if(Q%2!==0)throw new TypeError("Invalid hex string");q>Q/2&&(q=Q/2);for(var gt=0;gt<q;++gt){var Tt=parseInt(k.substr(gt*2,2),16);if(isNaN(Tt))return gt;P[N+gt]=Tt}return gt}function st(P,k,N,q){return ce(Oe(k,P.length-N),P,N,q)}function et(P,k,N,q){return ce(Ke(k),P,N,q)}function nt(P,k,N,q){return et(P,k,N,q)}function it(P,k,N,q){return ce(Ut(k),P,N,q)}function $(P,k,N,q){return ce(De(k,P.length-N),P,N,q)}s.prototype.write=function(k,N,q,ut){if(N===void 0)ut="utf8",q=this.length,N=0;else if(q===void 0&&typeof N=="string")ut=N,q=this.length,N=0;else if(isFinite(N))N=N|0,isFinite(q)?(q=q|0,ut===void 0&&(ut="utf8")):(ut=q,q=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Q=this.length-N;if((q===void 0||q>Q)&&(q=Q),k.length>0&&(q<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");ut||(ut="utf8");for(var gt=!1;;)switch(ut){case"hex":return ht(this,k,N,q);case"utf8":case"utf-8":return st(this,k,N,q);case"ascii":return et(this,k,N,q);case"latin1":case"binary":return nt(this,k,N,q);case"base64":return it(this,k,N,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,k,N,q);default:if(gt)throw new TypeError("Unknown encoding: "+ut);ut=(""+ut).toLowerCase(),gt=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ft(P,k,N){return k===0&&N===P.length?n.fromByteArray(P):n.fromByteArray(P.slice(k,N))}function lt(P,k,N){N=Math.min(P.length,N);for(var q=[],ut=k;ut<N;){var Q=P[ut],gt=null,Tt=Q>239?4:Q>223?3:Q>191?2:1;if(ut+Tt<=N){var he,X,L,A;switch(Tt){case 1:Q<128&&(gt=Q);break;case 2:he=P[ut+1],(he&192)===128&&(A=(Q&31)<<6|he&63,A>127&&(gt=A));break;case 3:he=P[ut+1],X=P[ut+2],(he&192)===128&&(X&192)===128&&(A=(Q&15)<<12|(he&63)<<6|X&63,A>2047&&(A<55296||A>57343)&&(gt=A));break;case 4:he=P[ut+1],X=P[ut+2],L=P[ut+3],(he&192)===128&&(X&192)===128&&(L&192)===128&&(A=(Q&15)<<18|(he&63)<<12|(X&63)<<6|L&63,A>65535&&A<1114112&&(gt=A))}}gt===null?(gt=65533,Tt=1):gt>65535&&(gt-=65536,q.push(gt>>>10&1023|55296),gt=56320|gt&1023),q.push(gt),ut+=Tt}return U(q)}var St=4096;function U(P){var k=P.length;if(k<=St)return String.fromCharCode.apply(String,P);for(var N="",q=0;q<k;)N+=String.fromCharCode.apply(String,P.slice(q,q+=St));return N}function _t(P,k,N){var q="";N=Math.min(P.length,N);for(var ut=k;ut<N;++ut)q+=String.fromCharCode(P[ut]&127);return q}function Ot(P,k,N){var q="";N=Math.min(P.length,N);for(var ut=k;ut<N;++ut)q+=String.fromCharCode(P[ut]);return q}function zt(P,k,N){var q=P.length;(!k||k<0)&&(k=0),(!N||N<0||N>q)&&(N=q);for(var ut="",Q=k;Q<N;++Q)ut+=Ee(P[Q]);return ut}function pt(P,k,N){for(var q=P.slice(k,N),ut="",Q=0;Q<q.length;Q+=2)ut+=String.fromCharCode(q[Q]+q[Q+1]*256);return ut}s.prototype.slice=function(k,N){var q=this.length;k=~~k,N=N===void 0?q:~~N,k<0?(k+=q,k<0&&(k=0)):k>q&&(k=q),N<0?(N+=q,N<0&&(N=0)):N>q&&(N=q),N<k&&(N=k);var ut;if(s.TYPED_ARRAY_SUPPORT)ut=this.subarray(k,N),ut.__proto__=s.prototype;else{var Q=N-k;ut=new s(Q,void 0);for(var gt=0;gt<Q;++gt)ut[gt]=this[gt+k]}return ut};function Dt(P,k,N){if(P%1!==0||P<0)throw new RangeError("offset is not uint");if(P+k>N)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUIntLE=function(k,N,q){k=k|0,N=N|0,q||Dt(k,N,this.length);for(var ut=this[k],Q=1,gt=0;++gt<N&&(Q*=256);)ut+=this[k+gt]*Q;return ut},s.prototype.readUIntBE=function(k,N,q){k=k|0,N=N|0,q||Dt(k,N,this.length);for(var ut=this[k+--N],Q=1;N>0&&(Q*=256);)ut+=this[k+--N]*Q;return ut},s.prototype.readUInt8=function(k,N){return N||Dt(k,1,this.length),this[k]},s.prototype.readUInt16LE=function(k,N){return N||Dt(k,2,this.length),this[k]|this[k+1]<<8},s.prototype.readUInt16BE=function(k,N){return N||Dt(k,2,this.length),this[k]<<8|this[k+1]},s.prototype.readUInt32LE=function(k,N){return N||Dt(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},s.prototype.readUInt32BE=function(k,N){return N||Dt(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},s.prototype.readIntLE=function(k,N,q){k=k|0,N=N|0,q||Dt(k,N,this.length);for(var ut=this[k],Q=1,gt=0;++gt<N&&(Q*=256);)ut+=this[k+gt]*Q;return Q*=128,ut>=Q&&(ut-=Math.pow(2,8*N)),ut},s.prototype.readIntBE=function(k,N,q){k=k|0,N=N|0,q||Dt(k,N,this.length);for(var ut=N,Q=1,gt=this[k+--ut];ut>0&&(Q*=256);)gt+=this[k+--ut]*Q;return Q*=128,gt>=Q&&(gt-=Math.pow(2,8*N)),gt},s.prototype.readInt8=function(k,N){return N||Dt(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},s.prototype.readInt16LE=function(k,N){N||Dt(k,2,this.length);var q=this[k]|this[k+1]<<8;return q&32768?q|4294901760:q},s.prototype.readInt16BE=function(k,N){N||Dt(k,2,this.length);var q=this[k+1]|this[k]<<8;return q&32768?q|4294901760:q},s.prototype.readInt32LE=function(k,N){return N||Dt(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},s.prototype.readInt32BE=function(k,N){return N||Dt(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},s.prototype.readFloatLE=function(k,N){return N||Dt(k,4,this.length),t.read(this,k,!0,23,4)},s.prototype.readFloatBE=function(k,N){return N||Dt(k,4,this.length),t.read(this,k,!1,23,4)},s.prototype.readDoubleLE=function(k,N){return N||Dt(k,8,this.length),t.read(this,k,!0,52,8)},s.prototype.readDoubleBE=function(k,N){return N||Dt(k,8,this.length),t.read(this,k,!1,52,8)};function yt(P,k,N,q,ut,Q){if(!s.isBuffer(P))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>ut||k<Q)throw new RangeError('"value" argument is out of bounds');if(N+q>P.length)throw new RangeError("Index out of range")}s.prototype.writeUIntLE=function(k,N,q,ut){if(k=+k,N=N|0,q=q|0,!ut){var Q=Math.pow(2,8*q)-1;yt(this,k,N,q,Q,0)}var gt=1,Tt=0;for(this[N]=k&255;++Tt<q&&(gt*=256);)this[N+Tt]=k/gt&255;return N+q},s.prototype.writeUIntBE=function(k,N,q,ut){if(k=+k,N=N|0,q=q|0,!ut){var Q=Math.pow(2,8*q)-1;yt(this,k,N,q,Q,0)}var gt=q-1,Tt=1;for(this[N+gt]=k&255;--gt>=0&&(Tt*=256);)this[N+gt]=k/Tt&255;return N+q},s.prototype.writeUInt8=function(k,N,q){return k=+k,N=N|0,q||yt(this,k,N,1,255,0),s.TYPED_ARRAY_SUPPORT||(k=Math.floor(k)),this[N]=k&255,N+1};function kt(P,k,N,q){k<0&&(k=65535+k+1);for(var ut=0,Q=Math.min(P.length-N,2);ut<Q;++ut)P[N+ut]=(k&255<<8*(q?ut:1-ut))>>>(q?ut:1-ut)*8}s.prototype.writeUInt16LE=function(k,N,q){return k=+k,N=N|0,q||yt(this,k,N,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[N]=k&255,this[N+1]=k>>>8):kt(this,k,N,!0),N+2},s.prototype.writeUInt16BE=function(k,N,q){return k=+k,N=N|0,q||yt(this,k,N,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[N]=k>>>8,this[N+1]=k&255):kt(this,k,N,!1),N+2};function Mt(P,k,N,q){k<0&&(k=4294967295+k+1);for(var ut=0,Q=Math.min(P.length-N,4);ut<Q;++ut)P[N+ut]=k>>>(q?ut:3-ut)*8&255}s.prototype.writeUInt32LE=function(k,N,q){return k=+k,N=N|0,q||yt(this,k,N,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[N+3]=k>>>24,this[N+2]=k>>>16,this[N+1]=k>>>8,this[N]=k&255):Mt(this,k,N,!0),N+4},s.prototype.writeUInt32BE=function(k,N,q){return k=+k,N=N|0,q||yt(this,k,N,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[N]=k>>>24,this[N+1]=k>>>16,this[N+2]=k>>>8,this[N+3]=k&255):Mt(this,k,N,!1),N+4},s.prototype.writeIntLE=function(k,N,q,ut){if(k=+k,N=N|0,!ut){var Q=Math.pow(2,8*q-1);yt(this,k,N,q,Q-1,-Q)}var gt=0,Tt=1,he=0;for(this[N]=k&255;++gt<q&&(Tt*=256);)k<0&&he===0&&this[N+gt-1]!==0&&(he=1),this[N+gt]=(k/Tt>>0)-he&255;return N+q},s.prototype.writeIntBE=function(k,N,q,ut){if(k=+k,N=N|0,!ut){var Q=Math.pow(2,8*q-1);yt(this,k,N,q,Q-1,-Q)}var gt=q-1,Tt=1,he=0;for(this[N+gt]=k&255;--gt>=0&&(Tt*=256);)k<0&&he===0&&this[N+gt+1]!==0&&(he=1),this[N+gt]=(k/Tt>>0)-he&255;return N+q},s.prototype.writeInt8=function(k,N,q){return k=+k,N=N|0,q||yt(this,k,N,1,127,-128),s.TYPED_ARRAY_SUPPORT||(k=Math.floor(k)),k<0&&(k=255+k+1),this[N]=k&255,N+1},s.prototype.writeInt16LE=function(k,N,q){return k=+k,N=N|0,q||yt(this,k,N,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[N]=k&255,this[N+1]=k>>>8):kt(this,k,N,!0),N+2},s.prototype.writeInt16BE=function(k,N,q){return k=+k,N=N|0,q||yt(this,k,N,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[N]=k>>>8,this[N+1]=k&255):kt(this,k,N,!1),N+2},s.prototype.writeInt32LE=function(k,N,q){return k=+k,N=N|0,q||yt(this,k,N,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[N]=k&255,this[N+1]=k>>>8,this[N+2]=k>>>16,this[N+3]=k>>>24):Mt(this,k,N,!0),N+4},s.prototype.writeInt32BE=function(k,N,q){return k=+k,N=N|0,q||yt(this,k,N,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),s.TYPED_ARRAY_SUPPORT?(this[N]=k>>>24,this[N+1]=k>>>16,this[N+2]=k>>>8,this[N+3]=k&255):Mt(this,k,N,!1),N+4};function Kt(P,k,N,q,ut,Q){if(N+q>P.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function Xt(P,k,N,q,ut){return ut||Kt(P,k,N,4),t.write(P,k,N,q,23,4),N+4}s.prototype.writeFloatLE=function(k,N,q){return Xt(this,k,N,!0,q)},s.prototype.writeFloatBE=function(k,N,q){return Xt(this,k,N,!1,q)};function Qt(P,k,N,q,ut){return ut||Kt(P,k,N,8),t.write(P,k,N,q,52,8),N+8}s.prototype.writeDoubleLE=function(k,N,q){return Qt(this,k,N,!0,q)},s.prototype.writeDoubleBE=function(k,N,q){return Qt(this,k,N,!1,q)},s.prototype.copy=function(k,N,q,ut){if(q||(q=0),!ut&&ut!==0&&(ut=this.length),N>=k.length&&(N=k.length),N||(N=0),ut>0&&ut<q&&(ut=q),ut===q||k.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("sourceStart out of bounds");if(ut<0)throw new RangeError("sourceEnd out of bounds");ut>this.length&&(ut=this.length),k.length-N<ut-q&&(ut=k.length-N+q);var Q=ut-q,gt;if(this===k&&q<N&&N<ut)for(gt=Q-1;gt>=0;--gt)k[gt+N]=this[gt+q];else if(Q<1e3||!s.TYPED_ARRAY_SUPPORT)for(gt=0;gt<Q;++gt)k[gt+N]=this[gt+q];else Uint8Array.prototype.set.call(k,this.subarray(q,q+Q),N);return Q},s.prototype.fill=function(k,N,q,ut){if(typeof k=="string"){if(typeof N=="string"?(ut=N,N=0,q=this.length):typeof q=="string"&&(ut=q,q=this.length),k.length===1){var Q=k.charCodeAt(0);Q<256&&(k=Q)}if(ut!==void 0&&typeof ut!="string")throw new TypeError("encoding must be a string");if(typeof ut=="string"&&!s.isEncoding(ut))throw new TypeError("Unknown encoding: "+ut)}else typeof k=="number"&&(k=k&255);if(N<0||this.length<N||this.length<q)throw new RangeError("Out of range index");if(q<=N)return this;N=N>>>0,q=q===void 0?this.length:q>>>0,k||(k=0);var gt;if(typeof k=="number")for(gt=N;gt<q;++gt)this[gt]=k;else{var Tt=s.isBuffer(k)?k:Oe(new s(k,ut).toString()),he=Tt.length;for(gt=0;gt<q-N;++gt)this[gt+N]=Tt[gt%he]}return this};var ne=/[^+\/0-9A-Za-z-_]/g;function be(P){if(P=Pe(P).replace(ne,""),P.length<2)return"";for(;P.length%4!==0;)P=P+"=";return P}function Pe(P){return P.trim?P.trim():P.replace(/^\s+|\s+$/g,"")}function Ee(P){return P<16?"0"+P.toString(16):P.toString(16)}function Oe(P,k){k=k||1/0;for(var N,q=P.length,ut=null,Q=[],gt=0;gt<q;++gt){if(N=P.charCodeAt(gt),N>55295&&N<57344){if(!ut){if(N>56319){(k-=3)>-1&&Q.push(239,191,189);continue}else if(gt+1===q){(k-=3)>-1&&Q.push(239,191,189);continue}ut=N;continue}if(N<56320){(k-=3)>-1&&Q.push(239,191,189),ut=N;continue}N=(ut-55296<<10|N-56320)+65536}else ut&&(k-=3)>-1&&Q.push(239,191,189);if(ut=null,N<128){if((k-=1)<0)break;Q.push(N)}else if(N<2048){if((k-=2)<0)break;Q.push(N>>6|192,N&63|128)}else if(N<65536){if((k-=3)<0)break;Q.push(N>>12|224,N>>6&63|128,N&63|128)}else if(N<1114112){if((k-=4)<0)break;Q.push(N>>18|240,N>>12&63|128,N>>6&63|128,N&63|128)}else throw new Error("Invalid code point")}return Q}function Ke(P){for(var k=[],N=0;N<P.length;++N)k.push(P.charCodeAt(N)&255);return k}function De(P,k){for(var N,q,ut,Q=[],gt=0;gt<P.length&&!((k-=2)<0);++gt)N=P.charCodeAt(gt),q=N>>8,ut=N%256,Q.push(ut),Q.push(q);return Q}function Ut(P){return n.toByteArray(be(P))}function ce(P,k,N,q){for(var ut=0;ut<q&&!(ut+N>=k.length||ut>=P.length);++ut)k[ut+N]=P[ut];return ut}function ie(P){return P!==P}}(vx)),vx}var gr=i5();const mx=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};var es;typeof window<"u"&&window.crypto&&(es=window.crypto);!es&&typeof window<"u"&&window.msCrypto&&(es=window.msCrypto);!es&&typeof mx<"u"&&mx.crypto&&(es=mx.crypto);if(!es&&typeof require=="function")try{es=require("crypto")}catch{}function o5(){if(es){if(typeof es.getRandomValues=="function")try{return es.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof es.randomBytes=="function")try{return es.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")}function a5(i){for(var n=i.words,t=i.sigBytes,e=[],r=0;r<t;r++){var o=n[r>>>2]>>>24-r%4*8&255;e.push((o>>>4).toString(16)),e.push((o&15).toString(16))}return e.join("")}var s5=function(){function i(t,e){t=this.words=t||[],e!=null?this.sigBytes=e:this.sigBytes=t.length*4}var n=i.prototype;return n.random=function(e){for(var r=[],o=0;o<e;o+=4)r.push(o5());return new i(r,e)},n.toString=function(){return a5(this)},i}(),yx={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var WS=function(i,n){return WS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},WS(i,n)};function l5(i,n){WS(i,n);function t(){this.constructor=i}i.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var qS=function(){return qS=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},qS.apply(this,arguments)};function u5(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(i);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]]);return t}function c5(i,n,t,e){var r=arguments.length,o=r<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,n,t,e);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(r<3?a(o):r>3?a(n,t,o):a(n,t))||o);return r>3&&o&&Object.defineProperty(n,t,o),o}function f5(i,n){return function(t,e){n(t,e,i)}}function d5(i,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,n)}function h5(i,n,t,e){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(h){try{c(e.next(h))}catch(v){a(v)}}function u(h){try{c(e.throw(h))}catch(v){a(v)}}function c(h){h.done?o(h.value):r(h.value).then(s,u)}c((e=e.apply(i,n||[])).next())})}function p5(i,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(h){return u([c,h])}}function u(c){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,r&&(o=c[0]&2?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=n.call(i,t)}catch(h){c=[6,h],r=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function v5(i,n,t,e){e===void 0&&(e=t),i[e]=n[t]}function g5(i,n){for(var t in i)t!=="default"&&!n.hasOwnProperty(t)&&(n[t]=i[t])}function KS(i){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&i[n],e=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&e>=i.length&&(i=void 0),{value:i&&i[e++],done:!i}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function cD(i,n){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var e=t.call(i),r,o=[],a;try{for(;(n===void 0||n-- >0)&&!(r=e.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(t=e.return)&&t.call(e)}finally{if(a)throw a.error}}return o}function m5(){for(var i=[],n=0;n<arguments.length;n++)i=i.concat(cD(arguments[n]));return i}function y5(){for(var i=0,n=0,t=arguments.length;n<t;n++)i+=arguments[n].length;for(var e=Array(i),r=0,n=0;n<t;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,r++)e[r]=o[a];return e}function cg(i){return this instanceof cg?(this.v=i,this):new cg(i)}function b5(i,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t.apply(i,n||[]),r,o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(m){e[m]&&(r[m]=function(y){return new Promise(function(_,C){o.push([m,y,_,C])>1||s(m,y)})})}function s(m,y){try{u(e[m](y))}catch(_){v(o[0][3],_)}}function u(m){m.value instanceof cg?Promise.resolve(m.value.v).then(c,h):v(o[0][2],m)}function c(m){s("next",m)}function h(m){s("throw",m)}function v(m,y){m(y),o.shift(),o.length&&s(o[0][0],o[0][1])}}function w5(i){var n,t;return n={},e("next"),e("throw",function(r){throw r}),e("return"),n[Symbol.iterator]=function(){return this},n;function e(r,o){n[r]=i[r]?function(a){return(t=!t)?{value:cg(i[r](a)),done:r==="return"}:o?o(a):a}:o}}function x5(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i[Symbol.asyncIterator],t;return n?n.call(i):(i=typeof KS=="function"?KS(i):i[Symbol.iterator](),t={},e("next"),e("throw"),e("return"),t[Symbol.asyncIterator]=function(){return this},t);function e(o){t[o]=i[o]&&function(a){return new Promise(function(s,u){a=i[o](a),r(s,u,a.done,a.value)})}}function r(o,a,s,u){Promise.resolve(u).then(function(c){o({value:c,done:s})},a)}}function S5(i,n){return Object.defineProperty?Object.defineProperty(i,"raw",{value:n}):i.raw=n,i}function _5(i){if(i&&i.__esModule)return i;var n={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(n[t]=i[t]);return n.default=i,n}function C5(i){return i&&i.__esModule?i:{default:i}}function T5(i,n){if(!n.has(i))throw new TypeError("attempted to get private field on non-instance");return n.get(i)}function E5(i,n,t){if(!n.has(i))throw new TypeError("attempted to set private field on non-instance");return n.set(i,t),t}const O5=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return qS},__asyncDelegator:w5,__asyncGenerator:b5,__asyncValues:x5,__await:cg,__awaiter:h5,__classPrivateFieldGet:T5,__classPrivateFieldSet:E5,__createBinding:v5,__decorate:c5,__exportStar:g5,__extends:l5,__generator:p5,__importDefault:C5,__importStar:_5,__makeTemplateObject:S5,__metadata:d5,__param:f5,__read:cD,__rest:u5,__spread:m5,__spreadArrays:y5,__values:KS},Symbol.toStringTag,{value:"Module"})),fD=B_(O5);var cv={},Ta={},cO;function dD(){return cO||(cO=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.MAX_HASHABLE_LENGTH=Ta.INIT=Ta.KEY=Ta.DIGEST_LENGTH=Ta.BLOCK_SIZE=void 0,Ta.BLOCK_SIZE=64,Ta.DIGEST_LENGTH=32,Ta.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ta.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Ta.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1),Ta}var fv={},fO;function A5(){if(fO)return fv;fO=1,Object.defineProperty(fv,"__esModule",{value:!0}),fv.RawSha256=void 0;var i=dD(),n=function(){function t(){this.state=Int32Array.from(i.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,o=e.byteLength;if(this.bytesHashed+=o,this.bytesHashed*8>i.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;o>0;)this.buffer[this.bufferLength++]=e[r++],o--,this.bufferLength===i.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),o=this.bufferLength;if(r.setUint8(this.bufferLength++,128),o%i.BLOCK_SIZE>=i.BLOCK_SIZE-8){for(var a=this.bufferLength;a<i.BLOCK_SIZE;a++)r.setUint8(a,0);this.hashBuffer(),this.bufferLength=0}for(var a=this.bufferLength;a<i.BLOCK_SIZE-8;a++)r.setUint8(a,0);r.setUint32(i.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),r.setUint32(i.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}for(var s=new Uint8Array(i.DIGEST_LENGTH),a=0;a<8;a++)s[a*4]=this.state[a]>>>24&255,s[a*4+1]=this.state[a]>>>16&255,s[a*4+2]=this.state[a]>>>8&255,s[a*4+3]=this.state[a]>>>0&255;return s},t.prototype.hashBuffer=function(){for(var e=this,r=e.buffer,o=e.state,a=o[0],s=o[1],u=o[2],c=o[3],h=o[4],v=o[5],m=o[6],y=o[7],_=0;_<i.BLOCK_SIZE;_++){if(_<16)this.temp[_]=(r[_*4]&255)<<24|(r[_*4+1]&255)<<16|(r[_*4+2]&255)<<8|r[_*4+3]&255;else{var C=this.temp[_-2],E=(C>>>17|C<<15)^(C>>>19|C<<13)^C>>>10;C=this.temp[_-15];var D=(C>>>7|C<<25)^(C>>>18|C<<14)^C>>>3;this.temp[_]=(E+this.temp[_-7]|0)+(D+this.temp[_-16]|0)}var F=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&v^~h&m)|0)+(y+(i.KEY[_]+this.temp[_]|0)|0)|0,V=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&s^a&u^s&u)|0;y=m,m=v,v=h,h=c+F|0,c=u,u=s,s=a,a=F+V|0}o[0]+=a,o[1]+=s,o[2]+=u,o[3]+=c,o[4]+=h,o[5]+=v,o[6]+=m,o[7]+=y},t}();return fv.RawSha256=n,fv}var bx={},wx={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var dO;function k5(){return dO||(dO=1,function(i){const n=lD(),t=uD(),e=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=s,i.SlowBuffer=F,i.INSPECT_MAX_BYTES=50;const r=2147483647;i.kMaxLength=r,s.TYPED_ARRAY_SUPPORT=o(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const X=new Uint8Array(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,Uint8Array.prototype),Object.setPrototypeOf(X,L),X.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function a(X){if(X>r)throw new RangeError('The value "'+X+'" is invalid for option "size"');const L=new Uint8Array(X);return Object.setPrototypeOf(L,s.prototype),L}function s(X,L,A){if(typeof X=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(X)}return u(X,L,A)}s.poolSize=8192;function u(X,L,A){if(typeof X=="string")return m(X,L);if(ArrayBuffer.isView(X))return _(X);if(X==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof X);if(ut(X,ArrayBuffer)||X&&ut(X.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ut(X,SharedArrayBuffer)||X&&ut(X.buffer,SharedArrayBuffer)))return C(X,L,A);if(typeof X=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const W=X.valueOf&&X.valueOf();if(W!=null&&W!==X)return s.from(W,L,A);const B=E(X);if(B)return B;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof X[Symbol.toPrimitive]=="function")return s.from(X[Symbol.toPrimitive]("string"),L,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof X)}s.from=function(X,L,A){return u(X,L,A)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function c(X){if(typeof X!="number")throw new TypeError('"size" argument must be of type number');if(X<0)throw new RangeError('The value "'+X+'" is invalid for option "size"')}function h(X,L,A){return c(X),X<=0?a(X):L!==void 0?typeof A=="string"?a(X).fill(L,A):a(X).fill(L):a(X)}s.alloc=function(X,L,A){return h(X,L,A)};function v(X){return c(X),a(X<0?0:D(X)|0)}s.allocUnsafe=function(X){return v(X)},s.allocUnsafeSlow=function(X){return v(X)};function m(X,L){if((typeof L!="string"||L==="")&&(L="utf8"),!s.isEncoding(L))throw new TypeError("Unknown encoding: "+L);const A=V(X,L)|0;let W=a(A);const B=W.write(X,L);return B!==A&&(W=W.slice(0,B)),W}function y(X){const L=X.length<0?0:D(X.length)|0,A=a(L);for(let W=0;W<L;W+=1)A[W]=X[W]&255;return A}function _(X){if(ut(X,Uint8Array)){const L=new Uint8Array(X);return C(L.buffer,L.byteOffset,L.byteLength)}return y(X)}function C(X,L,A){if(L<0||X.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(X.byteLength<L+(A||0))throw new RangeError('"length" is outside of buffer bounds');let W;return L===void 0&&A===void 0?W=new Uint8Array(X):A===void 0?W=new Uint8Array(X,L):W=new Uint8Array(X,L,A),Object.setPrototypeOf(W,s.prototype),W}function E(X){if(s.isBuffer(X)){const L=D(X.length)|0,A=a(L);return A.length===0||X.copy(A,0,0,L),A}if(X.length!==void 0)return typeof X.length!="number"||Q(X.length)?a(0):y(X);if(X.type==="Buffer"&&Array.isArray(X.data))return y(X.data)}function D(X){if(X>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return X|0}function F(X){return+X!=X&&(X=0),s.alloc(+X)}s.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==s.prototype},s.compare=function(L,A){if(ut(L,Uint8Array)&&(L=s.from(L,L.offset,L.byteLength)),ut(A,Uint8Array)&&(A=s.from(A,A.offset,A.byteLength)),!s.isBuffer(L)||!s.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===A)return 0;let W=L.length,B=A.length;for(let mt=0,dt=Math.min(W,B);mt<dt;++mt)if(L[mt]!==A[mt]){W=L[mt],B=A[mt];break}return W<B?-1:B<W?1:0},s.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(L,A){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return s.alloc(0);let W;if(A===void 0)for(A=0,W=0;W<L.length;++W)A+=L[W].length;const B=s.allocUnsafe(A);let mt=0;for(W=0;W<L.length;++W){let dt=L[W];if(ut(dt,Uint8Array))mt+dt.length>B.length?(s.isBuffer(dt)||(dt=s.from(dt)),dt.copy(B,mt)):Uint8Array.prototype.set.call(B,dt,mt);else if(s.isBuffer(dt))dt.copy(B,mt);else throw new TypeError('"list" argument must be an Array of Buffers');mt+=dt.length}return B};function V(X,L){if(s.isBuffer(X))return X.length;if(ArrayBuffer.isView(X)||ut(X,ArrayBuffer))return X.byteLength;if(typeof X!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof X);const A=X.length,W=arguments.length>2&&arguments[2]===!0;if(!W&&A===0)return 0;let B=!1;for(;;)switch(L){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return ie(X).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A*2;case"hex":return A>>>1;case"base64":return N(X).length;default:if(B)return W?-1:ie(X).length;L=(""+L).toLowerCase(),B=!0}}s.byteLength=V;function K(X,L,A){let W=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((A===void 0||A>this.length)&&(A=this.length),A<=0)||(A>>>=0,L>>>=0,A<=L))return"";for(X||(X="utf8");;)switch(X){case"hex":return zt(this,L,A);case"utf8":case"utf-8":return lt(this,L,A);case"ascii":return _t(this,L,A);case"latin1":case"binary":return Ot(this,L,A);case"base64":return ft(this,L,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pt(this,L,A);default:if(W)throw new TypeError("Unknown encoding: "+X);X=(X+"").toLowerCase(),W=!0}}s.prototype._isBuffer=!0;function Z(X,L,A){const W=X[L];X[L]=X[A],X[A]=W}s.prototype.swap16=function(){const L=this.length;if(L%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let A=0;A<L;A+=2)Z(this,A,A+1);return this},s.prototype.swap32=function(){const L=this.length;if(L%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<L;A+=4)Z(this,A,A+3),Z(this,A+1,A+2);return this},s.prototype.swap64=function(){const L=this.length;if(L%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let A=0;A<L;A+=8)Z(this,A,A+7),Z(this,A+1,A+6),Z(this,A+2,A+5),Z(this,A+3,A+4);return this},s.prototype.toString=function(){const L=this.length;return L===0?"":arguments.length===0?lt(this,0,L):K.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(L){if(!s.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L?!0:s.compare(this,L)===0},s.prototype.inspect=function(){let L="";const A=i.INSPECT_MAX_BYTES;return L=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(L+=" ... "),"<Buffer "+L+">"},e&&(s.prototype[e]=s.prototype.inspect),s.prototype.compare=function(L,A,W,B,mt){if(ut(L,Uint8Array)&&(L=s.from(L,L.offset,L.byteLength)),!s.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(A===void 0&&(A=0),W===void 0&&(W=L?L.length:0),B===void 0&&(B=0),mt===void 0&&(mt=this.length),A<0||W>L.length||B<0||mt>this.length)throw new RangeError("out of range index");if(B>=mt&&A>=W)return 0;if(B>=mt)return-1;if(A>=W)return 1;if(A>>>=0,W>>>=0,B>>>=0,mt>>>=0,this===L)return 0;let dt=mt-B,qt=W-A;const fe=Math.min(dt,qt),de=this.slice(B,mt),ae=L.slice(A,W);for(let xe=0;xe<fe;++xe)if(de[xe]!==ae[xe]){dt=de[xe],qt=ae[xe];break}return dt<qt?-1:qt<dt?1:0};function ct(X,L,A,W,B){if(X.length===0)return-1;if(typeof A=="string"?(W=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),A=+A,Q(A)&&(A=B?0:X.length-1),A<0&&(A=X.length+A),A>=X.length){if(B)return-1;A=X.length-1}else if(A<0)if(B)A=0;else return-1;if(typeof L=="string"&&(L=s.from(L,W)),s.isBuffer(L))return L.length===0?-1:ht(X,L,A,W,B);if(typeof L=="number")return L=L&255,typeof Uint8Array.prototype.indexOf=="function"?B?Uint8Array.prototype.indexOf.call(X,L,A):Uint8Array.prototype.lastIndexOf.call(X,L,A):ht(X,[L],A,W,B);throw new TypeError("val must be string, number or Buffer")}function ht(X,L,A,W,B){let mt=1,dt=X.length,qt=L.length;if(W!==void 0&&(W=String(W).toLowerCase(),W==="ucs2"||W==="ucs-2"||W==="utf16le"||W==="utf-16le")){if(X.length<2||L.length<2)return-1;mt=2,dt/=2,qt/=2,A/=2}function fe(ae,xe){return mt===1?ae[xe]:ae.readUInt16BE(xe*mt)}let de;if(B){let ae=-1;for(de=A;de<dt;de++)if(fe(X,de)===fe(L,ae===-1?0:de-ae)){if(ae===-1&&(ae=de),de-ae+1===qt)return ae*mt}else ae!==-1&&(de-=de-ae),ae=-1}else for(A+qt>dt&&(A=dt-qt),de=A;de>=0;de--){let ae=!0;for(let xe=0;xe<qt;xe++)if(fe(X,de+xe)!==fe(L,xe)){ae=!1;break}if(ae)return de}return-1}s.prototype.includes=function(L,A,W){return this.indexOf(L,A,W)!==-1},s.prototype.indexOf=function(L,A,W){return ct(this,L,A,W,!0)},s.prototype.lastIndexOf=function(L,A,W){return ct(this,L,A,W,!1)};function st(X,L,A,W){A=Number(A)||0;const B=X.length-A;W?(W=Number(W),W>B&&(W=B)):W=B;const mt=L.length;W>mt/2&&(W=mt/2);let dt;for(dt=0;dt<W;++dt){const qt=parseInt(L.substr(dt*2,2),16);if(Q(qt))return dt;X[A+dt]=qt}return dt}function et(X,L,A,W){return q(ie(L,X.length-A),X,A,W)}function nt(X,L,A,W){return q(P(L),X,A,W)}function it(X,L,A,W){return q(N(L),X,A,W)}function $(X,L,A,W){return q(k(L,X.length-A),X,A,W)}s.prototype.write=function(L,A,W,B){if(A===void 0)B="utf8",W=this.length,A=0;else if(W===void 0&&typeof A=="string")B=A,W=this.length,A=0;else if(isFinite(A))A=A>>>0,isFinite(W)?(W=W>>>0,B===void 0&&(B="utf8")):(B=W,W=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const mt=this.length-A;if((W===void 0||W>mt)&&(W=mt),L.length>0&&(W<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");let dt=!1;for(;;)switch(B){case"hex":return st(this,L,A,W);case"utf8":case"utf-8":return et(this,L,A,W);case"ascii":case"latin1":case"binary":return nt(this,L,A,W);case"base64":return it(this,L,A,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,L,A,W);default:if(dt)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),dt=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ft(X,L,A){return L===0&&A===X.length?n.fromByteArray(X):n.fromByteArray(X.slice(L,A))}function lt(X,L,A){A=Math.min(X.length,A);const W=[];let B=L;for(;B<A;){const mt=X[B];let dt=null,qt=mt>239?4:mt>223?3:mt>191?2:1;if(B+qt<=A){let fe,de,ae,xe;switch(qt){case 1:mt<128&&(dt=mt);break;case 2:fe=X[B+1],(fe&192)===128&&(xe=(mt&31)<<6|fe&63,xe>127&&(dt=xe));break;case 3:fe=X[B+1],de=X[B+2],(fe&192)===128&&(de&192)===128&&(xe=(mt&15)<<12|(fe&63)<<6|de&63,xe>2047&&(xe<55296||xe>57343)&&(dt=xe));break;case 4:fe=X[B+1],de=X[B+2],ae=X[B+3],(fe&192)===128&&(de&192)===128&&(ae&192)===128&&(xe=(mt&15)<<18|(fe&63)<<12|(de&63)<<6|ae&63,xe>65535&&xe<1114112&&(dt=xe))}}dt===null?(dt=65533,qt=1):dt>65535&&(dt-=65536,W.push(dt>>>10&1023|55296),dt=56320|dt&1023),W.push(dt),B+=qt}return U(W)}const St=4096;function U(X){const L=X.length;if(L<=St)return String.fromCharCode.apply(String,X);let A="",W=0;for(;W<L;)A+=String.fromCharCode.apply(String,X.slice(W,W+=St));return A}function _t(X,L,A){let W="";A=Math.min(X.length,A);for(let B=L;B<A;++B)W+=String.fromCharCode(X[B]&127);return W}function Ot(X,L,A){let W="";A=Math.min(X.length,A);for(let B=L;B<A;++B)W+=String.fromCharCode(X[B]);return W}function zt(X,L,A){const W=X.length;(!L||L<0)&&(L=0),(!A||A<0||A>W)&&(A=W);let B="";for(let mt=L;mt<A;++mt)B+=gt[X[mt]];return B}function pt(X,L,A){const W=X.slice(L,A);let B="";for(let mt=0;mt<W.length-1;mt+=2)B+=String.fromCharCode(W[mt]+W[mt+1]*256);return B}s.prototype.slice=function(L,A){const W=this.length;L=~~L,A=A===void 0?W:~~A,L<0?(L+=W,L<0&&(L=0)):L>W&&(L=W),A<0?(A+=W,A<0&&(A=0)):A>W&&(A=W),A<L&&(A=L);const B=this.subarray(L,A);return Object.setPrototypeOf(B,s.prototype),B};function Dt(X,L,A){if(X%1!==0||X<0)throw new RangeError("offset is not uint");if(X+L>A)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(L,A,W){L=L>>>0,A=A>>>0,W||Dt(L,A,this.length);let B=this[L],mt=1,dt=0;for(;++dt<A&&(mt*=256);)B+=this[L+dt]*mt;return B},s.prototype.readUintBE=s.prototype.readUIntBE=function(L,A,W){L=L>>>0,A=A>>>0,W||Dt(L,A,this.length);let B=this[L+--A],mt=1;for(;A>0&&(mt*=256);)B+=this[L+--A]*mt;return B},s.prototype.readUint8=s.prototype.readUInt8=function(L,A){return L=L>>>0,A||Dt(L,1,this.length),this[L]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(L,A){return L=L>>>0,A||Dt(L,2,this.length),this[L]|this[L+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(L,A){return L=L>>>0,A||Dt(L,2,this.length),this[L]<<8|this[L+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(L,A){return L=L>>>0,A||Dt(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+this[L+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(L,A){return L=L>>>0,A||Dt(L,4,this.length),this[L]*16777216+(this[L+1]<<16|this[L+2]<<8|this[L+3])},s.prototype.readBigUInt64LE=Tt(function(L){L=L>>>0,Ke(L,"offset");const A=this[L],W=this[L+7];(A===void 0||W===void 0)&&De(L,this.length-8);const B=A+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24,mt=this[++L]+this[++L]*2**8+this[++L]*2**16+W*2**24;return BigInt(B)+(BigInt(mt)<<BigInt(32))}),s.prototype.readBigUInt64BE=Tt(function(L){L=L>>>0,Ke(L,"offset");const A=this[L],W=this[L+7];(A===void 0||W===void 0)&&De(L,this.length-8);const B=A*2**24+this[++L]*2**16+this[++L]*2**8+this[++L],mt=this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+W;return(BigInt(B)<<BigInt(32))+BigInt(mt)}),s.prototype.readIntLE=function(L,A,W){L=L>>>0,A=A>>>0,W||Dt(L,A,this.length);let B=this[L],mt=1,dt=0;for(;++dt<A&&(mt*=256);)B+=this[L+dt]*mt;return mt*=128,B>=mt&&(B-=Math.pow(2,8*A)),B},s.prototype.readIntBE=function(L,A,W){L=L>>>0,A=A>>>0,W||Dt(L,A,this.length);let B=A,mt=1,dt=this[L+--B];for(;B>0&&(mt*=256);)dt+=this[L+--B]*mt;return mt*=128,dt>=mt&&(dt-=Math.pow(2,8*A)),dt},s.prototype.readInt8=function(L,A){return L=L>>>0,A||Dt(L,1,this.length),this[L]&128?(255-this[L]+1)*-1:this[L]},s.prototype.readInt16LE=function(L,A){L=L>>>0,A||Dt(L,2,this.length);const W=this[L]|this[L+1]<<8;return W&32768?W|4294901760:W},s.prototype.readInt16BE=function(L,A){L=L>>>0,A||Dt(L,2,this.length);const W=this[L+1]|this[L]<<8;return W&32768?W|4294901760:W},s.prototype.readInt32LE=function(L,A){return L=L>>>0,A||Dt(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},s.prototype.readInt32BE=function(L,A){return L=L>>>0,A||Dt(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},s.prototype.readBigInt64LE=Tt(function(L){L=L>>>0,Ke(L,"offset");const A=this[L],W=this[L+7];(A===void 0||W===void 0)&&De(L,this.length-8);const B=this[L+4]+this[L+5]*2**8+this[L+6]*2**16+(W<<24);return(BigInt(B)<<BigInt(32))+BigInt(A+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24)}),s.prototype.readBigInt64BE=Tt(function(L){L=L>>>0,Ke(L,"offset");const A=this[L],W=this[L+7];(A===void 0||W===void 0)&&De(L,this.length-8);const B=(A<<24)+this[++L]*2**16+this[++L]*2**8+this[++L];return(BigInt(B)<<BigInt(32))+BigInt(this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+W)}),s.prototype.readFloatLE=function(L,A){return L=L>>>0,A||Dt(L,4,this.length),t.read(this,L,!0,23,4)},s.prototype.readFloatBE=function(L,A){return L=L>>>0,A||Dt(L,4,this.length),t.read(this,L,!1,23,4)},s.prototype.readDoubleLE=function(L,A){return L=L>>>0,A||Dt(L,8,this.length),t.read(this,L,!0,52,8)},s.prototype.readDoubleBE=function(L,A){return L=L>>>0,A||Dt(L,8,this.length),t.read(this,L,!1,52,8)};function yt(X,L,A,W,B,mt){if(!s.isBuffer(X))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>B||L<mt)throw new RangeError('"value" argument is out of bounds');if(A+W>X.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(L,A,W,B){if(L=+L,A=A>>>0,W=W>>>0,!B){const qt=Math.pow(2,8*W)-1;yt(this,L,A,W,qt,0)}let mt=1,dt=0;for(this[A]=L&255;++dt<W&&(mt*=256);)this[A+dt]=L/mt&255;return A+W},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(L,A,W,B){if(L=+L,A=A>>>0,W=W>>>0,!B){const qt=Math.pow(2,8*W)-1;yt(this,L,A,W,qt,0)}let mt=W-1,dt=1;for(this[A+mt]=L&255;--mt>=0&&(dt*=256);)this[A+mt]=L/dt&255;return A+W},s.prototype.writeUint8=s.prototype.writeUInt8=function(L,A,W){return L=+L,A=A>>>0,W||yt(this,L,A,1,255,0),this[A]=L&255,A+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(L,A,W){return L=+L,A=A>>>0,W||yt(this,L,A,2,65535,0),this[A]=L&255,this[A+1]=L>>>8,A+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(L,A,W){return L=+L,A=A>>>0,W||yt(this,L,A,2,65535,0),this[A]=L>>>8,this[A+1]=L&255,A+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(L,A,W){return L=+L,A=A>>>0,W||yt(this,L,A,4,4294967295,0),this[A+3]=L>>>24,this[A+2]=L>>>16,this[A+1]=L>>>8,this[A]=L&255,A+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(L,A,W){return L=+L,A=A>>>0,W||yt(this,L,A,4,4294967295,0),this[A]=L>>>24,this[A+1]=L>>>16,this[A+2]=L>>>8,this[A+3]=L&255,A+4};function kt(X,L,A,W,B){Oe(L,W,B,X,A,7);let mt=Number(L&BigInt(4294967295));X[A++]=mt,mt=mt>>8,X[A++]=mt,mt=mt>>8,X[A++]=mt,mt=mt>>8,X[A++]=mt;let dt=Number(L>>BigInt(32)&BigInt(4294967295));return X[A++]=dt,dt=dt>>8,X[A++]=dt,dt=dt>>8,X[A++]=dt,dt=dt>>8,X[A++]=dt,A}function Mt(X,L,A,W,B){Oe(L,W,B,X,A,7);let mt=Number(L&BigInt(4294967295));X[A+7]=mt,mt=mt>>8,X[A+6]=mt,mt=mt>>8,X[A+5]=mt,mt=mt>>8,X[A+4]=mt;let dt=Number(L>>BigInt(32)&BigInt(4294967295));return X[A+3]=dt,dt=dt>>8,X[A+2]=dt,dt=dt>>8,X[A+1]=dt,dt=dt>>8,X[A]=dt,A+8}s.prototype.writeBigUInt64LE=Tt(function(L,A=0){return kt(this,L,A,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Tt(function(L,A=0){return Mt(this,L,A,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(L,A,W,B){if(L=+L,A=A>>>0,!B){const fe=Math.pow(2,8*W-1);yt(this,L,A,W,fe-1,-fe)}let mt=0,dt=1,qt=0;for(this[A]=L&255;++mt<W&&(dt*=256);)L<0&&qt===0&&this[A+mt-1]!==0&&(qt=1),this[A+mt]=(L/dt>>0)-qt&255;return A+W},s.prototype.writeIntBE=function(L,A,W,B){if(L=+L,A=A>>>0,!B){const fe=Math.pow(2,8*W-1);yt(this,L,A,W,fe-1,-fe)}let mt=W-1,dt=1,qt=0;for(this[A+mt]=L&255;--mt>=0&&(dt*=256);)L<0&&qt===0&&this[A+mt+1]!==0&&(qt=1),this[A+mt]=(L/dt>>0)-qt&255;return A+W},s.prototype.writeInt8=function(L,A,W){return L=+L,A=A>>>0,W||yt(this,L,A,1,127,-128),L<0&&(L=255+L+1),this[A]=L&255,A+1},s.prototype.writeInt16LE=function(L,A,W){return L=+L,A=A>>>0,W||yt(this,L,A,2,32767,-32768),this[A]=L&255,this[A+1]=L>>>8,A+2},s.prototype.writeInt16BE=function(L,A,W){return L=+L,A=A>>>0,W||yt(this,L,A,2,32767,-32768),this[A]=L>>>8,this[A+1]=L&255,A+2},s.prototype.writeInt32LE=function(L,A,W){return L=+L,A=A>>>0,W||yt(this,L,A,4,2147483647,-2147483648),this[A]=L&255,this[A+1]=L>>>8,this[A+2]=L>>>16,this[A+3]=L>>>24,A+4},s.prototype.writeInt32BE=function(L,A,W){return L=+L,A=A>>>0,W||yt(this,L,A,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[A]=L>>>24,this[A+1]=L>>>16,this[A+2]=L>>>8,this[A+3]=L&255,A+4},s.prototype.writeBigInt64LE=Tt(function(L,A=0){return kt(this,L,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Tt(function(L,A=0){return Mt(this,L,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Kt(X,L,A,W,B,mt){if(A+W>X.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}function Xt(X,L,A,W,B){return L=+L,A=A>>>0,B||Kt(X,L,A,4),t.write(X,L,A,W,23,4),A+4}s.prototype.writeFloatLE=function(L,A,W){return Xt(this,L,A,!0,W)},s.prototype.writeFloatBE=function(L,A,W){return Xt(this,L,A,!1,W)};function Qt(X,L,A,W,B){return L=+L,A=A>>>0,B||Kt(X,L,A,8),t.write(X,L,A,W,52,8),A+8}s.prototype.writeDoubleLE=function(L,A,W){return Qt(this,L,A,!0,W)},s.prototype.writeDoubleBE=function(L,A,W){return Qt(this,L,A,!1,W)},s.prototype.copy=function(L,A,W,B){if(!s.isBuffer(L))throw new TypeError("argument should be a Buffer");if(W||(W=0),!B&&B!==0&&(B=this.length),A>=L.length&&(A=L.length),A||(A=0),B>0&&B<W&&(B=W),B===W||L.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),L.length-A<B-W&&(B=L.length-A+W);const mt=B-W;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(A,W,B):Uint8Array.prototype.set.call(L,this.subarray(W,B),A),mt},s.prototype.fill=function(L,A,W,B){if(typeof L=="string"){if(typeof A=="string"?(B=A,A=0,W=this.length):typeof W=="string"&&(B=W,W=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!s.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(L.length===1){const dt=L.charCodeAt(0);(B==="utf8"&&dt<128||B==="latin1")&&(L=dt)}}else typeof L=="number"?L=L&255:typeof L=="boolean"&&(L=Number(L));if(A<0||this.length<A||this.length<W)throw new RangeError("Out of range index");if(W<=A)return this;A=A>>>0,W=W===void 0?this.length:W>>>0,L||(L=0);let mt;if(typeof L=="number")for(mt=A;mt<W;++mt)this[mt]=L;else{const dt=s.isBuffer(L)?L:s.from(L,B),qt=dt.length;if(qt===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(mt=0;mt<W-A;++mt)this[mt+A]=dt[mt%qt]}return this};const ne={};function be(X,L,A){ne[X]=class extends A{constructor(){super(),Object.defineProperty(this,"message",{value:L.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${X}]`,this.stack,delete this.name}get code(){return X}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${X}]: ${this.message}`}}}be("ERR_BUFFER_OUT_OF_BOUNDS",function(X){return X?`${X} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),be("ERR_INVALID_ARG_TYPE",function(X,L){return`The "${X}" argument must be of type number. Received type ${typeof L}`},TypeError),be("ERR_OUT_OF_RANGE",function(X,L,A){let W=`The value of "${X}" is out of range.`,B=A;return Number.isInteger(A)&&Math.abs(A)>2**32?B=Pe(String(A)):typeof A=="bigint"&&(B=String(A),(A>BigInt(2)**BigInt(32)||A<-(BigInt(2)**BigInt(32)))&&(B=Pe(B)),B+="n"),W+=` It must be ${L}. Received ${B}`,W},RangeError);function Pe(X){let L="",A=X.length;const W=X[0]==="-"?1:0;for(;A>=W+4;A-=3)L=`_${X.slice(A-3,A)}${L}`;return`${X.slice(0,A)}${L}`}function Ee(X,L,A){Ke(L,"offset"),(X[L]===void 0||X[L+A]===void 0)&&De(L,X.length-(A+1))}function Oe(X,L,A,W,B,mt){if(X>A||X<L){const dt=typeof L=="bigint"?"n":"";let qt;throw L===0||L===BigInt(0)?qt=`>= 0${dt} and < 2${dt} ** ${(mt+1)*8}${dt}`:qt=`>= -(2${dt} ** ${(mt+1)*8-1}${dt}) and < 2 ** ${(mt+1)*8-1}${dt}`,new ne.ERR_OUT_OF_RANGE("value",qt,X)}Ee(W,B,mt)}function Ke(X,L){if(typeof X!="number")throw new ne.ERR_INVALID_ARG_TYPE(L,"number",X)}function De(X,L,A){throw Math.floor(X)!==X?(Ke(X,A),new ne.ERR_OUT_OF_RANGE("offset","an integer",X)):L<0?new ne.ERR_BUFFER_OUT_OF_BOUNDS:new ne.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${L}`,X)}const Ut=/[^+/0-9A-Za-z-_]/g;function ce(X){if(X=X.split("=")[0],X=X.trim().replace(Ut,""),X.length<2)return"";for(;X.length%4!==0;)X=X+"=";return X}function ie(X,L){L=L||1/0;let A;const W=X.length;let B=null;const mt=[];for(let dt=0;dt<W;++dt){if(A=X.charCodeAt(dt),A>55295&&A<57344){if(!B){if(A>56319){(L-=3)>-1&&mt.push(239,191,189);continue}else if(dt+1===W){(L-=3)>-1&&mt.push(239,191,189);continue}B=A;continue}if(A<56320){(L-=3)>-1&&mt.push(239,191,189),B=A;continue}A=(B-55296<<10|A-56320)+65536}else B&&(L-=3)>-1&&mt.push(239,191,189);if(B=null,A<128){if((L-=1)<0)break;mt.push(A)}else if(A<2048){if((L-=2)<0)break;mt.push(A>>6|192,A&63|128)}else if(A<65536){if((L-=3)<0)break;mt.push(A>>12|224,A>>6&63|128,A&63|128)}else if(A<1114112){if((L-=4)<0)break;mt.push(A>>18|240,A>>12&63|128,A>>6&63|128,A&63|128)}else throw new Error("Invalid code point")}return mt}function P(X){const L=[];for(let A=0;A<X.length;++A)L.push(X.charCodeAt(A)&255);return L}function k(X,L){let A,W,B;const mt=[];for(let dt=0;dt<X.length&&!((L-=2)<0);++dt)A=X.charCodeAt(dt),W=A>>8,B=A%256,mt.push(B),mt.push(W);return mt}function N(X){return n.toByteArray(ce(X))}function q(X,L,A,W){let B;for(B=0;B<W&&!(B+A>=L.length||B>=X.length);++B)L[B+A]=X[B];return B}function ut(X,L){return X instanceof L||X!=null&&X.constructor!=null&&X.constructor.name!=null&&X.constructor.name===L.name}function Q(X){return X!==X}const gt=function(){const X="0123456789abcdef",L=new Array(256);for(let A=0;A<16;++A){const W=A*16;for(let B=0;B<16;++B)L[W+B]=X[A]+X[B]}return L}();function Tt(X){return typeof BigInt>"u"?he:X}function he(){throw new Error("BigInt not supported")}}(wx)),wx}var xx=k5(),dv={};const M5=i=>{const n=[];for(let t=0,e=i.length;t<e;t++){const r=i.charCodeAt(t);if(r<128)n.push(r);else if(r<2048)n.push(r>>6|192,r&63|128);else if(t+1<i.length&&(r&64512)===55296&&(i.charCodeAt(t+1)&64512)===56320){const o=65536+((r&1023)<<10)+(i.charCodeAt(++t)&1023);n.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else n.push(r>>12|224,r>>6&63|128,r&63|128)}return Uint8Array.from(n)},D5=i=>{let n="";for(let t=0,e=i.length;t<e;t++){const r=i[t];if(r<128)n+=String.fromCharCode(r);else if(192<=r&&r<224){const o=i[++t];n+=String.fromCharCode((r&31)<<6|o&63)}else if(240<=r&&r<365){const a="%"+[r,i[++t],i[++t],i[++t]].map(s=>s.toString(16)).join("%");n+=decodeURIComponent(a)}else n+=String.fromCharCode((r&15)<<12|(i[++t]&63)<<6|i[++t]&63)}return n};function P5(i){return new TextEncoder().encode(i)}function N5(i){return new TextDecoder("utf-8").decode(i)}const R5=i=>typeof TextEncoder=="function"?P5(i):M5(i),L5=i=>typeof TextDecoder=="function"?N5(i):D5(i),j5=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:R5,toUtf8:L5},Symbol.toStringTag,{value:"Module"})),I5=B_(j5);var hO;function B5(){if(hO)return dv;hO=1,Object.defineProperty(dv,"__esModule",{value:!0}),dv.convertToBuffer=void 0;var i=I5,n=typeof xx.Buffer<"u"&&xx.Buffer.from?function(e){return xx.Buffer.from(e,"utf8")}:i.fromUtf8;function t(e){return e instanceof Uint8Array?e:typeof e=="string"?n(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}return dv.convertToBuffer=t,dv}var hv={},pO;function U5(){if(pO)return hv;pO=1,Object.defineProperty(hv,"__esModule",{value:!0}),hv.isEmptyData=void 0;function i(n){return typeof n=="string"?n.length===0:n.byteLength===0}return hv.isEmptyData=i,hv}var pv={},vO;function V5(){if(vO)return pv;vO=1,Object.defineProperty(pv,"__esModule",{value:!0}),pv.numToUint8=void 0;function i(n){return new Uint8Array([(n&4278190080)>>24,(n&16711680)>>16,(n&65280)>>8,n&255])}return pv.numToUint8=i,pv}var vv={},gO;function F5(){if(gO)return vv;gO=1,Object.defineProperty(vv,"__esModule",{value:!0}),vv.uint32ArrayFrom=void 0;function i(n){if(!Array.from){for(var t=new Uint32Array(n.length),e=0;e<n.length;)t[e]=n[e];return t}return Uint32Array.from(n)}return vv.uint32ArrayFrom=i,vv}var mO;function H5(){return mO||(mO=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.uint32ArrayFrom=i.numToUint8=i.isEmptyData=i.convertToBuffer=void 0;var n=B5();Object.defineProperty(i,"convertToBuffer",{enumerable:!0,get:function(){return n.convertToBuffer}});var t=U5();Object.defineProperty(i,"isEmptyData",{enumerable:!0,get:function(){return t.isEmptyData}});var e=V5();Object.defineProperty(i,"numToUint8",{enumerable:!0,get:function(){return e.numToUint8}});var r=F5();Object.defineProperty(i,"uint32ArrayFrom",{enumerable:!0,get:function(){return r.uint32ArrayFrom}})}(bx)),bx}var yO;function z5(){if(yO)return cv;yO=1,Object.defineProperty(cv,"__esModule",{value:!0}),cv.Sha256=void 0;var i=fD,n=dD(),t=A5(),e=H5(),r=function(){function a(s){if(this.hash=new t.RawSha256,s){this.outer=new t.RawSha256;var u=o(s),c=new Uint8Array(n.BLOCK_SIZE);c.set(u);for(var h=0;h<n.BLOCK_SIZE;h++)u[h]^=54,c[h]^=92;this.hash.update(u),this.outer.update(c);for(var h=0;h<u.byteLength;h++)u[h]=0}}return a.prototype.update=function(s){if(!((0,e.isEmptyData)(s)||this.error))try{this.hash.update((0,e.convertToBuffer)(s))}catch(u){this.error=u}},a.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},a.prototype.digest=function(){return(0,i.__awaiter)(this,void 0,void 0,function(){return(0,i.__generator)(this,function(s){return[2,this.digestSync()]})})},a}();cv.Sha256=r;function o(a){var s=(0,e.convertToBuffer)(a);if(s.byteLength>n.BLOCK_SIZE){var u=new t.RawSha256;u.update(s),s=u.digest()}var c=new Uint8Array(n.BLOCK_SIZE);return c.set(s),c}return cv}var bO;function W5(){return bO||(bO=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});var n=fD;(0,n.__exportStar)(z5(),i)}(yx)),yx}var Hv=W5();function Ie(i,n){i!=null&&this.fromString(i,n)}function Ro(){return new Ie(null)}var pc,q5=0xdeadbeefcafe,wO=(q5&16777215)==15715070;function K5(i,n,t,e,r,o){for(;--o>=0;){var a=n*this[i++]+t[e]+r;r=Math.floor(a/67108864),t[e++]=a&67108863}return r}function $5(i,n,t,e,r,o){for(var a=n&32767,s=n>>15;--o>=0;){var u=this[i]&32767,c=this[i++]>>15,h=s*u+c*a;u=a*u+((h&32767)<<15)+t[e]+(r&1073741823),r=(u>>>30)+(h>>>15)+s*c+(r>>>30),t[e++]=u&1073741823}return r}function G5(i,n,t,e,r,o){for(var a=n&16383,s=n>>14;--o>=0;){var u=this[i]&16383,c=this[i++]>>14,h=s*u+c*a;u=a*u+((h&16383)<<14)+t[e]+r,r=(u>>28)+(h>>14)+s*c,t[e++]=u&268435455}return r}var xO=typeof navigator<"u";xO&&wO&&navigator.appName=="Microsoft Internet Explorer"?(Ie.prototype.am=$5,pc=30):xO&&wO&&navigator.appName!="Netscape"?(Ie.prototype.am=K5,pc=26):(Ie.prototype.am=G5,pc=28);Ie.prototype.DB=pc;Ie.prototype.DM=(1<<pc)-1;Ie.prototype.DV=1<<pc;var N1=52;Ie.prototype.FV=Math.pow(2,N1);Ie.prototype.F1=N1-pc;Ie.prototype.F2=2*pc-N1;var Y5="0123456789abcdefghijklmnopqrstuvwxyz",Lb=new Array,Yh,ns;Yh=48;for(ns=0;ns<=9;++ns)Lb[Yh++]=ns;Yh=97;for(ns=10;ns<36;++ns)Lb[Yh++]=ns;Yh=65;for(ns=10;ns<36;++ns)Lb[Yh++]=ns;function SO(i){return Y5.charAt(i)}function X5(i,n){var t=Lb[i.charCodeAt(n)];return t??-1}function J5(i){for(var n=this.t-1;n>=0;--n)i[n]=this[n];i.t=this.t,i.s=this.s}function Z5(i){this.t=1,this.s=i<0?-1:0,i>0?this[0]=i:i<-1?this[0]=i+this.DV:this.t=0}function R1(i){var n=Ro();return n.fromInt(i),n}function Q5(i,n){var t;if(n==16)t=4;else if(n==8)t=3;else if(n==2)t=1;else if(n==32)t=5;else if(n==4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;for(var e=i.length,r=!1,o=0;--e>=0;){var a=X5(i,e);if(a<0){i.charAt(e)=="-"&&(r=!0);continue}r=!1,o==0?this[this.t++]=a:o+t>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,o+=t,o>=this.DB&&(o-=this.DB)}this.clamp(),r&&Ie.ZERO.subTo(this,this)}function tF(){for(var i=this.s&this.DM;this.t>0&&this[this.t-1]==i;)--this.t}function eF(i){if(this.s<0)return"-"+this.negate().toString(i);var n;if(i==16)n=4;else if(i==8)n=3;else if(i==2)n=1;else if(i==32)n=5;else if(i==4)n=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");var t=(1<<n)-1,e,r=!1,o="",a=this.t,s=this.DB-a*this.DB%n;if(a-- >0)for(s<this.DB&&(e=this[a]>>s)>0&&(r=!0,o=SO(e));a>=0;)s<n?(e=(this[a]&(1<<s)-1)<<n-s,e|=this[--a]>>(s+=this.DB-n)):(e=this[a]>>(s-=n)&t,s<=0&&(s+=this.DB,--a)),e>0&&(r=!0),r&&(o+=SO(e));return r?o:"0"}function nF(){var i=Ro();return Ie.ZERO.subTo(this,i),i}function rF(){return this.s<0?this.negate():this}function iF(i){var n=this.s-i.s;if(n!=0)return n;var t=this.t;if(n=t-i.t,n!=0)return this.s<0?-n:n;for(;--t>=0;)if((n=this[t]-i[t])!=0)return n;return 0}function L1(i){var n=1,t;return(t=i>>>16)!=0&&(i=t,n+=16),(t=i>>8)!=0&&(i=t,n+=8),(t=i>>4)!=0&&(i=t,n+=4),(t=i>>2)!=0&&(i=t,n+=2),(t=i>>1)!=0&&(i=t,n+=1),n}function oF(){return this.t<=0?0:this.DB*(this.t-1)+L1(this[this.t-1]^this.s&this.DM)}function aF(i,n){var t;for(t=this.t-1;t>=0;--t)n[t+i]=this[t];for(t=i-1;t>=0;--t)n[t]=0;n.t=this.t+i,n.s=this.s}function sF(i,n){for(var t=i;t<this.t;++t)n[t-i]=this[t];n.t=Math.max(this.t-i,0),n.s=this.s}function lF(i,n){var t=i%this.DB,e=this.DB-t,r=(1<<e)-1,o=Math.floor(i/this.DB),a=this.s<<t&this.DM,s;for(s=this.t-1;s>=0;--s)n[s+o+1]=this[s]>>e|a,a=(this[s]&r)<<t;for(s=o-1;s>=0;--s)n[s]=0;n[o]=a,n.t=this.t+o+1,n.s=this.s,n.clamp()}function uF(i,n){n.s=this.s;var t=Math.floor(i/this.DB);if(t>=this.t){n.t=0;return}var e=i%this.DB,r=this.DB-e,o=(1<<e)-1;n[0]=this[t]>>e;for(var a=t+1;a<this.t;++a)n[a-t-1]|=(this[a]&o)<<r,n[a-t]=this[a]>>e;e>0&&(n[this.t-t-1]|=(this.s&o)<<r),n.t=this.t-t,n.clamp()}function cF(i,n){for(var t=0,e=0,r=Math.min(i.t,this.t);t<r;)e+=this[t]-i[t],n[t++]=e&this.DM,e>>=this.DB;if(i.t<this.t){for(e-=i.s;t<this.t;)e+=this[t],n[t++]=e&this.DM,e>>=this.DB;e+=this.s}else{for(e+=this.s;t<i.t;)e-=i[t],n[t++]=e&this.DM,e>>=this.DB;e-=i.s}n.s=e<0?-1:0,e<-1?n[t++]=this.DV+e:e>0&&(n[t++]=e),n.t=t,n.clamp()}function fF(i,n){var t=this.abs(),e=i.abs(),r=t.t;for(n.t=r+e.t;--r>=0;)n[r]=0;for(r=0;r<e.t;++r)n[r+t.t]=t.am(0,e[r],n,r,0,t.t);n.s=0,n.clamp(),this.s!=i.s&&Ie.ZERO.subTo(n,n)}function dF(i){for(var n=this.abs(),t=i.t=2*n.t;--t>=0;)i[t]=0;for(t=0;t<n.t-1;++t){var e=n.am(t,n[t],i,2*t,0,1);(i[t+n.t]+=n.am(t+1,2*n[t],i,2*t+1,e,n.t-t-1))>=n.DV&&(i[t+n.t]-=n.DV,i[t+n.t+1]=1)}i.t>0&&(i[i.t-1]+=n.am(t,n[t],i,2*t,0,1)),i.s=0,i.clamp()}function hF(i,n,t){var e=i.abs();if(!(e.t<=0)){var r=this.abs();if(r.t<e.t){n!=null&&n.fromInt(0),t!=null&&this.copyTo(t);return}t==null&&(t=Ro());var o=Ro(),a=this.s,s=i.s,u=this.DB-L1(e[e.t-1]);u>0?(e.lShiftTo(u,o),r.lShiftTo(u,t)):(e.copyTo(o),r.copyTo(t));var c=o.t,h=o[c-1];if(h!=0){var v=h*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),m=this.FV/v,y=(1<<this.F1)/v,_=1<<this.F2,C=t.t,E=C-c,D=n??Ro();for(o.dlShiftTo(E,D),t.compareTo(D)>=0&&(t[t.t++]=1,t.subTo(D,t)),Ie.ONE.dlShiftTo(c,D),D.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--E>=0;){var F=t[--C]==h?this.DM:Math.floor(t[C]*m+(t[C-1]+_)*y);if((t[C]+=o.am(0,F,t,E,0,c))<F)for(o.dlShiftTo(E,D),t.subTo(D,t);t[C]<--F;)t.subTo(D,t)}n!=null&&(t.drShiftTo(c,n),a!=s&&Ie.ZERO.subTo(n,n)),t.t=c,t.clamp(),u>0&&t.rShiftTo(u,t),a<0&&Ie.ZERO.subTo(t,t)}}}function pF(i){var n=Ro();return this.abs().divRemTo(i,null,n),this.s<0&&n.compareTo(Ie.ZERO)>0&&i.subTo(n,n),n}function vF(){if(this.t<1)return 0;var i=this[0];if((i&1)==0)return 0;var n=i&3;return n=n*(2-(i&15)*n)&15,n=n*(2-(i&255)*n)&255,n=n*(2-((i&65535)*n&65535))&65535,n=n*(2-i*n%this.DV)%this.DV,n>0?this.DV-n:-n}function gF(i){return this.compareTo(i)==0}function mF(i,n){for(var t=0,e=0,r=Math.min(i.t,this.t);t<r;)e+=this[t]+i[t],n[t++]=e&this.DM,e>>=this.DB;if(i.t<this.t){for(e+=i.s;t<this.t;)e+=this[t],n[t++]=e&this.DM,e>>=this.DB;e+=this.s}else{for(e+=this.s;t<i.t;)e+=i[t],n[t++]=e&this.DM,e>>=this.DB;e+=i.s}n.s=e<0?-1:0,e>0?n[t++]=e:e<-1&&(n[t++]=this.DV+e),n.t=t,n.clamp()}function yF(i){var n=Ro();return this.addTo(i,n),n}function bF(i){var n=Ro();return this.subTo(i,n),n}function wF(i){var n=Ro();return this.multiplyTo(i,n),n}function xF(i){var n=Ro();return this.divRemTo(i,n,null),n}function Xh(i){this.m=i,this.mp=i.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<i.DB-15)-1,this.mt2=2*i.t}function SF(i){var n=Ro();return i.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),i.s<0&&n.compareTo(Ie.ZERO)>0&&this.m.subTo(n,n),n}function _F(i){var n=Ro();return i.copyTo(n),this.reduce(n),n}function CF(i){for(;i.t<=this.mt2;)i[i.t++]=0;for(var n=0;n<this.m.t;++n){var t=i[n]&32767,e=t*this.mpl+((t*this.mph+(i[n]>>15)*this.mpl&this.um)<<15)&i.DM;for(t=n+this.m.t,i[t]+=this.m.am(0,e,i,n,0,this.m.t);i[t]>=i.DV;)i[t]-=i.DV,i[++t]++}i.clamp(),i.drShiftTo(this.m.t,i),i.compareTo(this.m)>=0&&i.subTo(this.m,i)}function TF(i,n){i.squareTo(n),this.reduce(n)}function EF(i,n,t){i.multiplyTo(n,t),this.reduce(t)}Xh.prototype.convert=SF;Xh.prototype.revert=_F;Xh.prototype.reduce=CF;Xh.prototype.mulTo=EF;Xh.prototype.sqrTo=TF;function OF(i,n,t){var e=i.bitLength(),r,o=R1(1),a=new Xh(n);if(e<=0)return o;e<18?r=1:e<48?r=3:e<144?r=4:e<768?r=5:r=6;var s=new Array,u=3,c=r-1,h=(1<<r)-1;if(s[1]=a.convert(this),r>1){var v=Ro();for(a.sqrTo(s[1],v);u<=h;)s[u]=Ro(),a.mulTo(v,s[u-2],s[u]),u+=2}var m=i.t-1,y,_=!0,C=Ro(),E;for(e=L1(i[m])-1;m>=0;){for(e>=c?y=i[m]>>e-c&h:(y=(i[m]&(1<<e+1)-1)<<c-e,m>0&&(y|=i[m-1]>>this.DB+e-c)),u=r;(y&1)==0;)y>>=1,--u;if((e-=u)<0&&(e+=this.DB,--m),_)s[y].copyTo(o),_=!1;else{for(;u>1;)a.sqrTo(o,C),a.sqrTo(C,o),u-=2;u>0?a.sqrTo(o,C):(E=o,o=C,C=E),a.mulTo(C,s[y],o)}for(;m>=0&&(i[m]&1<<e)==0;)a.sqrTo(o,C),E=o,o=C,C=E,--e<0&&(e=this.DB-1,--m)}var D=a.revert(o);return t(null,D),D}Ie.prototype.copyTo=J5;Ie.prototype.fromInt=Z5;Ie.prototype.fromString=Q5;Ie.prototype.clamp=tF;Ie.prototype.dlShiftTo=aF;Ie.prototype.drShiftTo=sF;Ie.prototype.lShiftTo=lF;Ie.prototype.rShiftTo=uF;Ie.prototype.subTo=cF;Ie.prototype.multiplyTo=fF;Ie.prototype.squareTo=dF;Ie.prototype.divRemTo=hF;Ie.prototype.invDigit=vF;Ie.prototype.addTo=mF;Ie.prototype.toString=eF;Ie.prototype.negate=nF;Ie.prototype.abs=rF;Ie.prototype.compareTo=iF;Ie.prototype.bitLength=oF;Ie.prototype.mod=pF;Ie.prototype.equals=gF;Ie.prototype.add=yF;Ie.prototype.subtract=bF;Ie.prototype.multiply=wF;Ie.prototype.divide=xF;Ie.prototype.modPow=OF;Ie.ZERO=R1(0);Ie.ONE=R1(1);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */function Sx(i){return gr.Buffer.from(new s5().random(i).toString(),"hex")}var AF=/^[89a-f]/i,kF="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",MF="userAttributes.",Zd=function(){function i(t){this.N=new Ie(kF,16),this.g=new Ie("2",16),this.k=new Ie(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=gr.Buffer.from("Caldera Derived Key","utf8"),this.poolName=t}var n=i.prototype;return n.getSmallAValue=function(){return this.smallAValue},n.getLargeAValue=function(e){var r=this;this.largeAValue?e(null,this.largeAValue):this.calculateA(this.smallAValue,function(o,a){o&&e(o,null),r.largeAValue=a,e(null,r.largeAValue)})},n.generateRandomSmallA=function(){var e=Sx(128).toString("hex"),r=new Ie(e,16);return r},n.generateRandomString=function(){return Sx(40).toString("base64")},n.getRandomPassword=function(){return this.randomPassword},n.getSaltDevices=function(){return this.SaltToHashDevices},n.getVerifierDevices=function(){return this.verifierDevices},n.generateHashDevice=function(e,r,o){var a=this;this.randomPassword=this.generateRandomString();var s=""+e+r+":"+this.randomPassword,u=this.hash(s),c=Sx(16).toString("hex");this.SaltToHashDevices=this.padHex(new Ie(c,16)),this.g.modPow(new Ie(this.hexHash(this.SaltToHashDevices+u),16),this.N,function(h,v){h&&o(h,null),a.verifierDevices=a.padHex(v),o(null,null)})},n.calculateA=function(e,r){var o=this;this.g.modPow(e,this.N,function(a,s){a&&r(a,null),s.mod(o.N).equals(Ie.ZERO)&&r(new Error("Illegal paramater. A mod N cannot be 0."),null),r(null,s)})},n.calculateU=function(e,r){this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(r));var o=new Ie(this.UHexHash,16);return o},n.hash=function(e){var r=new Hv.Sha256;r.update(e);var o=r.digestSync(),a=gr.Buffer.from(o).toString("hex");return new Array(64-a.length).join("0")+a},n.hexHash=function(e){return this.hash(gr.Buffer.from(e,"hex"))},n.computehkdf=function(e,r){var o=gr.Buffer.concat([this.infoBits,gr.Buffer.from("","utf8")]),a=new Hv.Sha256(r);a.update(e);var s=a.digestSync(),u=new Hv.Sha256(s);u.update(o);var c=u.digestSync(),h=c,v=h.slice(0,16);return v},n.getPasswordAuthenticationKey=function(e,r,o,a,s){var u=this;if(o.mod(this.N).equals(Ie.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,o),this.UValue.equals(Ie.ZERO))throw new Error("U cannot be zero.");var c=""+this.poolName+e+":"+r,h=this.hash(c),v=new Ie(this.hexHash(this.padHex(a)+h),16);this.calculateS(v,o,function(m,y){m&&s(m,null);var _=u.computehkdf(gr.Buffer.from(u.padHex(y),"hex"),gr.Buffer.from(u.padHex(u.UValue),"hex"));s(null,_)})},n.calculateS=function(e,r,o){var a=this;this.g.modPow(e,this.N,function(s,u){s&&o(s,null);var c=r.subtract(a.k.multiply(u));c.modPow(a.smallAValue.add(a.UValue.multiply(e)),a.N,function(h,v){h&&o(h,null),o(null,v.mod(a.N))})})},n.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return MF},n.padHex=function(e){if(!(e instanceof Ie))throw new Error("Not a BigInteger");var r=e.compareTo(Ie.ZERO)<0,o=e.abs().toString(16);if(o=o.length%2!==0?"0"+o:o,o=AF.test(o)?"00"+o:o,r){var a=o.split("").map(function(u){var c=~parseInt(u,16)&15;return"0123456789ABCDEF".charAt(c)}).join(""),s=new Ie(a,16).add(Ie.ONE);o=s.toString(16),o.toUpperCase().startsWith("FF8")&&(o=o.substring(2))}return o},i}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var hD=function(){function i(t){this.jwtToken=t||"",this.payload=this.decodePayload()}var n=i.prototype;return n.getJwtToken=function(){return this.jwtToken},n.getExpiration=function(){return this.payload.exp},n.getIssuedAt=function(){return this.payload.iat},n.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(gr.Buffer.from(e,"base64").toString("utf8"))}catch{return{}}},i}();function DF(i,n){i.prototype=Object.create(n.prototype),i.prototype.constructor=i,$S(i,n)}function $S(i,n){return $S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$S(i,n)}var _O=function(i){function n(t){var e=t===void 0?{}:t,r=e.AccessToken;return i.call(this,r||"")||this}return DF(n,i),n}(hD);function PF(i,n){i.prototype=Object.create(n.prototype),i.prototype.constructor=i,GS(i,n)}function GS(i,n){return GS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},GS(i,n)}var CO=function(i){function n(t){var e=t===void 0?{}:t,r=e.IdToken;return i.call(this,r||"")||this}return PF(n,i),n}(hD);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var TO=function(){function i(t){var e=t===void 0?{}:t,r=e.RefreshToken;this.token=r||""}var n=i.prototype;return n.getToken=function(){return this.token},i}(),NF="5.0.4";/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var RF="aws-amplify/"+NF,pD={userAgent:RF,isReactNative:typeof navigator<"u"&&navigator.product==="ReactNative"},LF=function(){return pD.userAgent};/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var EO=function(){function i(t){var e=t===void 0?{}:t,r=e.IdToken,o=e.RefreshToken,a=e.AccessToken,s=e.ClockDrift;if(a==null||r==null)throw new Error("Id token and Access Token must be present.");this.idToken=r,this.refreshToken=o,this.accessToken=a,this.clockDrift=s===void 0?this.calculateClockDrift():s}var n=i.prototype;return n.getIdToken=function(){return this.idToken},n.getRefreshToken=function(){return this.refreshToken},n.getAccessToken=function(){return this.accessToken},n.getClockDrift=function(){return this.clockDrift},n.calculateClockDrift=function(){var e=Math.floor(new Date/1e3),r=Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt());return e-r},n.isValid=function(){var e=Math.floor(new Date/1e3),r=e-this.clockDrift;return r<this.accessToken.getExpiration()&&r<this.idToken.getExpiration()},i}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var jF=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],IF=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],OO=function(){function i(){}var n=i.prototype;return n.getNowString=function(){var e=new Date,r=IF[e.getUTCDay()],o=jF[e.getUTCMonth()],a=e.getUTCDate(),s=e.getUTCHours();s<10&&(s="0"+s);var u=e.getUTCMinutes();u<10&&(u="0"+u);var c=e.getUTCSeconds();c<10&&(c="0"+c);var h=e.getUTCFullYear(),v=r+" "+o+" "+a+" "+s+":"+u+":"+c+" UTC "+h;return v},i}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var BF=function(){function i(t){var e=t===void 0?{}:t,r=e.Name,o=e.Value;this.Name=r||"",this.Value=o||""}var n=i.prototype;return n.getValue=function(){return this.Value},n.setValue=function(e){return this.Value=e,this},n.getName=function(){return this.Name},n.setName=function(e){return this.Name=e,this},n.toString=function(){return JSON.stringify(this)},n.toJSON=function(){return{Name:this.Name,Value:this.Value}},i}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var df={},UF=function(){function i(){}return i.setItem=function(t,e){return df[t]=e,df[t]},i.getItem=function(t){return Object.prototype.hasOwnProperty.call(df,t)?df[t]:void 0},i.removeItem=function(t){return delete df[t]},i.clear=function(){return df={},df},i}(),vD=function(){function i(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch{this.storageWindow=UF}}var n=i.prototype;return n.getStorage=function(){return this.storageWindow},i}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var VF=typeof navigator<"u",AO=VF?pD.isReactNative?"react-native":navigator.userAgent:"nodejs",Uh=function(){function i(t){if(t==null||t.Username==null||t.Pool==null)throw new Error("Username and Pool information are required.");this.username=t.Username||"",this.pool=t.Pool,this.Session=null,this.client=t.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=t.Storage||new vD().getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var n=i.prototype;return n.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},n.getSignInUserSession=function(){return this.signInUserSession},n.getUsername=function(){return this.username},n.getAuthenticationFlowType=function(){return this.authenticationFlowType},n.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},n.initiateAuth=function(e,r){var o=this,a=e.getAuthParameters();a.USERNAME=this.username;var s=Object.keys(e.getValidationData()).length!==0?e.getValidationData():e.getClientMetadata(),u={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:a,ClientMetadata:s};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",u,function(c,h){if(c)return r.onFailure(c);var v=h.ChallengeName,m=h.ChallengeParameters;return v==="CUSTOM_CHALLENGE"?(o.Session=h.Session,r.customChallenge(m)):(o.signInUserSession=o.getCognitoUserSession(h.AuthenticationResult),o.cacheTokens(),r.onSuccess(o.signInUserSession))})},n.authenticateUser=function(e,r){return this.authenticationFlowType==="USER_PASSWORD_AUTH"?this.authenticateUserPlainUsernamePassword(e,r):this.authenticationFlowType==="USER_SRP_AUTH"||this.authenticationFlowType==="CUSTOM_AUTH"?this.authenticateUserDefaultAuth(e,r):r.onFailure(new Error("Authentication flow type is invalid."))},n.authenticateUserDefaultAuth=function(e,r){var o=this,a=new Zd(this.pool.getUserPoolName()),s=new OO,u,c,h={};this.deviceKey!=null&&(h.DEVICE_KEY=this.deviceKey),h.USERNAME=this.username,a.getLargeAValue(function(v,m){v&&r.onFailure(v),h.SRP_A=m.toString(16),o.authenticationFlowType==="CUSTOM_AUTH"&&(h.CHALLENGE_NAME="SRP_A");var y=Object.keys(e.getValidationData()).length!==0?e.getValidationData():e.getClientMetadata(),_={AuthFlow:o.authenticationFlowType,ClientId:o.pool.getClientId(),AuthParameters:h,ClientMetadata:y};o.getUserContextData(o.username)&&(_.UserContextData=o.getUserContextData(o.username)),o.client.request("InitiateAuth",_,function(C,E){if(C)return r.onFailure(C);var D=E.ChallengeParameters;o.username=D.USER_ID_FOR_SRP,o.userDataKey=o.keyPrefix+"."+o.username+".userData",u=new Ie(D.SRP_B,16),c=new Ie(D.SALT,16),o.getCachedDeviceKeyAndPassword(),a.getPasswordAuthenticationKey(o.username,e.getPassword(),u,c,function(F,V){F&&r.onFailure(F);var K=s.getNowString(),Z=gr.Buffer.concat([gr.Buffer.from(o.pool.getUserPoolName(),"utf8"),gr.Buffer.from(o.username,"utf8"),gr.Buffer.from(D.SECRET_BLOCK,"base64"),gr.Buffer.from(K,"utf8")]),ct=new Hv.Sha256(V);ct.update(Z);var ht=ct.digestSync(),st=gr.Buffer.from(ht).toString("base64"),et={};et.USERNAME=o.username,et.PASSWORD_CLAIM_SECRET_BLOCK=D.SECRET_BLOCK,et.TIMESTAMP=K,et.PASSWORD_CLAIM_SIGNATURE=st,o.deviceKey!=null&&(et.DEVICE_KEY=o.deviceKey);var nt=function(ft,lt){return o.client.request("RespondToAuthChallenge",ft,function(St,U){return St&&St.code==="ResourceNotFoundException"&&St.message.toLowerCase().indexOf("device")!==-1?(et.DEVICE_KEY=null,o.deviceKey=null,o.randomPassword=null,o.deviceGroupKey=null,o.clearCachedDeviceKeyAndPassword(),nt(ft,lt)):lt(St,U)})},it={ChallengeName:"PASSWORD_VERIFIER",ClientId:o.pool.getClientId(),ChallengeResponses:et,Session:E.Session,ClientMetadata:y};o.getUserContextData()&&(it.UserContextData=o.getUserContextData()),nt(it,function($,ft){return $?r.onFailure($):o.authenticateUserInternal(ft,a,r)})})})})},n.authenticateUserPlainUsernamePassword=function(e,r){var o=this,a={};if(a.USERNAME=this.username,a.PASSWORD=e.getPassword(),!a.PASSWORD){r.onFailure(new Error("PASSWORD parameter is required"));return}var s=new Zd(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(a.DEVICE_KEY=this.deviceKey);var u=Object.keys(e.getValidationData()).length!==0?e.getValidationData():e.getClientMetadata(),c={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:a,ClientMetadata:u};this.getUserContextData(this.username)&&(c.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",c,function(h,v){return h?r.onFailure(h):o.authenticateUserInternal(v,s,r)})},n.authenticateUserInternal=function(e,r,o){var a=this,s=e.ChallengeName,u=e.ChallengeParameters;if(s==="SMS_MFA")return this.Session=e.Session,o.mfaRequired(s,u);if(s==="SELECT_MFA_TYPE")return this.Session=e.Session,o.selectMFAType(s,u);if(s==="MFA_SETUP")return this.Session=e.Session,o.mfaSetup(s,u);if(s==="SOFTWARE_TOKEN_MFA")return this.Session=e.Session,o.totpRequired(s,u);if(s==="CUSTOM_CHALLENGE")return this.Session=e.Session,o.customChallenge(u);if(s==="NEW_PASSWORD_REQUIRED"){this.Session=e.Session;var c=null,h=null,v=[],m=r.getNewPasswordRequiredChallengeUserAttributePrefix();if(u&&(c=JSON.parse(e.ChallengeParameters.userAttributes),h=JSON.parse(e.ChallengeParameters.requiredAttributes)),h)for(var y=0;y<h.length;y++)v[y]=h[y].substr(m.length);return o.newPasswordRequired(c,v)}if(s==="DEVICE_SRP_AUTH"){this.Session=e.Session,this.getDeviceResponse(o);return}this.signInUserSession=this.getCognitoUserSession(e.AuthenticationResult),this.challengeName=s,this.cacheTokens();var _=e.AuthenticationResult.NewDeviceMetadata;if(_==null)return o.onSuccess(this.signInUserSession);r.generateHashDevice(e.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,e.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(C){if(C)return o.onFailure(C);var E={Salt:gr.Buffer.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:gr.Buffer.from(r.getVerifierDevices(),"hex").toString("base64")};a.verifierDevices=E.PasswordVerifier,a.deviceGroupKey=_.DeviceGroupKey,a.randomPassword=r.getRandomPassword(),a.client.request("ConfirmDevice",{DeviceKey:_.DeviceKey,AccessToken:a.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:E,DeviceName:AO},function(D,F){return D?o.onFailure(D):(a.deviceKey=e.AuthenticationResult.NewDeviceMetadata.DeviceKey,a.cacheDeviceKeyAndPassword(),F.UserConfirmationNecessary===!0?o.onSuccess(a.signInUserSession,F.UserConfirmationNecessary):o.onSuccess(a.signInUserSession))})})},n.completeNewPasswordChallenge=function(e,r,o,a){var s=this;if(!e)return o.onFailure(new Error("New password is required."));var u=new Zd(this.pool.getUserPoolName()),c=u.getNewPasswordRequiredChallengeUserAttributePrefix(),h={};r&&Object.keys(r).forEach(function(m){h[c+m]=r[m]}),h.NEW_PASSWORD=e,h.USERNAME=this.username;var v={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:h,Session:this.Session,ClientMetadata:a};this.getUserContextData()&&(v.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",v,function(m,y){return m?o.onFailure(m):s.authenticateUserInternal(y,u,o)})},n.getDeviceResponse=function(e,r){var o=this,a=new Zd(this.deviceGroupKey),s=new OO,u={};u.USERNAME=this.username,u.DEVICE_KEY=this.deviceKey,a.getLargeAValue(function(c,h){c&&e.onFailure(c),u.SRP_A=h.toString(16);var v={ChallengeName:"DEVICE_SRP_AUTH",ClientId:o.pool.getClientId(),ChallengeResponses:u,ClientMetadata:r,Session:o.Session};o.getUserContextData()&&(v.UserContextData=o.getUserContextData()),o.client.request("RespondToAuthChallenge",v,function(m,y){if(m)return e.onFailure(m);var _=y.ChallengeParameters,C=new Ie(_.SRP_B,16),E=new Ie(_.SALT,16);a.getPasswordAuthenticationKey(o.deviceKey,o.randomPassword,C,E,function(D,F){if(D)return e.onFailure(D);var V=s.getNowString(),K=gr.Buffer.concat([gr.Buffer.from(o.deviceGroupKey,"utf8"),gr.Buffer.from(o.deviceKey,"utf8"),gr.Buffer.from(_.SECRET_BLOCK,"base64"),gr.Buffer.from(V,"utf8")]),Z=new Hv.Sha256(F);Z.update(K);var ct=Z.digestSync(),ht=gr.Buffer.from(ct).toString("base64"),st={};st.USERNAME=o.username,st.PASSWORD_CLAIM_SECRET_BLOCK=_.SECRET_BLOCK,st.TIMESTAMP=V,st.PASSWORD_CLAIM_SIGNATURE=ht,st.DEVICE_KEY=o.deviceKey;var et={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:o.pool.getClientId(),ChallengeResponses:st,Session:y.Session};o.getUserContextData()&&(et.UserContextData=o.getUserContextData()),o.client.request("RespondToAuthChallenge",et,function(nt,it){return nt?e.onFailure(nt):(o.signInUserSession=o.getCognitoUserSession(it.AuthenticationResult),o.cacheTokens(),e.onSuccess(o.signInUserSession))})})})})},n.confirmRegistration=function(e,r,o,a){var s={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:r,ClientMetadata:a};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",s,function(u){return u?o(u,null):o(null,"SUCCESS")})},n.sendCustomChallengeAnswer=function(e,r,o){var a=this,s={};s.USERNAME=this.username,s.ANSWER=e;var u=new Zd(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(s.DEVICE_KEY=this.deviceKey);var c={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:s,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:o};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",c,function(h,v){return h?r.onFailure(h):a.authenticateUserInternal(v,u,r)})},n.sendMFACode=function(e,r,o,a){var s=this,u={};u.USERNAME=this.username,u.SMS_MFA_CODE=e;var c=o||"SMS_MFA";c==="SOFTWARE_TOKEN_MFA"&&(u.SOFTWARE_TOKEN_MFA_CODE=e),this.deviceKey!=null&&(u.DEVICE_KEY=this.deviceKey);var h={ChallengeName:c,ChallengeResponses:u,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:a};this.getUserContextData()&&(h.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",h,function(v,m){if(v)return r.onFailure(v);var y=m.ChallengeName;if(y==="DEVICE_SRP_AUTH"){s.getDeviceResponse(r);return}if(s.signInUserSession=s.getCognitoUserSession(m.AuthenticationResult),s.cacheTokens(),m.AuthenticationResult.NewDeviceMetadata==null)return r.onSuccess(s.signInUserSession);var _=new Zd(s.pool.getUserPoolName());_.generateHashDevice(m.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,m.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(C){if(C)return r.onFailure(C);var E={Salt:gr.Buffer.from(_.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:gr.Buffer.from(_.getVerifierDevices(),"hex").toString("base64")};s.verifierDevices=E.PasswordVerifier,s.deviceGroupKey=m.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,s.randomPassword=_.getRandomPassword(),s.client.request("ConfirmDevice",{DeviceKey:m.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:s.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:E,DeviceName:AO},function(D,F){return D?r.onFailure(D):(s.deviceKey=m.AuthenticationResult.NewDeviceMetadata.DeviceKey,s.cacheDeviceKeyAndPassword(),F.UserConfirmationNecessary===!0?r.onSuccess(s.signInUserSession,F.UserConfirmationNecessary):r.onSuccess(s.signInUserSession))})})})},n.changePassword=function(e,r,o,a){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return o(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:a},function(s){return s?o(s,null):o(null,"SUCCESS")})},n.enableMFA=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var r=[],o={DeliveryMedium:"SMS",AttributeName:"phone_number"};r.push(o),this.client.request("SetUserSettings",{MFAOptions:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?e(a,null):e(null,"SUCCESS")})},n.setUserMfaPreference=function(e,r,o){if(this.signInUserSession==null||!this.signInUserSession.isValid())return o(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?o(a,null):o(null,"SUCCESS")})},n.disableMFA=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var r=[];this.client.request("SetUserSettings",{MFAOptions:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(o){return o?e(o,null):e(null,"SUCCESS")})},n.deleteUser=function(e,r){var o=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(a){return a?e(a,null):(o.clearCachedUser(),e(null,"SUCCESS"))})},n.updateAttributes=function(e,r,o){var a=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:o},function(s,u){return s?r(s,null):a.getUserData(function(){return r(null,"SUCCESS",u)},{bypassCache:!0})})},n.getUserAttributes=function(e){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(r,o){if(r)return e(r,null);for(var a=[],s=0;s<o.UserAttributes.length;s++){var u={Name:o.UserAttributes[s].Name,Value:o.UserAttributes[s].Value},c=new BF(u);a.push(c)}return e(null,a)})},n.getMFAOptions=function(e){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(r,o){return r?e(r,null):e(null,o.MFAOptions)})},n.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},n.refreshSessionIfPossible=function(e){var r=this;return e===void 0&&(e={}),new Promise(function(o){var a=r.signInUserSession.getRefreshToken();a&&a.getToken()?r.refreshSession(a,o,e.clientMetadata):o()})},n.getUserData=function(e,r){var o=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return this.clearCachedUserData(),e(new Error("User is not authenticated"),null);var a=this.getUserDataFromCache();if(!a){this.fetchUserData().then(function(s){e(null,s)}).catch(e);return}if(this.isFetchUserDataAndTokenRequired(r)){this.fetchUserData().then(function(s){return o.refreshSessionIfPossible(r).then(function(){return s})}).then(function(s){return e(null,s)}).catch(e);return}try{e(null,JSON.parse(a));return}catch(s){this.clearCachedUserData(),e(s,null);return}},n.getUserDataFromCache=function(){var e=this.storage.getItem(this.userDataKey);return e},n.isFetchUserDataAndTokenRequired=function(e){var r=e||{},o=r.bypassCache,a=o===void 0?!1:o;return a},n.fetchUserData=function(){var e=this;return this.createGetUserRequest().then(function(r){return e.cacheUserData(r),r})},n.deleteAttributes=function(e,r){var o=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return r(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?r(a,null):o.getUserData(function(){return r(null,"SUCCESS")},{bypassCache:!0})})},n.resendConfirmationCode=function(e,r){var o={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:r};this.client.request("ResendConfirmationCode",o,function(a,s){return a?e(a,null):e(null,s)})},n.getSession=function(e,r){if(r===void 0&&(r={}),this.username==null)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(this.signInUserSession!=null&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var o="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,a=o+".idToken",s=o+".accessToken",u=o+".refreshToken",c=o+".clockDrift";if(this.storage.getItem(a)){var h=new CO({IdToken:this.storage.getItem(a)}),v=new _O({AccessToken:this.storage.getItem(s)}),m=new TO({RefreshToken:this.storage.getItem(u)}),y=parseInt(this.storage.getItem(c),0)||0,_={IdToken:h,AccessToken:v,RefreshToken:m,ClockDrift:y},C=new EO(_);if(C.isValid())return this.signInUserSession=C,e(null,this.signInUserSession);if(!m.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(m,e,r.clientMetadata)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},n.refreshSession=function(e,r,o){var a=this,s=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(r):r,u={};u.REFRESH_TOKEN=e.getToken();var c="CognitoIdentityServiceProvider."+this.pool.getClientId(),h=c+".LastAuthUser";if(this.storage.getItem(h)){this.username=this.storage.getItem(h);var v=c+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(v),u.DEVICE_KEY=this.deviceKey}var m={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:u,ClientMetadata:o};this.getUserContextData()&&(m.UserContextData=this.getUserContextData()),this.client.requestWithRetry("InitiateAuth",m,function(y,_){if(y)return y.code==="NotAuthorizedException"&&a.clearCachedUser(),s(y,null);if(_){var C=_.AuthenticationResult;return Object.prototype.hasOwnProperty.call(C,"RefreshToken")||(C.RefreshToken=e.getToken()),a.signInUserSession=a.getCognitoUserSession(C),a.cacheTokens(),s(null,a.signInUserSession)}})},n.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),r=e+"."+this.username+".idToken",o=e+"."+this.username+".accessToken",a=e+"."+this.username+".refreshToken",s=e+"."+this.username+".clockDrift",u=e+".LastAuthUser";this.storage.setItem(r,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(o,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(a,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(s,""+this.signInUserSession.getClockDrift()),this.storage.setItem(u,this.username)},n.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},n.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},n.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},n.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=e+".deviceKey",o=e+".randomPasswordKey",a=e+".deviceGroupKey";this.storage.setItem(r,this.deviceKey),this.storage.setItem(o,this.randomPassword),this.storage.setItem(a,this.deviceGroupKey)},n.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=e+".deviceKey",o=e+".randomPasswordKey",a=e+".deviceGroupKey";this.storage.getItem(r)&&(this.deviceKey=this.storage.getItem(r),this.randomPassword=this.storage.getItem(o),this.deviceGroupKey=this.storage.getItem(a))},n.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=e+".deviceKey",o=e+".randomPasswordKey",a=e+".deviceGroupKey";this.storage.removeItem(r),this.storage.removeItem(o),this.storage.removeItem(a)},n.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),r=e+"."+this.username+".idToken",o=e+"."+this.username+".accessToken",a=e+"."+this.username+".refreshToken",s=e+".LastAuthUser",u=e+"."+this.username+".clockDrift";this.storage.removeItem(r),this.storage.removeItem(o),this.storage.removeItem(a),this.storage.removeItem(s),this.storage.removeItem(u)},n.getCognitoUserSession=function(e){var r=new CO(e),o=new _O(e),a=new TO(e),s={IdToken:r,AccessToken:o,RefreshToken:a};return new EO(s)},n.forgotPassword=function(e,r){var o={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:r};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",o,function(a,s){return a?e.onFailure(a):typeof e.inputVerificationCode=="function"?e.inputVerificationCode(s):e.onSuccess(s)})},n.confirmPassword=function(e,r,o,a){var s={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:r,ClientMetadata:a};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",s,function(u){return u?o.onFailure(u):o.onSuccess("SUCCESS")})},n.getAttributeVerificationCode=function(e,r,o){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:o},function(a,s){return a?r.onFailure(a):typeof r.inputVerificationCode=="function"?r.inputVerificationCode(s):r.onSuccess("SUCCESS")})},n.verifyAttribute=function(e,r,o){if(this.signInUserSession==null||!this.signInUserSession.isValid())return o.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?o.onFailure(a):o.onSuccess("SUCCESS")})},n.getDevice=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(r,o){return r?e.onFailure(r):e.onSuccess(o)})},n.forgetSpecificDevice=function(e,r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(o){return o?r.onFailure(o):r.onSuccess("SUCCESS")})},n.forgetDevice=function(e){var r=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:e.onFailure,onSuccess:function(a){return r.deviceKey=null,r.deviceGroupKey=null,r.randomPassword=null,r.clearCachedDeviceKeyAndPassword(),e.onSuccess(a)}})},n.setDeviceStatusRemembered=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(r){return r?e.onFailure(r):e.onSuccess("SUCCESS")})},n.setDeviceStatusNotRemembered=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(r){return r?e.onFailure(r):e.onSuccess("SUCCESS")})},n.listDevices=function(e,r,o){if(this.signInUserSession==null||!this.signInUserSession.isValid())return o.onFailure(new Error("User is not authenticated"));var a={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};r&&(a.PaginationToken=r),this.client.request("ListDevices",a,function(s,u){return s?o.onFailure(s):o.onSuccess(u)})},n.globalSignOut=function(e){var r=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(o){return o?e.onFailure(o):(r.clearCachedUser(),e.onSuccess("SUCCESS"))})},n.signOut=function(e){var r=this;if(!e||typeof e!="function"){this.cleanClientData();return}this.getSession(function(o,a){if(o)return e(o);r.revokeTokens(function(s){r.cleanClientData(),e(s)})})},n.revokeTokens=function(e){if(e===void 0&&(e=function(){}),typeof e!="function")throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession){var r=new Error("User is not authenticated");return e(r)}if(!this.signInUserSession.getAccessToken()){var o=new Error("No Access token available");return e(o)}var a=this.signInUserSession.getRefreshToken().getToken(),s=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(s)&&a)return this.revokeToken({token:a,callback:e});e()},n.isSessionRevocable=function(e){if(e&&typeof e.decodePayload=="function")try{var r=e.decodePayload(),o=r.origin_jti;return!!o}catch{}return!1},n.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},n.revokeToken=function(e){var r=e.token,o=e.callback;this.client.requestWithRetry("RevokeToken",{Token:r,ClientId:this.pool.getClientId()},function(a){if(a)return o(a);o()})},n.sendMFASelectionAnswer=function(e,r){var o=this,a={};a.USERNAME=this.username,a.ANSWER=e;var s={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:a,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",s,function(u,c){if(u)return r.onFailure(u);if(o.Session=c.Session,e==="SMS_MFA")return r.mfaRequired(c.ChallengeName,c.ChallengeParameters);if(e==="SOFTWARE_TOKEN_MFA")return r.totpRequired(c.ChallengeName,c.ChallengeParameters)})},n.getUserContextData=function(){var e=this.pool;return e.getUserContextData(this.username)},n.associateSoftwareToken=function(e){var r=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(o,a){return o?e.onFailure(o):e.associateSecretCode(a.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(o,a){return o?e.onFailure(o):(r.Session=a.Session,e.associateSecretCode(a.SecretCode))})},n.verifySoftwareToken=function(e,r,o){var a=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:r},function(s,u){return s?o.onFailure(s):o.onSuccess(u)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:r},function(s,u){if(s)return o.onFailure(s);a.Session=u.Session;var c={};c.USERNAME=a.username;var h={ChallengeName:"MFA_SETUP",ClientId:a.pool.getClientId(),ChallengeResponses:c,Session:a.Session};a.getUserContextData()&&(h.UserContextData=a.getUserContextData()),a.client.request("RespondToAuthChallenge",h,function(v,m){return v?o.onFailure(v):(a.signInUserSession=a.getCognitoUserSession(m.AuthenticationResult),a.cacheTokens(),o.onSuccess(a.signInUserSession))})})},i}();function FF(i,n){return n=n||{},new Promise(function(t,e){var r=new XMLHttpRequest,o=[],a=[],s={},u=function(){return{ok:(r.status/100|0)==2,statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(r.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:u,headers:{keys:function(){return o},entries:function(){return a},get:function(h){return s[h.toLowerCase()]},has:function(h){return h.toLowerCase()in s}}}};for(var c in r.open(n.method||"get",i,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(h,v,m){o.push(v=v.toLowerCase()),a.push([v,m]),s[v]=s[v]?s[v]+","+m:m}),t(u())},r.onerror=e,r.withCredentials=n.credentials=="include",n.headers)r.setRequestHeader(c,n.headers[c]);r.send(n.body||null)})}const HF=Object.freeze(Object.defineProperty({__proto__:null,default:FF},Symbol.toStringTag,{value:"Module"})),kO=B_(HF);var _x,MO;function zF(){return MO||(MO=1,_x=self.fetch||(self.fetch=kO.default||kO)),_x}zF();function sh(){}sh.prototype.userAgent=LF();var WF=function(n){var t=sh.category?" "+sh.category:"",e=sh.framework?" framework/"+sh.framework:"",r=""+sh.prototype.userAgent+t+e;return r};function qF(i,n){i.prototype=Object.create(n.prototype),i.prototype.constructor=i,fg(i,n)}function YS(i){var n=typeof Map=="function"?new Map:void 0;return YS=function(e){if(e===null||!$F(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(n!==void 0){if(n.has(e))return n.get(e);n.set(e,r)}function r(){return KF(e,arguments,XS(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),fg(r,e)},YS(i)}function KF(i,n,t){if(gD())return Reflect.construct.apply(null,arguments);var e=[null];e.push.apply(e,n);var r=new(i.bind.apply(i,e));return t&&fg(r,t.prototype),r}function gD(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gD=function(){return!!i})()}function $F(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}}function fg(i,n){return fg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fg(i,n)}function XS(i){return XS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},XS(i)}var GF=function(i){function n(t,e,r,o){var a;return a=i.call(this,t)||this,a.code=e,a.name=r,a.statusCode=o,a}return qF(n,i),n}(YS(Error)),YF=function(){function i(t,e,r){this.endpoint=e||"https://cognito-idp."+t+".amazonaws.com/";var o=r||{},a=o.credentials;this.fetchOptions=a?{credentials:a}:{}}var n=i.prototype;return n.promisifyRequest=function(e,r){var o=this;return new Promise(function(a,s){o.request(e,r,function(u,c){u?s(new GF(u.message,u.code,u.name,u.statusCode)):a(c)})})},n.requestWithRetry=function(e,r,o){var a=this,s=5*1e3;ZF(function(u){return new Promise(function(c,h){a.request(e,u,function(v,m){v?h(v):c(m)})})},[r],s).then(function(u){return o(null,u)}).catch(function(u){return o(u)})},n.request=function(e,r,o){var a={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":WF(),"Cache-Control":"no-store"},s=Object.assign({},this.fetchOptions,{headers:a,method:"POST",mode:"cors",body:JSON.stringify(r)}),u;fetch(this.endpoint,s).then(function(c){return u=c,c},function(c){throw c instanceof TypeError?new Error("Network error"):c}).then(function(c){return c.json().catch(function(){return{}})}).then(function(c){if(u.ok)return o(null,c);var h=(c.__type||c.code).split("#").pop(),v=new Error(c.message||c.Message||null);return v.name=h,v.code=h,o(v)}).catch(function(c){if(u&&u.headers&&u.headers.get("x-amzn-errortype"))try{var h=u.headers.get("x-amzn-errortype").split(":")[0],v=new Error(u.status?u.status.toString():null);return v.code=h,v.name=h,v.statusCode=u.status,o(v)}catch{return o(c)}else c instanceof Error&&c.message==="Network error"&&(c.code="NetworkError");return o(c)})},i}(),Km={debug:function(){}},XF=function(n){var t="nonRetryable";return n&&n[t]};function mD(i,n,t,e){if(e===void 0&&(e=1),typeof i!="function")throw Error("functionToRetry must be a function");return Km.debug(i.name+" attempt #"+e+" with args: "+JSON.stringify(n)),i.apply(void 0,n).catch(function(r){if(Km.debug("error on "+i.name,r),XF(r))throw Km.debug(i.name+" non retryable error",r),r;var o=t(e,n,r);if(Km.debug(i.name+" retrying in "+o+" ms"),o!==!1)return new Promise(function(a){return setTimeout(a,o)}).then(function(){return mD(i,n,t,e+1)});throw r})}function JF(i){var n=100,t=100;return function(e){var r=Math.pow(2,e)*n+t*Math.random();return r>i?!1:r}}function ZF(i,n,t){return mD(i,n,JF(t))}/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var QF=55,tH=function(){function i(t,e){var r=t||{},o=r.UserPoolId,a=r.ClientId,s=r.endpoint,u=r.fetchOptions,c=r.AdvancedSecurityDataCollectionFlag;if(!o||!a)throw new Error("Both UserPoolId and ClientId are required.");if(o.length>QF||!/^[\w-]+_[0-9a-zA-Z]+$/.test(o))throw new Error("Invalid UserPoolId format.");var h=o.split("_")[0];this.userPoolId=o,this.clientId=a,this.client=new YF(h,s,u),this.advancedSecurityDataCollectionFlag=c!==!1,this.storage=t.Storage||new vD().getStorage(),e&&(this.wrapRefreshSessionCallback=e)}var n=i.prototype;return n.getUserPoolId=function(){return this.userPoolId},n.getUserPoolName=function(){return this.getUserPoolId().split("_")[1]},n.getClientId=function(){return this.clientId},n.signUp=function(e,r,o,a,s,u){var c=this,h={ClientId:this.clientId,Username:e,Password:r,UserAttributes:o,ValidationData:a,ClientMetadata:u};this.getUserContextData(e)&&(h.UserContextData=this.getUserContextData(e)),this.client.request("SignUp",h,function(v,m){if(v)return s(v,null);var y={Username:e,Pool:c,Storage:c.storage},_={user:new Uh(y),userConfirmed:m.UserConfirmed,userSub:m.UserSub,codeDeliveryDetails:m.CodeDeliveryDetails};return s(null,_)})},n.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",r=this.storage.getItem(e);if(r){var o={Username:r,Pool:this,Storage:this.storage};return new Uh(o)}return null},n.getUserContextData=function(e){if(!(typeof AmazonCognitoAdvancedSecurityData>"u")){var r=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var o=r.getData(e,this.userPoolId,this.clientId);if(o){var a={EncodedData:o};return a}}return{}}},i}(),Cx={exports:{}};/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */var DO;function eH(){return DO||(DO=1,function(i,n){(function(t){var e;if(i.exports=t(),e=!0,!e){var r=window.Cookies,o=window.Cookies=t();o.noConflict=function(){return window.Cookies=r,o}}})(function(){function t(){for(var o=0,a={};o<arguments.length;o++){var s=arguments[o];for(var u in s)a[u]=s[u]}return a}function e(o){return o.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function r(o){function a(){}function s(c,h,v){if(!(typeof document>"u")){v=t({path:"/"},a.defaults,v),typeof v.expires=="number"&&(v.expires=new Date(new Date*1+v.expires*864e5)),v.expires=v.expires?v.expires.toUTCString():"";try{var m=JSON.stringify(h);/^[\{\[]/.test(m)&&(h=m)}catch{}h=o.write?o.write(h,c):encodeURIComponent(String(h)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),c=encodeURIComponent(String(c)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var y="";for(var _ in v)v[_]&&(y+="; "+_,v[_]!==!0&&(y+="="+v[_].split(";")[0]));return document.cookie=c+"="+h+y}}function u(c,h){if(!(typeof document>"u")){for(var v={},m=document.cookie?document.cookie.split("; "):[],y=0;y<m.length;y++){var _=m[y].split("="),C=_.slice(1).join("=");!h&&C.charAt(0)==='"'&&(C=C.slice(1,-1));try{var E=e(_[0]);if(C=(o.read||o)(C,E)||e(C),h)try{C=JSON.parse(C)}catch{}if(v[E]=C,c===E)break}catch{}}return c?v[c]:v}}return a.set=s,a.get=function(c){return u(c,!1)},a.getJSON=function(c){return u(c,!0)},a.remove=function(c,h){s(c,"",t(h,{expires:-1}))},a.defaults={},a.withConverter=r,a}return r(function(){})})}(Cx)),Cx.exports}eH();const nH={UserPoolId:"us-east-1_vjf6EIHnc",ClientId:"3u26dmo01veihoa7sofil4uuq1"},dg=new tH(nH),rH=()=>{const[i,n]=Nt.useState(""),[t,e]=Nt.useState(""),[r,o]=Nt.useState(""),a=Rs(),s=u=>{u.preventDefault(),dg.signUp(i,t,[],null,(c,h)=>{c?o(`Registration failed: ${c.message}`):a("/confirm",{state:{email:i}})})};return j.jsxs("div",{className:"max-w-md mx-auto mt-20 p-6 bg-white rounded-xl shadow",children:[j.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create Account"}),j.jsxs("form",{onSubmit:s,className:"space-y-4",children:[j.jsx("input",{type:"email",placeholder:"Email Address",className:"w-full p-2 border rounded",value:i,onChange:u=>n(u.target.value),required:!0}),j.jsx("input",{type:"password",placeholder:"Password",className:"w-full p-2 border rounded",value:t,onChange:u=>e(u.target.value),required:!0}),j.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700",children:"Register"})]}),r&&j.jsx("p",{className:"mt-4 text-center text-sm text-gray-700",children:r})]})},iH=()=>{const i=Rs(),n=us(),[t,e]=Nt.useState(""),[r,o]=Nt.useState(""),[a,s]=Nt.useState(""),[u,c]=Nt.useState("");Nt.useEffect(()=>{var m;const v=localStorage.getItem("token");if(v)try{const y=JSON.parse(atob(v.split(".")[1])),_=Date.now()/1e3;if(y.exp>_){i("/campaigns",{replace:!0});return}}catch{}(m=n.state)!=null&&m.message&&(c(n.state.message),window.history.replaceState({},document.title))},[n.state,i]);const h=v=>{v.preventDefault(),s("");const m=new Uh({Username:t,Pool:dg}),y=new n5({Username:t,Password:r});m.authenticateUser(y,{onSuccess:_=>{console.log("Login successful:",_);const C=_.getAccessToken().getJwtToken();localStorage.setItem("token",C);const D=JSON.parse(atob(C.split(".")[1])).sub;localStorage.setItem("user_id",D),i("/campaigns",{replace:!0})},onFailure:_=>{console.error("Login error:",_),s(_.message||"Login failed")}})};return j.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-purple-100 to-pink-100",children:j.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl w-96",children:[j.jsx("h2",{className:"text-3xl font-bold mb-6 text-center bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Welcome Back"}),u&&j.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:u}),a&&j.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:a}),j.jsxs("form",{onSubmit:h,className:"space-y-4",children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),j.jsx("input",{type:"email",placeholder:"your@email.com",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",value:t,onChange:v=>e(v.target.value),required:!0})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),j.jsx("input",{type:"password",placeholder:"",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",value:r,onChange:v=>o(v.target.value),required:!0})]}),j.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:scale-105 transition-transform shadow-lg",children:"Log In"})]}),j.jsxs("div",{className:"text-sm text-center mt-6 space-y-2",children:[j.jsxs("div",{children:["No account yet?"," ",j.jsx("a",{href:"/register",className:"text-purple-600 hover:underline font-semibold",children:"Register"})]}),j.jsx("div",{children:j.jsx("a",{href:"/forgot-password",className:"text-purple-600 hover:underline",children:"Forgot Password?"})})]})]})})},oH=()=>{var c;const i=us(),n=Rs(),[t,e]=Nt.useState(((c=i.state)==null?void 0:c.email)||""),[r,o]=Nt.useState(""),[a,s]=Nt.useState(""),u=h=>{h.preventDefault(),new Uh({Username:t,Pool:dg}).confirmRegistration(r,!0,(m,y)=>{m?s(`Verification failed: ${m.message}`):n("/login",{replace:!0,state:{message:"Account verified successfully, please log in."}})})};return j.jsxs("div",{className:"max-w-md mx-auto mt-20 p-6 bg-white rounded-xl shadow",children:[j.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Account Verification"}),j.jsxs("form",{onSubmit:u,className:"space-y-4",children:[j.jsx("input",{type:"email",placeholder:"Email Address",className:"w-full p-2 border rounded",value:t,onChange:h=>e(h.target.value),required:!0}),j.jsx("input",{type:"text",placeholder:"Verification Code",className:"w-full p-2 border rounded",value:r,onChange:h=>o(h.target.value),required:!0}),j.jsx("button",{type:"submit",className:"w-full bg-green-600 text-white p-2 rounded hover:bg-green-700",children:"Verify"})]}),a&&j.jsx("p",{className:"mt-4 text-center text-sm text-red-600",children:a})]})},aH=()=>{const[i,n]=Nt.useState(""),[t,e]=Nt.useState(""),[r,o]=Nt.useState(""),[a,s]=Nt.useState(1),[u,c]=Nt.useState(""),h=m=>{m.preventDefault(),new Uh({Username:i,Pool:dg}).forgotPassword({onSuccess:()=>{c("Verification code sent successfully! Please check your email."),s(2)},onFailure:_=>{c(`Error: ${_.message}`)}})},v=m=>{m.preventDefault(),new Uh({Username:i,Pool:dg}).confirmPassword(t,r,{onSuccess:()=>{c("Password reset successful! You can log in now.")},onFailure:_=>{c(`Error: ${_.message}`)}})};return j.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100",children:j.jsxs("div",{className:"bg-white p-6 rounded shadow-md w-96",children:[j.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Forgot Password"}),u&&j.jsx("p",{className:"mb-4 text-sm text-blue-600",children:u}),a===1?j.jsxs("form",{onSubmit:h,className:"space-y-4",children:[j.jsx("input",{type:"email",placeholder:"Enter Email",className:"w-full p-2 border rounded",value:i,onChange:m=>n(m.target.value),required:!0}),j.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:"Send Verification Code"})]}):j.jsxs("form",{onSubmit:v,className:"space-y-4",children:[j.jsx("input",{type:"text",placeholder:"Verification Code",className:"w-full p-2 border rounded",value:t,onChange:m=>e(m.target.value),required:!0}),j.jsx("input",{type:"password",placeholder:"New Password",className:"w-full p-2 border rounded",value:r,onChange:m=>o(m.target.value),required:!0}),j.jsx("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700",children:"Reset Password"})]})]})})};class Ev extends Error{}Ev.prototype.name="InvalidTokenError";function sH(i){return decodeURIComponent(atob(i).replace(/(.)/g,(n,t)=>{let e=t.charCodeAt(0).toString(16).toUpperCase();return e.length<2&&(e="0"+e),"%"+e}))}function lH(i){let n=i.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return sH(n)}catch{return atob(n)}}function yD(i,n){if(typeof i!="string")throw new Ev("Invalid token specified: must be a string");n||(n={});const t=n.header===!0?0:1,e=i.split(".")[t];if(typeof e!="string")throw new Ev(`Invalid token specified: missing part #${t+1}`);let r;try{r=lH(e)}catch(o){throw new Ev(`Invalid token specified: invalid base64 for part #${t+1} (${o.message})`)}try{return JSON.parse(r)}catch(o){throw new Ev(`Invalid token specified: invalid json for part #${t+1} (${o.message})`)}}const Yu=({children:i})=>{const n=localStorage.getItem("token");if(!n)return j.jsx(Dv,{to:"/login",replace:!0});try{const t=yD(n),e=Date.now()/1e3;if(t.exp<e)return localStorage.removeItem("token"),localStorage.removeItem("user_id"),j.jsx(Dv,{to:"/login",replace:!0})}catch(t){return console.error("Invalid token:",t),localStorage.removeItem("token"),localStorage.removeItem("user_id"),j.jsx(Dv,{to:"/login",replace:!0})}return i},uH=()=>{const i=Rs(),n=us(),[t,e]=Nt.useState(!1),[r,o]=Nt.useState(""),[a,s]=Nt.useState(!1);Nt.useEffect(()=>{u()},[n.pathname]);const u=()=>{const m=localStorage.getItem("token");if(m)try{const y=yD(m),_=Date.now()/1e3;y.exp>_?(e(!0),o(y.email||y.username||"User")):c(!1)}catch(y){console.error("Token decoding failed:",y),c(!1)}else e(!1)},c=(m=!0)=>{localStorage.removeItem("token"),localStorage.removeItem("user_id"),e(!1),o(""),s(!1),m&&i("/login")},h=n.pathname==="/drip-dashboard",v=m=>n.pathname===m;return j.jsx("nav",{className:"bg-white shadow-lg border-b-4 border-gradient-to-r from-purple-600 to-pink-600",children:j.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4",children:[j.jsxs("div",{className:"flex justify-between items-center",children:[j.jsxs(Tr,{to:t?"/campaigns":"/login",className:"flex items-center gap-3 text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent hover:scale-105 transition-transform",children:[j.jsx(gf,{size:40,className:"text-purple-600"}),j.jsx("span",{className:"hidden sm:inline",children:"Email Marketing"}),j.jsx("span",{className:"sm:hidden",children:"EMP"})]}),t?j.jsxs(j.Fragment,{children:[j.jsxs("div",{className:"hidden lg:flex items-center gap-6",children:[j.jsxs("div",{className:"flex items-center gap-6",children:[j.jsx(Tr,{to:"/campaigns",className:`text-lg font-semibold transition-all ${v("/campaigns")?"text-purple-600 border-b-4 border-purple-600 pb-1":"text-gray-700 hover:text-purple-600"}`,children:" Campaigns"}),j.jsx(Tr,{to:"/create",className:`text-lg font-semibold transition-all ${v("/create")?"text-purple-600 border-b-4 border-purple-600 pb-1":"text-gray-700 hover:text-purple-600"}`,children:" Create"}),j.jsx(Tr,{to:"/drip-builder",className:`text-lg font-semibold transition-all ${v("/drip-builder")?"text-purple-600 border-b-4 border-purple-600 pb-1":"text-gray-700 hover:text-purple-600"}`,children:" Drip Builder"})]}),j.jsxs("div",{className:"flex items-center gap-4",children:[j.jsxs(Tr,{to:"/templates",className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-lg font-bold rounded-xl hover:scale-105 transition-all shadow-lg",children:[j.jsx(fS,{size:24}),"Templates"]}),!h&&j.jsxs("button",{onClick:()=>i("/drip-dashboard"),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-lg font-bold rounded-xl hover:scale-105 transition-all shadow-lg",children:[j.jsx(_T,{size:24}),"Dashboard"]})]}),j.jsxs("div",{className:"flex items-center gap-4 ml-4 pl-4 border-l-2 border-gray-300",children:[j.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 px-4 py-2 rounded-lg",children:[j.jsx(MT,{size:20,className:"text-purple-600"}),j.jsx("span",{className:"text-sm font-medium text-gray-700",children:r})]}),j.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition font-medium",children:[j.jsx(ET,{size:18}),"Logout"]})]})]}),j.jsx("button",{onClick:()=>s(!a),className:"lg:hidden p-2 text-gray-700 hover:text-purple-600 transition",children:a?j.jsx(Ak,{size:32}):j.jsx(mj,{size:32})})]}):j.jsxs("div",{className:"flex items-center gap-4",children:[j.jsx(Tr,{to:"/login",className:"text-lg text-gray-700 hover:text-purple-600 font-semibold transition",children:"Login"}),j.jsx(Tr,{to:"/register",className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-2 rounded-lg hover:scale-105 transition font-semibold",children:"Register"})]})]}),t&&a&&j.jsxs("div",{className:"lg:hidden mt-4 pb-4 border-t-2 border-gray-200 pt-4 space-y-4 animate-fadeIn",children:[j.jsx(Tr,{to:"/campaigns",onClick:()=>s(!1),className:`block px-4 py-3 rounded-lg font-semibold transition ${v("/campaigns")?"bg-purple-100 text-purple-600":"text-gray-700 hover:bg-gray-100"}`,children:" Campaigns"}),j.jsx(Tr,{to:"/create",onClick:()=>s(!1),className:`block px-4 py-3 rounded-lg font-semibold transition ${v("/create")?"bg-purple-100 text-purple-600":"text-gray-700 hover:bg-gray-100"}`,children:" Create Campaign"}),j.jsx(Tr,{to:"/drip-builder",onClick:()=>s(!1),className:`block px-4 py-3 rounded-lg font-semibold transition ${v("/drip-builder")?"bg-purple-100 text-purple-600":"text-gray-700 hover:bg-gray-100"}`,children:" Drip Builder"}),j.jsxs(Tr,{to:"/templates",onClick:()=>s(!1),className:"block px-4 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold rounded-lg hover:scale-105 transition text-center",children:[j.jsx(fS,{size:20,className:"inline mr-2"}),"Templates"]}),!h&&j.jsxs("button",{onClick:()=>{i("/drip-dashboard"),s(!1)},className:"w-full px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-lg hover:scale-105 transition text-center",children:[j.jsx(_T,{size:20,className:"inline mr-2"}),"Dashboard"]}),j.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-gray-200",children:[j.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg mb-3",children:[j.jsx(MT,{size:20,className:"text-purple-600"}),j.jsx("span",{className:"text-sm font-medium text-gray-700",children:r})]}),j.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-center gap-2 bg-red-500 text-white px-4 py-3 rounded-lg hover:bg-red-600 transition font-bold",children:[j.jsx(ET,{size:20}),"Logout"]})]})]})]})})},bD=6048e5,cH=864e5,$m=43200,PO=1440,NO=Symbol.for("constructDateFrom");function ou(i,n){return typeof i=="function"?i(n):i&&typeof i=="object"&&NO in i?i[NO](n):i instanceof Date?new i.constructor(n):new Date(n)}function Hi(i,n){return ou(n||i,i)}let fH={};function Og(){return fH}function hg(i,n){var s,u,c,h;const t=Og(),e=(n==null?void 0:n.weekStartsOn)??((u=(s=n==null?void 0:n.locale)==null?void 0:s.options)==null?void 0:u.weekStartsOn)??t.weekStartsOn??((h=(c=t.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)??0,r=Hi(i,n==null?void 0:n.in),o=r.getDay(),a=(o<e?7:0)+o-e;return r.setDate(r.getDate()-a),r.setHours(0,0,0,0),r}function u0(i,n){return hg(i,{...n,weekStartsOn:1})}function wD(i,n){const t=Hi(i,n==null?void 0:n.in),e=t.getFullYear(),r=ou(t,0);r.setFullYear(e+1,0,4),r.setHours(0,0,0,0);const o=u0(r),a=ou(t,0);a.setFullYear(e,0,4),a.setHours(0,0,0,0);const s=u0(a);return t.getTime()>=o.getTime()?e+1:t.getTime()>=s.getTime()?e:e-1}function c0(i){const n=Hi(i),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+i-+t}function jb(i,...n){const t=ou.bind(null,i||n.find(e=>typeof e=="object"));return n.map(t)}function RO(i,n){const t=Hi(i,n==null?void 0:n.in);return t.setHours(0,0,0,0),t}function dH(i,n,t){const[e,r]=jb(t==null?void 0:t.in,i,n),o=RO(e),a=RO(r),s=+o-c0(o),u=+a-c0(a);return Math.round((s-u)/cH)}function hH(i,n){const t=wD(i,n),e=ou(i,0);return e.setFullYear(t,0,4),e.setHours(0,0,0,0),u0(e)}function dy(i,n){const t=+Hi(i)-+Hi(n);return t<0?-1:t>0?1:t}function pH(i){return ou(i,Date.now())}function vH(i){return i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]"}function gH(i){return!(!vH(i)&&typeof i!="number"||isNaN(+Hi(i)))}function mH(i,n,t){const[e,r]=jb(t==null?void 0:t.in,i,n),o=e.getFullYear()-r.getFullYear(),a=e.getMonth()-r.getMonth();return o*12+a}function yH(i){return n=>{const e=(i?Math[i]:Math.trunc)(n);return e===0?0:e}}function bH(i,n){return+Hi(i)-+Hi(n)}function wH(i,n){const t=Hi(i,n==null?void 0:n.in);return t.setHours(23,59,59,999),t}function xH(i,n){const t=Hi(i,n==null?void 0:n.in),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(23,59,59,999),t}function SH(i,n){const t=Hi(i,n==null?void 0:n.in);return+wH(t,n)==+xH(t,n)}function _H(i,n,t){const[e,r,o]=jb(t==null?void 0:t.in,i,i,n),a=dy(r,o),s=Math.abs(mH(r,o));if(s<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*s);let u=dy(r,o)===-a;SH(e)&&s===1&&dy(e,o)===1&&(u=!1);const c=a*(s-+u);return c===0?0:c}function CH(i,n,t){const e=bH(i,n)/1e3;return yH(t==null?void 0:t.roundingMethod)(e)}function TH(i,n){const t=Hi(i,n==null?void 0:n.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const EH={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},OH=(i,n,t)=>{let e;const r=EH[i];return typeof r=="string"?e=r:n===1?e=r.one:e=r.other.replace("{{count}}",n.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+e:e+" ago":e};function Tx(i){return(n={})=>{const t=n.width?String(n.width):i.defaultWidth;return i.formats[t]||i.formats[i.defaultWidth]}}const AH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},kH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},MH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},DH={date:Tx({formats:AH,defaultWidth:"full"}),time:Tx({formats:kH,defaultWidth:"full"}),dateTime:Tx({formats:MH,defaultWidth:"full"})},PH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},NH=(i,n,t,e)=>PH[i];function gv(i){return(n,t)=>{const e=t!=null&&t.context?String(t.context):"standalone";let r;if(e==="formatting"&&i.formattingValues){const a=i.defaultFormattingWidth||i.defaultWidth,s=t!=null&&t.width?String(t.width):a;r=i.formattingValues[s]||i.formattingValues[a]}else{const a=i.defaultWidth,s=t!=null&&t.width?String(t.width):i.defaultWidth;r=i.values[s]||i.values[a]}const o=i.argumentCallback?i.argumentCallback(n):n;return r[o]}}const RH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},LH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},jH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},IH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},BH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},UH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},VH=(i,n)=>{const t=Number(i),e=t%100;if(e>20||e<10)switch(e%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},FH={ordinalNumber:VH,era:gv({values:RH,defaultWidth:"wide"}),quarter:gv({values:LH,defaultWidth:"wide",argumentCallback:i=>i-1}),month:gv({values:jH,defaultWidth:"wide"}),day:gv({values:IH,defaultWidth:"wide"}),dayPeriod:gv({values:BH,defaultWidth:"wide",formattingValues:UH,defaultFormattingWidth:"wide"})};function mv(i){return(n,t={})=>{const e=t.width,r=e&&i.matchPatterns[e]||i.matchPatterns[i.defaultMatchWidth],o=n.match(r);if(!o)return null;const a=o[0],s=e&&i.parsePatterns[e]||i.parsePatterns[i.defaultParseWidth],u=Array.isArray(s)?zH(s,v=>v.test(a)):HH(s,v=>v.test(a));let c;c=i.valueCallback?i.valueCallback(u):u,c=t.valueCallback?t.valueCallback(c):c;const h=n.slice(a.length);return{value:c,rest:h}}}function HH(i,n){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&n(i[t]))return t}function zH(i,n){for(let t=0;t<i.length;t++)if(n(i[t]))return t}function WH(i){return(n,t={})=>{const e=n.match(i.matchPattern);if(!e)return null;const r=e[0],o=n.match(i.parsePattern);if(!o)return null;let a=i.valueCallback?i.valueCallback(o[0]):o[0];a=t.valueCallback?t.valueCallback(a):a;const s=n.slice(r.length);return{value:a,rest:s}}}const qH=/^(\d+)(th|st|nd|rd)?/i,KH=/\d+/i,$H={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},GH={any:[/^b/i,/^(a|c)/i]},YH={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},XH={any:[/1/i,/2/i,/3/i,/4/i]},JH={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ZH={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},QH={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},tz={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ez={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},nz={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},rz={ordinalNumber:WH({matchPattern:qH,parsePattern:KH,valueCallback:i=>parseInt(i,10)}),era:mv({matchPatterns:$H,defaultMatchWidth:"wide",parsePatterns:GH,defaultParseWidth:"any"}),quarter:mv({matchPatterns:YH,defaultMatchWidth:"wide",parsePatterns:XH,defaultParseWidth:"any",valueCallback:i=>i+1}),month:mv({matchPatterns:JH,defaultMatchWidth:"wide",parsePatterns:ZH,defaultParseWidth:"any"}),day:mv({matchPatterns:QH,defaultMatchWidth:"wide",parsePatterns:tz,defaultParseWidth:"any"}),dayPeriod:mv({matchPatterns:ez,defaultMatchWidth:"any",parsePatterns:nz,defaultParseWidth:"any"})},xD={code:"en-US",formatDistance:OH,formatLong:DH,formatRelative:NH,localize:FH,match:rz,options:{weekStartsOn:0,firstWeekContainsDate:1}};function iz(i,n){const t=Hi(i,n==null?void 0:n.in);return dH(t,TH(t))+1}function oz(i,n){const t=Hi(i,n==null?void 0:n.in),e=+u0(t)-+hH(t);return Math.round(e/bD)+1}function SD(i,n){var h,v,m,y;const t=Hi(i,n==null?void 0:n.in),e=t.getFullYear(),r=Og(),o=(n==null?void 0:n.firstWeekContainsDate)??((v=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:v.firstWeekContainsDate)??r.firstWeekContainsDate??((y=(m=r.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??1,a=ou((n==null?void 0:n.in)||i,0);a.setFullYear(e+1,0,o),a.setHours(0,0,0,0);const s=hg(a,n),u=ou((n==null?void 0:n.in)||i,0);u.setFullYear(e,0,o),u.setHours(0,0,0,0);const c=hg(u,n);return+t>=+s?e+1:+t>=+c?e:e-1}function az(i,n){var s,u,c,h;const t=Og(),e=(n==null?void 0:n.firstWeekContainsDate)??((u=(s=n==null?void 0:n.locale)==null?void 0:s.options)==null?void 0:u.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(c=t.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??1,r=SD(i,n),o=ou((n==null?void 0:n.in)||i,0);return o.setFullYear(r,0,e),o.setHours(0,0,0,0),hg(o,n)}function sz(i,n){const t=Hi(i,n==null?void 0:n.in),e=+hg(t,n)-+az(t,n);return Math.round(e/bD)+1}function $n(i,n){const t=i<0?"-":"",e=Math.abs(i).toString().padStart(n,"0");return t+e}const Xu={y(i,n){const t=i.getFullYear(),e=t>0?t:1-t;return $n(n==="yy"?e%100:e,n.length)},M(i,n){const t=i.getMonth();return n==="M"?String(t+1):$n(t+1,2)},d(i,n){return $n(i.getDate(),n.length)},a(i,n){const t=i.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(i,n){return $n(i.getHours()%12||12,n.length)},H(i,n){return $n(i.getHours(),n.length)},m(i,n){return $n(i.getMinutes(),n.length)},s(i,n){return $n(i.getSeconds(),n.length)},S(i,n){const t=n.length,e=i.getMilliseconds(),r=Math.trunc(e*Math.pow(10,t-3));return $n(r,n.length)}},Qd={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},LO={G:function(i,n,t){const e=i.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return t.era(e,{width:"abbreviated"});case"GGGGG":return t.era(e,{width:"narrow"});case"GGGG":default:return t.era(e,{width:"wide"})}},y:function(i,n,t){if(n==="yo"){const e=i.getFullYear(),r=e>0?e:1-e;return t.ordinalNumber(r,{unit:"year"})}return Xu.y(i,n)},Y:function(i,n,t,e){const r=SD(i,e),o=r>0?r:1-r;if(n==="YY"){const a=o%100;return $n(a,2)}return n==="Yo"?t.ordinalNumber(o,{unit:"year"}):$n(o,n.length)},R:function(i,n){const t=wD(i);return $n(t,n.length)},u:function(i,n){const t=i.getFullYear();return $n(t,n.length)},Q:function(i,n,t){const e=Math.ceil((i.getMonth()+1)/3);switch(n){case"Q":return String(e);case"QQ":return $n(e,2);case"Qo":return t.ordinalNumber(e,{unit:"quarter"});case"QQQ":return t.quarter(e,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(e,{width:"wide",context:"formatting"})}},q:function(i,n,t){const e=Math.ceil((i.getMonth()+1)/3);switch(n){case"q":return String(e);case"qq":return $n(e,2);case"qo":return t.ordinalNumber(e,{unit:"quarter"});case"qqq":return t.quarter(e,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(e,{width:"wide",context:"standalone"})}},M:function(i,n,t){const e=i.getMonth();switch(n){case"M":case"MM":return Xu.M(i,n);case"Mo":return t.ordinalNumber(e+1,{unit:"month"});case"MMM":return t.month(e,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(e,{width:"wide",context:"formatting"})}},L:function(i,n,t){const e=i.getMonth();switch(n){case"L":return String(e+1);case"LL":return $n(e+1,2);case"Lo":return t.ordinalNumber(e+1,{unit:"month"});case"LLL":return t.month(e,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(e,{width:"wide",context:"standalone"})}},w:function(i,n,t,e){const r=sz(i,e);return n==="wo"?t.ordinalNumber(r,{unit:"week"}):$n(r,n.length)},I:function(i,n,t){const e=oz(i);return n==="Io"?t.ordinalNumber(e,{unit:"week"}):$n(e,n.length)},d:function(i,n,t){return n==="do"?t.ordinalNumber(i.getDate(),{unit:"date"}):Xu.d(i,n)},D:function(i,n,t){const e=iz(i);return n==="Do"?t.ordinalNumber(e,{unit:"dayOfYear"}):$n(e,n.length)},E:function(i,n,t){const e=i.getDay();switch(n){case"E":case"EE":case"EEE":return t.day(e,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(e,{width:"short",context:"formatting"});case"EEEE":default:return t.day(e,{width:"wide",context:"formatting"})}},e:function(i,n,t,e){const r=i.getDay(),o=(r-e.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return $n(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(i,n,t,e){const r=i.getDay(),o=(r-e.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return $n(o,n.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(i,n,t){const e=i.getDay(),r=e===0?7:e;switch(n){case"i":return String(r);case"ii":return $n(r,n.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(e,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(e,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(e,{width:"short",context:"formatting"});case"iiii":default:return t.day(e,{width:"wide",context:"formatting"})}},a:function(i,n,t){const r=i.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(i,n,t){const e=i.getHours();let r;switch(e===12?r=Qd.noon:e===0?r=Qd.midnight:r=e/12>=1?"pm":"am",n){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(i,n,t){const e=i.getHours();let r;switch(e>=17?r=Qd.evening:e>=12?r=Qd.afternoon:e>=4?r=Qd.morning:r=Qd.night,n){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(i,n,t){if(n==="ho"){let e=i.getHours()%12;return e===0&&(e=12),t.ordinalNumber(e,{unit:"hour"})}return Xu.h(i,n)},H:function(i,n,t){return n==="Ho"?t.ordinalNumber(i.getHours(),{unit:"hour"}):Xu.H(i,n)},K:function(i,n,t){const e=i.getHours()%12;return n==="Ko"?t.ordinalNumber(e,{unit:"hour"}):$n(e,n.length)},k:function(i,n,t){let e=i.getHours();return e===0&&(e=24),n==="ko"?t.ordinalNumber(e,{unit:"hour"}):$n(e,n.length)},m:function(i,n,t){return n==="mo"?t.ordinalNumber(i.getMinutes(),{unit:"minute"}):Xu.m(i,n)},s:function(i,n,t){return n==="so"?t.ordinalNumber(i.getSeconds(),{unit:"second"}):Xu.s(i,n)},S:function(i,n){return Xu.S(i,n)},X:function(i,n,t){const e=i.getTimezoneOffset();if(e===0)return"Z";switch(n){case"X":return IO(e);case"XXXX":case"XX":return pf(e);case"XXXXX":case"XXX":default:return pf(e,":")}},x:function(i,n,t){const e=i.getTimezoneOffset();switch(n){case"x":return IO(e);case"xxxx":case"xx":return pf(e);case"xxxxx":case"xxx":default:return pf(e,":")}},O:function(i,n,t){const e=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+jO(e,":");case"OOOO":default:return"GMT"+pf(e,":")}},z:function(i,n,t){const e=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+jO(e,":");case"zzzz":default:return"GMT"+pf(e,":")}},t:function(i,n,t){const e=Math.trunc(+i/1e3);return $n(e,n.length)},T:function(i,n,t){return $n(+i,n.length)}};function jO(i,n=""){const t=i>0?"-":"+",e=Math.abs(i),r=Math.trunc(e/60),o=e%60;return o===0?t+String(r):t+String(r)+n+$n(o,2)}function IO(i,n){return i%60===0?(i>0?"-":"+")+$n(Math.abs(i)/60,2):pf(i,n)}function pf(i,n=""){const t=i>0?"-":"+",e=Math.abs(i),r=$n(Math.trunc(e/60),2),o=$n(e%60,2);return t+r+n+o}const BO=(i,n)=>{switch(i){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},_D=(i,n)=>{switch(i){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},lz=(i,n)=>{const t=i.match(/(P+)(p+)?/)||[],e=t[1],r=t[2];if(!r)return BO(i,n);let o;switch(e){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",BO(e,n)).replace("{{time}}",_D(r,n))},uz={p:_D,P:lz},cz=/^D+$/,fz=/^Y+$/,dz=["D","DD","YY","YYYY"];function hz(i){return cz.test(i)}function pz(i){return fz.test(i)}function vz(i,n,t){const e=gz(i,n,t);if(console.warn(e),dz.includes(i))throw new RangeError(e)}function gz(i,n,t){const e=i[0]==="Y"?"years":"days of the month";return`Use \`${i.toLowerCase()}\` instead of \`${i}\` (in \`${n}\`) for formatting ${e} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const mz=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yz=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bz=/^'([^]*?)'?$/,wz=/''/g,xz=/[a-zA-Z]/;function hy(i,n,t){var h,v,m,y;const e=Og(),r=e.locale??xD,o=e.firstWeekContainsDate??((v=(h=e.locale)==null?void 0:h.options)==null?void 0:v.firstWeekContainsDate)??1,a=e.weekStartsOn??((y=(m=e.locale)==null?void 0:m.options)==null?void 0:y.weekStartsOn)??0,s=Hi(i,t==null?void 0:t.in);if(!gH(s))throw new RangeError("Invalid time value");let u=n.match(yz).map(_=>{const C=_[0];if(C==="p"||C==="P"){const E=uz[C];return E(_,r.formatLong)}return _}).join("").match(mz).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const C=_[0];if(C==="'")return{isToken:!1,value:Sz(_)};if(LO[C])return{isToken:!0,value:_};if(C.match(xz))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:_}});r.localize.preprocessor&&(u=r.localize.preprocessor(s,u));const c={firstWeekContainsDate:o,weekStartsOn:a,locale:r};return u.map(_=>{if(!_.isToken)return _.value;const C=_.value;(pz(C)||hz(C))&&vz(C,n,String(i));const E=LO[C[0]];return E(s,C,r.localize,c)}).join("")}function Sz(i){const n=i.match(bz);return n?n[1].replace(wz,"'"):i}function _z(i,n,t){const e=Og(),r=(t==null?void 0:t.locale)??e.locale??xD,o=2520,a=dy(i,n);if(isNaN(a))throw new RangeError("Invalid time value");const s=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:a}),[u,c]=jb(t==null?void 0:t.in,...a>0?[n,i]:[i,n]),h=CH(c,u),v=(c0(c)-c0(u))/1e3,m=Math.round((h-v)/60);let y;if(m<2)return t!=null&&t.includeSeconds?h<5?r.formatDistance("lessThanXSeconds",5,s):h<10?r.formatDistance("lessThanXSeconds",10,s):h<20?r.formatDistance("lessThanXSeconds",20,s):h<40?r.formatDistance("halfAMinute",0,s):h<60?r.formatDistance("lessThanXMinutes",1,s):r.formatDistance("xMinutes",1,s):m===0?r.formatDistance("lessThanXMinutes",1,s):r.formatDistance("xMinutes",m,s);if(m<45)return r.formatDistance("xMinutes",m,s);if(m<90)return r.formatDistance("aboutXHours",1,s);if(m<PO){const _=Math.round(m/60);return r.formatDistance("aboutXHours",_,s)}else{if(m<o)return r.formatDistance("xDays",1,s);if(m<$m){const _=Math.round(m/PO);return r.formatDistance("xDays",_,s)}else if(m<$m*2)return y=Math.round(m/$m),r.formatDistance("aboutXMonths",y,s)}if(y=_H(c,u),y<12){const _=Math.round(m/$m);return r.formatDistance("xMonths",_,s)}else{const _=y%12,C=Math.trunc(y/12);return _<3?r.formatDistance("aboutXYears",C,s):_<9?r.formatDistance("overXYears",C,s):r.formatDistance("almostXYears",C+1,s)}}function Cz(i,n){return _z(i,pH(i),n)}function Ex({value:i,onChange:n}){return j.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[j.jsxs("div",{className:"bg-gray-100 p-2 border-b flex gap-2",children:[j.jsx("button",{type:"button",className:"px-3 py-1 bg-white border rounded hover:bg-gray-50",children:"B"}),j.jsx("button",{type:"button",className:"px-3 py-1 bg-white border rounded hover:bg-gray-50",children:"I"}),j.jsx("button",{type:"button",className:"px-3 py-1 bg-white border rounded hover:bg-gray-50",children:"U"})]}),j.jsx("div",{contentEditable:!0,className:"p-3 min-h-[200px] bg-white",dangerouslySetInnerHTML:{__html:i},onInput:t=>n(t.currentTarget.innerHTML)})]})}function Tz(){const i=Rs(),[n,t]=Nt.useState(!1),[e,r]=Nt.useState(""),[o,a]=Nt.useState(""),[s,u]=Nt.useState("Welcome to your journey!"),[c,h]=Nt.useState(`<h2>Hello!</h2>
<p>We're excited to welcome you!</p>
<p>This is the first email in your automated sequence.</p>
<p><a href="https://yourwebsite.com/start" style="background:#3b82f6;color:white;padding:12px 24px;text-decoration:none;border-radius:8px;">Get Started</a></p>`),[v,m]=Nt.useState("Thanks for opening our email!"),[y,_]=Nt.useState(`<h2>Special offer just for you!</h2>
<p>Since you opened the previous email  here's your reward!</p>
<p><strong>30% off your next order  valid for 48 hours only!</strong></p>
<a href="https://yourwebsite.com/offer" style="background:#10b981;color:white;padding:14px 28px;text-decoration:none;border-radius:8px;font-weight:bold;">Claim Your Offer</a>`),[C,E]=Nt.useState("You're missing out..."),[D,F]=Nt.useState(`<h2>Last chance!</h2>
<p>We noticed you <strong>haven't opened our previous email</strong>...</p>
<p>This is your final chance to claim your gift!</p>
<a href="https://yourwebsite.com/last-chance" style="background:#ef4444;color:white;padding:14px 28px;text-decoration:none;border-radius:8px;font-weight:bold;">Click before it expires!</a>`),[V,K]=Nt.useState("0"),[Z,ct]=Nt.useState("2"),[ht,st]=Nt.useState("0"),et=()=>{const St=parseInt(V)||0,U=parseInt(Z)||0,_t=parseInt(ht)||0;return(St*3600+U*60+_t)/(24*60*60)},nt=()=>{const St=parseInt(V)||0,U=parseInt(Z)||0,_t=parseInt(ht)||0,Ot=[];return St>0&&Ot.push(`${St} hours`),U>0&&Ot.push(`${U} minutes`),_t>0&&Ot.push(`${_t} seconds`),Ot.length>0?Ot.join(" "):"0 seconds"},it=async St=>{St.preventDefault(),t(!0);const U=o.split(",").map(pt=>pt.trim()).filter(pt=>pt);if(U.length===0){alert("Enter at least 1 email!"),t(!1);return}if((parseInt(V)||0)*3600+(parseInt(Z)||0)*60+(parseInt(ht)||0)<60){alert("Minimum wait time is 60 seconds (1 minute)!"),t(!1);return}const Ot=et();if(Ot>365){alert("Wait time too long! Maximum 365 days"),t(!1);return}const zt={user_id:localStorage.getItem("user_id"),campaign_type:"drip",recipients:U,email1_subject:s,email1_body:c,emailA_subject:v,emailA_body:y,emailB_subject:C,emailB_body:D,wait_days:Ot};try{const pt=await fetch("https://kbm7qykb6f.execute-api.us-east-1.amazonaws.com/campaigns",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(zt)}),Dt=await pt.json();pt.ok?(r(`DRIP CAMPAIGN LAUNCHED SUCCESSFULLY! ID: ${Dt.campaignId}`),setTimeout(()=>i("/drip-dashboard"),2e3)):alert("Error: "+Dt.message)}catch(pt){alert("API connection error"),console.error(pt)}finally{t(!1)}},$=et(),ft=hy(new Date(Date.now()+$*24*60*60*1e3),"MM/dd/yyyy HH:mm:ss"),lt=(St,U,_t)=>{K(St.toString()),ct(U.toString()),st(_t.toString())};return j.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[j.jsxs("div",{className:"text-center mb-10",children:[j.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Drip Campaign Builder"}),j.jsx("p",{className:"text-xl text-gray-600 mt-4",children:"Automatically send emails based on user behavior"})]}),j.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white p-8 rounded-3xl shadow-2xl mb-10",children:[j.jsx("h2",{className:"text-3xl font-bold text-center mb-8",children:"Automated Drip Campaign Flow"}),j.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[j.jsxs("div",{className:"text-center",children:[j.jsx("div",{className:"bg-white text-purple-600 w-20 h-20 rounded-full flex items-center justify-center text-4xl font-bold mx-auto mb-4 shadow-lg",children:"1"}),j.jsx("h3",{className:"text-2xl font-bold",children:"Email 1"}),j.jsx("p",{className:"text-lg",children:"Send immediately"})]}),j.jsxs("div",{className:"text-center",children:[j.jsx("div",{className:"text-6xl",children:""}),j.jsxs("p",{className:"mt-4 text-xl font-bold",children:["Wait ",nt()]}),j.jsxs("p",{className:"text-sm opacity-90",children:[" ",ft]})]}),j.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[j.jsxs("div",{className:"bg-green-500 bg-opacity-30 backdrop-blur p-4 rounded-2xl text-center border-4 border-green-300",children:[j.jsx("p",{className:"text-4xl mb-2",children:""}),j.jsx("p",{className:"text-lg font-bold mb-1",children:"Opened"}),j.jsx("p",{className:"text-xl font-bold",children:" Email A"})]}),j.jsxs("div",{className:"bg-red-500 bg-opacity-30 backdrop-blur p-4 rounded-2xl text-center border-4 border-red-300",children:[j.jsx("p",{className:"text-4xl mb-2",children:""}),j.jsx("p",{className:"text-lg font-bold mb-1",children:"Not Opened"}),j.jsx("p",{className:"text-xl font-bold",children:" Email B"})]})]})]})]}),j.jsxs("form",{onSubmit:it,className:"bg-white rounded-3xl shadow-2xl p-10 space-y-8",children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-2xl font-bold text-gray-800 mb-4",children:"Recipients list (comma separated)"}),j.jsx("textarea",{className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg",rows:"3",placeholder:"email1@gmail.com, email2@yahoo.com, test@company.co",value:o,onChange:St=>a(St.target.value),required:!0})]}),j.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[j.jsxs("div",{className:"border-2 border-purple-500 rounded-2xl p-6 bg-purple-50",children:[j.jsx("h3",{className:"text-2xl font-bold text-purple-700 mb-4",children:" Email 1  Send now"}),j.jsx("input",{type:"text",className:"w-full p-3 border rounded-lg mb-4 text-lg font-semibold",placeholder:"Subject",value:s,onChange:St=>u(St.target.value),required:!0}),j.jsx(Ex,{value:c,onChange:h})]}),j.jsxs("div",{className:"border-2 border-green-500 rounded-2xl p-6 bg-green-50",children:[j.jsx("h3",{className:"text-2xl font-bold text-green-700 mb-4",children:" Email A  If opened"}),j.jsx("input",{type:"text",className:"w-full p-3 border rounded-lg mb-4 text-lg font-semibold",placeholder:"Subject",value:v,onChange:St=>m(St.target.value),required:!0}),j.jsx(Ex,{value:y,onChange:_})]}),j.jsxs("div",{className:"border-2 border-red-500 rounded-2xl p-6 bg-red-50",children:[j.jsx("h3",{className:"text-2xl font-bold text-red-700 mb-4",children:" Email B  If not opened"}),j.jsx("input",{type:"text",className:"w-full p-3 border rounded-lg mb-4 text-lg font-semibold",placeholder:"Subject",value:C,onChange:St=>E(St.target.value),required:!0}),j.jsx(Ex,{value:D,onChange:F})]})]}),j.jsxs("div",{className:"text-center py-8 bg-gradient-to-br from-purple-50 to-pink-50 rounded-3xl",children:[j.jsx("label",{className:"text-3xl font-bold text-gray-800 block mb-2",children:" How long to wait before sending next email?"}),j.jsxs("div",{className:"flex flex-wrap justify-center gap-3 mb-8",children:[j.jsx("button",{type:"button",onClick:()=>lt(0,1,0),className:"px-5 py-3 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition font-bold text-sm",children:"1 minute (Test)"}),j.jsx("button",{type:"button",onClick:()=>lt(0,2,0),className:"px-5 py-3 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition font-bold text-sm",children:"2 minutes"}),j.jsx("button",{type:"button",onClick:()=>lt(1,0,0),className:"px-5 py-3 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition font-bold text-sm",children:"1 hour"}),j.jsx("button",{type:"button",onClick:()=>lt(24,0,0),className:"px-5 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition font-bold text-sm",children:"1 day"})]}),j.jsxs("div",{className:"flex items-center justify-center gap-4 flex-wrap mb-6",children:[j.jsxs("div",{className:"text-center",children:[j.jsx("input",{type:"number",min:"0",max:"8760",value:V,onChange:St=>{const U=St.target.value;(U===""||parseInt(U)>=0)&&K(U)},className:"text-4xl font-bold w-28 text-center p-4 border-4 border-purple-500 rounded-2xl shadow-lg",placeholder:"0"}),j.jsx("p",{className:"text-xl font-bold text-purple-600 mt-2",children:"Hours"})]}),j.jsx("span",{className:"text-5xl font-bold text-purple-600",children:":"}),j.jsxs("div",{className:"text-center",children:[j.jsx("input",{type:"number",min:"0",max:"59",value:Z,onChange:St=>{const U=St.target.value;(U===""||parseInt(U)>=0&&parseInt(U)<=59)&&ct(U)},className:"text-4xl font-bold w-28 text-center p-4 border-4 border-pink-500 rounded-2xl shadow-lg",placeholder:"0"}),j.jsx("p",{className:"text-xl font-bold text-pink-600 mt-2",children:"Minutes"})]}),j.jsx("span",{className:"text-5xl font-bold text-pink-600",children:":"}),j.jsxs("div",{className:"text-center",children:[j.jsx("input",{type:"number",min:"0",max:"59",value:ht,onChange:St=>{const U=St.target.value;(U===""||parseInt(U)>=0&&parseInt(U)<=59)&&st(U)},className:"text-4xl font-bold w-28 text-center p-4 border-4 border-indigo-500 rounded-2xl shadow-lg",placeholder:"0"}),j.jsx("p",{className:"text-xl font-bold text-indigo-600 mt-2",children:"Seconds"})]})]})]}),j.jsx("div",{className:"text-center",children:j.jsx("button",{type:"submit",disabled:n,className:`text-3xl font-bold px-16 py-8 rounded-3xl shadow-2xl transition-all transform hover:scale-105 ${n?"bg-gray-500":"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700"}`,children:n?"CREATING DRIP CAMPAIGN...":" LAUNCH DRIP CAMPAIGN NOW!"})}),e&&j.jsxs("div",{className:"text-center text-3xl font-bold text-green-600 bg-green-100 p-8 rounded-3xl",children:[" ",e,j.jsx("p",{className:"text-xl mt-4",children:"Redirecting to Dashboard..."})]})]})]})}function Ez(){var V,K;const[i,n]=Nt.useState([]),[t,e]=Nt.useState(!0),[r,o]=Nt.useState(!1),[a,s]=Nt.useState(null),[u,c]=Nt.useState({total:0,active:0,completed:0}),[h,v]=Nt.useState(null),[m,y]=Nt.useState(null);Nt.useEffect(()=>{_();const Z=setInterval(_,3e4);return()=>clearInterval(Z)},[]);const _=async(Z=!1)=>{Z&&o(!0);try{const ct=localStorage.getItem("token"),ht=localStorage.getItem("user_id"),st=await fetch(`https://kbm7qykb6f.execute-api.us-east-1.amazonaws.com/drip-stats?user_id=${ht}`,{headers:{Authorization:`Bearer ${ct}`}});if(!st.ok)throw new Error("Failed");const et=await st.json();n(et.campaigns||[]),c(et.summary||{total:0,active:0,completed:0})}catch(ct){console.error(ct)}finally{e(!1),o(!1)}},C=async(Z,ct)=>{if(ct.stopPropagation(),!!window.confirm("Are you sure you want to delete this drip campaign? This will cancel all scheduled emails.")){v(Z);try{const ht=localStorage.getItem("token"),st=Z.replace("campaign#",""),et=await fetch(`https://kbm7qykb6f.execute-api.us-east-1.amazonaws.com/drip-campaigns/${st}`,{method:"DELETE",headers:{Authorization:`Bearer ${ht}`}});if(!et.ok){const nt=await et.json();throw new Error(nt.error||"Delete failed")}await _(),alert("Drip campaign deleted successfully!")}catch(ht){console.error("Error deleting drip campaign:",ht),alert(`Cannot delete drip campaign: ${ht.message}`)}finally{v(null)}}},E=Z=>Z.stats||{sent:0,opened:0,clicked:0,openRate:"0",clickRate:"0",totalRecipients:0},D=Z=>{var nt;const ct=new Date(Z.timestamp),ht=new Date,st=((nt=Z.drip_config)==null?void 0:nt.wait_days)||2,et=new Date(ct.getTime()+st*24*60*60*1e3);return ht<et?{status:"waiting",label:"Waiting to send",color:"bg-yellow-500",icon:CT}:ht<et.getTime()+36e5?{status:"sending",label:"Sending A/B",color:"bg-blue-500 animate-pulse",icon:gf}:{status:"completed",label:"Completed",color:"bg-green-500",icon:OT}},F=({text:Z,id:ct})=>j.jsxs("div",{className:"relative inline-block",children:[j.jsx(nj,{size:16,className:"ml-2 cursor-help opacity-60 hover:opacity-100 transition-opacity",onMouseEnter:()=>y(ct),onMouseLeave:()=>y(null)}),m===ct&&j.jsxs("div",{className:"absolute z-50 bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-4 py-2 bg-black/90 text-white text-xs rounded-lg whitespace-nowrap",children:[Z,j.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1",children:j.jsx("div",{className:"border-4 border-transparent border-t-black/90"})})]})]});return t?j.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:j.jsxs("div",{className:"text-center",children:[j.jsx("div",{className:"text-6xl text-white font-bold animate-pulse mb-4",children:" LOADING DASHBOARD..."}),j.jsx("div",{className:"text-2xl text-white/60",children:"Loading drip campaigns data"})]})}):j.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white p-6",children:[j.jsxs("div",{className:"text-center mb-12",children:[j.jsx("h1",{className:"text-6xl font-extrabold bg-gradient-to-r from-pink-500 to-yellow-500 bg-clip-text text-transparent mb-4",children:" DRIP CAMPAIGNS DASHBOARD"}),j.jsx("p",{className:"text-2xl opacity-90",children:"Intelligent email automation system"}),j.jsxs("button",{onClick:()=>_(!0),disabled:r,className:`mt-6 px-8 py-4 rounded-2xl font-bold text-xl transition-all ${r?"bg-white/20 cursor-not-allowed":"bg-white/10 hover:bg-white/20"}`,children:[j.jsx(kT,{className:`inline mr-2 ${r?"animate-spin":""}`,size:24}),r?"Refreshing...":"Refresh Data"]})]}),j.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-12",children:[j.jsxs("div",{className:"bg-white/10 rounded-3xl p-8 text-center shadow-2xl",children:[j.jsx(gf,{className:"mx-auto mb-4",size:48}),j.jsx("div",{className:"text-5xl font-bold text-pink-400",children:u.total}),j.jsx("div",{className:"text-xl mt-2",children:"Total Campaigns"})]}),j.jsxs("div",{className:"bg-white/10 rounded-3xl p-8 text-center shadow-2xl",children:[j.jsx(CT,{className:"mx-auto mb-4 animate-pulse",size:48}),j.jsx("div",{className:"text-5xl font-bold text-yellow-400",children:u.active}),j.jsx("div",{className:"text-xl mt-2",children:"Waiting to Send"})]}),j.jsxs("div",{className:"bg-white/10 rounded-3xl p-8 text-center shadow-2xl",children:[j.jsx(OT,{className:"mx-auto mb-4",size:48}),j.jsx("div",{className:"text-5xl font-bold text-green-400",children:u.completed}),j.jsx("div",{className:"text-xl mt-2",children:"Completed"})]}),j.jsxs("div",{className:"bg-white/10 rounded-3xl p-8 text-center shadow-2xl",children:[j.jsx(Ok,{className:"mx-auto mb-4",size:48}),j.jsxs("div",{className:"text-5xl font-bold text-cyan-400",children:[i.length>0?(i.reduce((Z,ct)=>Z+parseFloat(E(ct).openRate),0)/i.length).toFixed(1):"0","%"]}),j.jsx("div",{className:"text-xl mt-2",children:"Average Open Rate"})]})]}),i.length===0?j.jsxs("div",{className:"text-center py-20",children:[j.jsx(gf,{size:120,className:"mx-auto mb-6 opacity-50"}),j.jsx("h2",{className:"text-4xl font-bold mb-4",children:"No Drip Campaigns Yet"}),j.jsx("p",{className:"text-xl opacity-75 mb-8",children:"Create your first drip campaign to start automating email marketing!"}),j.jsx("button",{onClick:()=>window.location.href="/drip-builder",className:"px-12 py-6 bg-gradient-to-r from-pink-500 to-yellow-500 text-white text-2xl font-bold rounded-3xl hover:scale-105 transition-all shadow-2xl",children:"Create Drip Campaign"})]}):j.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-8",children:i.map(Z=>{var $,ft,lt;const ct=E(Z),ht=new Date(Z.timestamp),st=(($=Z.drip_config)==null?void 0:$.wait_days)||2,et=new Date(ht.getTime()+st*24*60*60*1e3),nt=D(Z),it=nt.icon;return j.jsxs("div",{className:"bg-white/10 rounded-3xl p-8 hover:bg-white/20 shadow-2xl relative transition-all",children:[j.jsx("button",{onClick:St=>C(Z.campaign_id,St),disabled:h===Z.campaign_id,className:"absolute top-4 right-4 p-2 bg-red-500/80 hover:bg-red-600 rounded-full transition-all disabled:opacity-50 disabled:cursor-not-allowed z-10",title:"Delete drip campaign",children:h===Z.campaign_id?j.jsx(kT,{size:20,className:"animate-spin"}):j.jsx(Ek,{size:20})}),j.jsxs("div",{onClick:()=>s(Z),className:"cursor-pointer",children:[j.jsxs("div",{className:"flex justify-between mb-6 pr-12",children:[j.jsx("h3",{className:"text-2xl font-bold truncate",children:((lt=(ft=Z.drip_config)==null?void 0:ft.email1)==null?void 0:lt.subject)||"Drip Campaign"}),j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx(it,{size:20,className:nt.color}),j.jsx("div",{className:`w-3 h-3 rounded-full ${nt.color}`})]})]}),j.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[j.jsxs("div",{className:"bg-white/10 rounded-2xl p-4",children:[j.jsxs("div",{className:"flex items-center justify-between mb-2",children:[j.jsxs("div",{className:"flex items-center",children:[j.jsx(DT,{size:16,className:"mr-2 text-cyan-400"}),j.jsx("span",{className:"text-xs",children:"Recipients"})]}),j.jsx(F,{text:"Total recipients in campaign",id:`total-${Z.campaign_id}`})]}),j.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:ct.totalRecipients})]}),j.jsxs("div",{className:"bg-white/10 rounded-2xl p-4",children:[j.jsxs("div",{className:"flex items-center justify-between mb-2",children:[j.jsxs("div",{className:"flex items-center",children:[j.jsx(gf,{size:16,className:"mr-2 text-blue-400"}),j.jsx("span",{className:"text-xs",children:"Sent"})]}),j.jsx(F,{text:"Successfully sent emails",id:`sent-${Z.campaign_id}`})]}),j.jsx("div",{className:"text-2xl font-bold text-blue-400",children:ct.sent})]}),j.jsxs("div",{className:"bg-white/10 rounded-2xl p-4",children:[j.jsxs("div",{className:"flex items-center justify-between mb-2",children:[j.jsxs("div",{className:"flex items-center",children:[j.jsx(TT,{size:16,className:"mr-2 text-green-400"}),j.jsx("span",{className:"text-xs",children:"Opened"})]}),j.jsx(F,{text:"Unique opens",id:`opened-${Z.campaign_id}`})]}),j.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[ct.opened,j.jsxs("span",{className:"text-sm ml-2",children:["(",ct.openRate,"%)"]})]})]}),j.jsxs("div",{className:"bg-white/10 rounded-2xl p-4",children:[j.jsxs("div",{className:"flex items-center justify-between mb-2",children:[j.jsxs("div",{className:"flex items-center",children:[j.jsx(AT,{size:16,className:"mr-2 text-yellow-400"}),j.jsx("span",{className:"text-xs",children:"Clicked"})]}),j.jsx(F,{text:"Unique clicks",id:`clicked-${Z.campaign_id}`})]}),j.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[ct.clicked,j.jsxs("span",{className:"text-sm ml-2",children:["(",ct.clickRate,"%)"]})]})]})]}),j.jsxs("div",{className:"text-sm opacity-75 space-y-2",children:[j.jsxs("div",{className:"flex justify-between",children:[j.jsx("span",{children:"Created at:"}),j.jsx("span",{children:hy(ht,"MM/dd/yyyy HH:mm")})]}),j.jsxs("div",{className:"flex justify-between",children:[j.jsx("span",{children:"Wait time:"}),j.jsx("span",{className:"font-bold text-yellow-400",children:st<1?`${(st*24).toFixed(1)} hours`:`${st} days`})]}),j.jsxs("div",{className:"flex justify-between",children:[j.jsx("span",{children:"Expected A/B send:"}),j.jsx("span",{className:"font-bold text-pink-400",children:hy(et,"MM/dd/yyyy HH:mm")})]}),j.jsx("div",{className:"text-xs text-yellow-400 mt-2",children:" Time may vary 1-2 minutes due to AWS EventBridge"}),nt.status==="waiting"&&j.jsxs("div",{className:"flex justify-between pt-2 border-t border-white/20",children:[j.jsx("span",{children:"Time remaining:"}),j.jsx("span",{className:"font-bold text-cyan-400",children:Cz(et,{addSuffix:!0})})]})]}),j.jsxs("div",{className:"mt-6 pt-6 border-t border-white/20 flex justify-between items-center",children:[j.jsx("span",{className:"text-xs opacity-75",children:"Click for details"}),j.jsx(KL,{size:28})]})]})]},Z.campaign_id)})}),a&&j.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-6 z-50",onClick:()=>s(null),children:j.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-3xl p-10 max-w-5xl w-full max-h-[90vh] overflow-y-auto shadow-3xl",onClick:Z=>Z.stopPropagation(),children:[j.jsxs("div",{className:"flex justify-between mb-8",children:[j.jsx("h2",{className:"text-4xl font-bold",children:" DRIP CAMPAIGN DETAILS"}),j.jsx("button",{onClick:()=>s(null),children:j.jsx(Ak,{size:32})})]}),j.jsx("div",{className:"grid grid-cols-4 gap-4 mb-8",children:(()=>{const Z=E(a);return j.jsxs(j.Fragment,{children:[j.jsxs("div",{className:"bg-white/10 rounded-2xl p-6 text-center",children:[j.jsx(DT,{className:"mx-auto mb-2",size:32}),j.jsx("div",{className:"text-3xl font-bold text-cyan-400",children:Z.totalRecipients}),j.jsx("div",{className:"text-sm mt-1",children:"Recipients"})]}),j.jsxs("div",{className:"bg-white/10 rounded-2xl p-6 text-center",children:[j.jsx(gf,{className:"mx-auto mb-2",size:32}),j.jsx("div",{className:"text-3xl font-bold text-blue-400",children:Z.sent}),j.jsx("div",{className:"text-sm mt-1",children:"Sent"})]}),j.jsxs("div",{className:"bg-white/10 rounded-2xl p-6 text-center",children:[j.jsx(TT,{className:"mx-auto mb-2",size:32}),j.jsx("div",{className:"text-3xl font-bold text-green-400",children:Z.opened}),j.jsxs("div",{className:"text-sm mt-1",children:["Opened (",Z.openRate,"%)"]})]}),j.jsxs("div",{className:"bg-white/10 rounded-2xl p-6 text-center",children:[j.jsx(AT,{className:"mx-auto mb-2",size:32}),j.jsx("div",{className:"text-3xl font-bold text-yellow-400",children:Z.clicked}),j.jsxs("div",{className:"text-sm mt-1",children:["Clicked (",Z.clickRate,"%)"]})]})]})})()}),j.jsx("div",{className:"bg-white/10 rounded-2xl p-6 mb-8",children:j.jsxs("div",{className:"grid grid-cols-2 gap-4 text-lg",children:[j.jsxs("div",{children:[j.jsx("span",{className:"opacity-75",children:"Campaign ID:"}),j.jsx("span",{className:"ml-2 font-mono font-bold",children:a.campaign_id.replace("campaign#","")})]}),j.jsxs("div",{children:[j.jsx("span",{className:"opacity-75",children:"Wait time:"}),j.jsxs("span",{className:"ml-2 font-bold text-yellow-400",children:[(V=a.drip_config)==null?void 0:V.wait_days," days"]})]}),j.jsxs("div",{className:"col-span-2",children:[j.jsx("span",{className:"opacity-75",children:"Created at:"}),j.jsx("span",{className:"ml-2 font-bold",children:hy(new Date(a.timestamp),"MM/dd/yyyy HH:mm")})]})]})}),j.jsxs("div",{className:"bg-white/10 rounded-2xl p-6 mb-8",children:[j.jsx("h3",{className:"text-2xl font-bold mb-4",children:" Recipients list"}),j.jsx("div",{className:"flex flex-wrap gap-2",children:(K=a.recipients)==null?void 0:K.map((Z,ct)=>j.jsx("span",{className:"px-4 py-2 bg-white/10 rounded-full text-sm font-mono",children:Z},ct))})]}),j.jsx("div",{className:"text-center",children:j.jsx("button",{onClick:()=>s(null),className:"bg-white/20 hover:bg-white/30 px-12 py-6 rounded-full text-2xl transition-all",children:"Close"})})]})})]})}const UO=[{id:1,name:"Welcome Email",thumbnail:"https://images.unsplash.com/photo-1596526131083-e8c633c948d2?w=400&h=300&fit=crop",category:"Welcome"},{id:2,name:"Black Friday Sale",thumbnail:"https://images.unsplash.com/photo-1607083206968-13611e3d76db?w=400&h=300&fit=crop",category:"Promotion"},{id:3,name:"Abandoned Cart",thumbnail:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=400&h=300&fit=crop",category:"Recovery"},{id:4,name:"Newsletter Weekly",thumbnail:"https://images.unsplash.com/photo-1499750310107-5fef28a66643?w=400&h=300&fit=crop",category:"Newsletter"}];function Oz(){const i=Rs(),[n,t]=Nt.useState("All"),e=o=>{i("/template-editor",{state:{templateId:o.id,templateName:o.name}})},r=n==="All"?UO:UO.filter(o=>o.category===n);return j.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[j.jsxs("div",{className:"text-center mb-12",children:[j.jsx("h1",{className:"text-6xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-4",children:" Template Library"}),j.jsx("p",{className:"text-2xl text-gray-600",children:"Ready-made templates  Customize in 30 seconds!"})]}),j.jsxs("div",{className:"flex justify-between items-center mb-10",children:[j.jsx("div",{className:"flex gap-4",children:["All","Welcome","Promotion","Recovery","Newsletter"].map(o=>j.jsx("button",{onClick:()=>t(o),className:`px-8 py-4 rounded-2xl font-bold text-lg transition-all ${n===o?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-2xl scale-110":"bg-gray-100 hover:bg-gray-200"}`,children:o},o))}),j.jsxs("button",{onClick:()=>i("/template-editor"),className:"flex items-center gap-3 px-8 py-5 bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xl font-bold rounded-2xl hover:scale-105 transition shadow-2xl",children:[j.jsx(Tk,{size:32}),"Create New Template"]})]}),j.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10",children:r.map(o=>j.jsxs("div",{className:"group relative bg-white rounded-3xl shadow-2xl overflow-hidden hover:scale-105 transition-all duration-300",children:[j.jsx("div",{className:"aspect-video overflow-hidden bg-gray-100",children:j.jsx("img",{src:o.thumbnail,alt:o.name,className:"w-full h-full object-cover group-hover:scale-110 transition",loading:"lazy",onError:a=>{a.target.src="https://via.placeholder.com/400x300/667eea/ffffff?text=Email+Template"}})}),j.jsxs("div",{className:"p-6",children:[j.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:o.name}),j.jsxs("p",{className:"text-gray-600 mb-6",children:[" ",o.category]}),j.jsxs("div",{className:"flex gap-3",children:[j.jsx("button",{onClick:()=>e(o),className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-xl font-bold hover:scale-105 transition",children:" Use Now"}),j.jsx("button",{className:"p-4 bg-gray-100 rounded-xl hover:bg-gray-200 transition",title:"Copy",children:j.jsx(YL,{size:24})}),j.jsx("button",{className:"p-4 bg-gray-100 rounded-xl hover:bg-gray-200 transition",title:"Edit",children:j.jsx(fS,{size:24})})]})]})]},o.id))})]})}var Az={4729:(i,n,t)=>{var e,r,o;/*!
* Backbone.Undo.js v0.2
* 
* Copyright (c)2013 Oliver Sartun
* Released under the MIT License
*
* Documentation and full license available at
* https://github.com/osartun/Backbone.Undo.js
*/(function(a){r=[t(5706),t(4193)],e=a,o=typeof e=="function"?e.apply(n,r):e,o!==void 0&&(i.exports=o)})(function(a,s){var u=Array.prototype.slice;function c(et,nt,it){return it.length<=4?et.call(nt,it[0],it[1],it[2],it[3]):et.apply(nt,it)}function h(et,nt){return u.call(et,nt)}function v(et,nt){return et==null?!1:(a.isArray(nt)||(nt=h(arguments,1)),a.all(nt,function(it){return it in et}))}var m=function(){var et=!1,nt=-1;function it(){nt++,et=!0,a.defer(function(){et=!1})}return function(){return et||it(),nt}}();function y(){this.registeredObjects=[],this.cidIndexes=[]}y.prototype={isRegistered:function(et){return et&&et.cid?this.registeredObjects[et.cid]:a.contains(this.registeredObjects,et)},register:function(et){return this.isRegistered(et)?!1:(et&&et.cid?(this.registeredObjects[et.cid]=et,this.cidIndexes.push(et.cid)):this.registeredObjects.push(et),!0)},unregister:function(et){if(this.isRegistered(et)){if(et&&et.cid)delete this.registeredObjects[et.cid],this.cidIndexes.splice(a.indexOf(this.cidIndexes,et.cid),1);else{var nt=a.indexOf(this.registeredObjects,et);this.registeredObjects.splice(nt,1)}return!0}return!1},get:function(){return a.map(this.cidIndexes,function(et){return this.registeredObjects[et]},this).concat(this.registeredObjects)}};function _(et,nt,it,$){for(var ft=0,lt=nt.length,St;ft<lt;ft++)if(St=nt[ft],!!St){if(et==="on"){if(!$.objectRegistry.register(St))continue}else if(!$.objectRegistry.unregister(St))continue;a.isFunction(St[et])&&St[et]("all",it,$)}}function C(et,nt){var it=nt.type,$=nt.undoTypes,ft=!$[it]||$[it][et];a.isFunction(ft)&&ft(nt.object,nt.before,nt.after,nt.options)}function E(et,nt,it,$,ft){if(!(it.isCurrentlyUndoRedoing||et==="undo"&&it.pointer===-1||et==="redo"&&it.pointer===it.length-1)){it.isCurrentlyUndoRedoing=!0;var lt,St,U=et==="undo";for(ft?St=U&&it.pointer===it.length-1||!U&&it.pointer===-1?a.clone(it.models):u.apply(it.models,U?[0,it.pointer]:[it.pointer,it.length-1]):(lt=it.at(U?it.pointer:it.pointer+1),St=$?it.where({magicFusionIndex:lt.get("magicFusionIndex")}):[lt]),it.pointer+=(U?-1:1)*St.length;lt=U?St.pop():St.shift();)lt[et]();it.isCurrentlyUndoRedoing=!1,nt.trigger(et,nt)}}function D(et,nt){var it=et.condition,$=typeof it;return $==="function"?!!c(it,et,nt):$==="boolean"?it:!0}function F(et,nt,it,$){if(et.track&&!et.isCurrentlyUndoRedoing&&nt in $&&D($[nt],it)){var ft=c($[nt].on,$[nt],it),lt;if(v(ft,"object","before","after")){if(ft.type=nt,ft.magicFusionIndex=m(),ft.undoTypes=$,et.pointer<et.length-1)for(var lt=et.length-et.pointer-1;lt--;)et.pop();et.pointer=et.length,et.add(ft),et.length>et.maximumStackLength&&(et.shift(),et.pointer--)}}}var V={add:{undo:function(et,nt,it,$){et.remove(it,$)},redo:function(et,nt,it,$){$.index&&($.at=$.index),et.add(it,$)},on:function(et,nt,it){return{object:nt,before:void 0,after:et,options:a.clone(it)}}},remove:{undo:function(et,nt,it,$){"index"in $&&($.at=$.index),et.add(nt,$)},redo:function(et,nt,it,$){et.remove(nt,$)},on:function(et,nt,it){return{object:nt,before:et,after:void 0,options:a.clone(it)}}},change:{undo:function(et,nt,it,$){a.isEmpty(nt)?a.each(a.keys(it),et.unset,et):(et.set(nt),$&&$.unsetData&&$.unsetData.before&&$.unsetData.before.length&&a.each($.unsetData.before,et.unset,et))},redo:function(et,nt,it,$){a.isEmpty(it)?a.each(a.keys(nt),et.unset,et):(et.set(it),$&&$.unsetData&&$.unsetData.after&&$.unsetData.after.length&&a.each($.unsetData.after,et.unset,et))},on:function(et,nt){var it=et.changedAttributes(),$=a.keys(it),ft=a.pick(et.previousAttributes(),$),lt=a.keys(ft),St=(nt||(nt={})).unsetData={after:[],before:[]};return $.length!=lt.length&&($.length>lt.length?a.each($,function(U){U in ft||St.before.push(U)},this):a.each(lt,function(U){U in it||St.after.push(U)})),{object:et,before:ft,after:it,options:a.clone(nt)}}},reset:{undo:function(et,nt,it){et.reset(nt)},redo:function(et,nt,it){et.reset(it)},on:function(et,nt){return{object:et,before:nt.previousModels,after:a.clone(et.models)}}}};function K(){}K.prototype=V;function Z(et,nt,it,$){if(typeof nt=="object")return a.each(nt,function(ft,lt){et===2?Z(et,ft,it,$):Z(et,lt,ft,it)});switch(et){case 0:v(it,"undo","redo","on")&&a.all(a.pick(it,"undo","redo","on"),a.isFunction)&&($[nt]=it);break;case 1:$[nt]&&a.isObject(it)&&($[nt]=a.extend({},$[nt],it));break;case 2:delete $[nt];break}return this}var ct=s.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(et){C("undo",this.attributes)},redo:function(et){C("redo",this.attributes)}}),ht=s.Collection.extend({model:ct,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(et){this.maximumStackLength=et}}),st=s.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(et){this.stack=new ht,this.objectRegistry=new y,this.undoTypes=new K,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(nt,it){this.stack.setMaxLength(it)},this),et&&et.track&&this.startTracking(),et&&et.register&&(a.isArray(et.register)||a.isArguments(et.register)?c(this.register,this,et.register):this.register(et.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(et){F(this.stack,et,h(arguments,1),this.undoTypes)},register:function(){_("on",arguments,this._addToStack,this)},unregister:function(){_("off",arguments,this._addToStack,this)},unregisterAll:function(){c(this.unregister,this,this.objectRegistry.get())},undo:function(et){E("undo",this,this.stack,et)},undoAll:function(){E("undo",this,this.stack,!1,!0)},redo:function(et){E("redo",this,this.stack,et)},redoAll:function(){E("redo",this,this.stack,!1,!0)},isAvailable:function(et){var nt=this.stack,it=nt.length;switch(et){case"undo":return it>0&&nt.pointer>-1;case"redo":return it>0&&nt.pointer<it-1;default:return!1}},merge:function(et){for(var nt=a.isArray(et)?et:h(arguments),it;it=nt.pop();)it instanceof st&&it.stack instanceof ht&&(it.stack=this.stack)},addUndoType:function(et,nt){Z(0,et,nt,this.undoTypes)},changeUndoType:function(et,nt){Z(1,et,nt,this.undoTypes)},removeUndoType:function(et){Z(2,et,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return a.extend(st,{defaults:function(et){a.extend(st.prototype.defaults,et)},addUndoType:function(et,nt){Z(0,et,nt,V)},changeUndoType:function(et,nt){Z(1,et,nt,V)},removeUndoType:function(et){Z(2,et,void 0,V)}}),s.UndoManager=st})},4193:(i,n,t)=>{var e,r;(function(o){var a=typeof self=="object"&&self.self===self&&self||typeof t.g=="object"&&t.g.global===t.g&&t.g;e=[t(5706),t(7774),n],r=(function(s,u,c){a.Backbone=o(a,c,s,u)}).apply(n,e),r!==void 0&&(i.exports=r)})(function(o,a,s,u){var c=o.Backbone,h=Array.prototype.slice;a.VERSION="1.4.1",a.$=u,a.noConflict=function(){return o.Backbone=c,this},a.emulateHTTP=!1,a.emulateJSON=!1;var v=a.Events={},m=/\s+/,y,_=function(P,k,N,q,ut){var Q=0,gt;if(N&&typeof N=="object")for(q!==void 0&&("context"in ut)&&ut.context===void 0&&(ut.context=q),gt=s.keys(N);Q<gt.length;Q++)k=_(P,k,gt[Q],N[gt[Q]],ut);else if(N&&m.test(N))for(gt=N.split(m);Q<gt.length;Q++)k=P(k,gt[Q],q,ut);else k=P(k,N,q,ut);return k};v.on=function(P,k,N){if(this._events=_(C,this._events||{},P,k,{context:N,ctx:this,listening:y}),y){var q=this._listeners||(this._listeners={});q[y.id]=y,y.interop=!1}return this},v.listenTo=function(P,k,N){if(!P)return this;var q=P._listenId||(P._listenId=s.uniqueId("l")),ut=this._listeningTo||(this._listeningTo={}),Q=y=ut[q];Q||(this._listenId||(this._listenId=s.uniqueId("l")),Q=y=ut[q]=new Z(this,P));var gt=E(P,k,N,this);if(y=void 0,gt)throw gt;return Q.interop&&Q.on(k,N),this};var C=function(P,k,N,q){if(N){var ut=P[k]||(P[k]=[]),Q=q.context,gt=q.ctx,Tt=q.listening;Tt&&Tt.count++,ut.push({callback:N,context:Q,ctx:Q||gt,listening:Tt})}return P},E=function(P,k,N,q){try{P.on(k,N,q)}catch(ut){return ut}};v.off=function(P,k,N){return this._events?(this._events=_(D,this._events,P,k,{context:N,listeners:this._listeners}),this):this},v.stopListening=function(P,k,N){var q=this._listeningTo;if(!q)return this;for(var ut=P?[P._listenId]:s.keys(q),Q=0;Q<ut.length;Q++){var gt=q[ut[Q]];if(!gt)break;gt.obj.off(k,N,this),gt.interop&&gt.off(k,N)}return s.isEmpty(q)&&(this._listeningTo=void 0),this};var D=function(P,k,N,q){if(P){var ut=q.context,Q=q.listeners,gt=0,Tt;if(!k&&!ut&&!N){for(Tt=s.keys(Q);gt<Tt.length;gt++)Q[Tt[gt]].cleanup();return}for(Tt=k?[k]:s.keys(P);gt<Tt.length;gt++){k=Tt[gt];var he=P[k];if(!he)break;for(var X=[],L=0;L<he.length;L++){var A=he[L];if(N&&N!==A.callback&&N!==A.callback._callback||ut&&ut!==A.context)X.push(A);else{var W=A.listening;W&&W.off(k,N)}}X.length?P[k]=X:delete P[k]}return P}};v.once=function(P,k,N){var q=_(F,{},P,k,this.off.bind(this));return typeof P=="string"&&N==null&&(k=void 0),this.on(q,k,N)},v.listenToOnce=function(P,k,N){var q=_(F,{},k,N,this.stopListening.bind(this,P));return this.listenTo(P,q)};var F=function(P,k,N,q){if(N){var ut=P[k]=s.once(function(){q(k,ut),N.apply(this,arguments)});ut._callback=N}return P};v.trigger=function(P){if(!this._events)return this;for(var k=Math.max(0,arguments.length-1),N=Array(k),q=0;q<k;q++)N[q]=arguments[q+1];return _(V,this._events,P,void 0,N),this};var V=function(P,k,N,q){if(P){var ut=P[k],Q=P.all;ut&&Q&&(Q=Q.slice()),ut&&K(ut,q),Q&&K(Q,[k].concat(q))}return P},K=function(P,k){var N,q=-1,ut=P.length,Q=k[0],gt=k[1],Tt=k[2];switch(k.length){case 0:for(;++q<ut;)(N=P[q]).callback.call(N.ctx);return;case 1:for(;++q<ut;)(N=P[q]).callback.call(N.ctx,Q);return;case 2:for(;++q<ut;)(N=P[q]).callback.call(N.ctx,Q,gt);return;case 3:for(;++q<ut;)(N=P[q]).callback.call(N.ctx,Q,gt,Tt);return;default:for(;++q<ut;)(N=P[q]).callback.apply(N.ctx,k);return}},Z=function(P,k){this.id=P._listenId,this.listener=P,this.obj=k,this.interop=!0,this.count=0,this._events=void 0};Z.prototype.on=v.on,Z.prototype.off=function(P,k){var N;this.interop?(this._events=_(D,this._events,P,k,{context:void 0,listeners:void 0}),N=!this._events):(this.count--,N=this.count===0),N&&this.cleanup()},Z.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},v.bind=v.on,v.unbind=v.off,s.extend(a,v);var ct=a.Model=function(P,k){var N=P||{};k||(k={}),this.preinitialize.apply(this,arguments),this.cid=s.uniqueId(this.cidPrefix),this.attributes={},k.collection&&(this.collection=k.collection),k.parse&&(N=this.parse(N,k)||{});var q=s.result(this,"defaults");N=s.defaults(s.extend({},q,N),q),this.set(N,k),this.changed={},this.initialize.apply(this,arguments)};s.extend(ct.prototype,v,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(P){return s.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(P){return this.attributes[P]},escape:function(P){return s.escape(this.get(P))},has:function(P){return this.get(P)!=null},matches:function(P){return!!s.iteratee(P,this)(this.attributes)},set:function(P,k,N){if(P==null)return this;var q;if(typeof P=="object"?(q=P,N=k):(q={})[P]=k,N||(N={}),!this._validate(q,N))return!1;var ut=N.unset,Q=N.silent,gt=[],Tt=this._changing;this._changing=!0,Tt||(this._previousAttributes=s.clone(this.attributes),this.changed={});var he=this.attributes,X=this.changed,L=this._previousAttributes;for(var A in q)k=q[A],s.isEqual(he[A],k)||gt.push(A),s.isEqual(L[A],k)?delete X[A]:X[A]=k,ut?delete he[A]:he[A]=k;if(this.idAttribute in q){var W=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,W,N)}if(!Q){gt.length&&(this._pending=N);for(var B=0;B<gt.length;B++)this.trigger("change:"+gt[B],this,he[gt[B]],N)}if(Tt)return this;if(!Q)for(;this._pending;)N=this._pending,this._pending=!1,this.trigger("change",this,N);return this._pending=!1,this._changing=!1,this},unset:function(P,k){return this.set(P,void 0,s.extend({},k,{unset:!0}))},clear:function(P){var k={};for(var N in this.attributes)k[N]=void 0;return this.set(k,s.extend({},P,{unset:!0}))},hasChanged:function(P){return P==null?!s.isEmpty(this.changed):s.has(this.changed,P)},changedAttributes:function(P){if(!P)return this.hasChanged()?s.clone(this.changed):!1;var k=this._changing?this._previousAttributes:this.attributes,N={},q;for(var ut in P){var Q=P[ut];s.isEqual(k[ut],Q)||(N[ut]=Q,q=!0)}return q?N:!1},previous:function(P){return P==null||!this._previousAttributes?null:this._previousAttributes[P]},previousAttributes:function(){return s.clone(this._previousAttributes)},fetch:function(P){P=s.extend({parse:!0},P);var k=this,N=P.success;return P.success=function(q){var ut=P.parse?k.parse(q,P):q;if(!k.set(ut,P))return!1;N&&N.call(P.context,k,q,P),k.trigger("sync",k,q,P)},ie(this,P),this.sync("read",this,P)},save:function(P,k,N){var q;P==null||typeof P=="object"?(q=P,N=k):(q={})[P]=k,N=s.extend({validate:!0,parse:!0},N);var ut=N.wait;if(q&&!ut){if(!this.set(q,N))return!1}else if(!this._validate(q,N))return!1;var Q=this,gt=N.success,Tt=this.attributes;N.success=function(L){Q.attributes=Tt;var A=N.parse?Q.parse(L,N):L;if(ut&&(A=s.extend({},q,A)),A&&!Q.set(A,N))return!1;gt&&gt.call(N.context,Q,L,N),Q.trigger("sync",Q,L,N)},ie(this,N),q&&ut&&(this.attributes=s.extend({},Tt,q));var he=this.isNew()?"create":N.patch?"patch":"update";he==="patch"&&!N.attrs&&(N.attrs=q);var X=this.sync(he,this,N);return this.attributes=Tt,X},destroy:function(P){P=P?s.clone(P):{};var k=this,N=P.success,q=P.wait,ut=function(){k.stopListening(),k.trigger("destroy",k,k.collection,P)};P.success=function(gt){q&&ut(),N&&N.call(P.context,k,gt,P),k.isNew()||k.trigger("sync",k,gt,P)};var Q=!1;return this.isNew()?s.defer(P.success):(ie(this,P),Q=this.sync("delete",this,P)),q||ut(),Q},url:function(){var P=s.result(this,"urlRoot")||s.result(this.collection,"url")||ce();if(this.isNew())return P;var k=this.get(this.idAttribute);return P.replace(/[^\/]$/,"$&/")+encodeURIComponent(k)},parse:function(P,k){return P},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(P){return this._validate({},s.extend({},P,{validate:!0}))},_validate:function(P,k){if(!k.validate||!this.validate)return!0;P=s.extend({},this.attributes,P);var N=this.validationError=this.validate(P,k)||null;return N?(this.trigger("invalid",this,N,s.extend(k,{validationError:N})),!1):!0}});var ht=a.Collection=function(P,k){k||(k={}),this.preinitialize.apply(this,arguments),k.model&&(this.model=k.model),k.comparator!==void 0&&(this.comparator=k.comparator),this._reset(),this.initialize.apply(this,arguments),P&&this.reset(P,s.extend({silent:!0},k))},st={add:!0,remove:!0,merge:!0},et={add:!0,remove:!1},nt=function(P,k,N){N=Math.min(Math.max(N,0),P.length);var q=Array(P.length-N),ut=k.length,Q;for(Q=0;Q<q.length;Q++)q[Q]=P[Q+N];for(Q=0;Q<ut;Q++)P[Q+N]=k[Q];for(Q=0;Q<q.length;Q++)P[Q+ut+N]=q[Q]};s.extend(ht.prototype,v,{model:ct,preinitialize:function(){},initialize:function(){},toJSON:function(P){return this.map(function(k){return k.toJSON(P)})},sync:function(){return a.sync.apply(this,arguments)},add:function(P,k){return this.set(P,s.extend({merge:!1},k,et))},remove:function(P,k){k=s.extend({},k);var N=!s.isArray(P);P=N?[P]:P.slice();var q=this._removeModels(P,k);return!k.silent&&q.length&&(k.changes={added:[],merged:[],removed:q},this.trigger("update",this,k)),N?q[0]:q},set:function(P,k){if(P!=null){k=s.extend({},st,k),k.parse&&!this._isModel(P)&&(P=this.parse(P,k)||[]);var N=!s.isArray(P);P=N?[P]:P.slice();var q=k.at;q!=null&&(q=+q),q>this.length&&(q=this.length),q<0&&(q+=this.length+1);var ut=[],Q=[],gt=[],Tt=[],he={},X=k.add,L=k.merge,A=k.remove,W=!1,B=this.comparator&&q==null&&k.sort!==!1,mt=s.isString(this.comparator)?this.comparator:null,dt,qt;for(qt=0;qt<P.length;qt++){dt=P[qt];var fe=this.get(dt);if(fe){if(L&&dt!==fe){var de=this._isModel(dt)?dt.attributes:dt;k.parse&&(de=fe.parse(de,k)),fe.set(de,k),gt.push(fe),B&&!W&&(W=fe.hasChanged(mt))}he[fe.cid]||(he[fe.cid]=!0,ut.push(fe)),P[qt]=fe}else X&&(dt=P[qt]=this._prepareModel(dt,k),dt&&(Q.push(dt),this._addReference(dt,k),he[dt.cid]=!0,ut.push(dt)))}if(A){for(qt=0;qt<this.length;qt++)dt=this.models[qt],he[dt.cid]||Tt.push(dt);Tt.length&&this._removeModels(Tt,k)}var ae=!1,xe=!B&&X&&A;if(ut.length&&xe?(ae=this.length!==ut.length||s.some(this.models,function(en,dn){return en!==ut[dn]}),this.models.length=0,nt(this.models,ut,0),this.length=this.models.length):Q.length&&(B&&(W=!0),nt(this.models,Q,q??this.length),this.length=this.models.length),W&&this.sort({silent:!0}),!k.silent){for(qt=0;qt<Q.length;qt++)q!=null&&(k.index=q+qt),dt=Q[qt],dt.trigger("add",dt,this,k);(W||ae)&&this.trigger("sort",this,k),(Q.length||Tt.length||gt.length)&&(k.changes={added:Q,removed:Tt,merged:gt},this.trigger("update",this,k))}return N?P[0]:P}},reset:function(P,k){k=k?s.clone(k):{};for(var N=0;N<this.models.length;N++)this._removeReference(this.models[N],k);return k.previousModels=this.models,this._reset(),P=this.add(P,s.extend({silent:!0},k)),k.silent||this.trigger("reset",this,k),P},push:function(P,k){return this.add(P,s.extend({at:this.length},k))},pop:function(P){var k=this.at(this.length-1);return this.remove(k,P)},unshift:function(P,k){return this.add(P,s.extend({at:0},k))},shift:function(P){var k=this.at(0);return this.remove(k,P)},slice:function(){return h.apply(this.models,arguments)},get:function(P){if(P!=null)return this._byId[P]||this._byId[this.modelId(this._isModel(P)?P.attributes:P,P.idAttribute)]||P.cid&&this._byId[P.cid]},has:function(P){return this.get(P)!=null},at:function(P){return P<0&&(P+=this.length),this.models[P]},where:function(P,k){return this[k?"find":"filter"](P)},findWhere:function(P){return this.where(P,!0)},sort:function(P){var k=this.comparator;if(!k)throw new Error("Cannot sort a set without a comparator");P||(P={});var N=k.length;return s.isFunction(k)&&(k=k.bind(this)),N===1||s.isString(k)?this.models=this.sortBy(k):this.models.sort(k),P.silent||this.trigger("sort",this,P),this},pluck:function(P){return this.map(P+"")},fetch:function(P){P=s.extend({parse:!0},P);var k=P.success,N=this;return P.success=function(q){var ut=P.reset?"reset":"set";N[ut](q,P),k&&k.call(P.context,N,q,P),N.trigger("sync",N,q,P)},ie(this,P),this.sync("read",this,P)},create:function(P,k){k=k?s.clone(k):{};var N=k.wait;if(P=this._prepareModel(P,k),!P)return!1;N||this.add(P,k);var q=this,ut=k.success;return k.success=function(Q,gt,Tt){N&&q.add(Q,Tt),ut&&ut.call(Tt.context,Q,gt,Tt)},P.save(null,k),P},parse:function(P,k){return P},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(P,k){return P[k||this.model.prototype.idAttribute||"id"]},values:function(){return new $(this,ft)},keys:function(){return new $(this,lt)},entries:function(){return new $(this,St)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(P,k){if(this._isModel(P))return P.collection||(P.collection=this),P;k=k?s.clone(k):{},k.collection=this;var N;return this.model.prototype?N=new this.model(P,k):N=this.model(P,k),N.validationError?(this.trigger("invalid",this,N.validationError,k),!1):N},_removeModels:function(P,k){for(var N=[],q=0;q<P.length;q++){var ut=this.get(P[q]);if(ut){var Q=this.indexOf(ut);this.models.splice(Q,1),this.length--,delete this._byId[ut.cid];var gt=this.modelId(ut.attributes,ut.idAttribute);gt!=null&&delete this._byId[gt],k.silent||(k.index=Q,ut.trigger("remove",ut,this,k)),N.push(ut),this._removeReference(ut,k)}}return N},_isModel:function(P){return P instanceof ct},_addReference:function(P,k){this._byId[P.cid]=P;var N=this.modelId(P.attributes,P.idAttribute);N!=null&&(this._byId[N]=P),P.on("all",this._onModelEvent,this)},_removeReference:function(P,k){delete this._byId[P.cid];var N=this.modelId(P.attributes,P.idAttribute);N!=null&&delete this._byId[N],this===P.collection&&delete P.collection,P.off("all",this._onModelEvent,this)},_onModelEvent:function(P,k,N,q){if(k){if((P==="add"||P==="remove")&&N!==this)return;if(P==="destroy"&&this.remove(k,q),P==="changeId"){var ut=this.modelId(k.previousAttributes(),k.idAttribute),Q=this.modelId(k.attributes,k.idAttribute);ut!=null&&delete this._byId[ut],Q!=null&&(this._byId[Q]=k)}}this.trigger.apply(this,arguments)}});var it=typeof Symbol=="function"&&Symbol.iterator;it&&(ht.prototype[it]=ht.prototype.values);var $=function(P,k){this._collection=P,this._kind=k,this._index=0},ft=1,lt=2,St=3;it&&($.prototype[it]=function(){return this}),$.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var P=this._collection.at(this._index);this._index++;var k;if(this._kind===ft)k=P;else{var N=this._collection.modelId(P.attributes,P.idAttribute);this._kind===lt?k=N:k=[N,P]}return{value:k,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var U=a.View=function(P){this.cid=s.uniqueId("view"),this.preinitialize.apply(this,arguments),s.extend(this,s.pick(P,Ot)),this._ensureElement(),this.initialize.apply(this,arguments)},_t=/^(\S+)\s*(.*)$/,Ot=["model","collection","el","id","attributes","className","tagName","events"];s.extend(U.prototype,v,{tagName:"div",$:function(P){return this.$el.find(P)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(P){return this.undelegateEvents(),this._setElement(P),this.delegateEvents(),this},_setElement:function(P){this.$el=P instanceof a.$?P:a.$(P),this.el=this.$el[0]},delegateEvents:function(P){if(P||(P=s.result(this,"events")),!P)return this;this.undelegateEvents();for(var k in P){var N=P[k];if(s.isFunction(N)||(N=this[N]),!!N){var q=k.match(_t);this.delegate(q[1],q[2],N.bind(this))}}return this},delegate:function(P,k,N){return this.$el.on(P+".delegateEvents"+this.cid,k,N),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(P,k,N){return this.$el.off(P+".delegateEvents"+this.cid,k,N),this},_createElement:function(P){return document.createElement(P)},_ensureElement:function(){if(this.el)this.setElement(s.result(this,"el"));else{var P=s.extend({},s.result(this,"attributes"));this.id&&(P.id=s.result(this,"id")),this.className&&(P.class=s.result(this,"className")),this.setElement(this._createElement(s.result(this,"tagName"))),this._setAttributes(P)}},_setAttributes:function(P){this.$el.attr(P)}});var zt=function(P,k,N,q){switch(k){case 1:return function(){return P[N](this[q])};case 2:return function(ut){return P[N](this[q],ut)};case 3:return function(ut,Q){return P[N](this[q],Dt(ut,this),Q)};case 4:return function(ut,Q,gt){return P[N](this[q],Dt(ut,this),Q,gt)};default:return function(){var ut=h.call(arguments);return ut.unshift(this[q]),P[N].apply(P,ut)}}},pt=function(P,k,N,q){s.each(N,function(ut,Q){k[Q]&&(P.prototype[Q]=zt(k,ut,Q,q))})},Dt=function(P,k){return s.isFunction(P)?P:s.isObject(P)&&!k._isModel(P)?yt(P):s.isString(P)?function(N){return N.get(P)}:P},yt=function(P){var k=s.matches(P);return function(N){return k(N.attributes)}},kt={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},Mt={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};s.each([[ht,kt,"models"],[ct,Mt,"attributes"]],function(P){var k=P[0],N=P[1],q=P[2];k.mixin=function(ut){var Q=s.reduce(s.functions(ut),function(gt,Tt){return gt[Tt]=0,gt},{});pt(k,ut,Q,q)},pt(k,s,N,q)}),a.sync=function(P,k,N){var q=Kt[P];s.defaults(N||(N={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var ut={type:q,dataType:"json"};if(N.url||(ut.url=s.result(k,"url")||ce()),N.data==null&&k&&(P==="create"||P==="update"||P==="patch")&&(ut.contentType="application/json",ut.data=JSON.stringify(N.attrs||k.toJSON(N))),N.emulateJSON&&(ut.contentType="application/x-www-form-urlencoded",ut.data=ut.data?{model:ut.data}:{}),N.emulateHTTP&&(q==="PUT"||q==="DELETE"||q==="PATCH")){ut.type="POST",N.emulateJSON&&(ut.data._method=q);var Q=N.beforeSend;N.beforeSend=function(he){if(he.setRequestHeader("X-HTTP-Method-Override",q),Q)return Q.apply(this,arguments)}}ut.type!=="GET"&&!N.emulateJSON&&(ut.processData=!1);var gt=N.error;N.error=function(he,X,L){N.textStatus=X,N.errorThrown=L,gt&&gt.call(N.context,he,X,L)};var Tt=N.xhr=a.ajax(s.extend(ut,N));return k.trigger("request",k,Tt,N),Tt};var Kt={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var Xt=a.Router=function(P){P||(P={}),this.preinitialize.apply(this,arguments),P.routes&&(this.routes=P.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Qt=/\((.*?)\)/g,ne=/(\(\?)?:\w+/g,be=/\*\w+/g,Pe=/[\-{}\[\]+?.,\\\^$|#\s]/g;s.extend(Xt.prototype,v,{preinitialize:function(){},initialize:function(){},route:function(P,k,N){s.isRegExp(P)||(P=this._routeToRegExp(P)),s.isFunction(k)&&(N=k,k=""),N||(N=this[k]);var q=this;return a.history.route(P,function(ut){var Q=q._extractParameters(P,ut);q.execute(N,Q,k)!==!1&&(q.trigger.apply(q,["route:"+k].concat(Q)),q.trigger("route",k,Q),a.history.trigger("route",q,k,Q))}),this},execute:function(P,k,N){P&&P.apply(this,k)},navigate:function(P,k){return a.history.navigate(P,k),this},_bindRoutes:function(){if(this.routes){this.routes=s.result(this,"routes");for(var P,k=s.keys(this.routes);(P=k.pop())!=null;)this.route(P,this.routes[P])}},_routeToRegExp:function(P){return P=P.replace(Pe,"\\$&").replace(Qt,"(?:$1)?").replace(ne,function(k,N){return N?k:"([^/?]+)"}).replace(be,"([^?]*?)"),new RegExp("^"+P+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(P,k){var N=P.exec(k).slice(1);return s.map(N,function(q,ut){return ut===N.length-1?q||null:q?decodeURIComponent(q):null})}});var Ee=a.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},Oe=/^[#\/]|\s+$/g,Ke=/^\/+|\/+$/g,De=/#.*$/;Ee.started=!1,s.extend(Ee.prototype,v,{interval:50,atRoot:function(){var P=this.location.pathname.replace(/[^\/]$/,"$&/");return P===this.root&&!this.getSearch()},matchRoot:function(){var P=this.decodeFragment(this.location.pathname),k=P.slice(0,this.root.length-1)+"/";return k===this.root},decodeFragment:function(P){return decodeURI(P.replace(/%25/g,"%2525"))},getSearch:function(){var P=this.location.href.replace(/#.*/,"").match(/\?.+/);return P?P[0]:""},getHash:function(P){var k=(P||this).location.href.match(/#(.*)$/);return k?k[1]:""},getPath:function(){var P=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return P.charAt(0)==="/"?P.slice(1):P},getFragment:function(P){return P==null&&(this._usePushState||!this._wantsHashChange?P=this.getPath():P=this.getHash()),P.replace(Oe,"")},start:function(P){if(Ee.started)throw new Error("Backbone.history has already been started");if(Ee.started=!0,this.options=s.extend({root:"/"},this.options,P),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Ke,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var k=this.root.slice(0,-1)||"/";return this.location.replace(k+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var N=document.body,q=N.insertBefore(this.iframe,N.firstChild).contentWindow;q.document.open(),q.document.close(),q.location.hash="#"+this.fragment}var ut=window.addEventListener||function(Q,gt){return attachEvent("on"+Q,gt)};if(this._usePushState?ut("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?ut("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var P=window.removeEventListener||function(k,N){return detachEvent("on"+k,N)};this._usePushState?P("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&P("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Ee.started=!1},route:function(P,k){this.handlers.unshift({route:P,callback:k})},checkUrl:function(P){var k=this.getFragment();if(k===this.fragment&&this.iframe&&(k=this.getHash(this.iframe.contentWindow)),k===this.fragment)return!1;this.iframe&&this.navigate(k),this.loadUrl()},loadUrl:function(P){return this.matchRoot()?(P=this.fragment=this.getFragment(P),s.some(this.handlers,function(k){if(k.route.test(P))return k.callback(P),!0})):!1},navigate:function(P,k){if(!Ee.started)return!1;(!k||k===!0)&&(k={trigger:!!k}),P=this.getFragment(P||"");var N=this.root;(P===""||P.charAt(0)==="?")&&(N=N.slice(0,-1)||"/");var q=N+P;P=P.replace(De,"");var ut=this.decodeFragment(P);if(this.fragment!==ut){if(this.fragment=ut,this._usePushState)this.history[k.replace?"replaceState":"pushState"]({},document.title,q);else if(this._wantsHashChange){if(this._updateHash(this.location,P,k.replace),this.iframe&&P!==this.getHash(this.iframe.contentWindow)){var Q=this.iframe.contentWindow;k.replace||(Q.document.open(),Q.document.close()),this._updateHash(Q.location,P,k.replace)}}else return this.location.assign(q);if(k.trigger)return this.loadUrl(P)}},_updateHash:function(P,k,N){if(N){var q=P.href.replace(/(javascript:|#).*$/,"");P.replace(q+"#"+k)}else P.hash="#"+k}}),a.history=new Ee;var Ut=function(P,k){var N=this,q;return P&&s.has(P,"constructor")?q=P.constructor:q=function(){return N.apply(this,arguments)},s.extend(q,N,k),q.prototype=s.create(N.prototype,P),q.prototype.constructor=q,q.__super__=N.prototype,q};ct.extend=ht.extend=Xt.extend=U.extend=Ee.extend=Ut;var ce=function(){throw new Error('A "url" property or function must be specified')},ie=function(P,k){var N=k.error;k.error=function(q){N&&N.call(k.context,P,q,k),P.trigger("error",P,q,k)}};return a})},3640:(i,n,t)=>{(function(e){e(t(4408))})(function(e){e.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(o,a){return/^[;{}]$/.test(a)}}),e.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(o,a,s,u){return this.jsonMode?/^[\[,{]$/.test(a)||/^}/.test(s):a==";"&&u.lexical&&u.lexical.type==")"?!1:/^[;{}]$/.test(a)&&!/^;/.test(s)}});var r=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;e.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(o,a,s,u){var c=!1;return this.configuration=="html"&&(c=u.context?r.test(u.context.tagName):!1),!c&&(o=="tag"&&/>$/.test(a)&&u.context||/^</.test(s))}}),e.defineExtension("commentRange",function(o,a,s){var u=this,c=e.innerMode(u.getMode(),u.getTokenAt(a).state).mode;u.operation(function(){if(o)u.replaceRange(c.commentEnd,s),u.replaceRange(c.commentStart,a),a.line==s.line&&a.ch==s.ch&&u.setCursor(a.line,a.ch+c.commentStart.length);else{var h=u.getRange(a,s),v=h.indexOf(c.commentStart),m=h.lastIndexOf(c.commentEnd);v>-1&&m>-1&&m>v&&(h=h.substr(0,v)+h.substring(v+c.commentStart.length,m)+h.substr(m+c.commentEnd.length)),u.replaceRange(h,a,s)}})}),e.defineExtension("autoIndentRange",function(o,a){var s=this;this.operation(function(){for(var u=o.line;u<=a.line;u++)s.indentLine(u,"smart")})}),e.defineExtension("autoFormatRange",function(o,a){var s=this,u=s.getMode(),c=s.getRange(o,a).split(`
`),h=e.copyState(u,s.getTokenAt(o).state),v=s.getOption("tabSize"),m="",y=0,_=o.ch===0;function C(){m+=`
`,_=!0,++y}for(var E=0;E<c.length;++E){for(var D=new e.StringStream(c[E],v);!D.eol();){var F=e.innerMode(u,h),V=u.token(D,h),K=D.current();D.start=D.pos,(!_||/\S/.test(K))&&(m+=K,_=!1),!_&&F.mode.newlineAfterToken&&F.mode.newlineAfterToken(V,K,D.string.slice(D.pos)||c[E+1]||"",F.state)&&C()}!D.pos&&u.blankLine&&u.blankLine(h),!_&&E<c.length-1&&C()}s.operation(function(){s.replaceRange(m,o,a);for(var Z=o.line+1,ct=o.line+y;Z<=ct;++Z)s.indentLine(Z,"smart");s.setSelection(o,s.getCursor(!1))})})})},4408:function(i){(function(n,t){i.exports=t()})(this,function(){var n=navigator.userAgent,t=navigator.platform,e=/gecko\/\d/i.test(n),r=/MSIE \d/.test(n),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(n),a=/Edge\/(\d+)/.exec(n),s=r||o||a,u=s&&(r?document.documentMode||6:+(a||o)[1]),c=!a&&/WebKit\//.test(n),h=c&&/Qt\/\d+\.\d+/.test(n),v=!a&&/Chrome\//.test(n),m=/Opera\//.test(n),y=/Apple Computer/.test(navigator.vendor),_=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(n),C=/PhantomJS/.test(n),E=y&&(/Mobile\/\w+/.test(n)||navigator.maxTouchPoints>2),D=/Android/.test(n),F=E||D||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(n),V=E||/Mac/.test(t),K=/\bCrOS\b/.test(n),Z=/win/i.test(t),ct=m&&n.match(/Version\/(\d*\.\d*)/);ct&&(ct=Number(ct[1])),ct&&ct>=15&&(m=!1,c=!0);var ht=V&&(h||m&&(ct==null||ct<12.11)),st=e||s&&u>=9;function et(f){return new RegExp("(^|\\s)"+f+"(?:$|\\s)\\s*")}var nt=function(f,p){var w=f.className,b=et(p).exec(w);if(b){var S=w.slice(b.index+b[0].length);f.className=w.slice(0,b.index)+(S?b[1]+S:"")}};function it(f){for(var p=f.childNodes.length;p>0;--p)f.removeChild(f.firstChild);return f}function $(f,p){return it(f).appendChild(p)}function ft(f,p,w,b){var S=document.createElement(f);if(w&&(S.className=w),b&&(S.style.cssText=b),typeof p=="string")S.appendChild(document.createTextNode(p));else if(p)for(var O=0;O<p.length;++O)S.appendChild(p[O]);return S}function lt(f,p,w,b){var S=ft(f,p,w,b);return S.setAttribute("role","presentation"),S}var St;document.createRange?St=function(f,p,w,b){var S=document.createRange();return S.setEnd(b||f,w),S.setStart(f,p),S}:St=function(f,p,w){var b=document.body.createTextRange();try{b.moveToElementText(f.parentNode)}catch{return b}return b.collapse(!0),b.moveEnd("character",w),b.moveStart("character",p),b};function U(f,p){if(p.nodeType==3&&(p=p.parentNode),f.contains)return f.contains(p);do if(p.nodeType==11&&(p=p.host),p==f)return!0;while(p=p.parentNode)}function _t(){var f;try{f=document.activeElement}catch{f=document.body||null}for(;f&&f.shadowRoot&&f.shadowRoot.activeElement;)f=f.shadowRoot.activeElement;return f}function Ot(f,p){var w=f.className;et(p).test(w)||(f.className+=(w?" ":"")+p)}function zt(f,p){for(var w=f.split(" "),b=0;b<w.length;b++)w[b]&&!et(w[b]).test(p)&&(p+=" "+w[b]);return p}var pt=function(f){f.select()};E?pt=function(f){f.selectionStart=0,f.selectionEnd=f.value.length}:s&&(pt=function(f){try{f.select()}catch{}});function Dt(f){var p=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,p)}}function yt(f,p,w){p||(p={});for(var b in f)f.hasOwnProperty(b)&&(w!==!1||!p.hasOwnProperty(b))&&(p[b]=f[b]);return p}function kt(f,p,w,b,S){p==null&&(p=f.search(/[^\s\u00a0]/),p==-1&&(p=f.length));for(var O=b||0,R=S||0;;){var I=f.indexOf("	",O);if(I<0||I>=p)return R+(p-O);R+=I-O,R+=w-R%w,O=I+1}}var Mt=function(){this.id=null,this.f=null,this.time=0,this.handler=Dt(this.onTimeout,this)};Mt.prototype.onTimeout=function(f){f.id=0,f.time<=+new Date?f.f():setTimeout(f.handler,f.time-+new Date)},Mt.prototype.set=function(f,p){this.f=p;var w=+new Date+f;(!this.id||w<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,f),this.time=w)};function Kt(f,p){for(var w=0;w<f.length;++w)if(f[w]==p)return w;return-1}var Xt=50,Qt={toString:function(){return"CodeMirror.Pass"}},ne={scroll:!1},be={origin:"*mouse"},Pe={origin:"+move"};function Ee(f,p,w){for(var b=0,S=0;;){var O=f.indexOf("	",b);O==-1&&(O=f.length);var R=O-b;if(O==f.length||S+R>=p)return b+Math.min(R,p-S);if(S+=O-b,S+=w-S%w,b=O+1,S>=p)return b}}var Oe=[""];function Ke(f){for(;Oe.length<=f;)Oe.push(De(Oe)+" ");return Oe[f]}function De(f){return f[f.length-1]}function Ut(f,p){for(var w=[],b=0;b<f.length;b++)w[b]=p(f[b],b);return w}function ce(f,p,w){for(var b=0,S=w(p);b<f.length&&w(f[b])<=S;)b++;f.splice(b,0,p)}function ie(){}function P(f,p){var w;return Object.create?w=Object.create(f):(ie.prototype=f,w=new ie),p&&yt(p,w),w}var k=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function N(f){return/\w/.test(f)||f>""&&(f.toUpperCase()!=f.toLowerCase()||k.test(f))}function q(f,p){return p?p.source.indexOf("\\w")>-1&&N(f)?!0:p.test(f):N(f)}function ut(f){for(var p in f)if(f.hasOwnProperty(p)&&f[p])return!1;return!0}var Q=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function gt(f){return f.charCodeAt(0)>=768&&Q.test(f)}function Tt(f,p,w){for(;(w<0?p>0:p<f.length)&&gt(f.charAt(p));)p+=w;return p}function he(f,p,w){for(var b=p>w?-1:1;;){if(p==w)return p;var S=(p+w)/2,O=b<0?Math.ceil(S):Math.floor(S);if(O==p)return f(O)?p:w;f(O)?w=O:p=O+b}}function X(f,p,w,b){if(!f)return b(p,w,"ltr",0);for(var S=!1,O=0;O<f.length;++O){var R=f[O];(R.from<w&&R.to>p||p==w&&R.to==p)&&(b(Math.max(R.from,p),Math.min(R.to,w),R.level==1?"rtl":"ltr",O),S=!0)}S||b(p,w,"ltr")}var L=null;function A(f,p,w){var b;L=null;for(var S=0;S<f.length;++S){var O=f[S];if(O.from<p&&O.to>p)return S;O.to==p&&(O.from!=O.to&&w=="before"?b=S:L=S),O.from==p&&(O.from!=O.to&&w!="before"?b=S:L=S)}return b??L}var W=function(){var f="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",p="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function w(Y){return Y<=247?f.charAt(Y):1424<=Y&&Y<=1524?"R":1536<=Y&&Y<=1785?p.charAt(Y-1536):1774<=Y&&Y<=2220?"r":8192<=Y&&Y<=8203?"w":Y==8204?"b":"L"}var b=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,S=/[stwN]/,O=/[LRr]/,R=/[Lb1n]/,I=/[1n]/;function H(Y,vt,bt){this.level=Y,this.from=vt,this.to=bt}return function(Y,vt){var bt=vt=="ltr"?"L":"R";if(Y.length==0||vt=="ltr"&&!b.test(Y))return!1;for(var It=Y.length,Pt=[],Gt=0;Gt<It;++Gt)Pt.push(w(Y.charCodeAt(Gt)));for(var Yt=0,ve=bt;Yt<It;++Yt){var Te=Pt[Yt];Te=="m"?Pt[Yt]=ve:ve=Te}for(var ke=0,_e=bt;ke<It;++ke){var Ae=Pt[ke];Ae=="1"&&_e=="r"?Pt[ke]="n":O.test(Ae)&&(_e=Ae,Ae=="r"&&(Pt[ke]="R"))}for(var ze=1,Ve=Pt[0];ze<It-1;++ze){var Qe=Pt[ze];Qe=="+"&&Ve=="1"&&Pt[ze+1]=="1"?Pt[ze]="1":Qe==","&&Ve==Pt[ze+1]&&(Ve=="1"||Ve=="n")&&(Pt[ze]=Ve),Ve=Qe}for(var wn=0;wn<It;++wn){var Vr=Pt[wn];if(Vr==",")Pt[wn]="N";else if(Vr=="%"){var Xn=void 0;for(Xn=wn+1;Xn<It&&Pt[Xn]=="%";++Xn);for(var Zi=wn&&Pt[wn-1]=="!"||Xn<It&&Pt[Xn]=="1"?"1":"N",yi=wn;yi<Xn;++yi)Pt[yi]=Zi;wn=Xn-1}}for(var pr=0,li=bt;pr<It;++pr){var Jr=Pt[pr];li=="L"&&Jr=="1"?Pt[pr]="L":O.test(Jr)&&(li=Jr)}for(var Fn=0;Fn<It;++Fn)if(S.test(Pt[Fn])){var fn=void 0;for(fn=Fn+1;fn<It&&S.test(Pt[fn]);++fn);for(var er=(Fn?Pt[Fn-1]:bt)=="L",Pi=(fn<It?Pt[fn]:bt)=="L",vr=er==Pi?er?"L":"R":bt,al=Fn;al<fn;++al)Pt[al]=vr;Fn=fn-1}for(var ui=[],wa,un=0;un<It;)if(R.test(Pt[un])){var Ni=un;for(++un;un<It&&R.test(Pt[un]);++un);ui.push(new H(0,Ni,un))}else{var bi=un,sl=ui.length,ll=vt=="rtl"?1:0;for(++un;un<It&&Pt[un]!="L";++un);for(var Ri=bi;Ri<un;)if(I.test(Pt[Ri])){bi<Ri&&(ui.splice(sl,0,new H(1,bi,Ri)),sl+=ll);var ul=Ri;for(++Ri;Ri<un&&I.test(Pt[Ri]);++Ri);ui.splice(sl,0,new H(2,ul,Ri)),sl+=ll,bi=Ri}else++Ri;bi<un&&ui.splice(sl,0,new H(1,bi,un))}return vt=="ltr"&&(ui[0].level==1&&(wa=Y.match(/^\s+/))&&(ui[0].from=wa[0].length,ui.unshift(new H(0,0,wa[0].length))),De(ui).level==1&&(wa=Y.match(/\s+$/))&&(De(ui).to-=wa[0].length,ui.push(new H(0,It-wa[0].length,It)))),vt=="rtl"?ui.reverse():ui}}();function B(f,p){var w=f.order;return w==null&&(w=f.order=W(f.text,p)),w}var mt=[],dt=function(f,p,w){if(f.addEventListener)f.addEventListener(p,w,!1);else if(f.attachEvent)f.attachEvent("on"+p,w);else{var b=f._handlers||(f._handlers={});b[p]=(b[p]||mt).concat(w)}};function qt(f,p){return f._handlers&&f._handlers[p]||mt}function fe(f,p,w){if(f.removeEventListener)f.removeEventListener(p,w,!1);else if(f.detachEvent)f.detachEvent("on"+p,w);else{var b=f._handlers,S=b&&b[p];if(S){var O=Kt(S,w);O>-1&&(b[p]=S.slice(0,O).concat(S.slice(O+1)))}}}function de(f,p){var w=qt(f,p);if(w.length)for(var b=Array.prototype.slice.call(arguments,2),S=0;S<w.length;++S)w[S].apply(null,b)}function ae(f,p,w){return typeof p=="string"&&(p={type:p,preventDefault:function(){this.defaultPrevented=!0}}),de(f,w||p.type,f,p),Lr(p)||p.codemirrorIgnore}function xe(f){var p=f._handlers&&f._handlers.cursorActivity;if(p)for(var w=f.curOp.cursorActivityHandlers||(f.curOp.cursorActivityHandlers=[]),b=0;b<p.length;++b)Kt(w,p[b])==-1&&w.push(p[b])}function en(f,p){return qt(f,p).length>0}function dn(f){f.prototype.on=function(p,w){dt(this,p,w)},f.prototype.off=function(p,w){fe(this,p,w)}}function sn(f){f.preventDefault?f.preventDefault():f.returnValue=!1}function Un(f){f.stopPropagation?f.stopPropagation():f.cancelBubble=!0}function Lr(f){return f.defaultPrevented!=null?f.defaultPrevented:f.returnValue==!1}function ot(f){sn(f),Un(f)}function Ct(f){return f.target||f.srcElement}function Lt(f){var p=f.which;return p==null&&(f.button&1?p=1:f.button&2?p=3:f.button&4&&(p=2)),V&&f.ctrlKey&&p==1&&(p=3),p}var ee=function(){if(s&&u<9)return!1;var f=ft("div");return"draggable"in f||"dragDrop"in f}(),we;function Fe(f){if(we==null){var p=ft("span","");$(f,ft("span",[p,document.createTextNode("x")])),f.firstChild.offsetHeight!=0&&(we=p.offsetWidth<=1&&p.offsetHeight>2&&!(s&&u<8))}var w=we?ft("span",""):ft("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return w.setAttribute("cm-text",""),w}var We;function cn(f){if(We!=null)return We;var p=$(f,document.createTextNode("AA")),w=St(p,0,1).getBoundingClientRect(),b=St(p,1,2).getBoundingClientRect();return it(f),!w||w.left==w.right?!1:We=b.right-w.right<3}var Sn=`

b`.split(/\n/).length!=3?function(f){for(var p=0,w=[],b=f.length;p<=b;){var S=f.indexOf(`
`,p);S==-1&&(S=f.length);var O=f.slice(p,f.charAt(S-1)=="\r"?S-1:S),R=O.indexOf("\r");R!=-1?(w.push(O.slice(0,R)),p+=R+1):(w.push(O),p=S+1)}return w}:function(f){return f.split(/\r\n?|\n/)},Pn=window.getSelection?function(f){try{return f.selectionStart!=f.selectionEnd}catch{return!1}}:function(f){var p;try{p=f.ownerDocument.selection.createRange()}catch{}return!p||p.parentElement()!=f?!1:p.compareEndPoints("StartToEnd",p)!=0},zi=function(){var f=ft("div");return"oncopy"in f?!0:(f.setAttribute("oncopy","return;"),typeof f.oncopy=="function")}(),Gn=null;function _i(f){if(Gn!=null)return Gn;var p=$(f,ft("span","x")),w=p.getBoundingClientRect(),b=St(p,0,1).getBoundingClientRect();return Gn=Math.abs(w.left-b.left)>1}var Wi={},gn={};function ir(f,p){arguments.length>2&&(p.dependencies=Array.prototype.slice.call(arguments,2)),Wi[f]=p}function rn(f,p){gn[f]=p}function br(f){if(typeof f=="string"&&gn.hasOwnProperty(f))f=gn[f];else if(f&&typeof f.name=="string"&&gn.hasOwnProperty(f.name)){var p=gn[f.name];typeof p=="string"&&(p={name:p}),f=P(p,f),f.name=p.name}else{if(typeof f=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(f))return br("application/xml");if(typeof f=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(f))return br("application/json")}return typeof f=="string"?{name:f}:f||{name:"null"}}function He(f,p){p=br(p);var w=Wi[p.name];if(!w)return He(f,"text/plain");var b=w(f,p);if(qr.hasOwnProperty(p.name)){var S=qr[p.name];for(var O in S)S.hasOwnProperty(O)&&(b.hasOwnProperty(O)&&(b["_"+O]=b[O]),b[O]=S[O])}if(b.name=p.name,p.helperType&&(b.helperType=p.helperType),p.modeProps)for(var R in p.modeProps)b[R]=p.modeProps[R];return b}var qr={};function An(f,p){var w=qr.hasOwnProperty(f)?qr[f]:qr[f]={};yt(p,w)}function wr(f,p){if(p===!0)return p;if(f.copyState)return f.copyState(p);var w={};for(var b in p){var S=p[b];S instanceof Array&&(S=S.concat([])),w[b]=S}return w}function xr(f,p){for(var w;f.innerMode&&(w=f.innerMode(p),!(!w||w.mode==f));)p=w.state,f=w.mode;return w||{mode:f,state:p}}function Sr(f,p,w){return f.startState?f.startState(p,w):!0}var pn=function(f,p,w){this.pos=this.start=0,this.string=f,this.tabSize=p||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=w};pn.prototype.eol=function(){return this.pos>=this.string.length},pn.prototype.sol=function(){return this.pos==this.lineStart},pn.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},pn.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},pn.prototype.eat=function(f){var p=this.string.charAt(this.pos),w;if(typeof f=="string"?w=p==f:w=p&&(f.test?f.test(p):f(p)),w)return++this.pos,p},pn.prototype.eatWhile=function(f){for(var p=this.pos;this.eat(f););return this.pos>p},pn.prototype.eatSpace=function(){for(var f=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>f},pn.prototype.skipToEnd=function(){this.pos=this.string.length},pn.prototype.skipTo=function(f){var p=this.string.indexOf(f,this.pos);if(p>-1)return this.pos=p,!0},pn.prototype.backUp=function(f){this.pos-=f},pn.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=kt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?kt(this.string,this.lineStart,this.tabSize):0)},pn.prototype.indentation=function(){return kt(this.string,null,this.tabSize)-(this.lineStart?kt(this.string,this.lineStart,this.tabSize):0)},pn.prototype.match=function(f,p,w){if(typeof f=="string"){var b=function(R){return w?R.toLowerCase():R},S=this.string.substr(this.pos,f.length);if(b(S)==b(f))return p!==!1&&(this.pos+=f.length),!0}else{var O=this.string.slice(this.pos).match(f);return O&&O.index>0?null:(O&&p!==!1&&(this.pos+=O[0].length),O)}},pn.prototype.current=function(){return this.string.slice(this.start,this.pos)},pn.prototype.hideFirstChars=function(f,p){this.lineStart+=f;try{return p()}finally{this.lineStart-=f}},pn.prototype.lookAhead=function(f){var p=this.lineOracle;return p&&p.lookAhead(f)},pn.prototype.baseToken=function(){var f=this.lineOracle;return f&&f.baseToken(this.pos)};function Me(f,p){if(p-=f.first,p<0||p>=f.size)throw new Error("There is no line "+(p+f.first)+" in the document.");for(var w=f;!w.lines;)for(var b=0;;++b){var S=w.children[b],O=S.chunkSize();if(p<O){w=S;break}p-=O}return w.lines[p]}function jr(f,p,w){var b=[],S=p.line;return f.iter(p.line,w.line+1,function(O){var R=O.text;S==w.line&&(R=R.slice(0,w.ch)),S==p.line&&(R=R.slice(p.ch)),b.push(R),++S}),b}function Yn(f,p,w){var b=[];return f.iter(p,w,function(S){b.push(S.text)}),b}function Kr(f,p){var w=p-f.height;if(w)for(var b=f;b;b=b.parent)b.height+=w}function ln(f){if(f.parent==null)return null;for(var p=f.parent,w=Kt(p.lines,f),b=p.parent;b;p=b,b=b.parent)for(var S=0;b.children[S]!=p;++S)w+=b.children[S].chunkSize();return w+p.first}function kn(f,p){var w=f.first;t:do{for(var b=0;b<f.children.length;++b){var S=f.children[b],O=S.height;if(p<O){f=S;continue t}p-=O,w+=S.chunkSize()}return w}while(!f.lines);for(var R=0;R<f.lines.length;++R){var I=f.lines[R],H=I.height;if(p<H)break;p-=H}return w+R}function _r(f,p){return p>=f.first&&p<f.first+f.size}function qi(f,p){return String(f.lineNumberFormatter(p+f.firstLineNumber))}function le(f,p,w){if(w===void 0&&(w=null),!(this instanceof le))return new le(f,p,w);this.line=f,this.ch=p,this.sticky=w}function Be(f,p){return f.line-p.line||f.ch-p.ch}function Ki(f,p){return f.sticky==p.sticky&&Be(f,p)==0}function tt(f){return le(f.line,f.ch)}function wt(f,p){return Be(f,p)<0?p:f}function Jt(f,p){return Be(f,p)<0?f:p}function oe(f,p){return Math.max(f.first,Math.min(p,f.first+f.size-1))}function pe(f,p){if(p.line<f.first)return le(f.first,0);var w=f.first+f.size-1;return p.line>w?le(w,Me(f,w).text.length):nn(p,Me(f,p.line).text.length)}function nn(f,p){var w=f.ch;return w==null||w>p?le(f.line,p):w<0?le(f.line,0):f}function on(f,p){for(var w=[],b=0;b<p.length;b++)w[b]=pe(f,p[b]);return w}var Hn=function(f,p){this.state=f,this.lookAhead=p},_n=function(f,p,w,b){this.state=p,this.doc=f,this.line=w,this.maxLookAhead=b||0,this.baseTokens=null,this.baseTokenPos=1};_n.prototype.lookAhead=function(f){var p=this.doc.getLine(this.line+f);return p!=null&&f>this.maxLookAhead&&(this.maxLookAhead=f),p},_n.prototype.baseToken=function(f){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=f;)this.baseTokenPos+=2;var p=this.baseTokens[this.baseTokenPos+1];return{type:p&&p.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-f}},_n.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},_n.fromSaved=function(f,p,w){return p instanceof Hn?new _n(f,wr(f.mode,p.state),w,p.lookAhead):new _n(f,wr(f.mode,p),w)},_n.prototype.save=function(f){var p=f!==!1?wr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Hn(p,this.maxLookAhead):p};function oo(f,p,w,b){var S=[f.state.modeGen],O={};Ra(f,p.text,f.doc.mode,w,function(Y,vt){return S.push(Y,vt)},O,b);for(var R=w.state,I=function(Y){w.baseTokens=S;var vt=f.state.overlays[Y],bt=1,It=0;w.state=!0,Ra(f,p.text,vt.mode,w,function(Pt,Gt){for(var Yt=bt;It<Pt;){var ve=S[bt];ve>Pt&&S.splice(bt,1,Pt,S[bt+1],ve),bt+=2,It=Math.min(Pt,ve)}if(Gt)if(vt.opaque)S.splice(Yt,bt-Yt,Pt,"overlay "+Gt),bt=Yt+2;else for(;Yt<bt;Yt+=2){var Te=S[Yt+1];S[Yt+1]=(Te?Te+" ":"")+"overlay "+Gt}},O),w.state=R,w.baseTokens=null,w.baseTokenPos=1},H=0;H<f.state.overlays.length;++H)I(H);return{styles:S,classes:O.bgClass||O.textClass?O:null}}function $r(f,p,w){if(!p.styles||p.styles[0]!=f.state.modeGen){var b=ha(f,ln(p)),S=p.text.length>f.options.maxHighlightLength&&wr(f.doc.mode,b.state),O=oo(f,p,b);S&&(b.state=S),p.stateAfter=b.save(!S),p.styles=O.styles,O.classes?p.styleClasses=O.classes:p.styleClasses&&(p.styleClasses=null),w===f.doc.highlightFrontier&&(f.doc.modeFrontier=Math.max(f.doc.modeFrontier,++f.doc.highlightFrontier))}return p.styles}function ha(f,p,w){var b=f.doc,S=f.display;if(!b.mode.startState)return new _n(b,!0,p);var O=Vo(f,p,w),R=O>b.first&&Me(b,O-1).stateAfter,I=R?_n.fromSaved(b,R,O):new _n(b,Sr(b.mode),O);return b.iter(O,p,function(H){Na(f,H.text,I);var Y=I.line;H.stateAfter=Y==p-1||Y%5==0||Y>=S.viewFrom&&Y<S.viewTo?I.save():null,I.nextLine()}),w&&(b.modeFrontier=I.line),I}function Na(f,p,w,b){var S=f.doc.mode,O=new pn(p,f.options.tabSize,w);for(O.start=O.pos=b||0,p==""&&pa(S,w.state);!O.eol();)Uo(S,O,w.state),O.start=O.pos}function pa(f,p){if(f.blankLine)return f.blankLine(p);if(f.innerMode){var w=xr(f,p);if(w.mode.blankLine)return w.mode.blankLine(w.state)}}function Uo(f,p,w,b){for(var S=0;S<10;S++){b&&(b[0]=xr(f,w).mode);var O=f.token(p,w);if(p.pos>p.start)return O}throw new Error("Mode "+f.name+" failed to advance stream.")}var cs=function(f,p,w){this.start=f.start,this.end=f.pos,this.string=f.current(),this.type=p||null,this.state=w};function fs(f,p,w,b){var S=f.doc,O=S.mode,R;p=pe(S,p);var I=Me(S,p.line),H=ha(f,p.line,w),Y=new pn(I.text,f.options.tabSize,H),vt;for(b&&(vt=[]);(b||Y.pos<p.ch)&&!Y.eol();)Y.start=Y.pos,R=Uo(O,Y,H.state),b&&vt.push(new cs(Y,R,wr(S.mode,H.state)));return b?vt:new cs(Y,R,H.state)}function ao(f,p){if(f)for(;;){var w=f.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!w)break;f=f.slice(0,w.index)+f.slice(w.index+w[0].length);var b=w[1]?"bgClass":"textClass";p[b]==null?p[b]=w[2]:new RegExp("(?:^|\\s)"+w[2]+"(?:$|\\s)").test(p[b])||(p[b]+=" "+w[2])}return f}function Ra(f,p,w,b,S,O,R){var I=w.flattenSpans;I==null&&(I=f.options.flattenSpans);var H=0,Y=null,vt=new pn(p,f.options.tabSize,b),bt,It=f.options.addModeClass&&[null];for(p==""&&ao(pa(w,b.state),O);!vt.eol();){if(vt.pos>f.options.maxHighlightLength?(I=!1,R&&Na(f,p,b,vt.pos),vt.pos=p.length,bt=null):bt=ao(Uo(w,vt,b.state,It),O),It){var Pt=It[0].name;Pt&&(bt="m-"+(bt?Pt+" "+bt:Pt))}if(!I||Y!=bt){for(;H<vt.start;)H=Math.min(vt.start,H+5e3),S(H,Y);Y=bt}vt.start=vt.pos}for(;H<vt.pos;){var Gt=Math.min(vt.pos,H+5e3);S(Gt,Y),H=Gt}}function Vo(f,p,w){for(var b,S,O=f.doc,R=w?-1:p-(f.doc.mode.innerMode?1e3:100),I=p;I>R;--I){if(I<=O.first)return O.first;var H=Me(O,I-1),Y=H.stateAfter;if(Y&&(!w||I+(Y instanceof Hn?Y.lookAhead:0)<=O.modeFrontier))return I;var vt=kt(H.text,null,f.options.tabSize);(S==null||b>vt)&&(S=I-1,b=vt)}return S}function ds(f,p){if(f.modeFrontier=Math.min(f.modeFrontier,p),!(f.highlightFrontier<p-10)){for(var w=f.first,b=p-1;b>w;b--){var S=Me(f,b).stateAfter;if(S&&(!(S instanceof Hn)||b+S.lookAhead<p)){w=b+1;break}}f.highlightFrontier=Math.min(f.highlightFrontier,w)}}var ur=!1,Ir=!1;function bl(){ur=!0}function Ci(){Ir=!0}function vo(f,p,w){this.marker=f,this.from=p,this.to=w}function ei(f,p){if(f)for(var w=0;w<f.length;++w){var b=f[w];if(b.marker==p)return b}}function Qn(f,p){for(var w,b=0;b<f.length;++b)f[b]!=p&&(w||(w=[])).push(f[b]);return w}function va(f,p,w){var b=w&&window.WeakSet&&(w.markedSpans||(w.markedSpans=new WeakSet));b&&b.has(f.markedSpans)?f.markedSpans.push(p):(f.markedSpans=f.markedSpans?f.markedSpans.concat([p]):[p],b&&b.add(f.markedSpans)),p.marker.attachLine(f)}function Fo(f,p,w){var b;if(f)for(var S=0;S<f.length;++S){var O=f[S],R=O.marker,I=O.from==null||(R.inclusiveLeft?O.from<=p:O.from<p);if(I||O.from==p&&R.type=="bookmark"&&(!w||!O.marker.insertLeft)){var H=O.to==null||(R.inclusiveRight?O.to>=p:O.to>p);(b||(b=[])).push(new vo(R,O.from,H?null:O.to))}}return b}function $i(f,p,w){var b;if(f)for(var S=0;S<f.length;++S){var O=f[S],R=O.marker,I=O.to==null||(R.inclusiveRight?O.to>=p:O.to>p);if(I||O.from==p&&R.type=="bookmark"&&(!w||O.marker.insertLeft)){var H=O.from==null||(R.inclusiveLeft?O.from<=p:O.from<p);(b||(b=[])).push(new vo(R,H?null:O.from-p,O.to==null?null:O.to-p))}}return b}function La(f,p){if(p.full)return null;var w=_r(f,p.from.line)&&Me(f,p.from.line).markedSpans,b=_r(f,p.to.line)&&Me(f,p.to.line).markedSpans;if(!w&&!b)return null;var S=p.from.ch,O=p.to.ch,R=Be(p.from,p.to)==0,I=Fo(w,S,R),H=$i(b,O,R),Y=p.text.length==1,vt=De(p.text).length+(Y?S:0);if(I)for(var bt=0;bt<I.length;++bt){var It=I[bt];if(It.to==null){var Pt=ei(H,It.marker);Pt?Y&&(It.to=Pt.to==null?null:Pt.to+vt):It.to=S}}if(H)for(var Gt=0;Gt<H.length;++Gt){var Yt=H[Gt];if(Yt.to!=null&&(Yt.to+=vt),Yt.from==null){var ve=ei(I,Yt.marker);ve||(Yt.from=vt,Y&&(I||(I=[])).push(Yt))}else Yt.from+=vt,Y&&(I||(I=[])).push(Yt)}I&&(I=di(I)),H&&H!=I&&(H=di(H));var Te=[I];if(!Y){var ke=p.text.length-2,_e;if(ke>0&&I)for(var Ae=0;Ae<I.length;++Ae)I[Ae].to==null&&(_e||(_e=[])).push(new vo(I[Ae].marker,null,null));for(var ze=0;ze<ke;++ze)Te.push(_e);Te.push(H)}return Te}function di(f){for(var p=0;p<f.length;++p){var w=f[p];w.from!=null&&w.from==w.to&&w.marker.clearWhenEmpty!==!1&&f.splice(p--,1)}return f.length?f:null}function Or(f,p,w){var b=null;if(f.iter(p.line,w.line+1,function(Pt){if(Pt.markedSpans)for(var Gt=0;Gt<Pt.markedSpans.length;++Gt){var Yt=Pt.markedSpans[Gt].marker;Yt.readOnly&&(!b||Kt(b,Yt)==-1)&&(b||(b=[])).push(Yt)}}),!b)return null;for(var S=[{from:p,to:w}],O=0;O<b.length;++O)for(var R=b[O],I=R.find(0),H=0;H<S.length;++H){var Y=S[H];if(!(Be(Y.to,I.from)<0||Be(Y.from,I.to)>0)){var vt=[H,1],bt=Be(Y.from,I.from),It=Be(Y.to,I.to);(bt<0||!R.inclusiveLeft&&!bt)&&vt.push({from:Y.from,to:I.from}),(It>0||!R.inclusiveRight&&!It)&&vt.push({from:I.to,to:Y.to}),S.splice.apply(S,vt),H+=vt.length-3}}return S}function hs(f){var p=f.markedSpans;if(p){for(var w=0;w<p.length;++w)p[w].marker.detachLine(f);f.markedSpans=null}}function Ho(f,p){if(p){for(var w=0;w<p.length;++w)p[w].marker.attachLine(f);f.markedSpans=p}}function Ti(f){return f.inclusiveLeft?-1:0}function so(f){return f.inclusiveRight?1:0}function zo(f,p){var w=f.lines.length-p.lines.length;if(w!=0)return w;var b=f.find(),S=p.find(),O=Be(b.from,S.from)||Ti(f)-Ti(p);if(O)return-O;var R=Be(b.to,S.to)||so(f)-so(p);return R||p.id-f.id}function Wo(f,p){var w=Ir&&f.markedSpans,b;if(w)for(var S=void 0,O=0;O<w.length;++O)S=w[O],S.marker.collapsed&&(p?S.from:S.to)==null&&(!b||zo(b,S.marker)<0)&&(b=S.marker);return b}function je(f){return Wo(f,!0)}function Le(f){return Wo(f,!1)}function mn(f,p){var w=Ir&&f.markedSpans,b;if(w)for(var S=0;S<w.length;++S){var O=w[S];O.marker.collapsed&&(O.from==null||O.from<p)&&(O.to==null||O.to>p)&&(!b||zo(b,O.marker)<0)&&(b=O.marker)}return b}function Re(f,p,w,b,S){var O=Me(f,p),R=Ir&&O.markedSpans;if(R)for(var I=0;I<R.length;++I){var H=R[I];if(H.marker.collapsed){var Y=H.marker.find(0),vt=Be(Y.from,w)||Ti(H.marker)-Ti(S),bt=Be(Y.to,b)||so(H.marker)-so(S);if(!(vt>=0&&bt<=0||vt<=0&&bt>=0)&&(vt<=0&&(H.marker.inclusiveRight&&S.inclusiveLeft?Be(Y.to,w)>=0:Be(Y.to,w)>0)||vt>=0&&(H.marker.inclusiveRight&&S.inclusiveLeft?Be(Y.from,b)<=0:Be(Y.from,b)<0)))return!0}}}function Nn(f){for(var p;p=je(f);)f=p.find(-1,!0).line;return f}function or(f){for(var p;p=Le(f);)f=p.find(1,!0).line;return f}function Br(f){for(var p,w;p=Le(f);)f=p.find(1,!0).line,(w||(w=[])).push(f);return w}function qo(f,p){var w=Me(f,p),b=Nn(w);return w==b?p:ln(b)}function hi(f,p){if(p>f.lastLine())return p;var w=Me(f,p),b;if(!pi(f,w))return p;for(;b=Le(w);)w=b.find(1,!0).line;return ln(w)+1}function pi(f,p){var w=Ir&&p.markedSpans;if(w){for(var b=void 0,S=0;S<w.length;++S)if(b=w[S],!!b.marker.collapsed){if(b.from==null)return!0;if(!b.marker.widgetNode&&b.from==0&&b.marker.inclusiveLeft&&ni(f,p,b))return!0}}}function ni(f,p,w){if(w.to==null){var b=w.marker.find(1,!0);return ni(f,b.line,ei(b.line.markedSpans,w.marker))}if(w.marker.inclusiveRight&&w.to==p.text.length)return!0;for(var S=void 0,O=0;O<p.markedSpans.length;++O)if(S=p.markedSpans[O],S.marker.collapsed&&!S.marker.widgetNode&&S.from==w.to&&(S.to==null||S.to!=w.from)&&(S.marker.inclusiveLeft||w.marker.inclusiveRight)&&ni(f,p,S))return!0}function Gi(f){f=Nn(f);for(var p=0,w=f.parent,b=0;b<w.lines.length;++b){var S=w.lines[b];if(S==f)break;p+=S.height}for(var O=w.parent;O;w=O,O=w.parent)for(var R=0;R<O.children.length;++R){var I=O.children[R];if(I==w)break;p+=I.height}return p}function ja(f){if(f.height==0)return 0;for(var p=f.text.length,w,b=f;w=je(b);){var S=w.find(0,!0);b=S.from.line,p+=S.from.ch-S.to.ch}for(b=f;w=Le(b);){var O=w.find(0,!0);p-=b.text.length-O.from.ch,b=O.to.line,p+=b.text.length-O.to.ch}return p}function Ls(f){var p=f.display,w=f.doc;p.maxLine=Me(w,w.first),p.maxLineLength=ja(p.maxLine),p.maxLineChanged=!0,w.iter(function(b){var S=ja(b);S>p.maxLineLength&&(p.maxLineLength=S,p.maxLine=b)})}var Gr=function(f,p,w){this.text=f,Ho(this,p),this.height=w?w(this):1};Gr.prototype.lineNo=function(){return ln(this)},dn(Gr);function Kf(f,p,w,b){f.text=p,f.stateAfter&&(f.stateAfter=null),f.styles&&(f.styles=null),f.order!=null&&(f.order=null),hs(f),Ho(f,w);var S=b?b(f):1;S!=f.height&&Kr(f,S)}function js(f){f.parent=null,hs(f)}var $f={},Sc={};function _c(f,p){if(!f||/^\s*$/.test(f))return null;var w=p.addModeClass?Sc:$f;return w[f]||(w[f]=f.replace(/\S+/g,"cm-$&"))}function uu(f,p){var w=lt("span",null,null,c?"padding-right: .1px":null),b={pre:lt("pre",[w],"CodeMirror-line"),content:w,col:0,pos:0,cm:f,trailingSpace:!1,splitSpaces:f.getOption("lineWrapping")};p.measure={};for(var S=0;S<=(p.rest?p.rest.length:0);S++){var O=S?p.rest[S-1]:p.line,R=void 0;b.pos=0,b.addToken=Cc,cn(f.display.measure)&&(R=B(O,f.doc.direction))&&(b.addToken=Yf(b.addToken,R)),b.map=[];var I=p!=f.display.externalMeasured&&ln(O);Xf(O,b,$r(f,O,I)),O.styleClasses&&(O.styleClasses.bgClass&&(b.bgClass=zt(O.styleClasses.bgClass,b.bgClass||"")),O.styleClasses.textClass&&(b.textClass=zt(O.styleClasses.textClass,b.textClass||""))),b.map.length==0&&b.map.push(0,0,b.content.appendChild(Fe(f.display.measure))),S==0?(p.measure.map=b.map,p.measure.cache={}):((p.measure.maps||(p.measure.maps=[])).push(b.map),(p.measure.caches||(p.measure.caches=[])).push({}))}if(c){var H=b.content.lastChild;(/\bcm-tab\b/.test(H.className)||H.querySelector&&H.querySelector(".cm-tab"))&&(b.content.className="cm-tab-wrap-hack")}return de(f,"renderLine",f,p.line,b.pre),b.pre.className&&(b.textClass=zt(b.pre.className,b.textClass||"")),b}function Gf(f){var p=ft("span","","cm-invalidchar");return p.title="\\u"+f.charCodeAt(0).toString(16),p.setAttribute("aria-label",p.title),p}function Cc(f,p,w,b,S,O,R){if(p){var I=f.splitSpaces?cu(p,f.trailingSpace):p,H=f.cm.state.specialChars,Y=!1,vt;if(!H.test(p))f.col+=p.length,vt=document.createTextNode(I),f.map.push(f.pos,f.pos+p.length,vt),s&&u<9&&(Y=!0),f.pos+=p.length;else{vt=document.createDocumentFragment();for(var bt=0;;){H.lastIndex=bt;var It=H.exec(p),Pt=It?It.index-bt:p.length-bt;if(Pt){var Gt=document.createTextNode(I.slice(bt,bt+Pt));s&&u<9?vt.appendChild(ft("span",[Gt])):vt.appendChild(Gt),f.map.push(f.pos,f.pos+Pt,Gt),f.col+=Pt,f.pos+=Pt}if(!It)break;bt+=Pt+1;var Yt=void 0;if(It[0]=="	"){var ve=f.cm.options.tabSize,Te=ve-f.col%ve;Yt=vt.appendChild(ft("span",Ke(Te),"cm-tab")),Yt.setAttribute("role","presentation"),Yt.setAttribute("cm-text","	"),f.col+=Te}else It[0]=="\r"||It[0]==`
`?(Yt=vt.appendChild(ft("span",It[0]=="\r"?"":"","cm-invalidchar")),Yt.setAttribute("cm-text",It[0]),f.col+=1):(Yt=f.cm.options.specialCharPlaceholder(It[0]),Yt.setAttribute("cm-text",It[0]),s&&u<9?vt.appendChild(ft("span",[Yt])):vt.appendChild(Yt),f.col+=1);f.map.push(f.pos,f.pos+1,Yt),f.pos++}}if(f.trailingSpace=I.charCodeAt(p.length-1)==32,w||b||S||Y||O||R){var ke=w||"";b&&(ke+=b),S&&(ke+=S);var _e=ft("span",[vt],ke,O);if(R)for(var Ae in R)R.hasOwnProperty(Ae)&&Ae!="style"&&Ae!="class"&&_e.setAttribute(Ae,R[Ae]);return f.content.appendChild(_e)}f.content.appendChild(vt)}}function cu(f,p){if(f.length>1&&!/  /.test(f))return f;for(var w=p,b="",S=0;S<f.length;S++){var O=f.charAt(S);O==" "&&w&&(S==f.length-1||f.charCodeAt(S+1)==32)&&(O=""),b+=O,w=O==" "}return b}function Yf(f,p){return function(w,b,S,O,R,I,H){S=S?S+" cm-force-border":"cm-force-border";for(var Y=w.pos,vt=Y+b.length;;){for(var bt=void 0,It=0;It<p.length&&(bt=p[It],!(bt.to>Y&&bt.from<=Y));It++);if(bt.to>=vt)return f(w,b,S,O,R,I,H);f(w,b.slice(0,bt.to-Y),S,O,null,I,H),O=null,b=b.slice(bt.to-Y),Y=bt.to}}}function Tc(f,p,w,b){var S=!b&&w.widgetNode;S&&f.map.push(f.pos,f.pos+p,S),!b&&f.cm.display.input.needsContentAttribute&&(S||(S=f.content.appendChild(document.createElement("span"))),S.setAttribute("cm-marker",w.id)),S&&(f.cm.display.input.setUneditable(S),f.content.appendChild(S)),f.pos+=p,f.trailingSpace=!1}function Xf(f,p,w){var b=f.markedSpans,S=f.text,O=0;if(!b){for(var R=1;R<w.length;R+=2)p.addToken(p,S.slice(O,O=w[R]),_c(w[R+1],p.cm.options));return}for(var I=S.length,H=0,Y=1,vt="",bt,It,Pt=0,Gt,Yt,ve,Te,ke;;){if(Pt==H){Gt=Yt=ve=It="",ke=null,Te=null,Pt=1/0;for(var _e=[],Ae=void 0,ze=0;ze<b.length;++ze){var Ve=b[ze],Qe=Ve.marker;if(Qe.type=="bookmark"&&Ve.from==H&&Qe.widgetNode)_e.push(Qe);else if(Ve.from<=H&&(Ve.to==null||Ve.to>H||Qe.collapsed&&Ve.to==H&&Ve.from==H)){if(Ve.to!=null&&Ve.to!=H&&Pt>Ve.to&&(Pt=Ve.to,Yt=""),Qe.className&&(Gt+=" "+Qe.className),Qe.css&&(It=(It?It+";":"")+Qe.css),Qe.startStyle&&Ve.from==H&&(ve+=" "+Qe.startStyle),Qe.endStyle&&Ve.to==Pt&&(Ae||(Ae=[])).push(Qe.endStyle,Ve.to),Qe.title&&((ke||(ke={})).title=Qe.title),Qe.attributes)for(var wn in Qe.attributes)(ke||(ke={}))[wn]=Qe.attributes[wn];Qe.collapsed&&(!Te||zo(Te.marker,Qe)<0)&&(Te=Ve)}else Ve.from>H&&Pt>Ve.from&&(Pt=Ve.from)}if(Ae)for(var Vr=0;Vr<Ae.length;Vr+=2)Ae[Vr+1]==Pt&&(Yt+=" "+Ae[Vr]);if(!Te||Te.from==H)for(var Xn=0;Xn<_e.length;++Xn)Tc(p,0,_e[Xn]);if(Te&&(Te.from||0)==H){if(Tc(p,(Te.to==null?I+1:Te.to)-H,Te.marker,Te.from==null),Te.to==null)return;Te.to==H&&(Te=!1)}}if(H>=I)break;for(var Zi=Math.min(I,Pt);;){if(vt){var yi=H+vt.length;if(!Te){var pr=yi>Zi?vt.slice(0,Zi-H):vt;p.addToken(p,pr,bt?bt+Gt:Gt,ve,H+pr.length==Pt?Yt:"",It,ke)}if(yi>=Zi){vt=vt.slice(Zi-H),H=Zi;break}H=yi,ve=""}vt=S.slice(O,O=w[Y++]),bt=_c(w[Y++],p.cm.options)}}}function wl(f,p,w){this.line=p,this.rest=Br(p),this.size=this.rest?ln(De(this.rest))-w+1:1,this.node=this.text=null,this.hidden=pi(f,p)}function fu(f,p,w){for(var b=[],S,O=p;O<w;O=S){var R=new wl(f.doc,Me(f.doc,O),O);S=O+R.size,b.push(R)}return b}var ps=null;function Jf(f){ps?ps.ops.push(f):f.ownsGroup=ps={ops:[f],delayedCallbacks:[]}}function Zf(f){var p=f.delayedCallbacks,w=0;do{for(;w<p.length;w++)p[w].call(null);for(var b=0;b<f.ops.length;b++){var S=f.ops[b];if(S.cursorActivityHandlers)for(;S.cursorActivityCalled<S.cursorActivityHandlers.length;)S.cursorActivityHandlers[S.cursorActivityCalled++].call(null,S.cm)}}while(w<p.length)}function Ec(f,p){var w=f.ownsGroup;if(w)try{Zf(w)}finally{ps=null,p(w)}}var Is=null;function cr(f,p){var w=qt(f,p);if(w.length){var b=Array.prototype.slice.call(arguments,2),S;ps?S=ps.delayedCallbacks:Is?S=Is:(S=Is=[],setTimeout(Bs,0));for(var O=function(I){S.push(function(){return w[I].apply(null,b)})},R=0;R<w.length;++R)O(R)}}function Bs(){var f=Is;Is=null;for(var p=0;p<f.length;++p)f[p]()}function Ia(f,p,w,b){for(var S=0;S<p.changes.length;S++){var O=p.changes[S];O=="text"?Ac(f,p):O=="gutter"?Ko(f,p,w,b):O=="class"?Vs(f,p):O=="widget"&&td(f,p,b)}p.changes=null}function Us(f){return f.node==f.text&&(f.node=ft("div",null,null,"position: relative"),f.text.parentNode&&f.text.parentNode.replaceChild(f.node,f.text),f.node.appendChild(f.text),s&&u<8&&(f.node.style.zIndex=2)),f.node}function Qf(f,p){var w=p.bgClass?p.bgClass+" "+(p.line.bgClass||""):p.line.bgClass;if(w&&(w+=" CodeMirror-linebackground"),p.background)w?p.background.className=w:(p.background.parentNode.removeChild(p.background),p.background=null);else if(w){var b=Us(p);p.background=b.insertBefore(ft("div",null,w),b.firstChild),f.display.input.setUneditable(p.background)}}function Oc(f,p){var w=f.display.externalMeasured;return w&&w.line==p.line?(f.display.externalMeasured=null,p.measure=w.measure,w.built):uu(f,p)}function Ac(f,p){var w=p.text.className,b=Oc(f,p);p.text==p.node&&(p.node=b.pre),p.text.parentNode.replaceChild(b.pre,p.text),p.text=b.pre,b.bgClass!=p.bgClass||b.textClass!=p.textClass?(p.bgClass=b.bgClass,p.textClass=b.textClass,Vs(f,p)):w&&(p.text.className=w)}function Vs(f,p){Qf(f,p),p.line.wrapClass?Us(p).className=p.line.wrapClass:p.node!=p.text&&(p.node.className="");var w=p.textClass?p.textClass+" "+(p.line.textClass||""):p.line.textClass;p.text.className=w||""}function Ko(f,p,w,b){if(p.gutter&&(p.node.removeChild(p.gutter),p.gutter=null),p.gutterBackground&&(p.node.removeChild(p.gutterBackground),p.gutterBackground=null),p.line.gutterClass){var S=Us(p);p.gutterBackground=ft("div",null,"CodeMirror-gutter-background "+p.line.gutterClass,"left: "+(f.options.fixedGutter?b.fixedPos:-b.gutterTotalWidth)+"px; width: "+b.gutterTotalWidth+"px"),f.display.input.setUneditable(p.gutterBackground),S.insertBefore(p.gutterBackground,p.text)}var O=p.line.gutterMarkers;if(f.options.lineNumbers||O){var R=Us(p),I=p.gutter=ft("div",null,"CodeMirror-gutter-wrapper","left: "+(f.options.fixedGutter?b.fixedPos:-b.gutterTotalWidth)+"px");if(I.setAttribute("aria-hidden","true"),f.display.input.setUneditable(I),R.insertBefore(I,p.text),p.line.gutterClass&&(I.className+=" "+p.line.gutterClass),f.options.lineNumbers&&(!O||!O["CodeMirror-linenumbers"])&&(p.lineNumber=I.appendChild(ft("div",qi(f.options,w),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+b.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+f.display.lineNumInnerWidth+"px"))),O)for(var H=0;H<f.display.gutterSpecs.length;++H){var Y=f.display.gutterSpecs[H].className,vt=O.hasOwnProperty(Y)&&O[Y];vt&&I.appendChild(ft("div",[vt],"CodeMirror-gutter-elt","left: "+b.gutterLeft[Y]+"px; width: "+b.gutterWidth[Y]+"px"))}}}function td(f,p,w){p.alignable&&(p.alignable=null);for(var b=et("CodeMirror-linewidget"),S=p.node.firstChild,O=void 0;S;S=O)O=S.nextSibling,b.test(S.className)&&p.node.removeChild(S);vs(f,p,w)}function kc(f,p,w,b){var S=Oc(f,p);return p.text=p.node=S.pre,S.bgClass&&(p.bgClass=S.bgClass),S.textClass&&(p.textClass=S.textClass),Vs(f,p),Ko(f,p,w,b),vs(f,p,b),p.node}function vs(f,p,w){if(du(f,p.line,p,w,!0),p.rest)for(var b=0;b<p.rest.length;b++)du(f,p.rest[b],p,w,!1)}function du(f,p,w,b,S){if(p.widgets)for(var O=Us(w),R=0,I=p.widgets;R<I.length;++R){var H=I[R],Y=ft("div",[H.node],"CodeMirror-linewidget"+(H.className?" "+H.className:""));H.handleMouseEvents||Y.setAttribute("cm-ignore-events","true"),Mc(H,Y,w,b),f.display.input.setUneditable(Y),S&&H.above?O.insertBefore(Y,w.gutter||w.text):O.appendChild(Y),cr(H,"redraw")}}function Mc(f,p,w,b){if(f.noHScroll){(w.alignable||(w.alignable=[])).push(p);var S=b.wrapperWidth;p.style.left=b.fixedPos+"px",f.coverGutter||(S-=b.gutterTotalWidth,p.style.paddingLeft=b.gutterTotalWidth+"px"),p.style.width=S+"px"}f.coverGutter&&(p.style.zIndex=5,p.style.position="relative",f.noHScroll||(p.style.marginLeft=-b.gutterTotalWidth+"px"))}function gs(f){if(f.height!=null)return f.height;var p=f.doc.cm;if(!p)return 0;if(!U(document.body,f.node)){var w="position: relative;";f.coverGutter&&(w+="margin-left: -"+p.display.gutters.offsetWidth+"px;"),f.noHScroll&&(w+="width: "+p.display.wrapper.clientWidth+"px;"),$(p.display.measure,ft("div",[f.node],null,w))}return f.height=f.node.parentNode.offsetHeight}function vi(f,p){for(var w=Ct(p);w!=f.wrapper;w=w.parentNode)if(!w||w.nodeType==1&&w.getAttribute("cm-ignore-events")=="true"||w.parentNode==f.sizer&&w!=f.mover)return!0}function Fs(f){return f.lineSpace.offsetTop}function xl(f){return f.mover.offsetHeight-f.lineSpace.offsetHeight}function ed(f){if(f.cachedPaddingH)return f.cachedPaddingH;var p=$(f.measure,ft("pre","x","CodeMirror-line-like")),w=window.getComputedStyle?window.getComputedStyle(p):p.currentStyle,b={left:parseInt(w.paddingLeft),right:parseInt(w.paddingRight)};return!isNaN(b.left)&&!isNaN(b.right)&&(f.cachedPaddingH=b),b}function Yi(f){return Xt-f.display.nativeBarWidth}function Ba(f){return f.display.scroller.clientWidth-Yi(f)-f.display.barWidth}function z(f){return f.display.scroller.clientHeight-Yi(f)-f.display.barHeight}function rt(f,p,w){var b=f.options.lineWrapping,S=b&&Ba(f);if(!p.measure.heights||b&&p.measure.width!=S){var O=p.measure.heights=[];if(b){p.measure.width=S;for(var R=p.text.firstChild.getClientRects(),I=0;I<R.length-1;I++){var H=R[I],Y=R[I+1];Math.abs(H.bottom-Y.bottom)>2&&O.push((H.bottom+Y.top)/2-w.top)}}O.push(w.bottom-w.top)}}function xt(f,p,w){if(f.line==p)return{map:f.measure.map,cache:f.measure.cache};for(var b=0;b<f.rest.length;b++)if(f.rest[b]==p)return{map:f.measure.maps[b],cache:f.measure.caches[b]};for(var S=0;S<f.rest.length;S++)if(ln(f.rest[S])>w)return{map:f.measure.maps[S],cache:f.measure.caches[S],before:!0}}function Et(f,p){p=Nn(p);var w=ln(p),b=f.display.externalMeasured=new wl(f.doc,p,w);b.lineN=w;var S=b.built=uu(f,b);return b.text=S.pre,$(f.display.lineMeasure,S.pre),b}function Bt(f,p,w,b){return me(f,te(f,p),w,b)}function jt(f,p){if(p>=f.display.viewFrom&&p<f.display.viewTo)return f.display.view[Ws(f,p)];var w=f.display.externalMeasured;if(w&&p>=w.lineN&&p<w.lineN+w.size)return w}function te(f,p){var w=ln(p),b=jt(f,w);b&&!b.text?b=null:b&&b.changes&&(Ia(f,b,w,ad(f)),f.curOp.forceUpdate=!0),b||(b=Et(f,p));var S=xt(b,p,w);return{line:p,view:b,rect:null,map:S.map,cache:S.cache,before:S.before,hasHeights:!1}}function me(f,p,w,b,S){p.before&&(w=-1);var O=w+(b||""),R;return p.cache.hasOwnProperty(O)?R=p.cache[O]:(p.rect||(p.rect=p.view.text.getBoundingClientRect()),p.hasHeights||(rt(f,p.view,p.rect),p.hasHeights=!0),R=gi(f,p,w,b),R.bogus||(p.cache[O]=R)),{left:R.left,right:R.right,top:S?R.rtop:R.top,bottom:S?R.rbottom:R.bottom}}var Ze={left:0,right:0,top:0,bottom:0};function Ye(f,p,w){for(var b,S,O,R,I,H,Y=0;Y<f.length;Y+=3)if(I=f[Y],H=f[Y+1],p<I?(S=0,O=1,R="left"):p<H?(S=p-I,O=S+1):(Y==f.length-3||p==H&&f[Y+3]>p)&&(O=H-I,S=O-1,p>=H&&(R="right")),S!=null){if(b=f[Y+2],I==H&&w==(b.insertLeft?"left":"right")&&(R=w),w=="left"&&S==0)for(;Y&&f[Y-2]==f[Y-3]&&f[Y-1].insertLeft;)b=f[(Y-=3)+2],R="left";if(w=="right"&&S==H-I)for(;Y<f.length-3&&f[Y+3]==f[Y+4]&&!f[Y+5].insertLeft;)b=f[(Y+=3)+2],R="right";break}return{node:b,start:S,end:O,collapse:R,coverStart:I,coverEnd:H}}function Ar(f,p){var w=Ze;if(p=="left")for(var b=0;b<f.length&&(w=f[b]).left==w.right;b++);else for(var S=f.length-1;S>=0&&(w=f[S]).left==w.right;S--);return w}function gi(f,p,w,b){var S=Ye(p.map,w,b),O=S.node,R=S.start,I=S.end,H=S.collapse,Y;if(O.nodeType==3){for(var vt=0;vt<4;vt++){for(;R&&gt(p.line.text.charAt(S.coverStart+R));)--R;for(;S.coverStart+I<S.coverEnd&&gt(p.line.text.charAt(S.coverStart+I));)++I;if(s&&u<9&&R==0&&I==S.coverEnd-S.coverStart?Y=O.parentNode.getBoundingClientRect():Y=Ar(St(O,R,I).getClientRects(),b),Y.left||Y.right||R==0)break;I=R,R=R-1,H="right"}s&&u<11&&(Y=nd(f.display.measure,Y))}else{R>0&&(H=b="right");var bt;f.options.lineWrapping&&(bt=O.getClientRects()).length>1?Y=bt[b=="right"?bt.length-1:0]:Y=O.getBoundingClientRect()}if(s&&u<9&&!R&&(!Y||!Y.left&&!Y.right)){var It=O.parentNode.getClientRects()[0];It?Y={left:It.left,right:It.left+_l(f.display),top:It.top,bottom:It.bottom}:Y=Ze}for(var Pt=Y.top-p.rect.top,Gt=Y.bottom-p.rect.top,Yt=(Pt+Gt)/2,ve=p.view.measure.heights,Te=0;Te<ve.length-1&&!(Yt<ve[Te]);Te++);var ke=Te?ve[Te-1]:0,_e=ve[Te],Ae={left:(H=="right"?Y.right:Y.left)-p.rect.left,right:(H=="left"?Y.left:Y.right)-p.rect.left,top:ke,bottom:_e};return!Y.left&&!Y.right&&(Ae.bogus=!0),f.options.singleCursorHeightPerLine||(Ae.rtop=Pt,Ae.rbottom=Gt),Ae}function nd(f,p){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!_i(f))return p;var w=screen.logicalXDPI/screen.deviceXDPI,b=screen.logicalYDPI/screen.deviceYDPI;return{left:p.left*w,right:p.right*w,top:p.top*b,bottom:p.bottom*b}}function Dc(f){if(f.measure&&(f.measure.cache={},f.measure.heights=null,f.rest))for(var p=0;p<f.rest.length;p++)f.measure.caches[p]={}}function Mg(f){f.display.externalMeasure=null,it(f.display.lineMeasure);for(var p=0;p<f.display.view.length;p++)Dc(f.display.view[p])}function Pc(f){Mg(f),f.display.cachedCharWidth=f.display.cachedTextHeight=f.display.cachedPaddingH=null,f.options.lineWrapping||(f.display.maxLineChanged=!0),f.display.lineNumChars=null}function lo(){return v&&D?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function hu(){return v&&D?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function rd(f){var p=0;if(f.widgets)for(var w=0;w<f.widgets.length;++w)f.widgets[w].above&&(p+=gs(f.widgets[w]));return p}function Nc(f,p,w,b,S){if(!S){var O=rd(p);w.top+=O,w.bottom+=O}if(b=="line")return w;b||(b="local");var R=Gi(p);if(b=="local"?R+=Fs(f.display):R-=f.display.viewOffset,b=="page"||b=="window"){var I=f.display.lineSpace.getBoundingClientRect();R+=I.top+(b=="window"?0:hu());var H=I.left+(b=="window"?0:lo());w.left+=H,w.right+=H}return w.top+=R,w.bottom+=R,w}function Zh(f,p,w){if(w=="div")return p;var b=p.left,S=p.top;if(w=="page")b-=lo(),S-=hu();else if(w=="local"||!w){var O=f.display.sizer.getBoundingClientRect();b+=O.left,S+=O.top}var R=f.display.lineSpace.getBoundingClientRect();return{left:b-R.left,top:S-R.top}}function Rc(f,p,w,b,S){return b||(b=Me(f.doc,p.line)),Nc(f,b,Bt(f,b,p.ch,S),w)}function go(f,p,w,b,S,O){b=b||Me(f.doc,p.line),S||(S=te(f,b));function R(Gt,Yt){var ve=me(f,S,Gt,Yt?"right":"left",O);return Yt?ve.left=ve.right:ve.right=ve.left,Nc(f,b,ve,w)}var I=B(b,f.doc.direction),H=p.ch,Y=p.sticky;if(H>=b.text.length?(H=b.text.length,Y="before"):H<=0&&(H=0,Y="after"),!I)return R(Y=="before"?H-1:H,Y=="before");function vt(Gt,Yt,ve){var Te=I[Yt],ke=Te.level==1;return R(ve?Gt-1:Gt,ke!=ve)}var bt=A(I,H,Y),It=L,Pt=vt(H,bt,Y=="before");return It!=null&&(Pt.other=vt(H,It,Y!="before")),Pt}function Dg(f,p){var w=0;p=pe(f.doc,p),f.options.lineWrapping||(w=_l(f.display)*p.ch);var b=Me(f.doc,p.line),S=Gi(b)+Fs(f.display);return{left:w,right:w,top:S,bottom:S+b.height}}function Hs(f,p,w,b,S){var O=le(f,p,w);return O.xRel=S,b&&(O.outside=b),O}function Lc(f,p,w){var b=f.doc;if(w+=f.display.viewOffset,w<0)return Hs(b.first,0,null,-1,-1);var S=kn(b,w),O=b.first+b.size-1;if(S>O)return Hs(b.first+b.size-1,Me(b,O).text.length,null,1,1);p<0&&(p=0);for(var R=Me(b,S);;){var I=Sl(f,R,S,p,w),H=mn(R,I.ch+(I.xRel>0||I.outside>0?1:0));if(!H)return I;var Y=H.find(1);if(Y.line==S)return Y;R=Me(b,S=Y.line)}}function pu(f,p,w,b){b-=rd(p);var S=p.text.length,O=he(function(R){return me(f,w,R-1).bottom<=b},S,0);return S=he(function(R){return me(f,w,R).top>b},O,S),{begin:O,end:S}}function id(f,p,w,b){w||(w=te(f,p));var S=Nc(f,p,me(f,w,b),"line").top;return pu(f,p,w,S)}function od(f,p,w,b){return f.bottom<=w?!1:f.top>w?!0:(b?f.left:f.right)>p}function Sl(f,p,w,b,S){S-=Gi(p);var O=te(f,p),R=rd(p),I=0,H=p.text.length,Y=!0,vt=B(p,f.doc.direction);if(vt){var bt=(f.options.lineWrapping?Qh:vu)(f,p,w,O,vt,b,S);Y=bt.level!=1,I=Y?bt.from:bt.to-1,H=Y?bt.to:bt.from-1}var It=null,Pt=null,Gt=he(function(ze){var Ve=me(f,O,ze);return Ve.top+=R,Ve.bottom+=R,od(Ve,b,S,!1)?(Ve.top<=S&&Ve.left<=b&&(It=ze,Pt=Ve),!0):!1},I,H),Yt,ve,Te=!1;if(Pt){var ke=b-Pt.left<Pt.right-b,_e=ke==Y;Gt=It+(_e?0:1),ve=_e?"after":"before",Yt=ke?Pt.left:Pt.right}else{!Y&&(Gt==H||Gt==I)&&Gt++,ve=Gt==0?"after":Gt==p.text.length?"before":me(f,O,Gt-(Y?1:0)).bottom+R<=S==Y?"after":"before";var Ae=go(f,le(w,Gt,ve),"line",p,O);Yt=Ae.left,Te=S<Ae.top?-1:S>=Ae.bottom?1:0}return Gt=Tt(p.text,Gt,1),Hs(w,Gt,ve,Te,b-Yt)}function vu(f,p,w,b,S,O,R){var I=he(function(bt){var It=S[bt],Pt=It.level!=1;return od(go(f,le(w,Pt?It.to:It.from,Pt?"before":"after"),"line",p,b),O,R,!0)},0,S.length-1),H=S[I];if(I>0){var Y=H.level!=1,vt=go(f,le(w,Y?H.from:H.to,Y?"after":"before"),"line",p,b);od(vt,O,R,!0)&&vt.top>R&&(H=S[I-1])}return H}function Qh(f,p,w,b,S,O,R){var I=pu(f,p,b,R),H=I.begin,Y=I.end;/\s/.test(p.text.charAt(Y-1))&&Y--;for(var vt=null,bt=null,It=0;It<S.length;It++){var Pt=S[It];if(!(Pt.from>=Y||Pt.to<=H)){var Gt=Pt.level!=1,Yt=me(f,b,Gt?Math.min(Y,Pt.to)-1:Math.max(H,Pt.from)).right,ve=Yt<O?O-Yt+1e9:Yt-O;(!vt||bt>ve)&&(vt=Pt,bt=ve)}}return vt||(vt=S[S.length-1]),vt.from<H&&(vt={from:H,to:vt.to,level:vt.level}),vt.to>Y&&(vt={from:vt.from,to:Y,level:vt.level}),vt}var zs;function $o(f){if(f.cachedTextHeight!=null)return f.cachedTextHeight;if(zs==null){zs=ft("pre",null,"CodeMirror-line-like");for(var p=0;p<49;++p)zs.appendChild(document.createTextNode("x")),zs.appendChild(ft("br"));zs.appendChild(document.createTextNode("x"))}$(f.measure,zs);var w=zs.offsetHeight/50;return w>3&&(f.cachedTextHeight=w),it(f.measure),w||1}function _l(f){if(f.cachedCharWidth!=null)return f.cachedCharWidth;var p=ft("span","xxxxxxxxxx"),w=ft("pre",[p],"CodeMirror-line-like");$(f.measure,w);var b=p.getBoundingClientRect(),S=(b.right-b.left)/10;return S>2&&(f.cachedCharWidth=S),S||10}function ad(f){for(var p=f.display,w={},b={},S=p.gutters.clientLeft,O=p.gutters.firstChild,R=0;O;O=O.nextSibling,++R){var I=f.display.gutterSpecs[R].className;w[I]=O.offsetLeft+O.clientLeft+S,b[I]=O.clientWidth}return{fixedPos:sd(p),gutterTotalWidth:p.gutters.offsetWidth,gutterLeft:w,gutterWidth:b,wrapperWidth:p.wrapper.clientWidth}}function sd(f){return f.scroller.getBoundingClientRect().left-f.sizer.getBoundingClientRect().left}function Pg(f){var p=$o(f.display),w=f.options.lineWrapping,b=w&&Math.max(5,f.display.scroller.clientWidth/_l(f.display)-3);return function(S){if(pi(f.doc,S))return 0;var O=0;if(S.widgets)for(var R=0;R<S.widgets.length;R++)S.widgets[R].height&&(O+=S.widgets[R].height);return w?O+(Math.ceil(S.text.length/b)||1)*p:O+p}}function tp(f){var p=f.doc,w=Pg(f);p.iter(function(b){var S=w(b);S!=b.height&&Kr(b,S)})}function Cl(f,p,w,b){var S=f.display;if(!w&&Ct(p).getAttribute("cm-not-content")=="true")return null;var O,R,I=S.lineSpace.getBoundingClientRect();try{O=p.clientX-I.left,R=p.clientY-I.top}catch{return null}var H=Lc(f,O,R),Y;if(b&&H.xRel>0&&(Y=Me(f.doc,H.line).text).length==H.ch){var vt=kt(Y,Y.length,f.options.tabSize)-Y.length;H=le(H.line,Math.max(0,Math.round((O-ed(f.display).left)/_l(f.display))-vt))}return H}function Ws(f,p){if(p>=f.display.viewTo||(p-=f.display.viewFrom,p<0))return null;for(var w=f.display.view,b=0;b<w.length;b++)if(p-=w[b].size,p<0)return b}function Ei(f,p,w,b){p==null&&(p=f.doc.first),w==null&&(w=f.doc.first+f.doc.size),b||(b=0);var S=f.display;if(b&&w<S.viewTo&&(S.updateLineNumbers==null||S.updateLineNumbers>p)&&(S.updateLineNumbers=p),f.curOp.viewChanged=!0,p>=S.viewTo)Ir&&qo(f.doc,p)<S.viewTo&&ri(f);else if(w<=S.viewFrom)Ir&&hi(f.doc,w+b)>S.viewFrom?ri(f):(S.viewFrom+=b,S.viewTo+=b);else if(p<=S.viewFrom&&w>=S.viewTo)ri(f);else if(p<=S.viewFrom){var O=jc(f,w,w+b,1);O?(S.view=S.view.slice(O.index),S.viewFrom=O.lineN,S.viewTo+=b):ri(f)}else if(w>=S.viewTo){var R=jc(f,p,p,-1);R?(S.view=S.view.slice(0,R.index),S.viewTo=R.lineN):ri(f)}else{var I=jc(f,p,p,-1),H=jc(f,w,w+b,1);I&&H?(S.view=S.view.slice(0,I.index).concat(fu(f,I.lineN,H.lineN)).concat(S.view.slice(H.index)),S.viewTo+=b):ri(f)}var Y=S.externalMeasured;Y&&(w<Y.lineN?Y.lineN+=b:p<Y.lineN+Y.size&&(S.externalMeasured=null))}function Ua(f,p,w){f.curOp.viewChanged=!0;var b=f.display,S=f.display.externalMeasured;if(S&&p>=S.lineN&&p<S.lineN+S.size&&(b.externalMeasured=null),!(p<b.viewFrom||p>=b.viewTo)){var O=b.view[Ws(f,p)];if(O.node!=null){var R=O.changes||(O.changes=[]);Kt(R,w)==-1&&R.push(w)}}}function ri(f){f.display.viewFrom=f.display.viewTo=f.doc.first,f.display.view=[],f.display.viewOffset=0}function jc(f,p,w,b){var S=Ws(f,p),O,R=f.display.view;if(!Ir||w==f.doc.first+f.doc.size)return{index:S,lineN:w};for(var I=f.display.viewFrom,H=0;H<S;H++)I+=R[H].size;if(I!=p){if(b>0){if(S==R.length-1)return null;O=I+R[S].size-p,S++}else O=I-p;p+=O,w+=O}for(;qo(f.doc,w)!=w;){if(S==(b<0?0:R.length-1))return null;w+=b*R[S-(b<0?1:0)].size,S+=b}return{index:S,lineN:w}}function Go(f,p,w){var b=f.display,S=b.view;S.length==0||p>=b.viewTo||w<=b.viewFrom?(b.view=fu(f,p,w),b.viewFrom=p):(b.viewFrom>p?b.view=fu(f,p,b.viewFrom).concat(b.view):b.viewFrom<p&&(b.view=b.view.slice(Ws(f,p))),b.viewFrom=p,b.viewTo<w?b.view=b.view.concat(fu(f,b.viewTo,w)):b.viewTo>w&&(b.view=b.view.slice(0,Ws(f,w)))),b.viewTo=w}function mo(f){for(var p=f.display.view,w=0,b=0;b<p.length;b++){var S=p[b];!S.hidden&&(!S.node||S.changes)&&++w}return w}function Va(f){f.display.input.showSelection(f.display.input.prepareSelection())}function ld(f,p){p===void 0&&(p=!0);for(var w=f.doc,b={},S=b.cursors=document.createDocumentFragment(),O=b.selection=document.createDocumentFragment(),R=0;R<w.sel.ranges.length;R++)if(!(!p&&R==w.sel.primIndex)){var I=w.sel.ranges[R];if(!(I.from().line>=f.display.viewTo||I.to().line<f.display.viewFrom)){var H=I.empty();(H||f.options.showCursorWhenSelecting)&&Ic(f,I.head,S),H||ep(f,I,O)}}return b}function Ic(f,p,w){var b=go(f,p,"div",null,null,!f.options.singleCursorHeightPerLine),S=w.appendChild(ft("div","","CodeMirror-cursor"));if(S.style.left=b.left+"px",S.style.top=b.top+"px",S.style.height=Math.max(0,b.bottom-b.top)*f.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(f.getWrapperElement().className)){var O=Rc(f,p,"div",null,null);O.right-O.left>0&&(S.style.width=O.right-O.left+"px")}if(b.other){var R=w.appendChild(ft("div","","CodeMirror-cursor CodeMirror-secondarycursor"));R.style.display="",R.style.left=b.other.left+"px",R.style.top=b.other.top+"px",R.style.height=(b.other.bottom-b.other.top)*.85+"px"}}function Tl(f,p){return f.top-p.top||f.left-p.left}function ep(f,p,w){var b=f.display,S=f.doc,O=document.createDocumentFragment(),R=ed(f.display),I=R.left,H=Math.max(b.sizerWidth,Ba(f)-b.sizer.offsetLeft)-R.right,Y=S.direction=="ltr";function vt(_e,Ae,ze,Ve){Ae<0&&(Ae=0),Ae=Math.round(Ae),Ve=Math.round(Ve),O.appendChild(ft("div",null,"CodeMirror-selected","position: absolute; left: "+_e+`px;
                             top: `+Ae+"px; width: "+(ze??H-_e)+`px;
                             height: `+(Ve-Ae)+"px"))}function bt(_e,Ae,ze){var Ve=Me(S,_e),Qe=Ve.text.length,wn,Vr;function Xn(pr,li){return Rc(f,le(_e,pr),"div",Ve,li)}function Zi(pr,li,Jr){var Fn=id(f,Ve,null,pr),fn=li=="ltr"==(Jr=="after")?"left":"right",er=Jr=="after"?Fn.begin:Fn.end-(/\s/.test(Ve.text.charAt(Fn.end-1))?2:1);return Xn(er,fn)[fn]}var yi=B(Ve,S.direction);return X(yi,Ae||0,ze??Qe,function(pr,li,Jr,Fn){var fn=Jr=="ltr",er=Xn(pr,fn?"left":"right"),Pi=Xn(li-1,fn?"right":"left"),vr=Ae==null&&pr==0,al=ze==null&&li==Qe,ui=Fn==0,wa=!yi||Fn==yi.length-1;if(Pi.top-er.top<=3){var un=(Y?vr:al)&&ui,Ni=(Y?al:vr)&&wa,bi=un?I:(fn?er:Pi).left,sl=Ni?H:(fn?Pi:er).right;vt(bi,er.top,sl-bi,er.bottom)}else{var ll,Ri,ul,Qi;fn?(ll=Y&&vr&&ui?I:er.left,Ri=Y?H:Zi(pr,Jr,"before"),ul=Y?I:Zi(li,Jr,"after"),Qi=Y&&al&&wa?H:Pi.right):(ll=Y?Zi(pr,Jr,"before"):I,Ri=!Y&&vr&&ui?H:er.right,ul=!Y&&al&&wa?I:Pi.left,Qi=Y?Zi(li,Jr,"after"):H),vt(ll,er.top,Ri-ll,er.bottom),er.bottom<Pi.top&&vt(I,er.bottom,null,Pi.top),vt(ul,Pi.top,Qi-ul,Pi.bottom)}(!wn||Tl(er,wn)<0)&&(wn=er),Tl(Pi,wn)<0&&(wn=Pi),(!Vr||Tl(er,Vr)<0)&&(Vr=er),Tl(Pi,Vr)<0&&(Vr=Pi)}),{start:wn,end:Vr}}var It=p.from(),Pt=p.to();if(It.line==Pt.line)bt(It.line,It.ch,Pt.ch);else{var Gt=Me(S,It.line),Yt=Me(S,Pt.line),ve=Nn(Gt)==Nn(Yt),Te=bt(It.line,It.ch,ve?Gt.text.length+1:null).end,ke=bt(Pt.line,ve?0:null,Pt.ch).start;ve&&(Te.top<ke.top-2?(vt(Te.right,Te.top,null,Te.bottom),vt(I,ke.top,ke.left,ke.bottom)):vt(Te.right,Te.top,ke.left-Te.right,Te.bottom)),Te.bottom<ke.top&&vt(I,Te.bottom,null,ke.top)}w.appendChild(O)}function qs(f){if(f.state.focused){var p=f.display;clearInterval(p.blinker);var w=!0;p.cursorDiv.style.visibility="",f.options.cursorBlinkRate>0?p.blinker=setInterval(function(){f.hasFocus()||mu(f),p.cursorDiv.style.visibility=(w=!w)?"":"hidden"},f.options.cursorBlinkRate):f.options.cursorBlinkRate<0&&(p.cursorDiv.style.visibility="hidden")}}function np(f){f.hasFocus()||(f.display.input.focus(),f.state.focused||Ks(f))}function gu(f){f.state.delayingBlurEvent=!0,setTimeout(function(){f.state.delayingBlurEvent&&(f.state.delayingBlurEvent=!1,f.state.focused&&mu(f))},100)}function Ks(f,p){f.state.delayingBlurEvent&&!f.state.draggingText&&(f.state.delayingBlurEvent=!1),f.options.readOnly!="nocursor"&&(f.state.focused||(de(f,"focus",f,p),f.state.focused=!0,Ot(f.display.wrapper,"CodeMirror-focused"),!f.curOp&&f.display.selForContextMenu!=f.doc.sel&&(f.display.input.reset(),c&&setTimeout(function(){return f.display.input.reset(!0)},20)),f.display.input.receivedFocus()),qs(f))}function mu(f,p){f.state.delayingBlurEvent||(f.state.focused&&(de(f,"blur",f,p),f.state.focused=!1,nt(f.display.wrapper,"CodeMirror-focused")),clearInterval(f.display.blinker),setTimeout(function(){f.state.focused||(f.display.shift=!1)},150))}function Oi(f){for(var p=f.display,w=p.lineDiv.offsetTop,b=Math.max(0,p.scroller.getBoundingClientRect().top),S=p.lineDiv.getBoundingClientRect().top,O=0,R=0;R<p.view.length;R++){var I=p.view[R],H=f.options.lineWrapping,Y=void 0,vt=0;if(!I.hidden){if(S+=I.line.height,s&&u<8){var bt=I.node.offsetTop+I.node.offsetHeight;Y=bt-w,w=bt}else{var It=I.node.getBoundingClientRect();Y=It.bottom-It.top,!H&&I.text.firstChild&&(vt=I.text.firstChild.getBoundingClientRect().right-It.left-1)}var Pt=I.line.height-Y;if((Pt>.005||Pt<-.005)&&(S<b&&(O-=Pt),Kr(I.line,Y),ud(I.line),I.rest))for(var Gt=0;Gt<I.rest.length;Gt++)ud(I.rest[Gt]);if(vt>f.display.sizerWidth){var Yt=Math.ceil(vt/_l(f.display));Yt>f.display.maxLineLength&&(f.display.maxLineLength=Yt,f.display.maxLine=I.line,f.display.maxLineChanged=!0)}}}Math.abs(O)>2&&(p.scroller.scrollTop+=O)}function ud(f){if(f.widgets)for(var p=0;p<f.widgets.length;++p){var w=f.widgets[p],b=w.node.parentNode;b&&(w.height=b.offsetHeight)}}function Yo(f,p,w){var b=w&&w.top!=null?Math.max(0,w.top):f.scroller.scrollTop;b=Math.floor(b-Fs(f));var S=w&&w.bottom!=null?w.bottom:b+f.wrapper.clientHeight,O=kn(p,b),R=kn(p,S);if(w&&w.ensure){var I=w.ensure.from.line,H=w.ensure.to.line;I<O?(O=I,R=kn(p,Gi(Me(p,I))+f.wrapper.clientHeight)):Math.min(H,p.lastLine())>=R&&(O=kn(p,Gi(Me(p,H))-f.wrapper.clientHeight),R=H)}return{from:O,to:Math.max(R,O+1)}}function Ng(f,p){if(!ae(f,"scrollCursorIntoView")){var w=f.display,b=w.sizer.getBoundingClientRect(),S=null;if(p.top+b.top<0?S=!0:p.bottom+b.top>(window.innerHeight||document.documentElement.clientHeight)&&(S=!1),S!=null&&!C){var O=ft("div","",null,`position: absolute;
                         top: `+(p.top-w.viewOffset-Fs(f.display))+`px;
                         height: `+(p.bottom-p.top+Yi(f)+w.barHeight)+`px;
                         left: `+p.left+"px; width: "+Math.max(2,p.right-p.left)+"px;");f.display.lineSpace.appendChild(O),O.scrollIntoView(S),f.display.lineSpace.removeChild(O)}}}function cd(f,p,w,b){b==null&&(b=0);var S;!f.options.lineWrapping&&p==w&&(w=p.sticky=="before"?le(p.line,p.ch+1,"before"):p,p=p.ch?le(p.line,p.sticky=="before"?p.ch-1:p.ch,"after"):p);for(var O=0;O<5;O++){var R=!1,I=go(f,p),H=!w||w==p?I:go(f,w);S={left:Math.min(I.left,H.left),top:Math.min(I.top,H.top)-b,right:Math.max(I.left,H.left),bottom:Math.max(I.bottom,H.bottom)+b};var Y=Bc(f,S),vt=f.doc.scrollTop,bt=f.doc.scrollLeft;if(Y.scrollTop!=null&&(Ai(f,Y.scrollTop),Math.abs(f.doc.scrollTop-vt)>1&&(R=!0)),Y.scrollLeft!=null&&(Xi(f,Y.scrollLeft),Math.abs(f.doc.scrollLeft-bt)>1&&(R=!0)),!R)break}return S}function El(f,p){var w=Bc(f,p);w.scrollTop!=null&&Ai(f,w.scrollTop),w.scrollLeft!=null&&Xi(f,w.scrollLeft)}function Bc(f,p){var w=f.display,b=$o(f.display);p.top<0&&(p.top=0);var S=f.curOp&&f.curOp.scrollTop!=null?f.curOp.scrollTop:w.scroller.scrollTop,O=z(f),R={};p.bottom-p.top>O&&(p.bottom=p.top+O);var I=f.doc.height+xl(w),H=p.top<b,Y=p.bottom>I-b;if(p.top<S)R.scrollTop=H?0:p.top;else if(p.bottom>S+O){var vt=Math.min(p.top,(Y?I:p.bottom)-O);vt!=S&&(R.scrollTop=vt)}var bt=f.options.fixedGutter?0:w.gutters.offsetWidth,It=f.curOp&&f.curOp.scrollLeft!=null?f.curOp.scrollLeft:w.scroller.scrollLeft-bt,Pt=Ba(f)-w.gutters.offsetWidth,Gt=p.right-p.left>Pt;return Gt&&(p.right=p.left+Pt),p.left<10?R.scrollLeft=0:p.left<It?R.scrollLeft=Math.max(0,p.left+bt-(Gt?0:10)):p.right>Pt+It-3&&(R.scrollLeft=p.right+(Gt?0:10)-Pt),R}function Uc(f,p){p!=null&&(Ol(f),f.curOp.scrollTop=(f.curOp.scrollTop==null?f.doc.scrollTop:f.curOp.scrollTop)+p)}function ga(f){Ol(f);var p=f.getCursor();f.curOp.scrollToPos={from:p,to:p,margin:f.options.cursorScrollMargin}}function Fa(f,p,w){(p!=null||w!=null)&&Ol(f),p!=null&&(f.curOp.scrollLeft=p),w!=null&&(f.curOp.scrollTop=w)}function fd(f,p){Ol(f),f.curOp.scrollToPos=p}function Ol(f){var p=f.curOp.scrollToPos;if(p){f.curOp.scrollToPos=null;var w=Dg(f,p.from),b=Dg(f,p.to);yo(f,w,b,p.margin)}}function yo(f,p,w,b){var S=Bc(f,{left:Math.min(p.left,w.left),top:Math.min(p.top,w.top)-b,right:Math.max(p.right,w.right),bottom:Math.max(p.bottom,w.bottom)+b});Fa(f,S.scrollLeft,S.scrollTop)}function Ai(f,p){Math.abs(f.doc.scrollTop-p)<2||(e||oi(f,{top:p}),$s(f,p,!0),e&&oi(f),So(f,100))}function $s(f,p,w){p=Math.max(0,Math.min(f.display.scroller.scrollHeight-f.display.scroller.clientHeight,p)),!(f.display.scroller.scrollTop==p&&!w)&&(f.doc.scrollTop=p,f.display.scrollbars.setScrollTop(p),f.display.scroller.scrollTop!=p&&(f.display.scroller.scrollTop=p))}function Xi(f,p,w,b){p=Math.max(0,Math.min(p,f.display.scroller.scrollWidth-f.display.scroller.clientWidth)),!((w?p==f.doc.scrollLeft:Math.abs(f.doc.scrollLeft-p)<2)&&!b)&&(f.doc.scrollLeft=p,jg(f),f.display.scroller.scrollLeft!=p&&(f.display.scroller.scrollLeft=p),f.display.scrollbars.setScrollLeft(p))}function bo(f){var p=f.display,w=p.gutters.offsetWidth,b=Math.round(f.doc.height+xl(f.display));return{clientHeight:p.scroller.clientHeight,viewHeight:p.wrapper.clientHeight,scrollWidth:p.scroller.scrollWidth,clientWidth:p.scroller.clientWidth,viewWidth:p.wrapper.clientWidth,barLeft:f.options.fixedGutter?w:0,docHeight:b,scrollHeight:b+Yi(f)+p.barHeight,nativeBarWidth:p.nativeBarWidth,gutterWidth:w}}var wo=function(f,p,w){this.cm=w;var b=this.vert=ft("div",[ft("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),S=this.horiz=ft("div",[ft("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");b.tabIndex=S.tabIndex=-1,f(b),f(S),dt(b,"scroll",function(){b.clientHeight&&p(b.scrollTop,"vertical")}),dt(S,"scroll",function(){S.clientWidth&&p(S.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,s&&u<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};wo.prototype.update=function(f){var p=f.scrollWidth>f.clientWidth+1,w=f.scrollHeight>f.clientHeight+1,b=f.nativeBarWidth;if(w){this.vert.style.display="block",this.vert.style.bottom=p?b+"px":"0";var S=f.viewHeight-(p?b:0);this.vert.firstChild.style.height=Math.max(0,f.scrollHeight-f.clientHeight+S)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(p){this.horiz.style.display="block",this.horiz.style.right=w?b+"px":"0",this.horiz.style.left=f.barLeft+"px";var O=f.viewWidth-f.barLeft-(w?b:0);this.horiz.firstChild.style.width=Math.max(0,f.scrollWidth-f.clientWidth+O)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&f.clientHeight>0&&(b==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:w?b:0,bottom:p?b:0}},wo.prototype.setScrollLeft=function(f){this.horiz.scrollLeft!=f&&(this.horiz.scrollLeft=f),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},wo.prototype.setScrollTop=function(f){this.vert.scrollTop!=f&&(this.vert.scrollTop=f),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},wo.prototype.zeroWidthHack=function(){var f=V&&!_?"12px":"18px";this.horiz.style.height=this.vert.style.width=f,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Mt,this.disableVert=new Mt},wo.prototype.enableZeroWidthBar=function(f,p,w){f.style.pointerEvents="auto";function b(){var S=f.getBoundingClientRect(),O=w=="vert"?document.elementFromPoint(S.right-1,(S.top+S.bottom)/2):document.elementFromPoint((S.right+S.left)/2,S.bottom-1);O!=f?f.style.pointerEvents="none":p.set(1e3,b)}p.set(1e3,b)},wo.prototype.clear=function(){var f=this.horiz.parentNode;f.removeChild(this.horiz),f.removeChild(this.vert)};var yu=function(){};yu.prototype.update=function(){return{bottom:0,right:0}},yu.prototype.setScrollLeft=function(){},yu.prototype.setScrollTop=function(){},yu.prototype.clear=function(){};function Gs(f,p){p||(p=bo(f));var w=f.display.barWidth,b=f.display.barHeight;dd(f,p);for(var S=0;S<4&&w!=f.display.barWidth||b!=f.display.barHeight;S++)w!=f.display.barWidth&&f.options.lineWrapping&&Oi(f),dd(f,bo(f)),w=f.display.barWidth,b=f.display.barHeight}function dd(f,p){var w=f.display,b=w.scrollbars.update(p);w.sizer.style.paddingRight=(w.barWidth=b.right)+"px",w.sizer.style.paddingBottom=(w.barHeight=b.bottom)+"px",w.heightForcer.style.borderBottom=b.bottom+"px solid transparent",b.right&&b.bottom?(w.scrollbarFiller.style.display="block",w.scrollbarFiller.style.height=b.bottom+"px",w.scrollbarFiller.style.width=b.right+"px"):w.scrollbarFiller.style.display="",b.bottom&&f.options.coverGutterNextToScrollbar&&f.options.fixedGutter?(w.gutterFiller.style.display="block",w.gutterFiller.style.height=b.bottom+"px",w.gutterFiller.style.width=p.gutterWidth+"px"):w.gutterFiller.style.display=""}var ki={native:wo,null:yu};function fr(f){f.display.scrollbars&&(f.display.scrollbars.clear(),f.display.scrollbars.addClass&&nt(f.display.wrapper,f.display.scrollbars.addClass)),f.display.scrollbars=new ki[f.options.scrollbarStyle](function(p){f.display.wrapper.insertBefore(p,f.display.scrollbarFiller),dt(p,"mousedown",function(){f.state.focused&&setTimeout(function(){return f.display.input.focus()},0)}),p.setAttribute("cm-not-content","true")},function(p,w){w=="horizontal"?Xi(f,p):Ai(f,p)},f),f.display.scrollbars.addClass&&Ot(f.display.wrapper,f.display.scrollbars.addClass)}var Rn=0;function xo(f){f.curOp={cm:f,viewChanged:!1,startHeight:f.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Rn,markArrays:null},Jf(f.curOp)}function Mi(f){var p=f.curOp;p&&Ec(p,function(w){for(var b=0;b<w.ops.length;b++)w.ops[b].cm.curOp=null;rp(w)})}function rp(f){for(var p=f.ops,w=0;w<p.length;w++)Al(p[w]);for(var b=0;b<p.length;b++)Rg(p[b]);for(var S=0;S<p.length;S++)Lg(p[S]);for(var O=0;O<p.length;O++)Vc(p[O]);for(var R=0;R<p.length;R++)Fc(p[R])}function Al(f){var p=f.cm,w=p.display;ip(p),f.updateMaxLine&&Ls(p),f.mustUpdate=f.viewChanged||f.forceUpdate||f.scrollTop!=null||f.scrollToPos&&(f.scrollToPos.from.line<w.viewFrom||f.scrollToPos.to.line>=w.viewTo)||w.maxLineChanged&&p.options.lineWrapping,f.update=f.mustUpdate&&new Xo(p,f.mustUpdate&&{top:f.scrollTop,ensure:f.scrollToPos},f.forceUpdate)}function Rg(f){f.updatedDisplay=f.mustUpdate&&bu(f.cm,f.update)}function Lg(f){var p=f.cm,w=p.display;f.updatedDisplay&&Oi(p),f.barMeasure=bo(p),w.maxLineChanged&&!p.options.lineWrapping&&(f.adjustWidthTo=Bt(p,w.maxLine,w.maxLine.text.length).left+3,p.display.sizerWidth=f.adjustWidthTo,f.barMeasure.scrollWidth=Math.max(w.scroller.clientWidth,w.sizer.offsetLeft+f.adjustWidthTo+Yi(p)+p.display.barWidth),f.maxScrollLeft=Math.max(0,w.sizer.offsetLeft+f.adjustWidthTo-Ba(p))),(f.updatedDisplay||f.selectionChanged)&&(f.preparedSelection=w.input.prepareSelection())}function Vc(f){var p=f.cm;f.adjustWidthTo!=null&&(p.display.sizer.style.minWidth=f.adjustWidthTo+"px",f.maxScrollLeft<p.doc.scrollLeft&&Xi(p,Math.min(p.display.scroller.scrollLeft,f.maxScrollLeft),!0),p.display.maxLineChanged=!1);var w=f.focus&&f.focus==_t();f.preparedSelection&&p.display.input.showSelection(f.preparedSelection,w),(f.updatedDisplay||f.startHeight!=p.doc.height)&&Gs(p,f.barMeasure),f.updatedDisplay&&ap(p,f.barMeasure),f.selectionChanged&&qs(p),p.state.focused&&f.updateInput&&p.display.input.reset(f.typing),w&&np(f.cm)}function Fc(f){var p=f.cm,w=p.display,b=p.doc;if(f.updatedDisplay&&Xs(p,f.update),w.wheelStartX!=null&&(f.scrollTop!=null||f.scrollLeft!=null||f.scrollToPos)&&(w.wheelStartX=w.wheelStartY=null),f.scrollTop!=null&&$s(p,f.scrollTop,f.forceScroll),f.scrollLeft!=null&&Xi(p,f.scrollLeft,!0,!0),f.scrollToPos){var S=cd(p,pe(b,f.scrollToPos.from),pe(b,f.scrollToPos.to),f.scrollToPos.margin);Ng(p,S)}var O=f.maybeHiddenMarkers,R=f.maybeUnhiddenMarkers;if(O)for(var I=0;I<O.length;++I)O[I].lines.length||de(O[I],"hide");if(R)for(var H=0;H<R.length;++H)R[H].lines.length&&de(R[H],"unhide");w.wrapper.offsetHeight&&(b.scrollTop=p.display.scroller.scrollTop),f.changeObjs&&de(p,"changes",p,f.changeObjs),f.update&&f.update.finish()}function Ji(f,p){if(f.curOp)return p();xo(f);try{return p()}finally{Mi(f)}}function dr(f,p){return function(){if(f.curOp)return p.apply(f,arguments);xo(f);try{return p.apply(f,arguments)}finally{Mi(f)}}}function ii(f){return function(){if(this.curOp)return f.apply(this,arguments);xo(this);try{return f.apply(this,arguments)}finally{Mi(this)}}}function tr(f){return function(){var p=this.cm;if(!p||p.curOp)return f.apply(this,arguments);xo(p);try{return f.apply(this,arguments)}finally{Mi(p)}}}function So(f,p){f.doc.highlightFrontier<f.display.viewTo&&f.state.highlight.set(p,Dt(Ys,f))}function Ys(f){var p=f.doc;if(!(p.highlightFrontier>=f.display.viewTo)){var w=+new Date+f.options.workTime,b=ha(f,p.highlightFrontier),S=[];p.iter(b.line,Math.min(p.first+p.size,f.display.viewTo+500),function(O){if(b.line>=f.display.viewFrom){var R=O.styles,I=O.text.length>f.options.maxHighlightLength?wr(p.mode,b.state):null,H=oo(f,O,b,!0);I&&(b.state=I),O.styles=H.styles;var Y=O.styleClasses,vt=H.classes;vt?O.styleClasses=vt:Y&&(O.styleClasses=null);for(var bt=!R||R.length!=O.styles.length||Y!=vt&&(!Y||!vt||Y.bgClass!=vt.bgClass||Y.textClass!=vt.textClass),It=0;!bt&&It<R.length;++It)bt=R[It]!=O.styles[It];bt&&S.push(b.line),O.stateAfter=b.save(),b.nextLine()}else O.text.length<=f.options.maxHighlightLength&&Na(f,O.text,b),O.stateAfter=b.line%5==0?b.save():null,b.nextLine();if(+new Date>w)return So(f,f.options.workDelay),!0}),p.highlightFrontier=b.line,p.modeFrontier=Math.max(p.modeFrontier,b.line),S.length&&Ji(f,function(){for(var O=0;O<S.length;O++)Ua(f,S[O],"text")})}}var Xo=function(f,p,w){var b=f.display;this.viewport=p,this.visible=Yo(b,f.doc,p),this.editorIsHidden=!b.wrapper.offsetWidth,this.wrapperHeight=b.wrapper.clientHeight,this.wrapperWidth=b.wrapper.clientWidth,this.oldDisplayWidth=Ba(f),this.force=w,this.dims=ad(f),this.events=[]};Xo.prototype.signal=function(f,p){en(f,p)&&this.events.push(arguments)},Xo.prototype.finish=function(){for(var f=0;f<this.events.length;f++)de.apply(null,this.events[f])};function ip(f){var p=f.display;!p.scrollbarsClipped&&p.scroller.offsetWidth&&(p.nativeBarWidth=p.scroller.offsetWidth-p.scroller.clientWidth,p.heightForcer.style.height=Yi(f)+"px",p.sizer.style.marginBottom=-p.nativeBarWidth+"px",p.sizer.style.borderRightWidth=Yi(f)+"px",p.scrollbarsClipped=!0)}function op(f){if(f.hasFocus())return null;var p=_t();if(!p||!U(f.display.lineDiv,p))return null;var w={activeElt:p};if(window.getSelection){var b=window.getSelection();b.anchorNode&&b.extend&&U(f.display.lineDiv,b.anchorNode)&&(w.anchorNode=b.anchorNode,w.anchorOffset=b.anchorOffset,w.focusNode=b.focusNode,w.focusOffset=b.focusOffset)}return w}function Hc(f){if(!(!f||!f.activeElt||f.activeElt==_t())&&(f.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(f.activeElt.nodeName)&&f.anchorNode&&U(document.body,f.anchorNode)&&U(document.body,f.focusNode))){var p=window.getSelection(),w=document.createRange();w.setEnd(f.anchorNode,f.anchorOffset),w.collapse(!1),p.removeAllRanges(),p.addRange(w),p.extend(f.focusNode,f.focusOffset)}}function bu(f,p){var w=f.display,b=f.doc;if(p.editorIsHidden)return ri(f),!1;if(!p.force&&p.visible.from>=w.viewFrom&&p.visible.to<=w.viewTo&&(w.updateLineNumbers==null||w.updateLineNumbers>=w.viewTo)&&w.renderedView==w.view&&mo(f)==0)return!1;Ig(f)&&(ri(f),p.dims=ad(f));var S=b.first+b.size,O=Math.max(p.visible.from-f.options.viewportMargin,b.first),R=Math.min(S,p.visible.to+f.options.viewportMargin);w.viewFrom<O&&O-w.viewFrom<20&&(O=Math.max(b.first,w.viewFrom)),w.viewTo>R&&w.viewTo-R<20&&(R=Math.min(S,w.viewTo)),Ir&&(O=qo(f.doc,O),R=hi(f.doc,R));var I=O!=w.viewFrom||R!=w.viewTo||w.lastWrapHeight!=p.wrapperHeight||w.lastWrapWidth!=p.wrapperWidth;Go(f,O,R),w.viewOffset=Gi(Me(f.doc,w.viewFrom)),f.display.mover.style.top=w.viewOffset+"px";var H=mo(f);if(!I&&H==0&&!p.force&&w.renderedView==w.view&&(w.updateLineNumbers==null||w.updateLineNumbers>=w.viewTo))return!1;var Y=op(f);return H>4&&(w.lineDiv.style.display="none"),hd(f,w.updateLineNumbers,p.dims),H>4&&(w.lineDiv.style.display=""),w.renderedView=w.view,Hc(Y),it(w.cursorDiv),it(w.selectionDiv),w.gutters.style.height=w.sizer.style.minHeight=0,I&&(w.lastWrapHeight=p.wrapperHeight,w.lastWrapWidth=p.wrapperWidth,So(f,400)),w.updateLineNumbers=null,!0}function Xs(f,p){for(var w=p.viewport,b=!0;;b=!1){if(!b||!f.options.lineWrapping||p.oldDisplayWidth==Ba(f)){if(w&&w.top!=null&&(w={top:Math.min(f.doc.height+xl(f.display)-z(f),w.top)}),p.visible=Yo(f.display,f.doc,w),p.visible.from>=f.display.viewFrom&&p.visible.to<=f.display.viewTo)break}else b&&(p.visible=Yo(f.display,f.doc,w));if(!bu(f,p))break;Oi(f);var S=bo(f);Va(f),Gs(f,S),ap(f,S),p.force=!1}p.signal(f,"update",f),(f.display.viewFrom!=f.display.reportedViewFrom||f.display.viewTo!=f.display.reportedViewTo)&&(p.signal(f,"viewportChange",f,f.display.viewFrom,f.display.viewTo),f.display.reportedViewFrom=f.display.viewFrom,f.display.reportedViewTo=f.display.viewTo)}function oi(f,p){var w=new Xo(f,p);if(bu(f,w)){Oi(f),Xs(f,w);var b=bo(f);Va(f),Gs(f,b),ap(f,b),w.finish()}}function hd(f,p,w){var b=f.display,S=f.options.lineNumbers,O=b.lineDiv,R=O.firstChild;function I(Gt){var Yt=Gt.nextSibling;return c&&V&&f.display.currentWheelTarget==Gt?Gt.style.display="none":Gt.parentNode.removeChild(Gt),Yt}for(var H=b.view,Y=b.viewFrom,vt=0;vt<H.length;vt++){var bt=H[vt];if(!bt.hidden)if(!bt.node||bt.node.parentNode!=O){var It=kc(f,bt,Y,w);O.insertBefore(It,R)}else{for(;R!=bt.node;)R=I(R);var Pt=S&&p!=null&&p<=Y&&bt.lineNumber;bt.changes&&(Kt(bt.changes,"gutter")>-1&&(Pt=!1),Ia(f,bt,Y,w)),Pt&&(it(bt.lineNumber),bt.lineNumber.appendChild(document.createTextNode(qi(f.options,Y)))),R=bt.node.nextSibling}Y+=bt.size}for(;R;)R=I(R)}function pd(f){var p=f.gutters.offsetWidth;f.sizer.style.marginLeft=p+"px",cr(f,"gutterChanged",f)}function ap(f,p){f.display.sizer.style.minHeight=p.docHeight+"px",f.display.heightForcer.style.top=p.docHeight+"px",f.display.gutters.style.height=p.docHeight+f.display.barHeight+Yi(f)+"px"}function jg(f){var p=f.display,w=p.view;if(!(!p.alignWidgets&&(!p.gutters.firstChild||!f.options.fixedGutter))){for(var b=sd(p)-p.scroller.scrollLeft+f.doc.scrollLeft,S=p.gutters.offsetWidth,O=b+"px",R=0;R<w.length;R++)if(!w[R].hidden){f.options.fixedGutter&&(w[R].gutter&&(w[R].gutter.style.left=O),w[R].gutterBackground&&(w[R].gutterBackground.style.left=O));var I=w[R].alignable;if(I)for(var H=0;H<I.length;H++)I[H].style.left=O}f.options.fixedGutter&&(p.gutters.style.left=b+S+"px")}}function Ig(f){if(!f.options.lineNumbers)return!1;var p=f.doc,w=qi(f.options,p.first+p.size-1),b=f.display;if(w.length!=b.lineNumChars){var S=b.measure.appendChild(ft("div",[ft("div",w)],"CodeMirror-linenumber CodeMirror-gutter-elt")),O=S.firstChild.offsetWidth,R=S.offsetWidth-O;return b.lineGutter.style.width="",b.lineNumInnerWidth=Math.max(O,b.lineGutter.offsetWidth-R)+1,b.lineNumWidth=b.lineNumInnerWidth+R,b.lineNumChars=b.lineNumInnerWidth?w.length:-1,b.lineGutter.style.width=b.lineNumWidth+"px",pd(f.display),!0}return!1}function kr(f,p){for(var w=[],b=!1,S=0;S<f.length;S++){var O=f[S],R=null;if(typeof O!="string"&&(R=O.style,O=O.className),O=="CodeMirror-linenumbers")if(p)b=!0;else continue;w.push({className:O,style:R})}return p&&!b&&w.push({className:"CodeMirror-linenumbers",style:null}),w}function vd(f){var p=f.gutters,w=f.gutterSpecs;it(p),f.lineGutter=null;for(var b=0;b<w.length;++b){var S=w[b],O=S.className,R=S.style,I=p.appendChild(ft("div",null,"CodeMirror-gutter "+O));R&&(I.style.cssText=R),O=="CodeMirror-linenumbers"&&(f.lineGutter=I,I.style.width=(f.lineNumWidth||1)+"px")}p.style.display=w.length?"":"none",pd(f)}function ms(f){vd(f.display),Ei(f),jg(f)}function zc(f,p,w,b){var S=this;this.input=w,S.scrollbarFiller=ft("div",null,"CodeMirror-scrollbar-filler"),S.scrollbarFiller.setAttribute("cm-not-content","true"),S.gutterFiller=ft("div",null,"CodeMirror-gutter-filler"),S.gutterFiller.setAttribute("cm-not-content","true"),S.lineDiv=lt("div",null,"CodeMirror-code"),S.selectionDiv=ft("div",null,null,"position: relative; z-index: 1"),S.cursorDiv=ft("div",null,"CodeMirror-cursors"),S.measure=ft("div",null,"CodeMirror-measure"),S.lineMeasure=ft("div",null,"CodeMirror-measure"),S.lineSpace=lt("div",[S.measure,S.lineMeasure,S.selectionDiv,S.cursorDiv,S.lineDiv],null,"position: relative; outline: none");var O=lt("div",[S.lineSpace],"CodeMirror-lines");S.mover=ft("div",[O],null,"position: relative"),S.sizer=ft("div",[S.mover],"CodeMirror-sizer"),S.sizerWidth=null,S.heightForcer=ft("div",null,null,"position: absolute; height: "+Xt+"px; width: 1px;"),S.gutters=ft("div",null,"CodeMirror-gutters"),S.lineGutter=null,S.scroller=ft("div",[S.sizer,S.heightForcer,S.gutters],"CodeMirror-scroll"),S.scroller.setAttribute("tabIndex","-1"),S.wrapper=ft("div",[S.scrollbarFiller,S.gutterFiller,S.scroller],"CodeMirror"),S.wrapper.setAttribute("translate","no"),s&&u<8&&(S.gutters.style.zIndex=-1,S.scroller.style.paddingRight=0),!c&&!(e&&F)&&(S.scroller.draggable=!0),f&&(f.appendChild?f.appendChild(S.wrapper):f(S.wrapper)),S.viewFrom=S.viewTo=p.first,S.reportedViewFrom=S.reportedViewTo=p.first,S.view=[],S.renderedView=null,S.externalMeasured=null,S.viewOffset=0,S.lastWrapHeight=S.lastWrapWidth=0,S.updateLineNumbers=null,S.nativeBarWidth=S.barHeight=S.barWidth=0,S.scrollbarsClipped=!1,S.lineNumWidth=S.lineNumInnerWidth=S.lineNumChars=null,S.alignWidgets=!1,S.cachedCharWidth=S.cachedTextHeight=S.cachedPaddingH=null,S.maxLine=null,S.maxLineLength=0,S.maxLineChanged=!1,S.wheelDX=S.wheelDY=S.wheelStartX=S.wheelStartY=null,S.shift=!1,S.selForContextMenu=null,S.activeTouch=null,S.gutterSpecs=kr(b.gutters,b.lineNumbers),vd(S),w.init(S)}var wu=0,ai=null;s?ai=-.53:e?ai=15:v?ai=-.7:y&&(ai=-1/3);function kl(f){var p=f.wheelDeltaX,w=f.wheelDeltaY;return p==null&&f.detail&&f.axis==f.HORIZONTAL_AXIS&&(p=f.detail),w==null&&f.detail&&f.axis==f.VERTICAL_AXIS?w=f.detail:w==null&&(w=f.wheelDelta),{x:p,y:w}}function Fb(f){var p=kl(f);return p.x*=ai,p.y*=ai,p}function sp(f,p){var w=kl(p),b=w.x,S=w.y,O=f.display,R=O.scroller,I=R.scrollWidth>R.clientWidth,H=R.scrollHeight>R.clientHeight;if(b&&I||S&&H){if(S&&V&&c){t:for(var Y=p.target,vt=O.view;Y!=R;Y=Y.parentNode)for(var bt=0;bt<vt.length;bt++)if(vt[bt].node==Y){f.display.currentWheelTarget=Y;break t}}if(b&&!e&&!m&&ai!=null){S&&H&&Ai(f,Math.max(0,R.scrollTop+S*ai)),Xi(f,Math.max(0,R.scrollLeft+b*ai)),(!S||S&&H)&&sn(p),O.wheelStartX=null;return}if(S&&ai!=null){var It=S*ai,Pt=f.doc.scrollTop,Gt=Pt+O.wrapper.clientHeight;It<0?Pt=Math.max(0,Pt+It-50):Gt=Math.min(f.doc.height,Gt+It+50),oi(f,{top:Pt,bottom:Gt})}wu<20&&(O.wheelStartX==null?(O.wheelStartX=R.scrollLeft,O.wheelStartY=R.scrollTop,O.wheelDX=b,O.wheelDY=S,setTimeout(function(){if(O.wheelStartX!=null){var Yt=R.scrollLeft-O.wheelStartX,ve=R.scrollTop-O.wheelStartY,Te=ve&&O.wheelDY&&ve/O.wheelDY||Yt&&O.wheelDX&&Yt/O.wheelDX;O.wheelStartX=O.wheelStartY=null,Te&&(ai=(ai*wu+Te)/(wu+1),++wu)}},200)):(O.wheelDX+=b,O.wheelDY+=S))}}var _o=function(f,p){this.ranges=f,this.primIndex=p};_o.prototype.primary=function(){return this.ranges[this.primIndex]},_o.prototype.equals=function(f){if(f==this)return!0;if(f.primIndex!=this.primIndex||f.ranges.length!=this.ranges.length)return!1;for(var p=0;p<this.ranges.length;p++){var w=this.ranges[p],b=f.ranges[p];if(!Ki(w.anchor,b.anchor)||!Ki(w.head,b.head))return!1}return!0},_o.prototype.deepCopy=function(){for(var f=[],p=0;p<this.ranges.length;p++)f[p]=new En(tt(this.ranges[p].anchor),tt(this.ranges[p].head));return new _o(f,this.primIndex)},_o.prototype.somethingSelected=function(){for(var f=0;f<this.ranges.length;f++)if(!this.ranges[f].empty())return!0;return!1},_o.prototype.contains=function(f,p){p||(p=f);for(var w=0;w<this.ranges.length;w++){var b=this.ranges[w];if(Be(p,b.from())>=0&&Be(f,b.to())<=0)return w}return-1};var En=function(f,p){this.anchor=f,this.head=p};En.prototype.from=function(){return Jt(this.anchor,this.head)},En.prototype.to=function(){return wt(this.anchor,this.head)},En.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function mi(f,p,w){var b=f&&f.options.selectionsMayTouch,S=p[w];p.sort(function(It,Pt){return Be(It.from(),Pt.from())}),w=Kt(p,S);for(var O=1;O<p.length;O++){var R=p[O],I=p[O-1],H=Be(I.to(),R.from());if(b&&!R.empty()?H>0:H>=0){var Y=Jt(I.from(),R.from()),vt=wt(I.to(),R.to()),bt=I.empty()?R.from()==R.head:I.from()==I.head;O<=w&&--w,p.splice(--O,2,new En(bt?vt:Y,bt?Y:vt))}}return new _o(p,w)}function Ha(f,p){return new _o([new En(f,p||f)],0)}function ma(f){return f.text?le(f.from.line+f.text.length-1,De(f.text).length+(f.text.length==1?f.from.ch:0)):f.to}function lp(f,p){if(Be(f,p.from)<0)return f;if(Be(f,p.to)<=0)return ma(p);var w=f.line+p.text.length-(p.to.line-p.from.line)-1,b=f.ch;return f.line==p.to.line&&(b+=ma(p).ch-p.to.ch),le(w,b)}function Ml(f,p){for(var w=[],b=0;b<f.sel.ranges.length;b++){var S=f.sel.ranges[b];w.push(new En(lp(S.anchor,p),lp(S.head,p)))}return mi(f.cm,w,f.sel.primIndex)}function up(f,p,w){return f.line==p.line?le(w.line,f.ch-p.ch+w.ch):le(w.line+(f.line-p.line),f.ch)}function gd(f,p,w){for(var b=[],S=le(f.first,0),O=S,R=0;R<p.length;R++){var I=p[R],H=up(I.from,S,O),Y=up(ma(I),S,O);if(S=I.to,O=Y,w=="around"){var vt=f.sel.ranges[R],bt=Be(vt.head,vt.anchor)<0;b[R]=new En(bt?Y:H,bt?H:Y)}else b[R]=new En(H,H)}return new _o(b,f.sel.primIndex)}function Wc(f){f.doc.mode=He(f.options,f.doc.modeOption),xu(f)}function xu(f){f.doc.iter(function(p){p.stateAfter&&(p.stateAfter=null),p.styles&&(p.styles=null)}),f.doc.modeFrontier=f.doc.highlightFrontier=f.doc.first,So(f,100),f.state.modeGen++,f.curOp&&Ei(f)}function qc(f,p){return p.from.ch==0&&p.to.ch==0&&De(p.text)==""&&(!f.cm||f.cm.options.wholeLineUpdateBefore)}function md(f,p,w,b){function S(ke){return w?w[ke]:null}function O(ke,_e,Ae){Kf(ke,_e,Ae,b),cr(ke,"change",ke,p)}function R(ke,_e){for(var Ae=[],ze=ke;ze<_e;++ze)Ae.push(new Gr(Y[ze],S(ze),b));return Ae}var I=p.from,H=p.to,Y=p.text,vt=Me(f,I.line),bt=Me(f,H.line),It=De(Y),Pt=S(Y.length-1),Gt=H.line-I.line;if(p.full)f.insert(0,R(0,Y.length)),f.remove(Y.length,f.size-Y.length);else if(qc(f,p)){var Yt=R(0,Y.length-1);O(bt,bt.text,Pt),Gt&&f.remove(I.line,Gt),Yt.length&&f.insert(I.line,Yt)}else if(vt==bt)if(Y.length==1)O(vt,vt.text.slice(0,I.ch)+It+vt.text.slice(H.ch),Pt);else{var ve=R(1,Y.length-1);ve.push(new Gr(It+vt.text.slice(H.ch),Pt,b)),O(vt,vt.text.slice(0,I.ch)+Y[0],S(0)),f.insert(I.line+1,ve)}else if(Y.length==1)O(vt,vt.text.slice(0,I.ch)+Y[0]+bt.text.slice(H.ch),S(0)),f.remove(I.line+1,Gt);else{O(vt,vt.text.slice(0,I.ch)+Y[0],S(0)),O(bt,It+bt.text.slice(H.ch),Pt);var Te=R(1,Y.length-1);Gt>1&&f.remove(I.line+1,Gt-1),f.insert(I.line+1,Te)}cr(f,"change",f,p)}function Jo(f,p,w){function b(S,O,R){if(S.linked)for(var I=0;I<S.linked.length;++I){var H=S.linked[I];if(H.doc!=O){var Y=R&&H.sharedHist;w&&!Y||(p(H.doc,Y),b(H.doc,S,Y))}}}b(f,null,!0)}function cp(f,p){if(p.cm)throw new Error("This document is already in use.");f.doc=p,p.cm=f,tp(f),Wc(f),fp(f),f.options.direction=p.direction,f.options.lineWrapping||Ls(f),f.options.mode=p.modeOption,Ei(f)}function fp(f){(f.doc.direction=="rtl"?Ot:nt)(f.display.lineDiv,"CodeMirror-rtl")}function Js(f){Ji(f,function(){fp(f),Ei(f)})}function Su(f){this.done=[],this.undone=[],this.undoDepth=f?f.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=f?f.maxGeneration:1}function Kc(f,p){var w={from:tt(p.from),to:ma(p),text:jr(f,p.from,p.to)};return Cu(f,w,p.from.line,p.to.line+1),Jo(f,function(b){return Cu(b,w,p.from.line,p.to.line+1)},!0),w}function ys(f){for(;f.length;){var p=De(f);if(p.ranges)f.pop();else break}}function Zs(f,p){if(p)return ys(f.done),De(f.done);if(f.done.length&&!De(f.done).ranges)return De(f.done);if(f.done.length>1&&!f.done[f.done.length-2].ranges)return f.done.pop(),De(f.done)}function _u(f,p,w,b){var S=f.history;S.undone.length=0;var O=+new Date,R,I;if((S.lastOp==b||S.lastOrigin==p.origin&&p.origin&&(p.origin.charAt(0)=="+"&&S.lastModTime>O-(f.cm?f.cm.options.historyEventDelay:500)||p.origin.charAt(0)=="*"))&&(R=Zs(S,S.lastOp==b)))I=De(R.changes),Be(p.from,p.to)==0&&Be(p.from,I.to)==0?I.to=ma(p):R.changes.push(Kc(f,p));else{var H=De(S.done);for((!H||!H.ranges)&&Qs(f.sel,S.done),R={changes:[Kc(f,p)],generation:S.generation},S.done.push(R);S.done.length>S.undoDepth;)S.done.shift(),S.done[0].ranges||S.done.shift()}S.done.push(w),S.generation=++S.maxGeneration,S.lastModTime=S.lastSelTime=O,S.lastOp=S.lastSelOp=b,S.lastOrigin=S.lastSelOrigin=p.origin,I||de(f,"historyAdded")}function dp(f,p,w,b){var S=p.charAt(0);return S=="*"||S=="+"&&w.ranges.length==b.ranges.length&&w.somethingSelected()==b.somethingSelected()&&new Date-f.history.lastSelTime<=(f.cm?f.cm.options.historyEventDelay:500)}function hp(f,p,w,b){var S=f.history,O=b&&b.origin;w==S.lastSelOp||O&&S.lastSelOrigin==O&&(S.lastModTime==S.lastSelTime&&S.lastOrigin==O||dp(f,O,De(S.done),p))?S.done[S.done.length-1]=p:Qs(p,S.done),S.lastSelTime=+new Date,S.lastSelOrigin=O,S.lastSelOp=w,b&&b.clearRedo!==!1&&ys(S.undone)}function Qs(f,p){var w=De(p);w&&w.ranges&&w.equals(f)||p.push(f)}function Cu(f,p,w,b){var S=p["spans_"+f.id],O=0;f.iter(Math.max(f.first,w),Math.min(f.first+f.size,b),function(R){R.markedSpans&&((S||(S=p["spans_"+f.id]={}))[O]=R.markedSpans),++O})}function Bg(f){if(!f)return null;for(var p,w=0;w<f.length;++w)f[w].marker.explicitlyCleared?p||(p=f.slice(0,w)):p&&p.push(f[w]);return p?p.length?p:null:f}function Ug(f,p){var w=p["spans_"+f.id];if(!w)return null;for(var b=[],S=0;S<p.text.length;++S)b.push(Bg(w[S]));return b}function Dl(f,p){var w=Ug(f,p),b=La(f,p);if(!w)return b;if(!b)return w;for(var S=0;S<w.length;++S){var O=w[S],R=b[S];if(O&&R)t:for(var I=0;I<R.length;++I){for(var H=R[I],Y=0;Y<O.length;++Y)if(O[Y].marker==H.marker)continue t;O.push(H)}else R&&(w[S]=R)}return w}function bs(f,p,w){for(var b=[],S=0;S<f.length;++S){var O=f[S];if(O.ranges){b.push(w?_o.prototype.deepCopy.call(O):O);continue}var R=O.changes,I=[];b.push({changes:I});for(var H=0;H<R.length;++H){var Y=R[H],vt=void 0;if(I.push({from:Y.from,to:Y.to,text:Y.text}),p)for(var bt in Y)(vt=bt.match(/^spans_(\d+)$/))&&Kt(p,Number(vt[1]))>-1&&(De(I)[bt]=Y[bt],delete Y[bt])}}return b}function yd(f,p,w,b){if(b){var S=f.anchor;if(w){var O=Be(p,S)<0;O!=Be(w,S)<0?(S=p,p=w):O!=Be(p,w)<0&&(p=w)}return new En(S,p)}else return new En(w||p,p)}function Tu(f,p,w,b,S){S==null&&(S=f.cm&&(f.cm.display.shift||f.extend)),Ur(f,new _o([yd(f.sel.primary(),p,w,S)],0),b)}function bd(f,p,w){for(var b=[],S=f.cm&&(f.cm.display.shift||f.extend),O=0;O<f.sel.ranges.length;O++)b[O]=yd(f.sel.ranges[O],p[O],null,S);var R=mi(f.cm,b,f.sel.primIndex);Ur(f,R,w)}function za(f,p,w,b){var S=f.sel.ranges.slice(0);S[p]=w,Ur(f,mi(f.cm,S,f.sel.primIndex),b)}function hn(f,p,w,b){Ur(f,Ha(p,w),b)}function Vn(f,p,w){var b={ranges:p.ranges,update:function(S){this.ranges=[];for(var O=0;O<S.length;O++)this.ranges[O]=new En(pe(f,S[O].anchor),pe(f,S[O].head))},origin:w&&w.origin};return de(f,"beforeSelectionChange",f,b),f.cm&&de(f.cm,"beforeSelectionChange",f.cm,b),b.ranges!=p.ranges?mi(f.cm,b.ranges,b.ranges.length-1):p}function Mr(f,p,w){var b=f.history.done,S=De(b);S&&S.ranges?(b[b.length-1]=p,ws(f,p,w)):Ur(f,p,w)}function Ur(f,p,w){ws(f,p,w),hp(f,f.sel,f.cm?f.cm.curOp.id:NaN,w)}function ws(f,p,w){(en(f,"beforeSelectionChange")||f.cm&&en(f.cm,"beforeSelectionChange"))&&(p=Vn(f,p,w));var b=w&&w.bias||(Be(p.primary().head,f.sel.primary().head)<0?-1:1);tl(f,Eu(f,p,b,!0)),!(w&&w.scroll===!1)&&f.cm&&f.cm.getOption("readOnly")!="nocursor"&&ga(f.cm)}function tl(f,p){p.equals(f.sel)||(f.sel=p,f.cm&&(f.cm.curOp.updateInput=1,f.cm.curOp.selectionChanged=!0,xe(f.cm)),cr(f,"cursorActivity",f))}function $c(f){tl(f,Eu(f,f.sel,null,!1))}function Eu(f,p,w,b){for(var S,O=0;O<p.ranges.length;O++){var R=p.ranges[O],I=p.ranges.length==f.sel.ranges.length&&f.sel.ranges[O],H=wd(f,R.anchor,I&&I.anchor,w,b),Y=wd(f,R.head,I&&I.head,w,b);(S||H!=R.anchor||Y!=R.head)&&(S||(S=p.ranges.slice(0,O)),S[O]=new En(H,Y))}return S?mi(f.cm,S,p.primIndex):p}function ya(f,p,w,b,S){var O=Me(f,p.line);if(O.markedSpans)for(var R=0;R<O.markedSpans.length;++R){var I=O.markedSpans[R],H=I.marker,Y="selectLeft"in H?!H.selectLeft:H.inclusiveLeft,vt="selectRight"in H?!H.selectRight:H.inclusiveRight;if((I.from==null||(Y?I.from<=p.ch:I.from<p.ch))&&(I.to==null||(vt?I.to>=p.ch:I.to>p.ch))){if(S&&(de(H,"beforeCursorEnter"),H.explicitlyCleared))if(O.markedSpans){--R;continue}else break;if(!H.atomic)continue;if(w){var bt=H.find(b<0?1:-1),It=void 0;if((b<0?vt:Y)&&(bt=Cr(f,bt,-b,bt&&bt.line==p.line?O:null)),bt&&bt.line==p.line&&(It=Be(bt,w))&&(b<0?It<0:It>0))return ya(f,bt,p,b,S)}var Pt=H.find(b<0?-1:1);return(b<0?Y:vt)&&(Pt=Cr(f,Pt,b,Pt.line==p.line?O:null)),Pt?ya(f,Pt,p,b,S):null}}return p}function wd(f,p,w,b,S){var O=b||1,R=ya(f,p,w,O,S)||!S&&ya(f,p,w,O,!0)||ya(f,p,w,-O,S)||!S&&ya(f,p,w,-O,!0);return R||(f.cantEdit=!0,le(f.first,0))}function Cr(f,p,w,b){return w<0&&p.ch==0?p.line>f.first?pe(f,le(p.line-1)):null:w>0&&p.ch==(b||Me(f,p.line)).text.length?p.line<f.first+f.size-1?le(p.line+1,0):null:new le(p.line,p.ch+w)}function xd(f){f.setSelection(le(f.firstLine(),0),le(f.lastLine()),ne)}function Sd(f,p,w){var b={canceled:!1,from:p.from,to:p.to,text:p.text,origin:p.origin,cancel:function(){return b.canceled=!0}};return w&&(b.update=function(S,O,R,I){S&&(b.from=pe(f,S)),O&&(b.to=pe(f,O)),R&&(b.text=R),I!==void 0&&(b.origin=I)}),de(f,"beforeChange",f,b),f.cm&&de(f.cm,"beforeChange",f.cm,b),b.canceled?(f.cm&&(f.cm.curOp.updateInput=2),null):{from:b.from,to:b.to,text:b.text,origin:b.origin}}function Pl(f,p,w){if(f.cm){if(!f.cm.curOp)return dr(f.cm,Pl)(f,p,w);if(f.cm.state.suppressEdits)return}if(!((en(f,"beforeChange")||f.cm&&en(f.cm,"beforeChange"))&&(p=Sd(f,p,!0),!p))){var b=ur&&!w&&Or(f,p.from,p.to);if(b)for(var S=b.length-1;S>=0;--S)pp(f,{from:b[S].from,to:b[S].to,text:S?[""]:p.text,origin:p.origin});else pp(f,p)}}function pp(f,p){if(!(p.text.length==1&&p.text[0]==""&&Be(p.from,p.to)==0)){var w=Ml(f,p);_u(f,p,w,f.cm?f.cm.curOp.id:NaN),Nl(f,p,w,La(f,p));var b=[];Jo(f,function(S,O){!O&&Kt(b,S.history)==-1&&(Ou(S.history,p),b.push(S.history)),Nl(S,p,null,La(S,p))})}}function _d(f,p,w){var b=f.cm&&f.cm.state.suppressEdits;if(!(b&&!w)){for(var S=f.history,O,R=f.sel,I=p=="undo"?S.done:S.undone,H=p=="undo"?S.undone:S.done,Y=0;Y<I.length&&(O=I[Y],!(w?O.ranges&&!O.equals(f.sel):!O.ranges));Y++);if(Y!=I.length){for(S.lastOrigin=S.lastSelOrigin=null;;)if(O=I.pop(),O.ranges){if(Qs(O,H),w&&!O.equals(f.sel)){Ur(f,O,{clearRedo:!1});return}R=O}else if(b){I.push(O);return}else break;var vt=[];Qs(R,H),H.push({changes:vt,generation:S.generation}),S.generation=O.generation||++S.maxGeneration;for(var bt=en(f,"beforeChange")||f.cm&&en(f.cm,"beforeChange"),It=function(Yt){var ve=O.changes[Yt];if(ve.origin=p,bt&&!Sd(f,ve,!1))return I.length=0,{};vt.push(Kc(f,ve));var Te=Yt?Ml(f,ve):De(I);Nl(f,ve,Te,Dl(f,ve)),!Yt&&f.cm&&f.cm.scrollIntoView({from:ve.from,to:ma(ve)});var ke=[];Jo(f,function(_e,Ae){!Ae&&Kt(ke,_e.history)==-1&&(Ou(_e.history,ve),ke.push(_e.history)),Nl(_e,ve,null,Dl(_e,ve))})},Pt=O.changes.length-1;Pt>=0;--Pt){var Gt=It(Pt);if(Gt)return Gt.v}}}}function Cd(f,p){if(p!=0&&(f.first+=p,f.sel=new _o(Ut(f.sel.ranges,function(S){return new En(le(S.anchor.line+p,S.anchor.ch),le(S.head.line+p,S.head.ch))}),f.sel.primIndex),f.cm)){Ei(f.cm,f.first,f.first-p,p);for(var w=f.cm.display,b=w.viewFrom;b<w.viewTo;b++)Ua(f.cm,b,"gutter")}}function Nl(f,p,w,b){if(f.cm&&!f.cm.curOp)return dr(f.cm,Nl)(f,p,w,b);if(p.to.line<f.first){Cd(f,p.text.length-1-(p.to.line-p.from.line));return}if(!(p.from.line>f.lastLine())){if(p.from.line<f.first){var S=p.text.length-1-(f.first-p.from.line);Cd(f,S),p={from:le(f.first,0),to:le(p.to.line+S,p.to.ch),text:[De(p.text)],origin:p.origin}}var O=f.lastLine();p.to.line>O&&(p={from:p.from,to:le(O,Me(f,O).text.length),text:[p.text[0]],origin:p.origin}),p.removed=jr(f,p.from,p.to),w||(w=Ml(f,p)),f.cm?vp(f.cm,p,b):md(f,p,b),ws(f,w,ne),f.cantEdit&&wd(f,le(f.firstLine(),0))&&(f.cantEdit=!1)}}function vp(f,p,w){var b=f.doc,S=f.display,O=p.from,R=p.to,I=!1,H=O.line;f.options.lineWrapping||(H=ln(Nn(Me(b,O.line))),b.iter(H,R.line+1,function(Pt){if(Pt==S.maxLine)return I=!0,!0})),b.sel.contains(p.from,p.to)>-1&&xe(f),md(b,p,w,Pg(f)),f.options.lineWrapping||(b.iter(H,O.line+p.text.length,function(Pt){var Gt=ja(Pt);Gt>S.maxLineLength&&(S.maxLine=Pt,S.maxLineLength=Gt,S.maxLineChanged=!0,I=!1)}),I&&(f.curOp.updateMaxLine=!0)),ds(b,O.line),So(f,400);var Y=p.text.length-(R.line-O.line)-1;p.full?Ei(f):O.line==R.line&&p.text.length==1&&!qc(f.doc,p)?Ua(f,O.line,"text"):Ei(f,O.line,R.line+1,Y);var vt=en(f,"changes"),bt=en(f,"change");if(bt||vt){var It={from:O,to:R,text:p.text,removed:p.removed,origin:p.origin};bt&&cr(f,"change",f,It),vt&&(f.curOp.changeObjs||(f.curOp.changeObjs=[])).push(It)}f.display.selForContextMenu=null}function Yr(f,p,w,b,S){var O;b||(b=w),Be(b,w)<0&&(O=[b,w],w=O[0],b=O[1]),typeof p=="string"&&(p=f.splitLines(p)),Pl(f,{from:w,to:b,text:p,origin:S})}function Dr(f,p,w,b){w<f.line?f.line+=b:p<f.line&&(f.line=p,f.ch=0)}function Td(f,p,w,b){for(var S=0;S<f.length;++S){var O=f[S],R=!0;if(O.ranges){O.copied||(O=f[S]=O.deepCopy(),O.copied=!0);for(var I=0;I<O.ranges.length;I++)Dr(O.ranges[I].anchor,p,w,b),Dr(O.ranges[I].head,p,w,b);continue}for(var H=0;H<O.changes.length;++H){var Y=O.changes[H];if(w<Y.from.line)Y.from=le(Y.from.line+b,Y.from.ch),Y.to=le(Y.to.line+b,Y.to.ch);else if(p<=Y.to.line){R=!1;break}}R||(f.splice(0,S+1),S=0)}}function Ou(f,p){var w=p.from.line,b=p.to.line,S=p.text.length-(b-w)-1;Td(f.done,w,b,S),Td(f.undone,w,b,S)}function el(f,p,w,b){var S=p,O=p;return typeof p=="number"?O=Me(f,oe(f,p)):S=ln(p),S==null?null:(b(O,S)&&f.cm&&Ua(f.cm,S,w),O)}function Rl(f){this.lines=f,this.parent=null;for(var p=0,w=0;w<f.length;++w)f[w].parent=this,p+=f[w].height;this.height=p}Rl.prototype={chunkSize:function(){return this.lines.length},removeInner:function(f,p){for(var w=f,b=f+p;w<b;++w){var S=this.lines[w];this.height-=S.height,js(S),cr(S,"delete")}this.lines.splice(f,p)},collapse:function(f){f.push.apply(f,this.lines)},insertInner:function(f,p,w){this.height+=w,this.lines=this.lines.slice(0,f).concat(p).concat(this.lines.slice(f));for(var b=0;b<p.length;++b)p[b].parent=this},iterN:function(f,p,w){for(var b=f+p;f<b;++f)if(w(this.lines[f]))return!0}};function Co(f){this.children=f;for(var p=0,w=0,b=0;b<f.length;++b){var S=f[b];p+=S.chunkSize(),w+=S.height,S.parent=this}this.size=p,this.height=w,this.parent=null}Co.prototype={chunkSize:function(){return this.size},removeInner:function(f,p){this.size-=p;for(var w=0;w<this.children.length;++w){var b=this.children[w],S=b.chunkSize();if(f<S){var O=Math.min(p,S-f),R=b.height;if(b.removeInner(f,O),this.height-=R-b.height,S==O&&(this.children.splice(w--,1),b.parent=null),(p-=O)==0)break;f=0}else f-=S}if(this.size-p<25&&(this.children.length>1||!(this.children[0]instanceof Rl))){var I=[];this.collapse(I),this.children=[new Rl(I)],this.children[0].parent=this}},collapse:function(f){for(var p=0;p<this.children.length;++p)this.children[p].collapse(f)},insertInner:function(f,p,w){this.size+=p.length,this.height+=w;for(var b=0;b<this.children.length;++b){var S=this.children[b],O=S.chunkSize();if(f<=O){if(S.insertInner(f,p,w),S.lines&&S.lines.length>50){for(var R=S.lines.length%25+25,I=R;I<S.lines.length;){var H=new Rl(S.lines.slice(I,I+=25));S.height-=H.height,this.children.splice(++b,0,H),H.parent=this}S.lines=S.lines.slice(0,R),this.maybeSpill()}break}f-=O}},maybeSpill:function(){if(!(this.children.length<=10)){var f=this;do{var p=f.children.splice(f.children.length-5,5),w=new Co(p);if(f.parent){f.size-=w.size,f.height-=w.height;var S=Kt(f.parent.children,f);f.parent.children.splice(S+1,0,w)}else{var b=new Co(f.children);b.parent=f,f.children=[b,w],f=b}w.parent=f.parent}while(f.children.length>10);f.parent.maybeSpill()}},iterN:function(f,p,w){for(var b=0;b<this.children.length;++b){var S=this.children[b],O=S.chunkSize();if(f<O){var R=Math.min(p,O-f);if(S.iterN(f,R,w))return!0;if((p-=R)==0)break;f=0}else f-=O}}};var nl=function(f,p,w){if(w)for(var b in w)w.hasOwnProperty(b)&&(this[b]=w[b]);this.doc=f,this.node=p};nl.prototype.clear=function(){var f=this.doc.cm,p=this.line.widgets,w=this.line,b=ln(w);if(!(b==null||!p)){for(var S=0;S<p.length;++S)p[S]==this&&p.splice(S--,1);p.length||(w.widgets=null);var O=gs(this);Kr(w,Math.max(0,w.height-O)),f&&(Ji(f,function(){Ed(f,w,-O),Ua(f,b,"widget")}),cr(f,"lineWidgetCleared",f,this,b))}},nl.prototype.changed=function(){var f=this,p=this.height,w=this.doc.cm,b=this.line;this.height=null;var S=gs(this)-p;S&&(pi(this.doc,b)||Kr(b,b.height+S),w&&Ji(w,function(){w.curOp.forceUpdate=!0,Ed(w,b,S),cr(w,"lineWidgetChanged",w,f,ln(b))}))},dn(nl);function Ed(f,p,w){Gi(p)<(f.curOp&&f.curOp.scrollTop||f.doc.scrollTop)&&Uc(f,w)}function gp(f,p,w,b){var S=new nl(f,w,b),O=f.cm;return O&&S.noHScroll&&(O.display.alignWidgets=!0),el(f,p,"widget",function(R){var I=R.widgets||(R.widgets=[]);if(S.insertAt==null?I.push(S):I.splice(Math.min(I.length,Math.max(0,S.insertAt)),0,S),S.line=R,O&&!pi(f,R)){var H=Gi(R)<f.scrollTop;Kr(R,R.height+gs(S)),H&&Uc(O,S.height),O.curOp.forceUpdate=!0}return!0}),O&&cr(O,"lineWidgetAdded",O,S,typeof p=="number"?p:ln(p)),S}var mp=0,xs=function(f,p){this.lines=[],this.type=p,this.doc=f,this.id=++mp};xs.prototype.clear=function(){if(!this.explicitlyCleared){var f=this.doc.cm,p=f&&!f.curOp;if(p&&xo(f),en(this,"clear")){var w=this.find();w&&cr(this,"clear",w.from,w.to)}for(var b=null,S=null,O=0;O<this.lines.length;++O){var R=this.lines[O],I=ei(R.markedSpans,this);f&&!this.collapsed?Ua(f,ln(R),"text"):f&&(I.to!=null&&(S=ln(R)),I.from!=null&&(b=ln(R))),R.markedSpans=Qn(R.markedSpans,I),I.from==null&&this.collapsed&&!pi(this.doc,R)&&f&&Kr(R,$o(f.display))}if(f&&this.collapsed&&!f.options.lineWrapping)for(var H=0;H<this.lines.length;++H){var Y=Nn(this.lines[H]),vt=ja(Y);vt>f.display.maxLineLength&&(f.display.maxLine=Y,f.display.maxLineLength=vt,f.display.maxLineChanged=!0)}b!=null&&f&&this.collapsed&&Ei(f,b,S+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,f&&$c(f.doc)),f&&cr(f,"markerCleared",f,this,b,S),p&&Mi(f),this.parent&&this.parent.clear()}},xs.prototype.find=function(f,p){f==null&&this.type=="bookmark"&&(f=1);for(var w,b,S=0;S<this.lines.length;++S){var O=this.lines[S],R=ei(O.markedSpans,this);if(R.from!=null&&(w=le(p?O:ln(O),R.from),f==-1))return w;if(R.to!=null&&(b=le(p?O:ln(O),R.to),f==1))return b}return w&&{from:w,to:b}},xs.prototype.changed=function(){var f=this,p=this.find(-1,!0),w=this,b=this.doc.cm;!p||!b||Ji(b,function(){var S=p.line,O=ln(p.line),R=jt(b,O);if(R&&(Dc(R),b.curOp.selectionChanged=b.curOp.forceUpdate=!0),b.curOp.updateMaxLine=!0,!pi(w.doc,S)&&w.height!=null){var I=w.height;w.height=null;var H=gs(w)-I;H&&Kr(S,S.height+H)}cr(b,"markerChanged",b,f)})},xs.prototype.attachLine=function(f){if(!this.lines.length&&this.doc.cm){var p=this.doc.cm.curOp;(!p.maybeHiddenMarkers||Kt(p.maybeHiddenMarkers,this)==-1)&&(p.maybeUnhiddenMarkers||(p.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(f)},xs.prototype.detachLine=function(f){if(this.lines.splice(Kt(this.lines,f),1),!this.lines.length&&this.doc.cm){var p=this.doc.cm.curOp;(p.maybeHiddenMarkers||(p.maybeHiddenMarkers=[])).push(this)}},dn(xs);function Ll(f,p,w,b,S){if(b&&b.shared)return Vg(f,p,w,b,S);if(f.cm&&!f.cm.curOp)return dr(f.cm,Ll)(f,p,w,b,S);var O=new xs(f,S),R=Be(p,w);if(b&&yt(b,O,!1),R>0||R==0&&O.clearWhenEmpty!==!1)return O;if(O.replacedWith&&(O.collapsed=!0,O.widgetNode=lt("span",[O.replacedWith],"CodeMirror-widget"),b.handleMouseEvents||O.widgetNode.setAttribute("cm-ignore-events","true"),b.insertLeft&&(O.widgetNode.insertLeft=!0)),O.collapsed){if(Re(f,p.line,p,w,O)||p.line!=w.line&&Re(f,w.line,p,w,O))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ci()}O.addToHistory&&_u(f,{from:p,to:w,origin:"markText"},f.sel,NaN);var I=p.line,H=f.cm,Y;if(f.iter(I,w.line+1,function(bt){H&&O.collapsed&&!H.options.lineWrapping&&Nn(bt)==H.display.maxLine&&(Y=!0),O.collapsed&&I!=p.line&&Kr(bt,0),va(bt,new vo(O,I==p.line?p.ch:null,I==w.line?w.ch:null),f.cm&&f.cm.curOp),++I}),O.collapsed&&f.iter(p.line,w.line+1,function(bt){pi(f,bt)&&Kr(bt,0)}),O.clearOnEnter&&dt(O,"beforeCursorEnter",function(){return O.clear()}),O.readOnly&&(bl(),(f.history.done.length||f.history.undone.length)&&f.clearHistory()),O.collapsed&&(O.id=++mp,O.atomic=!0),H){if(Y&&(H.curOp.updateMaxLine=!0),O.collapsed)Ei(H,p.line,w.line+1);else if(O.className||O.startStyle||O.endStyle||O.css||O.attributes||O.title)for(var vt=p.line;vt<=w.line;vt++)Ua(H,vt,"text");O.atomic&&$c(H.doc),cr(H,"markerAdded",H,O)}return O}var Au=function(f,p){this.markers=f,this.primary=p;for(var w=0;w<f.length;++w)f[w].parent=this};Au.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var f=0;f<this.markers.length;++f)this.markers[f].clear();cr(this,"clear")}},Au.prototype.find=function(f,p){return this.primary.find(f,p)},dn(Au);function Vg(f,p,w,b,S){b=yt(b),b.shared=!1;var O=[Ll(f,p,w,b,S)],R=O[0],I=b.widgetNode;return Jo(f,function(H){I&&(b.widgetNode=I.cloneNode(!0)),O.push(Ll(H,pe(H,p),pe(H,w),b,S));for(var Y=0;Y<H.linked.length;++Y)if(H.linked[Y].isParent)return;R=De(O)}),new Au(O,R)}function yp(f){return f.findMarks(le(f.first,0),f.clipPos(le(f.lastLine())),function(p){return p.parent})}function bp(f,p){for(var w=0;w<p.length;w++){var b=p[w],S=b.find(),O=f.clipPos(S.from),R=f.clipPos(S.to);if(Be(O,R)){var I=Ll(f,O,R,b.primary,b.primary.type);b.markers.push(I),I.parent=b}}}function Fg(f){for(var p=function(b){var S=f[b],O=[S.primary.doc];Jo(S.primary.doc,function(H){return O.push(H)});for(var R=0;R<S.markers.length;R++){var I=S.markers[R];Kt(O,I.doc)==-1&&(I.parent=null,S.markers.splice(R--,1))}},w=0;w<f.length;w++)p(w)}var Hb=0,Di=function(f,p,w,b,S){if(!(this instanceof Di))return new Di(f,p,w,b,S);w==null&&(w=0),Co.call(this,[new Rl([new Gr("",null)])]),this.first=w,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=w;var O=le(w,0);this.sel=Ha(O),this.history=new Su(null),this.id=++Hb,this.modeOption=p,this.lineSep=b,this.direction=S=="rtl"?"rtl":"ltr",this.extend=!1,typeof f=="string"&&(f=this.splitLines(f)),md(this,{from:O,to:O,text:f}),Ur(this,Ha(O),ne)};Di.prototype=P(Co.prototype,{constructor:Di,iter:function(f,p,w){w?this.iterN(f-this.first,p-f,w):this.iterN(this.first,this.first+this.size,f)},insert:function(f,p){for(var w=0,b=0;b<p.length;++b)w+=p[b].height;this.insertInner(f-this.first,p,w)},remove:function(f,p){this.removeInner(f-this.first,p)},getValue:function(f){var p=Yn(this,this.first,this.first+this.size);return f===!1?p:p.join(f||this.lineSeparator())},setValue:tr(function(f){var p=le(this.first,0),w=this.first+this.size-1;Pl(this,{from:p,to:le(w,Me(this,w).text.length),text:this.splitLines(f),origin:"setValue",full:!0},!0),this.cm&&Fa(this.cm,0,0),Ur(this,Ha(p),ne)}),replaceRange:function(f,p,w,b){p=pe(this,p),w=w?pe(this,w):p,Yr(this,f,p,w,b)},getRange:function(f,p,w){var b=jr(this,pe(this,f),pe(this,p));return w===!1?b:w===""?b.join(""):b.join(w||this.lineSeparator())},getLine:function(f){var p=this.getLineHandle(f);return p&&p.text},getLineHandle:function(f){if(_r(this,f))return Me(this,f)},getLineNumber:function(f){return ln(f)},getLineHandleVisualStart:function(f){return typeof f=="number"&&(f=Me(this,f)),Nn(f)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(f){return pe(this,f)},getCursor:function(f){var p=this.sel.primary(),w;return f==null||f=="head"?w=p.head:f=="anchor"?w=p.anchor:f=="end"||f=="to"||f===!1?w=p.to():w=p.from(),w},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:tr(function(f,p,w){hn(this,pe(this,typeof f=="number"?le(f,p||0):f),null,w)}),setSelection:tr(function(f,p,w){hn(this,pe(this,f),pe(this,p||f),w)}),extendSelection:tr(function(f,p,w){Tu(this,pe(this,f),p&&pe(this,p),w)}),extendSelections:tr(function(f,p){bd(this,on(this,f),p)}),extendSelectionsBy:tr(function(f,p){var w=Ut(this.sel.ranges,f);bd(this,on(this,w),p)}),setSelections:tr(function(f,p,w){if(f.length){for(var b=[],S=0;S<f.length;S++)b[S]=new En(pe(this,f[S].anchor),pe(this,f[S].head||f[S].anchor));p==null&&(p=Math.min(f.length-1,this.sel.primIndex)),Ur(this,mi(this.cm,b,p),w)}}),addSelection:tr(function(f,p,w){var b=this.sel.ranges.slice(0);b.push(new En(pe(this,f),pe(this,p||f))),Ur(this,mi(this.cm,b,b.length-1),w)}),getSelection:function(f){for(var p=this.sel.ranges,w,b=0;b<p.length;b++){var S=jr(this,p[b].from(),p[b].to());w=w?w.concat(S):S}return f===!1?w:w.join(f||this.lineSeparator())},getSelections:function(f){for(var p=[],w=this.sel.ranges,b=0;b<w.length;b++){var S=jr(this,w[b].from(),w[b].to());f!==!1&&(S=S.join(f||this.lineSeparator())),p[b]=S}return p},replaceSelection:function(f,p,w){for(var b=[],S=0;S<this.sel.ranges.length;S++)b[S]=f;this.replaceSelections(b,p,w||"+input")},replaceSelections:tr(function(f,p,w){for(var b=[],S=this.sel,O=0;O<S.ranges.length;O++){var R=S.ranges[O];b[O]={from:R.from(),to:R.to(),text:this.splitLines(f[O]),origin:w}}for(var I=p&&p!="end"&&gd(this,b,p),H=b.length-1;H>=0;H--)Pl(this,b[H]);I?Mr(this,I):this.cm&&ga(this.cm)}),undo:tr(function(){_d(this,"undo")}),redo:tr(function(){_d(this,"redo")}),undoSelection:tr(function(){_d(this,"undo",!0)}),redoSelection:tr(function(){_d(this,"redo",!0)}),setExtending:function(f){this.extend=f},getExtending:function(){return this.extend},historySize:function(){for(var f=this.history,p=0,w=0,b=0;b<f.done.length;b++)f.done[b].ranges||++p;for(var S=0;S<f.undone.length;S++)f.undone[S].ranges||++w;return{undo:p,redo:w}},clearHistory:function(){var f=this;this.history=new Su(this.history),Jo(this,function(p){return p.history=f.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(f){return f&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(f){return this.history.generation==(f||this.cleanGeneration)},getHistory:function(){return{done:bs(this.history.done),undone:bs(this.history.undone)}},setHistory:function(f){var p=this.history=new Su(this.history);p.done=bs(f.done.slice(0),null,!0),p.undone=bs(f.undone.slice(0),null,!0)},setGutterMarker:tr(function(f,p,w){return el(this,f,"gutter",function(b){var S=b.gutterMarkers||(b.gutterMarkers={});return S[p]=w,!w&&ut(S)&&(b.gutterMarkers=null),!0})}),clearGutter:tr(function(f){var p=this;this.iter(function(w){w.gutterMarkers&&w.gutterMarkers[f]&&el(p,w,"gutter",function(){return w.gutterMarkers[f]=null,ut(w.gutterMarkers)&&(w.gutterMarkers=null),!0})})}),lineInfo:function(f){var p;if(typeof f=="number"){if(!_r(this,f)||(p=f,f=Me(this,f),!f))return null}else if(p=ln(f),p==null)return null;return{line:p,handle:f,text:f.text,gutterMarkers:f.gutterMarkers,textClass:f.textClass,bgClass:f.bgClass,wrapClass:f.wrapClass,widgets:f.widgets}},addLineClass:tr(function(f,p,w){return el(this,f,p=="gutter"?"gutter":"class",function(b){var S=p=="text"?"textClass":p=="background"?"bgClass":p=="gutter"?"gutterClass":"wrapClass";if(!b[S])b[S]=w;else{if(et(w).test(b[S]))return!1;b[S]+=" "+w}return!0})}),removeLineClass:tr(function(f,p,w){return el(this,f,p=="gutter"?"gutter":"class",function(b){var S=p=="text"?"textClass":p=="background"?"bgClass":p=="gutter"?"gutterClass":"wrapClass",O=b[S];if(O)if(w==null)b[S]=null;else{var R=O.match(et(w));if(!R)return!1;var I=R.index+R[0].length;b[S]=O.slice(0,R.index)+(!R.index||I==O.length?"":" ")+O.slice(I)||null}else return!1;return!0})}),addLineWidget:tr(function(f,p,w){return gp(this,f,p,w)}),removeLineWidget:function(f){f.clear()},markText:function(f,p,w){return Ll(this,pe(this,f),pe(this,p),w,w&&w.type||"range")},setBookmark:function(f,p){var w={replacedWith:p&&(p.nodeType==null?p.widget:p),insertLeft:p&&p.insertLeft,clearWhenEmpty:!1,shared:p&&p.shared,handleMouseEvents:p&&p.handleMouseEvents};return f=pe(this,f),Ll(this,f,f,w,"bookmark")},findMarksAt:function(f){f=pe(this,f);var p=[],w=Me(this,f.line).markedSpans;if(w)for(var b=0;b<w.length;++b){var S=w[b];(S.from==null||S.from<=f.ch)&&(S.to==null||S.to>=f.ch)&&p.push(S.marker.parent||S.marker)}return p},findMarks:function(f,p,w){f=pe(this,f),p=pe(this,p);var b=[],S=f.line;return this.iter(f.line,p.line+1,function(O){var R=O.markedSpans;if(R)for(var I=0;I<R.length;I++){var H=R[I];!(H.to!=null&&S==f.line&&f.ch>=H.to||H.from==null&&S!=f.line||H.from!=null&&S==p.line&&H.from>=p.ch)&&(!w||w(H.marker))&&b.push(H.marker.parent||H.marker)}++S}),b},getAllMarks:function(){var f=[];return this.iter(function(p){var w=p.markedSpans;if(w)for(var b=0;b<w.length;++b)w[b].from!=null&&f.push(w[b].marker)}),f},posFromIndex:function(f){var p,w=this.first,b=this.lineSeparator().length;return this.iter(function(S){var O=S.text.length+b;if(O>f)return p=f,!0;f-=O,++w}),pe(this,le(w,p))},indexFromPos:function(f){f=pe(this,f);var p=f.ch;if(f.line<this.first||f.ch<0)return 0;var w=this.lineSeparator().length;return this.iter(this.first,f.line,function(b){p+=b.text.length+w}),p},copy:function(f){var p=new Di(Yn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return p.scrollTop=this.scrollTop,p.scrollLeft=this.scrollLeft,p.sel=this.sel,p.extend=!1,f&&(p.history.undoDepth=this.history.undoDepth,p.setHistory(this.getHistory())),p},linkedDoc:function(f){f||(f={});var p=this.first,w=this.first+this.size;f.from!=null&&f.from>p&&(p=f.from),f.to!=null&&f.to<w&&(w=f.to);var b=new Di(Yn(this,p,w),f.mode||this.modeOption,p,this.lineSep,this.direction);return f.sharedHist&&(b.history=this.history),(this.linked||(this.linked=[])).push({doc:b,sharedHist:f.sharedHist}),b.linked=[{doc:this,isParent:!0,sharedHist:f.sharedHist}],bp(b,yp(this)),b},unlinkDoc:function(f){if(f instanceof Ln&&(f=f.doc),this.linked)for(var p=0;p<this.linked.length;++p){var w=this.linked[p];if(w.doc==f){this.linked.splice(p,1),f.unlinkDoc(this),Fg(yp(this));break}}if(f.history==this.history){var b=[f.id];Jo(f,function(S){return b.push(S.id)},!0),f.history=new Su(null),f.history.done=bs(this.history.done,b),f.history.undone=bs(this.history.undone,b)}},iterLinkedDocs:function(f){Jo(this,f)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(f){return this.lineSep?f.split(this.lineSep):Sn(f)},lineSeparator:function(){return this.lineSep||`
`},setDirection:tr(function(f){f!="rtl"&&(f="ltr"),f!=this.direction&&(this.direction=f,this.iter(function(p){return p.order=null}),this.cm&&Js(this.cm))})}),Di.prototype.eachLine=Di.prototype.iter;var wp=0;function Hg(f){var p=this;if(Sp(p),!(ae(p,f)||vi(p.display,f))){sn(f),s&&(wp=+new Date);var w=Cl(p,f,!0),b=f.dataTransfer.files;if(!(!w||p.isReadOnly()))if(b&&b.length&&window.FileReader&&window.File)for(var S=b.length,O=Array(S),R=0,I=function(){++R==S&&dr(p,function(){w=pe(p.doc,w);var Pt={from:w,to:w,text:p.doc.splitLines(O.filter(function(Gt){return Gt!=null}).join(p.doc.lineSeparator())),origin:"paste"};Pl(p.doc,Pt),Mr(p.doc,Ha(pe(p.doc,w),pe(p.doc,ma(Pt))))})()},H=function(Pt,Gt){if(p.options.allowDropFileTypes&&Kt(p.options.allowDropFileTypes,Pt.type)==-1){I();return}var Yt=new FileReader;Yt.onerror=function(){return I()},Yt.onload=function(){var ve=Yt.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(ve)){I();return}O[Gt]=ve,I()},Yt.readAsText(Pt)},Y=0;Y<b.length;Y++)H(b[Y],Y);else{if(p.state.draggingText&&p.doc.sel.contains(w)>-1){p.state.draggingText(f),setTimeout(function(){return p.display.input.focus()},20);return}try{var vt=f.dataTransfer.getData("Text");if(vt){var bt;if(p.state.draggingText&&!p.state.draggingText.copy&&(bt=p.listSelections()),ws(p.doc,Ha(w,w)),bt)for(var It=0;It<bt.length;++It)Yr(p.doc,"",bt[It].anchor,bt[It].head,"drag");p.replaceSelection(vt,"around","paste"),p.display.input.focus()}}catch{}}}}function xp(f,p){if(s&&(!f.state.draggingText||+new Date-wp<100)){ot(p);return}if(!(ae(f,p)||vi(f.display,p))&&(p.dataTransfer.setData("Text",f.getSelection()),p.dataTransfer.effectAllowed="copyMove",p.dataTransfer.setDragImage&&!y)){var w=ft("img",null,null,"position: fixed; left: 0; top: 0;");w.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",m&&(w.width=w.height=1,f.display.wrapper.appendChild(w),w._top=w.offsetTop),p.dataTransfer.setDragImage(w,0,0),m&&w.parentNode.removeChild(w)}}function zg(f,p){var w=Cl(f,p);if(w){var b=document.createDocumentFragment();Ic(f,w,b),f.display.dragCursor||(f.display.dragCursor=ft("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),f.display.lineSpace.insertBefore(f.display.dragCursor,f.display.cursorDiv)),$(f.display.dragCursor,b)}}function Sp(f){f.display.dragCursor&&(f.display.lineSpace.removeChild(f.display.dragCursor),f.display.dragCursor=null)}function _p(f){if(document.getElementsByClassName){for(var p=document.getElementsByClassName("CodeMirror"),w=[],b=0;b<p.length;b++){var S=p[b].CodeMirror;S&&w.push(S)}w.length&&w[0].operation(function(){for(var O=0;O<w.length;O++)f(w[O])})}}var Cp=!1;function Wg(){Cp||(zb(),Cp=!0)}function zb(){var f;dt(window,"resize",function(){f==null&&(f=setTimeout(function(){f=null,_p(qg)},100))}),dt(window,"blur",function(){return _p(mu)})}function qg(f){var p=f.display;p.cachedCharWidth=p.cachedTextHeight=p.cachedPaddingH=null,p.scrollbarsClipped=!1,f.setSize()}for(var To={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},rl=0;rl<10;rl++)To[rl+48]=To[rl+96]=String(rl);for(var Gc=65;Gc<=90;Gc++)To[Gc]=String.fromCharCode(Gc);for(var il=1;il<=12;il++)To[il+111]=To[il+63235]="F"+il;var Eo={};Eo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Eo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Eo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Eo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Eo.default=V?Eo.macDefault:Eo.pcDefault;function Kg(f){var p=f.split(/-(?!$)/);f=p[p.length-1];for(var w,b,S,O,R=0;R<p.length-1;R++){var I=p[R];if(/^(cmd|meta|m)$/i.test(I))O=!0;else if(/^a(lt)?$/i.test(I))w=!0;else if(/^(c|ctrl|control)$/i.test(I))b=!0;else if(/^s(hift)?$/i.test(I))S=!0;else throw new Error("Unrecognized modifier name: "+I)}return w&&(f="Alt-"+f),b&&(f="Ctrl-"+f),O&&(f="Cmd-"+f),S&&(f="Shift-"+f),f}function $g(f){var p={};for(var w in f)if(f.hasOwnProperty(w)){var b=f[w];if(/^(name|fallthrough|(de|at)tach)$/.test(w))continue;if(b=="..."){delete f[w];continue}for(var S=Ut(w.split(" "),Kg),O=0;O<S.length;O++){var R=void 0,I=void 0;O==S.length-1?(I=S.join(" "),R=b):(I=S.slice(0,O+1).join(" "),R="...");var H=p[I];if(!H)p[I]=R;else if(H!=R)throw new Error("Inconsistent bindings for "+I)}delete f[w]}for(var Y in p)f[Y]=p[Y];return f}function jl(f,p,w,b){p=ku(p);var S=p.call?p.call(f,b):p[f];if(S===!1)return"nothing";if(S==="...")return"multi";if(S!=null&&w(S))return"handled";if(p.fallthrough){if(Object.prototype.toString.call(p.fallthrough)!="[object Array]")return jl(f,p.fallthrough,w,b);for(var O=0;O<p.fallthrough.length;O++){var R=jl(f,p.fallthrough[O],w,b);if(R)return R}}}function Tp(f){var p=typeof f=="string"?f:To[f.keyCode];return p=="Ctrl"||p=="Alt"||p=="Shift"||p=="Mod"}function Ep(f,p,w){var b=f;return p.altKey&&b!="Alt"&&(f="Alt-"+f),(ht?p.metaKey:p.ctrlKey)&&b!="Ctrl"&&(f="Ctrl-"+f),(ht?p.ctrlKey:p.metaKey)&&b!="Mod"&&(f="Cmd-"+f),!w&&p.shiftKey&&b!="Shift"&&(f="Shift-"+f),f}function Op(f,p){if(m&&f.keyCode==34&&f.char)return!1;var w=To[f.keyCode];return w==null||f.altGraphKey?!1:(f.keyCode==3&&f.code&&(w=f.code),Ep(w,f,p))}function ku(f){return typeof f=="string"?Eo[f]:f}function Il(f,p){for(var w=f.doc.sel.ranges,b=[],S=0;S<w.length;S++){for(var O=p(w[S]);b.length&&Be(O.from,De(b).to)<=0;){var R=b.pop();if(Be(R.from,O.from)<0){O.from=R.from;break}}b.push(O)}Ji(f,function(){for(var I=b.length-1;I>=0;I--)Yr(f.doc,"",b[I].from,b[I].to,"+delete");ga(f)})}function Od(f,p,w){var b=Tt(f.text,p+w,w);return b<0||b>f.text.length?null:b}function Yc(f,p,w){var b=Od(f,p.ch,w);return b==null?null:new le(p.line,b,w<0?"after":"before")}function Ad(f,p,w,b,S){if(f){p.doc.direction=="rtl"&&(S=-S);var O=B(w,p.doc.direction);if(O){var R=S<0?De(O):O[0],I=S<0==(R.level==1),H=I?"after":"before",Y;if(R.level>0||p.doc.direction=="rtl"){var vt=te(p,w);Y=S<0?w.text.length-1:0;var bt=me(p,vt,Y).top;Y=he(function(It){return me(p,vt,It).top==bt},S<0==(R.level==1)?R.from:R.to-1,Y),H=="before"&&(Y=Od(w,Y,1))}else Y=S<0?R.to:R.from;return new le(b,Y,H)}}return new le(b,S<0?w.text.length:0,S<0?"before":"after")}function Gg(f,p,w,b){var S=B(p,f.doc.direction);if(!S)return Yc(p,w,b);w.ch>=p.text.length?(w.ch=p.text.length,w.sticky="before"):w.ch<=0&&(w.ch=0,w.sticky="after");var O=A(S,w.ch,w.sticky),R=S[O];if(f.doc.direction=="ltr"&&R.level%2==0&&(b>0?R.to>w.ch:R.from<w.ch))return Yc(p,w,b);var I=function(Te,ke){return Od(p,Te instanceof le?Te.ch:Te,ke)},H,Y=function(Te){return f.options.lineWrapping?(H=H||te(f,p),id(f,p,H,Te)):{begin:0,end:p.text.length}},vt=Y(w.sticky=="before"?I(w,-1):w.ch);if(f.doc.direction=="rtl"||R.level==1){var bt=R.level==1==b<0,It=I(w,bt?1:-1);if(It!=null&&(bt?It<=R.to&&It<=vt.end:It>=R.from&&It>=vt.begin)){var Pt=bt?"before":"after";return new le(w.line,It,Pt)}}var Gt=function(Te,ke,_e){for(var Ae=function(wn,Vr){return Vr?new le(w.line,I(wn,1),"before"):new le(w.line,wn,"after")};Te>=0&&Te<S.length;Te+=ke){var ze=S[Te],Ve=ke>0==(ze.level!=1),Qe=Ve?_e.begin:I(_e.end,-1);if(ze.from<=Qe&&Qe<ze.to||(Qe=Ve?ze.from:I(ze.to,-1),_e.begin<=Qe&&Qe<_e.end))return Ae(Qe,Ve)}},Yt=Gt(O+b,b,vt);if(Yt)return Yt;var ve=b>0?vt.end:I(vt.begin,-1);return ve!=null&&!(b>0&&ve==p.text.length)&&(Yt=Gt(b>0?0:S.length-1,b,Y(ve)),Yt)?Yt:null}var Xc={selectAll:xd,singleSelection:function(f){return f.setSelection(f.getCursor("anchor"),f.getCursor("head"),ne)},killLine:function(f){return Il(f,function(p){if(p.empty()){var w=Me(f.doc,p.head.line).text.length;return p.head.ch==w&&p.head.line<f.lastLine()?{from:p.head,to:le(p.head.line+1,0)}:{from:p.head,to:le(p.head.line,w)}}else return{from:p.from(),to:p.to()}})},deleteLine:function(f){return Il(f,function(p){return{from:le(p.from().line,0),to:pe(f.doc,le(p.to().line+1,0))}})},delLineLeft:function(f){return Il(f,function(p){return{from:le(p.from().line,0),to:p.from()}})},delWrappedLineLeft:function(f){return Il(f,function(p){var w=f.charCoords(p.head,"div").top+5,b=f.coordsChar({left:0,top:w},"div");return{from:b,to:p.from()}})},delWrappedLineRight:function(f){return Il(f,function(p){var w=f.charCoords(p.head,"div").top+5,b=f.coordsChar({left:f.display.lineDiv.offsetWidth+100,top:w},"div");return{from:p.from(),to:b}})},undo:function(f){return f.undo()},redo:function(f){return f.redo()},undoSelection:function(f){return f.undoSelection()},redoSelection:function(f){return f.redoSelection()},goDocStart:function(f){return f.extendSelection(le(f.firstLine(),0))},goDocEnd:function(f){return f.extendSelection(le(f.lastLine()))},goLineStart:function(f){return f.extendSelectionsBy(function(p){return kd(f,p.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(f){return f.extendSelectionsBy(function(p){return Ap(f,p.head)},{origin:"+move",bias:1})},goLineEnd:function(f){return f.extendSelectionsBy(function(p){return Yg(f,p.head.line)},{origin:"+move",bias:-1})},goLineRight:function(f){return f.extendSelectionsBy(function(p){var w=f.cursorCoords(p.head,"div").top+5;return f.coordsChar({left:f.display.lineDiv.offsetWidth+100,top:w},"div")},Pe)},goLineLeft:function(f){return f.extendSelectionsBy(function(p){var w=f.cursorCoords(p.head,"div").top+5;return f.coordsChar({left:0,top:w},"div")},Pe)},goLineLeftSmart:function(f){return f.extendSelectionsBy(function(p){var w=f.cursorCoords(p.head,"div").top+5,b=f.coordsChar({left:0,top:w},"div");return b.ch<f.getLine(b.line).search(/\S/)?Ap(f,p.head):b},Pe)},goLineUp:function(f){return f.moveV(-1,"line")},goLineDown:function(f){return f.moveV(1,"line")},goPageUp:function(f){return f.moveV(-1,"page")},goPageDown:function(f){return f.moveV(1,"page")},goCharLeft:function(f){return f.moveH(-1,"char")},goCharRight:function(f){return f.moveH(1,"char")},goColumnLeft:function(f){return f.moveH(-1,"column")},goColumnRight:function(f){return f.moveH(1,"column")},goWordLeft:function(f){return f.moveH(-1,"word")},goGroupRight:function(f){return f.moveH(1,"group")},goGroupLeft:function(f){return f.moveH(-1,"group")},goWordRight:function(f){return f.moveH(1,"word")},delCharBefore:function(f){return f.deleteH(-1,"codepoint")},delCharAfter:function(f){return f.deleteH(1,"char")},delWordBefore:function(f){return f.deleteH(-1,"word")},delWordAfter:function(f){return f.deleteH(1,"word")},delGroupBefore:function(f){return f.deleteH(-1,"group")},delGroupAfter:function(f){return f.deleteH(1,"group")},indentAuto:function(f){return f.indentSelection("smart")},indentMore:function(f){return f.indentSelection("add")},indentLess:function(f){return f.indentSelection("subtract")},insertTab:function(f){return f.replaceSelection("	")},insertSoftTab:function(f){for(var p=[],w=f.listSelections(),b=f.options.tabSize,S=0;S<w.length;S++){var O=w[S].from(),R=kt(f.getLine(O.line),O.ch,b);p.push(Ke(b-R%b))}f.replaceSelections(p)},defaultTab:function(f){f.somethingSelected()?f.indentSelection("add"):f.execCommand("insertTab")},transposeChars:function(f){return Ji(f,function(){for(var p=f.listSelections(),w=[],b=0;b<p.length;b++)if(p[b].empty()){var S=p[b].head,O=Me(f.doc,S.line).text;if(O){if(S.ch==O.length&&(S=new le(S.line,S.ch-1)),S.ch>0)S=new le(S.line,S.ch+1),f.replaceRange(O.charAt(S.ch-1)+O.charAt(S.ch-2),le(S.line,S.ch-2),S,"+transpose");else if(S.line>f.doc.first){var R=Me(f.doc,S.line-1).text;R&&(S=new le(S.line,1),f.replaceRange(O.charAt(0)+f.doc.lineSeparator()+R.charAt(R.length-1),le(S.line-1,R.length-1),S,"+transpose"))}}w.push(new En(S,S))}f.setSelections(w)})},newlineAndIndent:function(f){return Ji(f,function(){for(var p=f.listSelections(),w=p.length-1;w>=0;w--)f.replaceRange(f.doc.lineSeparator(),p[w].anchor,p[w].head,"+input");p=f.listSelections();for(var b=0;b<p.length;b++)f.indentLine(p[b].from().line,null,!0);ga(f)})},openLine:function(f){return f.replaceSelection(`
`,"start")},toggleOverwrite:function(f){return f.toggleOverwrite()}};function kd(f,p){var w=Me(f.doc,p),b=Nn(w);return b!=w&&(p=ln(b)),Ad(!0,f,b,p,1)}function Yg(f,p){var w=Me(f.doc,p),b=or(w);return b!=w&&(p=ln(b)),Ad(!0,f,w,p,-1)}function Ap(f,p){var w=kd(f,p.line),b=Me(f.doc,w.line),S=B(b,f.doc.direction);if(!S||S[0].level==0){var O=Math.max(w.ch,b.text.search(/\S/)),R=p.line==w.line&&p.ch<=O&&p.ch;return le(w.line,R?0:O,w.sticky)}return w}function Mu(f,p,w){if(typeof p=="string"&&(p=Xc[p],!p))return!1;f.display.input.ensurePolled();var b=f.display.shift,S=!1;try{f.isReadOnly()&&(f.state.suppressEdits=!0),w&&(f.display.shift=!1),S=p(f)!=Qt}finally{f.display.shift=b,f.state.suppressEdits=!1}return S}function Xg(f,p,w){for(var b=0;b<f.state.keyMaps.length;b++){var S=jl(p,f.state.keyMaps[b],w,f);if(S)return S}return f.options.extraKeys&&jl(p,f.options.extraKeys,w,f)||jl(p,f.options.keyMap,w,f)}var Jg=new Mt;function Jc(f,p,w,b){var S=f.state.keySeq;if(S){if(Tp(p))return"handled";if(/\'$/.test(p)?f.state.keySeq=null:Jg.set(50,function(){f.state.keySeq==S&&(f.state.keySeq=null,f.display.input.reset())}),Zg(f,S+" "+p,w,b))return!0}return Zg(f,p,w,b)}function Zg(f,p,w,b){var S=Xg(f,p,b);return S=="multi"&&(f.state.keySeq=p),S=="handled"&&cr(f,"keyHandled",f,p,w),(S=="handled"||S=="multi")&&(sn(w),qs(f)),!!S}function kp(f,p){var w=Op(p,!0);return w?p.shiftKey&&!f.state.keySeq?Jc(f,"Shift-"+w,p,function(b){return Mu(f,b,!0)})||Jc(f,w,p,function(b){if(typeof b=="string"?/^go[A-Z]/.test(b):b.motion)return Mu(f,b)}):Jc(f,w,p,function(b){return Mu(f,b)}):!1}function Zc(f,p,w){return Jc(f,"'"+w+"'",p,function(b){return Mu(f,b,!0)})}var Qc=null;function tf(f){var p=this;if(!(f.target&&f.target!=p.display.input.getField())&&(p.curOp.focus=_t(),!ae(p,f))){s&&u<11&&f.keyCode==27&&(f.returnValue=!1);var w=f.keyCode;p.display.shift=w==16||f.shiftKey;var b=kp(p,f);m&&(Qc=b?w:null,!b&&w==88&&!zi&&(V?f.metaKey:f.ctrlKey)&&p.replaceSelection("",null,"cut")),e&&!V&&!b&&w==46&&f.shiftKey&&!f.ctrlKey&&document.execCommand&&document.execCommand("cut"),w==18&&!/\bCodeMirror-crosshair\b/.test(p.display.lineDiv.className)&&Qg(p)}}function Qg(f){var p=f.display.lineDiv;Ot(p,"CodeMirror-crosshair");function w(b){(b.keyCode==18||!b.altKey)&&(nt(p,"CodeMirror-crosshair"),fe(document,"keyup",w),fe(document,"mouseover",w))}dt(document,"keyup",w),dt(document,"mouseover",w)}function Mp(f){f.keyCode==16&&(this.doc.sel.shift=!1),ae(this,f)}function ef(f){var p=this;if(!(f.target&&f.target!=p.display.input.getField())&&!(vi(p.display,f)||ae(p,f)||f.ctrlKey&&!f.altKey||V&&f.metaKey)){var w=f.keyCode,b=f.charCode;if(m&&w==Qc){Qc=null,sn(f);return}if(!(m&&(!f.which||f.which<10)&&kp(p,f))){var S=String.fromCharCode(b??w);S!="\b"&&(Zc(p,f,S)||p.display.input.onKeyPress(f))}}}var tm=400,Md=function(f,p,w){this.time=f,this.pos=p,this.button=w};Md.prototype.compare=function(f,p,w){return this.time+tm>f&&Be(p,this.pos)==0&&w==this.button};var nf,Wa;function rf(f,p){var w=+new Date;return Wa&&Wa.compare(w,f,p)?(nf=Wa=null,"triple"):nf&&nf.compare(w,f,p)?(Wa=new Md(w,f,p),nf=null,"double"):(nf=new Md(w,f,p),Wa=null,"single")}function of(f){var p=this,w=p.display;if(!(ae(p,f)||w.activeTouch&&w.input.supportsTouch())){if(w.input.ensurePolled(),w.shift=f.shiftKey,vi(w,f)){c||(w.scroller.draggable=!1,setTimeout(function(){return w.scroller.draggable=!0},100));return}if(!qa(p,f)){var b=Cl(p,f),S=Lt(f),O=b?rf(b,S):"single";window.focus(),S==1&&p.state.selectingText&&p.state.selectingText(f),!(b&&af(p,S,b,O,f))&&(S==1?b?em(p,b,O,f):Ct(f)==w.scroller&&sn(f):S==2?(b&&Tu(p.doc,b),setTimeout(function(){return w.input.focus()},20)):S==3&&(st?p.display.input.onContextMenu(f):gu(p)))}}}function af(f,p,w,b,S){var O="Click";return b=="double"?O="Double"+O:b=="triple"&&(O="Triple"+O),O=(p==1?"Left":p==2?"Middle":"Right")+O,Jc(f,Ep(O,S),S,function(R){if(typeof R=="string"&&(R=Xc[R]),!R)return!1;var I=!1;try{f.isReadOnly()&&(f.state.suppressEdits=!0),I=R(f,w)!=Qt}finally{f.state.suppressEdits=!1}return I})}function Dd(f,p,w){var b=f.getOption("configureMouse"),S=b?b(f,p,w):{};if(S.unit==null){var O=K?w.shiftKey&&w.metaKey:w.altKey;S.unit=O?"rectangle":p=="single"?"char":p=="double"?"word":"line"}return(S.extend==null||f.doc.extend)&&(S.extend=f.doc.extend||w.shiftKey),S.addNew==null&&(S.addNew=V?w.metaKey:w.ctrlKey),S.moveOnDrag==null&&(S.moveOnDrag=!(V?w.altKey:w.ctrlKey)),S}function em(f,p,w,b){s?setTimeout(Dt(np,f),0):f.curOp.focus=_t();var S=Dd(f,w,b),O=f.doc.sel,R;f.options.dragDrop&&ee&&!f.isReadOnly()&&w=="single"&&(R=O.contains(p))>-1&&(Be((R=O.ranges[R]).from(),p)<0||p.xRel>0)&&(Be(R.to(),p)>0||p.xRel<0)?nm(f,b,p,S):rm(f,b,p,S)}function nm(f,p,w,b){var S=f.display,O=!1,R=dr(f,function(Y){c&&(S.scroller.draggable=!1),f.state.draggingText=!1,f.state.delayingBlurEvent&&(f.hasFocus()?f.state.delayingBlurEvent=!1:gu(f)),fe(S.wrapper.ownerDocument,"mouseup",R),fe(S.wrapper.ownerDocument,"mousemove",I),fe(S.scroller,"dragstart",H),fe(S.scroller,"drop",R),O||(sn(Y),b.addNew||Tu(f.doc,w,null,null,b.extend),c&&!y||s&&u==9?setTimeout(function(){S.wrapper.ownerDocument.body.focus({preventScroll:!0}),S.input.focus()},20):S.input.focus())}),I=function(Y){O=O||Math.abs(p.clientX-Y.clientX)+Math.abs(p.clientY-Y.clientY)>=10},H=function(){return O=!0};c&&(S.scroller.draggable=!0),f.state.draggingText=R,R.copy=!b.moveOnDrag,dt(S.wrapper.ownerDocument,"mouseup",R),dt(S.wrapper.ownerDocument,"mousemove",I),dt(S.scroller,"dragstart",H),dt(S.scroller,"drop",R),f.state.delayingBlurEvent=!0,setTimeout(function(){return S.input.focus()},20),S.scroller.dragDrop&&S.scroller.dragDrop()}function Bl(f,p,w){if(w=="char")return new En(p,p);if(w=="word")return f.findWordAt(p);if(w=="line")return new En(le(p.line,0),pe(f.doc,le(p.line+1,0)));var b=w(f,p);return new En(b.from,b.to)}function rm(f,p,w,b){s&&gu(f);var S=f.display,O=f.doc;sn(p);var R,I,H=O.sel,Y=H.ranges;if(b.addNew&&!b.extend?(I=O.sel.contains(w),I>-1?R=Y[I]:R=new En(w,w)):(R=O.sel.primary(),I=O.sel.primIndex),b.unit=="rectangle")b.addNew||(R=new En(w,w)),w=Cl(f,p,!0,!0),I=-1;else{var vt=Bl(f,w,b.unit);b.extend?R=yd(R,vt.anchor,vt.head,b.extend):R=vt}b.addNew?I==-1?(I=Y.length,Ur(O,mi(f,Y.concat([R]),I),{scroll:!1,origin:"*mouse"})):Y.length>1&&Y[I].empty()&&b.unit=="char"&&!b.extend?(Ur(O,mi(f,Y.slice(0,I).concat(Y.slice(I+1)),0),{scroll:!1,origin:"*mouse"}),H=O.sel):za(O,I,R,be):(I=0,Ur(O,new _o([R],0),be),H=O.sel);var bt=w;function It(_e){if(Be(bt,_e)!=0)if(bt=_e,b.unit=="rectangle"){for(var Ae=[],ze=f.options.tabSize,Ve=kt(Me(O,w.line).text,w.ch,ze),Qe=kt(Me(O,_e.line).text,_e.ch,ze),wn=Math.min(Ve,Qe),Vr=Math.max(Ve,Qe),Xn=Math.min(w.line,_e.line),Zi=Math.min(f.lastLine(),Math.max(w.line,_e.line));Xn<=Zi;Xn++){var yi=Me(O,Xn).text,pr=Ee(yi,wn,ze);wn==Vr?Ae.push(new En(le(Xn,pr),le(Xn,pr))):yi.length>pr&&Ae.push(new En(le(Xn,pr),le(Xn,Ee(yi,Vr,ze))))}Ae.length||Ae.push(new En(w,w)),Ur(O,mi(f,H.ranges.slice(0,I).concat(Ae),I),{origin:"*mouse",scroll:!1}),f.scrollIntoView(_e)}else{var li=R,Jr=Bl(f,_e,b.unit),Fn=li.anchor,fn;Be(Jr.anchor,Fn)>0?(fn=Jr.head,Fn=Jt(li.from(),Jr.anchor)):(fn=Jr.anchor,Fn=wt(li.to(),Jr.head));var er=H.ranges.slice(0);er[I]=Zo(f,new En(pe(O,Fn),fn)),Ur(O,mi(f,er,I),be)}}var Pt=S.wrapper.getBoundingClientRect(),Gt=0;function Yt(_e){var Ae=++Gt,ze=Cl(f,_e,!0,b.unit=="rectangle");if(ze)if(Be(ze,bt)!=0){f.curOp.focus=_t(),It(ze);var Ve=Yo(S,O);(ze.line>=Ve.to||ze.line<Ve.from)&&setTimeout(dr(f,function(){Gt==Ae&&Yt(_e)}),150)}else{var Qe=_e.clientY<Pt.top?-20:_e.clientY>Pt.bottom?20:0;Qe&&setTimeout(dr(f,function(){Gt==Ae&&(S.scroller.scrollTop+=Qe,Yt(_e))}),50)}}function ve(_e){f.state.selectingText=!1,Gt=1/0,_e&&(sn(_e),S.input.focus()),fe(S.wrapper.ownerDocument,"mousemove",Te),fe(S.wrapper.ownerDocument,"mouseup",ke),O.history.lastSelOrigin=null}var Te=dr(f,function(_e){_e.buttons===0||!Lt(_e)?ve(_e):Yt(_e)}),ke=dr(f,ve);f.state.selectingText=ke,dt(S.wrapper.ownerDocument,"mousemove",Te),dt(S.wrapper.ownerDocument,"mouseup",ke)}function Zo(f,p){var w=p.anchor,b=p.head,S=Me(f.doc,w.line);if(Be(w,b)==0&&w.sticky==b.sticky)return p;var O=B(S);if(!O)return p;var R=A(O,w.ch,w.sticky),I=O[R];if(I.from!=w.ch&&I.to!=w.ch)return p;var H=R+(I.from==w.ch==(I.level!=1)?0:1);if(H==0||H==O.length)return p;var Y;if(b.line!=w.line)Y=(b.line-w.line)*(f.doc.direction=="ltr"?1:-1)>0;else{var vt=A(O,b.ch,b.sticky),bt=vt-R||(b.ch-w.ch)*(I.level==1?-1:1);vt==H-1||vt==H?Y=bt<0:Y=bt>0}var It=O[H+(Y?-1:0)],Pt=Y==(It.level==1),Gt=Pt?It.from:It.to,Yt=Pt?"after":"before";return w.ch==Gt&&w.sticky==Yt?p:new En(new le(w.line,Gt,Yt),b)}function ba(f,p,w,b){var S,O;if(p.touches)S=p.touches[0].clientX,O=p.touches[0].clientY;else try{S=p.clientX,O=p.clientY}catch{return!1}if(S>=Math.floor(f.display.gutters.getBoundingClientRect().right))return!1;b&&sn(p);var R=f.display,I=R.lineDiv.getBoundingClientRect();if(O>I.bottom||!en(f,w))return Lr(p);O-=I.top-R.viewOffset;for(var H=0;H<f.display.gutterSpecs.length;++H){var Y=R.gutters.childNodes[H];if(Y&&Y.getBoundingClientRect().right>=S){var vt=kn(f.doc,O),bt=f.display.gutterSpecs[H];return de(f,w,f,vt,bt.className,p),Lr(p)}}}function qa(f,p){return ba(f,p,"gutterClick",!0)}function Dp(f,p){vi(f.display,p)||ol(f,p)||ae(f,p,"contextmenu")||st||f.display.input.onContextMenu(p)}function ol(f,p){return en(f,"gutterContextMenu")?ba(f,p,"gutterContextMenu",!1):!1}function Ka(f){f.display.wrapper.className=f.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+f.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Pc(f)}var ar={toString:function(){return"CodeMirror.Init"}},sf={},Du={};function Pp(f){var p=f.optionHandlers;function w(b,S,O,R){f.defaults[b]=S,O&&(p[b]=R?function(I,H,Y){Y!=ar&&O(I,H,Y)}:O)}f.defineOption=w,f.Init=ar,w("value","",function(b,S){return b.setValue(S)},!0),w("mode",null,function(b,S){b.doc.modeOption=S,Wc(b)},!0),w("indentUnit",2,Wc,!0),w("indentWithTabs",!1),w("smartIndent",!0),w("tabSize",4,function(b){xu(b),Pc(b),Ei(b)},!0),w("lineSeparator",null,function(b,S){if(b.doc.lineSep=S,!!S){var O=[],R=b.doc.first;b.doc.iter(function(H){for(var Y=0;;){var vt=H.text.indexOf(S,Y);if(vt==-1)break;Y=vt+S.length,O.push(le(R,vt))}R++});for(var I=O.length-1;I>=0;I--)Yr(b.doc,S,O[I],le(O[I].line,O[I].ch+S.length))}}),w("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(b,S,O){b.state.specialChars=new RegExp(S.source+(S.test("	")?"":"|	"),"g"),O!=ar&&b.refresh()}),w("specialCharPlaceholder",Gf,function(b){return b.refresh()},!0),w("electricChars",!0),w("inputStyle",F?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),w("spellcheck",!1,function(b,S){return b.getInputField().spellcheck=S},!0),w("autocorrect",!1,function(b,S){return b.getInputField().autocorrect=S},!0),w("autocapitalize",!1,function(b,S){return b.getInputField().autocapitalize=S},!0),w("rtlMoveVisually",!Z),w("wholeLineUpdateBefore",!0),w("theme","default",function(b){Ka(b),ms(b)},!0),w("keyMap","default",function(b,S,O){var R=ku(S),I=O!=ar&&ku(O);I&&I.detach&&I.detach(b,R),R.attach&&R.attach(b,I||null)}),w("extraKeys",null),w("configureMouse",null),w("lineWrapping",!1,om,!0),w("gutters",[],function(b,S){b.display.gutterSpecs=kr(S,b.options.lineNumbers),ms(b)},!0),w("fixedGutter",!0,function(b,S){b.display.gutters.style.left=S?sd(b.display)+"px":"0",b.refresh()},!0),w("coverGutterNextToScrollbar",!1,function(b){return Gs(b)},!0),w("scrollbarStyle","native",function(b){fr(b),Gs(b),b.display.scrollbars.setScrollTop(b.doc.scrollTop),b.display.scrollbars.setScrollLeft(b.doc.scrollLeft)},!0),w("lineNumbers",!1,function(b,S){b.display.gutterSpecs=kr(b.options.gutters,S),ms(b)},!0),w("firstLineNumber",1,ms,!0),w("lineNumberFormatter",function(b){return b},ms,!0),w("showCursorWhenSelecting",!1,Va,!0),w("resetSelectionOnContextMenu",!0),w("lineWiseCopyCut",!0),w("pasteLinesPerSelection",!0),w("selectionsMayTouch",!1),w("readOnly",!1,function(b,S){S=="nocursor"&&(mu(b),b.display.input.blur()),b.display.input.readOnlyChanged(S)}),w("screenReaderLabel",null,function(b,S){S=S===""?null:S,b.display.input.screenReaderLabelChanged(S)}),w("disableInput",!1,function(b,S){S||b.display.input.reset()},!0),w("dragDrop",!0,im),w("allowDropFileTypes",null),w("cursorBlinkRate",530),w("cursorScrollMargin",0),w("cursorHeight",1,Va,!0),w("singleCursorHeightPerLine",!0,Va,!0),w("workTime",100),w("workDelay",100),w("flattenSpans",!0,xu,!0),w("addModeClass",!1,xu,!0),w("pollInterval",100),w("undoDepth",200,function(b,S){return b.doc.history.undoDepth=S}),w("historyEventDelay",1250),w("viewportMargin",10,function(b){return b.refresh()},!0),w("maxHighlightLength",1e4,xu,!0),w("moveInputWithCursor",!0,function(b,S){S||b.display.input.resetPosition()}),w("tabindex",null,function(b,S){return b.display.input.getField().tabIndex=S||""}),w("autofocus",null),w("direction","ltr",function(b,S){return b.doc.setDirection(S)},!0),w("phrases",null)}function im(f,p,w){var b=w&&w!=ar;if(!p!=!b){var S=f.display.dragFunctions,O=p?dt:fe;O(f.display.scroller,"dragstart",S.start),O(f.display.scroller,"dragenter",S.enter),O(f.display.scroller,"dragover",S.over),O(f.display.scroller,"dragleave",S.leave),O(f.display.scroller,"drop",S.drop)}}function om(f){f.options.lineWrapping?(Ot(f.display.wrapper,"CodeMirror-wrap"),f.display.sizer.style.minWidth="",f.display.sizerWidth=null):(nt(f.display.wrapper,"CodeMirror-wrap"),Ls(f)),tp(f),Ei(f),Pc(f),setTimeout(function(){return Gs(f)},100)}function Ln(f,p){var w=this;if(!(this instanceof Ln))return new Ln(f,p);this.options=p=p?yt(p):{},yt(sf,p,!1);var b=p.value;typeof b=="string"?b=new Di(b,p.mode,null,p.lineSeparator,p.direction):p.mode&&(b.modeOption=p.mode),this.doc=b;var S=new Ln.inputStyles[p.inputStyle](this),O=this.display=new zc(f,b,S,p);O.wrapper.CodeMirror=this,Ka(this),p.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),fr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Mt,keySeq:null,specialChars:null},p.autofocus&&!F&&O.input.focus(),s&&u<11&&setTimeout(function(){return w.display.input.reset(!0)},20),Pd(this),Wg(),xo(this),this.curOp.forceUpdate=!0,cp(this,b),p.autofocus&&!F||this.hasFocus()?setTimeout(function(){w.hasFocus()&&!w.state.focused&&Ks(w)},20):mu(this);for(var R in Du)Du.hasOwnProperty(R)&&Du[R](this,p[R],ar);Ig(this),p.finishInit&&p.finishInit(this);for(var I=0;I<Nd.length;++I)Nd[I](this);Mi(this),c&&p.lineWrapping&&getComputedStyle(O.lineDiv).textRendering=="optimizelegibility"&&(O.lineDiv.style.textRendering="auto")}Ln.defaults=sf,Ln.optionHandlers=Du;function Pd(f){var p=f.display;dt(p.scroller,"mousedown",dr(f,of)),s&&u<11?dt(p.scroller,"dblclick",dr(f,function(H){if(!ae(f,H)){var Y=Cl(f,H);if(!(!Y||qa(f,H)||vi(f.display,H))){sn(H);var vt=f.findWordAt(Y);Tu(f.doc,vt.anchor,vt.head)}}})):dt(p.scroller,"dblclick",function(H){return ae(f,H)||sn(H)}),dt(p.scroller,"contextmenu",function(H){return Dp(f,H)}),dt(p.input.getField(),"contextmenu",function(H){p.scroller.contains(H.target)||Dp(f,H)});var w,b={end:0};function S(){p.activeTouch&&(w=setTimeout(function(){return p.activeTouch=null},1e3),b=p.activeTouch,b.end=+new Date)}function O(H){if(H.touches.length!=1)return!1;var Y=H.touches[0];return Y.radiusX<=1&&Y.radiusY<=1}function R(H,Y){if(Y.left==null)return!0;var vt=Y.left-H.left,bt=Y.top-H.top;return vt*vt+bt*bt>20*20}dt(p.scroller,"touchstart",function(H){if(!ae(f,H)&&!O(H)&&!qa(f,H)){p.input.ensurePolled(),clearTimeout(w);var Y=+new Date;p.activeTouch={start:Y,moved:!1,prev:Y-b.end<=300?b:null},H.touches.length==1&&(p.activeTouch.left=H.touches[0].pageX,p.activeTouch.top=H.touches[0].pageY)}}),dt(p.scroller,"touchmove",function(){p.activeTouch&&(p.activeTouch.moved=!0)}),dt(p.scroller,"touchend",function(H){var Y=p.activeTouch;if(Y&&!vi(p,H)&&Y.left!=null&&!Y.moved&&new Date-Y.start<300){var vt=f.coordsChar(p.activeTouch,"page"),bt;!Y.prev||R(Y,Y.prev)?bt=new En(vt,vt):!Y.prev.prev||R(Y,Y.prev.prev)?bt=f.findWordAt(vt):bt=new En(le(vt.line,0),pe(f.doc,le(vt.line+1,0))),f.setSelection(bt.anchor,bt.head),f.focus(),sn(H)}S()}),dt(p.scroller,"touchcancel",S),dt(p.scroller,"scroll",function(){p.scroller.clientHeight&&(Ai(f,p.scroller.scrollTop),Xi(f,p.scroller.scrollLeft,!0),de(f,"scroll",f))}),dt(p.scroller,"mousewheel",function(H){return sp(f,H)}),dt(p.scroller,"DOMMouseScroll",function(H){return sp(f,H)}),dt(p.wrapper,"scroll",function(){return p.wrapper.scrollTop=p.wrapper.scrollLeft=0}),p.dragFunctions={enter:function(H){ae(f,H)||ot(H)},over:function(H){ae(f,H)||(zg(f,H),ot(H))},start:function(H){return xp(f,H)},drop:dr(f,Hg),leave:function(H){ae(f,H)||Sp(f)}};var I=p.input.getField();dt(I,"keyup",function(H){return Mp.call(f,H)}),dt(I,"keydown",dr(f,tf)),dt(I,"keypress",dr(f,ef)),dt(I,"focus",function(H){return Ks(f,H)}),dt(I,"blur",function(H){return mu(f,H)})}var Nd=[];Ln.defineInitHook=function(f){return Nd.push(f)};function Pu(f,p,w,b){var S=f.doc,O;w==null&&(w="add"),w=="smart"&&(S.mode.indent?O=ha(f,p).state:w="prev");var R=f.options.tabSize,I=Me(S,p),H=kt(I.text,null,R);I.stateAfter&&(I.stateAfter=null);var Y=I.text.match(/^\s*/)[0],vt;if(!b&&!/\S/.test(I.text))vt=0,w="not";else if(w=="smart"&&(vt=S.mode.indent(O,I.text.slice(Y.length),I.text),vt==Qt||vt>150)){if(!b)return;w="prev"}w=="prev"?p>S.first?vt=kt(Me(S,p-1).text,null,R):vt=0:w=="add"?vt=H+f.options.indentUnit:w=="subtract"?vt=H-f.options.indentUnit:typeof w=="number"&&(vt=H+w),vt=Math.max(0,vt);var bt="",It=0;if(f.options.indentWithTabs)for(var Pt=Math.floor(vt/R);Pt;--Pt)It+=R,bt+="	";if(It<vt&&(bt+=Ke(vt-It)),bt!=Y)return Yr(S,bt,le(p,0),le(p,Y.length),"+input"),I.stateAfter=null,!0;for(var Gt=0;Gt<S.sel.ranges.length;Gt++){var Yt=S.sel.ranges[Gt];if(Yt.head.line==p&&Yt.head.ch<Y.length){var ve=le(p,Y.length);za(S,Gt,new En(ve,ve));break}}}var Qo=null;function Ul(f){Qo=f}function Rd(f,p,w,b,S){var O=f.doc;f.display.shift=!1,b||(b=O.sel);var R=+new Date-200,I=S=="paste"||f.state.pasteIncoming>R,H=Sn(p),Y=null;if(I&&b.ranges.length>1)if(Qo&&Qo.text.join(`
`)==p){if(b.ranges.length%Qo.text.length==0){Y=[];for(var vt=0;vt<Qo.text.length;vt++)Y.push(O.splitLines(Qo.text[vt]))}}else H.length==b.ranges.length&&f.options.pasteLinesPerSelection&&(Y=Ut(H,function(Te){return[Te]}));for(var bt=f.curOp.updateInput,It=b.ranges.length-1;It>=0;It--){var Pt=b.ranges[It],Gt=Pt.from(),Yt=Pt.to();Pt.empty()&&(w&&w>0?Gt=le(Gt.line,Gt.ch-w):f.state.overwrite&&!I?Yt=le(Yt.line,Math.min(Me(O,Yt.line).text.length,Yt.ch+De(H).length)):I&&Qo&&Qo.lineWise&&Qo.text.join(`
`)==H.join(`
`)&&(Gt=Yt=le(Gt.line,0)));var ve={from:Gt,to:Yt,text:Y?Y[It%Y.length]:H,origin:S||(I?"paste":f.state.cutIncoming>R?"cut":"+input")};Pl(f.doc,ve),cr(f,"inputRead",f,ve)}p&&!I&&Np(f,p),ga(f),f.curOp.updateInput<2&&(f.curOp.updateInput=bt),f.curOp.typing=!0,f.state.pasteIncoming=f.state.cutIncoming=-1}function Ld(f,p){var w=f.clipboardData&&f.clipboardData.getData("Text");if(w)return f.preventDefault(),!p.isReadOnly()&&!p.options.disableInput&&Ji(p,function(){return Rd(p,w,0,null,"paste")}),!0}function Np(f,p){if(!(!f.options.electricChars||!f.options.smartIndent))for(var w=f.doc.sel,b=w.ranges.length-1;b>=0;b--){var S=w.ranges[b];if(!(S.head.ch>100||b&&w.ranges[b-1].head.line==S.head.line)){var O=f.getModeAt(S.head),R=!1;if(O.electricChars){for(var I=0;I<O.electricChars.length;I++)if(p.indexOf(O.electricChars.charAt(I))>-1){R=Pu(f,S.head.line,"smart");break}}else O.electricInput&&O.electricInput.test(Me(f.doc,S.head.line).text.slice(0,S.head.ch))&&(R=Pu(f,S.head.line,"smart"));R&&cr(f,"electricInput",f,S.head.line)}}}function Rp(f){for(var p=[],w=[],b=0;b<f.doc.sel.ranges.length;b++){var S=f.doc.sel.ranges[b].head.line,O={anchor:le(S,0),head:le(S+1,0)};w.push(O),p.push(f.getRange(O.anchor,O.head))}return{text:p,ranges:w}}function am(f,p,w,b){f.setAttribute("autocorrect",w?"":"off"),f.setAttribute("autocapitalize",b?"":"off"),f.setAttribute("spellcheck",!!p)}function Lp(){var f=ft("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),p=ft("div",[f],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return c?f.style.width="1000px":f.setAttribute("wrap","off"),E&&(f.style.border="1px solid black"),am(f),p}function si(f){var p=f.optionHandlers,w=f.helpers={};f.prototype={constructor:f,focus:function(){window.focus(),this.display.input.focus()},setOption:function(b,S){var O=this.options,R=O[b];O[b]==S&&b!="mode"||(O[b]=S,p.hasOwnProperty(b)&&dr(this,p[b])(this,S,R),de(this,"optionChange",this,b))},getOption:function(b){return this.options[b]},getDoc:function(){return this.doc},addKeyMap:function(b,S){this.state.keyMaps[S?"push":"unshift"](ku(b))},removeKeyMap:function(b){for(var S=this.state.keyMaps,O=0;O<S.length;++O)if(S[O]==b||S[O].name==b)return S.splice(O,1),!0},addOverlay:ii(function(b,S){var O=b.token?b:f.getMode(this.options,b);if(O.startState)throw new Error("Overlays may not be stateful.");ce(this.state.overlays,{mode:O,modeSpec:b,opaque:S&&S.opaque,priority:S&&S.priority||0},function(R){return R.priority}),this.state.modeGen++,Ei(this)}),removeOverlay:ii(function(b){for(var S=this.state.overlays,O=0;O<S.length;++O){var R=S[O].modeSpec;if(R==b||typeof b=="string"&&R.name==b){S.splice(O,1),this.state.modeGen++,Ei(this);return}}}),indentLine:ii(function(b,S,O){typeof S!="string"&&typeof S!="number"&&(S==null?S=this.options.smartIndent?"smart":"prev":S=S?"add":"subtract"),_r(this.doc,b)&&Pu(this,b,S,O)}),indentSelection:ii(function(b){for(var S=this.doc.sel.ranges,O=-1,R=0;R<S.length;R++){var I=S[R];if(I.empty())I.head.line>O&&(Pu(this,I.head.line,b,!0),O=I.head.line,R==this.doc.sel.primIndex&&ga(this));else{var H=I.from(),Y=I.to(),vt=Math.max(O,H.line);O=Math.min(this.lastLine(),Y.line-(Y.ch?0:1))+1;for(var bt=vt;bt<O;++bt)Pu(this,bt,b);var It=this.doc.sel.ranges;H.ch==0&&S.length==It.length&&It[R].from().ch>0&&za(this.doc,R,new En(H,It[R].to()),ne)}}}),getTokenAt:function(b,S){return fs(this,b,S)},getLineTokens:function(b,S){return fs(this,le(b),S,!0)},getTokenTypeAt:function(b){b=pe(this.doc,b);var S=$r(this,Me(this.doc,b.line)),O=0,R=(S.length-1)/2,I=b.ch,H;if(I==0)H=S[2];else for(;;){var Y=O+R>>1;if((Y?S[Y*2-1]:0)>=I)R=Y;else if(S[Y*2+1]<I)O=Y+1;else{H=S[Y*2+2];break}}var vt=H?H.indexOf("overlay "):-1;return vt<0?H:vt==0?null:H.slice(0,vt-1)},getModeAt:function(b){var S=this.doc.mode;return S.innerMode?f.innerMode(S,this.getTokenAt(b).state).mode:S},getHelper:function(b,S){return this.getHelpers(b,S)[0]},getHelpers:function(b,S){var O=[];if(!w.hasOwnProperty(S))return O;var R=w[S],I=this.getModeAt(b);if(typeof I[S]=="string")R[I[S]]&&O.push(R[I[S]]);else if(I[S])for(var H=0;H<I[S].length;H++){var Y=R[I[S][H]];Y&&O.push(Y)}else I.helperType&&R[I.helperType]?O.push(R[I.helperType]):R[I.name]&&O.push(R[I.name]);for(var vt=0;vt<R._global.length;vt++){var bt=R._global[vt];bt.pred(I,this)&&Kt(O,bt.val)==-1&&O.push(bt.val)}return O},getStateAfter:function(b,S){var O=this.doc;return b=oe(O,b??O.first+O.size-1),ha(this,b+1,S).state},cursorCoords:function(b,S){var O,R=this.doc.sel.primary();return b==null?O=R.head:typeof b=="object"?O=pe(this.doc,b):O=b?R.from():R.to(),go(this,O,S||"page")},charCoords:function(b,S){return Rc(this,pe(this.doc,b),S||"page")},coordsChar:function(b,S){return b=Zh(this,b,S||"page"),Lc(this,b.left,b.top)},lineAtHeight:function(b,S){return b=Zh(this,{top:b,left:0},S||"page").top,kn(this.doc,b+this.display.viewOffset)},heightAtLine:function(b,S,O){var R=!1,I;if(typeof b=="number"){var H=this.doc.first+this.doc.size-1;b<this.doc.first?b=this.doc.first:b>H&&(b=H,R=!0),I=Me(this.doc,b)}else I=b;return Nc(this,I,{top:0,left:0},S||"page",O||R).top+(R?this.doc.height-Gi(I):0)},defaultTextHeight:function(){return $o(this.display)},defaultCharWidth:function(){return _l(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(b,S,O,R,I){var H=this.display;b=go(this,pe(this.doc,b));var Y=b.bottom,vt=b.left;if(S.style.position="absolute",S.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(S),H.sizer.appendChild(S),R=="over")Y=b.top;else if(R=="above"||R=="near"){var bt=Math.max(H.wrapper.clientHeight,this.doc.height),It=Math.max(H.sizer.clientWidth,H.lineSpace.clientWidth);(R=="above"||b.bottom+S.offsetHeight>bt)&&b.top>S.offsetHeight?Y=b.top-S.offsetHeight:b.bottom+S.offsetHeight<=bt&&(Y=b.bottom),vt+S.offsetWidth>It&&(vt=It-S.offsetWidth)}S.style.top=Y+"px",S.style.left=S.style.right="",I=="right"?(vt=H.sizer.clientWidth-S.offsetWidth,S.style.right="0px"):(I=="left"?vt=0:I=="middle"&&(vt=(H.sizer.clientWidth-S.offsetWidth)/2),S.style.left=vt+"px"),O&&El(this,{left:vt,top:Y,right:vt+S.offsetWidth,bottom:Y+S.offsetHeight})},triggerOnKeyDown:ii(tf),triggerOnKeyPress:ii(ef),triggerOnKeyUp:Mp,triggerOnMouseDown:ii(of),execCommand:function(b){if(Xc.hasOwnProperty(b))return Xc[b].call(null,this)},triggerElectric:ii(function(b){Np(this,b)}),findPosH:function(b,S,O,R){var I=1;S<0&&(I=-1,S=-S);for(var H=pe(this.doc,b),Y=0;Y<S&&(H=Xr(this.doc,H,I,O,R),!H.hitSide);++Y);return H},moveH:ii(function(b,S){var O=this;this.extendSelectionsBy(function(R){return O.display.shift||O.doc.extend||R.empty()?Xr(O.doc,R.head,b,S,O.options.rtlMoveVisually):b<0?R.from():R.to()},Pe)}),deleteH:ii(function(b,S){var O=this.doc.sel,R=this.doc;O.somethingSelected()?R.replaceSelection("",null,"+delete"):Il(this,function(I){var H=Xr(R,I.head,b,S,!1);return b<0?{from:H,to:I.head}:{from:I.head,to:H}})}),findPosV:function(b,S,O,R){var I=1,H=R;S<0&&(I=-1,S=-S);for(var Y=pe(this.doc,b),vt=0;vt<S;++vt){var bt=go(this,Y,"div");if(H==null?H=bt.left:bt.left=H,Y=jp(this,bt,I,O),Y.hitSide)break}return Y},moveV:ii(function(b,S){var O=this,R=this.doc,I=[],H=!this.display.shift&&!R.extend&&R.sel.somethingSelected();if(R.extendSelectionsBy(function(vt){if(H)return b<0?vt.from():vt.to();var bt=go(O,vt.head,"div");vt.goalColumn!=null&&(bt.left=vt.goalColumn),I.push(bt.left);var It=jp(O,bt,b,S);return S=="page"&&vt==R.sel.primary()&&Uc(O,Rc(O,It,"div").top-bt.top),It},Pe),I.length)for(var Y=0;Y<R.sel.ranges.length;Y++)R.sel.ranges[Y].goalColumn=I[Y]}),findWordAt:function(b){var S=this.doc,O=Me(S,b.line).text,R=b.ch,I=b.ch;if(O){var H=this.getHelper(b,"wordChars");(b.sticky=="before"||I==O.length)&&R?--R:++I;for(var Y=O.charAt(R),vt=q(Y,H)?function(bt){return q(bt,H)}:/\s/.test(Y)?function(bt){return/\s/.test(bt)}:function(bt){return!/\s/.test(bt)&&!q(bt)};R>0&&vt(O.charAt(R-1));)--R;for(;I<O.length&&vt(O.charAt(I));)++I}return new En(le(b.line,R),le(b.line,I))},toggleOverwrite:function(b){b!=null&&b==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Ot(this.display.cursorDiv,"CodeMirror-overwrite"):nt(this.display.cursorDiv,"CodeMirror-overwrite"),de(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==_t()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:ii(function(b,S){Fa(this,b,S)}),getScrollInfo:function(){var b=this.display.scroller;return{left:b.scrollLeft,top:b.scrollTop,height:b.scrollHeight-Yi(this)-this.display.barHeight,width:b.scrollWidth-Yi(this)-this.display.barWidth,clientHeight:z(this),clientWidth:Ba(this)}},scrollIntoView:ii(function(b,S){b==null?(b={from:this.doc.sel.primary().head,to:null},S==null&&(S=this.options.cursorScrollMargin)):typeof b=="number"?b={from:le(b,0),to:null}:b.from==null&&(b={from:b,to:null}),b.to||(b.to=b.from),b.margin=S||0,b.from.line!=null?fd(this,b):yo(this,b.from,b.to,b.margin)}),setSize:ii(function(b,S){var O=this,R=function(H){return typeof H=="number"||/^\d+$/.test(String(H))?H+"px":H};b!=null&&(this.display.wrapper.style.width=R(b)),S!=null&&(this.display.wrapper.style.height=R(S)),this.options.lineWrapping&&Mg(this);var I=this.display.viewFrom;this.doc.iter(I,this.display.viewTo,function(H){if(H.widgets){for(var Y=0;Y<H.widgets.length;Y++)if(H.widgets[Y].noHScroll){Ua(O,I,"widget");break}}++I}),this.curOp.forceUpdate=!0,de(this,"refresh",this)}),operation:function(b){return Ji(this,b)},startOperation:function(){return xo(this)},endOperation:function(){return Mi(this)},refresh:ii(function(){var b=this.display.cachedTextHeight;Ei(this),this.curOp.forceUpdate=!0,Pc(this),Fa(this,this.doc.scrollLeft,this.doc.scrollTop),pd(this.display),(b==null||Math.abs(b-$o(this.display))>.5||this.options.lineWrapping)&&tp(this),de(this,"refresh",this)}),swapDoc:ii(function(b){var S=this.doc;return S.cm=null,this.state.selectingText&&this.state.selectingText(),cp(this,b),Pc(this),this.display.input.reset(),Fa(this,b.scrollLeft,b.scrollTop),this.curOp.forceScroll=!0,cr(this,"swapDoc",this,S),S}),phrase:function(b){var S=this.options.phrases;return S&&Object.prototype.hasOwnProperty.call(S,b)?S[b]:b},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},dn(f),f.registerHelper=function(b,S,O){w.hasOwnProperty(b)||(w[b]=f[b]={_global:[]}),w[b][S]=O},f.registerGlobalHelper=function(b,S,O,R){f.registerHelper(b,S,R),w[b]._global.push({pred:O,val:R})}}function Xr(f,p,w,b,S){var O=p,R=w,I=Me(f,p.line),H=S&&f.direction=="rtl"?-w:w;function Y(){var ke=p.line+H;return ke<f.first||ke>=f.first+f.size?!1:(p=new le(ke,p.ch,p.sticky),I=Me(f,ke))}function vt(ke){var _e;if(b=="codepoint"){var Ae=I.text.charCodeAt(p.ch+(w>0?0:-1));if(isNaN(Ae))_e=null;else{var ze=w>0?Ae>=55296&&Ae<56320:Ae>=56320&&Ae<57343;_e=new le(p.line,Math.max(0,Math.min(I.text.length,p.ch+w*(ze?2:1))),-w)}}else S?_e=Gg(f.cm,I,p,w):_e=Yc(I,p,w);if(_e==null)if(!ke&&Y())p=Ad(S,f.cm,I,p.line,H);else return!1;else p=_e;return!0}if(b=="char"||b=="codepoint")vt();else if(b=="column")vt(!0);else if(b=="word"||b=="group")for(var bt=null,It=b=="group",Pt=f.cm&&f.cm.getHelper(p,"wordChars"),Gt=!0;!(w<0&&!vt(!Gt));Gt=!1){var Yt=I.text.charAt(p.ch)||`
`,ve=q(Yt,Pt)?"w":It&&Yt==`
`?"n":!It||/\s/.test(Yt)?null:"p";if(It&&!Gt&&!ve&&(ve="s"),bt&&bt!=ve){w<0&&(w=1,vt(),p.sticky="after");break}if(ve&&(bt=ve),w>0&&!vt(!Gt))break}var Te=wd(f,p,O,R,!0);return Ki(O,Te)&&(Te.hitSide=!0),Te}function jp(f,p,w,b){var S=f.doc,O=p.left,R;if(b=="page"){var I=Math.min(f.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),H=Math.max(I-.5*$o(f.display),3);R=(w>0?p.bottom:p.top)+w*H}else b=="line"&&(R=w>0?p.bottom+3:p.top-3);for(var Y;Y=Lc(f,O,R),!!Y.outside;){if(w<0?R<=0:R>=S.height){Y.hitSide=!0;break}R+=w*5}return Y}var jn=function(f){this.cm=f,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Mt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};jn.prototype.init=function(f){var p=this,w=this,b=w.cm,S=w.div=f.lineDiv;S.contentEditable=!0,am(S,b.options.spellcheck,b.options.autocorrect,b.options.autocapitalize);function O(I){for(var H=I.target;H;H=H.parentNode){if(H==S)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(H.className))break}return!1}dt(S,"paste",function(I){!O(I)||ae(b,I)||Ld(I,b)||u<=11&&setTimeout(dr(b,function(){return p.updateFromDOM()}),20)}),dt(S,"compositionstart",function(I){p.composing={data:I.data,done:!1}}),dt(S,"compositionupdate",function(I){p.composing||(p.composing={data:I.data,done:!1})}),dt(S,"compositionend",function(I){p.composing&&(I.data!=p.composing.data&&p.readFromDOMSoon(),p.composing.done=!0)}),dt(S,"touchstart",function(){return w.forceCompositionEnd()}),dt(S,"input",function(){p.composing||p.readFromDOMSoon()});function R(I){if(!(!O(I)||ae(b,I))){if(b.somethingSelected())Ul({lineWise:!1,text:b.getSelections()}),I.type=="cut"&&b.replaceSelection("",null,"cut");else if(b.options.lineWiseCopyCut){var H=Rp(b);Ul({lineWise:!0,text:H.text}),I.type=="cut"&&b.operation(function(){b.setSelections(H.ranges,0,ne),b.replaceSelection("",null,"cut")})}else return;if(I.clipboardData){I.clipboardData.clearData();var Y=Qo.text.join(`
`);if(I.clipboardData.setData("Text",Y),I.clipboardData.getData("Text")==Y){I.preventDefault();return}}var vt=Lp(),bt=vt.firstChild;b.display.lineSpace.insertBefore(vt,b.display.lineSpace.firstChild),bt.value=Qo.text.join(`
`);var It=_t();pt(bt),setTimeout(function(){b.display.lineSpace.removeChild(vt),It.focus(),It==S&&w.showPrimarySelection()},50)}}dt(S,"copy",R),dt(S,"cut",R)},jn.prototype.screenReaderLabelChanged=function(f){f?this.div.setAttribute("aria-label",f):this.div.removeAttribute("aria-label")},jn.prototype.prepareSelection=function(){var f=ld(this.cm,!1);return f.focus=_t()==this.div,f},jn.prototype.showSelection=function(f,p){!f||!this.cm.display.view.length||((f.focus||p)&&this.showPrimarySelection(),this.showMultipleSelections(f))},jn.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},jn.prototype.showPrimarySelection=function(){var f=this.getSelection(),p=this.cm,w=p.doc.sel.primary(),b=w.from(),S=w.to();if(p.display.viewTo==p.display.viewFrom||b.line>=p.display.viewTo||S.line<p.display.viewFrom){f.removeAllRanges();return}var O=Nu(p,f.anchorNode,f.anchorOffset),R=Nu(p,f.focusNode,f.focusOffset);if(!(O&&!O.bad&&R&&!R.bad&&Be(Jt(O,R),b)==0&&Be(wt(O,R),S)==0)){var I=p.display.view,H=b.line>=p.display.viewFrom&&Ip(p,b)||{node:I[0].measure.map[2],offset:0},Y=S.line<p.display.viewTo&&Ip(p,S);if(!Y){var vt=I[I.length-1].measure,bt=vt.maps?vt.maps[vt.maps.length-1]:vt.map;Y={node:bt[bt.length-1],offset:bt[bt.length-2]-bt[bt.length-3]}}if(!H||!Y){f.removeAllRanges();return}var It=f.rangeCount&&f.getRangeAt(0),Pt;try{Pt=St(H.node,H.offset,Y.offset,Y.node)}catch{}Pt&&(!e&&p.state.focused?(f.collapse(H.node,H.offset),Pt.collapsed||(f.removeAllRanges(),f.addRange(Pt))):(f.removeAllRanges(),f.addRange(Pt)),It&&f.anchorNode==null?f.addRange(It):e&&this.startGracePeriod()),this.rememberSelection()}},jn.prototype.startGracePeriod=function(){var f=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){f.gracePeriod=!1,f.selectionChanged()&&f.cm.operation(function(){return f.cm.curOp.selectionChanged=!0})},20)},jn.prototype.showMultipleSelections=function(f){$(this.cm.display.cursorDiv,f.cursors),$(this.cm.display.selectionDiv,f.selection)},jn.prototype.rememberSelection=function(){var f=this.getSelection();this.lastAnchorNode=f.anchorNode,this.lastAnchorOffset=f.anchorOffset,this.lastFocusNode=f.focusNode,this.lastFocusOffset=f.focusOffset},jn.prototype.selectionInEditor=function(){var f=this.getSelection();if(!f.rangeCount)return!1;var p=f.getRangeAt(0).commonAncestorContainer;return U(this.div,p)},jn.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||_t()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},jn.prototype.blur=function(){this.div.blur()},jn.prototype.getField=function(){return this.div},jn.prototype.supportsTouch=function(){return!0},jn.prototype.receivedFocus=function(){var f=this,p=this;this.selectionInEditor()?setTimeout(function(){return f.pollSelection()},20):Ji(this.cm,function(){return p.cm.curOp.selectionChanged=!0});function w(){p.cm.state.focused&&(p.pollSelection(),p.polling.set(p.cm.options.pollInterval,w))}this.polling.set(this.cm.options.pollInterval,w)},jn.prototype.selectionChanged=function(){var f=this.getSelection();return f.anchorNode!=this.lastAnchorNode||f.anchorOffset!=this.lastAnchorOffset||f.focusNode!=this.lastFocusNode||f.focusOffset!=this.lastFocusOffset},jn.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var f=this.getSelection(),p=this.cm;if(D&&v&&this.cm.display.gutterSpecs.length&&sm(f.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var w=Nu(p,f.anchorNode,f.anchorOffset),b=Nu(p,f.focusNode,f.focusOffset);w&&b&&Ji(p,function(){Ur(p.doc,Ha(w,b),ne),(w.bad||b.bad)&&(p.curOp.selectionChanged=!0)})}}},jn.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var f=this.cm,p=f.display,w=f.doc.sel.primary(),b=w.from(),S=w.to();if(b.ch==0&&b.line>f.firstLine()&&(b=le(b.line-1,Me(f.doc,b.line-1).length)),S.ch==Me(f.doc,S.line).text.length&&S.line<f.lastLine()&&(S=le(S.line+1,0)),b.line<p.viewFrom||S.line>p.viewTo-1)return!1;var O,R,I;b.line==p.viewFrom||(O=Ws(f,b.line))==0?(R=ln(p.view[0].line),I=p.view[0].node):(R=ln(p.view[O].line),I=p.view[O-1].node.nextSibling);var H=Ws(f,S.line),Y,vt;if(H==p.view.length-1?(Y=p.viewTo-1,vt=p.lineDiv.lastChild):(Y=ln(p.view[H+1].line)-1,vt=p.view[H+1].node.previousSibling),!I)return!1;for(var bt=f.doc.splitLines(jd(f,I,vt,R,Y)),It=jr(f.doc,le(R,0),le(Y,Me(f.doc,Y).text.length));bt.length>1&&It.length>1;)if(De(bt)==De(It))bt.pop(),It.pop(),Y--;else if(bt[0]==It[0])bt.shift(),It.shift(),R++;else break;for(var Pt=0,Gt=0,Yt=bt[0],ve=It[0],Te=Math.min(Yt.length,ve.length);Pt<Te&&Yt.charCodeAt(Pt)==ve.charCodeAt(Pt);)++Pt;for(var ke=De(bt),_e=De(It),Ae=Math.min(ke.length-(bt.length==1?Pt:0),_e.length-(It.length==1?Pt:0));Gt<Ae&&ke.charCodeAt(ke.length-Gt-1)==_e.charCodeAt(_e.length-Gt-1);)++Gt;if(bt.length==1&&It.length==1&&R==b.line)for(;Pt&&Pt>b.ch&&ke.charCodeAt(ke.length-Gt-1)==_e.charCodeAt(_e.length-Gt-1);)Pt--,Gt++;bt[bt.length-1]=ke.slice(0,ke.length-Gt).replace(/^\u200b+/,""),bt[0]=bt[0].slice(Pt).replace(/\u200b+$/,"");var ze=le(R,Pt),Ve=le(Y,It.length?De(It).length-Gt:0);if(bt.length>1||bt[0]||Be(ze,Ve))return Yr(f.doc,bt,ze,Ve,"+input"),!0},jn.prototype.ensurePolled=function(){this.forceCompositionEnd()},jn.prototype.reset=function(){this.forceCompositionEnd()},jn.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},jn.prototype.readFromDOMSoon=function(){var f=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(f.readDOMTimeout=null,f.composing)if(f.composing.done)f.composing=null;else return;f.updateFromDOM()},80))},jn.prototype.updateFromDOM=function(){var f=this;(this.cm.isReadOnly()||!this.pollContent())&&Ji(this.cm,function(){return Ei(f.cm)})},jn.prototype.setUneditable=function(f){f.contentEditable="false"},jn.prototype.onKeyPress=function(f){f.charCode==0||this.composing||(f.preventDefault(),this.cm.isReadOnly()||dr(this.cm,Rd)(this.cm,String.fromCharCode(f.charCode==null?f.keyCode:f.charCode),0))},jn.prototype.readOnlyChanged=function(f){this.div.contentEditable=String(f!="nocursor")},jn.prototype.onContextMenu=function(){},jn.prototype.resetPosition=function(){},jn.prototype.needsContentAttribute=!0;function Ip(f,p){var w=jt(f,p.line);if(!w||w.hidden)return null;var b=Me(f.doc,p.line),S=xt(w,b,p.line),O=B(b,f.doc.direction),R="left";if(O){var I=A(O,p.ch);R=I%2?"right":"left"}var H=Ye(S.map,p.ch,R);return H.offset=H.collapse=="right"?H.end:H.start,H}function sm(f){for(var p=f;p;p=p.parentNode)if(/CodeMirror-gutter-wrapper/.test(p.className))return!0;return!1}function Vl(f,p){return p&&(f.bad=!0),f}function jd(f,p,w,b,S){var O="",R=!1,I=f.doc.lineSeparator(),H=!1;function Y(Pt){return function(Gt){return Gt.id==Pt}}function vt(){R&&(O+=I,H&&(O+=I),R=H=!1)}function bt(Pt){Pt&&(vt(),O+=Pt)}function It(Pt){if(Pt.nodeType==1){var Gt=Pt.getAttribute("cm-text");if(Gt){bt(Gt);return}var Yt=Pt.getAttribute("cm-marker"),ve;if(Yt){var Te=f.findMarks(le(b,0),le(S+1,0),Y(+Yt));Te.length&&(ve=Te[0].find(0))&&bt(jr(f.doc,ve.from,ve.to).join(I));return}if(Pt.getAttribute("contenteditable")=="false")return;var ke=/^(pre|div|p|li|table|br)$/i.test(Pt.nodeName);if(!/^br$/i.test(Pt.nodeName)&&Pt.textContent.length==0)return;ke&&vt();for(var _e=0;_e<Pt.childNodes.length;_e++)It(Pt.childNodes[_e]);/^(pre|p)$/i.test(Pt.nodeName)&&(H=!0),ke&&(R=!0)}else Pt.nodeType==3&&bt(Pt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;It(p),p!=w;)p=p.nextSibling,H=!1;return O}function Nu(f,p,w){var b;if(p==f.display.lineDiv){if(b=f.display.lineDiv.childNodes[w],!b)return Vl(f.clipPos(le(f.display.viewTo-1)),!0);p=null,w=0}else for(b=p;;b=b.parentNode){if(!b||b==f.display.lineDiv)return null;if(b.parentNode&&b.parentNode==f.display.lineDiv)break}for(var S=0;S<f.display.view.length;S++){var O=f.display.view[S];if(O.node==b)return lm(O,p,w)}}function lm(f,p,w){var b=f.text.firstChild,S=!1;if(!p||!U(b,p))return Vl(le(ln(f.line),0),!0);if(p==b&&(S=!0,p=b.childNodes[w],w=0,!p)){var O=f.rest?De(f.rest):f.line;return Vl(le(ln(O),O.text.length),S)}var R=p.nodeType==3?p:null,I=p;for(!R&&p.childNodes.length==1&&p.firstChild.nodeType==3&&(R=p.firstChild,w&&(w=R.nodeValue.length));I.parentNode!=b;)I=I.parentNode;var H=f.measure,Y=H.maps;function vt(ve,Te,ke){for(var _e=-1;_e<(Y?Y.length:0);_e++)for(var Ae=_e<0?H.map:Y[_e],ze=0;ze<Ae.length;ze+=3){var Ve=Ae[ze+2];if(Ve==ve||Ve==Te){var Qe=ln(_e<0?f.line:f.rest[_e]),wn=Ae[ze]+ke;return(ke<0||Ve!=ve)&&(wn=Ae[ze+(ke?1:0)]),le(Qe,wn)}}}var bt=vt(R,I,w);if(bt)return Vl(bt,S);for(var It=I.nextSibling,Pt=R?R.nodeValue.length-w:0;It;It=It.nextSibling){if(bt=vt(It,It.firstChild,0),bt)return Vl(le(bt.line,bt.ch-Pt),S);Pt+=It.textContent.length}for(var Gt=I.previousSibling,Yt=w;Gt;Gt=Gt.previousSibling){if(bt=vt(Gt,Gt.firstChild,-1),bt)return Vl(le(bt.line,bt.ch+Yt),S);Yt+=Gt.textContent.length}}var hr=function(f){this.cm=f,this.prevInput="",this.pollingFast=!1,this.polling=new Mt,this.hasSelection=!1,this.composing=null};hr.prototype.init=function(f){var p=this,w=this,b=this.cm;this.createField(f);var S=this.textarea;f.wrapper.insertBefore(this.wrapper,f.wrapper.firstChild),E&&(S.style.width="0px"),dt(S,"input",function(){s&&u>=9&&p.hasSelection&&(p.hasSelection=null),w.poll()}),dt(S,"paste",function(R){ae(b,R)||Ld(R,b)||(b.state.pasteIncoming=+new Date,w.fastPoll())});function O(R){if(!ae(b,R)){if(b.somethingSelected())Ul({lineWise:!1,text:b.getSelections()});else if(b.options.lineWiseCopyCut){var I=Rp(b);Ul({lineWise:!0,text:I.text}),R.type=="cut"?b.setSelections(I.ranges,null,ne):(w.prevInput="",S.value=I.text.join(`
`),pt(S))}else return;R.type=="cut"&&(b.state.cutIncoming=+new Date)}}dt(S,"cut",O),dt(S,"copy",O),dt(f.scroller,"paste",function(R){if(!(vi(f,R)||ae(b,R))){if(!S.dispatchEvent){b.state.pasteIncoming=+new Date,w.focus();return}var I=new Event("paste");I.clipboardData=R.clipboardData,S.dispatchEvent(I)}}),dt(f.lineSpace,"selectstart",function(R){vi(f,R)||sn(R)}),dt(S,"compositionstart",function(){var R=b.getCursor("from");w.composing&&w.composing.range.clear(),w.composing={start:R,range:b.markText(R,b.getCursor("to"),{className:"CodeMirror-composing"})}}),dt(S,"compositionend",function(){w.composing&&(w.poll(),w.composing.range.clear(),w.composing=null)})},hr.prototype.createField=function(f){this.wrapper=Lp(),this.textarea=this.wrapper.firstChild},hr.prototype.screenReaderLabelChanged=function(f){f?this.textarea.setAttribute("aria-label",f):this.textarea.removeAttribute("aria-label")},hr.prototype.prepareSelection=function(){var f=this.cm,p=f.display,w=f.doc,b=ld(f);if(f.options.moveInputWithCursor){var S=go(f,w.sel.primary().head,"div"),O=p.wrapper.getBoundingClientRect(),R=p.lineDiv.getBoundingClientRect();b.teTop=Math.max(0,Math.min(p.wrapper.clientHeight-10,S.top+R.top-O.top)),b.teLeft=Math.max(0,Math.min(p.wrapper.clientWidth-10,S.left+R.left-O.left))}return b},hr.prototype.showSelection=function(f){var p=this.cm,w=p.display;$(w.cursorDiv,f.cursors),$(w.selectionDiv,f.selection),f.teTop!=null&&(this.wrapper.style.top=f.teTop+"px",this.wrapper.style.left=f.teLeft+"px")},hr.prototype.reset=function(f){if(!(this.contextMenuPending||this.composing)){var p=this.cm;if(p.somethingSelected()){this.prevInput="";var w=p.getSelection();this.textarea.value=w,p.state.focused&&pt(this.textarea),s&&u>=9&&(this.hasSelection=w)}else f||(this.prevInput=this.textarea.value="",s&&u>=9&&(this.hasSelection=null))}},hr.prototype.getField=function(){return this.textarea},hr.prototype.supportsTouch=function(){return!1},hr.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!F||_t()!=this.textarea))try{this.textarea.focus()}catch{}},hr.prototype.blur=function(){this.textarea.blur()},hr.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},hr.prototype.receivedFocus=function(){this.slowPoll()},hr.prototype.slowPoll=function(){var f=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){f.poll(),f.cm.state.focused&&f.slowPoll()})},hr.prototype.fastPoll=function(){var f=!1,p=this;p.pollingFast=!0;function w(){var b=p.poll();!b&&!f?(f=!0,p.polling.set(60,w)):(p.pollingFast=!1,p.slowPoll())}p.polling.set(20,w)},hr.prototype.poll=function(){var f=this,p=this.cm,w=this.textarea,b=this.prevInput;if(this.contextMenuPending||!p.state.focused||Pn(w)&&!b&&!this.composing||p.isReadOnly()||p.options.disableInput||p.state.keySeq)return!1;var S=w.value;if(S==b&&!p.somethingSelected())return!1;if(s&&u>=9&&this.hasSelection===S||V&&/[\uf700-\uf7ff]/.test(S))return p.display.input.reset(),!1;if(p.doc.sel==p.display.selForContextMenu){var O=S.charCodeAt(0);if(O==8203&&!b&&(b=""),O==8666)return this.reset(),this.cm.execCommand("undo")}for(var R=0,I=Math.min(b.length,S.length);R<I&&b.charCodeAt(R)==S.charCodeAt(R);)++R;return Ji(p,function(){Rd(p,S.slice(R),b.length-R,null,f.composing?"*compose":null),S.length>1e3||S.indexOf(`
`)>-1?w.value=f.prevInput="":f.prevInput=S,f.composing&&(f.composing.range.clear(),f.composing.range=p.markText(f.composing.start,p.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},hr.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},hr.prototype.onKeyPress=function(){s&&u>=9&&(this.hasSelection=null),this.fastPoll()},hr.prototype.onContextMenu=function(f){var p=this,w=p.cm,b=w.display,S=p.textarea;p.contextMenuPending&&p.contextMenuPending();var O=Cl(w,f),R=b.scroller.scrollTop;if(!O||m)return;var I=w.options.resetSelectionOnContextMenu;I&&w.doc.sel.contains(O)==-1&&dr(w,Ur)(w.doc,Ha(O),ne);var H=S.style.cssText,Y=p.wrapper.style.cssText,vt=p.wrapper.offsetParent.getBoundingClientRect();p.wrapper.style.cssText="position: static",S.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(f.clientY-vt.top-5)+"px; left: "+(f.clientX-vt.left-5)+`px;
      z-index: 1000; background: `+(s?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var bt;c&&(bt=window.scrollY),b.input.focus(),c&&window.scrollTo(null,bt),b.input.reset(),w.somethingSelected()||(S.value=p.prevInput=" "),p.contextMenuPending=Pt,b.selForContextMenu=w.doc.sel,clearTimeout(b.detectingSelectAll);function It(){if(S.selectionStart!=null){var Yt=w.somethingSelected(),ve=""+(Yt?S.value:"");S.value="",S.value=ve,p.prevInput=Yt?"":"",S.selectionStart=1,S.selectionEnd=ve.length,b.selForContextMenu=w.doc.sel}}function Pt(){if(p.contextMenuPending==Pt&&(p.contextMenuPending=!1,p.wrapper.style.cssText=Y,S.style.cssText=H,s&&u<9&&b.scrollbars.setScrollTop(b.scroller.scrollTop=R),S.selectionStart!=null)){(!s||s&&u<9)&&It();var Yt=0,ve=function(){b.selForContextMenu==w.doc.sel&&S.selectionStart==0&&S.selectionEnd>0&&p.prevInput==""?dr(w,xd)(w):Yt++<10?b.detectingSelectAll=setTimeout(ve,500):(b.selForContextMenu=null,b.input.reset())};b.detectingSelectAll=setTimeout(ve,200)}}if(s&&u>=9&&It(),st){ot(f);var Gt=function(){fe(window,"mouseup",Gt),setTimeout(Pt,20)};dt(window,"mouseup",Gt)}else setTimeout(Pt,50)},hr.prototype.readOnlyChanged=function(f){f||this.reset(),this.textarea.disabled=f=="nocursor",this.textarea.readOnly=!!f},hr.prototype.setUneditable=function(){},hr.prototype.needsContentAttribute=!1;function um(f,p){if(p=p?yt(p):{},p.value=f.value,!p.tabindex&&f.tabIndex&&(p.tabindex=f.tabIndex),!p.placeholder&&f.placeholder&&(p.placeholder=f.placeholder),p.autofocus==null){var w=_t();p.autofocus=w==f||f.getAttribute("autofocus")!=null&&w==document.body}function b(){f.value=I.getValue()}var S;if(f.form&&(dt(f.form,"submit",b),!p.leaveSubmitMethodAlone)){var O=f.form;S=O.submit;try{var R=O.submit=function(){b(),O.submit=S,O.submit(),O.submit=R}}catch{}}p.finishInit=function(H){H.save=b,H.getTextArea=function(){return f},H.toTextArea=function(){H.toTextArea=isNaN,b(),f.parentNode.removeChild(H.getWrapperElement()),f.style.display="",f.form&&(fe(f.form,"submit",b),!p.leaveSubmitMethodAlone&&typeof f.form.submit=="function"&&(f.form.submit=S))}},f.style.display="none";var I=Ln(function(H){return f.parentNode.insertBefore(H,f.nextSibling)},p);return I}function Bp(f){f.off=fe,f.on=dt,f.wheelEventPixels=Fb,f.Doc=Di,f.splitLines=Sn,f.countColumn=kt,f.findColumn=Ee,f.isWordChar=N,f.Pass=Qt,f.signal=de,f.Line=Gr,f.changeEnd=ma,f.scrollbarModel=ki,f.Pos=le,f.cmpPos=Be,f.modes=Wi,f.mimeModes=gn,f.resolveMode=br,f.getMode=He,f.modeExtensions=qr,f.extendMode=An,f.copyState=wr,f.startState=Sr,f.innerMode=xr,f.commands=Xc,f.keyMap=Eo,f.keyName=Op,f.isModifierKey=Tp,f.lookupKey=jl,f.normalizeKeyMap=$g,f.StringStream=pn,f.SharedTextMarker=Au,f.TextMarker=xs,f.LineWidget=nl,f.e_preventDefault=sn,f.e_stopPropagation=Un,f.e_stop=ot,f.addClass=Ot,f.contains=U,f.rmClass=nt,f.keyNames=To}Pp(Ln),si(Ln);var Up="iter insert remove copy getEditor constructor".split(" ");for(var Ru in Di.prototype)Di.prototype.hasOwnProperty(Ru)&&Kt(Up,Ru)<0&&(Ln.prototype[Ru]=function(f){return function(){return f.apply(this.doc,arguments)}}(Di.prototype[Ru]));return dn(Di),Ln.inputStyles={textarea:hr,contenteditable:jn},Ln.defineMode=function(f){!Ln.defaults.mode&&f!="null"&&(Ln.defaults.mode=f),ir.apply(this,arguments)},Ln.defineMIME=rn,Ln.defineMode("null",function(){return{token:function(f){return f.skipToEnd()}}}),Ln.defineMIME("text/plain","null"),Ln.defineExtension=function(f,p){Ln.prototype[f]=p},Ln.defineDocExtension=function(f,p){Di.prototype[f]=p},Ln.fromTextArea=um,Bp(Ln),Ln.version="5.63.0",Ln})},7389:(i,n,t)=>{(function(e){e(t(4408))})(function(e){e.defineMode("css",function(it,$){var ft=$.inline;$.propertyKeywords||($=e.resolveMode("text/css"));var lt=it.indentUnit,St=$.tokenHooks,U=$.documentTypes||{},_t=$.mediaTypes||{},Ot=$.mediaFeatures||{},zt=$.mediaValueKeywords||{},pt=$.propertyKeywords||{},Dt=$.nonStandardPropertyKeywords||{},yt=$.fontProperties||{},kt=$.counterDescriptors||{},Mt=$.colorKeywords||{},Kt=$.valueKeywords||{},Xt=$.allowNested,Qt=$.lineComment,ne=$.supportsAtComponent===!0,be=it.highlightNonStandardPropertyKeywords!==!1,Pe,Ee;function Oe(Q,gt){return Pe=gt,Q}function Ke(Q,gt){var Tt=Q.next();if(St[Tt]){var he=St[Tt](Q,gt);if(he!==!1)return he}if(Tt=="@")return Q.eatWhile(/[\w\\\-]/),Oe("def",Q.current());if(Tt=="="||(Tt=="~"||Tt=="|")&&Q.eat("="))return Oe(null,"compare");if(Tt=='"'||Tt=="'")return gt.tokenize=De(Tt),gt.tokenize(Q,gt);if(Tt=="#")return Q.eatWhile(/[\w\\\-]/),Oe("atom","hash");if(Tt=="!")return Q.match(/^\s*\w*/),Oe("keyword","important");if(/\d/.test(Tt)||Tt=="."&&Q.eat(/\d/))return Q.eatWhile(/[\w.%]/),Oe("number","unit");if(Tt==="-"){if(/[\d.]/.test(Q.peek()))return Q.eatWhile(/[\w.%]/),Oe("number","unit");if(Q.match(/^-[\w\\\-]*/))return Q.eatWhile(/[\w\\\-]/),Q.match(/^\s*:/,!1)?Oe("variable-2","variable-definition"):Oe("variable-2","variable");if(Q.match(/^\w+-/))return Oe("meta","meta")}else return/[,+>*\/]/.test(Tt)?Oe(null,"select-op"):Tt=="."&&Q.match(/^-?[_a-z][_a-z0-9-]*/i)?Oe("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(Tt)?Oe(null,Tt):Q.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(Q.current())&&(gt.tokenize=Ut),Oe("variable callee","variable")):/[\w\\\-]/.test(Tt)?(Q.eatWhile(/[\w\\\-]/),Oe("property","word")):Oe(null,null)}function De(Q){return function(gt,Tt){for(var he=!1,X;(X=gt.next())!=null;){if(X==Q&&!he){Q==")"&&gt.backUp(1);break}he=!he&&X=="\\"}return(X==Q||!he&&Q!=")")&&(Tt.tokenize=null),Oe("string","string")}}function Ut(Q,gt){return Q.next(),Q.match(/^\s*[\"\')]/,!1)?gt.tokenize=null:gt.tokenize=De(")"),Oe(null,"(")}function ce(Q,gt,Tt){this.type=Q,this.indent=gt,this.prev=Tt}function ie(Q,gt,Tt,he){return Q.context=new ce(Tt,gt.indentation()+(he===!1?0:lt),Q.context),Tt}function P(Q){return Q.context.prev&&(Q.context=Q.context.prev),Q.context.type}function k(Q,gt,Tt){return ut[Tt.context.type](Q,gt,Tt)}function N(Q,gt,Tt,he){for(var X=he||1;X>0;X--)Tt.context=Tt.context.prev;return k(Q,gt,Tt)}function q(Q){var gt=Q.current().toLowerCase();Kt.hasOwnProperty(gt)?Ee="atom":Mt.hasOwnProperty(gt)?Ee="keyword":Ee="variable"}var ut={};return ut.top=function(Q,gt,Tt){if(Q=="{")return ie(Tt,gt,"block");if(Q=="}"&&Tt.context.prev)return P(Tt);if(ne&&/@component/i.test(Q))return ie(Tt,gt,"atComponentBlock");if(/^@(-moz-)?document$/i.test(Q))return ie(Tt,gt,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(Q))return ie(Tt,gt,"atBlock");if(/^@(font-face|counter-style)/i.test(Q))return Tt.stateArg=Q,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(Q))return"keyframes";if(Q&&Q.charAt(0)=="@")return ie(Tt,gt,"at");if(Q=="hash")Ee="builtin";else if(Q=="word")Ee="tag";else{if(Q=="variable-definition")return"maybeprop";if(Q=="interpolation")return ie(Tt,gt,"interpolation");if(Q==":")return"pseudo";if(Xt&&Q=="(")return ie(Tt,gt,"parens")}return Tt.context.type},ut.block=function(Q,gt,Tt){if(Q=="word"){var he=gt.current().toLowerCase();return pt.hasOwnProperty(he)?(Ee="property","maybeprop"):Dt.hasOwnProperty(he)?(Ee=be?"string-2":"property","maybeprop"):Xt?(Ee=gt.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(Ee+=" error","maybeprop")}else return Q=="meta"?"block":!Xt&&(Q=="hash"||Q=="qualifier")?(Ee="error","block"):ut.top(Q,gt,Tt)},ut.maybeprop=function(Q,gt,Tt){return Q==":"?ie(Tt,gt,"prop"):k(Q,gt,Tt)},ut.prop=function(Q,gt,Tt){if(Q==";")return P(Tt);if(Q=="{"&&Xt)return ie(Tt,gt,"propBlock");if(Q=="}"||Q=="{")return N(Q,gt,Tt);if(Q=="(")return ie(Tt,gt,"parens");if(Q=="hash"&&!/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(gt.current()))Ee+=" error";else if(Q=="word")q(gt);else if(Q=="interpolation")return ie(Tt,gt,"interpolation");return"prop"},ut.propBlock=function(Q,gt,Tt){return Q=="}"?P(Tt):Q=="word"?(Ee="property","maybeprop"):Tt.context.type},ut.parens=function(Q,gt,Tt){return Q=="{"||Q=="}"?N(Q,gt,Tt):Q==")"?P(Tt):Q=="("?ie(Tt,gt,"parens"):Q=="interpolation"?ie(Tt,gt,"interpolation"):(Q=="word"&&q(gt),"parens")},ut.pseudo=function(Q,gt,Tt){return Q=="meta"?"pseudo":Q=="word"?(Ee="variable-3",Tt.context.type):k(Q,gt,Tt)},ut.documentTypes=function(Q,gt,Tt){return Q=="word"&&U.hasOwnProperty(gt.current())?(Ee="tag",Tt.context.type):ut.atBlock(Q,gt,Tt)},ut.atBlock=function(Q,gt,Tt){if(Q=="(")return ie(Tt,gt,"atBlock_parens");if(Q=="}"||Q==";")return N(Q,gt,Tt);if(Q=="{")return P(Tt)&&ie(Tt,gt,Xt?"block":"top");if(Q=="interpolation")return ie(Tt,gt,"interpolation");if(Q=="word"){var he=gt.current().toLowerCase();he=="only"||he=="not"||he=="and"||he=="or"?Ee="keyword":_t.hasOwnProperty(he)?Ee="attribute":Ot.hasOwnProperty(he)?Ee="property":zt.hasOwnProperty(he)?Ee="keyword":pt.hasOwnProperty(he)?Ee="property":Dt.hasOwnProperty(he)?Ee=be?"string-2":"property":Kt.hasOwnProperty(he)?Ee="atom":Mt.hasOwnProperty(he)?Ee="keyword":Ee="error"}return Tt.context.type},ut.atComponentBlock=function(Q,gt,Tt){return Q=="}"?N(Q,gt,Tt):Q=="{"?P(Tt)&&ie(Tt,gt,Xt?"block":"top",!1):(Q=="word"&&(Ee="error"),Tt.context.type)},ut.atBlock_parens=function(Q,gt,Tt){return Q==")"?P(Tt):Q=="{"||Q=="}"?N(Q,gt,Tt,2):ut.atBlock(Q,gt,Tt)},ut.restricted_atBlock_before=function(Q,gt,Tt){return Q=="{"?ie(Tt,gt,"restricted_atBlock"):Q=="word"&&Tt.stateArg=="@counter-style"?(Ee="variable","restricted_atBlock_before"):k(Q,gt,Tt)},ut.restricted_atBlock=function(Q,gt,Tt){return Q=="}"?(Tt.stateArg=null,P(Tt)):Q=="word"?(Tt.stateArg=="@font-face"&&!yt.hasOwnProperty(gt.current().toLowerCase())||Tt.stateArg=="@counter-style"&&!kt.hasOwnProperty(gt.current().toLowerCase())?Ee="error":Ee="property","maybeprop"):"restricted_atBlock"},ut.keyframes=function(Q,gt,Tt){return Q=="word"?(Ee="variable","keyframes"):Q=="{"?ie(Tt,gt,"top"):k(Q,gt,Tt)},ut.at=function(Q,gt,Tt){return Q==";"?P(Tt):Q=="{"||Q=="}"?N(Q,gt,Tt):(Q=="word"?Ee="tag":Q=="hash"&&(Ee="builtin"),"at")},ut.interpolation=function(Q,gt,Tt){return Q=="}"?P(Tt):Q=="{"||Q==";"?N(Q,gt,Tt):(Q=="word"?Ee="variable":Q!="variable"&&Q!="("&&Q!=")"&&(Ee="error"),"interpolation")},{startState:function(Q){return{tokenize:null,state:ft?"block":"top",stateArg:null,context:new ce(ft?"block":"top",Q||0,null)}},token:function(Q,gt){if(!gt.tokenize&&Q.eatSpace())return null;var Tt=(gt.tokenize||Ke)(Q,gt);return Tt&&typeof Tt=="object"&&(Pe=Tt[1],Tt=Tt[0]),Ee=Tt,Pe!="comment"&&(gt.state=ut[gt.state](Pe,Q,gt)),Ee},indent:function(Q,gt){var Tt=Q.context,he=gt&&gt.charAt(0),X=Tt.indent;return Tt.type=="prop"&&(he=="}"||he==")")&&(Tt=Tt.prev),Tt.prev&&(he=="}"&&(Tt.type=="block"||Tt.type=="top"||Tt.type=="interpolation"||Tt.type=="restricted_atBlock")?(Tt=Tt.prev,X=Tt.indent):(he==")"&&(Tt.type=="parens"||Tt.type=="atBlock_parens")||he=="{"&&(Tt.type=="at"||Tt.type=="atBlock"))&&(X=Math.max(0,Tt.indent-lt))),X},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:Qt,fold:"brace"}});function r(it){for(var $={},ft=0;ft<it.length;++ft)$[it[ft].toLowerCase()]=!0;return $}var o=["domain","regexp","url","url-prefix"],a=r(o),s=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],u=r(s),c=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],h=r(c),v=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],m=r(v),y=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],_=r(y),C=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],E=r(C),D=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],F=r(D),V=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],K=r(V),Z=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],ct=r(Z),ht=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],st=r(ht),et=o.concat(s).concat(c).concat(v).concat(y).concat(C).concat(Z).concat(ht);e.registerHelper("hintWords","css",et);function nt(it,$){for(var ft=!1,lt;(lt=it.next())!=null;){if(ft&&lt=="/"){$.tokenize=null;break}ft=lt=="*"}return["comment","comment"]}e.defineMIME("text/css",{documentTypes:a,mediaTypes:u,mediaFeatures:h,mediaValueKeywords:m,propertyKeywords:_,nonStandardPropertyKeywords:E,fontProperties:F,counterDescriptors:K,colorKeywords:ct,valueKeywords:st,tokenHooks:{"/":function(it,$){return it.eat("*")?($.tokenize=nt,nt(it,$)):!1}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:u,mediaFeatures:h,mediaValueKeywords:m,propertyKeywords:_,nonStandardPropertyKeywords:E,colorKeywords:ct,valueKeywords:st,fontProperties:F,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(it,$){return it.eat("/")?(it.skipToEnd(),["comment","comment"]):it.eat("*")?($.tokenize=nt,nt(it,$)):["operator","operator"]},":":function(it){return it.match(/^\s*\{/,!1)?[null,null]:!1},$:function(it){return it.match(/^[\w-]+/),it.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(it){return it.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:u,mediaFeatures:h,mediaValueKeywords:m,propertyKeywords:_,nonStandardPropertyKeywords:E,colorKeywords:ct,valueKeywords:st,fontProperties:F,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(it,$){return it.eat("/")?(it.skipToEnd(),["comment","comment"]):it.eat("*")?($.tokenize=nt,nt(it,$)):["operator","operator"]},"@":function(it){return it.eat("{")?[null,"interpolation"]:it.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(it.eatWhile(/[\w\\\-]/),it.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),e.defineMIME("text/x-gss",{documentTypes:a,mediaTypes:u,mediaFeatures:h,propertyKeywords:_,nonStandardPropertyKeywords:E,fontProperties:F,counterDescriptors:K,colorKeywords:ct,valueKeywords:st,supportsAtComponent:!0,tokenHooks:{"/":function(it,$){return it.eat("*")?($.tokenize=nt,nt(it,$)):!1}},name:"css",helperType:"gss"})})},8253:(i,n,t)=>{(function(e){e(t(4408),t(9701),t(6061),t(7389))})(function(e){var r={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function o(m,y,_){var C=m.current(),E=C.search(y);return E>-1?m.backUp(C.length-E):C.match(/<\/?$/)&&(m.backUp(C.length),m.match(y,!1)||m.match(C)),_}var a={};function s(m){var y=a[m];return y||(a[m]=new RegExp("\\s+"+m+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function u(m,y){var _=m.match(s(y));return _?/^\s*(.*?)\s*$/.exec(_[2])[1]:""}function c(m,y){return new RegExp((y?"^":"")+"</s*"+m+"s*>","i")}function h(m,y){for(var _ in m)for(var C=y[_]||(y[_]=[]),E=m[_],D=E.length-1;D>=0;D--)C.unshift(E[D])}function v(m,y){for(var _=0;_<m.length;_++){var C=m[_];if(!C[0]||C[1].test(u(y,C[0])))return C[2]}}e.defineMode("htmlmixed",function(m,y){var _=e.getMode(m,{name:"xml",htmlMode:!0,multilineTagIndentFactor:y.multilineTagIndentFactor,multilineTagIndentPastTag:y.multilineTagIndentPastTag,allowMissingTagName:y.allowMissingTagName}),C={},E=y&&y.tags,D=y&&y.scriptTypes;if(h(r,C),E&&h(E,C),D)for(var F=D.length-1;F>=0;F--)C.script.unshift(["type",D[F].matches,D[F].mode]);function V(K,Z){var ct=_.token(K,Z.htmlState),ht=/\btag\b/.test(ct),st;if(ht&&!/[<>\s\/]/.test(K.current())&&(st=Z.htmlState.tagName&&Z.htmlState.tagName.toLowerCase())&&C.hasOwnProperty(st))Z.inTag=st+" ";else if(Z.inTag&&ht&&/>$/.test(K.current())){var et=/^([\S]+) (.*)/.exec(Z.inTag);Z.inTag=null;var nt=K.current()==">"&&v(C[et[1]],et[2]),it=e.getMode(m,nt),$=c(et[1],!0),ft=c(et[1],!1);Z.token=function(lt,St){return lt.match($,!1)?(St.token=V,St.localState=St.localMode=null,null):o(lt,ft,St.localMode.token(lt,St.localState))},Z.localMode=it,Z.localState=e.startState(it,_.indent(Z.htmlState,"",""))}else Z.inTag&&(Z.inTag+=K.current(),K.eol()&&(Z.inTag+=" "));return ct}return{startState:function(){var K=e.startState(_);return{token:V,inTag:null,localMode:null,localState:null,htmlState:K}},copyState:function(K){var Z;return K.localState&&(Z=e.copyState(K.localMode,K.localState)),{token:K.token,inTag:K.inTag,localMode:K.localMode,localState:Z,htmlState:e.copyState(_,K.htmlState)}},token:function(K,Z){return Z.token(K,Z)},indent:function(K,Z,ct){return!K.localMode||/^\s*<\//.test(Z)?_.indent(K.htmlState,Z,ct):K.localMode.indent?K.localMode.indent(K.localState,Z,ct):e.Pass},innerMode:function(K){return{state:K.localState||K.htmlState,mode:K.localMode||_}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")})},6061:(i,n,t)=>{(function(e){e(t(4408))})(function(e){e.defineMode("javascript",function(r,o){var a=r.indentUnit,s=o.statementIndent,u=o.jsonld,c=o.json||u,h=o.trackScope!==!1,v=o.typescript,m=o.wordCharacters||/[\w$\xa1-\uffff]/,y=function(){function tt(Hn){return{type:Hn,style:"keyword"}}var wt=tt("keyword a"),Jt=tt("keyword b"),oe=tt("keyword c"),pe=tt("keyword d"),nn=tt("operator"),on={type:"atom",style:"atom"};return{if:tt("if"),while:wt,with:wt,else:Jt,do:Jt,try:Jt,finally:Jt,return:pe,break:pe,continue:pe,new:tt("new"),delete:oe,void:oe,throw:oe,debugger:tt("debugger"),var:tt("var"),const:tt("var"),let:tt("var"),function:tt("function"),catch:tt("catch"),for:tt("for"),switch:tt("switch"),case:tt("case"),default:tt("default"),in:nn,typeof:nn,instanceof:nn,true:on,false:on,null:on,undefined:on,NaN:on,Infinity:on,this:tt("this"),class:tt("class"),super:tt("atom"),yield:oe,export:tt("export"),import:tt("import"),extends:oe,await:oe}}(),_=/[+\-*&%=<>!?|~^@]/,C=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function E(tt){for(var wt=!1,Jt,oe=!1;(Jt=tt.next())!=null;){if(!wt){if(Jt=="/"&&!oe)return;Jt=="["?oe=!0:oe&&Jt=="]"&&(oe=!1)}wt=!wt&&Jt=="\\"}}var D,F;function V(tt,wt,Jt){return D=tt,F=Jt,wt}function K(tt,wt){var Jt=tt.next();if(Jt=='"'||Jt=="'")return wt.tokenize=Z(Jt),wt.tokenize(tt,wt);if(Jt=="."&&tt.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return V("number","number");if(Jt=="."&&tt.match(".."))return V("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Jt))return V(Jt);if(Jt=="="&&tt.eat(">"))return V("=>","operator");if(Jt=="0"&&tt.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return V("number","number");if(/\d/.test(Jt))return tt.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),V("number","number");if(Jt=="/")return tt.eat("*")?(wt.tokenize=ct,ct(tt,wt)):tt.eat("/")?(tt.skipToEnd(),V("comment","comment")):Ki(tt,wt,1)?(E(tt),tt.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),V("regexp","string-2")):(tt.eat("="),V("operator","operator",tt.current()));if(Jt=="`")return wt.tokenize=ht,ht(tt,wt);if(Jt=="#"&&tt.peek()=="!")return tt.skipToEnd(),V("meta","meta");if(Jt=="#"&&tt.eatWhile(m))return V("variable","property");if(Jt=="<"&&tt.match("!--")||Jt=="-"&&tt.match("->")&&!/\S/.test(tt.string.slice(0,tt.start)))return tt.skipToEnd(),V("comment","comment");if(_.test(Jt))return(Jt!=">"||!wt.lexical||wt.lexical.type!=">")&&(tt.eat("=")?(Jt=="!"||Jt=="=")&&tt.eat("="):/[<>*+\-|&?]/.test(Jt)&&(tt.eat(Jt),Jt==">"&&tt.eat(Jt))),Jt=="?"&&tt.eat(".")?V("."):V("operator","operator",tt.current());if(m.test(Jt)){tt.eatWhile(m);var oe=tt.current();if(wt.lastType!="."){if(y.propertyIsEnumerable(oe)){var pe=y[oe];return V(pe.type,pe.style,oe)}if(oe=="async"&&tt.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return V("async","keyword",oe)}return V("variable","variable",oe)}}function Z(tt){return function(wt,Jt){var oe=!1,pe;if(u&&wt.peek()=="@"&&wt.match(C))return Jt.tokenize=K,V("jsonld-keyword","meta");for(;(pe=wt.next())!=null&&!(pe==tt&&!oe);)oe=!oe&&pe=="\\";return oe||(Jt.tokenize=K),V("string","string")}}function ct(tt,wt){for(var Jt=!1,oe;oe=tt.next();){if(oe=="/"&&Jt){wt.tokenize=K;break}Jt=oe=="*"}return V("comment","comment")}function ht(tt,wt){for(var Jt=!1,oe;(oe=tt.next())!=null;){if(!Jt&&(oe=="`"||oe=="$"&&tt.eat("{"))){wt.tokenize=K;break}Jt=!Jt&&oe=="\\"}return V("quasi","string-2",tt.current())}var st="([{}])";function et(tt,wt){wt.fatArrowAt&&(wt.fatArrowAt=null);var Jt=tt.string.indexOf("=>",tt.start);if(!(Jt<0)){if(v){var oe=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(tt.string.slice(tt.start,Jt));oe&&(Jt=oe.index)}for(var pe=0,nn=!1,on=Jt-1;on>=0;--on){var Hn=tt.string.charAt(on),_n=st.indexOf(Hn);if(_n>=0&&_n<3){if(!pe){++on;break}if(--pe==0){Hn=="("&&(nn=!0);break}}else if(_n>=3&&_n<6)++pe;else if(m.test(Hn))nn=!0;else if(/["'\/`]/.test(Hn))for(;;--on){if(on==0)return;var oo=tt.string.charAt(on-1);if(oo==Hn&&tt.string.charAt(on-2)!="\\"){on--;break}}else if(nn&&!pe){++on;break}}nn&&!pe&&(wt.fatArrowAt=on)}}var nt={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function it(tt,wt,Jt,oe,pe,nn){this.indented=tt,this.column=wt,this.type=Jt,this.prev=pe,this.info=nn,oe!=null&&(this.align=oe)}function $(tt,wt){if(!h)return!1;for(var Jt=tt.localVars;Jt;Jt=Jt.next)if(Jt.name==wt)return!0;for(var oe=tt.context;oe;oe=oe.prev)for(var Jt=oe.vars;Jt;Jt=Jt.next)if(Jt.name==wt)return!0}function ft(tt,wt,Jt,oe,pe){var nn=tt.cc;for(lt.state=tt,lt.stream=pe,lt.marked=null,lt.cc=nn,lt.style=wt,tt.lexical.hasOwnProperty("align")||(tt.lexical.align=!0);;){var on=nn.length?nn.pop():c?Oe:Pe;if(on(Jt,oe)){for(;nn.length&&nn[nn.length-1].lex;)nn.pop()();return lt.marked?lt.marked:Jt=="variable"&&$(tt,oe)?"variable-2":wt}}}var lt={state:null,marked:null,cc:null};function St(){for(var tt=arguments.length-1;tt>=0;tt--)lt.cc.push(arguments[tt])}function U(){return St.apply(null,arguments),!0}function _t(tt,wt){for(var Jt=wt;Jt;Jt=Jt.next)if(Jt.name==tt)return!0;return!1}function Ot(tt){var wt=lt.state;if(lt.marked="def",!!h){if(wt.context){if(wt.lexical.info=="var"&&wt.context&&wt.context.block){var Jt=zt(tt,wt.context);if(Jt!=null){wt.context=Jt;return}}else if(!_t(tt,wt.localVars)){wt.localVars=new yt(tt,wt.localVars);return}}o.globalVars&&!_t(tt,wt.globalVars)&&(wt.globalVars=new yt(tt,wt.globalVars))}}function zt(tt,wt){if(wt)if(wt.block){var Jt=zt(tt,wt.prev);return Jt?Jt==wt.prev?wt:new Dt(Jt,wt.vars,!0):null}else return _t(tt,wt.vars)?wt:new Dt(wt.prev,new yt(tt,wt.vars),!1);else return null}function pt(tt){return tt=="public"||tt=="private"||tt=="protected"||tt=="abstract"||tt=="readonly"}function Dt(tt,wt,Jt){this.prev=tt,this.vars=wt,this.block=Jt}function yt(tt,wt){this.name=tt,this.next=wt}var kt=new yt("this",new yt("arguments",null));function Mt(){lt.state.context=new Dt(lt.state.context,lt.state.localVars,!1),lt.state.localVars=kt}function Kt(){lt.state.context=new Dt(lt.state.context,lt.state.localVars,!0),lt.state.localVars=null}function Xt(){lt.state.localVars=lt.state.context.vars,lt.state.context=lt.state.context.prev}Xt.lex=!0;function Qt(tt,wt){var Jt=function(){var oe=lt.state,pe=oe.indented;if(oe.lexical.type=="stat")pe=oe.lexical.indented;else for(var nn=oe.lexical;nn&&nn.type==")"&&nn.align;nn=nn.prev)pe=nn.indented;oe.lexical=new it(pe,lt.stream.column(),tt,null,oe.lexical,wt)};return Jt.lex=!0,Jt}function ne(){var tt=lt.state;tt.lexical.prev&&(tt.lexical.type==")"&&(tt.indented=tt.lexical.indented),tt.lexical=tt.lexical.prev)}ne.lex=!0;function be(tt){function wt(Jt){return Jt==tt?U():tt==";"||Jt=="}"||Jt==")"||Jt=="]"?St():U(wt)}return wt}function Pe(tt,wt){return tt=="var"?U(Qt("vardef",wt),Fe,be(";"),ne):tt=="keyword a"?U(Qt("form"),De,Pe,ne):tt=="keyword b"?U(Qt("form"),Pe,ne):tt=="keyword d"?lt.stream.match(/^\s*$/,!1)?U():U(Qt("stat"),ce,be(";"),ne):tt=="debugger"?U(be(";")):tt=="{"?U(Qt("}"),Kt,dt,ne,Xt):tt==";"?U():tt=="if"?(lt.state.lexical.info=="else"&&lt.state.cc[lt.state.cc.length-1]==ne&&lt.state.cc.pop()(),U(Qt("form"),De,Pe,ne,Gn)):tt=="function"?U(ir):tt=="for"?U(Qt("form"),Kt,_i,Pe,Xt,ne):tt=="class"||v&&wt=="interface"?(lt.marked="keyword",U(Qt("form",tt=="class"?tt:wt),An,ne)):tt=="variable"?v&&wt=="declare"?(lt.marked="keyword",U(Pe)):v&&(wt=="module"||wt=="enum"||wt=="type")&&lt.stream.match(/^\s*\w/,!1)?(lt.marked="keyword",wt=="enum"?U(qi):wt=="type"?U(br,be("operator"),xe,be(";")):U(Qt("form"),We,be("{"),Qt("}"),dt,ne,ne)):v&&wt=="namespace"?(lt.marked="keyword",U(Qt("form"),Oe,Pe,ne)):v&&wt=="abstract"?(lt.marked="keyword",U(Pe)):U(Qt("stat"),he):tt=="switch"?U(Qt("form"),De,be("{"),Qt("}","switch"),Kt,dt,ne,ne,Xt):tt=="case"?U(Oe,be(":")):tt=="default"?U(be(":")):tt=="catch"?U(Qt("form"),Mt,Ee,Pe,ne,Xt):tt=="export"?U(Qt("stat"),pn,ne):tt=="import"?U(Qt("stat"),jr,ne):tt=="async"?U(Pe):wt=="@"?U(Oe,Pe):St(Qt("stat"),Oe,be(";"),ne)}function Ee(tt){if(tt=="(")return U(He,be(")"))}function Oe(tt,wt){return Ut(tt,wt,!1)}function Ke(tt,wt){return Ut(tt,wt,!0)}function De(tt){return tt!="("?St():U(Qt(")"),ce,be(")"),ne)}function Ut(tt,wt,Jt){if(lt.state.fatArrowAt==lt.stream.start){var oe=Jt?ut:q;if(tt=="(")return U(Mt,Qt(")"),B(He,")"),ne,be("=>"),oe,Xt);if(tt=="variable")return St(Mt,We,be("=>"),oe,Xt)}var pe=Jt?P:ie;return nt.hasOwnProperty(tt)?U(pe):tt=="function"?U(ir,pe):tt=="class"||v&&wt=="interface"?(lt.marked="keyword",U(Qt("form"),qr,ne)):tt=="keyword c"||tt=="async"?U(Jt?Ke:Oe):tt=="("?U(Qt(")"),ce,be(")"),ne,pe):tt=="operator"||tt=="spread"?U(Jt?Ke:Oe):tt=="["?U(Qt("]"),_r,ne,pe):tt=="{"?mt(L,"}",null,pe):tt=="quasi"?St(k,pe):tt=="new"?U(Q(Jt)):U()}function ce(tt){return tt.match(/[;\}\)\],]/)?St():St(Oe)}function ie(tt,wt){return tt==","?U(ce):P(tt,wt,!1)}function P(tt,wt,Jt){var oe=Jt==!1?ie:P,pe=Jt==!1?Oe:Ke;if(tt=="=>")return U(Mt,Jt?ut:q,Xt);if(tt=="operator")return/\+\+|--/.test(wt)||v&&wt=="!"?U(oe):v&&wt=="<"&&lt.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?U(Qt(">"),B(xe,">"),ne,oe):wt=="?"?U(Oe,be(":"),pe):U(pe);if(tt=="quasi")return St(k,oe);if(tt!=";"){if(tt=="(")return mt(Ke,")","call",oe);if(tt==".")return U(X,oe);if(tt=="[")return U(Qt("]"),ce,be("]"),ne,oe);if(v&&wt=="as")return lt.marked="keyword",U(xe,oe);if(tt=="regexp")return lt.state.lastType=lt.marked="operator",lt.stream.backUp(lt.stream.pos-lt.stream.start-1),U(pe)}}function k(tt,wt){return tt!="quasi"?St():wt.slice(wt.length-2)!="${"?U(k):U(ce,N)}function N(tt){if(tt=="}")return lt.marked="string-2",lt.state.tokenize=ht,U(k)}function q(tt){return et(lt.stream,lt.state),St(tt=="{"?Pe:Oe)}function ut(tt){return et(lt.stream,lt.state),St(tt=="{"?Pe:Ke)}function Q(tt){return function(wt){return wt=="."?U(tt?Tt:gt):wt=="variable"&&v?U(Lt,tt?P:ie):St(tt?Ke:Oe)}}function gt(tt,wt){if(wt=="target")return lt.marked="keyword",U(ie)}function Tt(tt,wt){if(wt=="target")return lt.marked="keyword",U(P)}function he(tt){return tt==":"?U(ne,Pe):St(ie,be(";"),ne)}function X(tt){if(tt=="variable")return lt.marked="property",U()}function L(tt,wt){if(tt=="async")return lt.marked="property",U(L);if(tt=="variable"||lt.style=="keyword"){if(lt.marked="property",wt=="get"||wt=="set")return U(A);var Jt;return v&&lt.state.fatArrowAt==lt.stream.start&&(Jt=lt.stream.match(/^\s*:\s*/,!1))&&(lt.state.fatArrowAt=lt.stream.pos+Jt[0].length),U(W)}else{if(tt=="number"||tt=="string")return lt.marked=u?"property":lt.style+" property",U(W);if(tt=="jsonld-keyword")return U(W);if(v&&pt(wt))return lt.marked="keyword",U(L);if(tt=="[")return U(Oe,qt,be("]"),W);if(tt=="spread")return U(Ke,W);if(wt=="*")return lt.marked="keyword",U(L);if(tt==":")return St(W)}}function A(tt){return tt!="variable"?St(W):(lt.marked="property",U(ir))}function W(tt){if(tt==":")return U(Ke);if(tt=="(")return St(ir)}function B(tt,wt,Jt){function oe(pe,nn){if(Jt?Jt.indexOf(pe)>-1:pe==","){var on=lt.state.lexical;return on.info=="call"&&(on.pos=(on.pos||0)+1),U(function(Hn,_n){return Hn==wt||_n==wt?St():St(tt)},oe)}return pe==wt||nn==wt?U():Jt&&Jt.indexOf(";")>-1?St(tt):U(be(wt))}return function(pe,nn){return pe==wt||nn==wt?U():St(tt,oe)}}function mt(tt,wt,Jt){for(var oe=3;oe<arguments.length;oe++)lt.cc.push(arguments[oe]);return U(Qt(wt,Jt),B(tt,wt),ne)}function dt(tt){return tt=="}"?U():St(Pe,dt)}function qt(tt,wt){if(v){if(tt==":")return U(xe);if(wt=="?")return U(qt)}}function fe(tt,wt){if(v&&(tt==":"||wt=="in"))return U(xe)}function de(tt){if(v&&tt==":")return lt.stream.match(/^\s*\w+\s+is\b/,!1)?U(Oe,ae,xe):U(xe)}function ae(tt,wt){if(wt=="is")return lt.marked="keyword",U()}function xe(tt,wt){if(wt=="keyof"||wt=="typeof"||wt=="infer"||wt=="readonly")return lt.marked="keyword",U(wt=="typeof"?Ke:xe);if(tt=="variable"||wt=="void")return lt.marked="type",U(Ct);if(wt=="|"||wt=="&")return U(xe);if(tt=="string"||tt=="number"||tt=="atom")return U(Ct);if(tt=="[")return U(Qt("]"),B(xe,"]",","),ne,Ct);if(tt=="{")return U(Qt("}"),dn,ne,Ct);if(tt=="(")return U(B(ot,")"),en,Ct);if(tt=="<")return U(B(xe,">"),xe);if(tt=="quasi")return St(Un,Ct)}function en(tt){if(tt=="=>")return U(xe)}function dn(tt){return tt.match(/[\}\)\]]/)?U():tt==","||tt==";"?U(dn):St(sn,dn)}function sn(tt,wt){if(tt=="variable"||lt.style=="keyword")return lt.marked="property",U(sn);if(wt=="?"||tt=="number"||tt=="string")return U(sn);if(tt==":")return U(xe);if(tt=="[")return U(be("variable"),fe,be("]"),sn);if(tt=="(")return St(rn,sn);if(!tt.match(/[;\}\)\],]/))return U()}function Un(tt,wt){return tt!="quasi"?St():wt.slice(wt.length-2)!="${"?U(Un):U(xe,Lr)}function Lr(tt){if(tt=="}")return lt.marked="string-2",lt.state.tokenize=ht,U(Un)}function ot(tt,wt){return tt=="variable"&&lt.stream.match(/^\s*[?:]/,!1)||wt=="?"?U(ot):tt==":"?U(xe):tt=="spread"?U(ot):St(xe)}function Ct(tt,wt){if(wt=="<")return U(Qt(">"),B(xe,">"),ne,Ct);if(wt=="|"||tt=="."||wt=="&")return U(xe);if(tt=="[")return U(xe,be("]"),Ct);if(wt=="extends"||wt=="implements")return lt.marked="keyword",U(xe);if(wt=="?")return U(xe,be(":"),xe)}function Lt(tt,wt){if(wt=="<")return U(Qt(">"),B(xe,">"),ne,Ct)}function ee(){return St(xe,we)}function we(tt,wt){if(wt=="=")return U(xe)}function Fe(tt,wt){return wt=="enum"?(lt.marked="keyword",U(qi)):St(We,qt,Pn,zi)}function We(tt,wt){if(v&&pt(wt))return lt.marked="keyword",U(We);if(tt=="variable")return Ot(wt),U();if(tt=="spread")return U(We);if(tt=="[")return mt(Sn,"]");if(tt=="{")return mt(cn,"}")}function cn(tt,wt){return tt=="variable"&&!lt.stream.match(/^\s*:/,!1)?(Ot(wt),U(Pn)):(tt=="variable"&&(lt.marked="property"),tt=="spread"?U(We):tt=="}"?St():tt=="["?U(Oe,be("]"),be(":"),cn):U(be(":"),We,Pn))}function Sn(){return St(We,Pn)}function Pn(tt,wt){if(wt=="=")return U(Ke)}function zi(tt){if(tt==",")return U(Fe)}function Gn(tt,wt){if(tt=="keyword b"&&wt=="else")return U(Qt("form","else"),Pe,ne)}function _i(tt,wt){if(wt=="await")return U(_i);if(tt=="(")return U(Qt(")"),Wi,ne)}function Wi(tt){return tt=="var"?U(Fe,gn):tt=="variable"?U(gn):St(gn)}function gn(tt,wt){return tt==")"?U():tt==";"?U(gn):wt=="in"||wt=="of"?(lt.marked="keyword",U(Oe,gn)):St(Oe,gn)}function ir(tt,wt){if(wt=="*")return lt.marked="keyword",U(ir);if(tt=="variable")return Ot(wt),U(ir);if(tt=="(")return U(Mt,Qt(")"),B(He,")"),ne,de,Pe,Xt);if(v&&wt=="<")return U(Qt(">"),B(ee,">"),ne,ir)}function rn(tt,wt){if(wt=="*")return lt.marked="keyword",U(rn);if(tt=="variable")return Ot(wt),U(rn);if(tt=="(")return U(Mt,Qt(")"),B(He,")"),ne,de,Xt);if(v&&wt=="<")return U(Qt(">"),B(ee,">"),ne,rn)}function br(tt,wt){if(tt=="keyword"||tt=="variable")return lt.marked="type",U(br);if(wt=="<")return U(Qt(">"),B(ee,">"),ne)}function He(tt,wt){return wt=="@"&&U(Oe,He),tt=="spread"?U(He):v&&pt(wt)?(lt.marked="keyword",U(He)):v&&tt=="this"?U(qt,Pn):St(We,qt,Pn)}function qr(tt,wt){return tt=="variable"?An(tt,wt):wr(tt,wt)}function An(tt,wt){if(tt=="variable")return Ot(wt),U(wr)}function wr(tt,wt){if(wt=="<")return U(Qt(">"),B(ee,">"),ne,wr);if(wt=="extends"||wt=="implements"||v&&tt==",")return wt=="implements"&&(lt.marked="keyword"),U(v?xe:Oe,wr);if(tt=="{")return U(Qt("}"),xr,ne)}function xr(tt,wt){if(tt=="async"||tt=="variable"&&(wt=="static"||wt=="get"||wt=="set"||v&&pt(wt))&&lt.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return lt.marked="keyword",U(xr);if(tt=="variable"||lt.style=="keyword")return lt.marked="property",U(Sr,xr);if(tt=="number"||tt=="string")return U(Sr,xr);if(tt=="[")return U(Oe,qt,be("]"),Sr,xr);if(wt=="*")return lt.marked="keyword",U(xr);if(v&&tt=="(")return St(rn,xr);if(tt==";"||tt==",")return U(xr);if(tt=="}")return U();if(wt=="@")return U(Oe,xr)}function Sr(tt,wt){if(wt=="!"||wt=="?")return U(Sr);if(tt==":")return U(xe,Pn);if(wt=="=")return U(Ke);var Jt=lt.state.lexical.prev,oe=Jt&&Jt.info=="interface";return St(oe?rn:ir)}function pn(tt,wt){return wt=="*"?(lt.marked="keyword",U(kn,be(";"))):wt=="default"?(lt.marked="keyword",U(Oe,be(";"))):tt=="{"?U(B(Me,"}"),kn,be(";")):St(Pe)}function Me(tt,wt){if(wt=="as")return lt.marked="keyword",U(be("variable"));if(tt=="variable")return St(Ke,Me)}function jr(tt){return tt=="string"?U():tt=="("?St(Oe):tt=="."?St(ie):St(Yn,Kr,kn)}function Yn(tt,wt){return tt=="{"?mt(Yn,"}"):(tt=="variable"&&Ot(wt),wt=="*"&&(lt.marked="keyword"),U(ln))}function Kr(tt){if(tt==",")return U(Yn,Kr)}function ln(tt,wt){if(wt=="as")return lt.marked="keyword",U(Yn)}function kn(tt,wt){if(wt=="from")return lt.marked="keyword",U(Oe)}function _r(tt){return tt=="]"?U():St(B(Ke,"]"))}function qi(){return St(Qt("form"),We,be("{"),Qt("}"),B(le,"}"),ne,ne)}function le(){return St(We,Pn)}function Be(tt,wt){return tt.lastType=="operator"||tt.lastType==","||_.test(wt.charAt(0))||/[,.]/.test(wt.charAt(0))}function Ki(tt,wt,Jt){return wt.tokenize==K&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(wt.lastType)||wt.lastType=="quasi"&&/\{\s*$/.test(tt.string.slice(0,tt.pos-(Jt||0)))}return{startState:function(tt){var wt={tokenize:K,lastType:"sof",cc:[],lexical:new it((tt||0)-a,0,"block",!1),localVars:o.localVars,context:o.localVars&&new Dt(null,null,!1),indented:tt||0};return o.globalVars&&typeof o.globalVars=="object"&&(wt.globalVars=o.globalVars),wt},token:function(tt,wt){if(tt.sol()&&(wt.lexical.hasOwnProperty("align")||(wt.lexical.align=!1),wt.indented=tt.indentation(),et(tt,wt)),wt.tokenize!=ct&&tt.eatSpace())return null;var Jt=wt.tokenize(tt,wt);return D=="comment"?Jt:(wt.lastType=D=="operator"&&(F=="++"||F=="--")?"incdec":D,ft(wt,Jt,D,F,tt))},indent:function(tt,wt){if(tt.tokenize==ct||tt.tokenize==ht)return e.Pass;if(tt.tokenize!=K)return 0;var Jt=wt&&wt.charAt(0),oe=tt.lexical,pe;if(!/^\s*else\b/.test(wt))for(var nn=tt.cc.length-1;nn>=0;--nn){var on=tt.cc[nn];if(on==ne)oe=oe.prev;else if(on!=Gn&&on!=Xt)break}for(;(oe.type=="stat"||oe.type=="form")&&(Jt=="}"||(pe=tt.cc[tt.cc.length-1])&&(pe==ie||pe==P)&&!/^[,\.=+\-*:?[\(]/.test(wt));)oe=oe.prev;s&&oe.type==")"&&oe.prev.type=="stat"&&(oe=oe.prev);var Hn=oe.type,_n=Jt==Hn;return Hn=="vardef"?oe.indented+(tt.lastType=="operator"||tt.lastType==","?oe.info.length+1:0):Hn=="form"&&Jt=="{"?oe.indented:Hn=="form"?oe.indented+a:Hn=="stat"?oe.indented+(Be(tt,wt)?s||a:0):oe.info=="switch"&&!_n&&o.doubleIndentSwitch!=!1?oe.indented+(/^(?:case|default)\b/.test(wt)?a:2*a):oe.align?oe.column+(_n?0:1):oe.indented+(_n?0:a)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:c?null:"/*",blockCommentEnd:c?null:"*/",blockCommentContinue:c?null:" * ",lineComment:c?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:c?"json":"javascript",jsonldMode:u,jsonMode:c,expressionAllowed:Ki,skipExpression:function(tt){ft(tt,"atom","atom","true",new e.StringStream("",2,null))}}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/manifest+json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})})},9701:(i,n,t)=>{(function(e){e(t(4408))})(function(e){var r={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},o={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",function(a,s){var u=a.indentUnit,c={},h=s.htmlMode?r:o;for(var v in h)c[v]=h[v];for(var v in s)c[v]=s[v];var m,y;function _(U,_t){function Ot(Dt){return _t.tokenize=Dt,Dt(U,_t)}var zt=U.next();if(zt=="<")return U.eat("!")?U.eat("[")?U.match("CDATA[")?Ot(D("atom","]]>")):null:U.match("--")?Ot(D("comment","-->")):U.match("DOCTYPE",!0,!0)?(U.eatWhile(/[\w\._\-]/),Ot(F(1))):null:U.eat("?")?(U.eatWhile(/[\w\._\-]/),_t.tokenize=D("meta","?>"),"meta"):(m=U.eat("/")?"closeTag":"openTag",_t.tokenize=C,"tag bracket");if(zt=="&"){var pt;return U.eat("#")?U.eat("x")?pt=U.eatWhile(/[a-fA-F\d]/)&&U.eat(";"):pt=U.eatWhile(/[\d]/)&&U.eat(";"):pt=U.eatWhile(/[\w\.\-:]/)&&U.eat(";"),pt?"atom":"error"}else return U.eatWhile(/[^&<]/),null}_.isInText=!0;function C(U,_t){var Ot=U.next();if(Ot==">"||Ot=="/"&&U.eat(">"))return _t.tokenize=_,m=Ot==">"?"endTag":"selfcloseTag","tag bracket";if(Ot=="=")return m="equals",null;if(Ot=="<"){_t.tokenize=_,_t.state=ht,_t.tagName=_t.tagStart=null;var zt=_t.tokenize(U,_t);return zt?zt+" tag error":"tag error"}else return/[\'\"]/.test(Ot)?(_t.tokenize=E(Ot),_t.stringStartCol=U.column(),_t.tokenize(U,_t)):(U.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function E(U){var _t=function(Ot,zt){for(;!Ot.eol();)if(Ot.next()==U){zt.tokenize=C;break}return"string"};return _t.isInAttribute=!0,_t}function D(U,_t){return function(Ot,zt){for(;!Ot.eol();){if(Ot.match(_t)){zt.tokenize=_;break}Ot.next()}return U}}function F(U){return function(_t,Ot){for(var zt;(zt=_t.next())!=null;){if(zt=="<")return Ot.tokenize=F(U+1),Ot.tokenize(_t,Ot);if(zt==">")if(U==1){Ot.tokenize=_;break}else return Ot.tokenize=F(U-1),Ot.tokenize(_t,Ot)}return"meta"}}function V(U){return U&&U.toLowerCase()}function K(U,_t,Ot){this.prev=U.context,this.tagName=_t||"",this.indent=U.indented,this.startOfLine=Ot,(c.doNotIndent.hasOwnProperty(_t)||U.context&&U.context.noIndent)&&(this.noIndent=!0)}function Z(U){U.context&&(U.context=U.context.prev)}function ct(U,_t){for(var Ot;;){if(!U.context||(Ot=U.context.tagName,!c.contextGrabbers.hasOwnProperty(V(Ot))||!c.contextGrabbers[V(Ot)].hasOwnProperty(V(_t))))return;Z(U)}}function ht(U,_t,Ot){return U=="openTag"?(Ot.tagStart=_t.column(),st):U=="closeTag"?et:ht}function st(U,_t,Ot){return U=="word"?(Ot.tagName=_t.current(),y="tag",$):c.allowMissingTagName&&U=="endTag"?(y="tag bracket",$(U,_t,Ot)):(y="error",st)}function et(U,_t,Ot){if(U=="word"){var zt=_t.current();return Ot.context&&Ot.context.tagName!=zt&&c.implicitlyClosed.hasOwnProperty(V(Ot.context.tagName))&&Z(Ot),Ot.context&&Ot.context.tagName==zt||c.matchClosing===!1?(y="tag",nt):(y="tag error",it)}else return c.allowMissingTagName&&U=="endTag"?(y="tag bracket",nt(U,_t,Ot)):(y="error",it)}function nt(U,_t,Ot){return U!="endTag"?(y="error",nt):(Z(Ot),ht)}function it(U,_t,Ot){return y="error",nt(U,_t,Ot)}function $(U,_t,Ot){if(U=="word")return y="attribute",ft;if(U=="endTag"||U=="selfcloseTag"){var zt=Ot.tagName,pt=Ot.tagStart;return Ot.tagName=Ot.tagStart=null,U=="selfcloseTag"||c.autoSelfClosers.hasOwnProperty(V(zt))?ct(Ot,zt):(ct(Ot,zt),Ot.context=new K(Ot,zt,pt==Ot.indented)),ht}return y="error",$}function ft(U,_t,Ot){return U=="equals"?lt:(c.allowMissing||(y="error"),$(U,_t,Ot))}function lt(U,_t,Ot){return U=="string"?St:U=="word"&&c.allowUnquoted?(y="string",$):(y="error",$(U,_t,Ot))}function St(U,_t,Ot){return U=="string"?St:$(U,_t,Ot)}return{startState:function(U){var _t={tokenize:_,state:ht,indented:U||0,tagName:null,tagStart:null,context:null};return U!=null&&(_t.baseIndent=U),_t},token:function(U,_t){if(!_t.tagName&&U.sol()&&(_t.indented=U.indentation()),U.eatSpace())return null;m=null;var Ot=_t.tokenize(U,_t);return(Ot||m)&&Ot!="comment"&&(y=null,_t.state=_t.state(m||Ot,U,_t),y&&(Ot=y=="error"?Ot+" error":y)),Ot},indent:function(U,_t,Ot){var zt=U.context;if(U.tokenize.isInAttribute)return U.tagStart==U.indented?U.stringStartCol+1:U.indented+u;if(zt&&zt.noIndent)return e.Pass;if(U.tokenize!=C&&U.tokenize!=_)return Ot?Ot.match(/^(\s*)/)[0].length:0;if(U.tagName)return c.multilineTagIndentPastTag!==!1?U.tagStart+U.tagName.length+2:U.tagStart+u*(c.multilineTagIndentFactor||1);if(c.alignCDATA&&/<!\[CDATA\[/.test(_t))return 0;var pt=_t&&/^<(\/)?([\w_:\.-]*)/.exec(_t);if(pt&&pt[1])for(;zt;)if(zt.tagName==pt[2]){zt=zt.prev;break}else if(c.implicitlyClosed.hasOwnProperty(V(zt.tagName)))zt=zt.prev;else break;else if(pt)for(;zt;){var Dt=c.contextGrabbers[V(zt.tagName)];if(Dt&&Dt.hasOwnProperty(V(pt[2])))zt=zt.prev;else break}for(;zt&&zt.prev&&!zt.startOfLine;)zt=zt.prev;return zt?zt.indent+u:U.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:c.htmlMode?"html":"xml",helperType:c.htmlMode?"html":"xml",skipAttribute:function(U){U.state==lt&&(U.state=$)},xmlCurrentTag:function(U){return U.tagName?{name:U.tagName,close:U.type=="closeTag"}:null},xmlCurrentContext:function(U){for(var _t=[],Ot=U.context;Ot;Ot=Ot.prev)_t.push(Ot.tagName);return _t.reverse()}}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})})},7058:(i,n,t)=>{t.d(n,{A:()=>a});var e=t(9156),r=function(){var s=function(u,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(h[m]=v[m])},s(u,c)};return function(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(u,c);function h(){this.constructor=u}u.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}}(),o=function(s){r(u,s);function u(c,h,v){var m=s.call(this,h,v)||this;return m._module=c,m}return Object.defineProperty(u.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),u}(e.Kx);const a=o},179:(i,n,t)=>{t.d(n,{A:()=>s,F:()=>o});var e=t(7058),r=function(){var u=function(c,h){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(v[y]=m[y])},u(c,h)};return function(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");u(c,h);function v(){this.constructor=c}c.prototype=h===null?Object.create(h):(v.prototype=h.prototype,new v)}}(),o;(function(u){u.Select="select",u.Hover="hover",u.Spacing="spacing",u.Target="target",u.Resize="resize"})(o||(o={}));var a=function(u){r(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.prototype.defaults=function(){return{id:"",type:""}},Object.defineProperty(c.prototype,"type",{get:function(){return this.get("type")||""},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"component",{get:function(){var h,v=this.get("component");return v||((h=this.get("componentView"))===null||h===void 0?void 0:h.model)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"componentView",{get:function(){var h,v=this.get("componentView");return v||((h=this.get("component"))===null||h===void 0?void 0:h.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"el",{get:function(){var h;return(h=this.componentView)===null||h===void 0?void 0:h.el},enumerable:!1,configurable:!0}),c.prototype.getBoxRect=function(h){var v=this,m=v.el,y=v.em,_=y.Canvas.getCanvasView(),C=this.get("boxRect");return C||(m&&_?_.getElBoxRect(m,h):{x:0,y:0,width:0,height:0})},c.prototype.getStyle=function(h){h===void 0&&(h={});var v=h.boxRect||this.getBoxRect(h),m=v.width,y=v.height,_=v.x,C=v.y;return{width:"".concat(m,"px"),height:"".concat(y,"px"),top:"0",left:"0",position:"absolute",translate:"".concat(_,"px ").concat(C,"px")}},c.prototype.isType=function(h){return this.type===h},c}(e.A);const s=a},1738:(i,n,t)=>{t.d(n,{A:()=>r});var e;(function(o){o.run="command:run",o.runCommand="command:run:",o.runBeforeCommand="command:run:before:",o.abort="command:abort:",o.stop="command:stop",o.stopCommand="command:stop:",o.stopBeforeCommand="command:stop:before:",o.call="command:call",o.callCommand="command:call:"})(e||(e={}));const r=e},9484:(i,n,t)=>{t.r(n),t.d(n,{default:()=>e});const e={run:function(r){r.Components.clear(),r.Css.clear()}}},9516:(i,n,t)=>{t.r(n),t.d(n,{default:()=>a});var e=t(5706),r=t(9966),o=t(6294);const a={run:function(s){(0,e.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=s,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(s){this.toggleMove(),this.disableDragger()},onKeyUp:function(s){(0,o.Ch)(s)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(s){this.toggleDragger(1,s)},disableDragger:function(s){this.toggleDragger(0,s)},toggleDragger:function(s,u){var c=this,h=c.canvasModel,v=c.em,m=this.dragger,y=s?"add":"remove";this.getCanvas().classList[y]("".concat(this.ppfx,"is__grabbing")),m||(m=new r.A({getPosition:function(){return{x:h.get("x"),y:h.get("y")}},setPosition:function(_){var C=_.x,E=_.y;h.set({x:C,y:E})},onStart:function(_,C){v.trigger("canvas:move:start",C)},onDrag:function(_,C){v.trigger("canvas:move",C)},onEnd:function(_,C){v.trigger("canvas:move:end",C)}}),this.dragger=m),s?m.start(u):m.stop()},toggleMove:function(s){var u=this.ppfx,c=s?"add":"remove",h=s?"on":"off",v={on:o.on,off:o.AU},m=this.getCanvas(),y=["".concat(u,"is__grab")];!s&&y.push("".concat(u,"is__grabbing")),y.forEach(function(_){return m.classList[c](_)}),v[h](document,"keyup",this.onKeyUp),v[h](m,"mousedown",this.enableDragger),v[h](document,"mouseup",this.disableDragger)}}},9946:(i,n,t)=>{t.r(n),t.d(n,{default:()=>c,defineCommand:()=>s});var e=t(9156),r=t(1738),o=function(){var h=function(v,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,_){y.__proto__=_}||function(y,_){for(var C in _)Object.prototype.hasOwnProperty.call(_,C)&&(y[C]=_[C])},h(v,m)};return function(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");h(v,m);function y(){this.constructor=v}v.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}}(),a=function(){return a=Object.assign||function(h){for(var v,m=1,y=arguments.length;m<y;m++){v=arguments[m];for(var _ in v)Object.prototype.hasOwnProperty.call(v,_)&&(h[_]=v[_])}return h},a.apply(this,arguments)};function s(h){return h}var u=function(h){o(v,h);function v(m){var y=h.call(this,0)||this;y.config=m||{},y.em=y.config.em||{};var _=y.config.stylePrefix;return y.pfx=_,y.ppfx=y.config.pStylePrefix,y.hoverClass="".concat(_,"hover"),y.badgeClass="".concat(_,"badge"),y.plhClass="".concat(_,"placeholder"),y.freezClass="".concat(y.ppfx,"freezed"),y.canvas=y.em.Canvas,y.init(y.config),y}return v.prototype.onFrameScroll=function(m){},v.prototype.getCanvas=function(){return this.canvas.getElement()},v.prototype.getCanvasBody=function(){return this.canvas.getBody()},v.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},v.prototype.offset=function(m){var y=m.getBoundingClientRect();return{top:y.top+m.ownerDocument.body.scrollTop,left:y.left+m.ownerDocument.body.scrollLeft}},v.prototype.init=function(m){},v.prototype.callRun=function(m,y){y===void 0&&(y={});var _=this.id;if(m.trigger("".concat(r.A.runBeforeCommand).concat(_),{options:y}),y.abort){m.trigger("".concat(r.A.abort).concat(_),{options:y});return}var C=y.sender||m,E=this.run(m,C,y),D={id:_,result:E,options:y},F=a(a({},D),{type:"run"});return this.noStop||(m.Commands.active[_]=E),m.trigger("".concat(r.A.runCommand).concat(_),D),m.trigger("".concat(r.A.callCommand).concat(_),F),m.trigger(r.A.run,D),m.trigger(r.A.call,F),E},v.prototype.callStop=function(m,y){y===void 0&&(y={});var _=this.id,C=y.sender||m;m.trigger("".concat(r.A.stopBeforeCommand).concat(_),{options:y});var E=this.stop(m,C,y),D={id:_,result:E,options:y},F=a(a({},D),{type:"stop"});return delete m.Commands.active[_],m.trigger("".concat(r.A.stopCommand).concat(_),D),m.trigger("".concat(r.A.callCommand).concat(_),F),m.trigger(r.A.stop,D),m.trigger(r.A.call,F),E},v.prototype.stopCommand=function(m){this.em.Commands.stop(this.id,m)},v.prototype.run=function(m,y,_){},v.prototype.stop=function(m,y,_){},v}(e.Kx);const c=u},7801:(i,n,t)=>{t.r(n),t.d(n,{default:()=>a});var e=t(5706),r=function(s,u,c){if(c||arguments.length===2)for(var h=0,v=u.length,m;h<v;h++)(m||!(h in u))&&(m||(m=Array.prototype.slice.call(u,0,h)),m[h]=u[h]);return s.concat(m||Array.prototype.slice.call(u))},o={run:function(s,u,c){var h=this;c===void 0&&(c={});var v=[],m=c.component||s.getSelectedAll();return m=(0,e.isArray)(m)?r([],m,!0):[m],m.filter(Boolean).forEach(function(y){var _,C;if(!y.get("removable"))return h.em.logWarning("The element is not removable",{component:y});v.push(y);var E=((C=(_=y.delegate)===null||_===void 0?void 0:_.remove)===null||C===void 0?void 0:C.call(_,y))||y;E.remove()}),s.selectRemove(v),v}};const a=o},4864:(i,n,t)=>{t.r(n),t.d(n,{default:()=>u});var e=t(5706),r=t(9966),o=t(1166),a=function(){return a=Object.assign||function(c){for(var h,v=1,m=arguments.length;v<m;v++){h=arguments[v];for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(c[y]=h[y])}return c},a.apply(this,arguments)},s="dmode";const u={run:function(c,h,v){var m=this,y,_;if(v===void 0&&(v={}),(0,e.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget"),!v.target)throw new Error("Target option is required");var C=a({doc:(y=v.target.getEl())===null||y===void 0?void 0:y.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){var D;return(D=m.guidesStatic)!==null&&D!==void 0?D:[]},guidesTarget:function(){var D;return(D=m.guidesTarget)!==null&&D!==void 0?D:[]}},(_=v.dragger)!==null&&_!==void 0?_:{});this.setupGuides(),this.opts=v,this.editor=c,this.em=c.getModel(),this.target=v.target,this.isTran=v.mode=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var E=this.dragger;return E?E.setOptions(C):(E=new r.A(C),this.dragger=E),v.event&&E.start(v.event),this.toggleDrag(!0),this.em.trigger("".concat(s,":start"),this.getEventOpts()),E},getEventOpts:function(){var c,h,v=(h=(c=this.guidesTarget)===null||c===void 0?void 0:c.filter(function(m){return m.active}))!==null&&h!==void 0?h:[];return{mode:this.opts.mode,component:this.target,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic,guidesMatched:this.getGuidesMatched(v),command:this}},stop:function(){this.toggleDrag()},setupGuides:function(){var c;((c=this.guides)!==null&&c!==void 0?c:[]).forEach(function(h){var v,m=h.guide;(v=m==null?void 0:m.parentNode)===null||v===void 0||v.removeChild(m)}),this.guides=[]},getGuidesContainer:function(){var c=this,h,v,m,y,_=this.guidesEl;if(!_){var C=this,E=C.editor,D=C.em,F=C.opts,V=(h=E.getConfig().stylePrefix)!==null&&h!==void 0?h:"",K=document.createElement("div"),Z=document.createElement("div"),ct='<div class="'.concat(V,"guide-info__line ").concat(V,`danger-bg">
        <div class="`).concat(V,"guide-info__content ").concat(V,`danger-color"></div>
      </div>`);_=document.createElement("div"),_.className="".concat(V,"guides"),K.className="".concat(V,"guide-info ").concat(V,"guide-info__x"),Z.className="".concat(V,"guide-info ").concat(V,"guide-info__y"),K.innerHTML=ct,Z.innerHTML=ct,_.appendChild(K),_.appendChild(Z),(v=E.Canvas.getGlobalToolsEl())===null||v===void 0||v.appendChild(_),this.guidesEl=_,this.elGuideInfoX=K,this.elGuideInfoY=Z,this.elGuideInfoContentX=(m=K.querySelector(".".concat(V,"guide-info__content")))!==null&&m!==void 0?m:void 0,this.elGuideInfoContentY=(y=Z.querySelector(".".concat(V,"guide-info__content")))!==null&&y!==void 0?y:void 0,D.on("canvas:update frame:scroll",(0,e.debounce)(function(){var ht;c.updateGuides(),F.debug&&((ht=c.guides)===null||ht===void 0||ht.forEach(function(st){return c.renderGuide(st)}))},200))}return _},getGuidesStatic:function(){var c=this,h=[],v=this.target.getEl(),m=v==null?void 0:v.parentElement;return m?((0,e.each)(m.children,function(y){return h=h.concat(v!==y?c.getElementGuides(y):[])}),h.concat(this.getElementGuides(m))):[]},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(c){var h=this,v,m,y,_=(v=c??this.guides)!==null&&v!==void 0?v:[];_.forEach(function(C){var E=C.origin,D=m===E?y:h.getElementPos(E);m=E,y=D,(0,e.each)(h.getGuidePosUpdate(C,D),function(F,V){C[V]=F}),C.originRect=D})},getGuidePosUpdate:function(c,h){var v={},m=h.top,y=h.height,_=h.left,C=h.width;switch(c.type){case"t":v.y=m;break;case"b":v.y=m+y;break;case"l":v.x=_;break;case"r":v.x=_+C;break;case"x":v.x=_+C/2;break;case"y":v.y=m+y/2;break}return v},renderGuide:function(c){var h,v;if(!this.opts.skipGuidesRender){var m=(h=c.guide)!==null&&h!==void 0?h:document.createElement("div"),y="px",_=c.active?2:1;if(m.style.cssText="position: absolute; background-color: ".concat(c.active?"green":"red",";"),!m.children.length){var C=document.createElement("div");C.style.cssText="position: absolute; color: red; padding: 5px; top: 0; left: 0;",m.appendChild(C)}return c.y?(m.style.width="100%",m.style.height="".concat(_).concat(y),m.style.top="".concat(c.y).concat(y),m.style.left="0"):(m.style.width="".concat(_).concat(y),m.style.height="100%",m.style.left="".concat(c.x).concat(y),m.style.top="0".concat(y)),!c.guide&&((v=this.guidesContainer)===null||v===void 0||v.appendChild(m)),m}},getElementPos:function(c){return this.editor.Canvas.getElementPos(c,{noScroll:1})},getElementGuides:function(c){var h=this,v=this.opts,m=c,y=this.getElementPos(c),_=(0,o.getComponentModel)(c),C=(0,o.getComponentView)(c),E=y.top,D=y.height,F=y.left,V=y.width,K=[{type:"t",y:E},{type:"b",y:E+D},{type:"l",x:F},{type:"r",x:F+V},{type:"x",x:F+V/2},{type:"y",y:E+D/2}],Z=K.map(function(ct){var ht=v.debug?h.renderGuide(ct):void 0;return a(a({},ct),{component:_,componentView:C,componentEl:m,origin:m,componentElRect:y,originRect:y,guideEl:ht,guide:ht})});return Z.forEach(function(ct){var ht;return(ht=h.guides)===null||ht===void 0?void 0:ht.push(ct)}),Z},getTranslate:function(c,h){h===void 0&&(h="x");var v=0;return(c||"").split(" ").forEach(function(m){var y=m.trim(),_="translate".concat(h.toUpperCase(),"(");y.indexOf(_)===0&&(v=parseFloat(y.replace(_,"")))}),v},setTranslate:function(c,h,v){var m="translate".concat(h.toUpperCase(),"("),y="".concat(m).concat(v,")"),_=(c||"").split(" ").map(function(C){var E=C.trim();return E.indexOf(m)===0&&(C=y),C}).join(" ");return _.indexOf(m)<0&&(_+=" ".concat(y)),_},getPosition:function(){var c=this,h=c.target,v=c.isTran,m=h.getStyle(),y=m.transform,_=m.left,C=m.top,E=0,D=0;return v&&y?(E=this.getTranslate(y),D=this.getTranslate(y,"y")):(E=parseFloat(_??"0"),D=parseFloat(C??"0")),{x:E,y:D}},setPosition:function(c){var h,v,m=c.x,y=c.y,_=c.end,C=c.position,E=c.width,D=c.height,F=this,V=F.target,K=F.isTran,Z=F.em,ct=F.opts,ht="px",st=!_,et="".concat(parseInt("".concat(m),10)).concat(ht),nt="".concat(parseInt("".concat(y),10)).concat(ht),it={};if(K){var $=(v=(h=V.getStyle())===null||h===void 0?void 0:h.transform)!==null&&v!==void 0?v:"";$=this.setTranslate($,"x",et),$=this.setTranslate($,"y",nt),it={transform:$,__p:st}}else{var ft={position:C,width:E,height:D},lt={left:et,top:nt,__p:st};(0,e.keys)(ft).forEach(function(St){var U=ft[St];U&&(lt[St]=U)}),it=lt}ct.addStyle?ct.addStyle({component:V,styles:it,partial:!_}):V.addStyle(it,{avoidStore:!_}),Z.Styles.__emitCmpStyleUpdate(it,{components:Z.getSelected()})},_getDragData:function(){var c=this.target;return{target:c,parent:c.parent(),index:c.index()}},onStart:function(c){var h,v=this,m=v.target,y=v.editor,_=v.isTran,C=v.opts,E=y.Canvas,D=m.getStyle(),F="absolute",V=[F,"relative"];if((h=C.onStart)===null||h===void 0||h.call(C,this._getDragData()),!_){if(D.position!==F){var K=E.offset(m.getEl()),Z=K.left,ct=K.top,ht=K.width,st=K.height,et=m.parent(),nt=null;do{var it=et==null?void 0:et.getStyle(),$=it==null?void 0:it.position;$&&(nt=V.indexOf($)>=0?et:null),et=et==null?void 0:et.parent()}while(et&&!nt);if(C.center){var ft=E.getMouseRelativeCanvas(c),lt=ft.x,St=ft.y;Z=lt,ct=St}else if(nt){var U=E.offset(nt.getEl());Z=Z-U.left,ct=ct-U.top}this.setPosition({x:Z,y:ct,width:"".concat(ht,"px"),height:"".concat(st,"px"),position:F})}this.guidesStatic=this.getGuidesStatic()}},onDrag:function(c){var h=this,v,m,y=this,_=y.guidesTarget,C=y.opts;this.updateGuides(_),C.debug&&(_==null||_.forEach(function(E){return h.renderGuide(E)})),C.guidesInfo&&this.renderGuideInfo((v=_==null?void 0:_.filter(function(E){return E.active}))!==null&&v!==void 0?v:[]),(m=C.onDrag)===null||m===void 0||m.call(C,this._getDragData()),this.opts.event=c,this.em.trigger("".concat(s,":move"),this.getEventOpts())},onEnd:function(c,h,v){var m,y=this,_=y.editor,C=y.opts,E=y.id;(m=C.onEnd)===null||m===void 0||m.call(C,c,v,a(a({event:c},v),this._getDragData())),_.stopCommand("".concat(E)),this.hideGuidesInfo(),this.em.trigger("".concat(s,":end"),this.getEventOpts())},hideGuidesInfo:function(){var c=this;["X","Y"].forEach(function(h){var v=c["elGuideInfo".concat(h)];v&&(v.style.display="none")})},renderGuideInfo:function(c){var h=this;c===void 0&&(c=[]),this.hideGuidesInfo();var v=this.getGuidesMatched(c);v.forEach(function(m){h.opts.skipGuidesRender||h.renderSingleGuideInfo(m),h.em.trigger("".concat(s,":active"),a(a({},h.getEventOpts()),m))})},renderSingleGuideInfo:function(c){var h=c.posFirst,v=c.posSecond,m=c.size,y=c.sizeRaw,_=c.guide,C=c.elGuideInfo,E=c.elGuideInfoCnt,D=(0,e.isUndefined)(_.x)?"y":"x",F=D==="y",V=C.style;V.display="",V[F?"top":"left"]="".concat(h,"px"),V[F?"left":"top"]="".concat(v,"px"),V[F?"width":"height"]="".concat(m,"px"),E.innerHTML="".concat(Math.round(y),"px")},getGuidesMatched:function(c){var h=this;c===void 0&&(c=[]);var v=this.guidesStatic,m=v===void 0?[]:v;return c.map(function(y){var _=y.origin,C=y.x,E=h.getElementPos(_),D=(0,e.isUndefined)(C)?"y":"x",F=D==="y",V=E[F?"left":"top"],K=E.rect[F?"left":"top"],Z=F?V+E.width:V+E.height,ct=F?K+E.rect.width:K+E.rect.height,ht=m.filter(function(Xt){var Qt,ne={l:["r","x"],r:["l","x"],x:["l","r"],t:["b","y"],b:["t","y"],y:["t","b"]};return Xt.type===y.type||((Qt=ne[y.type])===null||Qt===void 0?void 0:Qt.includes(Xt.type))}).map(function(Xt){var Qt=Xt.originRect,ne=Qt.left,be=Qt.width,Pe=Qt.top,Ee=Qt.height,Oe=F?ne:Pe,Ke=F?ne+be:Pe+Ee;return{gap:Ke<V?V-Ke:Oe-Z,guide:Xt}}).filter(function(Xt){return Xt.gap>0}).sort(function(Xt,Qt){return Xt.gap-Qt.gap}).map(function(Xt){return Xt.guide}).filter(function(Xt){switch(y.type){case"l":case"r":case"x":return Math.abs(Xt.x-y.x)<1;case"t":case"b":case"y":return Math.abs(Xt.y-y.y)<1;default:return!1}}),st=ht[0];if(st){var et=st.originRect,nt=et.left,it=et.width,$=et.top,ft=et.height,lt=et.rect,St=F?nt<E.left:$<E.top,U=F?nt:$,_t=F?lt.left:lt.top,Ot=F?nt+it:$+ft,zt=F?lt.left+lt.width:lt.top+lt.height,pt=F?y.y:y.x,Dt=St?Ot:Z,yt=St?V-Ot:U-Z,kt=St?K-zt:_t-ct,Mt=h["elGuideInfo".concat(D.toUpperCase())],Kt=h["elGuideInfoContent".concat(D.toUpperCase())];return{guide:y,guidesStatic:m,matched:st,posFirst:pt,posSecond:Dt,size:yt,sizeRaw:kt,elGuideInfo:Mt,elGuideInfoCnt:Kt}}else return null}).filter(Boolean)},toggleDrag:function(c){var h=this,v=h.ppfx,m=h.editor,y=c?"add":"remove",_=["".concat(v,"is__grabbing")],C=m.Canvas,E=C.getBody();_.forEach(function(D){return E.classList[y](D)}),C[c?"startAutoscroll":"stopAutoscroll"]()},editor:void 0,em:void 0,opts:void 0,target:void 0}},6134:(i,n,t)=>{t.r(n),t.d(n,{default:()=>e});const e={run:function(r){if(r.Canvas.hasFocus()){var o=[];r.getSelectedAll().forEach(function(a){var s=a.components(),u=s&&s.filter(function(c){return c.get("selectable")})[0];u&&o.push(u)}),o.length&&r.select(o)}}}},914:(i,n,t)=>{t.r(n),t.d(n,{default:()=>e});const e={run:function(r,o,a){if(a===void 0&&(a={}),!(!r.Canvas.hasFocus()&&!a.force)){var s=[];r.getSelectedAll().forEach(function(u){for(var c=u.parent();c&&!c.get("selectable");)c=c.parent();c&&s.push(c)}),s.length&&r.select(s)}}}},5547:(i,n,t)=>{t.r(n),t.d(n,{default:()=>e});const e={run:function(r){if(r.Canvas.hasFocus()){var o=[];r.getSelectedAll().forEach(function(a){var s=a.parent();if(s){var u=s.components().length,c=0,h=0,v;do c++,h=a.index()+c,v=h<=u?s.getChildAt(h):null;while(v&&!v.get("selectable"));o.push(v||a)}}),o.length&&r.select(o)}}}},8655:(i,n,t)=>{t.r(n),t.d(n,{default:()=>e});const e={run:function(r){if(r.Canvas.hasFocus()){var o=[];r.getSelectedAll().forEach(function(a){var s=a.parent();if(s){var u=0,c=0,h;do u++,c=a.index()-u,h=c>=0?s.getChildAt(c):null;while(h&&!h.get("selectable"));o.push(h||a)}}),o.length&&r.select(o)}}}},7640:(i,n,t)=>{t.r(n),t.d(n,{default:()=>r});var e=t(5706);const r={run:function(o,a,s){s===void 0&&(s={});var u=s.target,c=[];if(!u.get("styles"))return c;var h=u.get("type"),v=o.Pages.getAllWrappers(),m=(0,e.flatten)(v.map(function(_){return _.findType(h)})).length;if(!m){var y=o.CssComposer.getAll();c=y.filter(function(_){return _.get("group")==="cmp:".concat(h)}),y.remove(c)}return c}}},5837:(i,n,t)=>{t.r(n),t.d(n,{default:()=>r});var e=function(o,a,s){if(s||arguments.length===2)for(var u=0,c=a.length,h;u<c;u++)(h||!(u in a))&&(h||(h=Array.prototype.slice.call(a,0,u)),h[u]=a[u]);return o.concat(h||Array.prototype.slice.call(a))};const r={run:function(o){var a=o.getModel(),s=e([],o.getSelectedAll(),!0).map(function(u){var c,h;return((h=(c=u.delegate)===null||c===void 0?void 0:c.copy)===null||h===void 0?void 0:h.call(c,u))||u}).filter(Boolean);s.length&&a.set("clipboard",s)}}},6477:(i,n,t)=>{t.r(n),t.d(n,{default:()=>r});var e=t(6294);const r={run:function(o,a,s){var u=this;s===void 0&&(s={}),a&&a.set&&a.set("active",0);var c=o.getConfig(),h=o.Modal,v=c.stylePrefix;if(this.cm=o.CodeManager||null,!this.editors){var m=this.buildEditor("htmlmixed","hopscotch","HTML"),y=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=m.model,this.cssEditor=y.model;var _=(0,e.a_)("div",{class:"".concat(v,"export-dl")});_.appendChild(m.el),_.appendChild(y.el),this.editors=_}h.open({title:c.textViewCode,content:this.editors}).getModel().once("change:open",function(){return o.stopCommand("".concat(u.id))}),this.htmlEditor.setContent(o.getHtml(s.optsHtml)),this.cssEditor.setContent(o.getCss(s.optsCss))},stop:function(o){var a=o.Modal;a&&a.close()},buildEditor:function(o,a,s){var u=this.em.CodeManager,c=u.createViewer({label:s,codeName:o,theme:a}),h=new u.EditorView({model:c,config:u.getConfig()}).render().el;return{model:c,el:h}}}},1772:(i,n,t)=>{t.r(n),t.d(n,{default:()=>r});var e=t(5706);const r={isEnabled:function(){var o=document;return!!(o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement)},enable:function(o){var a="";return o.requestFullscreen?o.requestFullscreen():o.webkitRequestFullscreen?(a="webkit",o.webkitRequestFullscreen()):o.mozRequestFullScreen?(a="moz",o.mozRequestFullScreen()):o.msRequestFullscreen&&o.msRequestFullscreen(),a},disable:function(){var o=document;this.isEnabled()&&(o.exitFullscreen?o.exitFullscreen():o.webkitExitFullscreen?o.webkitExitFullscreen():o.mozCancelFullScreen?o.mozCancelFullScreen():o.msExitFullscreen&&o.msExitFullscreen())},fsChanged:function(o){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(o||"","fullscreenchange"),this.fsChanged))},run:function(o,a,s){s===void 0&&(s={}),this.sender=a;var u=s.target,c=(0,e.isElement)(u)?u:document.querySelector(u),h=this.enable(c||o.getContainer());this.fsChanged=this.fsChanged.bind(this,h),document.addEventListener(h+"fullscreenchange",this.fsChanged)},stop:function(o,a){a&&a.set&&a.set("active",!1),this.disable()}}},741:(i,n,t)=>{t.r(n),t.d(n,{default:()=>u});var e=t(5706),r=t(7774),o=t(6294),a=t(9317),s=t(1406);const u=(0,e.extend)({},s.default,a.default,{init:function(c){a.default.init.apply(this,arguments),(0,e.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=c,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];a.default.enable.apply(this,c),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var v=this.$wrapper;v.css("cursor","move"),v.on("mousedown",this.initSorter),v.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(c){var h=(0,r.default)(c.target).data("model"),v=h.get("draggable");v&&(this.cacheEl=null,this.startSelectPosition(c.target,this.frameEl.contentDocument),this.sorter.draggable=v,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,o.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(c){var h=c.get("draggable");if(h){this.cacheEl=null;var v=c.view.el;this.startSelectPosition(v,this.frameEl.contentDocument),this.sorter.draggable=h,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,o.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(c){this.cacheEl=null;var h=c[c.length-1],v=this.em.getCurrentFrame(),m=h.getEl(v==null?void 0:v.model),y=m.ownerDocument,_=c.map(function(C){var E;return(E=C==null?void 0:C.view)===null||E===void 0?void 0:E.el});this.startSelectPosition(_,y,{onStart:this.onStart}),this.sorter.eventHandlers.legacyOnMoveClb=this.onDrag,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,o.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,o.AU)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,o.AU)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(c,h){},rollback:function(c,h){var v=c.which||c.keyCode;(v==27||h)&&this.sorter.cancelDrag()},getBadgeEl:function(){return this.$badge||(this.$badge=(0,r.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,r.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];a.default.stop.apply(this,c),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var v=this.$wrapper;v.css("cursor","").unbind().removeClass(this.noSelClass)}})},2924:(i,n,t)=>{t.r(n),t.d(n,{default:()=>o});var e=t(5706),r=t(6294);const o={open:function(a){var s=this,u=this,c=u.editor,h=u.title,v=u.config,m=u.am,y=v.custom;if((0,e.isFunction)(y.open))return y.open(m.__customData());var _=c.Modal;_.open({title:h,content:a}).onceClose(function(){return c.stopCommand(s.id)})},close:function(){var a=this.config.custom;if((0,e.isFunction)(a.close))return a.close(this.am.__customData());var s=this.editor.Modal;s&&s.close()},run:function(a,s,u){u===void 0&&(u={});var c=a.AssetManager,h=c.getConfig(),v=u.types,m=v===void 0?[]:v,y=u.accept,_=u.select;if(this.title=u.modalTitle||a.t("assetManager.modalTitle")||"",this.editor=a,this.config=h,this.am=c,c.setTarget(u.target),c.onClick(u.onClick),c.onDblClick(u.onDblClick),c.onSelect(u.onSelect),c.__behaviour({select:_,types:m,options:u}),h.custom)this.rendered=this.rendered||(0,r.a_)("div"),this.rendered.className="".concat(h.stylePrefix,"custom-wrp"),c.__behaviour({container:this.rendered}),c.__trgCustom();else{if(!this.rendered||m){var C=c.getAll().filter(function(D){return D});m&&m.length&&(C=C.filter(function(D){return m.indexOf(D.get("type"))!==-1})),c.render(C),this.rendered=c.getContainer()}if(y){var E=this.rendered.querySelector("input#".concat(h.stylePrefix,"uploadFile"));E&&E.setAttribute("accept",y)}}return this.open(this.rendered),this},stop:function(a){this.editor=a,this.close(this.rendered)}}},3963:(i,n,t)=>{t.r(n),t.d(n,{default:()=>o});var e=t(5706),r=t(6294);const o={open:function(){var a=this,s=a.container,u=a.editor,c=a.bm,h=a.config,v=h.custom,m=h.appendTo;if((0,e.isFunction)(v.open))return v.open(c.__customData());if(this.firstRender&&!m){var y="views-container",_=u.Panels,C=_.getPanel(y)||_.addPanel({id:y});C.set("appendContent",s).trigger("change:appendContent"),v||s.appendChild(c.render())}s&&(s.style.display="block")},close:function(){var a=this,s=a.container,u=a.config,c=u.custom;if((0,e.isFunction)(c.close))return c.close(this.bm.__customData());s&&(s.style.display="none")},run:function(a){var s=a.Blocks;this.config=s.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,r.a_)("div"),this.editor=a,this.bm=s;var u=this.container;s.__behaviour({container:u}),this.config.custom&&s.__trgCustom(),this.open()},stop:function(){this.close()}}},1479:(i,n,t)=>{t.r(n),t.d(n,{default:()=>e});const e={run:function(r){var o=r.LayerManager,a=r.Panels,s=o.getConfig();if(!s.appendTo){if(!this.layers){var u="views-container",c=document.createElement("div"),h=a.getPanel(u)||a.addPanel({id:u});s.custom?o.__trgCustom({container:c}):c.appendChild(o.render()),h.set("appendContent",c).trigger("change:appendContent"),this.layers=c}this.layers.style.display="block"}},stop:function(){var r=this.layers;r&&(r.style.display="none")}}},3473:(i,n,t)=>{t.r(n),t.d(n,{default:()=>r});var e=t(7774);const r={run:function(o,a){if(this.sender=a,!this.$cnt){var s=o.getConfig(),u=o.Panels,c=o.DeviceManager,h=o.SelectorManager,v=o.StyleManager,m="change:appendContent",y=(0,e.default)("<div></div>"),_=(0,e.default)("<div></div>"),C=(0,e.default)("<div></div>"),E=(0,e.default)("<div></div>");if(this.$cnt=y,this.$cntInner=_,_.append(C),_.append(E),y.append(_),c&&s.showDevices){var D=u.addPanel({id:"devices-c"}),F=c.render();D.set("appendContent",F).trigger(m)}var V=h.getConfig();V.custom?h.__trgCustom({container:C.get(0)}):V.appendTo||C.append(h.render([])),this.sm=v;var K=v.getConfig(),Z=K.stylePrefix;this.$header=(0,e.default)('<div class="'.concat(Z,'header">').concat(o.t("styleManager.empty"),"</div>")),y.append(this.$header),K.custom?v.__trgCustom({container:E.get(0)}):K.appendTo||E.append(v.render());var ct="views-container",ht=u.getPanel(ct)||u.addPanel({id:ct});ht.set("appendContent",y).trigger(m);var st=o.getModel();this.listenTo(st,v.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var o=this,a=o.sender,s=o.sm,u=o.$cntInner,c=o.$header;a&&a.get&&!a.get("active")||!s||(s.getSelected()?(u==null||u.show(),c==null||c.hide()):(u==null||u.hide(),c==null||c.show()))},stop:function(){var o,a;(o=this.$cntInner)===null||o===void 0||o.hide(),(a=this.$header)===null||a===void 0||a.hide()}}},5054:(i,n,t)=>{t.r(n),t.d(n,{default:()=>r});var e=t(7774);const r={run:function(o,a){this.sender=a;var s=o.getModel(),u=o.Config,c=u.stylePrefix,h=o.TraitManager,v=h.getConfig(),m;if(!v.appendTo){if(!this.$cn){this.$cn=(0,e.default)("<div></div>"),this.$cn2=(0,e.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,e.default)("<div>").append('<div class="'.concat(v.stylePrefix,'header">').concat(s.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),v.custom?h.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append('<div class="'.concat(c,'traits-label">').concat(s.t("traitManager.label"),"</div>")),this.$cn2.append(h.render()));var y=o.Panels;y.getPanel("views-container")?m=y.getPanel("views-container"):m=y.addPanel({id:"views-container"}),m==null||m.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=o.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var o=this.sender;o&&o.get&&!o.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},6979:(i,n,t)=>{t.r(n),t.d(n,{default:()=>r});var e=t(5706);const r={run:function(a,s,u){u===void 0&&(u={});var c=a.getModel(),h=c.get("clipboard"),v=a.getSelected();h!=null&&h.length&&v&&(a.getSelectedAll().forEach(function(m){var y,_,C,E=((_=(y=m.delegate)===null||y===void 0?void 0:y.copy)===null||_===void 0?void 0:_.call(y,m))||m,D=E.collection,F;if(D){var V=E.index()+1,K={at:V,action:u.action||"paste-component"};(0,e.contains)(h,E)&&E.get("copyable")?F=D.add(E.clone(),K):F=o(a,h,E.parent(),K)}else{var Z=(C=c.Pages.getSelected())===null||C===void 0?void 0:C.getMainComponent(),K={at:(Z==null?void 0:Z.components().length)||0,action:u.action||"paste-component"};F=o(a,h,Z,K)}F=(0,e.isArray)(F)?F:[F],F.forEach(function(ct){return a.trigger("component:paste",ct)})}),v.emitUpdate())}};function o(a,s,u,c){var h=s.filter(function(m){return m.get("copyable")}),v=h.filter(function(m){return a.Components.canMove(u,m).result});return u.components().add(v.map(function(m){return m.clone()}),c)}},4457:(i,n,t)=>{t.r(n),t.d(n,{default:()=>a});var e=t(5706),r=function(s,u,c){if(c||arguments.length===2)for(var h=0,v=u.length,m;h<v;h++)(m||!(h in u))&&(m||(m=Array.prototype.slice.call(u,0,h)),m[h]=u[h]);return s.concat(m||Array.prototype.slice.call(u))},o="core:component-outline";const a={getPanels:function(s){return this.panels||(this.panels=s.Panels.getPanels()),this.panels},preventDrag:function(s){s.abort=1},tglEffects:function(s){var u=this.em,c=s?"on":"off";if(u){var h=u.Canvas,v=h.getBody(),m=h.getToolbarEl();m&&(m.style.display=s?"none":"");var y=v.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,e.each)(y,function(_){return _.style.pointerEvents=s?"all":""}),u[c]("run:tlb-move:before",this.preventDrag)}},run:function(s,u){var c=this;this.sender=u,this.selected=r([],s.getSelectedAll(),!0),s.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=s.Commands.isActive(o)),this.shouldRunSwVisibility&&s.stopCommand(o),s.getModel().stopDefault();var h=this.getPanels(s),v=s.Canvas.getElement(),m=s.getEl(),y=s.Config.stylePrefix;if(!this.helper){var _=document.createElement("span");_.className="".concat(y,"off-prv fa fa-eye-slash"),m.appendChild(_),_.onclick=function(){return c.stopCommand()},this.helper=_}this.helper.style.display="inline-block",h.forEach(function(E){return E.set("visible",!1)});var C=v.style;C.width="100%",C.height="100%",C.top="0",C.left="0",C.padding="0",C.margin="0",s.refresh(),this.tglEffects(1)},stop:function(s){var u=this,c=u.sender,h=c===void 0?{}:c,v=u.selected;h.set&&h.set("active",0);var m=this.getPanels(s);this.shouldRunSwVisibility&&(s.runCommand(o),this.shouldRunSwVisibility=!1),s.getModel().runDefault(),m.forEach(function(_){return _.set("visible",!0)});var y=s.Canvas.getElement();y.setAttribute("style",""),v&&s.select(v),delete this.selected,this.helper&&(this.helper.style.display="none"),s.refresh(),this.tglEffects()}}},5493:(i,n,t)=>{t.r(n),t.d(n,{ConvertUnitsToPx:()=>s,default:()=>u});var e=t(2225),r=t(1166),o=function(){return o=Object.assign||function(c){for(var h,v=1,m=arguments.length;v<m;v++){h=arguments[v];for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(c[y]=h[y])}return c},o.apply(this,arguments)},a=function(c,h){var v={};for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&h.indexOf(m)<0&&(v[m]=c[m]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,m=Object.getOwnPropertySymbols(c);y<m.length;y++)h.indexOf(m[y])<0&&Object.prototype.propertyIsEnumerable.call(c,m[y])&&(v[m[y]]=c[m[y]]);return v},s;(function(c){c.pt="pt",c.pc="pc",c.in="in",c.cm="cm",c.mm="mm",c.vw="vw",c.vh="vh",c.vmin="vmin",c.vmax="vmax",c.svw="svw",c.lvw="lvw",c.dvw="dvw",c.svh="svh",c.lvh="lvh",c.dvh="dvh",c.perc="%"})(s||(s={}));const u={run:function(c,h,v){var m=this,y=c.Canvas,_=c.Utils,C=c.em,E=y.getCanvasView(),D=C.config.stylePrefix||"",F="".concat(D,"resizing"),V=v.onStart,K=V===void 0?function(){}:V,Z=v.onMove,ct=Z===void 0?function(){}:Z,ht=v.onEnd,st=ht===void 0?function(){}:ht,et=v.updateTarget,nt=et===void 0?function(){}:et,it=v.el,$=v.componentView,ft=v.component,lt=v.skipPositionUpdate,St=a(v,["onStart","onMove","onEnd","updateTarget","el","componentView","component","skipPositionUpdate"]),U=it||($==null?void 0:$.el)||ft.getEl(),_t={component:ft,el:U},Ot,zt,pt=function(kt,Mt,Kt){var Xt=Kt.docs;Xt&&Xt.forEach(function(Qt){var ne=Qt.body,be=ne.className||"";ne.className=(kt=="add"?"".concat(be," ").concat(F):be.replace(F,"")).trim()})},Dt=o(o({appendTo:y.getResizerEl(),prefix:c.getConfig().stylePrefix,posFetcher:E.getElementPos.bind(E),mousePosFetcher:y.getMouseRelativePos.bind(y),docs:[document],updateOnMove:!0,skipUnitAdjustments:!0,onStart:function(kt,Mt){var Kt;K(kt,Mt);var Xt=Mt.el,Qt=Mt.config,ne=Mt.resizer,be=Qt.keyHeight,Pe=Qt.keyWidth,Ee=Qt.currentUnit,Oe=Qt.keepAutoHeight,Ke=Qt.keepAutoWidth;pt("add",kt,Mt),Ot=C.Styles.getModelToStyle(ft),zt=getComputedStyle(Xt);var De=Ot.getStyle(),Ut=o({},ne.startDim),ce=De[Pe];Qt.autoWidth=Ke&&ce==="auto",isNaN(parseFloat(ce))&&(ce=zt[Pe]);var ie=De[be];Qt.autoHeight=Oe&&ie==="auto",isNaN(parseFloat(ie))&&(ie=zt[be]);var P=parseFloat(ce),k=parseFloat(ie),N=(0,r.getUnitFromValue)(ce),q=(0,r.getUnitFromValue)(ie);Ee&&(Qt.unitWidth=N,Qt.unitHeight=q);var ut=o(o({},_t),{event:kt,rect:Ut,model:Ot,modelWidth:{value:ce,property:Pe,number:P,unit:N},modelHeight:{value:ie,property:be,number:k,unit:q}});c.trigger(e.I.resizeStart,ut),c.trigger(e.I.resize,o(o({},ut),{type:"start"})),(Kt=v.afterStart)===null||Kt===void 0||Kt.call(v)},onMove:function(kt,Mt){ct(kt,Mt);var Kt=Mt.resizer,Xt=o(o({},_t),{event:kt,delta:Kt.delta,pointer:Kt.currentPos,rect:Kt.rectDim});c.trigger(e.I.resizeStart,Xt),c.trigger(e.I.resize,o(o({},Xt),{type:"move"}))},onEnd:function(kt,Mt){var Kt;st(kt,Mt),pt("remove",kt,Mt);var Xt=Mt.resizer,Qt=o(o({},_t),{event:kt,rect:Xt.rectDim,moved:Xt.moved});c.trigger(e.I.resizeEnd,Qt),c.trigger(e.I.resize,o(o({},_t),{type:"end"})),(Kt=v.afterEnd)===null||Kt===void 0||Kt.call(v)},updateTarget:function(kt,Mt,Kt){var Xt;if(nt(kt,Mt,Kt),!!Ot){var Qt=Kt.store,ne=Kt.selectedHandler,be=Kt.config,Pe=Kt.resizer,Ee=Kt.event,Oe=be.keyHeight,Ke=be.keyWidth,De=be.autoHeight,Ut=be.autoWidth,ce=be.unitWidth,ie=be.unitHeight,P=["tc","bc"].indexOf(ne)>=0,k=["cl","cr"].indexOf(ne)>=0,N=!Qt,q={};if(!P){var ut=((Xt=y.getBody())===null||Xt===void 0?void 0:Xt.offsetWidth)||0,Q=Mt.w<ut?Mt.w:ut;q[Ke]=Ut?"auto":m.convertPxToUnit({el:U,elComputedStyle:zt,valuePx:Q,unit:ce})}k||(q[Oe]=De?"auto":m.convertPxToUnit({el:U,elComputedStyle:zt,valuePx:Mt.h,unit:ie,isHeight:!0})),!lt&&C.getDragMode(ft)&&(q.top="".concat(Mt.t,"px"),q.left="".concat(Mt.l,"px"));var gt=!1,Tt=function(X){gt=!0;var L=o(o({},X||q),{__p:N});Ot.addStyle(L,{avoidStore:N}),C.Styles.__emitCmpStyleUpdate(L,{components:ft})},he=o(o({},_t),{rect:Mt,partial:N,event:Ee,style:q,updateStyle:Tt,convertPxToUnit:function(X){return m.convertPxToUnit(o({el:U,elComputedStyle:zt},X))},delta:Pe.delta,pointer:Pe.currentPos});c.trigger(e.I.resizeUpdate,he),!gt&&Tt()}}},St),v.options),yt=this.canvasResizer;return yt||(this.canvasResizer=new _.Resizer(Dt),yt=this.canvasResizer),yt.setOptions(Dt,!0),yt.blur(),yt.focus(U),yt},stop:function(){var c;(c=this.canvasResizer)===null||c===void 0||c.blur()},convertPxToUnit:function(c){var h=c.el,v=c.valuePx,m=c.unit,y=c.dpi,_=y===void 0?96:y,C=c.roundDecimals,E=C===void 0?3:C,D=c.isHeight,F=c.elComputedStyle,V=h.ownerDocument.defaultView,K=(V==null?void 0:V.innerWidth)||1,Z=window.innerHeight||1,ct=v,ht=m;switch(m){case s.pt:ct=v*(72/_);break;case s.pc:ct=v*(6/_);break;case s.in:ct=v/_;break;case s.cm:ct=v/(_/2.54);break;case s.mm:ct=v/(_/25.4);break;case s.vw:ct=v/K*100;break;case s.vh:ct=v/Z*100;break;case s.vmin:{var st=Math.min(K,Z);ct=v/st*100;break}case s.vmax:{var et=Math.max(K,Z);ct=v/et*100;break}case s.perc:{var nt=h.parentElement,it=h.offsetParent,$=(F==null?void 0:F.position)==="absolute"?it:nt,ft=($==null?void 0:$.offsetWidth)||1,lt=($==null?void 0:$.offsetHeight)||1,St=D?lt:ft;ct=v/St*100;break}case s.svw:case s.lvw:case s.dvw:ct=v/K*100;break;case s.svh:case s.lvh:case s.dvh:ct=v/Z*100;break;default:ht="px"}return"".concat(+ct.toFixed(E)).concat(ht)}}},9317:(i,n,t)=>{t.r(n),t.d(n,{default:()=>et});var e=t(5706),r=t(179),o=t(9156),a=function(){var nt=function(it,$){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ft,lt){ft.__proto__=lt}||function(ft,lt){for(var St in lt)Object.prototype.hasOwnProperty.call(lt,St)&&(ft[St]=lt[St])},nt(it,$)};return function(it,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");nt(it,$);function ft(){this.constructor=it}it.prototype=$===null?Object.create($):(ft.prototype=$.prototype,new ft)}}(),s=function(nt){a(it,nt);function it(){return nt!==null&&nt.apply(this,arguments)||this}return it.prototype.defaults=function(){return{command:"",attributes:{}}},it}(o.Kx);const u=s;var c=function(){var nt=function(it,$){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ft,lt){ft.__proto__=lt}||function(ft,lt){for(var St in lt)Object.prototype.hasOwnProperty.call(lt,St)&&(ft[St]=lt[St])},nt(it,$)};return function(it,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");nt(it,$);function ft(){this.constructor=it}it.prototype=$===null?Object.create($):(ft.prototype=$.prototype,new ft)}}(),h=function(nt){c(it,nt);function it(){return nt!==null&&nt.apply(this,arguments)||this}return it}(o.pM);const v=h;h.prototype.model=u;var m=t(2225),y=t(8242),_=function(){var nt=function(it,$){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ft,lt){ft.__proto__=lt}||function(ft,lt){for(var St in lt)Object.prototype.hasOwnProperty.call(lt,St)&&(ft[St]=lt[St])},nt(it,$)};return function(it,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");nt(it,$);function ft(){this.constructor=it}it.prototype=$===null?Object.create($):(ft.prototype=$.prototype,new ft)}}(),C=function(){return C=Object.assign||function(nt){for(var it,$=1,ft=arguments.length;$<ft;$++){it=arguments[$];for(var lt in it)Object.prototype.hasOwnProperty.call(it,lt)&&(nt[lt]=it[lt])}return nt},C.apply(this,arguments)},E=function(nt){_(it,nt);function it($){var ft=nt.call(this,$)||this;return ft.em=$.config.em,ft}return it.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},it.prototype.attributes=function(){return this.model.get("attributes")},it.prototype.handleClick=function($){$.preventDefault(),$.stopPropagation();var ft=this.em,lt=ft.Canvas.getFrameEl().getBoundingClientRect(),St=lt.left,U=lt.top,_t=C(C({},$),{clientX:$.clientX-St,clientY:$.clientY-U});ft.trigger("toolbar:run:before",{event:_t}),this.execCommand(_t)},it.prototype.execCommand=function($){var ft=this,lt=ft.em,St=ft.model,U={event:$},_t=St.get("command"),Ot=lt.Editor;(0,e.isFunction)(_t)&&_t(Ot,null,U),(0,e.isString)(_t)&&Ot.runCommand(_t,U)},it.prototype.render=function(){var $=this,ft=$.em,lt=$.$el,St=$.model,U=St.get("id"),_t=St.get("label"),Ot=ft.getConfig().stylePrefix;return lt.addClass("".concat(Ot,"toolbar-item")),U&&lt.addClass("".concat(Ot,"toolbar-item__").concat(U)),_t&&lt.append(_t),this},it}(o.Ss);const D=E;var F=function(){var nt=function(it,$){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ft,lt){ft.__proto__=lt}||function(ft,lt){for(var St in lt)Object.prototype.hasOwnProperty.call(lt,St)&&(ft[St]=lt[St])},nt(it,$)};return function(it,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");nt(it,$);function ft(){this.constructor=it}it.prototype=$===null?Object.create($):(ft.prototype=$.prototype,new ft)}}(),V=function(nt){F(it,nt);function it($){var ft=nt.call(this,$)||this,lt=$.em;return ft.em=lt,ft.config={em:lt},ft.listenTo(ft.collection,"reset",ft.render),ft}return it.prototype.onRender=function(){var $=this.em.config.stylePrefix;this.el.className="".concat($,"toolbar-items")},it}(y.A);const K=V;V.prototype.itemView=D;var Z=t(6294),ct=t(1166),ht=function(){return ht=Object.assign||function(nt){for(var it,$=1,ft=arguments.length;$<ft;$++){it=arguments[$];for(var lt in it)Object.prototype.hasOwnProperty.call(it,lt)&&(nt[lt]=it[lt])}return nt},ht.apply(this,arguments)},st;const et={activeResizer:!1,init:function(){this.onSelect=(0,e.debounce)(this.onSelect,0),(0,e.bindAll)(this,"onHover","onOut","onClick","onCanvasScroll","onFrameScroll","onFrameResize","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),st=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(nt){var it=this,$=this,ft=$.em,lt=$.canvas,St=lt.getCanvasView().el,U=ft.getConfig().listenToEl,_t=ft.getContainer().parentNode,Ot=nt?"on":"off",zt={on:Z.on,off:Z.AU},pt=m.I.update;!U.length&&_t&&U.push(_t);var Dt=function(yt,kt,Mt){zt[Ot](Mt,"scroll",it.onCanvasScroll,!0),zt[Ot](kt,"mouseover",it.onHover),zt[Ot](kt,"mouseleave",it.onOut),zt[Ot](kt,"click",it.onClick),zt[Ot](yt,"scroll",it.onFrameScroll,!0),zt[Ot](yt,"resize",it.onFrameResize)};zt[Ot](window,"resize",this.onFrameUpdated),zt[Ot](U,"scroll",this.onContainerChange),ft[Ot]("component:toggled ".concat(pt," undo redo"),this.onSelect,this),ft[Ot]("change:componentHovered",this.onHovered,this),ft[Ot]("".concat(m.I.resize," styleable:change ").concat(m.I.input),this.updateGlobalPos,this),ft[Ot]("".concat(pt,":toolbar"),this._upToolbar,this),ft[Ot]("frame:updated",this.onFrameUpdated,this),ft[Ot]("canvas:updateTools",this.onFrameUpdated,this),ft[Ot](ft.Canvas.events.refresh,this.updateAttached,this),ft.Canvas.getFrames().forEach(function(yt){var kt=yt.view,Mt=kt==null?void 0:kt.getWindow();Mt&&Dt(Mt,kt==null?void 0:kt.getBody(),St)})},onHover:function(nt){nt.stopPropagation();var it=this.em,$=nt.target,ft=(0,ct.getComponentView)($),lt=ft==null?void 0:ft.frameView,St=ft==null?void 0:ft.model;if(!St)for(var U=$.parentNode;!St&&U&&!(0,Z.ZQ)(U);)St=(0,ct.getComponentModel)(U),U=U.parentNode;this.currentDoc=$.ownerDocument,it.setHovered(St,{useValid:!0}),lt&&it.setCurrentFrame(lt)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(nt,it){var $=this,ft,lt={};it?(ft=it.views)===null||ft===void 0||ft.forEach(function(St){var U=St.el,_t=$.getElementPos(U);lt={el:U,pos:_t,component:it,view:St},U.ownerDocument===$.currentDoc&&($.elHovered=lt),$.updateToolsLocal(lt)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(St){var U=St.view,_t=U&&U.getToolsEl();_t&&$.toggleToolsEl(0,0,{el:_t})}))},onSelect:function(){var nt=this.em,it=nt.getSelected(),$=nt.getCurrentFrame(),ft=it&&it.getView($==null?void 0:$.model),lt=ft==null?void 0:ft.el,St={};if(lt&&(0,Z.zN)(lt)){var U=this.getElementPos(lt);St={el:lt,pos:U,component:it,view:ft}}this.elSelected=St,this.updateToolsGlobal(),this.updateLocalPos(St),this.initResize(it)},updateGlobalPos:function(){var nt=this.getElSelected();nt.el&&(nt.pos=this.getElementPos(nt.el),this.updateToolsGlobal())},updateLocalPos:function(nt){var it=this.getElHovered();it.el&&(it.pos=this.getElementPos(it.el),this.updateToolsLocal(nt))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function(nt,it,$){$===void 0&&($={});var ft=$.el||this.canvas.getToolsEl(it);return ft&&(ft.style.display=nt?"":"none"),ft||{}},showElementOffset:function(nt,it,$){$===void 0&&($={}),st&&this.editor.runCommand("show-offset",{el:nt,elPos:it,view:$.view,force:1,top:0,left:0})},hideElementOffset:function(nt){this.editor.stopCommand("show-offset",{view:nt})},showFixedElementOffset:function(nt,it){this.editor.runCommand("show-offset",{el:nt,elPos:it,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(nt){this.canvas.getHighlighter(nt).style.opacity=0},onClick:function(nt){nt.stopPropagation(),nt.preventDefault();var it=this.em;if(it.get("_cmpDrag"))return it.set("_cmpDrag");var $=nt.target,ft=(0,ct.getComponentModel)($);if(!ft)for(var lt=$.parentNode;!ft&&lt&&!(0,Z.ZQ)(lt);)ft=(0,ct.getComponentModel)(lt),lt=lt.parentNode;if(ft){if(it.isEditing()&&(!ft.get("textable")&&ft.isChildOf("text")||it.getEditing()!==ft))return;this.select(ft,nt)}},select:function(nt,it){if(nt){var $=this.em;$.setSelected(nt,{event:it,useValid:!0}),this.initResize($.getSelected())}},updateBadge:function(nt,it,$){$===void 0&&($={});var ft=this.canvas,lt=(0,ct.getComponentModel)(nt),St=this.getBadge($),U=St.style;if(!lt||!lt.get("badgable")){U.display="none";return}if(!$.posOnly){var _t=this.canvas.getConfig(),Ot=lt.getIcon(),zt=_t.pStylePrefix||"",pt="".concat(zt,"badge"),Dt=_t.customBadgeLabel,yt="".concat(Ot?'<div class="'.concat(pt,'__icon">').concat(Ot,"</div>"):"",`
        <div class="`).concat(pt,'__name">').concat(lt.getName(),"</div>");St.innerHTML=Dt?Dt(lt):yt}var kt="px";U.display="block";var Mt=ft.getTargetToElementFixed(nt,St,{pos:it}),Kt=Mt.top,Xt=$.leftOff<0?-$.leftOff:0;U.top=Kt+kt,U.left=Xt+kt},showHighlighter:function(nt){this.canvas.getHighlighter(nt).style.opacity=""},initResize:function(nt){var it=this,$,ft=this,lt=ft.em,St=ft.canvas,U=lt.Editor,_t=!(0,e.isElement)(nt)&&(0,Z.GW)(nt)?nt:lt.getSelected(),Ot=($=_t==null?void 0:_t.get)===null||$===void 0?void 0:$.call(_t,"resizable"),zt=r.F.Resize,pt=St.hasCustomSpot(zt);St.removeSpots({type:zt});var Dt={component:_t,hasCustomResize:pt,resizable:Ot};_t&&lt.trigger(m.I.resizeInit,Dt);var yt=Dt.resizable;if(_t&&yt){St.addSpot({type:zt,component:_t});var kt=(0,e.isElement)(nt)?nt:_t.getEl(),Mt=(0,ct.isObject)(yt)?yt:{};if(pt||!kt||this.activeResizer)return;this.resizer=U.runCommand("resize",ht(ht({},Mt),{el:kt,component:_t,force:!0,afterStart:function(){st=!1,it.activeResizer=!0},afterEnd:function(){st=!0,it.activeResizer=!1}}))}else{if(pt)return;U.stopCommand("resize"),this.resizer=null}},updateToolbar:function(nt){var it=this.canvas,$=this.config.em,ft=nt===$?$.getSelected():nt,lt=it.getToolbarEl(),St=lt.style,U=ft.get("toolbar"),_t=$.config.showToolbar,Ot=!it.hasCustomSpot(r.F.Select);if(ft&&_t&&U&&U.length&&Ot){if(St.display="",!this.toolbar){lt.innerHTML="",this.toolbar=new v(U);var zt=new K({collection:this.toolbar,em:$});lt.appendChild(zt.render().el)}this.toolbar.reset(U),St.top="-100px",St.left="0"}else St.display="none"},updateToolbarPos:function(nt){var it="px",$=this.canvas.getToolbarEl().style;$.top="".concat(nt.top).concat(it),$.left="".concat(nt.left).concat(it),$.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(nt){return nt===void 0&&(nt={}),this.canvas.getBadgeEl(nt.view)},onCanvasScroll:function(nt){this.onFrameScroll(nt),this.onContainerChange()},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refresh({all:!0})},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(nt){return nt&&nt.get("status")==="selected"},updateToolsLocal:function(nt){var it=this.em.getConfig(),$=nt||this.getElHovered(),ft=$.el,lt=$.pos,St=$.view,U=$.component;if(!ft){this.lastHovered=0;return}var _t=U.get("hoverable"),Ot=this.lastHovered!==ft,zt=Ot?{}:{posOnly:1},pt=this.canvas.hasCustomSpot(r.F.Hover);Ot&&_t&&(this.lastHovered=ft,pt?this.hideHighlighter(St):this.showHighlighter(St),this.showElementOffset(ft,lt,{view:St})),this.isCompSelected(U)&&(this.hideHighlighter(St),!it.showOffsetsSelected&&this.hideElementOffset(St));var Dt="px",yt=this.toggleToolsEl(1,St),kt=yt.style,Mt=this.canvas.canvasRectOffset(ft,lt),Kt=Mt.top,Xt=Mt.left;!pt&&this.updateBadge(ft,lt,ht(ht({},zt),{view:St,topOff:Kt,leftOff:Xt})),kt.top=Kt+Dt,kt.left=Xt+Dt,kt.width=lt.width+Dt,kt.height=lt.height+Dt,this._trgToolUp("local",{component:U,el:yt,top:Kt,left:Xt,width:lt.width,height:lt.height})},_upToolbar:(0,e.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(nt,it){it===void 0&&(it={}),this.em.trigger("canvas:tools:update",ht({type:nt},it))},updateToolsGlobal:function(nt){nt===void 0&&(nt={});var it=this.getElSelected(),$=it.el,ft=it.pos,lt=it.component;if(!$){this.toggleToolsEl(),this.lastSelected=0;return}var St=this.canvas,U=this.lastSelected!==$;(U||nt.force)&&(this.lastSelected=$,this.updateToolbar(lt));var _t="px",Ot=this.toggleToolsEl(1),zt=Ot.style,pt=St.getTargetToElementFixed($,St.getToolbarEl(),{pos:ft}),Dt=pt.canvasOffsetTop,yt=pt.canvasOffsetLeft;zt.top=Dt+_t,zt.left=yt+_t,zt.width=ft.width+_t,zt.height=ft.height+_t,this.updateToolbarPos({top:pt.top,left:pt.left}),this._trgToolUp("global",{component:lt,el:Ot,top:Dt,left:yt,width:ft.width,height:ft.height})},updateAttached:(0,e.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,e.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(nt){return this.canvas.getCanvasView().getElementPos(nt,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(nt){nt&&nt.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(nt){(0,ct.hasWin)()&&(this.editor=nt&&nt.get("Editor"),this.enable())},stop:function(nt,it,$){if($===void 0&&($={}),!!(0,ct.hasWin)()){var ft=this,lt=ft.em,St=ft.editor;this.onHovered(),this.stopSelectComponent(),!$.preserveSelected&&lt.setSelected(),this.toggleToolsEl(),this.updateAttached.cancel(),St&&St.stopCommand("resize")}}}},1406:(i,n,t)=>{t.r(n),t.d(n,{default:()=>a});var e=t(7774),r=t(1447),o=t(8433);const a={startSelectPosition:function(s,u,c){c===void 0&&(c={}),this.isPointed=!1;var h=this.em.Utils,v=s[0].ownerDocument.body;h&&(this.sorter=new h.ComponentSorter({em:this.em,treeClass:r.A,containerContext:{container:v,containerSel:"*",itemSel:"*",pfx:this.ppfx,document:u,placeholderElement:this.canvas.getPlacerEl()},positionOptions:{windowMargin:1,canvasRelative:!0},dragBehavior:{dragDirection:o.A.BothDirections,nested:!0}})),c.onStart&&(this.sorter.eventHandlers.legacyOnStartSort=c.onStart),s&&s.length>0&&this.sorter.startSort(s.map(function(m){return{element:m}}))},getOffsetDim:function(){var s=this.offset(this.canvas.getFrameEl()),u=this.offset(this.canvas.getElement()),c=s.top-u.top,h=s.left-u.left;return{top:c,left:h}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&this.sorter.cancelDrag(),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,e.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,e.default)(this.cDim[this.posIndex][5]).parent():(0,e.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(s,u,c){var h=s||0,v=u||"before",m=c.length,y=m!==0&&v=="after"&&h==m;return m!==0&&(!y&&!c[h][4]||c[h-1]&&!c[h-1][4]||y&&!c[h-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},9395:(i,n,t)=>{t.r(n),t.d(n,{default:()=>s});var e=t(5706),r=t(179),o=t(7774),a=function(){return a=Object.assign||function(u){for(var c,h=1,v=arguments.length;h<v;h++){c=arguments[h];for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(u[m]=c[m])}return u},a.apply(this,arguments)};const s={getOffsetMethod:function(u){var c=u||"";return"get"+c+"OffsetViewerEl"},run:function(u,c,h){var v=this.canvas,m=h||{},y=m.state||"",_=u.getConfig(),C=this.em.getZoomDecimal(),E=m.el;if(!_.showOffsets||!(E instanceof HTMLElement)||!_.showOffsetsSelected&&y=="Fixed"){u.stopCommand("".concat(this.id),h);return}if(!v.hasCustomSpot(r.F.Spacing)){var D=a({},m.elPos||v.getElementPos(E));(0,e.isUndefined)(m.top)||(D.top=m.top),(0,e.isUndefined)(m.left)||(D.left=m.left);var F=window.getComputedStyle(E),V=this.ppfx,K=y+"State",Z=this.getOffsetMethod(y),ct=v[Z](h.view);ct.style.opacity="";var ht=this["marginT"+y],st=this["marginB"+y],et=this["marginL"+y],nt=this["marginR"+y],it=this["padT"+y],$=this["padB"+y],ft=this["padL"+y],lt=this["padR"+y];if(ct.childNodes.length&&(this[K]="1",ht=ct.querySelector("[data-offset-m-t]"),st=ct.querySelector("[data-offset-m-b]"),et=ct.querySelector("[data-offset-m-l]"),nt=ct.querySelector("[data-offset-m-r]"),it=ct.querySelector("[data-offset-p-t]"),$=ct.querySelector("[data-offset-p-b]"),ft=ct.querySelector("[data-offset-p-l]"),lt=ct.querySelector("[data-offset-p-r]")),!this[K]){var St=y.toLowerCase(),U=St+"margin-v",_t=St+"padding-v",Ot=(0,o.default)('<div class="'.concat(V,'marginName">')).get(0),zt=(0,o.default)('<div class="'.concat(V,'paddingName">')).get(0),pt=V+U+"-el",Dt=V+_t+"-el",yt="".concat(pt," ").concat(V+U),kt="".concat(Dt," ").concat(V+_t);ht=(0,o.default)('<div class="'.concat(yt,'-top"></div>')).get(0),st=(0,o.default)('<div class="'.concat(yt,'-bottom"></div>')).get(0),et=(0,o.default)('<div class="'.concat(yt,'-left"></div>')).get(0),nt=(0,o.default)('<div class="'.concat(yt,'-right"></div>')).get(0),it=(0,o.default)('<div class="'.concat(kt,'-top"></div>')).get(0),$=(0,o.default)('<div class="'.concat(kt,'-bottom"></div>')).get(0),ft=(0,o.default)('<div class="'.concat(kt,'-left"></div>')).get(0),lt=(0,o.default)('<div class="'.concat(kt,'-right"></div>')).get(0),this["marginT"+y]=ht,this["marginB"+y]=st,this["marginL"+y]=et,this["marginR"+y]=nt,this["padT"+y]=it,this["padB"+y]=$,this["padL"+y]=ft,this["padR"+y]=lt,Ot.appendChild(ht),Ot.appendChild(st),Ot.appendChild(et),Ot.appendChild(nt),zt.appendChild(it),zt.appendChild($),zt.appendChild(ft),zt.appendChild(lt),ct.appendChild(Ot),ct.appendChild(zt),this[K]="1"}var Mt="px",Kt=parseFloat(F.marginLeft.replace(Mt,""))*C,Xt=parseFloat(F.marginRight.replace(Mt,""))*C,Qt=parseFloat(F.marginTop.replace(Mt,""))*C,ne=parseFloat(F.marginBottom.replace(Mt,""))*C,be=ht.style,Pe=st.style,Ee=et.style,Oe=nt.style,Ke=it.style,De=$.style,Ut=ft.style,ce=lt.style,ie=parseFloat(D.left),P=parseFloat(F.width)*C+Mt;be.height=Qt+Mt,be.width=P,be.top=D.top-Qt+Mt,be.left=ie+Mt,Pe.height=ne+Mt,Pe.width=P,Pe.top=D.top+D.height+Mt,Pe.left=ie+Mt;var k=D.height+Qt+ne+Mt,N=D.top-Qt+Mt;Ee.height=k,Ee.width=Kt+Mt,Ee.top=N,Ee.left=ie-Kt+Mt,Oe.height=k,Oe.width=Xt+Mt,Oe.top=N,Oe.left=ie+D.width+Mt;var q=parseFloat(F.paddingTop)*C;Ke.height=q+Mt;var ut=parseFloat(F.paddingBottom)*C;De.height=ut+Mt;var Q=D.height-ut-q+Mt,gt=D.top+q+Mt;Ut.height=Q,Ut.width=parseFloat(F.paddingLeft)*C+Mt,Ut.top=gt;var Tt=parseFloat(F.paddingRight)*C;ce.height=Q,ce.width=Tt+Mt,ce.top=gt}},stop:function(u,c,h){h===void 0&&(h={});var v=h||{},m=v.state||"",y=this.getOffsetMethod(m),_=h.view,C=this.canvas,E=C[y](_);E.style.opacity=0}}},7285:(i,n,t)=>{t.r(n),t.d(n,{default:()=>o});var e=t(5706),r=t(1166);const o={init:function(){(0,e.bindAll)(this,"_onFramesChange")},run:function(a){this.toggleVis(a,!0)},stop:function(a){this.toggleVis(a,!1)},toggleVis:function(a,s){if(s===void 0&&(s=!0),!a.Commands.isActive("preview")){var u=a.Canvas,c=s?"on":"off",h=u.getModel();h[c]("change:frames",this._onFramesChange),this.handleFrames(u.getFrames(),s)}},handleFrames:function(a,s){var u=this;a.forEach(function(c){var h;!((h=c.view)===null||h===void 0)&&h.loaded&&u._upFrame(c,s),c.__ol||(c.on("loaded",function(){return u._upFrame(c)}),c.__ol=!0)})},_onFramesChange:function(a,s){this.handleFrames(s)},_upFrame:function(a,s){var u,c=this,h=c.ppfx,v=c.em,m=c.id,y=(0,r.isDef)(s)?s:v.Commands.isActive(m),_=y?"add":"remove",C="".concat(h,"dashed");(u=a.view)===null||u===void 0||u.getBody().classList[_](C)}}},9156:(i,n,t)=>{t.d(n,{Kx:()=>u,Ss:()=>h,e2:()=>s,lK:()=>m,pM:()=>c,x2:()=>v});var e=t(4193),r=t.n(e),o=function(){var y=function(_,C){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,D){E.__proto__=D}||function(E,D){for(var F in D)Object.prototype.hasOwnProperty.call(D,F)&&(E[F]=D[F])},y(_,C)};return function(_,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");y(_,C);function E(){this.constructor=_}_.prototype=C===null?Object.create(C):(E.prototype=C.prototype,new E)}}(),a=function(){return a=Object.assign||function(y){for(var _,C=1,E=arguments.length;C<E;C++){_=arguments[C];for(var D in _)Object.prototype.hasOwnProperty.call(_,D)&&(y[D]=_[D])}return y},a.apply(this,arguments)},s="add remove reset change",u=function(y){o(_,y);function _(){return y!==null&&y.apply(this,arguments)||this}return _}(r().Model),c=function(y){o(_,y);function _(){return y!==null&&y.apply(this,arguments)||this}return _}(r().Collection),h=function(y){o(_,y);function _(){return y!==null&&y.apply(this,arguments)||this}return _}(r().View),v;(function(y){y.Screen="screen",y.World="world"})(v||(v={}));var m={x:0,y:0};a(a({},m),{width:0,height:0})},2225:(i,n,t)=>{t.d(n,{I:()=>r,t:()=>e});var e;(function(o){o.remove="component:remove",o.add="component:add",o.move="component:move"})(e||(e={}));var r;(function(o){o.add="component:add",o.remove="component:remove",o.removeBefore="component:remove:before",o.removed="component:removed",o.create="component:create",o.update="component:update",o.updateInside="component:update-inside",o.styleUpdate="component:styleUpdate",o.styleUpdateProperty="component:styleUpdate:",o.select="component:select",o.selectBefore="component:select:before",o.mount="component:mount",o.scriptMount="component:script:mount",o.scriptMountBefore="component:script:mount:before",o.scriptUnmount="component:script:unmount",o.render="component:render",o.input="component:input",o.resize="component:resize",o.resizeStart="component:resize:start",o.resizeMove="component:resize:move",o.resizeEnd="component:resize:end",o.resizeUpdate="component:resize:update",o.resizeInit="component:resize:init",o.symbolMainAdd="symbol:main:add",o.symbolMainUpdate="symbol:main:update",o.symbolMainUpdateDeep="symbol:main:update-deep",o.symbolMainRemove="symbol:main:remove",o.symbolMain="symbol:main",o.symbolInstanceAdd="symbol:instance:add",o.symbolInstanceRemove="symbol:instance:remove",o.symbolInstance="symbol:instance",o.symbol="symbol"})(r||(r={}))},8242:(i,n,t)=>{t.d(n,{A:()=>s});var e=t(5706),r=t(9156),o=function(){var u=function(c,h){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(v[y]=m[y])},u(c,h)};return function(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");u(c,h);function v(){this.constructor=c}c.prototype=h===null?Object.create(h):(v.prototype=h.prototype,new v)}}(),a=function(u){o(c,u);function c(h,v,m){h===void 0&&(h={}),m===void 0&&(m=!1);var y=u.call(this,h)||this;return y.itemsView="",y.itemType="type",y.reuseView=!1,y.config=v||h.config||{},m&&y.listenTo(y.collection,"add",y.addTo),y.items=[],y}return c.prototype.addTo=function(h){this.add(h)},c.prototype.itemViewNotFound=function(h){var v=this,m=v.config,y=v.ns,_=m.em,C="".concat(y?"[".concat(y,"]: "):"","'").concat(h,"' type not found");_&&_.logWarning(C)},c.prototype.add=function(h,v){var m=this,y=m.config,_=m.reuseView,C=m.items,E=this.itemsView||{},D=["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],F=v||null,V=this.itemView,K=h.get(this.itemType),Z;E[K]?V=E[K]:K&&!E[K]&&!(0,e.includes)(D,K)&&this.itemViewNotFound(K),h.view&&_?Z=h.view:Z=new V({model:h,config:y},y),C&&C.push(Z);var ct=Z.render().el;F?F.appendChild(ct):this.$el.append(ct)},c.prototype.render=function(){var h=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(v){this.add(v,h)},this),this.$el.append(h),this.onRender(),this},c.prototype.onRender=function(){},c.prototype.onRemoveBefore=function(h,v){},c.prototype.onRemove=function(h,v){},c.prototype.remove=function(h){h===void 0&&(h={});var v=this.items;return this.onRemoveBefore(v,h),this.clearItems(),u.prototype.remove.call(this),this.onRemove(v,h),this},c.prototype.clearItems=function(){this.items},c}(r.Ss);const s=a;a.prototype.itemView=""},9966:(i,n,t)=>{t.d(n,{A:()=>c});var e=t(5706),r=t(6294),o=function(){return o=Object.assign||function(h){for(var v,m=1,y=arguments.length;m<y;m++){v=arguments[m];for(var _ in v)Object.prototype.hasOwnProperty.call(v,_)&&(h[_]=v[_])}return h},o.apply(this,arguments)},a=function(){return{x:0,y:0}},s=["x","y"],u=function(){function h(v){return v===void 0&&(v={}),this.opts={snapGuides:{x:5,y:5},snapOffset:5,scale:1},(0,e.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(v),this.delta=a(),this.lastScroll=a(),this.lastScrollDiff=a(),this.startPointer=a(),this.startPosition=a(),this.globScrollDiff=a(),this.currentPointer=a(),this.position=a(),this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return h.prototype.setOptions=function(v){v===void 0&&(v={}),this.opts=o(o({},this.opts),v)},h.prototype.toggleDrag=function(v){var m=this.getDocumentEl(),y=this.getContainerEl(),_=this.getWindowEl(),C=v?"on":"off",E={on:r.on,off:r.AU};E[C](y,"mousemove dragover",this.drag),E[C](m,"mouseup dragend touchend",this.stop),E[C](m,"keydown",this.keyHandle),E[C](_,"scroll",this.handleScroll)},h.prototype.handleScroll=function(){var v=this,m=v.lastScroll,y=v.delta,_=this.getScrollInfo(),C={x:_.x-m.x,y:_.y-m.y};this.move(y.x+C.x,y.y+C.y),this.lastScrollDiff=C},h.prototype.start=function(v){var m=this.opts,y=m.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(v),this.guidesStatic=(0,e.result)(m,"guidesStatic")||[],this.guidesTarget=(0,e.result)(m,"guidesTarget")||[],(0,e.isFunction)(y)&&y(v,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff=a(),this.globScrollDiff=a(),this.drag(v)},h.prototype.drag=function(v){var m=this,y=this,_=y.opts,C=y.lastScrollDiff,E=y.globScrollDiff,D=_.onDrag,F=this.startPointer,V=this.getPointerPos(v),K={x:E.x+C.x,y:E.y+C.y};this.globScrollDiff=K;var Z={x:V.x-F.x+K.x,y:V.y-F.y+K.y};this.lastScrollDiff=a();var ct=function($){s.forEach(function(ft){return $[ft]=$[ft]*(0,e.result)(_,"scale")}),m.delta=$,m.move($.x,$.y),(0,e.isFunction)(D)&&D(v,m)},ht=o({},Z);if(this.currentPointer=V,this.lastScroll=this.getScrollInfo(),ct(Z),this.guidesTarget.length){var st=this.snapGuides(ht),et=st.newDelta,nt=st.trgX,it=st.trgY;(nt||it)&&ct(et)}v.which===0&&this.stop(v)},h.prototype.snapGuides=function(v){var m=this,y=o({},v),_=this,C=_.trgX,E=_.trgY;return this.guidesTarget.forEach(function(D){D.x&&m.trgX||D.y&&m.trgY||(D.active=!1,m.guidesStatic.forEach(function(F){if(!(D.y&&F.x||D.x&&F.y)){var V=D.y&&F.y,K=V?"y":"x",Z=D[K],ct=F[K],ht=v[K],st=V?E:C;if(m.isPointIn(Z,ct,{axis:K})&&(0,e.isUndefined)(st)){var et=ht-(Z-ct);m.setGuideLock(D,et)}}}))}),C=this.trgX,E=this.trgY,s.forEach(function(D){var F=D.toUpperCase(),V=m["trg".concat(F)];V&&!m.isPointIn(v[D],V.lock,{axis:D})&&(m.setGuideLock(V,null),V=null),V&&!(0,e.isUndefined)(V.lock)&&(y[D]=V.lock)}),{newDelta:y,trgX:this.trgX,trgY:this.trgY}},h.prototype.isPointIn=function(v,m,y){var _,C=y===void 0?{}:y,E=C.offset,D=C.axis,F=this.opts,V=F.snapGuides,K=V===void 0?{}:V,Z=F.snapOffset,ct=Z===void 0?0:Z,ht=D==="x"?K.x:D==="y"?K.y:void 0,st=ht===0?0:(_=E??ht)!==null&&_!==void 0?_:ct;return st===0?!1:v>=m&&v<=m+st||v<=m&&v>=m-st},h.prototype.setGuideLock=function(v,m){var y=(0,e.isUndefined)(v.x)?"Y":"X",_="trg".concat(y);return m!==null?(v.active=!0,v.lock=m,this[_]=v):(delete v.active,delete v.lock,delete this[_]),v},h.prototype.stop=function(v,m){m===void 0&&(m={});var y=this.delta,_=!!m.cancel,C=_?0:y.x,E=_?0:y.y;this.toggleDrag(),this.move(C,E,!0);var D=this.opts.onEnd;(0,e.isFunction)(D)&&D(v,this,{cancelled:_})},h.prototype.keyHandle=function(v){(0,r.v$)(v)&&this.stop(v,{cancel:!0})},h.prototype.move=function(v,m,y){var _=this,C=_.el,E=_.opts,D=this.startPosition;if(D){var F=E.setPosition,V=D.x+v,K=D.y+m;this.position={x:V,y:K,end:y},(0,e.isFunction)(F)&&F(this.position),C&&(C.style.left="".concat(V,"px"),C.style.top="".concat(K,"px"))}},h.prototype.getContainerEl=function(){var v=this.opts.container;return v?[v]:this.getDocumentEl()},h.prototype.getWindowEl=function(){var v=this.getContainerEl();return v.map(function(m){var y=m.ownerDocument||m;return y.defaultView||y.parentWindow})},h.prototype.getDocumentEl=function(v){var m=this.opts.doc;if(v=v||this.el,!this.docs.length){var y=[document];v&&y.push(v.ownerDocument),m&&y.push(m),this.docs=y}return this.docs},h.prototype.getPointerPos=function(v){var m=this.opts.getPointerPosition,y=(0,r.G2)(v);return m?m(v):{x:y.clientX,y:y.clientY}},h.prototype.getStartPosition=function(){var v=this,m=v.el,y=v.opts,_=y.getPosition,C=a();return(0,e.isFunction)(_)?C=_():m&&(C={x:parseFloat(m.style.left),y:parseFloat(m.style.top)}),C},h.prototype.getScrollInfo=function(){var v=this.opts.doc,m=v&&v.body;return{y:m?m.scrollTop:0,x:m?m.scrollLeft:0}},h.prototype.detectAxisLock=function(v,m){var y=v,_=m,C=Math.abs(y),E=Math.abs(_);if(_>=C||_<=-C)return"x";if(y>E||y<-E)return"y"},h}();const c=u},7774:(i,n,t)=>{t.r(n),t.d(n,{default:()=>Lr});var e=typeof document<"u"?document:null,r=typeof window<"u"?window:null,o=Array.prototype,a=o.filter,s=o.indexOf,u=o.map,c=o.push,h=o.reverse,v=o.slice,m=o.splice,y=/^#[\w-]*$/,_=/^\.[\w-]*$/,C=/<.+>/,E=/^\w+$/;function D(ot,Ct){return Ct===void 0&&(Ct=e),_.test(ot)?Ct.getElementsByClassName(ot.slice(1)):E.test(ot)?Ct.getElementsByTagName(ot):Ct.querySelectorAll(ot)}function F(ot,Ct){if(Ct===void 0&&(Ct=e),!!ot){if(ot.__cash)return ot;var Lt=ot;if(ft(ot)){if(Ct.__cash&&(Ct=Ct[0]),Lt=y.test(ot)?Ct.getElementById(ot.slice(1)):C.test(ot)?en(ot):D(ot,Ct),!Lt)return}else if($(ot))return this.ready(ot);(Lt.nodeType||Lt===r)&&(Lt=[Lt]),this.length=Lt.length;for(var ee=0,we=this.length;ee<we;ee++)this[ee]=Lt[ee]}}function V(ot,Ct){return new F(ot,Ct)}var K=V.fn=V.prototype=F.prototype={constructor:V,__cash:!0,length:0,splice:m};K.get=function(ot){return ot===void 0?v.call(this):this[ot<0?ot+this.length:ot]},K.eq=function(ot){return V(this.get(ot))},K.first=function(){return this.eq(0)},K.last=function(){return this.eq(-1)},K.map=function(ot){return V(u.call(this,function(Ct,Lt){return ot.call(Ct,Lt,Ct)}))},K.slice=function(){return V(v.apply(this,arguments))};var Z=/(?:^\w|[A-Z]|\b\w)/g,ct=/[\s-_]+/g;function ht(ot){return ot.replace(Z,function(Ct,Lt){return Ct[Lt?"toUpperCase":"toLowerCase"]()}).replace(ct,"")}V.camelCase=ht;function st(ot,Ct){for(var Lt=0,ee=ot.length;Lt<ee&&Ct.call(ot[Lt],ot[Lt],Lt,ot)!==!1;Lt++);}V.each=st,K.each=function(ot){return st(this,function(Ct,Lt){return ot.call(Ct,Lt,Ct)}),this},K.removeProp=function(ot){return this.each(function(Ct,Lt){delete Lt[ot]})};function et(ot){ot===void 0&&(ot=this);for(var Ct=arguments,Lt=Ct.length,ee=Lt<2?0:1;ee<Lt;ee++)for(var we in Ct[ee])ot[we]=Ct[ee][we];return ot}V.extend=K.extend=et;var nt=1;V.guid=nt;function it(ot,Ct){var Lt=ot&&(ot.matches||ot.webkitMatchesSelector||ot.mozMatchesSelector||ot.msMatchesSelector||ot.oMatchesSelector);return!!Lt&&Lt.call(ot,Ct)}V.matches=it;function $(ot){return typeof ot=="function"}V.isFunction=$;function ft(ot){return typeof ot=="string"}V.isString=ft;function lt(ot){return!isNaN(parseFloat(ot))&&isFinite(ot)}V.isNumeric=lt;var St=Array.isArray;V.isArray=St,K.prop=function(ot,Ct){if(ot){if(ft(ot))return arguments.length<2?this[0]&&this[0][ot]:this.each(function(ee,we){we[ot]=Ct});for(var Lt in ot)this.prop(Lt,ot[Lt]);return this}};function U(ot){return ft(ot)?function(Ct,Lt){return it(Lt,ot)}:ot.__cash?function(Ct,Lt){return ot.is(Lt)}:function(Ct,Lt,ee){return Lt===ee}}K.filter=function(ot){if(!ot)return V();var Ct=$(ot)?ot:U(ot);return V(a.call(this,function(Lt,ee){return Ct.call(Lt,ee,Lt,ot)}))};var _t=/\S+/g;function Ot(ot){return ft(ot)?ot.match(_t)||[]:[]}K.hasClass=function(ot){var Ct=Ot(ot),Lt=!1;return Ct.length&&this.each(function(ee,we){return Lt=we.classList.contains(Ct[0]),!Lt}),Lt},K.removeAttr=function(ot){var Ct=Ot(ot);return Ct.length?this.each(function(Lt,ee){st(Ct,function(we){ee.removeAttribute(we)})}):this},K.attr=function(ot,Ct){if(ot){if(ft(ot)){if(arguments.length<2){if(!this[0])return;var Lt=this[0].getAttribute(ot);return Lt===null?void 0:Lt}return Ct===null?this.removeAttr(ot):this.each(function(we,Fe){Fe.setAttribute(ot,Ct)})}for(var ee in ot)this.attr(ee,ot[ee]);return this}},K.toggleClass=function(ot,Ct){var Lt=Ot(ot),ee=Ct!==void 0;return Lt.length?this.each(function(we,Fe){st(Lt,function(We){ee?Ct?Fe.classList.add(We):Fe.classList.remove(We):Fe.classList.toggle(We)})}):this},K.addClass=function(ot){return this.toggleClass(ot,!0)},K.removeClass=function(ot){return arguments.length?this.toggleClass(ot,!1):this.attr("class","")};function zt(ot){return ot.filter(function(Ct,Lt,ee){return ee.indexOf(Ct)===Lt})}V.unique=zt,K.add=function(ot,Ct){return V(zt(this.get().concat(V(ot,Ct).get())))};function pt(ot,Ct,Lt){if(ot.nodeType===1){var ee=r.getComputedStyle(ot,null);return Ct?Lt?ee.getPropertyValue(Ct):ee[Ct]:ee}}function Dt(ot,Ct){return parseInt(pt(ot,Ct),10)||0}var yt=/^--/;function kt(ot){return yt.test(ot)}var Mt={},Kt=e&&e.createElement("div"),Xt=Kt?Kt.style:{},Qt=["webkit","moz","ms","o"];function ne(ot,Ct){if(Ct===void 0&&(Ct=kt(ot)),Ct)return ot;if(!Mt[ot]){var Lt=ht(ot),ee=""+Lt.charAt(0).toUpperCase()+Lt.slice(1),we=(Lt+" "+Qt.join(ee+" ")+ee).split(" ");st(we,function(Fe){if(Fe in Xt)return Mt[ot]=Fe,!1})}return Mt[ot]}V.prefixedProp=ne;var be={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function Pe(ot,Ct,Lt){return Lt===void 0&&(Lt=kt(ot)),!Lt&&!be[ot]&&lt(Ct)?Ct+"px":Ct}K.css=function(ot,Ct){if(ft(ot)){var Lt=kt(ot);return ot=ne(ot,Lt),arguments.length<2?this[0]&&pt(this[0],ot,Lt):ot?(Ct=Pe(ot,Ct,Lt),this.each(function(we,Fe){Fe.nodeType===1&&(Lt?Fe.style.setProperty(ot,Ct):Fe.style[ot]=Ct)})):this}for(var ee in ot)this.css(ee,ot[ee]);return this};var Ee="__cashData",Oe=/^data-(.*)/;V.hasData=function(ot){return Ee in ot};function Ke(ot){return ot[Ee]=ot[Ee]||{}}function De(ot,Ct){var Lt=Ke(ot);if(Ct){if(!(Ct in Lt)){var ee=ot.dataset?ot.dataset[Ct]||ot.dataset[ht(Ct)]:V(ot).attr("data-"+Ct);if(ee!==void 0){try{ee=JSON.parse(ee)}catch{}Lt[Ct]=ee}}return Lt[Ct]}return Lt}function Ut(ot,Ct){Ct===void 0?delete ot[Ee]:delete Ke(ot)[Ct]}function ce(ot,Ct,Lt){Ke(ot)[Ct]=Lt}K.data=function(ot,Ct){var Lt=this;if(!ot)return this[0]?(st(this[0].attributes,function(we){var Fe=we.name.match(Oe);Fe&&Lt.data(Fe[1])}),De(this[0])):void 0;if(ft(ot))return Ct===void 0?this[0]&&De(this[0],ot):this.each(function(we,Fe){return ce(Fe,ot,Ct)});for(var ee in ot)this.data(ee,ot[ee]);return this},K.removeData=function(ot){return this.each(function(Ct,Lt){return Ut(Lt,ot)})};function ie(ot,Ct){return Dt(ot,"border"+(Ct?"Left":"Top")+"Width")+Dt(ot,"padding"+(Ct?"Left":"Top"))+Dt(ot,"padding"+(Ct?"Right":"Bottom"))+Dt(ot,"border"+(Ct?"Right":"Bottom")+"Width")}st(["Width","Height"],function(ot){K["inner"+ot]=function(){if(this[0])return this[0]===r?r["inner"+ot]:this[0]["client"+ot]}}),st(["width","height"],function(ot,Ct){K[ot]=function(Lt){return this[0]?arguments.length?(Lt=parseInt(Lt,10),this.each(function(ee,we){if(we.nodeType===1){var Fe=pt(we,"boxSizing");we.style[ot]=Pe(ot,Lt+(Fe==="border-box"?ie(we,!Ct):0))}})):this[0]===r?this[0][ht("outer-"+ot)]:this[0].getBoundingClientRect()[ot]-ie(this[0],!Ct):Lt===void 0?void 0:this}}),st(["Width","Height"],function(ot,Ct){K["outer"+ot]=function(Lt){if(this[0])return this[0]===r?r["outer"+ot]:this[0]["offset"+ot]+(Lt?Dt(this[0],"margin"+(Ct?"Top":"Left"))+Dt(this[0],"margin"+(Ct?"Bottom":"Right")):0)}});function P(ot,Ct){for(var Lt=0,ee=Ct.length;Lt<ee;Lt++)if(ot.indexOf(Ct[Lt])<0)return!1;return!0}function k(ot,Ct,Lt){st(ot[Lt],function(ee){ee[0];var we=ee[1];Ct.removeEventListener(Lt,we)}),delete ot[Lt]}var N="__cashEvents",q=".";function ut(ot){return ot[N]=ot[N]||{}}function Q(ot,Ct,Lt,ee){ee.guid=ee.guid||nt++;var we=ut(ot);we[Ct]=we[Ct]||[],we[Ct].push([Lt,ee]),ot.addEventListener(Ct,ee)}function gt(ot){var Ct=ot.split(q);return[Ct[0],Ct.slice(1).sort()]}function Tt(ot,Ct,Lt,ee){var we=ut(ot);if(Ct){var Fe=we[Ct];if(!Fe)return;ee&&(ee.guid=ee.guid||nt++),we[Ct]=Fe.filter(function(We){var cn=We[0],Sn=We[1];if(ee&&Sn.guid!==ee.guid||!P(cn,Lt))return!0;ot.removeEventListener(Ct,Sn)})}else if(!Lt||!Lt.length)for(Ct in we)k(we,ot,Ct);else for(Ct in we)Tt(ot,Ct,Lt,ee)}K.off=function(ot,Ct){var Lt=this;return ot===void 0?this.each(function(ee,we){return Tt(we)}):st(Ot(ot),function(ee){var we=gt(ee),Fe=we[0],We=we[1];Lt.each(function(cn,Sn){return Tt(Sn,Fe,We,Ct)})}),this},K.on=function(ot,Ct,Lt,ee){var we=this;if(!ft(ot)){for(var Fe in ot)this.on(Fe,Ct,ot[Fe]);return this}return $(Ct)&&(Lt=Ct,Ct=!1),st(Ot(ot),function(We){var cn=gt(We),Sn=cn[0],Pn=cn[1];we.each(function(zi,Gn){var _i=function Wi(gn){if(!(gn.namespace&&!P(Pn,gn.namespace.split(q)))){var ir=Gn;if(Ct){for(var rn=gn.target;!it(rn,Ct);)if(rn===Gn||(rn=rn.parentNode,!rn))return;ir=rn}gn.namespace=gn.namespace||"";var br=Lt.call(ir,gn,gn.data);ee&&Tt(Gn,Sn,Pn,Wi),br===!1&&(gn.preventDefault(),gn.stopPropagation())}};_i.guid=Lt.guid=Lt.guid||nt++,Q(Gn,Sn,Pn,_i)})}),this},K.one=function(ot,Ct,Lt){return this.on(ot,Ct,Lt,!0)},K.ready=function(ot){var Ct=function(){return ot(V)};return e.readyState!=="loading"?setTimeout(Ct):e.addEventListener("DOMContentLoaded",Ct),this},K.trigger=function(ot,Ct){var Lt=ot;if(ft(ot)){var ee=gt(ot),we=ee[0],Fe=ee[1];Lt=e.createEvent("HTMLEvents"),Lt.initEvent(we,!0,!0),Lt.namespace=Fe.join(q)}return Lt.data=Ct,this.each(function(We,cn){cn.dispatchEvent(Lt)})};function he(ot){var Ct=[];return st(ot.options,function(Lt){Lt.selected&&!Lt.disabled&&!Lt.parentNode.disabled&&Ct.push(Lt.value)}),Ct}function X(ot){return ot.selectedIndex<0?null:ot.options[ot.selectedIndex].value}var L=/select-one/i,A=/select-multiple/i;function W(ot){var Ct=ot.type;return L.test(Ct)?X(ot):A.test(Ct)?he(ot):ot.value}var B=/%20/g;function mt(ot,Ct){return"&"+encodeURIComponent(ot)+"="+encodeURIComponent(Ct).replace(B,"+")}var dt=/file|reset|submit|button|image/i,qt=/radio|checkbox/i;K.serialize=function(){var ot="";return this.each(function(Ct,Lt){st(Lt.elements||[Lt],function(ee){if(!(ee.disabled||!ee.name||ee.tagName==="FIELDSET")&&!dt.test(ee.type)&&!(qt.test(ee.type)&&!ee.checked)){var we=W(ee);if(we!==void 0){var Fe=St(we)?we:[we];st(Fe,function(We){ot+=mt(ee.name,We)})}}})}),ot.substr(1)},K.val=function(ot){return ot===void 0?this[0]&&W(this[0]):this.each(function(Ct,Lt){var ee=A.test(Lt.type),we=ot===null?ee?[]:"":ot;ee&&St(we)?st(Lt.options,function(Fe){Fe.selected=we.indexOf(Fe.value)>=0}):Lt.value=we})},K.clone=function(){return this.map(function(ot,Ct){return Ct.cloneNode(!0)})},K.detach=function(){return this.each(function(ot,Ct){Ct.parentNode&&Ct.parentNode.removeChild(Ct)})};var fe=/^\s*<(\w+)[^>]*>/,de=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/,ae;function xe(){if(!ae){var ot=e.createElement("table"),Ct=e.createElement("tr");ae={"*":e.createElement("div"),tr:e.createElement("tbody"),td:Ct,th:Ct,thead:ot,tbody:ot,tfoot:ot}}}function en(ot){if(xe(),!ft(ot))return[];if(de.test(ot))return[e.createElement(RegExp.$1)];var Ct=fe.test(ot)&&RegExp.$1,Lt=ae[Ct]||ae["*"];return Lt.innerHTML=ot,V(Lt.childNodes).detach().get()}V.parseHTML=en,K.empty=function(){var ot=this[0];if(ot)for(;ot.firstChild;)ot.removeChild(ot.firstChild);return this};function dn(ot,Ct,Lt){Lt?ot.insertBefore(Ct,ot.childNodes[0]):ot.appendChild(Ct)}function sn(ot,Ct,Lt){if(Ct!==void 0){var ee=ft(Ct);!ee&&Ct.length?st(Ct,function(we){return sn(ot,we,Lt)}):st(ot,ee?function(we){we.insertAdjacentHTML(Lt?"afterbegin":"beforeend",Ct)}:function(we,Fe){return dn(we,Fe?Ct.cloneNode(!0):Ct,Lt)})}}K.append=function(){var ot=this;return st(arguments,function(Ct){sn(ot,Ct)}),this},K.appendTo=function(ot){return sn(V(ot),this),this},K.html=function(ot){if(ot===void 0)return this[0]&&this[0].innerHTML;var Ct=ot.nodeType?ot[0].outerHTML:ot;return this.each(function(Lt,ee){ee.innerHTML=Ct})},K.insertAfter=function(ot){var Ct=this;return V(ot).each(function(Lt,ee){var we=ee.parentNode;Ct.each(function(Fe,We){we.insertBefore(Lt?We.cloneNode(!0):We,ee.nextSibling)})}),this},K.after=function(){var ot=this;return st(h.apply(arguments),function(Ct){h.apply(V(Ct).slice()).insertAfter(ot)}),this},K.insertBefore=function(ot){var Ct=this;return V(ot).each(function(Lt,ee){var we=ee.parentNode;Ct.each(function(Fe,We){we.insertBefore(Lt?We.cloneNode(!0):We,ee)})}),this},K.before=function(){var ot=this;return st(arguments,function(Ct){V(Ct).insertBefore(ot)}),this},K.prepend=function(){var ot=this;return st(arguments,function(Ct){sn(ot,Ct,!0)}),this},K.prependTo=function(ot){return sn(V(ot),h.apply(this.slice()),!0),this},K.remove=function(){return this.detach().off()},K.replaceWith=function(ot){var Ct=this;return this.each(function(Lt,ee){var we=ee.parentNode;if(we){var Fe=Lt?V(ot).clone():V(ot);if(!Fe[0])return Ct.remove(),!1;we.replaceChild(Fe[0],ee),V(Fe[0]).after(Fe.slice(1))}})},K.replaceAll=function(ot){return V(ot).replaceWith(this),this},K.text=function(ot){return ot===void 0?this[0]?this[0].textContent:"":this.each(function(Ct,Lt){Lt.textContent=ot})};var Un=e&&e.documentElement;K.offset=function(){var ot=this[0];if(ot){var Ct=ot.getBoundingClientRect();return{top:Ct.top+r.pageYOffset-Un.clientTop,left:Ct.left+r.pageXOffset-Un.clientLeft}}},K.offsetParent=function(){return V(this[0]&&this[0].offsetParent)},K.position=function(){var ot=this[0];if(ot)return{left:ot.offsetLeft,top:ot.offsetTop}},K.children=function(ot){var Ct=[];return this.each(function(Lt,ee){c.apply(Ct,ee.children)}),Ct=V(zt(Ct)),ot?Ct.filter(function(Lt,ee){return it(ee,ot)}):Ct},K.contents=function(){var ot=[];return this.each(function(Ct,Lt){c.apply(ot,Lt.tagName==="IFRAME"?[Lt.contentDocument]:Lt.childNodes)}),V(ot.length&&zt(ot))},K.find=function(ot){for(var Ct=[],Lt=0,ee=this.length;Lt<ee;Lt++){var we=D(ot,this[Lt]);we.length&&c.apply(Ct,we)}return V(Ct.length&&zt(Ct))},K.has=function(ot){var Ct=ft(ot)?function(Lt,ee){return!!D(ot,ee).length}:function(Lt,ee){return ee.contains(ot)};return this.filter(Ct)},K.is=function(ot){if(!ot||!this[0])return!1;var Ct=U(ot),Lt=!1;return this.each(function(ee,we){return Lt=Ct(ee,we,ot),!Lt}),Lt},K.next=function(){return V(this[0]&&this[0].nextElementSibling)},K.not=function(ot){if(!ot||!this[0])return this;var Ct=U(ot);return this.filter(function(Lt,ee){return!Ct(Lt,ee,ot)})},K.parent=function(){var ot=[];return this.each(function(Ct,Lt){Lt&&Lt.parentNode&&ot.push(Lt.parentNode)}),V(zt(ot))},K.index=function(ot){var Ct=ot?V(ot)[0]:this[0],Lt=ot?this:V(Ct).parent().children();return s.call(Lt,Ct)},K.closest=function(ot){return!ot||!this[0]?V():this.is(ot)?this.filter(ot):this.parent().closest(ot)},K.parents=function(ot){var Ct=[],Lt;return this.each(function(ee,we){for(Lt=we;Lt&&Lt.parentNode&&Lt!==e.body.parentNode;)Lt=Lt.parentNode,(!ot||ot&&it(Lt,ot))&&Ct.push(Lt)}),V(zt(Ct))},K.prev=function(){return V(this[0]&&this[0].previousElementSibling)},K.siblings=function(){var ot=this[0];return this.parent().children().filter(function(Ct,Lt){return Lt!==ot})};const Lr=V},6294:(i,n,t)=>{t.d(n,{AU:()=>pt,BC:()=>E,C8:()=>st,Ch:()=>it,Ci:()=>lt,D8:()=>s,G2:()=>$,GW:()=>ht,GZ:()=>F,I6:()=>v,LJ:()=>_t,Sc:()=>C,X6:()=>m,Xy:()=>et,YZ:()=>c,ZQ:()=>u,_I:()=>Dt,a_:()=>D,af:()=>K,bG:()=>_,cx:()=>h,ir:()=>Z,kk:()=>Ot,on:()=>zt,rp:()=>U,v$:()=>ft,yL:()=>V,zN:()=>y});var e=t(5706),r=function(yt,kt,Mt){if(Mt||arguments.length===2)for(var Kt=0,Xt=kt.length,Qt;Kt<Xt;Kt++)(Qt||!(Kt in kt))&&(Qt||(Qt=Array.prototype.slice.call(kt,0,Kt)),Qt[Kt]=kt[Kt]);return yt.concat(Qt||Array.prototype.slice.call(kt))},o="tag",a="attributes",s="transitionend oTransitionEnd transitionend webkitTransitionEnd",u=function(yt){return(yt==null?void 0:yt.nodeType)===Node.DOCUMENT_NODE},c=function(yt){var kt=yt&&yt.parentNode;kt&&kt.removeChild(yt)};function h(){for(var yt=[],kt=0;kt<arguments.length;kt++)yt[kt]=arguments[kt];var Mt=Array.isArray(yt[0])?yt[0]:r([],yt,!0);return Mt.filter(Boolean).join(" ")}var v=function(yt,kt){return yt.querySelectorAll(kt)},m=function(yt,kt){return kt===void 0&&(kt={}),yt&&yt.setAttribute&&(0,e.each)(kt,function(Mt,Kt){return yt.setAttribute(Kt,Mt)})},y=function(yt){var kt;return yt&&!!(yt.offsetWidth||yt.offsetHeight||!((kt=yt.getClientRects)===null||kt===void 0)&&kt.call(yt).length)},_=function(yt,kt){var Mt;(Mt=yt.parentNode)===null||Mt===void 0||Mt.replaceChild(kt,yt)},C=function(yt,kt,Mt){var Kt=yt.childNodes,Xt=Kt.length,Qt=(0,e.isUndefined)(Mt)?Xt:Mt;(0,e.isString)(kt)&&(yt.insertAdjacentHTML("beforeEnd",kt),kt=yt.lastChild,yt.removeChild(kt)),Qt>=Xt?yt.appendChild(kt):yt.insertBefore(kt,Kt[Qt])},E=function(yt,kt){return C(yt,kt)},D=function(yt,kt,Mt){kt===void 0&&(kt={});var Kt=document.createElement(yt);return kt&&(0,e.each)(kt,function(Xt,Qt){return Kt.setAttribute(Qt,Xt)}),Mt&&((0,e.isString)(Mt)?Kt.innerHTML=Mt:Kt.appendChild(Mt)),Kt},F=function(yt){return document.createTextNode(yt)},V=function(yt,kt){var Mt,Kt=yt.type;try{Mt=new window[kt](Kt,yt)}catch{Mt=document.createEvent(kt),Mt.initEvent(Kt,!0,!0)}return Mt._parentEvent=yt,Kt.indexOf("key")===0&&(Mt.keyCodeVal=yt.keyCode,["keyCode","which"].forEach(function(Xt){Object.defineProperty(Mt,Xt,{get:function(){return this.keyCodeVal}})})),Mt},K=function(yt,kt){kt===void 0&&(kt=[]);var Mt=Array.isArray(kt)?kt:[kt];Mt.forEach(function(Kt){var Xt=Kt[o]||"div",Qt=Kt[a]||{},ne=document.createElement(Xt);(0,e.each)(Qt,function(be,Pe){ne.setAttribute(Pe,be)}),yt.appendChild(ne)})},Z=function(yt){return(yt==null?void 0:yt.nodeType)===Node.TEXT_NODE},ct=function(yt){return(yt==null?void 0:yt.nodeType)===Node.COMMENT_NODE},ht=function(yt){return yt&&!Z(yt)&&!ct(yt)},st=function(yt){var kt={top:0,left:0,width:0,height:0};if(!yt)return kt;var Mt;if(Z(yt)){var Kt=document.createRange();Kt.selectNode(yt),Mt=Kt.getBoundingClientRect(),Kt.detach()}return Mt||(yt.getBoundingClientRect?yt.getBoundingClientRect():kt)},et=function(yt){var kt=(yt==null?void 0:yt.ownerDocument)||document,Mt=kt.documentElement,Kt=kt.defaultView||window;return{x:(Kt.pageXOffset||Mt.scrollLeft||0)-(Mt.clientLeft||0),y:(Kt.pageYOffset||Mt.scrollTop||0)-(Mt.clientTop||0)}},nt=function(yt){return yt.which||yt.keyCode},it=function(yt){return String.fromCharCode(nt(yt))},$=function(yt){return yt.touches&&yt.touches[0]?yt.touches[0]:yt},ft=function(yt){return nt(yt)===27},lt=function(yt){return nt(yt)===13},St=function(yt){return yt.ctrlKey},U=function(yt){return St(yt)||yt.metaKey},_t=function(yt){if(!yt)return"";var kt=yt.name,Mt=yt.publicId,Kt=yt.systemId,Xt=Mt?' PUBLIC "'.concat(Mt,'"'):"",Qt=!Mt&&Kt?' SYSTEM "'.concat(Kt,'"'):"";return"<!DOCTYPE ".concat(kt).concat(Xt).concat(Qt,">")},Ot=function(yt){yt===void 0&&(yt={});var kt=[];return(0,e.each)(yt,function(Mt,Kt){return kt.push("".concat(Kt,'="').concat(Mt,'"'))}),kt.join(" ")},zt=function(yt,kt,Mt,Kt){var Xt=kt.split(/\s+/),Qt=(0,e.isArray)(yt)?yt:[yt];Xt.forEach(function(ne){Qt.forEach(function(be){return be==null?void 0:be.addEventListener(ne,Mt,Kt)})})},pt=function(yt,kt,Mt,Kt){var Xt=kt.split(/\s+/),Qt=(0,e.isArray)(yt)?yt:[yt];Xt.forEach(function(ne){Qt.forEach(function(be){return be==null?void 0:be.removeEventListener(ne,Mt,Kt)})})},Dt=function(yt){var kt=yt.replace(/-([a-zA-Z0-9])/g,function(Mt,Kt){return Kt.toUpperCase()});return kt}},1166:(i,n,t)=>{t.r(n),t.d(n,{appendStyles:()=>et,buildBase64UrlFromSvg:()=>De,camelCase:()=>ft,capitalize:()=>Xt,createId:()=>Ke,deepMerge:()=>yt,escape:()=>Ot,escapeAltQuoteAttrValue:()=>Dt,escapeAttrValue:()=>pt,escapeNodeContent:()=>zt,find:()=>_t,get:()=>m,getComponentModel:()=>Ee,getComponentView:()=>Pe,getElement:()=>U,getGlobal:()=>K,getModel:()=>kt,getUiClass:()=>st,getUnitFromValue:()=>it,getViewEl:()=>ne,hasDnd:()=>St,hasWin:()=>V,isBultInMethod:()=>C,isComponent:()=>be,isDef:()=>F,isEmptyObj:()=>Kt,isObject:()=>Mt,isRule:()=>Qt,matches:()=>ht,normalizeFloat:()=>lt,normalizeKey:()=>E,serialize:()=>_,set:()=>y,setViewEl:()=>Oe,shallowDiff:()=>nt,stringToPath:()=>h,toLowerCase:()=>Z,upFirst:()=>$,wait:()=>D});var e=t(5706),r=t(6294),o=function(){return o=Object.assign||function(Ut){for(var ce,ie=1,P=arguments.length;ie<P;ie++){ce=arguments[ie];for(var k in ce)Object.prototype.hasOwnProperty.call(ce,k)&&(Ut[k]=ce[k])}return Ut},o.apply(this,arguments)},a=function(Ut,ce,ie){if(ie||arguments.length===2)for(var P=0,k=ce.length,N;P<k;P++)(N||!(P in ce))&&(N||(N=Array.prototype.slice.call(ce,0,P)),N[P]=ce[P]);return Ut.concat(N||Array.prototype.slice.call(ce))},s={},u=/\\(\\)?/g,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=function(Ut){var ce=[];return Ut.charCodeAt(0)===46&&ce.push(""),Ut.replace(c,function(ie,P,k,N){return ce.push(k?N.replace(u,"$1"):P||ie),""}),ce};function v(Ut,ce){return(0,e.isArray)(Ut)?Ut:ce.hasOwnProperty(Ut)?[Ut]:h(Ut)}var m=function(Ut,ce,ie){for(var P,k=v(ce,Ut),N=k.length,q=0;Ut!=null&&q<N;)Ut=Ut["".concat(k[q++])];return(P=q&&q==N?Ut:void 0)!==null&&P!==void 0?P:ie},y=function(Ut,ce,ie){if(!Mt(Ut))return!1;var P=v(ce,Ut),k=P.length;if(k===0)return!1;if(k===1)return Ut[P[0]]=ie,!0;var N=P.slice(0,-1),q=P[k-1],ut=m(Ut,N);if(ut){if(Array.isArray(ut)){var Q=+q;if(!isNaN(Q))return ut[Q]=ie,!0}else if(Mt(ut))return ut[q]=ie,!0}return!1},_=function(Ut){return JSON.parse(JSON.stringify(Ut))},C=function(Ut){return(0,e.isFunction)(s[Ut])},E=function(Ut){return C(Ut)?"_".concat(Ut):Ut},D=function(Ut){return Ut===void 0&&(Ut=0),new Promise(function(ce){return setTimeout(ce,Ut)})},F=function(Ut){return typeof Ut<"u"},V=function(){return typeof window<"u"},K=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:t.g},Z=function(Ut){return(Ut||"").toLowerCase()},ct=V()?window.Element.prototype:{},ht=ct.matches||ct.webkitMatchesSelector||ct.mozMatchesSelector||ct.msMatchesSelector,st=function(Ut,ce){var ie=Ut.getConfig(),P=ie.stylePrefix,k=ie.customUI;return[k&&"".concat(P,"cui"),ce].filter(function(N){return N}).join(" ")},et=function(Ut,ce){ce===void 0&&(ce={});var ie=(0,e.isArray)(Ut)?a([],Ut,!0):[Ut];if(ie.length){var P=ie.shift();if(P&&(!ce.unique||!document.querySelector('link[href="'.concat(P,'"]')))){var k=document.head,N=document.createElement("link");N.href=P,N.rel="stylesheet",ce.prepand?k.insertBefore(N,k.firstChild):k.appendChild(N)}et(ie)}},nt=function(Ut,ce){var ie={},P=(0,e.keys)(ce);for(var k in Ut)if(Ut.hasOwnProperty(k)){var N=Ut[k],q=ce[k];P.indexOf(k)>=0?N!==q&&(ie[k]=q):ie[k]=null}for(var k in ce)ce.hasOwnProperty(k)&&(0,e.isUndefined)(Ut[k])&&(ie[k]=ce[k]);return ie},it=function(Ut){return Ut.replace(parseFloat(Ut),"")},$=function(Ut){return Ut[0].toUpperCase()+Ut.toLowerCase().slice(1)},ft=function(Ut){return Ut.replace(/-./g,function(ce){return ce[1].toUpperCase()})},lt=function(Ut,ce,ie){ce===void 0&&(ce=1),ie===void 0&&(ie=0);var P=0;if(isNaN(Ut))return ie;if(Ut=parseFloat(Ut),Math.floor(Ut)!==Ut){var k=ce.toString().split(".")[1];P=k?k.length:0}return P?parseFloat(Ut.toFixed(P)):Ut},St=function(Ut){return"draggable"in document.createElement("i")&&(Ut?Ut.config.nativeDnD:!0)},U=function(Ut){if((0,e.isElement)(Ut)||(0,r.ir)(Ut))return Ut;if(Ut&&Ut.getEl)return Ut.getEl()},_t=function(Ut,ce){var ie=null;return Ut.some(function(P,k){return ce(P,k,Ut)?(ie=P,1):0}),ie},Ot=function(Ut){return Ut===void 0&&(Ut=""),"".concat(Ut).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},zt=function(Ut){return Ut===void 0&&(Ut=""),"".concat(Ut).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},pt=function(Ut){return Ut===void 0&&(Ut=""),"".concat(Ut).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},Dt=function(Ut){return Ut===void 0&&(Ut=""),"".concat(Ut).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;")},yt=function(){for(var Ut=[],ce=0;ce<arguments.length;ce++)Ut[ce]=arguments[ce];for(var ie=o({},Ut[0]),P=1;P<Ut.length;P++){var k=o({},Ut[P]);for(var N in k){var q=ie[N],ut=k[N];Mt(q)&&Mt(ut)?ie[N]=yt(q,ut):ie[N]=ut}}return ie},kt=function(Ut,ce){var ie;return!ce&&Ut&&Ut.__cashData?ie=Ut.__cashData.model:ce&&(0,e.isElement)(Ut)&&(ie=ce(Ut).data("model")),ie},Mt=function(Ut){return Ut&&!Array.isArray(Ut)&&typeof Ut=="object"},Kt=function(Ut){return Object.keys(Ut).length<=0},Xt=function(Ut){return Ut===void 0&&(Ut=""),Ut&&Ut.charAt(0).toUpperCase()+Ut.substring(1)},Qt=function(Ut){return Ut&&Ut.toCSS},ne=function(Ut){return Ut==null?void 0:Ut.__gjsv},be=function(Ut){return!!(Ut!=null&&Ut.toHTML)},Pe=function(Ut){return ne(Ut)},Ee=function(Ut){var ce;return(ce=Pe(Ut))===null||ce===void 0?void 0:ce.model},Oe=function(Ut,ce){Ut.__gjsv=ce},Ke=function(Ut){Ut===void 0&&(Ut=16);for(var ce="",ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",P=ie.length,k=0;k<Ut;k++)ce+=ie.charAt(Math.floor(Math.random()*P));return ce},De=function(Ut){if(Ut&&Ut.substr(0,4)==="<svg"){var ce="";return V()?ce=window.btoa(Ut):typeof Buffer<"u"&&(ce=Buffer.from(Ut,"utf8").toString("base64")),ce?"data:image/svg+xml;base64,".concat(ce):Ut}return Ut}},6756:(i,n,t)=>{t.d(n,{h:()=>o});var e=t(3178),r=function(){var s=function(u,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(h[m]=v[m])},s(u,c)};return function(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(u,c);function h(){this.constructor=u}u.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}}(),o=function(s){r(u,s);function u(){var c=s!==null&&s.apply(this,arguments)||this;return c.displayCache=new Map,c}return u.prototype.getChildren=function(){return this.getDisplayedChildren()},u.prototype.getDisplayedChildren=function(){var c=this,h=this.model.components(),v=h.filter(function(m){return c.isChildDisplayed(m)});return v.map(function(m){return new c.constructor(m)})},u.prototype.isChildDisplayed=function(c){if(this.displayCache.has(c))return this.displayCache.get(c);var h=c.getEl(),v=a(h);return this.displayCache.set(c,v),v},u.prototype.getParent=function(){var c=this.model.parent();return c?new this.constructor(c):null},u.prototype.addChildAt=function(c,h,v){var m,y,_,C,E,D,F,V;v===void 0&&(v={action:"add-component"});var K=((y=(m=this.model)===null||m===void 0?void 0:m.isInstanceOf)===null||y===void 0?void 0:y.call(m,"text"))&&((C=(_=c==null?void 0:c.model)===null||_===void 0?void 0:_.get)===null||C===void 0?void 0:C.call(_,"textable"));if(K)return(V=(F=(D=(E=this.model)===null||E===void 0?void 0:E.getView)===null||D===void 0?void 0:D.call(E))===null||F===void 0?void 0:F.insertComponent)===null||V===void 0?void 0:V.call(F,c==null?void 0:c.model,{action:v.action});var Z=this.model.components().add(c.model,{at:this.getRealIndex(h),action:v.action});return new this.constructor(Z)},u.prototype.removeChildAt=function(c,h){h===void 0&&(h={temporary:!1});var v=this.model.components().at(this.getRealIndex(c));v&&this.model.components().remove(v,h)},u.prototype.indexOfChild=function(c){return this.getDisplayIndex(c)},u.prototype.getDisplayIndex=function(c){var h=this.getDisplayedChildren();return h?h.findIndex(function(v){return v.model===c.model}):-1},u.prototype.getRealIndex=function(c){if(c===-1)return-1;for(var h=0,v=this.model.components(),m=0;m<v.length;m++){var y=v.at(m),_=this.isChildDisplayed(y);if(_&&h++,h===c+1)return m}return-1},u.prototype.canMove=function(c,h){return this.model.em.Components.canMove(this.model,c.model,this.getRealIndex(h)).result},u.prototype.equals=function(c){return!!(c!=null&&c._model)&&this._model.getId()===c._model.getId()},u.prototype.restNodeState=function(){this.clearState();var c=this.model;this.setContentEditable(!1),c.em.getEditing()===c&&this.disableEditing()},u.prototype.setContentEditable=function(c){this.element&&this.isTextNode()&&(this.element.contentEditable=c?"true":"false")},u.prototype.disableEditing=function(){var c,h;(h=(c=this.view)===null||c===void 0?void 0:c.disableEditing)===null||h===void 0||h.call(c)},u.prototype.clearState=function(){var c,h;(h=(c=this.model).set)===null||h===void 0||h.call(c,"status","")},u.prototype.setSelectedParentState=function(){var c,h;(h=(c=this.model).set)===null||h===void 0||h.call(c,"status","selected-parent")},u.prototype.isTextNode=function(){var c,h;return(h=(c=this.model).isInstanceOf)===null||h===void 0?void 0:h.call(c,"text")},u.prototype.isTextable=function(){var c,h;return(h=(c=this.model).get)===null||h===void 0?void 0:h.call(c,"textable")},u}(e.$);function a(s){return s?typeof s=="object"&&s.nodeType===Node.ELEMENT_NODE&&window.getComputedStyle(s).display!=="none"&&s.offsetWidth>0&&s.offsetHeight>0:!1}},1447:(i,n,t)=>{t.d(n,{A:()=>a});var e=t(6756),r=function(){var s=function(u,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(h[m]=v[m])},s(u,c)};return function(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(u,c);function h(){this.constructor=u}u.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}}(),o=function(s){r(u,s);function u(){var c=s!==null&&s.apply(this,arguments)||this;return c._dropAreaConfig={ratio:.8,minUndroppableDimension:1,maxUndroppableDimension:15},c}return Object.defineProperty(u.prototype,"view",{get:function(){var c,h;return(h=(c=this.model).getView)===null||h===void 0?void 0:h.call(c)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"element",{get:function(){var c,h;return(h=(c=this.model).getEl)===null||h===void 0?void 0:h.call(c)},enumerable:!1,configurable:!0}),u}(e.h);const a=o},3178:(i,n,t)=>{t.d(n,{$:()=>e});var e=function(){function r(o,a){a===void 0&&(a={}),this._dropAreaConfig={ratio:1,minUndroppableDimension:0,maxUndroppableDimension:0},this._model=o,this._dragSource=a}return Object.defineProperty(r.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dragSource",{get:function(){return this._dragSource},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropArea",{get:function(){var o,a;return this.getParent()?(a=this.nodeDimensions)===null||a===void 0?void 0:a.getDropArea(this._dropAreaConfig):(o=this.nodeDimensions)===null||o===void 0?void 0:o.clone()},enumerable:!1,configurable:!0}),r.prototype.isWithinDropBounds=function(o,a){return!!this.dropArea&&this.dropArea.isWithinBounds(o,a)},r.prototype.equals=function(o){return!!(o!=null&&o._model)&&this._model===o._model},r.prototype.adjustDimensions=function(o){var a,s;o.topDifference===0&&o.leftDifference===0||((a=this.nodeDimensions)===null||a===void 0||a.adjustDimensions(o),(s=this.childrenDimensions)===null||s===void 0||s.forEach(function(u){return u.adjustDimensions(o)}))},r}()},8433:(i,n,t)=>{t.d(n,{A:()=>e});var e;(function(r){r.Vertical="Vertical",r.Horizontal="Horizontal",r.BothDirections="BothDirections"})(e||(e={}))},585:(i,n,t)=>{var e={"./CanvasClear":9484,"./CanvasClear.ts":9484,"./CanvasMove":9516,"./CanvasMove.ts":9516,"./CommandAbstract":9946,"./CommandAbstract.ts":9946,"./ComponentDelete":7801,"./ComponentDelete.ts":7801,"./ComponentDrag":4864,"./ComponentDrag.ts":4864,"./ComponentEnter":6134,"./ComponentEnter.ts":6134,"./ComponentExit":914,"./ComponentExit.ts":914,"./ComponentNext":5547,"./ComponentNext.ts":5547,"./ComponentPrev":8655,"./ComponentPrev.ts":8655,"./ComponentStyleClear":7640,"./ComponentStyleClear.ts":7640,"./CopyComponent":5837,"./CopyComponent.ts":5837,"./ExportTemplate":6477,"./ExportTemplate.ts":6477,"./Fullscreen":1772,"./Fullscreen.ts":1772,"./MoveComponent":741,"./MoveComponent.ts":741,"./OpenAssets":2924,"./OpenAssets.ts":2924,"./OpenBlocks":3963,"./OpenBlocks.ts":3963,"./OpenLayers":1479,"./OpenLayers.ts":1479,"./OpenStyleManager":3473,"./OpenStyleManager.ts":3473,"./OpenTraitManager":5054,"./OpenTraitManager.ts":5054,"./PasteComponent":6979,"./PasteComponent.ts":6979,"./Preview":4457,"./Preview.ts":4457,"./Resize":5493,"./Resize.ts":5493,"./SelectComponent":9317,"./SelectComponent.ts":9317,"./SelectPosition":1406,"./SelectPosition.ts":1406,"./ShowOffset":9395,"./ShowOffset.ts":9395,"./SwitchVisibility":7285,"./SwitchVisibility.ts":7285};function r(a){var s=o(a);return t(s)}function o(a){if(!t.o(e,a)){var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}return e[a]}r.keys=function(){return Object.keys(e)},r.resolve=o,i.exports=r,r.id=585},5706:(i,n,t)=>{t.r(n),t.d(n,{VERSION:()=>r,after:()=>di,all:()=>ja,allKeys:()=>ae,any:()=>Ls,assign:()=>_i,before:()=>Or,bind:()=>ds,bindAll:()=>bl,chain:()=>fs,chunk:()=>vi,clone:()=>br,collect:()=>Br,compact:()=>Qf,compose:()=>La,constant:()=>ie,contains:()=>Gr,countBy:()=>Xf,create:()=>rn,debounce:()=>va,default:()=>Ba,defaults:()=>Wi,defer:()=>ei,delay:()=>vo,detect:()=>Re,difference:()=>Ac,drop:()=>Ia,each:()=>or,escape:()=>oe,every:()=>ja,extend:()=>Gn,extendOwn:()=>_i,filter:()=>ni,find:()=>Re,findIndex:()=>so,findKey:()=>Ho,findLastIndex:()=>zo,findWhere:()=>Nn,first:()=>Bs,flatten:()=>Oc,foldl:()=>hi,foldr:()=>pi,forEach:()=>or,functions:()=>Pn,get:()=>xr,groupBy:()=>Yf,has:()=>Sr,head:()=>Bs,identity:()=>pn,include:()=>Gr,includes:()=>Gr,indexBy:()=>Tc,indexOf:()=>Le,initial:()=>cr,inject:()=>hi,intersection:()=>kc,invert:()=>Sn,invoke:()=>Kf,isArguments:()=>De,isArray:()=>Ee,isArrayBuffer:()=>Dt,isBoolean:()=>$,isDataView:()=>Pe,isDate:()=>_t,isElement:()=>ft,isEmpty:()=>A,isEqual:()=>de,isError:()=>zt,isFinite:()=>Ut,isFunction:()=>Mt,isMap:()=>Lt,isMatch:()=>W,isNaN:()=>ce,isNull:()=>nt,isNumber:()=>U,isObject:()=>et,isRegExp:()=>Ot,isSet:()=>we,isString:()=>St,isSymbol:()=>pt,isTypedArray:()=>gt,isUndefined:()=>it,isWeakMap:()=>ee,isWeakSet:()=>Fe,iteratee:()=>ln,keys:()=>L,last:()=>Us,lastIndexOf:()=>mn,map:()=>Br,mapObject:()=>_r,matcher:()=>Me,matches:()=>Me,max:()=>Sc,memoize:()=>Ci,methods:()=>Pn,min:()=>_c,mixin:()=>xl,negate:()=>$i,noop:()=>qi,now:()=>tt,object:()=>Mc,omit:()=>Is,once:()=>hs,pairs:()=>cn,partial:()=>Vo,partition:()=>wl,pick:()=>Ec,pluck:()=>js,property:()=>jr,propertyOf:()=>le,random:()=>Ki,range:()=>gs,reduce:()=>hi,reduceRight:()=>pi,reject:()=>Gi,rest:()=>Ia,restArguments:()=>st,result:()=>pa,sample:()=>uu,select:()=>ni,shuffle:()=>Gf,size:()=>Jf,some:()=>Ls,sortBy:()=>Cc,sortedIndex:()=>Wo,tail:()=>Ia,take:()=>Bs,tap:()=>He,template:()=>Na,templateSettings:()=>on,throttle:()=>Qn,times:()=>Be,toArray:()=>ps,toPath:()=>qr,transpose:()=>vs,unescape:()=>nn,union:()=>td,uniq:()=>Ko,unique:()=>Ko,uniqueId:()=>cs,unzip:()=>vs,values:()=>We,where:()=>$f,without:()=>Vs,wrap:()=>Fo,zip:()=>du});var e={};t.r(e),t.d(e,{VERSION:()=>r,after:()=>di,all:()=>ja,allKeys:()=>ae,any:()=>Ls,assign:()=>_i,before:()=>Or,bind:()=>ds,bindAll:()=>bl,chain:()=>fs,chunk:()=>vi,clone:()=>br,collect:()=>Br,compact:()=>Qf,compose:()=>La,constant:()=>ie,contains:()=>Gr,countBy:()=>Xf,create:()=>rn,debounce:()=>va,default:()=>ed,defaults:()=>Wi,defer:()=>ei,delay:()=>vo,detect:()=>Re,difference:()=>Ac,drop:()=>Ia,each:()=>or,escape:()=>oe,every:()=>ja,extend:()=>Gn,extendOwn:()=>_i,filter:()=>ni,find:()=>Re,findIndex:()=>so,findKey:()=>Ho,findLastIndex:()=>zo,findWhere:()=>Nn,first:()=>Bs,flatten:()=>Oc,foldl:()=>hi,foldr:()=>pi,forEach:()=>or,functions:()=>Pn,get:()=>xr,groupBy:()=>Yf,has:()=>Sr,head:()=>Bs,identity:()=>pn,include:()=>Gr,includes:()=>Gr,indexBy:()=>Tc,indexOf:()=>Le,initial:()=>cr,inject:()=>hi,intersection:()=>kc,invert:()=>Sn,invoke:()=>Kf,isArguments:()=>De,isArray:()=>Ee,isArrayBuffer:()=>Dt,isBoolean:()=>$,isDataView:()=>Pe,isDate:()=>_t,isElement:()=>ft,isEmpty:()=>A,isEqual:()=>de,isError:()=>zt,isFinite:()=>Ut,isFunction:()=>Mt,isMap:()=>Lt,isMatch:()=>W,isNaN:()=>ce,isNull:()=>nt,isNumber:()=>U,isObject:()=>et,isRegExp:()=>Ot,isSet:()=>we,isString:()=>St,isSymbol:()=>pt,isTypedArray:()=>gt,isUndefined:()=>it,isWeakMap:()=>ee,isWeakSet:()=>Fe,iteratee:()=>ln,keys:()=>L,last:()=>Us,lastIndexOf:()=>mn,map:()=>Br,mapObject:()=>_r,matcher:()=>Me,matches:()=>Me,max:()=>Sc,memoize:()=>Ci,methods:()=>Pn,min:()=>_c,mixin:()=>xl,negate:()=>$i,noop:()=>qi,now:()=>tt,object:()=>Mc,omit:()=>Is,once:()=>hs,pairs:()=>cn,partial:()=>Vo,partition:()=>wl,pick:()=>Ec,pluck:()=>js,property:()=>jr,propertyOf:()=>le,random:()=>Ki,range:()=>gs,reduce:()=>hi,reduceRight:()=>pi,reject:()=>Gi,rest:()=>Ia,restArguments:()=>st,result:()=>pa,sample:()=>uu,select:()=>ni,shuffle:()=>Gf,size:()=>Jf,some:()=>Ls,sortBy:()=>Cc,sortedIndex:()=>Wo,tail:()=>Ia,take:()=>Bs,tap:()=>He,template:()=>Na,templateSettings:()=>on,throttle:()=>Qn,times:()=>Be,toArray:()=>ps,toPath:()=>qr,transpose:()=>vs,unescape:()=>nn,union:()=>td,uniq:()=>Ko,unique:()=>Ko,uniqueId:()=>cs,unzip:()=>vs,values:()=>We,where:()=>$f,without:()=>Vs,wrap:()=>Fo,zip:()=>du});var r="1.13.1",o=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},a=Array.prototype,s=Object.prototype,u=typeof Symbol<"u"?Symbol.prototype:null,c=a.push,h=a.slice,v=s.toString,m=s.hasOwnProperty,y=typeof ArrayBuffer<"u",_=typeof DataView<"u",C=Array.isArray,E=Object.keys,D=Object.create,F=y&&ArrayBuffer.isView,V=isNaN,K=isFinite,Z=!{toString:null}.propertyIsEnumerable("toString"),ct=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ht=Math.pow(2,53)-1;function st(z,rt){return rt=rt==null?z.length-1:+rt,function(){for(var xt=Math.max(arguments.length-rt,0),Et=Array(xt),Bt=0;Bt<xt;Bt++)Et[Bt]=arguments[Bt+rt];switch(rt){case 0:return z.call(this,Et);case 1:return z.call(this,arguments[0],Et);case 2:return z.call(this,arguments[0],arguments[1],Et)}var jt=Array(rt+1);for(Bt=0;Bt<rt;Bt++)jt[Bt]=arguments[Bt];return jt[rt]=Et,z.apply(this,jt)}}function et(z){var rt=typeof z;return rt==="function"||rt==="object"&&!!z}function nt(z){return z===null}function it(z){return z===void 0}function $(z){return z===!0||z===!1||v.call(z)==="[object Boolean]"}function ft(z){return!!(z&&z.nodeType===1)}function lt(z){var rt="[object "+z+"]";return function(xt){return v.call(xt)===rt}}const St=lt("String"),U=lt("Number"),_t=lt("Date"),Ot=lt("RegExp"),zt=lt("Error"),pt=lt("Symbol"),Dt=lt("ArrayBuffer");var yt=lt("Function"),kt=o.document&&o.document.childNodes;typeof Int8Array!="object"&&typeof kt!="function"&&(yt=function(z){return typeof z=="function"||!1});const Mt=yt,Kt=lt("Object");var Xt=_&&Kt(new DataView(new ArrayBuffer(8))),Qt=typeof Map<"u"&&Kt(new Map),ne=lt("DataView");function be(z){return z!=null&&Mt(z.getInt8)&&Dt(z.buffer)}const Pe=Xt?be:ne,Ee=C||lt("Array");function Oe(z,rt){return z!=null&&m.call(z,rt)}var Ke=lt("Arguments");(function(){Ke(arguments)||(Ke=function(z){return Oe(z,"callee")})})();const De=Ke;function Ut(z){return!pt(z)&&K(z)&&!isNaN(parseFloat(z))}function ce(z){return U(z)&&V(z)}function ie(z){return function(){return z}}function P(z){return function(rt){var xt=z(rt);return typeof xt=="number"&&xt>=0&&xt<=ht}}function k(z){return function(rt){return rt==null?void 0:rt[z]}}const N=k("byteLength"),q=P(N);var ut=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function Q(z){return F?F(z)&&!Pe(z):q(z)&&ut.test(v.call(z))}const gt=y?Q:ie(!1),Tt=k("length");function he(z){for(var rt={},xt=z.length,Et=0;Et<xt;++Et)rt[z[Et]]=!0;return{contains:function(Bt){return rt[Bt]},push:function(Bt){return rt[Bt]=!0,z.push(Bt)}}}function X(z,rt){rt=he(rt);var xt=ct.length,Et=z.constructor,Bt=Mt(Et)&&Et.prototype||s,jt="constructor";for(Oe(z,jt)&&!rt.contains(jt)&&rt.push(jt);xt--;)jt=ct[xt],jt in z&&z[jt]!==Bt[jt]&&!rt.contains(jt)&&rt.push(jt)}function L(z){if(!et(z))return[];if(E)return E(z);var rt=[];for(var xt in z)Oe(z,xt)&&rt.push(xt);return Z&&X(z,rt),rt}function A(z){if(z==null)return!0;var rt=Tt(z);return typeof rt=="number"&&(Ee(z)||St(z)||De(z))?rt===0:Tt(L(z))===0}function W(z,rt){var xt=L(rt),Et=xt.length;if(z==null)return!Et;for(var Bt=Object(z),jt=0;jt<Et;jt++){var te=xt[jt];if(rt[te]!==Bt[te]||!(te in Bt))return!1}return!0}function B(z){if(z instanceof B)return z;if(!(this instanceof B))return new B(z);this._wrapped=z}B.VERSION=r,B.prototype.value=function(){return this._wrapped},B.prototype.valueOf=B.prototype.toJSON=B.prototype.value,B.prototype.toString=function(){return String(this._wrapped)};function mt(z){return new Uint8Array(z.buffer||z,z.byteOffset||0,N(z))}var dt="[object DataView]";function qt(z,rt,xt,Et){if(z===rt)return z!==0||1/z===1/rt;if(z==null||rt==null)return!1;if(z!==z)return rt!==rt;var Bt=typeof z;return Bt!=="function"&&Bt!=="object"&&typeof rt!="object"?!1:fe(z,rt,xt,Et)}function fe(z,rt,xt,Et){z instanceof B&&(z=z._wrapped),rt instanceof B&&(rt=rt._wrapped);var Bt=v.call(z);if(Bt!==v.call(rt))return!1;if(Xt&&Bt=="[object Object]"&&Pe(z)){if(!Pe(rt))return!1;Bt=dt}switch(Bt){case"[object RegExp]":case"[object String]":return""+z==""+rt;case"[object Number]":return+z!=+z?+rt!=+rt:+z==0?1/+z===1/rt:+z==+rt;case"[object Date]":case"[object Boolean]":return+z==+rt;case"[object Symbol]":return u.valueOf.call(z)===u.valueOf.call(rt);case"[object ArrayBuffer]":case dt:return fe(mt(z),mt(rt),xt,Et)}var jt=Bt==="[object Array]";if(!jt&&gt(z)){var te=N(z);if(te!==N(rt))return!1;if(z.buffer===rt.buffer&&z.byteOffset===rt.byteOffset)return!0;jt=!0}if(!jt){if(typeof z!="object"||typeof rt!="object")return!1;var me=z.constructor,Ze=rt.constructor;if(me!==Ze&&!(Mt(me)&&me instanceof me&&Mt(Ze)&&Ze instanceof Ze)&&"constructor"in z&&"constructor"in rt)return!1}xt=xt||[],Et=Et||[];for(var Ye=xt.length;Ye--;)if(xt[Ye]===z)return Et[Ye]===rt;if(xt.push(z),Et.push(rt),jt){if(Ye=z.length,Ye!==rt.length)return!1;for(;Ye--;)if(!qt(z[Ye],rt[Ye],xt,Et))return!1}else{var Ar=L(z),gi;if(Ye=Ar.length,L(rt).length!==Ye)return!1;for(;Ye--;)if(gi=Ar[Ye],!(Oe(rt,gi)&&qt(z[gi],rt[gi],xt,Et)))return!1}return xt.pop(),Et.pop(),!0}function de(z,rt){return qt(z,rt)}function ae(z){if(!et(z))return[];var rt=[];for(var xt in z)rt.push(xt);return Z&&X(z,rt),rt}function xe(z){var rt=Tt(z);return function(xt){if(xt==null)return!1;var Et=ae(xt);if(Tt(Et))return!1;for(var Bt=0;Bt<rt;Bt++)if(!Mt(xt[z[Bt]]))return!1;return z!==ot||!Mt(xt[en])}}var en="forEach",dn="has",sn=["clear","delete"],Un=["get",dn,"set"],Lr=sn.concat(en,Un),ot=sn.concat(Un),Ct=["add"].concat(sn,en,dn);const Lt=Qt?xe(Lr):lt("Map"),ee=Qt?xe(ot):lt("WeakMap"),we=Qt?xe(Ct):lt("Set"),Fe=lt("WeakSet");function We(z){for(var rt=L(z),xt=rt.length,Et=Array(xt),Bt=0;Bt<xt;Bt++)Et[Bt]=z[rt[Bt]];return Et}function cn(z){for(var rt=L(z),xt=rt.length,Et=Array(xt),Bt=0;Bt<xt;Bt++)Et[Bt]=[rt[Bt],z[rt[Bt]]];return Et}function Sn(z){for(var rt={},xt=L(z),Et=0,Bt=xt.length;Et<Bt;Et++)rt[z[xt[Et]]]=xt[Et];return rt}function Pn(z){var rt=[];for(var xt in z)Mt(z[xt])&&rt.push(xt);return rt.sort()}function zi(z,rt){return function(xt){var Et=arguments.length;if(rt&&(xt=Object(xt)),Et<2||xt==null)return xt;for(var Bt=1;Bt<Et;Bt++)for(var jt=arguments[Bt],te=z(jt),me=te.length,Ze=0;Ze<me;Ze++){var Ye=te[Ze];(!rt||xt[Ye]===void 0)&&(xt[Ye]=jt[Ye])}return xt}}const Gn=zi(ae),_i=zi(L),Wi=zi(ae,!0);function gn(){return function(){}}function ir(z){if(!et(z))return{};if(D)return D(z);var rt=gn();rt.prototype=z;var xt=new rt;return rt.prototype=null,xt}function rn(z,rt){var xt=ir(z);return rt&&_i(xt,rt),xt}function br(z){return et(z)?Ee(z)?z.slice():Gn({},z):z}function He(z,rt){return rt(z),z}function qr(z){return Ee(z)?z:[z]}B.toPath=qr;function An(z){return B.toPath(z)}function wr(z,rt){for(var xt=rt.length,Et=0;Et<xt;Et++){if(z==null)return;z=z[rt[Et]]}return xt?z:void 0}function xr(z,rt,xt){var Et=wr(z,An(rt));return it(Et)?xt:Et}function Sr(z,rt){rt=An(rt);for(var xt=rt.length,Et=0;Et<xt;Et++){var Bt=rt[Et];if(!Oe(z,Bt))return!1;z=z[Bt]}return!!xt}function pn(z){return z}function Me(z){return z=_i({},z),function(rt){return W(rt,z)}}function jr(z){return z=An(z),function(rt){return wr(rt,z)}}function Yn(z,rt,xt){if(rt===void 0)return z;switch(xt??3){case 1:return function(Et){return z.call(rt,Et)};case 3:return function(Et,Bt,jt){return z.call(rt,Et,Bt,jt)};case 4:return function(Et,Bt,jt,te){return z.call(rt,Et,Bt,jt,te)}}return function(){return z.apply(rt,arguments)}}function Kr(z,rt,xt){return z==null?pn:Mt(z)?Yn(z,rt,xt):et(z)&&!Ee(z)?Me(z):jr(z)}function ln(z,rt){return Kr(z,rt,1/0)}B.iteratee=ln;function kn(z,rt,xt){return B.iteratee!==ln?B.iteratee(z,rt):Kr(z,rt,xt)}function _r(z,rt,xt){rt=kn(rt,xt);for(var Et=L(z),Bt=Et.length,jt={},te=0;te<Bt;te++){var me=Et[te];jt[me]=rt(z[me],me,z)}return jt}function qi(){}function le(z){return z==null?qi:function(rt){return xr(z,rt)}}function Be(z,rt,xt){var Et=Array(Math.max(0,z));rt=Yn(rt,xt,1);for(var Bt=0;Bt<z;Bt++)Et[Bt]=rt(Bt);return Et}function Ki(z,rt){return rt==null&&(rt=z,z=0),z+Math.floor(Math.random()*(rt-z+1))}const tt=Date.now||function(){return new Date().getTime()};function wt(z){var rt=function(jt){return z[jt]},xt="(?:"+L(z).join("|")+")",Et=RegExp(xt),Bt=RegExp(xt,"g");return function(jt){return jt=jt==null?"":""+jt,Et.test(jt)?jt.replace(Bt,rt):jt}}const Jt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},oe=wt(Jt),pe=Sn(Jt),nn=wt(pe),on=B.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Hn=/(.)^/,_n={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},oo=/\\|'|\r|\n|\u2028|\u2029/g;function $r(z){return"\\"+_n[z]}var ha=/^\s*(\w|\$)+\s*$/;function Na(z,rt,xt){!rt&&xt&&(rt=xt),rt=Wi({},rt,B.templateSettings);var Et=RegExp([(rt.escape||Hn).source,(rt.interpolate||Hn).source,(rt.evaluate||Hn).source].join("|")+"|$","g"),Bt=0,jt="__p+='";z.replace(Et,function(Ye,Ar,gi,nd,Dc){return jt+=z.slice(Bt,Dc).replace(oo,$r),Bt=Dc+Ye.length,Ar?jt+=`'+
((__t=(`+Ar+`))==null?'':_.escape(__t))+
'`:gi?jt+=`'+
((__t=(`+gi+`))==null?'':__t)+
'`:nd&&(jt+=`';
`+nd+`
__p+='`),Ye}),jt+=`';
`;var te=rt.variable;if(te){if(!ha.test(te))throw new Error("variable is not a bare identifier: "+te)}else jt=`with(obj||{}){
`+jt+`}
`,te="obj";jt=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+jt+`return __p;
`;var me;try{me=new Function(te,"_",jt)}catch(Ye){throw Ye.source=jt,Ye}var Ze=function(Ye){return me.call(this,Ye,B)};return Ze.source="function("+te+`){
`+jt+"}",Ze}function pa(z,rt,xt){rt=An(rt);var Et=rt.length;if(!Et)return Mt(xt)?xt.call(z):xt;for(var Bt=0;Bt<Et;Bt++){var jt=z==null?void 0:z[rt[Bt]];jt===void 0&&(jt=xt,Bt=Et),z=Mt(jt)?jt.call(z):jt}return z}var Uo=0;function cs(z){var rt=++Uo+"";return z?z+rt:rt}function fs(z){var rt=B(z);return rt._chain=!0,rt}function ao(z,rt,xt,Et,Bt){if(!(Et instanceof rt))return z.apply(xt,Bt);var jt=ir(z.prototype),te=z.apply(jt,Bt);return et(te)?te:jt}var Ra=st(function(z,rt){var xt=Ra.placeholder,Et=function(){for(var Bt=0,jt=rt.length,te=Array(jt),me=0;me<jt;me++)te[me]=rt[me]===xt?arguments[Bt++]:rt[me];for(;Bt<arguments.length;)te.push(arguments[Bt++]);return ao(z,Et,this,this,te)};return Et});Ra.placeholder=B;const Vo=Ra,ds=st(function(z,rt,xt){if(!Mt(z))throw new TypeError("Bind must be called on a function");var Et=st(function(Bt){return ao(z,Et,rt,this,xt.concat(Bt))});return Et}),ur=P(Tt);function Ir(z,rt,xt,Et){if(Et=Et||[],!rt&&rt!==0)rt=1/0;else if(rt<=0)return Et.concat(z);for(var Bt=Et.length,jt=0,te=Tt(z);jt<te;jt++){var me=z[jt];if(ur(me)&&(Ee(me)||De(me)))if(rt>1)Ir(me,rt-1,xt,Et),Bt=Et.length;else for(var Ze=0,Ye=me.length;Ze<Ye;)Et[Bt++]=me[Ze++];else xt||(Et[Bt++]=me)}return Et}const bl=st(function(z,rt){rt=Ir(rt,!1,!1);var xt=rt.length;if(xt<1)throw new Error("bindAll must be passed function names");for(;xt--;){var Et=rt[xt];z[Et]=ds(z[Et],z)}return z});function Ci(z,rt){var xt=function(Et){var Bt=xt.cache,jt=""+(rt?rt.apply(this,arguments):Et);return Oe(Bt,jt)||(Bt[jt]=z.apply(this,arguments)),Bt[jt]};return xt.cache={},xt}const vo=st(function(z,rt,xt){return setTimeout(function(){return z.apply(null,xt)},rt)}),ei=Vo(vo,B,1);function Qn(z,rt,xt){var Et,Bt,jt,te,me=0;xt||(xt={});var Ze=function(){me=xt.leading===!1?0:tt(),Et=null,te=z.apply(Bt,jt),Et||(Bt=jt=null)},Ye=function(){var Ar=tt();!me&&xt.leading===!1&&(me=Ar);var gi=rt-(Ar-me);return Bt=this,jt=arguments,gi<=0||gi>rt?(Et&&(clearTimeout(Et),Et=null),me=Ar,te=z.apply(Bt,jt),Et||(Bt=jt=null)):!Et&&xt.trailing!==!1&&(Et=setTimeout(Ze,gi)),te};return Ye.cancel=function(){clearTimeout(Et),me=0,Et=Bt=jt=null},Ye}function va(z,rt,xt){var Et,Bt,jt,te,me,Ze=function(){var Ar=tt()-Bt;rt>Ar?Et=setTimeout(Ze,rt-Ar):(Et=null,xt||(te=z.apply(me,jt)),Et||(jt=me=null))},Ye=st(function(Ar){return me=this,jt=Ar,Bt=tt(),Et||(Et=setTimeout(Ze,rt),xt&&(te=z.apply(me,jt))),te});return Ye.cancel=function(){clearTimeout(Et),Et=jt=me=null},Ye}function Fo(z,rt){return Vo(rt,z)}function $i(z){return function(){return!z.apply(this,arguments)}}function La(){var z=arguments,rt=z.length-1;return function(){for(var xt=rt,Et=z[rt].apply(this,arguments);xt--;)Et=z[xt].call(this,Et);return Et}}function di(z,rt){return function(){if(--z<1)return rt.apply(this,arguments)}}function Or(z,rt){var xt;return function(){return--z>0&&(xt=rt.apply(this,arguments)),z<=1&&(rt=null),xt}}const hs=Vo(Or,2);function Ho(z,rt,xt){rt=kn(rt,xt);for(var Et=L(z),Bt,jt=0,te=Et.length;jt<te;jt++)if(Bt=Et[jt],rt(z[Bt],Bt,z))return Bt}function Ti(z){return function(rt,xt,Et){xt=kn(xt,Et);for(var Bt=Tt(rt),jt=z>0?0:Bt-1;jt>=0&&jt<Bt;jt+=z)if(xt(rt[jt],jt,rt))return jt;return-1}}const so=Ti(1),zo=Ti(-1);function Wo(z,rt,xt,Et){xt=kn(xt,Et,1);for(var Bt=xt(rt),jt=0,te=Tt(z);jt<te;){var me=Math.floor((jt+te)/2);xt(z[me])<Bt?jt=me+1:te=me}return jt}function je(z,rt,xt){return function(Et,Bt,jt){var te=0,me=Tt(Et);if(typeof jt=="number")z>0?te=jt>=0?jt:Math.max(jt+me,te):me=jt>=0?Math.min(jt+1,me):jt+me+1;else if(xt&&jt&&me)return jt=xt(Et,Bt),Et[jt]===Bt?jt:-1;if(Bt!==Bt)return jt=rt(h.call(Et,te,me),ce),jt>=0?jt+te:-1;for(jt=z>0?te:me-1;jt>=0&&jt<me;jt+=z)if(Et[jt]===Bt)return jt;return-1}}const Le=je(1,so,Wo),mn=je(-1,zo);function Re(z,rt,xt){var Et=ur(z)?so:Ho,Bt=Et(z,rt,xt);if(Bt!==void 0&&Bt!==-1)return z[Bt]}function Nn(z,rt){return Re(z,Me(rt))}function or(z,rt,xt){rt=Yn(rt,xt);var Et,Bt;if(ur(z))for(Et=0,Bt=z.length;Et<Bt;Et++)rt(z[Et],Et,z);else{var jt=L(z);for(Et=0,Bt=jt.length;Et<Bt;Et++)rt(z[jt[Et]],jt[Et],z)}return z}function Br(z,rt,xt){rt=kn(rt,xt);for(var Et=!ur(z)&&L(z),Bt=(Et||z).length,jt=Array(Bt),te=0;te<Bt;te++){var me=Et?Et[te]:te;jt[te]=rt(z[me],me,z)}return jt}function qo(z){var rt=function(xt,Et,Bt,jt){var te=!ur(xt)&&L(xt),me=(te||xt).length,Ze=z>0?0:me-1;for(jt||(Bt=xt[te?te[Ze]:Ze],Ze+=z);Ze>=0&&Ze<me;Ze+=z){var Ye=te?te[Ze]:Ze;Bt=Et(Bt,xt[Ye],Ye,xt)}return Bt};return function(xt,Et,Bt,jt){var te=arguments.length>=3;return rt(xt,Yn(Et,jt,4),Bt,te)}}const hi=qo(1),pi=qo(-1);function ni(z,rt,xt){var Et=[];return rt=kn(rt,xt),or(z,function(Bt,jt,te){rt(Bt,jt,te)&&Et.push(Bt)}),Et}function Gi(z,rt,xt){return ni(z,$i(kn(rt)),xt)}function ja(z,rt,xt){rt=kn(rt,xt);for(var Et=!ur(z)&&L(z),Bt=(Et||z).length,jt=0;jt<Bt;jt++){var te=Et?Et[jt]:jt;if(!rt(z[te],te,z))return!1}return!0}function Ls(z,rt,xt){rt=kn(rt,xt);for(var Et=!ur(z)&&L(z),Bt=(Et||z).length,jt=0;jt<Bt;jt++){var te=Et?Et[jt]:jt;if(rt(z[te],te,z))return!0}return!1}function Gr(z,rt,xt,Et){return ur(z)||(z=We(z)),(typeof xt!="number"||Et)&&(xt=0),Le(z,rt,xt)>=0}const Kf=st(function(z,rt,xt){var Et,Bt;return Mt(rt)?Bt=rt:(rt=An(rt),Et=rt.slice(0,-1),rt=rt[rt.length-1]),Br(z,function(jt){var te=Bt;if(!te){if(Et&&Et.length&&(jt=wr(jt,Et)),jt==null)return;te=jt[rt]}return te==null?te:te.apply(jt,xt)})});function js(z,rt){return Br(z,jr(rt))}function $f(z,rt){return ni(z,Me(rt))}function Sc(z,rt,xt){var Et=-1/0,Bt=-1/0,jt,te;if(rt==null||typeof rt=="number"&&typeof z[0]!="object"&&z!=null){z=ur(z)?z:We(z);for(var me=0,Ze=z.length;me<Ze;me++)jt=z[me],jt!=null&&jt>Et&&(Et=jt)}else rt=kn(rt,xt),or(z,function(Ye,Ar,gi){te=rt(Ye,Ar,gi),(te>Bt||te===-1/0&&Et===-1/0)&&(Et=Ye,Bt=te)});return Et}function _c(z,rt,xt){var Et=1/0,Bt=1/0,jt,te;if(rt==null||typeof rt=="number"&&typeof z[0]!="object"&&z!=null){z=ur(z)?z:We(z);for(var me=0,Ze=z.length;me<Ze;me++)jt=z[me],jt!=null&&jt<Et&&(Et=jt)}else rt=kn(rt,xt),or(z,function(Ye,Ar,gi){te=rt(Ye,Ar,gi),(te<Bt||te===1/0&&Et===1/0)&&(Et=Ye,Bt=te)});return Et}function uu(z,rt,xt){if(rt==null||xt)return ur(z)||(z=We(z)),z[Ki(z.length-1)];var Et=ur(z)?br(z):We(z),Bt=Tt(Et);rt=Math.max(Math.min(rt,Bt),0);for(var jt=Bt-1,te=0;te<rt;te++){var me=Ki(te,jt),Ze=Et[te];Et[te]=Et[me],Et[me]=Ze}return Et.slice(0,rt)}function Gf(z){return uu(z,1/0)}function Cc(z,rt,xt){var Et=0;return rt=kn(rt,xt),js(Br(z,function(Bt,jt,te){return{value:Bt,index:Et++,criteria:rt(Bt,jt,te)}}).sort(function(Bt,jt){var te=Bt.criteria,me=jt.criteria;if(te!==me){if(te>me||te===void 0)return 1;if(te<me||me===void 0)return-1}return Bt.index-jt.index}),"value")}function cu(z,rt){return function(xt,Et,Bt){var jt=rt?[[],[]]:{};return Et=kn(Et,Bt),or(xt,function(te,me){var Ze=Et(te,me,xt);z(jt,te,Ze)}),jt}}const Yf=cu(function(z,rt,xt){Oe(z,xt)?z[xt].push(rt):z[xt]=[rt]}),Tc=cu(function(z,rt,xt){z[xt]=rt}),Xf=cu(function(z,rt,xt){Oe(z,xt)?z[xt]++:z[xt]=1}),wl=cu(function(z,rt,xt){z[xt?0:1].push(rt)},!0);var fu=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ps(z){return z?Ee(z)?h.call(z):St(z)?z.match(fu):ur(z)?Br(z,pn):We(z):[]}function Jf(z){return z==null?0:ur(z)?z.length:L(z).length}function Zf(z,rt,xt){return rt in xt}const Ec=st(function(z,rt){var xt={},Et=rt[0];if(z==null)return xt;Mt(Et)?(rt.length>1&&(Et=Yn(Et,rt[1])),rt=ae(z)):(Et=Zf,rt=Ir(rt,!1,!1),z=Object(z));for(var Bt=0,jt=rt.length;Bt<jt;Bt++){var te=rt[Bt],me=z[te];Et(me,te,z)&&(xt[te]=me)}return xt}),Is=st(function(z,rt){var xt=rt[0],Et;return Mt(xt)?(xt=$i(xt),rt.length>1&&(Et=rt[1])):(rt=Br(Ir(rt,!1,!1),String),xt=function(Bt,jt){return!Gr(rt,jt)}),Ec(z,xt,Et)});function cr(z,rt,xt){return h.call(z,0,Math.max(0,z.length-(rt==null||xt?1:rt)))}function Bs(z,rt,xt){return z==null||z.length<1?rt==null||xt?void 0:[]:rt==null||xt?z[0]:cr(z,z.length-rt)}function Ia(z,rt,xt){return h.call(z,rt==null||xt?1:rt)}function Us(z,rt,xt){return z==null||z.length<1?rt==null||xt?void 0:[]:rt==null||xt?z[z.length-1]:Ia(z,Math.max(0,z.length-rt))}function Qf(z){return ni(z,Boolean)}function Oc(z,rt){return Ir(z,rt,!1)}const Ac=st(function(z,rt){return rt=Ir(rt,!0,!0),ni(z,function(xt){return!Gr(rt,xt)})}),Vs=st(function(z,rt){return Ac(z,rt)});function Ko(z,rt,xt,Et){$(rt)||(Et=xt,xt=rt,rt=!1),xt!=null&&(xt=kn(xt,Et));for(var Bt=[],jt=[],te=0,me=Tt(z);te<me;te++){var Ze=z[te],Ye=xt?xt(Ze,te,z):Ze;rt&&!xt?((!te||jt!==Ye)&&Bt.push(Ze),jt=Ye):xt?Gr(jt,Ye)||(jt.push(Ye),Bt.push(Ze)):Gr(Bt,Ze)||Bt.push(Ze)}return Bt}const td=st(function(z){return Ko(Ir(z,!0,!0))});function kc(z){for(var rt=[],xt=arguments.length,Et=0,Bt=Tt(z);Et<Bt;Et++){var jt=z[Et];if(!Gr(rt,jt)){var te;for(te=1;te<xt&&Gr(arguments[te],jt);te++);te===xt&&rt.push(jt)}}return rt}function vs(z){for(var rt=z&&Sc(z,Tt).length||0,xt=Array(rt),Et=0;Et<rt;Et++)xt[Et]=js(z,Et);return xt}const du=st(vs);function Mc(z,rt){for(var xt={},Et=0,Bt=Tt(z);Et<Bt;Et++)rt?xt[z[Et]]=rt[Et]:xt[z[Et][0]]=z[Et][1];return xt}function gs(z,rt,xt){rt==null&&(rt=z||0,z=0),xt||(xt=rt<z?-1:1);for(var Et=Math.max(Math.ceil((rt-z)/xt),0),Bt=Array(Et),jt=0;jt<Et;jt++,z+=xt)Bt[jt]=z;return Bt}function vi(z,rt){if(rt==null||rt<1)return[];for(var xt=[],Et=0,Bt=z.length;Et<Bt;)xt.push(h.call(z,Et,Et+=rt));return xt}function Fs(z,rt){return z._chain?B(rt).chain():rt}function xl(z){return or(Pn(z),function(rt){var xt=B[rt]=z[rt];B.prototype[rt]=function(){var Et=[this._wrapped];return c.apply(Et,arguments),Fs(this,xt.apply(B,Et))}}),B}or(["pop","push","reverse","shift","sort","splice","unshift"],function(z){var rt=a[z];B.prototype[z]=function(){var xt=this._wrapped;return xt!=null&&(rt.apply(xt,arguments),(z==="shift"||z==="splice")&&xt.length===0&&delete xt[0]),Fs(this,xt)}}),or(["concat","join","slice"],function(z){var rt=a[z];B.prototype[z]=function(){var xt=this._wrapped;return xt!=null&&(xt=rt.apply(xt,arguments)),Fs(this,xt)}});const ed=B;var Yi=xl(e);Yi._=Yi;const Ba=Yi}},VO={};function On(i){var n=VO[i];if(n!==void 0)return n.exports;var t=VO[i]={exports:{}};return Az[i].call(t.exports,t,t.exports,On),t.exports}On.n=i=>{var n=i&&i.__esModule?()=>i.default:()=>i;return On.d(n,{a:n}),n};On.d=(i,n)=>{for(var t in n)On.o(n,t)&&!On.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:n[t]})};On.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();On.o=(i,n)=>Object.prototype.hasOwnProperty.call(i,n);On.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var Ib={};On.d(Ib,{Ay:()=>ZZ,I0:()=>nN,nu:()=>eN});var J=On(5706),Zt=On(1166);function sa(i){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var e=i.raw;return e.reduce(function(r,o,a){var s=n[a-1],u=e[a-1];return Array.isArray(s)?s=s.join(""):u&&u.slice(-1)==="$"?r=r.slice(0,-1):s=(0,Zt.escape)(s),r+s+o})}var kz=function(){return{stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,customUI:!1,telemetry:!0}};const Mz=kz;var j1=On(4193),Dz=On.n(j1),xi=On(7774);const Pz=function(i){var n=i.$;if(n&&n.prototype&&n.prototype.constructor.name!=="jQuery"){var t=n.fn;t.hide=function(){return this.css("display","none")},t.show=function(){return this.css("display","block")},t.focus=function(){var o=this.get(0);return o&&o.focus(),this},t.bind=function(o,a){return this.on(o,a)},t.unbind=function(o,a){if((0,J.isObject)(o)){for(var s in o)o.hasOwnProperty(s)&&this.off(s,o[s]);return this}else return this.off(o,a)},t.click=function(o){return o?this.on("click",o):this.trigger("click")},t.change=function(o){return o?this.on("change",o):this.trigger("change")},t.keydown=function(o){return o?this.on("keydown",o):this.trigger("keydown")},t.delegate=function(o,a,s,u){return u||(u=s),this.on(a,o,function(c){c.data=s,u(c)})},t.scrollLeft=function(){var o=this.get(0);o=o.nodeType==9?o.defaultView:o;var a=o instanceof Window?o:null;return a?a.pageXOffset:o.scrollLeft||0},t.scrollTop=function(){var o=this.get(0);o=o.nodeType==9?o.defaultView:o;var a=o instanceof Window?o:null;return a?a.pageYOffset:o.scrollTop||0};var e=n.prototype.offset;t.offset=function(o){var a,s;return o&&(a=o.top,s=o.left),typeof a<"u"&&this.css("top","".concat(a,"px")),typeof s<"u"&&this.css("left","".concat(s,"px")),e.call(this)},n.map=function(o,a){for(var s=[],u=0;u<o.length;u++)s.push(a(o[u],u));return s};var r=Array.prototype.indexOf;n.inArray=function(o,a,s){return a==null?-1:r.call(a,o,s)},n.Event=function(o,a){if(!(this instanceof n.Event))return new n.Event(o,a);this.type=o,this.isDefaultPrevented=function(){return!1}}}};var ye=On(9156),CD=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Nz=function(i){CD(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n}(ye.Kx),Rz=function(i){CD(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getByComponent=function(t){var e=this;return this.filter(function(r){return e.getComponent(r)===t})[0]},n.prototype.addComponent=function(t,e){var r=this,o=((0,J.isArray)(t)?t:[t]).filter(function(a){return!r.hasComponent(a)}).map(function(a){return new Nz({component:a})})[0];return this.push(o,e)},n.prototype.getComponent=function(t){return t.get("component")},n.prototype.hasComponent=function(t){var e=this.getByComponent(t);return e&&this.contains(e)},n.prototype.lastComponent=function(){var t=this.last();return t?this.getComponent(t):void 0},n.prototype.allComponents=function(){var t=this;return this.map(function(e){return t.getComponent(e)}).filter(function(e){return e})},n.prototype.removeComponent=function(t,e){var r=this,o=((0,J.isArray)(t)?t:[t]).map(function(a){return r.getByComponent(a)});return this.remove(o,e)},n}(ye.pM);const Lz=Rz;var jz=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),JS=function(){return JS=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},JS.apply(this,arguments)},Iz=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},TD=function(){function i(n,t,e){this.debounced=[],this.collections=[],this.cls=[],this.events={},this._em=n,this._name=t;var r=this.name.charAt(0).toLowerCase()+this.name.slice(1),o=(0,J.isUndefined)(n.config[r])?n.config[this.name]:n.config[r],a=o===!0?{}:o||{};a.pStylePrefix=n.config.pStylePrefix||"",!(0,J.isUndefined)(o)&&!o&&(a._disable=1),a.em=n,this._config=(0,Zt.deepMerge)(e||{},a)}return Object.defineProperty(i.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),i.prototype.render=function(n){},i.prototype.postLoad=function(n){},i.prototype.onInit=function(){},Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),i.prototype.getConfig=function(n){return n?this.config[n]:this.config},i.prototype.__logWarn=function(n,t){t===void 0&&(t={}),this.em.logWarning("[".concat(this.name,"]: ").concat(n),t)},i.prototype.destroy=function(){this.__destroy()},i.prototype.__destroy=function(){var n,t,e;(n=this.view)===null||n===void 0||n.remove(),(t=this.state)===null||t===void 0||t.stopListening(),(e=this.state)===null||e===void 0||e.clear(),this.debounced.forEach(function(r){return r.cancel()}),this.collections.forEach(function(r){r.stopListening(),r.reset()})},i.prototype.__appendTo=function(){var n=this.getConfig().appendTo;if(n){var t=(0,J.isElement)(n)?n:document.querySelector(n);if(!t)return this.__logWarn('"appendTo" element not found');t.appendChild(this.render())}},i}();const da=TD;var lu=function(i){jz(n,i);function n(t,e,r,o,a,s){s===void 0&&(s={});var u=i.call(this,t,e,a)||this;return u.cls=[],u._itemCache=new Map,u.private=!1,u.all=r,o&&(u.events=o),!s.skipListen&&u.__initListen(),u}return n.prototype.postLoad=function(t){},n.prototype.render=function(t){},n.prototype.getProjectData=function(t){var e={},r=this.storageKey;return r&&(e[r]=t||this.getAll()),e},n.prototype.loadProjectData=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=e.all,o=e.onResult,a=e.reset,s=this.storageKey,u={action:"load"},c=r||this.all,h=t[s];if(typeof h=="string")try{h=JSON.parse(h)}catch{this.__logWarn("Data parsing failed",{input:h})}return a&&h&&c.reset(void 0,u),o?h&&o(h,u):h&&(0,Zt.isDef)(h.length)&&c.reset(h,u),h},n.prototype.clear=function(t){t===void 0&&(t={});var e=this.all;return e&&e.reset(void 0,t),this},n.prototype.getAll=function(){return Iz([],this.all.models,!0)},n.prototype.getAllMap=function(){return this.getAll().reduce(function(t,e){return t[e.get(e.idAttribute)]=e,t},{})},n.prototype._makeCacheKey=function(t){return""},n.prototype._cacheItem=function(t){var e=this._makeCacheKey(t);e&&this._itemCache.set(e,t)},n.prototype._uncacheItem=function(t){var e=this._makeCacheKey(t);e&&this._itemCache.delete(e)},n.prototype._clearItemCache=function(){this._itemCache.clear()},n.prototype._onItemsResetCache=function(t){var e=this;this._clearItemCache(),t.each(function(r){return e._cacheItem(r)})},n.prototype._onItemKeyChange=function(t){for(var e,r=0,o=this._itemCache.entries();r<o.length;r++){var a=o[r],s=a[0],u=a[1];if(u===t){e=s;break}}e&&this._itemCache.delete(e),this._cacheItem(t)},n.prototype._setupCacheListeners=function(){this.em.listenTo(this.all,"add",this._cacheItem.bind(this)),this.em.listenTo(this.all,"remove",this._uncacheItem.bind(this)),this.em.listenTo(this.all,"reset",this._onItemsResetCache.bind(this))},n.prototype.__initListen=function(t){t===void 0&&(t={});var e=this,r=e.all,o=e.em,a=e.events;r&&o&&r.on("add",function(s,u,c){return o.trigger(a.add,s,c)}).on("remove",function(s,u,c){return o.trigger(a.remove,s,c)}).on("change",function(s,u){return o.trigger(a.update,s,s.changedAttributes(),u)}).on("all",this.__catchAllEvent,this),this.cls=[r].concat(t.collections||[]),(t.propagate||[]).forEach(function(s){var u=s.entity,c=s.event;u.on("all",function(h,v,m,y){var _=y||m,C=JS({event:h},_);[o,r].map(function(E){return E.trigger(c,v,C)})})})},n.prototype.__remove=function(t,e){var r=this;e===void 0&&(e={});var o=this.em,a=(0,J.isString)(t)?this.get(t):t,s=function(){return a&&r.all.remove(a,e),a};return!e.silent&&(o==null||o.trigger(this.events.removeBefore,a,s,e)),!e.abort&&s()},n.prototype.__catchAllEvent=function(t,e,r,o){var a=this,s=a.em,u=a.events,c=o||r;s&&u.all&&s.trigger(u.all,{event:t,model:e,options:c}),this.__onAllEvent()},n.prototype.__appendTo=function(t){var e=this.config.appendTo;if(e){var r=(0,J.isElement)(e)?e:document.querySelector(e);if(!r)return this.__logWarn('"appendTo" element not found');r.appendChild(this.render(t))}},n.prototype.__onAllEvent=function(){},n.prototype._createId=function(t){t===void 0&&(t=16);var e=this.getAll(),r=e.length+t,o=this.getAllMap(),a;do a=(0,Zt.createId)(r);while(o[a]);return a},n.prototype.__listenAdd=function(t,e){var r=this;t.on("add",function(o,a,s){return r.em.trigger(e,o,s)})},n.prototype.__listenRemove=function(t,e){var r=this;t.on("remove",function(o,a,s){return r.em.trigger(e,o,s)})},n.prototype.__listenUpdate=function(t,e){var r=this;t.on("change",function(o,a){return r.em.trigger(e,o,o.changedAttributes(),a)})},n.prototype.__destroy=function(){var t;this.cls.forEach(function(e){e.stopListening(),e.reset()}),(t=this.view)===null||t===void 0||t.remove(),this.view=void 0},n}(TD),Bz=function(){return{stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"],allowExternalDrop:!0}};const Uz=Bz;var bc=On(7058),ZS;(function(i){i.add="device:add",i.addBefore="device:add:before",i.remove="device:remove",i.removeBefore="device:remove:before",i.select="device:select",i.selectBefore="device:select:before",i.update="device:update",i.all="device"})(ZS||(ZS={}));const ED=ZS;var QS;(function(i){i.add="page:add",i.addBefore="page:add:before",i.remove="page:remove",i.removeBefore="page:remove:before",i.select="page:select",i.selectBefore="page:select:before",i.update="page:update",i.all="page"})(QS||(QS={}));const t_=QS;var Vz=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fz=function(i){Vz(n,i);function n(t,e,r){return i.call(this,e,{module:t,modelConstructor:r})||this}return n.prototype.add=function(t,e){var r=this,o,a=(0,J.isArray)(t)?t:(0,J.isUndefined)(t)?void 0:[t];return a=(o=a==null?void 0:a.map(function(s){return s instanceof r.newModel?s:new r.newModel(r.module,s)}))!==null&&o!==void 0?o:[void 0],i.prototype.add.call(this,(0,J.isArray)(t)?a:a[0],e)},n.prototype.preinitialize=function(t,e){this.newModel=e.modelConstructor,this.module=e.module},n}(ye.pM);const Bb=Fz;var f0;(function(i){i.dragEnter="canvas:dragenter",i.dragOver="canvas:dragover",i.dragEnd="canvas:dragend",i.dragData="canvas:dragdata",i.drop="canvas:drop",i.spot="canvas:spot",i.spotAdd="canvas:spot:add",i.spotUpdate="canvas:spot:update",i.spotRemove="canvas:spot:remove",i.coords="canvas:coords",i.zoom="canvas:zoom",i.pointer="canvas:pointer",i.refresh="canvas:refresh",i.frameLoad="canvas:frame:load",i.frameLoadHead="canvas:frame:load:head",i.frameLoadBody="canvas:frame:load:body",i.frameUnload="canvas:frame:unload"})(f0||(f0={}));const zv=f0;var Hz=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),e_=function(){return e_=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},e_.apply(this,arguments)},FO=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},HO="__aw",zO="__ah",WO=function(i,n){var t,e=i.get(n),r=(t=i.view)===null||t===void 0?void 0:t.el[n==="width"?"offsetWidth":"offsetHeight"];return(0,J.isNumber)(e)?e:(0,J.isString)(e)&&e.endsWith("px")?parseFloat(e):r||0},zz=function(i){Hz(n,i);function n(t,e){var r=i.call(this,t,e)||this,o=r.em,a=r.attributes,s=a.styles,u=a.component,c=o.Components,h=c.getConfig(),v=o.Css.getAll(),m={},y={em:o,config:h,frame:r,idMap:m};if(!(0,Zt.isComponent)(u)){var _=(0,Zt.isObject)(u)?u:{components:u};!_.type&&(_.type="wrapper");var C=c.getType("wrapper").model;r.set("component",new C(_,y))}if(!s)r.set("styles",v);else if(!(0,Zt.isObject)(s)){var E=s;(0,J.keys)(m).length&&(E=(0,J.isString)(E)?o.Parser.parseCss(E):E,o.Css.checkId(E,{idMap:m})),v.add(E),r.set("styles",v)}return!e.width&&r.set(HO,1),!e.height&&r.set(zO,1),!r.id&&r.set("id",(0,Zt.createId)()),r}return n.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",refFrame:null,_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(n.prototype,"width",{get:function(){return WO(this,"width")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return WO(this,"height")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"refFrame",{get:function(){return this.get("refFrame")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){var t=this.refFrame;return(t==null?void 0:t.getComponent())||this.getComponent()},enumerable:!1,configurable:!0}),n.prototype.initRefs=function(){var t=this.refFrame;if((0,J.isString)(t)){var e=this.module.framesById[t];e&&this.set({refFrame:e},{silent:!0})}},n.prototype.getBoxRect=function(){var t=this.attributes,e=t.x,r=t.y,o=this,a=o.width,s=o.height;return{x:e,y:r,width:a,height:s}},n.prototype.onRemove=function(){!this.refFrame&&this.getComponent().remove({root:1})},n.prototype.changesUp=function(t){t===void 0&&(t={}),!(t.temporary||t.noCount||t.avoidStore)&&this.set("changesCount",this.get("changesCount")+1)},n.prototype.getComponent=function(){return this.get("component")},n.prototype.getStyles=function(){return this.get("styles")},n.prototype.disable=function(){this.trigger("disable")},n.prototype.remove=function(){var t;(t=this.view)===null||t===void 0||t.remove(),this.view=void 0;var e=this.collection;return e&&e.remove(this)},n.prototype.getHead=function(){return FO([],this.head,!0)},n.prototype.setHead=function(t){return this.set("head",FO([],t,!0))},n.prototype.addHeadItem=function(t){this.head.push(t)},n.prototype.getHeadByAttr=function(t,e,r){return this.head.filter(function(o){return o.attributes&&o.attributes[t]==e&&(!r||r===o.tag)})[0]},n.prototype.removeHeadByAttr=function(t,e,r){var o=this.getHeadByAttr(t,e,r),a=this.head.indexOf(o);a>=0&&this.head.splice(a,1)},n.prototype.addLink=function(t){var e="link";!this.getHeadByAttr("href",t,e)&&this.addHeadItem({tag:e,attributes:{href:t,rel:"stylesheet"}})},n.prototype.removeLink=function(t){this.removeHeadByAttr("href",t,"link")},n.prototype.addScript=function(t){var e="script";!this.getHeadByAttr("src",t,e)&&this.addHeadItem({tag:e,attributes:{src:t}})},n.prototype.removeScript=function(t){this.removeHeadByAttr("src",t,"script")},n.prototype.getPage=function(){var t;return(t=this.collection)===null||t===void 0?void 0:t.page},n.prototype._emitUpdated=function(t){t===void 0&&(t={}),this.em.trigger("frame:updated",e_({frame:this},t))},n.prototype._emitUnload=function(){this._emitWithEditor(zv.frameUnload,{frame:this})},n.prototype._emitWithEditor=function(t,e){[this.em,this].forEach(function(r){return r==null?void 0:r.trigger(t,e)})},n.prototype.hasAutoHeight=function(){var t=this.attributes.height;return!!(t==="auto"||this.config.infiniteCanvas)},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=bc.A.prototype.toJSON.call(this,t),r=(0,J.result)(this,"defaults");return t.fromUndo&&delete e.component,delete e.styles,delete e.changesCount,e[HO]&&delete e.width,e[zO]&&delete e.height,e.refFrame&&(e.refFrame=e.refFrame.id,delete e.component),(0,J.forEach)(e,function(o,a){a.indexOf("_")===0&&delete e[a]}),(0,J.forEach)(r,function(o,a){e[a]===o&&delete e[a]}),(0,J.forEach)(["attributes","head"],function(o){(0,J.isEmpty)(e[o])&&delete e[o]}),e},n}(bc.A);const OD=zz;var Wz=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qz=function(i){Wz(n,i);function n(t,e){e===void 0&&(e=[]);var r=i.call(this,t,e,OD)||this;return r.loadedItems=0,r.itemsToLoad=0,(0,J.bindAll)(r,"itemLoaded"),r.on("add",r.onAdd),r.on("reset",r.onReset),r.on("remove",r.onRemove),r.forEach(function(o){return r.onAdd(o)}),r}return n.prototype.onAdd=function(t){this.module.framesById[t.id]=t},n.prototype.onReset=function(t,e){var r=this,o=(e==null?void 0:e.previousModels)||[];o.map(function(a){return r.onRemove(a)})},n.prototype.onRemove=function(t){t.onRemove(),delete this.module.framesById[t.id]},n.prototype.initRefs=function(){this.forEach(function(t){return t.initRefs()})},n.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},n.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},n.prototype.listenToLoadItems=function(t){var e=this;this.forEach(function(r){return r[t?"on":"off"]("loaded",e.itemLoaded)})},n}(Bb);const AD=qz;var Kz=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$z=function(i){Kz(n,i);function n(t){var e=this,r=t.em,o=t.config,a=o.scripts,s=o.styles;return e=i.call(this,t,{scripts:a,styles:s})||this,e.set("frames",new AD(t)),e.on("change:zoom",e.onZoomChange),e.on("change:x change:y",e.onCoordsChange),e.on("change:pointer change:pointerScreen",e.onPointerChange),e.listenTo(r,"change:device ".concat(ED.update),e.updateDevice),e.listenTo(r,t_.select,e._pageUpdated),e}return n.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:ye.lK,pointerScreen:ye.lK}},Object.defineProperty(n.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),n.prototype.init=function(){var t=this.em,e=t.Pages._initPage();this.set("frames",e.getFrames()),this.updateDevice({frame:e.getMainFrame()})},n.prototype._pageUpdated=function(t,e){var r=this.em;r.setSelected(),r.get("readyCanvas")&&r.stopDefault(),e==null||e.getFrames().map(function(o){o.disable(),o._emitUnload()}),this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},n.prototype.updateDevice=function(t){t===void 0&&(t={});var e=this.em,r=e.getDeviceModel(),o=t.frame||e.getCurrentFrameModel();if(o&&r){var a=r.attributes,s=a.width,u=a.height,c=a.minHeight;o.set({width:s,height:u,minHeight:c},{noUndo:1})}},n.prototype.onZoomChange=function(t,e,r){var o=this,a=o.em,s=o.module,u=this.get("zoom");u<1&&this.set("zoom",1),a.trigger(s.events.zoom,{options:r})},n.prototype.onCoordsChange=function(){var t=this,e=t.em,r=t.module;e.trigger(r.events.coords)},n.prototype.onPointerChange=function(){var t=this,e=t.em,r=t.module;e.trigger(r.events.pointer)},n.prototype.getPointerCoords=function(t){t===void 0&&(t=ye.x2.World);var e=this.attributes,r=e.pointer,o=e.pointerScreen;return t===ye.x2.World?r:o},n}(bc.A);const Gz=$z;var rs=On(179),In=On(2225),Yz=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xz=function(i){Yz(n,i);function n(t,e){e===void 0&&(e=[]);var r=i.call(this,t,e,rs.A)||this;r.on("add",r.onAdd),r.on("change",r.onChange),r.on("remove",r.onRemove);var o=r.em;r.refreshDbn=(0,J.debounce)(function(){return r.refresh()},0);var a="".concat(In.I.resize," styleable:change ").concat(In.I.input," ").concat(In.I.update," frame:updated undo redo");return r.listenTo(o,a,function(){return r.refreshDbn()}),r}return Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),n.prototype.refresh=function(){var t=this,e=t.em,r=t.events;e.trigger(r.spot)},n.prototype.onAdd=function(t){this.__trgEvent(this.events.spotAdd,{spot:t})},n.prototype.onChange=function(t){this.__trgEvent(this.events.spotUpdate,{spot:t})},n.prototype.onRemove=function(t){this.__trgEvent(this.events.spotRemove,{spot:t})},n.prototype.__trgEvent=function(t,e){var r=this.module,o=r.em;o.trigger(t,e),this.refreshDbn()},n}(Bb);const Jz=Xz;var Zz=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qz=function(i){Zz(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"module",{get:function(){var t,e;return(e=(t=this.model)===null||t===void 0?void 0:t.module)!==null&&e!==void 0?e:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),n.prototype.preinitialize=function(t){this.className=""},n}(ye.Ss);const ls=Qz;var Ce=On(6294),t8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),e8=function(i){t8(n,i);function n(t,e){t===void 0&&(t={}),e===void 0&&(e=!1);var r=i.call(this,t)||this;return r.itemsView="",r.itemType="type",r.reuseView=!1,r.viewCollection=[],e&&r.listenTo(r.collection,"add",r.addTo),r}return n.prototype.addTo=function(t){this.add(t)},n.prototype.itemViewNotFound=function(t){},n.prototype.add=function(t,e){var r=this,o=r.reuseView,a=r.viewCollection,s=e||null,u=t.get(this.itemType),c;t.view&&o?c=t.view:c=this.renderView(t,u),a.push(c);var h=c.render().el;s?s.appendChild(h):this.$el.append(h)},n.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(r){return t.add(r,e)}),this.$el.append(e),this.onRender(),this},n.prototype.onRender=function(){},n.prototype.onRemoveBefore=function(t,e){},n.prototype.onRemove=function(t,e){},n.prototype.remove=function(t){t===void 0&&(t={});var e=this.viewCollection;return this.onRemoveBefore(e,t),this.clearItems(),ye.Ss.prototype.remove.apply(this,t),this.onRemove(e,t),this},n.prototype.clearItems=function(){this.viewCollection},n}(ls);const n8=e8;var Vh;(function(i){i.mount="css:mount",i.mountBefore="css:mount:before"})(Vh||(Vh={}));var r8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),i8=function(i){r8(n,i);function n(t){t===void 0&&(t={});var e=i.call(this,t)||this;e.config=t.config||{};var r=e.model;return e.listenTo(r,"change",e.render),e.listenTo(r,"destroy remove",e.remove),e.listenTo(r.get("selectors"),"change",e.render),r.setView(e),e}return Object.defineProperty(n.prototype,"frameView",{get:function(){return this.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"em",{get:function(){return this.model.em},enumerable:!1,configurable:!0}),n.prototype.remove=function(){return i.prototype.remove.call(this),this.model.removeView(this),this},n.prototype.updateStyles=function(){this.render()},n.prototype.tagName=function(){return"style"},n.prototype.render=function(){var t=this,e=t.model,r=t.el,o=t.em,a=e.get("important"),s=e.toCSS({important:a}),u={rule:e,ruleView:this,css:s};return o==null||o.trigger(Vh.mountBefore,u),r.innerHTML=u.css,o==null||o.trigger(Vh.mount,u),this},n}(ye.Ss);const I1=i8;var o8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),a8=function(i){o8(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype._createElement=function(){return document.createTextNode("")},n.prototype.render=function(){var t=this.model,e=t.get("important");return this.el.textContent=t.getDeclaration({important:e}),this},n}(I1);const s8=a8;var l8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ox=function(i,n){return"".concat(i).concat(n?"-".concat(parseFloat(n)):"")},u8=function(i){l8(n,i);function n(t){var e=i.call(this,t)||this;(0,J.bindAll)(e,"sortRules");var r=t.config||{};e.atRules={},e.config=r,e.em=r.em,e.pfx=r.stylePrefix||"",e.className=e.pfx+"rules";var o=e.collection;return e.listenTo(o,"add",e.addTo),e.listenTo(o,"reset",e.render),e}return n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){if(this.renderStarted){var r=e||null,o=this.config,a={model:t,config:o},s,u;if(t.get("atRuleType")==="keyframes"){var c=t.getAtRule(),h=this.atRules[c];if(!h){var v=document.createElement("style");h=document.createTextNode(""),v.appendChild(document.createTextNode("".concat(c,"{"))),v.appendChild(h),v.appendChild(document.createTextNode("}")),this.atRules[c]=h,s=v}u=new s8(a),h.appendData(u.render().el.textContent)}else u=new I1(a),s=u.render().el;var m=this.className,y=t.get("mediaText"),_=Ox(m),C=_;if(y&&(C=Ox(m,this.getMediaWidth(y))),s){var E=r||this.el,D=void 0;try{D=E.querySelector("#".concat(C))}catch{}D||(D=E.querySelector("#".concat(_))),D==null||D.appendChild(s)}return s}},n.prototype.getMediaWidth=function(t){return t&&t.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},n.prototype.sortRules=function(t,e){var r=this.em,o=(r.getConfig().mediaCondition||"").indexOf("min-width")!==-1;if(!o)return 0;var a=o?t:e,s=o?e:t;return a-s},n.prototype.render=function(){var t=this;this.renderStarted=!0,this.atRules={};var e=this,r=e.em,o=e.$el,a=e.collection,s=this.className,u=document.createDocumentFragment();o.empty();var c=r.Devices.getAll().pluck("priority").sort(this.sortRules);return c.every(function(h){return h})&&c.unshift(0),c.forEach(function(h){return u.appendChild((0,Ce.a_)("div",{id:Ox(s,h)}))}),a.each(function(h){return t.addToCollection(h,u)}),o.append(u),o.attr("class",s),this},n}(ye.Ss);const n_=u8;var Zr;(function(i){i.variable="data-variable",i.condition="data-condition",i.conditionTrue="data-condition-true-content",i.conditionFalse="data-condition-false-content",i.collection="data-collection",i.collectionItem="data-collection-item"})(Zr||(Zr={}));var pg;(function(i){i.rootData="__rootData"})(pg||(pg={}));var r_;(function(i){i.string="string",i.number="number",i.boolean="boolean",i.date="date",i.json="json",i.relation="relation"})(r_||(r_={}));var nu;(function(i){i.add="data:add",i.addBefore="data:add:before",i.remove="data:remove",i.removeBefore="data:remove:before",i.update="data:update",i.path="data:path",i.pathSource="data:pathSource:",i.providerLoad="data:provider:load",i.providerLoadBefore="data:provider:load:before",i.providerLoadError="data:provider:load:error",i.providerLoadAll="data:provider:loadAll",i.providerLoadAllBefore="data:provider:loadAll:before",i.all="data"})(nu||(nu={}));var c8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),d0=function(){return d0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},d0.apply(this,arguments)},ks=Zr.variable,f8=function(i){c8(n,i);function n(t,e){var r=i.call(this,t,e)||this;return r.em=e.em,r.collectionsStateMap=e.collectionsStateMap,r}return n.prototype.defaults=function(){return{type:ks,defaultValue:"",path:"",collectionId:void 0,variableType:void 0,asPlainText:void 0}},Object.defineProperty(n.prototype,"path",{get:function(){var t;return(t=this.get("path"))!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"defaultValue",{get:function(){var t;return(t=this.get("defaultValue"))!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"collectionId",{get:function(){return this.get("collectionId")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"variableType",{get:function(){return this.get("variableType")},enumerable:!1,configurable:!0}),n.prototype.resolvesFromCollection=function(){return!!this.collectionId},n.prototype.updateCollectionsStateMap=function(t){this.collectionsStateMap=t,this.trigger("change")},n.prototype.getResolverPath=function(){var t;if(this.resolvesFromCollection()){var e=this.resolveCollectionVariable();return Hh(e)?(t=e.path)!==null&&t!==void 0?t:"":!1}return this.path},n.prototype.toJSON=function(t){var e=this.defaults(),r=i.prototype.toJSON.call(this,t),o=Object.fromEntries(Object.entries(r).filter(function(a){var s=a[0],u=a[1];return u!==e[s]}));return d0(d0({},o),{type:ks})},n.prototype.getDataValue=function(){var t={em:this.em,collectionsStateMap:this.collectionsStateMap};return n.resolveDataResolver({path:this.path,defaultValue:this.defaultValue,collectionId:this.collectionId,variableType:this.variableType},t)},n.resolveDataSourceVariable=function(t,e){var r,o;return e.em.DataSources.getValue((r=t.path)!==null&&r!==void 0?r:"",(o=t.defaultValue)!==null&&o!==void 0?o:"")},n.resolveDataResolver=function(t,e){var r,o,a,s;if(t.collectionId){var u=n.resolveCollectionVariable(t,e);return Hh(u)?n.resolveDataSourceVariable({path:(r=u.path)!==null&&r!==void 0?r:"",defaultValue:(o=t.defaultValue)!==null&&o!==void 0?o:""},{em:e.em}):u}return n.resolveDataSourceVariable({path:(a=t.path)!==null&&a!==void 0?a:"",defaultValue:(s=t.defaultValue)!==null&&s!==void 0?s:""},{em:e.em})},n.prototype.resolveCollectionVariable=function(){var t=this,e=t.em,r=t.collectionsStateMap;return n.resolveCollectionVariable(this.attributes,{em:e,collectionsStateMap:r})},n.resolveCollectionVariable=function(t,e){var r,o,a=t.collectionId,s=a===void 0?"":a,u=t.variableType,c=t.path,h=t.defaultValue,v=h===void 0?"":h,m=e.em,y=e.collectionsStateMap;if(!y)return v;var _=y[s];if(!_)return v;if(!u)return m.logError("Missing collection variable type for collection: ".concat(s)),v;if(u==="currentItem")return(r=n.resolveCurrentItem(_,c,s,m))!==null&&r!==void 0?r:v;var C=_;return(o=C[u])!==null&&o!==void 0?o:v},n.resolveCurrentItem=function(t,e,r,o){var a=t.currentItem;if(!a){o.logError("Current item is missing for collection: ".concat(r));return}if(a.type===ks){var s=a.path?"".concat(a.path,".").concat(e):e;return{type:ks,path:s}}if(!(e&&!a[e]))return e?a[e]:a},n}(ye.Kx);const Jh=f8;var d8=function(){function i(n){var t=this;this.listeners=[],this.model=new ye.Kx,this.onChange=function(){var e=t.resolver.getDataValue();t.onUpdate(e)},this.em=n.em,this.resolver=n.resolver,this.onUpdate=n.onUpdate,this.listenToResolver()}return i.prototype.createListener=function(n,t,e){return e===void 0&&(e=this.onChange),{obj:n,event:t,callback:e}},i.prototype.listenToResolver=function(){var n=this,t=n.resolver,e=n.model;this.removeListeners();var r=[],o=t.attributes.type;switch(o){case ks:r=this.listenToDataVariable(t);break;case Fh:r=this.listenToConditionalVariable(t);break}r.forEach(function(a){return e.listenTo(a.obj,a.event,a.callback)}),this.listeners=r},i.prototype.listenToConditionalVariable=function(n){return[{obj:n,event:py,callback:this.onChange}]},i.prototype.listenToDataVariable=function(n){var t=this,e=this.em,r=[],o=function(){t.listenToResolver(),t.onChange()};r.push(this.createListener(n,"change",o));var a=n.getResolverPath();if(!a)return r;var s=(0,Zt.stringToPath)(a||"").join("."),u=e.DataSources.fromPath(a),c=u[0],h=u[1];return c&&r.push(this.createListener(c.records,"add remove reset",o)),h&&r.push(this.createListener(h,"change")),r.push(this.createListener(e.DataSources.all,"add remove reset",o),this.createListener(e,"".concat(nu.path,":").concat(s)),this.createListener(e,nu.path,function(v){var m=v.path;m!==a&&m.startsWith(a)&&t.onChange()})),r},i.prototype.removeListeners=function(){var n=this;this.listeners.forEach(function(t){return n.model.stopListening(t.obj,t.event,t.callback)}),this.listeners=[]},i.prototype.destroy=function(){this.removeListeners()},i}();const Ag=d8;var qO=function(){function i(n,t,e){this.operator=n,this.statements=t,this.opts=e}return i.prototype.evaluate=function(){var n=this,t=this.statements.map(function(e){var r=new kD({condition:e},n.opts);return r.evaluate()});return this.operator.evaluate(t)},i}(),Ub=function(){function i(n,t){this.operationString=n,this.em=t.em}return i.prototype.getOperations=function(){return P8(this.operationsEnum)},i}(),h8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vg;(function(i){i.equals="equals",i.isTruthy="isTruthy",i.isFalsy="isFalsy",i.isDefined="isDefined",i.isNull="isNull",i.isUndefined="isUndefined",i.isArray="isArray",i.isObject="isObject",i.isString="isString",i.isNumber="isNumber",i.isBoolean="isBoolean",i.isDefaultValue="isDefaultValue"})(vg||(vg={}));var p8=function(i){h8(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.operationsEnum=vg,t}return n.prototype.evaluate=function(t,e){var r;switch(this.operationString){case"equals":return t===e;case"isTruthy":return!!t;case"isFalsy":return!t;case"isDefined":return t!=null;case"isNull":return t===null;case"isUndefined":return t===void 0;case"isArray":return Array.isArray(t);case"isObject":return typeof t=="object"&&t!==null;case"isString":return typeof t=="string";case"isNumber":return typeof t=="number";case"isBoolean":return typeof t=="boolean";case"isDefaultValue":return t instanceof Jh&&t.get("defaultValue")===e;default:return(r=this.em)===null||r===void 0||r.logWarning("Unsupported generic operation: ".concat(this.operationString)),!1}},n}(Ub),v8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ef;(function(i){i.and="and",i.or="or",i.xor="xor"})(Ef||(Ef={}));var g8=function(i){v8(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.operationsEnum=Ef,t}return n.prototype.evaluate=function(t){if(!(t!=null&&t.length))return!1;switch(this.operationString){case Ef.and:return t.every(Boolean);case Ef.or:return t.some(Boolean);case Ef.xor:return t.filter(Boolean).length===1;default:return this.em.logWarning("Unsupported boolean operation: ".concat(this.operationString)),!1}},n}(Ub),m8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gl;(function(i){i.greaterThan=">",i.lessThan="<",i.greaterThanOrEqual=">=",i.lessThanOrEqual="<=",i.equals="=",i.notEquals="!="})(gl||(gl={}));var y8=function(i){m8(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.operationsEnum=gl,t}return n.prototype.evaluate=function(t,e){if(typeof t!="number")return!1;switch(this.operationString){case gl.greaterThan:return t>e;case gl.lessThan:return t<e;case gl.greaterThanOrEqual:return t>=e;case gl.lessThanOrEqual:return t<=e;case gl.equals:return t===e;case gl.notEquals:return t!==e;default:return this.em.logWarning("Unsupported number operation: ".concat(this.operationString)),!1}},n}(Ub),b8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qa;(function(i){i.contains="contains",i.startsWith="startsWith",i.endsWith="endsWith",i.matchesRegex="matchesRegex",i.equalsIgnoreCase="equalsIgnoreCase",i.trimEquals="trimEquals"})(Qa||(Qa={}));var w8=function(i){b8(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.operationsEnum=Qa,t}return n.prototype.evaluate=function(t,e){if(typeof t!="string")return!1;switch(this.operationString){case Qa.contains:return t.includes(e);case Qa.startsWith:return t.startsWith(e);case Qa.endsWith:return t.endsWith(e);case Qa.matchesRegex:return e||this.em.logWarning("Regex pattern must be provided."),new RegExp(e??"").test(t);case Qa.equalsIgnoreCase:return t.toLowerCase()===e.toLowerCase();case Qa.trimEquals:return t.trim()===e.trim();default:return this.em.logWarning("Unsupported string operation: ".concat(this.operationString)),!1}},n}(Ub),x8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kD=function(i){x8(n,i);function n(t,e){var r,o=i.call(this,t)||this;return o.collectionsStateMap={},o.em=e.em,o.collectionsStateMap=(r=e.collectionsStateMap)!==null&&r!==void 0?r:{},o}return n.prototype.evaluate=function(){var t=this.get("condition");if(!t||(0,J.isBoolean)(t))return!!t;var e=this.getOperator();return e?e.evaluate(this.getResolvedLeftValue(),this.getResolvedRightValue()):!1},n.prototype.getDependentDataVariables=function(){var t=this.get("condition");return t?this.extractDataVariables(t):[]},n.prototype.getOperations=function(){var t=this.getOperator();return!t||t instanceof qO?[]:t.getOperations()},n.prototype.updateCollectionStateMap=function(t){this.collectionsStateMap=t},n.prototype.getOperator=function(){var t={em:this.em,collectionsStateMap:this.collectionsStateMap},e=this.get("condition");if(!(!e||(0,J.isBoolean)(e))){var r;if(this.isLogicGroup(e)){var o=e.logicalOperator,a=e.statements,s=new g8(o,t);r=new qO(s,a,t)}if(this.isExpression(e)){var u=e.left,s=e.operator,c=p0(u,t);r=this.resolveOperator(c,s)}return r}},n.prototype.resolveOperator=function(t,e){var r=this.em;if(this.isOperatorInEnum(e,vg))return new p8(e,{em:r});if(typeof t=="number")return new y8(e,{em:r});if(typeof t=="string")return new w8(e,{em:r})},n.prototype.extractDataVariables=function(t){var e=this,r=[];return this.isExpression(t)?(Hh(t.left)&&r.push(t.left),Hh(t.right)&&r.push(t.right)):this.isLogicGroup(t)&&t.statements.forEach(function(o){return r.push.apply(r,e.extractDataVariables(o))}),r},n.prototype.isLogicGroup=function(t){return t&&typeof t.logicalOperator<"u"&&Array.isArray(t.statements)},n.prototype.isExpression=function(t){return t&&typeof t.left<"u"&&typeof t.operator=="string"},n.prototype.isOperatorInEnum=function(t,e){return Object.values(e).includes(t)},n.prototype.resolveExpressionSide=function(t){var e=this.get("condition"),r=this,o=r.em,a=r.collectionsStateMap;if(!e||typeof e=="boolean")return e;if(e&&typeof e=="object"&&t in e){var s=e[t];return p0(s,{em:o,collectionsStateMap:a})}},n.prototype.getResolvedLeftValue=function(){return this.resolveExpressionSide("left")},n.prototype.getResolvedRightValue=function(){return this.resolveExpressionSide("right")},n.prototype.toJSON=function(t){var e=this.get("condition");if(typeof e=="object"){var r=JSON.parse(JSON.stringify(e));return r}return e},n}(ye.Kx),S8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fh="data-condition",_8="data-condition-evaluation-changed",py="data-condition-output-changed",MD=function(i){S8(n,i);function n(t,e){var r,o=i.call(this,t,e)||this;o.collectionsStateMap={},o.resolverListeners=[],o._previousEvaluationResult=null,o.em=e.em,o.collectionsStateMap=(r=e.collectionsStateMap)!==null&&r!==void 0?r:{};var a=t.condition,s=a===void 0?{}:a,u=new kD({condition:s},{em:o.em});return o._conditionEvaluator=u,o.listenToDataVariables(),o.listenToPropsChange(),o}return n.prototype.defaults=function(){return{type:Fh,condition:{left:"",operator:Qa.equalsIgnoreCase,right:""},ifTrue:{},ifFalse:{}}},n.prototype.getCondition=function(){return this._conditionEvaluator.get("condition")},n.prototype.getIfTrue=function(){return this.get("ifTrue")},n.prototype.getIfFalse=function(){return this.get("ifFalse")},n.prototype.getOperations=function(){return this._conditionEvaluator.getOperations()},n.prototype.setCondition=function(t){this.set("condition",t),this._conditionEvaluator.set("condition",t),this.trigger(py,this.getDataValue())},n.prototype.setIfTrue=function(t){this.set("ifTrue",t)},n.prototype.setIfFalse=function(t){this.set("ifFalse",t)},n.prototype.isTrue=function(){return this._conditionEvaluator.evaluate()},n.prototype.getDataValue=function(t){t===void 0&&(t=!1);var e=this,r=e.em,o=e.collectionsStateMap,a={em:r,collectionsStateMap:o},s=this.getIfTrue(),u=this.getIfFalse(),c=this.isTrue();return t?c?s:u:p0(c?s:u,a)},n.prototype.resolvesFromCollection=function(){return!1},n.prototype.updateCollectionsStateMap=function(t){this.collectionsStateMap=t,this._conditionEvaluator.updateCollectionStateMap(t),this.listenToDataVariables(),this.emitConditionEvaluationChange()},n.prototype.listenToPropsChange=function(){var t=this;this.on("change:condition",this.handleConditionChange.bind(this)),this.on("change:condition change:ifTrue change:ifFalse",function(){t.listenToDataVariables()})},n.prototype.handleConditionChange=function(){this.setCondition(this.get("condition"))},n.prototype.listenToDataVariables=function(){this.cleanupListeners(),this.setupConditionDataVariableListeners(),this.setupOutputDataVariableListeners()},n.prototype.setupConditionDataVariableListeners=function(){var t=this;this._conditionEvaluator.getDependentDataVariables().forEach(function(e){t.addListener(e,function(){t.emitConditionEvaluationChange()})})},n.prototype.setupOutputDataVariableListeners=function(){var t=this.isTrue();this.setupOutputVariableListener(this.getIfTrue(),t),this.setupOutputVariableListener(this.getIfFalse(),!t)},n.prototype.setupOutputVariableListener=function(t,e){var r=this;Hh(t)&&this.addListener(t,function(){e&&r.trigger(py,t)})},n.prototype.addListener=function(t,e){var r=new Ag({em:this.em,resolver:new Jh(t,{em:this.em,collectionsStateMap:this.collectionsStateMap}),onUpdate:e});this.resolverListeners.push(r)},n.prototype.emitConditionEvaluationChange=function(){var t=this.isTrue();this._previousEvaluationResult!==t&&(this._previousEvaluationResult=t,this.trigger(_8,t),this.emitOutputValueChange())},n.prototype.emitOutputValueChange=function(){var t=this.getDataValue();this.trigger(py,t)},n.prototype.cleanupListeners=function(){this.resolverListeners.forEach(function(t){return t.destroy()}),this.resolverListeners=[]},n.prototype.toJSON=function(){var t=this.getIfTrue(),e=this.getIfFalse();return{type:Fh,condition:this._conditionEvaluator.toJSON(),ifTrue:t,ifFalse:e}},n}(ye.Kx),Ov="dataResolver",ia=function(){return ia=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},ia.apply(this,arguments)},DD=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},Of=function(i){return(0,J.isArray)(i.get(ko))},h0=function(i){return!!i.get(oa)},Ds=function(i){return!!(Of(i)||h0(i))},Vf=function(i){var n=i.parent();return Ds(i)&&(!n||!Ds(n))},yv=function(i){i.__symbReady||(i.on("change",i.__upSymbProps),i.__symbReady=!0)},ss=function(i){var n=i.get(oa);if(n&&(0,J.isString)(n)){var t=i.__getAllById()[n];t?(n=t,i.set(oa,t)):n=0}return n||void 0},ua=function(i){var n=i==null?void 0:i.get(ko);return n&&(0,J.isArray)(n)&&(n.forEach(function(t,e){t&&(0,J.isString)(t)&&(n[e]=i.__getAllById()[t])}),n=n.filter(function(t){return t&&!(0,J.isString)(t)})),n||void 0},gg=function(i,n){n===void 0&&(n="");var t=i==null?void 0:i.get(Af),e=n.split(":")[0],r=n!==e?[n,e]:[n];return t===!0||(0,J.isArray)(t)&&r.some(function(o){return t.indexOf(o)>=0})},Zl=function(i,n){n===void 0&&(n={});var t=[],e=n.changed;if(n.fromInstance||n.noPropagate||n.fromUndo||e&&gg(i,e))return t;var r=ua(i)||[],o=ss(i),a=o?DD([o],ua(o)||[],!0):r;return t=a.filter(function(s){return s!==i}).filter(function(s){return!(e&&gg(s,e))}),t},mg=function(i,n){for(var t=i,e=i.parent(n);e&&Ds(e);)t=e,e=e.parent(n);return t},Vb=function(i,n){n===void 0&&(n={});var t=ss(i),e=t&&ua(t);!n.skipRefs&&e&&t.set(ko,e.filter(function(r){return r!==i})),i.set(oa,0),i.components().forEach(function(r){return Vb(r,n)})},Wv=function(i,n,t,e){e===void 0&&(e={});var r=ss(i),o=ua(i);!r&&!o||i.em.log(n,{model:i,toUp:t,context:"symbols",opts:e})},C8=function(i,n){n===void 0&&(n={});var t=i.changedAttributes();if(t){var e=i.dataResolverWatchers.getProps(t);if(T8(e),!(0,Zt.isEmptyObj)(e)){var r=Zl(i,n);e=KO(e,i),Wv(i,"props",r,{opts:n,changed:e}),r.forEach(function(o){var a=KO(e,o);o.set(a,ia({fromInstance:i},n))})}}},T8=function(i){var n,t,e=["status","open",ko,oa,Af];e.forEach(function(r){return delete i[r]}),(n=i.attributes)===null||n===void 0||delete n.id,(0,Zt.isEmptyObj)((t=i.attributes)!==null&&t!==void 0?t:{})&&delete i.attributes},KO=function(i,n){var t=ia({},i);return(0,J.keys)(i).forEach(function(e){A8(i,e,n)||delete t[e]}),t},E8=function(i){return i?Object.values(i).some(function(n){return!!(n!=null&&n.collectionId)}):!1},O8=function(i,n){var t;switch(n){case"attributes":case"style":return E8(i[n]);default:return!!(!((t=i[n])===null||t===void 0)&&t.collectionId)}},A8=function(i,n,t){var e=O8(i,n);return!gg(t,n)||e},k8=function(i,n){n===void 0&&(n={});var t=Zl(i,n);Wv(i,"classes",t,{opts:n}),t.forEach(function(e){e.set("classes",i.get("classes"),{fromInstance:i})}),i.__changesUp(n)},PD=function(i,n,t,e){var r=e||t||{},o=r.fromInstance,a=r.fromUndo,s={fromInstance:o,fromUndo:a},u=n.opt.temporary;if(e)if(e.add){var y=[],_=!!ua(i),h=Zl(i,ia(ia({},s),{changed:"components:add"}));if(h.length){var C=ss(n);y=ua(C||n)||[],y=DD([],y,!0),y.push(C||n)}!u&&Wv(i,"add",h,{opts:e,addedInstances:y.map(function(st){return st.cid}),added:n.cid}),h.forEach(function(st){var et=mg(st),nt=y.filter(function($){var ft=mg($,{prev:1});return et&&ft&&ft===et})[0],it=nt||n.clone({symbol:!0,symbolInv:_});st.append(it,ia({fromInstance:i},e))})}else{var E=ss(n);if(E&&!e.temporary&&E.set(ko,ua(E).filter(function(ht){return ht!==n})),!Vf(n)&&!e.skipRefsUp){var D="components:remove",F=e.index,V=n.parent(),K=ia({fromInstance:n},e),Z=Vf(n),ct=function(st){var et=st.parent();et&&!gg(et,D)&&st.remove(K)},h=gg(V,D)?[]:Zl(n,s);Z&&(h=V&&Zl(V,ia(ia({},s),{changed:D})),ct=function(st){var et=st.components().at(F);et&&et.remove(ia({fromInstance:V},K))}),!u&&Wv(i,"remove",h,{opts:e,removed:n.cid,isSymbNested:Z}),h.forEach(ct)}}else{var c=n,h=Zl(i,ia(ia({},s),{changed:"components:reset"})),v=c.models,m=new Set;Wv(i,"reset",h,{components:v}),h.forEach(function(ht){var st=ht.components(),et=v.map(function(nt,it){return i.get(Ov)?nt.clone({symbol:Ds(nt)}):!Ds(nt)||m.has(nt)?(m.add(nt),nt.clone({symbol:!0})):st.at(it)});st.reset(et,ia({fromInstance:i},t))})}i.__changesUp(r)},M8="id";function i_(i){return typeof i=="object"&&[ks,Fh].includes(i==null?void 0:i.type)}function Hh(i){return(i==null?void 0:i.type)===ks}function p0(i,n){return i_(i)?(Hh(i)&&Jh.resolveDataResolver(i,n),RD(i,n)):i}function ND(i,n){var t,e=i.type,r;switch(e){case ks:r=new Jh(i,n);break;case Fh:{r=new MD(i,n);break}default:(t=n.em)===null||t===void 0||t.logWarning("Unsupported resolver type: ".concat(e));return}return r}function RD(i,n){var t=ND(i,n);return t==null?void 0:t.getDataValue()}var D8=function(i){return!!i&&[Zr.collectionItem,Zr.conditionTrue,Zr.conditionFalse].includes(i)};function P8(i){return Object.keys(i).filter(function(n){return isNaN(Number(n))}).map(function(n){return i[n]})}function N8(i){var n=i.collectionsStateMap;if(!n)return!1;var t=Object.keys(n);if(!t.length)return!1;var e=ss(i);if(!e||e===i)return!1;var r=e.collectionsStateMap,o=Object.keys(r),a=o.every(function(s){return t.includes(s)});return a}function R8(i){var n=ss(i);return n?n.getId():""}function L8(i){var n=N8(i),t=n?R8(i):null;return{shouldSync:n,itemId:t}}var LD="text/html",j8=LD;const I8=function(i,n){n===void 0&&(n={});var t=new DOMParser,e=n.htmlType||j8,r=e===LD,o=r?i:"<div>".concat(i,"</div>"),a=t.parseFromString(o,e),s;if(r){if(n.asDocument)return a;var u=a.head,c=a.body,h=u.querySelectorAll("script");(0,J.each)(h,function(m){return c.appendChild(m)});var v=[];(0,J.each)(u.children,function(m){return v.push(m)}),(0,J.each)(v,function(m,y){return c.insertBefore(m,c.children[y])}),s=c}else s=a.firstChild;return s};var vc;(function(i){i.html="parse:html",i.htmlRoot="parse:html:root",i.htmlBefore="parse:html:before",i.css="parse:css",i.cssBefore="parse:css:before",i.all="parse"})(vc||(vc={}));var Ts=function(){return Ts=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Ts.apply(this,arguments)},B8="data-gjs-",U8=function(i,n){return n===void 0&&(n={}),{compTypes:[],modelAttrStart:B8,getPropAttribute:function(t,e){var r=t.replace(this.modelAttrStart,""),o=(e==null?void 0:e.length)||0,a=e==null?void 0:e.substring(0,1),s=e==null?void 0:e.substring(o-1),u=e==="true"?!0:e==="false"?!1:e;try{u=a=="{"&&s=="}"||a=="["&&s=="]"?JSON.parse(u):u}catch{}return{name:r,value:u}},splitPropsFromAttr:function(t){var e=this;t===void 0&&(t={});var r={},o={};return(0,J.each)(t,function(a,s){if(s.indexOf(e.modelAttrStart)===0){var u=e.getPropAttribute(s,a);r[u.name]=u.value}else o[s]=a}),{props:r,attrs:o}},parseStyle:function(t){for(var e={};t.indexOf("/*")>=0;){var r=t.indexOf("/*"),o=t.indexOf("*/"),a=o>-1?o+2:void 0;t=t.replace(t.slice(r,a),"")}for(var s=t.split(";"),u=0,c=s.length;u<c;u++){var h=s[u].trim();if(h){var v=h.split(":"),m=v[0].trim(),y=v.slice(1).join(":").trim();e[m]?((0,J.isArray)(e[m])||(e[m]=[e[m]]),e[m].push(y)):e[m]=y}}return e},parseClass:function(t){for(var e=[],r=t.split(" "),o=0,a=r.length;o<a;o++){var s=r[o].trim();s&&e.push(s)}return e},parseNodeAttr:function(t,e){for(var r,o,a=e||{},s=t.attributes||[],u=s.length,c=!!(!((r=n==null?void 0:n.optionsHtml)===null||r===void 0)&&r.convertDataGjsAttributesHyphens),h=c&&!!a.type&&(0,J.result)((o=i==null?void 0:i.Components.getType(a.type))===null||o===void 0?void 0:o.model.prototype,"defaults")||{},v=0;v<u;v++){var m=s[v].nodeName,y=s[v].nodeValue;if(m=="style")a.style=this.parseStyle(y);else if(m=="class")a.classes=this.parseClass(y);else{if(m=="contenteditable")continue;if(m.indexOf(this.modelAttrStart)===0){var _=this.getPropAttribute(m,y),C=_.name;if(c&&!(C in h)){var E=(0,Ce._I)(C);C=E in h?E:C}a[C]=_.value}else y===""&&t[m]===!0&&(y=!0),a.attributes||(a.attributes={}),a.attributes[m]=y}}return a},detectNode:function(t,e){var r;e===void 0&&(e={});var o=this.compTypes,a={};if(o){var s=(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"".concat(this.modelAttrStart,"type"));if(s)a={type:s};else for(var u=0;u<o.length;u++){var c=o[u],h=c.model.isComponent(t,e);if(h){typeof h!="object"&&(h={type:c.id}),a=h;break}}}return a},parseNode:function(t,e){var r;e===void 0&&(e={});var o=((r=t.content)===null||r===void 0?void 0:r.childNodes)||t.childNodes,a=o.length,s=this.detectNode(t,e);if(!s.tagName){var u=t.tagName||"",c=t.namespaceURI||"";s.tagName=u&&c==="http://www.w3.org/1999/xhtml"?u.toLowerCase():u}if(s=this.parseNodeAttr(t,s),!a&&"".concat(t.outerHTML).slice(-2)==="/>"&&(s.void=!0),a&&!s.components&&!e.skipChildren){var h=o[0];a===1&&h.nodeType===3?(!s.type&&(s.type="text"),s.components={type:"textnode",content:h.nodeValue}):s.components=this.parseNodes(t,Ts(Ts({},e),{inSvg:e.inSvg||s.type==="svg"}))}var v=s.components;if(!s.type&&(v!=null&&v.length)){for(var m=n.textTypes,y=m===void 0?[]:m,_=n.textTags,C=_===void 0?[]:_,E=!0,D=!1,F=0;F<v.length;F++){var V=v[F],K=V.type;if(!y.includes(K)&&!C.includes(V.tagName)){E=!1;break}K==="textnode"&&(D=!0)}E&&D&&(s.type="text")}return s},parseNodes:function(t,e){var r;e===void 0&&(e={});for(var o=[],a=((r=t.content)===null||r===void 0?void 0:r.childNodes)||t.childNodes,s=a.length,u=0;u<s;u++){var c=a[u],h=o[o.length-1],v=this.parseNode(c,e);if(v.type==="textnode"){if((h==null?void 0:h.type)==="textnode"){h.content+=v.content;continue}if(!e.keepEmptyTextNodes){var m=c.nodeValue||"",y=u===0||u===s-1,_=m.includes(`
`);if(m!=" "&&!m.trim()&&(y||_))continue}}!v.tagName&&(0,J.isUndefined)(v.content)||o.push(v)}return o},parse:function(t,e,r){var o,a,s;r===void 0&&(r={});var u=(i==null?void 0:i.get("Config"))||{},c=i==null?void 0:i.Parser,h={html:[]},v=Ts(Ts(Ts({},n.optionsHtml),{htmlType:((o=n.optionsHtml)===null||o===void 0?void 0:o.htmlType)||n.htmlType}),r),m=Ts(Ts({},v),{asDocument:this.__checkAsDocument(t,v)}),y=Ts(Ts({},n),m),_=m.preParser,C=m.asDocument,E={input:(0,J.isFunction)(_)?_(t,{editor:i==null?void 0:i.getEditor()}):t};c==null||c.__emitEvent(vc.htmlBefore,E);var D=E.input,F=(0,J.isFunction)(y.parserHtml)?y.parserHtml(D,m):I8(D,m),V=F,K=F;C&&(V=K.documentElement,h.doctype=(0,Ce.LJ)(K.doctype));var Z=V.querySelectorAll("script"),ct=Z.length,ht=(0,J.isUndefined)(u.allowScripts)?m.allowScripts:u.allowScripts;if(!ht)for(;ct--;)(a=Z[ct].parentNode)===null||a===void 0||a.removeChild(Z[ct]);if((!m.allowUnsafeAttr||!m.allowUnsafeAttrValue)&&this.__sanitizeNode(V,m),e){for(var st=V.querySelectorAll("style"),et=st.length,nt="";et--;)nt=st[et].innerHTML+nt,(s=st[et].parentNode)===null||s===void 0||s.removeChild(st[et]);nt&&(h.css=e.parse(nt))}c==null||c.__emitEvent(vc.htmlRoot,{input:D,root:V});var it=[];if(C)h.head=this.parseNode(K.head,y),h.root=this.parseNodeAttr(V),it=this.parseNode(K.body,y);else{var $=this.parseNodes(V,y);it=$.length===1&&!y.returnArray?$[0]:$}return h.html=it,c==null||c.__emitEvent(vc.html,{input:D,output:h,options:m}),h},__sanitizeNode:function(t,e){var r=this,o=t.attributes||[],a=t.childNodes||[],s=[];(0,J.each)(o,function(u){var c=u.nodeName||"",h=u.nodeValue||"";!e.allowUnsafeAttr&&c.startsWith("on")&&s.push(c),!e.allowUnsafeAttrValue&&h.startsWith("javascript:")&&s.push(c)}),s.map(function(u){return t.removeAttribute(u)}),(0,J.each)(a,function(u){return r.__sanitizeNode(u,e)})},__checkAsDocument:function(t,e){if((0,Zt.isDef)(e.asDocument))return e.asDocument;if((0,J.isFunction)(e.detectDocument))return!!e.detectDocument(t);if(e.detectDocument)return t.toLowerCase().trim().startsWith("<!doctype")}}};const jD=U8;var v0=function(){return v0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},v0.apply(this,arguments)},Ax=function(){function i(n,t,e){this.model=n,this.updateFn=t,this.resolverListeners={},this.em=e.em}return i.prototype.bindModel=function(n){this.model=n},i.prototype.setDataValues=function(n,t){t===void 0&&(t={});var e=t.skipWatcherUpdates||t.fromDataSource;return e||this.removeListeners(),this.addDataValues(n,t)},i.prototype.addDataValues=function(n,t){if(t===void 0&&(t={}),!n)return{};var e=this.evaluateValues(n),r=t.skipWatcherUpdates||t.fromDataSource;return r||this.updateListeners(n),e},i.prototype.onCollectionsStateMapUpdate=function(){var n=this,t=this.getValuesResolvingFromCollections();if(t.length){var e=this.addDataValues(this.getValuesOrResolver(Object.fromEntries(t.map(function(r){return[r,""]}))));Object.entries(e).forEach(function(r){var o=r[0],a=r[1];return n.updateFn(n.model,o,a)})}},Object.defineProperty(i.prototype,"collectionsStateMap",{get:function(){var n,t=this.model;return(n=t==null?void 0:t.collectionsStateMap)!==null&&n!==void 0?n:{}},enumerable:!1,configurable:!0}),i.prototype.updateListeners=function(n){var t=this,e=this,r=e.em,o=e.collectionsStateMap;this.removeListeners(Object.keys(n));for(var a=Object.keys(n),s=function(h){var v=a[h],m=n[v];if(!i_(m))return"continue";var y=ND(m,{em:r,collectionsStateMap:o});u.resolverListeners[v]=new Ag({em:r,resolver:y,onUpdate:function(_){return t.updateFn(t.model,v,_)}})},u=this,c=0;c<a.length;c++)s(c)},i.prototype.evaluateValues=function(n){for(var t=this,e=t.em,r=t.collectionsStateMap,o=v0({},n),a=Object.keys(n),s=0;s<a.length;s++){var u=a[s],c=n[u];i_(c)&&(o[u]=RD(c,{em:e,collectionsStateMap:r}))}return o},i.prototype.removeListeners=function(n){var t=this,e=n||Object.keys(this.resolverListeners);return e.forEach(function(r){var o,a;t.resolverListeners[r]&&((a=(o=t.resolverListeners[r]).destroy)===null||a===void 0||a.call(o),delete t.resolverListeners[r])}),e},i.prototype.getValuesOrResolver=function(n){if(!n)return{};for(var t=v0({},n),e=Object.keys(t),r=0;r<e.length;r++){var o=e[r],a=this.resolverListeners[o];a&&(t[o]=a.resolver.toJSON())}return t},i.prototype.getAllDataResolvers=function(){for(var n={},t=Object.keys(this.resolverListeners),e=0;e<t.length;e++){var r=t[e];n[r]=this.resolverListeners[r].resolver.toJSON()}return n},i.prototype.getValuesResolvingFromCollections=function(){var n=this,t=Object.keys(this.resolverListeners).filter(function(e){return n.resolverListeners[e].resolver.resolvesFromCollection()});return t},i.prototype.destroy=function(){this.removeListeners()},i}(),Oa=function(){return Oa=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Oa.apply(this,arguments)},V8=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},vy={fromDataSource:!0,avoidStore:!0},lh="__data_values",F8=function(){function i(n,t){var e=this;this.model=n,this.options=t,this.onPropertyUpdate=function(r,o,a){r==null||r.set(o,a,vy)},this.onAttributeUpdate=function(r,o,a){var s;e.isComponent(r)&&(r==null||r.addAttributes((s={},s[o]=a,s),vy))},this.onStyleUpdate=function(r,o,a){var s;r==null||r.addStyle((s={},s[o]=a,s),Oa(Oa({},vy),{partial:!0,avoidStore:!0}))},this.propertyWatcher=new Ax(n,this.onPropertyUpdate,t),this.attributeWatcher=new Ax(n,this.onAttributeUpdate,t),this.styleWatcher=new Ax(n,this.onStyleUpdate,t)}return i.prototype.bindModel=function(n){this.model=n,this.watchers.forEach(function(t){return t.bindModel(n)}),this.updateSymbolOverride()},i.prototype.addProps=function(n,t){var e;t===void 0&&(t={});var r=(e=n[lh])!==null&&e!==void 0?e:{},o=this.filterProps(n),a=Oa(Oa({},n),this.propertyWatcher.addDataValues(Oa(Oa({},o),r.props),t));this.shouldProcessProp("attributes",n,r)&&(a.attributes=this.processAttributes(n,r,t)),this.shouldProcessProp("style",n,r)&&(a.style=this.processStyles(n,r,t));var s=t.skipWatcherUpdates||t.fromDataSource;return s||(this.updateSymbolOverride(),a[lh]={props:this.propertyWatcher.getAllDataResolvers(),style:this.styleWatcher.getAllDataResolvers(),attributes:this.attributeWatcher.getAllDataResolvers()}),a},i.prototype.getProps=function(n){var t=this.getValueOrResolver("props",n),e=Oa({},t);return delete e[lh],(0,J.isEmpty)(n.attributes)||(e.attributes=this.getValueOrResolver("attributes",n.attributes)),(0,J.isObject)(n.style)&&!(0,J.isEmpty)(n.style)&&(e.style=this.getValueOrResolver("styles",n.style)),e},i.prototype.getValueOrResolver=function(n,t){var e;switch(n){case"props":e=this.propertyWatcher;break;case"styles":e=this.styleWatcher;break;case"attributes":e=this.attributeWatcher;break;default:{var r=this.options.em;return r==null||r.logError("Invalid target '".concat(n,"'. Must be 'props', 'styles', or 'attributes'.")),{}}}return t?e.getValuesOrResolver(t):e.getAllDataResolvers()},i.prototype.removeAttributes=function(n){this.attributeWatcher.removeListeners(n),this.updateSymbolOverride()},i.prototype.disableStyles=function(){this.styleWatcher.removeListeners(),this.styleWatcher.destroy()},i.prototype.onCollectionsStateMapUpdate=function(){this.watchers.forEach(function(n){return n.onCollectionsStateMapUpdate()})},i.prototype.destroy=function(){this.watchers.forEach(function(n){return n.destroy()})},Object.defineProperty(i.prototype,"watchers",{get:function(){return[this.propertyWatcher,this.styleWatcher,this.attributeWatcher]},enumerable:!1,configurable:!0}),i.prototype.isComponent=function(n){return n instanceof Wr},i.prototype.shouldProcessProp=function(n,t,e){var r=n==="attributes"?this.attributeWatcher:this.styleWatcher,o=e[n],a=!!t[n],s=o&&Object.keys(o).length>0,u=o&&Object.keys(r.getAllDataResolvers()).length>0;return a||s||u},i.prototype.updateSymbolOverride=function(){var n,t=this.model;if(!(!this.isComponent(t)||!Ds(t))){var e=!!Object.keys((n=t==null?void 0:t.collectionsStateMap)!==null&&n!==void 0?n:{}).length;if(e){var r=this.propertyWatcher.getValuesResolvingFromCollections(),o=this.attributeWatcher.getValuesResolvingFromCollections(),a=V8(["locked","layerable",lh],r,!0),s=Object.keys(o).length;s&&a.push("attributes");var u=Zl(t);u.forEach(function(c){c.setSymbolOverride(a,{fromDataSource:!0})}),t.setSymbolOverride(a,{fromDataSource:!0})}}},i.prototype.filterProps=function(n){var t=["components","dataResolver","status","state","open",Af,lh],e=Object.fromEntries(Object.entries(n).filter(function(r){var o=r[0];return!t.includes(o)}));return e},i.prototype.processAttributes=function(n,t,e){var r;return e===void 0&&(e={}),this.attributeWatcher.setDataValues(Oa(Oa({},n.attributes),(r=t.attributes)!==null&&r!==void 0?r:{}),e)},i.prototype.processStyles=function(n,t,e){var r;return e===void 0&&(e={}),typeof n=="string"?(this.styleWatcher.removeListeners(),n):this.styleWatcher.setDataValues(Oa(Oa({},n.style),(r=t.style)!==null&&r!==void 0?r:{}),e)},i}(),H8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ji=function(){return ji=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},ji.apply(this,arguments)},z8=jD(),o_=function(i){return(0,J.isArray)(i)?i[i.length-1]:i},W8=function(i){H8(n,i);function n(t,e){e===void 0&&(e={});var r=this,o=e.em,a=new F8(void 0,{em:o});return r=i.call(this,t,ji(ji({},e),{dataResolverWatchers:a}))||this,r.views=[],r.collectionsStateMap={},a.bindModel(r),r.dataResolverWatchers=a,r.em=e.em,r.opt=e,r}return n.prototype.get=function(t,e){return e!=null&&e.skipResolve?this.dataResolverWatchers.getValueOrResolver("props")[t]:i.prototype.get.call(this,t)},n.prototype.set=function(t,e,r){var o,a,s={skipWatcherUpdates:!1,fromDataSource:!1},u,c;typeof t=="object"?(u=t,c=e||s):typeof t=="string"?(u=(o={},o[t]=e,o),c=r||s):(u={},c=s),this.dataResolverWatchers=(a=this.dataResolverWatchers)!==null&&a!==void 0?a:c.dataResolverWatchers;var h=this.dataResolverWatchers.addProps(u,c);return i.prototype.set.call(this,h,c)},n.prototype.parseStyle=function(t){return z8.parseStyle(t)},n.prototype.extendStyle=function(t){return ji(ji({},this.getStyle("",{skipResolve:!0})),t)},n.prototype.getStyle=function(t,e){e===void 0&&(e={});var r=this.get("style"),o=(0,J.isString)(r)?this.parseStyle(r):(0,J.isObject)(r)?ji({},r):{};delete o.__p;var a=!t||t===""||(0,J.isObject)(t);if(!e.skipResolve)return a?o:o[t];var s=this.dataResolverWatchers.getValueOrResolver("styles",o);return a?s:s[t]},n.prototype.setStyle=function(t,e){var r=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,J.isString)(t)&&(t=this.parseStyle(t));var o=this.getStyle("",{skipResolve:!0});e.partial||e.avoidStore?(e.avoidStore=!0,t.__p=!0):delete t.__p;var a=ji({},t),s=ji({},a);(0,J.keys)(s).forEach(function(h){if(s[h]===""){delete s[h];return}}),this.set({style:s},e),s=this.attributes.style;var u=Object.keys((0,Zt.shallowDiff)(o,a)),c=u.reduce(function(h,v){var m;return ji(ji({},h),(m={},m[v]=s[v],m))},{});return delete c.__p,(0,J.keys)(c).forEach(function(h){var v=r.em;e.noEvent||(r.trigger("change:style:".concat(h)),v&&(v.trigger("styleable:change",r,h,e),v.trigger("styleable:change:".concat(h),r,h,e)))}),s},n.prototype.getView=function(t){var e=this,r=e.views,o=e.em,a=t||(o==null?void 0:o.getCurrentFrameModel());return a?r.find(function(s){return s.frameView===a.view}):r[0]},n.prototype.setView=function(t){var e=this.views;!e.includes(t)&&e.push(t)},n.prototype.removeView=function(t){var e=this.views;e.splice(e.indexOf(t),1)},n.prototype.updateView=function(){this.views.forEach(function(t){return t.updateStyles()})},n.prototype.addStyle=function(t,e,r){var o;e===void 0&&(e=""),r===void 0&&(r={}),typeof t=="string"?t=(o={},o[t]=e,o):r=e||{},r.addStyle=t,t=this.extendStyle(t),this.setStyle(t,r)},n.prototype.removeStyle=function(t){var e=this.getStyle();delete e[t],this.setStyle(e)},n.prototype.styleToString=function(t){t===void 0&&(t={});var e=[],r=t.style||this.getStyle(t),o=t.important,a=function(u){var c=(0,J.isArray)(o)?o.indexOf(u)>=0:o,h=u.substring(0,2),v=h==="__";if(v)return"continue";var m=r[u],y=(0,J.isArray)(m)?m:[m];y.forEach(function(_){var C="".concat(_).concat(c?" !important":"");C&&e.push("".concat(u,":").concat(C,";"))})};for(var s in r)a(s);return e.join("")},n.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},n.prototype.getSelectorsString=function(t){return this.selectorsToString?this.selectorsToString(t):this.getSelectors().getFullString()},n.prototype.onCollectionsStateMapUpdate=function(t){this.collectionsStateMap=t,this.dataResolverWatchers.onCollectionsStateMapUpdate()},n.prototype.clone=function(t,e){var r=this.dataResolverWatchers.getProps(this.attributes),o=ji(ji({},r),t),a=ji(ji({},this.opt),e),s=this.constructor;return new s(o,a)},n.prototype.toJSON=function(t,e){if(t!=null&&t.fromUndo)return ji({},i.prototype.toJSON.call(this,t));var r=ji(ji({},this.attributes),e),o=this.dataResolverWatchers.getProps(r);return o},n}(ye.Kx);const ID=W8;var q8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gm=1,kx=2,BD=function(i){q8(n,i);function n(t,e){e===void 0&&(e={});var r=i.call(this,t,e)||this,o=e.config,a=o===void 0?{}:o,s=r.get("name"),u=r.get("label");s?u||r.set("label",s):r.set("name",u);var c=r.get("name"),h=a.escapeName,v=h?h(c):n.escapeName(c);return r.set("name",v),r.em=e.em,r}return n.prototype.defaults=function(){return{name:"",label:"",type:Gm,active:!0,private:!1,protected:!1,_undo:!0}},n.prototype.isId=function(){return this.get("type")===kx},n.prototype.isClass=function(){return this.get("type")===Gm},n.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.escape,r=this.get("name"),o="";switch(this.get("type")){case Gm:o=".";break;case kx:o="#";break}return o+(e?e(r):r)},n.prototype.toString=function(){return this.getFullName()},n.prototype.getName=function(){return this.get("name")||""},n.prototype.getLabel=function(){return this.get("label")||""},n.prototype.setLabel=function(t){return this.set("label",t)},n.prototype.getActive=function(){return!!this.get("active")},n.prototype.setActive=function(t){return this.set("active",t)},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=this.em,r=ye.Kx.prototype.toJSON.call(this,[t]),o=(0,J.result)(this,"defaults");if(e!=null&&e.getConfig().avoidDefaults){(0,J.forEach)(o,function(s,u){r[u]===s&&delete r[u]}),r.label===r.name&&delete r.label;var a=(0,J.keys)(r).length;a===1&&r.name&&(r=r.name),a===2&&r.name&&r.type&&(r=this.getFullName())}return r},n.escapeName=function(t){return"".concat(t).trim().replace(/\s+/g,"-")},n.TYPE_CLASS=Gm,n.TYPE_ID=kx,n}(ye.Kx);const Po=BD;BD.prototype.idAttribute="name";var K8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),UD=function(i,n){return i.reduce(function(t,e,r){return t.concat(UD(i.slice(r+1),"".concat(n).concat(e)))},[n])},VD=function(i){K8(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.modelId=function(t){return"".concat(t.name,"_").concat(t.type||Po.TYPE_CLASS)},n.prototype.getStyleable=function(){return(0,J.filter)(this.models,function(t){return t.getActive()&&!t.get("private")})},n.prototype.getValid=function(t){var e=t===void 0?{}:t,r=e.noDisabled;return(0,J.filter)(this.models,function(o){return!o.get("private")}).filter(function(o){return r?o.get("active"):1})},n.prototype.getFullString=function(t,e){e===void 0&&(e={});var r=[],o=t||this;return o.forEach(function(a){return r.push(a.getFullName(e))}),e.sort&&r.sort(),r.join("").trim()},n.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.combination,r=t.array,o=[],a=this.map(function(s){return s.getFullName(t)}).sort();return e?a.forEach(function(s,u){o=o.concat(UD(a.slice(u+1),s))}):o=a,r?o:e?o.join(","):o.join("")},n}(ye.pM);const uc=VD;VD.prototype.model=Po;var $8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$O=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},G8=function(i){$8(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},n.prototype.getId=function(){return this.get("id")},n.prototype.getLabel=function(){return this.get("label")},n}(ye.Kx);const kg=G8;function FD(i){var n=new Set,t=new Map,e={items:[]};i.forEach(function(o){var a=o.category;if(a){n.add(a);var s=t.get(a);s?s.push(o):t.set(a,[o])}else e.items.push(o)});var r=Array.from(n).map(function(o){return{category:o,items:t.get(o)||[]}});return $O($O([],r,!0),[e],!1)}var Y8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),GO="category",HD=function(i){Y8(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.initCategory=function(t){var e=t.get(GO),r=e instanceof kg;if(e&&!r){(0,J.isString)(e)?e={id:e,label:e}:(0,Zt.isObject)(e)&&!e.id&&(e.id=e.label);var o=this.getCategories().add(e);return t.set(GO,o,{silent:!0}),o}else if(r){var o=e;return this.getCategories().add(o),o}},n}(ye.pM),X8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zD=function(i){X8(n,i);function n(t,e){e===void 0&&(e={});var r=i.call(this,t,e)||this,o=e.events,a=e.em,s=o==null?void 0:o.update;return a&&s&&r.on("change",function(u,c){return a.trigger(s,{category:u,changes:u.changedAttributes(),options:c})}),r}return n.prototype.add=function(t,e){var r=(0,J.isArray)(t)?t:[t];return r.forEach(function(o){return o&&(o.id=(0,Zt.normalizeKey)("".concat(o.id)))}),i.prototype.add.call(this,t,e)},n.prototype.get=function(t){return i.prototype.get.call(this,(0,J.isString)(t)?(0,Zt.normalizeKey)(t):t)},n}(ye.pM);const g0=zD;zD.prototype.model=kg;var m0;(function(i){i.select="trait:select",i.value="trait:value",i.categoryUpdate="trait:category:update",i.custom="trait:custom",i.all="trait"})(m0||(m0={}));const a_=m0;var J8=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),y0=function(){return y0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},y0.apply(this,arguments)},Z8=function(i){J8(n,i);function n(t,e){var r=i.call(this,t)||this,o=r.attributes,a=o.target,s=o.name;return!r.get("id")&&r.set("id",s),a&&r.setTarget(a),r.em=e,r}return n.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",category:"",changeProp:!1,options:[]}},Object.defineProperty(n.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"category",{get:function(){var t=this.get("category");return t instanceof kg?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"component",{get:function(){return this.target},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"changeProp",{get:function(){return!!this.get("changeProp")},enumerable:!1,configurable:!0}),n.prototype.setTarget=function(t){if(t){var e=this.attributes,r=e.name,o=e.changeProp,a=e.value,s=e.getValue;this.target=t,this.unset("target");var u=o?"change:".concat(r):"change:attributes:".concat(r);this.listenTo(t,u,this.targetUpdated);var c=a||(s?void 0:this.getValue());!(0,J.isUndefined)(c)&&this.set({value:c},{silent:!0})}},n.prototype.getId=function(){return this.get("id")},n.prototype.getType=function(){return this.get("type")},n.prototype.getName=function(){return this.get("name")},n.prototype.getLabel=function(t){var e;t===void 0&&(t={});var r=t.locale,o=r===void 0?!0:r,a=this.getId(),s=this.get("label")||this.getName();return o&&((e=this.em)===null||e===void 0?void 0:e.t("traitManager.traits.labels.".concat(a)))||s},n.prototype.getValue=function(t){return this.getTargetValue(t)},n.prototype.setValue=function(t,e){var r=this;e===void 0&&(e={});var o=this,a=o.component,s=o.em,u=e.partial,c={},h=this.attributes.setValue;if(h){h({value:t,component:a,editor:s==null?void 0:s.getEditor(),trait:this,partial:!!u,options:e,emitUpdate:function(){return r.targetUpdated()}});return}u&&(c.avoidStore=!0),this.setTargetValue(t,c)},n.prototype.getDefault=function(){return this.get("default")},n.prototype.getOptions=function(){return this.get("options")||[]},n.prototype.getOption=function(t){var e=this,r=(0,Zt.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(o){return e.getOptionId(o)===r})[0]},n.prototype.getOptionId=function(t){return t.id||t.value},n.prototype.getOptionLabel=function(t,e){var r;e===void 0&&(e={});var o=e.locale,a=o===void 0?!0:o,s=(0,J.isString)(t)?this.getOption(t):t,u=this.getOptionId(s),c=s.label||s.name||u,h=this.getName();return a&&((r=this.em)===null||r===void 0?void 0:r.t("traitManager.traits.options.".concat(h,".").concat(u)))||c},n.prototype.getCategoryLabel=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.category,a=t.locale,s=a===void 0?!0:a,u=o==null?void 0:o.getId(),c=o==null?void 0:o.getLabel();return s&&(r==null?void 0:r.t("traitManager.categories.".concat(u)))||c||""},n.prototype.runCommand=function(){var t=this.em,e=this.attributes.command;if(e&&t)return(0,J.isString)(e)?t.Commands.run(e):e(t.Editor,this)},n.prototype.props=function(){return this.attributes},n.prototype.targetUpdated=function(){var t=this,e=t.component,r=t.em,o=this.getTargetValue({useType:!0});this.set({value:o},{fromTarget:1});var a={trait:this,component:e,value:o};e.trigger(a_.value,a),r==null||r.trigger(a_.value,a),r==null||r.trigger("trait:update",a)},n.prototype.getTargetValue=function(t){var e;t===void 0&&(t={});var r=this,o=r.component,a=r.em,s=this.getName(),u=this.get("getValue"),c,h=t.skipResolve;if(u?c=u({editor:a==null?void 0:a.getEditor(),trait:this,component:o}):this.changeProp?(c=o.get(s),h&&(c=o.dataResolverWatchers.getValueOrResolver("props",(e={},e[s]=c,e))[s])):c=o.getAttributes({skipResolve:h})[s],t.useType){var v=this.getType();if(v==="checkbox"){var m=this.attributes,y=m.valueTrue,_=m.valueFalse;!(0,J.isUndefined)(y)&&y===c?c=!0:!(0,J.isUndefined)(_)&&_===c&&(c=!1)}}return(0,J.isUndefined)(c)?"":c},n.prototype.setTargetValue=function(t,e){var r;e===void 0&&(e={});var o=this,a=o.component,s=o.attributes,u=this.getName();if(!(0,J.isUndefined)(t)){var c=t;if(t==="false"?c=!1:t==="true"&&(c=!0),this.getType()==="checkbox"){var h=s.valueTrue,v=s.valueFalse;c&&!(0,J.isUndefined)(h)&&(c=h),!c&&!(0,J.isUndefined)(v)&&(c=v)}var m=(r={},r[u]=c,r);m.__p=e.avoidStore?null:void 0,this.changeProp?a.set(m,e):a.addAttributes(m,e)}},n.prototype.setValueFromInput=function(t,e,r){e===void 0&&(e=!0),r===void 0&&(r={});var o={value:t};this.set(o,y0(y0({},r),{avoidStore:1})),e&&(this.set("value","",r),this.set(o,r))},n.prototype.getInitValue=function(){var t=this.component,e=this.getName(),r;if(t){var o=t.get("attributes");r=this.changeProp?t.get(e):o[e]}return r||this.get("value")||this.get("default")},n}(ye.Kx);const b0=Z8;var Q8=function(){function i(n){n===void 0&&(n={}),this.config=n}return i.prototype.build=function(n,t){return(0,J.isString)(n)?this.buildFromString(n,t):new b0(n,t)},i.prototype.buildFromString=function(n,t){var e={name:n,type:"text"};switch(n){case"target":e.type="select",e.default=!1,e.options=this.config.optionsTarget;break}return new b0(e,t)},i}();const t7=Q8;var e7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),n7=function(i){e7(n,i);function n(t,e){var r=i.call(this,t)||this;r.categories=new g0;var o=e.em;r.em=o,r.categories=new g0([],{em:o,events:{update:a_.categoryUpdate}}),r.on("add",r.handleAdd),r.on("reset",r.handleReset);var a=r.module,s=a==null?void 0:a.getConfig();return r.tf=new t7(s),r}return Object.defineProperty(n.prototype,"module",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),n.prototype.getCategories=function(){return this.categories},n.prototype.handleReset=function(t,e){var r=e===void 0?{}:e,o=r.previousModels,a=o===void 0?[]:o;a.forEach(function(s){return s.trigger("remove")})},n.prototype.handleAdd=function(t){t.em=this.em;var e=this.target;e&&(t.target=e),this.initCategory(t)},n.prototype.setTarget=function(t){this.target=t,this.models.forEach(function(e){return e.setTarget(t)})},n.prototype.add=function(t,e){if(t!=null){var r=this,o=r.target,a=r.em;if((0,J.isArray)(t)){for(var s=[],u=0,c=t.length;u<c;u++){var h=t[u];s[u]=h instanceof b0?h:this.tf.build(h,a),s[u].setTarget(o)}return i.prototype.add.call(this,s,e)}var v=t instanceof b0?t:this.tf.build(t,a);return v.setTarget(o),i.prototype.add.call(this,v,e)}},n}(HD);const w0=n7;var r7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),co=function(){return co=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},co.apply(this,arguments)},gy=function(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(i);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]]);return t},Mx=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},fh=function(i,n){if(n===void 0&&(n=[]),!i)return[];var t=(0,J.isArray)(i)||(0,J.isFunction)(i.map)?i:[i];return t.map(function(e){n.push(e.getId()),fh(e.components().models,n)}),n},WD=function(i,n,t){n===void 0&&(n={}),t===void 0&&(t={}),t.visitedCmps=t.visitedCmps||{};var e=t.visitedCmps,r=t.updateOptions||{},o=(0,J.isArray)(i)?i:[i];return o.map(function(a){var s=a.attributes,u=s===void 0?{}:s,c=a.components,h=a.tagName,v=a.style,m=u.id;u.draggable;var y=gy(u,["id","draggable"]),_=a;if(m){if(e[m])e[m].push(_),m=Wr.getNewId(n),_.attributes.id=m;else if(e[m]=[],n[m]){_=n[m];var C=r.onAttributes,E=r.onStyle,D=_;h&&D.set({tagName:h},co(co({},t),{silent:!0})),C?C({item:a,component:D,attributes:y,options:t}):(0,J.keys)(y).length&&D.addAttributes(y,co({},t)),E?E({item:a,component:D,style:v,options:t}):(0,J.keys)(v).length&&D.addStyle(v,t)}}var F=(0,J.isFunction)(_.components)?_:null;if(c){var V=WD(c,n,t);F?F.components().reset(V,t):_.components=V}else F&&F.components().reset([],t);return _})},i7=function(i){r7(n,i);function n(t,e){var r=i.call(this,t,e)||this;r.opt=e,r.listenTo(r,"add",r.onAdd),r.listenTo(r,"remove",r.removeChildren),r.listenTo(r,"reset",r.resetChildren);var o=e.em,a=e.config;return r.config=a,r.em=o,r.domc=e.domc||(o==null?void 0:o.Components),r}return Object.defineProperty(n.prototype,"events",{get:function(){var t;return(t=this.domc)===null||t===void 0?void 0:t.events},enumerable:!1,configurable:!0}),n.prototype.resetChildren=function(t,e){var r=this;e===void 0&&(e={});var o=this,a=e.previousModels||[],s=a.filter(function(h){return!t.get(h.cid)}),u=fh(t),c=fh(a).filter(function(h){return u.indexOf(h)>=0});e.keepIds=(e.keepIds||[]).concat(c),s.forEach(function(h){return r.removeChildren(h,o,e)}),t.each(function(h){return r.onAdd(h)})},n.prototype.resetFromString=function(t,e){var r,o;t===void 0&&(t=""),e===void 0&&(e={}),e.keepIds=fh(this);var a=this,s=a.domc,u=a.em,c=a.parent,h=(s==null?void 0:s.allById())||{},v=this.parseString(t,co(co({},e),{cloneRules:!0})),m=co({skipViewUpdate:!0},e),y=WD(v,h,m);n.cloneCssRules(u,m.visitedCmps),this.reset(y,e),u==null||u.trigger("component:content",c,e,t),(o=(r=c).__checkInnerChilds)===null||o===void 0||o.call(r)},n.prototype.removeChildren=function(t,e,r){var o=this;if(r===void 0&&(r={}),!!t){var a=this,s=a.domc,u=a.em,c=r.temporary||r.fromUndo;if(t.prevColl=this,!c){var h=t.getId(),v=u.Selectors.getAll(),m=u.Css.getAll(),y=(r.keepIds||[]).indexOf(h)<0,_=s?s.allById():{};delete _[h];var C=y?m.remove(m.filter(function(V){return V.getSelectors().getFullString()==="#".concat(h)}),r):[];v.remove(C.map(function(V){return V.getSelectors().at(0)})),t.opt.temporary||(u.Commands.run("core:component-style-clear",{target:t}),t.views.forEach(function(V){V.scriptContainer&&t.emitWithEditor(In.I.scriptUnmount,{component:t,view:V,el:V.el})}),t.removed(),t.trigger("removed"),u.trigger(In.I.remove,t),s&&h0(t)&&Vf(t)&&s.symbols.__trgEvent(s.events.symbolInstanceRemove,{component:t},!0));var E=t.components();E.forEach(function(V){PD(V,V,E,co(co({},r),{skipRefsUp:!0})),o.removeChildren(V,e,r)})}var D=t.components();if(u.stopListening(D),u.stopListening(t),u.stopListening(t.get("classes")),t.__postRemove(),!t.opt.temporary){var F=function(V){V.emitWithEditor(In.I.removed,V,{removeOptions:r}),V.components().forEach(function(K){return F(K)})};F(t)}}},n.prototype.model=function(t,e){var r=e.collection.opt,o=r.em,a,s=o.Components.componentTypes;e.em=o,e.config=r.config,e.componentTypes=s,e.domc=r.domc;for(var u=0;u<s.length;u++){var c=s[u].id;if(c==t.type){a=s[u].model;break}}return a||(a=s[s.length-1].model,o&&t.type&&o.logWarning("Component type '".concat(t.type,"' not found"),{attrs:t,options:e})),new a(t,e)},n.prototype.parseString=function(t,e){e===void 0&&(e={});var r=this,o=r.em,a=r.domc,s=r.parent,u=s==null?void 0:s.is("wrapper"),c=e.asDocument&&u,h=o.Css,v=o.Parser.parseHtml(t,co({asDocument:c},e.parserOptions)),m=v.html;if(u&&v.doctype){var y=s,_=v.html||{},C=_.components,E=C===void 0?[]:C,D=gy(_,["components"]),F=v.head||{},V=F.components,K=gy(F,["components"]);m=E,y.set(D,e),y.head.set(K,e),y.head.components(V,e),y.docEl.set(v.root,e),y.set({doctype:v.doctype})}var Z=Wr.checkId(m,v.css,a.componentsById,e);if(e.cloneRules&&n.cloneCssRules(o,Z.updatedIds),v.css&&h&&!e.temporary){e.at;var ct=gy(e,["at"]);h.addCollection(v.css,co(co({},ct),{extend:1}))}return m},n.prototype.add=function(t,e){var r=this;if(e===void 0&&(e={}),t!=null){e.keepIds=Mx(Mx([],e.keepIds||[],!0),fh(e.previousModels),!0),(0,J.isString)(t)?t=this.parseString(t,e):(0,J.isArray)(t)&&(t=Mx([],t,!0),t.forEach(function(a,s){if((0,J.isString)(a)){var u=r.parseString(a,e);t[s]=(0,J.isArray)(u)&&!u.length?null:u}}));var o=((0,J.isArray)(t)?t:[t]).filter(Boolean).map(function(a){return r.processDef(a)});return t=(0,J.isArray)(t)?(0,J.flatten)(o,1):o[0],i.prototype.add.call(this,t,e)}},n.prototype.processDef=function(t){if(t.cid&&t.ccid)return t;var e=this,r=e.em,o=e.config,a=o===void 0?{}:o,s=a.processor,u=t;if(s){u=co({},u);var c=s(u);c&&((0,J.each)(u,function(E,D){return delete u[D]}),(0,J.extend)(u,c))}if(u.$$typeof&&typeof u.props=="object"){u=co({},u),u.props=co({},u.props);var h=r.Components,v=r.Parser,m=v.parserHtml;(0,J.each)(u,function(E,D){(0,J.includes)(["props","type"],D)||delete u[D]});var y=u.props,_=y.children;delete y.children,delete u.props;var C=m.splitPropsFromAttr(y);u.attributes=C.attrs,_&&(u.components=_),u.type?h.getType(u.type)||(u.tagName=u.type,delete u.type):u.type="textnode",(0,J.extend)(u,C.props)}return u},n.prototype.onAdd=function(t,e,r){r===void 0&&(r={});var o=this,a=o.domc,s=o.em,u=s.config.avoidInlineStyle;if(a&&a.Component.ensureInList(t),!u&&s.config.forceClass&&!r.temporary){var c=t.getStyle();if(!(0,J.isEmpty)(c)){var h=t.cid;s.Css.setClassRule(h,c),t.setStyle({}),t.addClass(h)}}if(t.__postAdd({recursive:!0}),s&&!r.temporary){var v=function(m){s.trigger(In.I.add,m,r),m.components().forEach(function(y){return v(y)})};v(t),a&&h0(t)&&Vf(t)&&a.symbols.__trgEvent(a.events.symbolInstanceAdd,{component:t},!0)}},n.cloneCssRules=function(t,e){e===void 0&&(e={});var r=t.Css;Object.keys(e).forEach(function(o){var a=e[o];if(a.length){var s=(r.getRules("#".concat(o))||[]).filter(function(c){return!(0,J.isEmpty)(c.attributes.style)});if(s.length){var u=r.getAll();a.forEach(function(c){s.forEach(function(h){var v=h.clone();v.set("selectors",["#".concat(c.attributes.id)]),u.add(v)})})}}})},n}(ye.pM);const yg=i7;var o7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qn=function(){return qn=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},qn.apply(this,arguments)},a7=function(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(i);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]]);return t},Ea=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},YO=function(i){return i.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},vf=function(i){return!!(i!=null&&i.getConfig().avoidInlineStyle)},B1="component:drag",ko="__symbols",oa="__symbol",Af="__symbol_ovrd",my=In.I.update,s_=In.I.updateInside,s7=function(i){o7(n,i);function n(t,e){t===void 0&&(t={});var r=this,o=e.em;r=i.call(this,t,e)||this,(0,J.bindAll)(r,"__upSymbProps","__upSymbCls","__upSymbComps","syncOnComponentChange");var a=r.parent(),s=a==null?void 0:a.attributes,u=r.get("propagate");if(u&&r.set("propagate",(0,J.isArray)(u)?u:[u]),s&&s.propagate&&!u){var c={},h=s.propagate;h.forEach(function(D){return c[D]=a.get(D)}),c.propagate=h,r.set(qn(qn({},c),t))}e&&e.config&&e.config.voidElements.indexOf(r.get("tagName"))>=0&&r.set("void",!0),e.em=o,r.opt=e,r.em=o,r.config=e.config||{};var v=qn(qn({},(0,J.result)(r,"defaults").attributes||{}),r.get("attributes")||{}),m=r.dataResolverWatchers.getValueOrResolver("attributes",v);if(r.setAttributes(m),r.ccid=n.createId(r,e),r.preInit(),r.initClasses(),r.initComponents(),r.initTraits(),r.initToolbar(),r.initScriptProps(),r.listenTo(r,"change:script",r.scriptUpdated),r.listenTo(r,"change:tagName",r.tagUpdated),r.listenTo(r,"change:attributes",r.attrUpdated),r.listenTo(r,"change:attributes:id",r._idUpdated),r.on("change:toolbar",r.__emitUpdateTlb),r.on("change",r.__onChange),r.on(s_,r.__propToParent),r.set("status",""),r.views=[],["classes","traits","components"].forEach(function(D){var F="add remove reset ".concat(D!=="components"?"change":"");r.listenTo(r.get(D),F.trim(),function(){for(var V=[],K=0;K<arguments.length;K++)V[K]=arguments[K];return r.emitUpdate.apply(r,Ea([D],V,!1))})}),!e.temporary){var y=o&&o.Css,_=r.attributes,C=_.styles,E=_.type;C&&y&&y.addCollection(C,{avoidUpdateStyle:!0},{group:"cmp:".concat(E)}),r._moveInlineStyleToRule(),r.__postAdd(),r.init(),Ds(r)&&yv(r),o==null||o.trigger(In.I.create,r,e)}return vf(o)&&r.dataResolverWatchers.disableStyles(),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){var t;return t={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null,delegate:null},t[oa]=0,t[ko]=0,t[Af]=0,t._undo=!0,t._undoexc=["status","open"],t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tagName",{get:function(){return this.get("tagName")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"content",{get:function(){var t;return(t=this.get("content"))!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"toolbar",{get:function(){return this.get("toolbar")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"resizable",{get:function(){return this.get("resizable")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"delegate",{get:function(){return this.get("delegate")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"locked",{get:function(){return this.get("locked")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"frame",{get:function(){return this.opt.frame},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"page",{get:function(){var t;return(t=this.frame)===null||t===void 0?void 0:t.getPage()},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return this.get("type")||"default"},n.prototype.preInit=function(){},n.prototype.init=function(){},n.prototype.updated=function(t,e,r){},n.prototype.removed=function(){},n.prototype.onCollectionsStateMapUpdate=function(t){var e;i.prototype.onCollectionsStateMapUpdate.call(this,t),(e=this._getStyleRule())===null||e===void 0||e.onCollectionsStateMapUpdate(t);var r=this.components();r.forEach(function(o){return o.onCollectionsStateMapUpdate(t)})},n.prototype.syncComponentsCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.listenTo(this.components(),"add remove reset",this.syncOnComponentChange),this.components().forEach(function(t){return t.syncComponentsCollectionState()})},n.prototype.stopSyncComponentCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.collectionsStateMap={},this.components().forEach(function(t){return t.stopSyncComponentCollectionState()})},n.prototype.syncOnComponentChange=function(t,e,r){var o=this;if(!(!this.collectionsStateMap||!Object.keys(this.collectionsStateMap).length)){var a=r||e||{};if(r)if(a.add){var u=t;u.syncComponentsCollectionState(),u.onCollectionsStateMapUpdate(this.collectionsStateMap)}else{var c=t;c.stopSyncComponentCollectionState()}else{var s=a.previousModels||[];s.forEach(function(h){return h.stopSyncComponentCollectionState()}),this.components().forEach(function(h){h.syncComponentsCollectionState(),h.onCollectionsStateMapUpdate(o.collectionsStateMap)})}}},n.prototype.__postAdd=function(t){t===void 0&&(t={});var e=this.em,r=e==null?void 0:e.UndoManager,o=this.components();r&&!this.__hasUm&&(r.add(o),r.add(this.getSelectors()),this.__hasUm=!0),t.recursive&&o.map(function(a){return a.__postAdd(t)})},n.prototype.__postRemove=function(){var t=this.em,e=t==null?void 0:t.UndoManager;e&&(e.remove(this.components()),e.remove(this.getSelectors()),delete this.__hasUm)},n.prototype.__onChange=function(t,e){var r=this,o=this.changedAttributes()||{};(0,J.keys)(o).forEach(function(a){return r.emitUpdate(a)}),["status","open","toolbar","traits"].forEach(function(a){return delete o[a]}),(0,Zt.isEmptyObj)(o)||(this.__changesUp(e,{changed:o}),this.__propSelfToParent({component:this,changed:o,options:e}))},n.prototype.__onStyleChange=function(t,e){var r=this,o=this,a=o.collectionsStateMap,s=o.em;if(!(!s||e!=null&&e.noEvent)){var u=(0,J.keys)(t),c={style:t};this.emitWithEditor(In.I.styleUpdate,this,c),u.forEach(function(y){return r.emitWithEditor("".concat(In.I.styleUpdateProperty).concat(y),r,c)});var h=Object.keys(a).filter(function(y){return y!==pg.rootData});if(h.length!==0){var v=h.every(function(y){var _=a[y];return _.currentIndex===_.startIndex});if(v){var m=Zl(this);m.forEach(function(y){var _=y.collectionsStateMap,C=Object.keys(_),E=C.every(function(D){return h.includes(D)});E&&y.addStyle(qn({},t),{noEvent:!0})})}}}},n.prototype.__changesUp=function(t,e){var r=this;e===void 0&&(e={});var o=this,a=o.em,s=o.frame;[s,a].forEach(function(u){u==null||u.changesUp(t,qn({component:r,options:t},e))})},n.prototype.__propSelfToParent=function(t){this.trigger(my,t),this.__propToParent(t)},n.prototype.__propToParent=function(t){var e=this.parent();e&&e.trigger(s_,t)},n.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},n.prototype.__getAllById=function(){var t=this.em;return t?t.Components.allById():{}},n.prototype.__upSymbProps=function(t,e){e===void 0&&(e={}),C8(this,e)},n.prototype.__upSymbCls=function(t,e,r){r===void 0&&(r={}),k8(this,r)},n.prototype.__upSymbComps=function(t,e,r){PD(this,t,e,r)},n.prototype.__onDestroy=function(){},n.prototype.is=function(t){return this.get("type")==t},n.prototype.props=function(){return this.attributes},n.prototype.index=function(){var t=this.collection;return t?t.indexOf(this):0},n.prototype.setDragMode=function(t){return this.set("dmode",t)},n.prototype.getDragMode=function(){return this.get("dmode")||""},n.prototype.setSymbolOverride=function(t,e){var r,o;e===void 0&&(e={}),this.set((r={},r[Af]=(o=(0,J.isString)(t)?[t]:t)!==null&&o!==void 0?o:0,r),e)},n.prototype.getSymbolOverride=function(){return this.get(Af)},n.prototype.find=function(t){var e,r=[],o=(e=this.view)===null||e===void 0?void 0:e.$el.find(t);return o==null||o.each(function(a){var s=o.eq(a),u=s.data("model");u&&r.push(u)}),r},n.prototype.findType=function(t){var e=[],r=function(o){return o.forEach(function(a){a.is(t)&&e.push(a),r(a.components())})};return r(this.components()),e},n.prototype.findFirstType=function(t){return this.findType(t).at(0)},n.prototype.closest=function(t){var e,r=(e=this.view)===null||e===void 0?void 0:e.$el.closest(t);return r!=null&&r.length?r.data("model"):void 0},n.prototype.closestType=function(t){for(var e=this.parent();e&&!e.is(t);)e=e.parent();return e},n.prototype.contains=function(t){var e=!1;if(!t)return e;var r=function(o){!e&&o.forEach(function(a){a===t&&(e=!0),!e&&r(a.components())})};return r(this.components()),e},n.prototype.tagUpdated=function(){this.trigger("rerender")},n.prototype.replaceWith=function(t,e){e===void 0&&(e={});var r=this.collection,o=r.indexOf(this);r.remove(this);var a=r.add(t,qn(qn({},e),{at:o}));return(0,J.isArray)(a)?a:[a]},n.prototype.attrUpdated=function(t,e,r){var o=this;r===void 0&&(r={});var a=this.get("attributes"),s=a.class;s&&this.setClass(s),delete a.class;var u=a.style;u&&this.setStyle(u,r),delete a.style;var c=qn({},this.previous("attributes")),h=(0,Zt.shallowDiff)(c,this.get("attributes"));(0,J.keys)(h).forEach(function(v){var m,y="attributes:".concat(v);o.trigger("change:".concat(y),o,h[v],r),(m=o.em)===null||m===void 0||m.trigger("".concat(my,":").concat(y),o,h[v],r)})},n.prototype.setAttributes=function(t,e){return e===void 0&&(e={skipWatcherUpdates:!1,fromDataSource:!1}),this.set("attributes",qn({},t),e),this},n.prototype.addAttributes=function(t,e){e===void 0&&(e={});var r=this.dataResolverWatchers.getValueOrResolver("attributes",this.getAttributes({noClass:!0,noStyle:!0}));return this.setAttributes(qn(qn({},r),t),e)},n.prototype.removeAttributes=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var r=Array.isArray(t)?t:[t],o=this.getAttributes();return r.map(function(a){return delete o[a]}),this.setAttributes(o,e)},n.prototype.getStyle=function(t,e){var r=this.em,o=(0,J.isString)(t),a=o?t:"",s=o?e:t,u=!!(s!=null&&s.skipResolve);if(vf(r)&&!(s!=null&&s.inline)){var c=r.get("state"),h=r.Css,v=h.getIdRule(this.getId(),qn({state:c},s));return this.rule=v,v?v.getStyle(a,{skipResolve:u}):{}}return i.prototype.getStyle.call(this,a,{skipResolve:u})},n.prototype.setStyle=function(t,e){var r=this;t===void 0&&(t={}),e===void 0&&(e={});var o=this,a=o.opt,s=o.em;if(vf(s)&&!a.temporary&&!e.inline){var u=this.get("style")||{};t=(0,J.isString)(t)?this.parseStyle(t):t,t=qn(qn({},u),t);var c=s.get("state"),h=s.Css,v=this.getStyle(qn(qn({},e),{skipResolve:!0}));this.rule=h.setIdRule(this.getId(),t,qn({state:c},e));var m=(0,Zt.shallowDiff)(v,t);this.set("style","",{silent:!0}),(0,J.keys)(m).forEach(function(y){return r.trigger("change:style:".concat(y))})}else t=i.prototype.setStyle.apply(this,arguments);return a.temporary||this.__onStyleChange(e.addStyle||t,e),t},n.prototype.getAttributes=function(t){t===void 0&&(t={});var e=this.em,r=[],o=qn({},this.get("attributes")),a=t!=null&&t.skipResolve?this.dataResolverWatchers.getValueOrResolver("attributes",o):o,s=e==null?void 0:e.Selectors,u=this.getId();if(t.noClass?delete a.class:(this.classes.forEach(function(v){return r.push((0,J.isString)(v)?v:v.getName())}),r.length&&(a.class=r.join(" "))),!t.noStyle){var c=this.getStyle({inline:!0});(0,Zt.isObject)(c)&&!(0,Zt.isEmptyObj)(c)&&(a.style=this.styleToString({inline:!0}))}if(!(0,J.has)(a,"id")){var h=!1;(vf(e)||!(0,J.isEmpty)(this.getStyle()))&&(h=!!(s!=null&&s.get(u,s.Selector.TYPE_ID))),(Ds(this)||this.get("script-export")||this.get("script"))&&(h=!0),h&&(a.id=u)}return a},n.prototype.addClass=function(t){var e=this.em.Selectors.addClass(t);return this.classes.add(e)},n.prototype.setClass=function(t){return this.classes.reset(),this.addClass(t)},n.prototype.removeClass=function(t){var e=[];t=(0,J.isArray)(t)?t:[t];var r=this.classes,o=Po.TYPE_CLASS;return t.forEach(function(a){var s=a.split(" ");s.forEach(function(u){var c=r.where({name:u,type:o})[0];c&&e.push(r.remove(c))})}),e},n.prototype.getClasses=function(){var t=this.getAttributes(),e=t.class;return e?e.split(" "):[]},n.prototype.initClasses=function(t,e,r){r===void 0&&(r={});var o="change:classes",a=this.get("attributes")||{},s=a.class,u=a7(a,["class"]),c=[this,o,this.initClasses],h=this.get("classes")||s||[],v=(0,J.isString)(h)?h.split(" "):h;this.stopListening.apply(this,c);var m=this.normalizeClasses(v),y=new uc([]);return this.set("classes",y,r),y.add(m),y.on("add remove reset",this.__upSymbCls),s&&m.length&&this.set("attributes",u),this.listenTo.apply(this,c),this},n.prototype.initComponents=function(){var t="change:components",e=[this,t,this.initComponents];this.stopListening.apply(this,e);var r=new yg([],this.opt);r.parent=this;var o=this.get("components"),a=!this.opt.avoidChildren;return this.set("components",r),a&&o&&r.add((0,J.isFunction)(o)?o(this):o,this.opt),r.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,e),this},n.prototype.initTraits=function(t){var e=this,r=this.em,o="change:traits";this.off(o,this.initTraits),this.__loadTraits();var a=qn({},this.get("attributes")),s=this.traits;s.each(function(c){var h=c.getName(),v=c.getInitValue();c.changeProp?(0,J.isUndefined)(e.get(h))&&e.set(h,v):h&&v&&(a[h]=v)});var u=this.dataResolverWatchers.getValueOrResolver("attributes",a);return s.length&&this.setAttributes(u),this.on(o,this.initTraits),t&&r&&r.trigger("component:toggled"),this},n.prototype.initScriptProps=function(){if(!this.opt.temporary){var t="script-props",e=["change:".concat(t),this.initScriptProps];this.off.apply(this,e);var r=this.previous(t)||[],o=this.get(t)||[],a=r.map(function(u){return"change:".concat(u)}).join(" "),s=o.map(function(u){return"change:".concat(u)}).join(" ");a&&this.off(a,this.__scriptPropsChange),s&&this.on(s,this.__scriptPropsChange),this.on.apply(this,e)}},n.prototype.__scriptPropsChange=function(t,e,r){r===void 0&&(r={}),!r.avoidStore&&this.trigger("rerender")},n.prototype.append=function(t,e){e===void 0&&(e={});var r=(0,J.isArray)(t)?Ea([],t,!0):[t],o=r.map(function(s){return(0,J.isString)(s)||s.collection&&s.collection.remove(s,{temporary:!0}),s}),a=this.components().add(o,qn({action:In.t.add},e));return a},n.prototype.components=function(t,e){e===void 0&&(e={});var r=this.get("components");return(0,J.isUndefined)(t)?r:(r.reset(void 0,e),t?this.append(t,e):[])},n.prototype.getChildAt=function(t){return this.components().at(t||0)||void 0},n.prototype.getLastChild=function(){var t=this.components();return t.at(t.length-1)||null},n.prototype.empty=function(t){return t===void 0&&(t={}),this.components().reset(void 0,t),this},n.prototype.parent=function(t){t===void 0&&(t={});var e=this.collection||t.prev&&this.prevColl;return e?e.parent:void 0},n.prototype.parents=function(){var t=this.parent();return t?[t].concat(t.parents()):[]},n.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},n.prototype.initToolbar=function(){var t=this.em,e=this,r=t&&t.getConfig().stylePrefix||"";if(!e.get("toolbar")&&t){var o=[];e.collection&&o.push({label:t.getIcon("arrowUp"),command:function(a){return a.runCommand("core:component-exit",{force:1})}}),e.get("draggable")&&o.push({attributes:{class:"".concat(r,"no-touch-actions"),draggable:!0},label:t.getIcon("move"),command:"tlb-move"}),e.get("copyable")&&o.push({label:t.getIcon("copy"),command:"tlb-clone"}),e.get("removable")&&o.push({label:t.getIcon("delete"),command:"tlb-delete"}),e.set("toolbar",o)}},n.prototype.__loadTraits=function(t,e){e===void 0&&(e={});var r=t||this.traits;if(!(r instanceof w0)){r=(0,J.isFunction)(r)?r(this):r;var o=new w0([],this.opt);o.setTarget(this),r.length&&o.add(r),this.set({traits:o},e)}return this},n.prototype.getTraits=function(){return this.__loadTraits(),Ea([],this.traits.models,!0)},n.prototype.setTraits=function(t){var e=(0,J.isArray)(t)?t:[t];return this.set({traits:e}),this.getTraits()},n.prototype.getTrait=function(t){return this.getTraits().filter(function(e){return e.get("id")===t||e.get("name")===t})[0]||null},n.prototype.updateTrait=function(t,e){var r,o=this.getTrait(t);return o&&o.set(e),(r=this.em)===null||r===void 0||r.trigger("component:toggled"),this},n.prototype.getTraitIndex=function(t){var e=this.getTrait(t);return e?this.traits.indexOf(e):-1},n.prototype.removeTrait=function(t){var e=this,r,o=(0,J.isArray)(t)?t:[t],a=o.map(function(c){return e.getTrait(c)}),s=this.traits,u=a.length?s.remove(a):[];return(r=this.em)===null||r===void 0||r.trigger("component:toggled"),(0,J.isArray)(u)?u:[u]},n.prototype.addTrait=function(t,e){var r;e===void 0&&(e={}),this.__loadTraits();var o=this.traits.add(t,e);return(r=this.em)===null||r===void 0||r.trigger("component:toggled"),(0,J.isArray)(o)?o:[o]},n.prototype.normalizeClasses=function(t){var e=[],r=this.em,o=r==null?void 0:r.Selectors;return o?t.models?Ea([],t.models,!0):(t.forEach(function(a){return e.push(o.add(a))}),e):[]},n.prototype.clone=function(t){var e;t===void 0&&(t={});var r=this.em,o=this.dataResolverWatchers.getProps(this.attributes),a=qn({},this.opt),s=this.getId(),u=r==null?void 0:r.Css;o.components=[],o.classes=[],o.traits=[],Vf(this)&&(t.symbol=!0),this.get("components").each(function(E,D){o.components[D]=E.clone(qn(qn({},t),{_inner:1}))}),this.get("traits").each(function(E,D){o.traits[D]=E.clone()}),this.get("classes").each(function(E,D){o.classes[D]=E.get("name")}),o.status="",a.collection=null,a.forCloning=!0;var c=new this.constructor(o,a),h="#".concat(c.getId()),v=u?u.getRules("#".concat(s)):[];v.forEach(function(E){var D=E.clone();D.set("selectors",[h]),u.getAll().add(D)}),c.set(ko,0);var m=ss(this),y=ua(this);if(!t.symbol&&(m||y))c.set(oa,0),c.set(ko,0);else if(m){var _=(e=ua(m))!==null&&e!==void 0?e:[];m.set(ko,Ea(Ea([],_,!0),[c],!1)),yv(c)}else t.symbol&&(Of(this)?(this.set(ko,Ea(Ea([],y,!0),[c],!1)),c.set(oa,this),yv(c)):t.symbolInv?(this.set(ko,[c]),c.set(oa,this),[this,c].map(function(E){return yv(E)})):(c.set(ko,[this]),[this,c].map(function(E){return yv(E)}),this.set(oa,c)));var C="component:clone";return r&&r.trigger(C,c),this.trigger(C,c),c},n.prototype.getName=function(t){t===void 0&&(t={});var e=this.em,r=this.attributes,o=r.type,a=r.tagName,s=r.name,u=o||a,c=o?"":a,h="domComponents.names.",v=s&&(e==null?void 0:e.t("".concat(h).concat(s))),m=c&&(e==null?void 0:e.t("".concat(h).concat(c))),y=e&&(e.t("".concat(h).concat(o))||e.t("".concat(h).concat(a))),_=this.get("custom-name");return(t.noCustom?"":_)||v||s||m||(0,Zt.capitalize)(c)||y||(0,Zt.capitalize)(u)},n.prototype.setName=function(t,e){e===void 0&&(e={}),this.set("custom-name",t,e)},n.prototype.getIcon=function(){var t=this.get("icon");return t?t+" ":""},n.prototype.toHTML=function(t){t===void 0&&(t={});var e=t.tag,r=e||this.get("tagName");delete t.tag;var o=this.__attrToString(t),a=o?" ".concat(o):"",s=this.getInnerHTML(t),u=!s&&this.get("void"),c="<".concat(r).concat(a).concat(u?"/":"",">").concat(s);return!u&&(c+="</".concat(r,">")),c},n.prototype.getInnerHTML=function(t){return this.__innerHTML(t)},n.prototype.__innerHTML=function(t){t===void 0&&(t={});var e=this.components();return e.length?e.map(function(r){return r.toHTML(t)}).join(""):this.content},n.prototype.__attrToString=function(t){t===void 0&&(t={});var e=[],r=t.attributes,o=this.getAttrToHTML(t);if(r&&((0,J.isFunction)(r)?o=r(this,o)||{}:(0,Zt.isObject)(r)&&(o=r)),t.withProps){var a=this.toJSON();(0,J.forEach)(a,function(v,m){var y=["classes","attributes","components"];m[0]!=="_"&&y.indexOf(m)<0&&(o["data-gjs-".concat(m)]=(0,J.isArray)(v)||(0,Zt.isObject)(v)?JSON.stringify(v):(0,J.isBoolean)(v)?"".concat(v):v)})}for(var s in o){var u=o[s];if(!(0,J.isUndefined)(u)&&u!==null)if((0,J.isBoolean)(u))u&&e.push(s);else{var c="";if(t.altQuoteAttr&&(0,J.isString)(u)&&u.indexOf('"')>=0)c="'".concat((0,Zt.escapeAltQuoteAttrValue)(u),"'");else{var h=(0,J.isString)(u)?(0,Zt.escapeAttrValue)(u):u;c='"'.concat(h,'"')}e.push("".concat(s,"=").concat(c))}}return e.join(" ")},n.prototype.getAttrToHTML=function(t){var e=this.getAttributes();return vf(this.em)&&(t==null?void 0:t.keepInlineStyle)!==!0&&delete e.style,e},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=i.prototype.toJSON.call(this,t,{attributes:this.getAttributes()});if(delete e.dataResolverWatchers,delete e.attributes.class,delete e.toolbar,delete e.traits,delete e.status,delete e.open,delete e._undoexc,delete e.delegate,this.collectionsStateMap&&Object.getOwnPropertyNames(this.collectionsStateMap).length>0&&(delete e[oa],delete e[Af],delete e[ko]),!t.fromUndo){var r=e[oa],o=e[ko];o&&(0,J.isArray)(o)&&(e[ko]=o.filter(function(a){return a}).map(function(a){return a.getId?a.getId():a})),r&&!(0,J.isString)(r)&&(e[oa]=r.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(e),e},n.prototype.getChangedProps=function(t){var e=t||j1.Model.prototype.toJSON.apply(this),r=(0,J.result)(this,"defaults");return(0,J.forEach)(r,function(o,a){["type"].indexOf(a)===-1&&e[a]===o&&delete e[a]}),(0,J.isEmpty)(e.type)&&delete e.type,(0,J.forEach)(["attributes","style"],function(o){(0,J.isEmpty)(r[o])&&(0,J.isEmpty)(e[o])&&delete e[o]}),(0,J.forEach)(["classes","components"],function(o){(!e[o]||(0,J.isEmpty)(r[o])&&!e[o].length)&&delete e[o]}),e},n.prototype.getId=function(){var t=this.get("attributes")||{},e=L8(this),r=e.shouldSync,o=e.itemId;return r&&(t.id=o),t.id||this.ccid||this.cid},n.prototype.setId=function(t,e){return this.addAttributes({id:t},e),this},n.prototype.getEl=function(t){var e=this.getView(t);return e&&e.el},n.prototype.getView=function(t){var e=this,r=e.view,o=e.views,a=e.em,s=t||(a==null?void 0:a.getCurrentFrameModel());return s&&(r=o.filter(function(u){return u.frameView===s.view})[0]),r},n.prototype.getCurrentView=function(){var t=this.em.getCurrentFrame(),e=t==null?void 0:t.model;return this.getView(e)},n.prototype.__getScriptProps=function(){var t=this.props(),e=this.get("script-props")||[];return e.reduce(function(r,o){return r[o]=t[o],r},{})},n.prototype.getScriptString=function(t){var e=this,r=t||this.get("script")||"";if(!r)return r;if(this.get("script-props"))r=r.toString().trim();else{if((0,J.isFunction)(r)){var o=r.toString().trim();o=o.slice(o.indexOf("{")+1,o.lastIndexOf("}")),r=o.trim()}var a=this.em.getConfig(),s=YO(a.tagVarStart||"{[ "),u=YO(a.tagVarEnd||" ]}"),c=new RegExp("".concat(s,"([\\w\\d-]*)").concat(u),"g");r=r.replace(c,function(h,v){e.scriptUpdated();var m=e.attributes[v]||"";return(0,J.isArray)(m)||typeof m=="object"?JSON.stringify(m):m})}return r},n.prototype.emitUpdate=function(t){for(var e,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var a=this.em,s=my+(t?":".concat(t):""),u=t&&this.get(t);t&&this.updated.apply(this,Ea([t,u,t&&this.previous(t)],r,!1)),this.trigger.apply(this,Ea([s],r,!1)),a&&a.trigger.apply(a,Ea([s,this],r,!1)),["components","classes"].indexOf(t)>=0&&this.__propSelfToParent({component:this,changed:(e={},e[t]=u,e),options:r[2]||r[1]||{}})},n.prototype.emitWithEditor=function(t,e,r){[this.em,this].forEach(function(o){return o==null?void 0:o.trigger(t,e,r)})},n.prototype.onAll=function(t){return(0,J.isFunction)(t)&&(t(this),this.components().forEach(function(e){return e.onAll(t)})),this},n.prototype.forEachChild=function(t){(0,J.isFunction)(t)&&this.components().forEach(function(e){t(e),e.forEachChild(t)})},n.prototype.remove=function(t){var e=this;t===void 0&&(t={});var r=this.em,o=this.collection,a=function(){o&&o.remove(e,qn({action:In.t.remove},t)),o||(e.components("",t),e.components().removeChildren(e,void 0,t))},s=qn({},t);return[this,r].map(function(u){return u.trigger(In.I.removeBefore,e,a,s)}),!s.abort&&a(),this},n.prototype.destroy=function(t){return this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.dataResolverWatchers.destroy(),this.__onDestroy(),i.prototype.destroy.call(this,t)},n.prototype.move=function(t,e){if(e===void 0&&(e={}),t){var r=e.at,o=this.index(),a=t===this.parent(),s=o===r||o===r-1;if(!a||!s){a&&r&&r>o&&(e.at=r-1);var u=In.t.move;this.remove({action:u,temporary:1}),t.append(this,qn({action:u},e)),this.emitUpdate()}}return this},n.prototype.isInstanceOf=function(t){var e,r,o=(r=(e=this.em)===null||e===void 0?void 0:e.Components.getType(t))===null||r===void 0?void 0:r.model;if(!o)return!1;var a=this.constructor.typeExtends;return this instanceof o||a.has(t)},n.prototype.isChildOf=function(t){for(var e=(0,J.isString)(t),r=this.parent();r;){if(e){if(r.isInstanceOf(t))return!0}else if(r===t)return!0;r=r.parent()}return!1},n.prototype.resetId=function(t){var e=this.em,r=this.getId();if(!r)return this;var o=n.createId(this);this.setId(o);var a=e==null?void 0:e.Css.getIdRule(r),s=a==null?void 0:a.get("selectors").at(0);return s==null||s.set("name",o),this},n.prototype._getStyleRule=function(t){var e=t===void 0?{}:t,r=e.id,o=this.em,a=r||this.getId();return o==null?void 0:o.Css.getIdRule(a)},n.prototype._getStyleSelector=function(t){var e=this._getStyleRule(t);return e==null?void 0:e.get("selectors").at(0)},n.prototype._moveInlineStyleToRule=function(){var t=this.get("style"),e=(0,J.isString)(t)&&t.length>0||(0,Zt.isObject)(t)&&Object.keys(t).length>0;vf(this.em)&&e&&this.addStyle((0,Zt.isObject)(t)?this.dataResolverWatchers.getValueOrResolver("styles",t):t,{avoidStore:!0,noUndo:!0})},n.prototype._idUpdated=function(t,e,r){if(r===void 0&&(r={}),!r.idUpdate){var o=this.ccid,a=(this.get("attributes")||{}).id,s=(this.previous("attributes")||{}).id||o,u=n.getList(this);if(u[a]||!a&&s)return this.setId(s,{idUpdate:!0});delete u[s],u[a]=this,this.ccid=a;var c=this._getStyleSelector({id:s});c&&c.set({name:a,label:a})}},n.getDefaults=function(){return(0,J.result)(this.prototype,"defaults")},n.isComponent=function(t,e){return{tagName:(0,Zt.toLowerCase)(t.tagName)}},n.ensureInList=function(t){var e=n.getList(t),r=t.getId(),o=e[r];if(!o)e[r]=t;else if(o!==t){var a=n.getIncrementId(r,e);t.setId(a),e[a]=t}t.components().forEach(function(s){return n.ensureInList(s)})},n.createId=function(t,e){e===void 0&&(e={});var r=n.getList(t),o=e.idMap,a=o===void 0?{}:o,s=t.get("attributes").id,u;return s?(u=n.getIncrementId(s,r,e),t.setId(u),s!==u&&(a[s]=u)):u=n.getNewId(r),r[u]=t,u},n.getNewId=function(t){for(var e=Object.keys(t).length,r=e.toString().length+2,o=(Math.random()+1.1).toString(36).slice(-r),a="i".concat(o);t[a];)a=n.getNewId(t);return a},n.getIncrementId=function(t,e,r){r===void 0&&(r={});var o=r.keepIds,a=o===void 0?[]:o,s=1,u=t;if(a.indexOf(t)<0)for(;e[u];)s++,u="".concat(t,"-").concat(s);return u},n.getList=function(t){var e,r=t.em,o=r==null?void 0:r.Components;return(e=o==null?void 0:o.componentsById)!==null&&e!==void 0?e:{}},n.checkId=function(t,e,r,o){e===void 0&&(e=[]),r===void 0&&(r={}),o===void 0&&(o={}),o.updatedIds=o.updatedIds||{};var a=(0,J.isArray)(t)?t:[t],s=o.keepIds,u=s===void 0?[]:s,c=o.idMap,h=c===void 0?{}:c,v=o.updatedIds;return a.forEach(function(m){m.attributes;var y=m.attributes,_=y===void 0?{}:y,C=m.components,E=_.id;if(E&&r[E]&&u.indexOf(E)<0){var D=n.getIncrementId(E,r);v[E]=v[E]?Ea(Ea([],v[E],!0),[m],!1):[m],h[E]=D,_.id=D,(0,J.isArray)(e)&&e.forEach(function(F){var V=F.selectors;V.forEach(function(K,Z){K==="#".concat(E)&&(V[Z]="#".concat(D))})})}C&&n.checkId(C,e,r,o)}),{updatedIds:o.updatedIds}},n.typeExtends=new Set,n}(ID);const Wr=s7;var l7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),x0=function(){return x0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},x0.apply(this,arguments)},Mh="head",u7=["title","style","base","link","meta","script","noscript"],c7=function(i){l7(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return x0(x0({},i.prototype.defaults),{type:Mh,tagName:Mh,draggable:!1,highlightable:!1,droppable:function(t){var e=t.tagName;return!e||u7.includes((0,Zt.toLowerCase)(e))}})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Zt.toLowerCase)(t.tagName)===Mh},n}(Wr);const f7=c7;var d7=function(){function i(n,t){n===void 0&&(n=50);var e;this.dragging=!1,this.lastMaxHeight=0,this.zoom=1,this.rectIsInScrollIframe=!1,this.autoscrollLimit=n,this.lastMaxHeight=(e=t==null?void 0:t.lastMaxHeight)!==null&&e!==void 0?e:0,this.onScroll=t==null?void 0:t.onScroll,this.rectIsInScrollIframe=!!(t!=null&&t.rectIsInScrollIframe),(0,J.bindAll)(this,"start","autoscroll","updateClientY","stop")}return i.prototype.start=function(n,t,e){var r=this;this.eventEl=n,this.scrollEl=t,this.lastMaxHeight=(e==null?void 0:e.lastMaxHeight)||Number.POSITIVE_INFINITY,this.zoom=(e==null?void 0:e.zoom)||1,this.ignoredElement=e==null?void 0:e.ignoredElement,setTimeout(function(){r.toggleAutoscrollFx(!0),requestAnimationFrame(r.autoscroll)},0)},i.prototype.autoscroll=function(){var n=this,t,e,r=this.scrollEl;if(!(!this.dragging||!r)){if(this.lastClientY===void 0){setTimeout(function(){requestAnimationFrame(n.autoscroll)},50);return}var o=(t=this.lastClientY)!==null&&t!==void 0?t:0,a=this.autoscrollLimit,s=this.getEventElHeight(),u=s-a,c=0;o<a&&(c+=o-a),o>u&&(c+=o-u);var h=this.getElScrollTop(r);c=Math.min(c,this.lastMaxHeight-h),c=Math.max(c,-h),c!==0&&(r.scrollBy({top:c,behavior:"auto"}),(e=this.onScroll)===null||e===void 0||e.call(this)),requestAnimationFrame(this.autoscroll)}},i.prototype.getEventElHeight=function(){var n=this.eventEl;if(!n)return 0;var t=n.getBoundingClientRect();return t.height},i.prototype.updateClientY=function(n){var t=n.target;if(!(this.ignoredElement&&this.ignoredElement.contains(t))){var e=this.scrollEl;n.preventDefault();var r=this.rectIsInScrollIframe?0:this.getElScrollTop(e);this.lastClientY=(0,Ce.G2)(n).clientY*this.zoom-r}},i.prototype.getElScrollTop=function(n){return(n instanceof HTMLElement?n.scrollTop:n==null?void 0:n.scrollY)||0},i.prototype.toggleAutoscrollFx=function(n){this.dragging=n;var t=this.eventEl;if(t){var e=n?"on":"off",r={on:Ce.on,off:Ce.AU};r[e](t,"mousemove dragover",this.updateClientY),r[e](t,"mouseup",this.stop)}},i.prototype.stop=function(){this.toggleAutoscrollFx(!1),this.lastClientY=void 0,this.ignoredElement=void 0},i}();const qD=d7;var h7=On(1447),p7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),v7=function(i){p7(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.canMove=function(t,e){var r=this,o=this.getRealIndex(e),a=t._dragSource,s=a.model,u=a.content,c=a.dragDef,h=!s||!this.isSourceSameSymbol(s),v=((0,J.isFunction)(u)?c:u)||t.model;return Array.isArray(v)?h&&v.every(function(m,y){return r.canMoveSingleContent(m,o+y)}):h&&this.canMoveSingleContent(v,o)},n.prototype.canMoveSingleContent=function(t,e){return this.model.em.Components.canMove(this.model,t,e).result},n.prototype.addChildAt=function(t,e){var r=t._dragSource,o=r.content,a=this.isTextNode()&&t.isTextable(),s=(0,J.isFunction)(o)?o():o;return Array.isArray(s)?this.addMultipleChildren(s,e,a):this.addSingleChild(s,e,a)},n.prototype.addSingleChild=function(t,e,r){var o,a,s,u,c;return r?c=(u=(s=(a=(o=this.model)===null||o===void 0?void 0:o.getView)===null||a===void 0?void 0:a.call(o))===null||s===void 0?void 0:s.insertComponent)===null||u===void 0?void 0:u.call(s,t,{action:"add-component"}):c=this.model.components().add(t,{at:this.getRealIndex(e),action:"add-component"}),new this.constructor(c)},n.prototype.addMultipleChildren=function(t,e,r){var o=this,a;return t.forEach(function(s,u){a=o.addSingleChild(s,e+u,r)}),a},n.prototype.isSourceSameSymbol=function(t){if(Ds(this.model)){var e=mg(this.model),r=Of(e)?e:ss(e);if(r===t)return!0}return!1},Object.defineProperty(n.prototype,"content",{set:function(t){this._dragSource.content=t},enumerable:!1,configurable:!0}),n}(h7.A);const KD=v7;var Ff=On(8433),l_=function(){return l_=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},l_.apply(this,arguments)},g7=function(){function i(n,t){var e=this;this.em=n,this.canvas=n.Canvas;var r=t||this.canvas.getFrames().map(function(a){return a.getComponent().getEl()}),o=Array.isArray(r)?r:[r];this.el=o[0],this.counter=0,(0,J.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave","handleDragEnd"),o.forEach(function(a){return e.toggleEffects(a,!0)})}return i.prototype.toggleEffects=function(n,t){var e={on:Ce.on,off:Ce.AU},r=t?"on":"off";e[r](n,"dragenter",this.handleDragEnter),e[r](n,"dragover",this.handleDragOver),e[r](n,"drop",this.handleDrop),e[r](n,"dragleave",this.handleDragLeave)},i.prototype.__customTglEff=function(n){var t,e=n?Ce.on:Ce.AU,r=this.el.ownerDocument,o=(t=r.defaultView)===null||t===void 0?void 0:t.frameElement,a=function(s){return{legacyOnStartSort:function(){(0,Ce.on)(o,"pointermove",s.onMove)},legacyOnEnd:function(){(0,Ce.AU)(o,"pointermove",s.onMove)},customTarget:function(u){var c=u.event;return r.elementFromPoint(c.clientX,c.clientY)}}};this.getSorterOptions=n?a:void 0,e(o,"pointerenter",this.handleDragEnter),e(o,"pointermove",this.handleDragOver),e(document,"pointerup",this.handleDrop),e(o,"pointerout",this.handleDragLeave)},i.prototype.startCustom=function(){this.__customTglEff(!0)},i.prototype.endCustom=function(n){this.over?this.endDrop(n):this.__customTglEff(!1)},i.prototype.endDrop=function(n,t){var e=this,r=e.em,o=e.dragStop;this.counter=0,o&&o(n||!this.over),this.__customTglEff(!1),r.trigger("canvas:dragend",t)},i.prototype.handleDragLeave=function(n){this.updateCounter(-1,n)},i.prototype.updateCounter=function(n,t){this.counter+=n,this.counter===0&&this.endDrop(!0,t)},i.prototype.handleDragEnter=function(n){var t=this,e,r,o=this,a=o.em,s=o.canvas,u=n.dataTransfer,c=a.get("dragSource");if(!(!(c!=null&&c.content)&&!s.getConfig().allowExternalDrop)&&(this.updateCounter(1,n),!this.over)){this.over=!0;var h=a.Utils,v=(c==null?void 0:c.content)||"<br>",m;if(a.stopDefault(),a.inAbsoluteMode()){var y=a.Components.getWrapper(),_=y.append({})[0],C=a.Commands.run("core:component-drag",{event:n,guidesInfo:1,center:1,target:_,onEnd:function(ct,ht,st){var et=st.cancelled,nt;if(!et&&v){nt=y.append(v)[0];var it=s.getOffset(),$=_.getStyle(),ft=$.top,lt=$.left,St=$.position,U=(0,Ce.Xy)(ct.target),_t=parseInt("".concat(parseFloat(lt)+U.x-it.left),10),Ot=parseInt("".concat(parseFloat(ft)+U.y-it.top),10);nt.addStyle({left:_t+"px",top:Ot+"px",position:St})}t.handleDragEnd(nt,u),_.remove()}});m=function(ct){return C.stop(n,{cancel:ct})},this.setAbsoluteDragContent=function(ct){return v=ct}}else{var E=new h.ComponentSorter({em:a,treeClass:KD,containerContext:{container:this.el,containerSel:"*",itemSel:"*",pfx:"gjs-",placeholderElement:s.getPlacerEl(),document:this.el.ownerDocument},dragBehavior:{dragDirection:Ff.A.BothDirections,nested:!0},positionOptions:{windowMargin:1,canvasRelative:!0},eventHandlers:{legacyOnEndMove:this.handleDragEnd}}),D=(e=this.getSorterOptions)===null||e===void 0?void 0:e.call(this,E);D&&(E.eventHandlers.legacyOnStartSort=D.legacyOnStart,E.eventHandlers.legacyOnEnd=D.legacyOnEnd,E.containerContext.customTarget=D.customTarget);var F=a.Components.getShallowWrapper(),V=F==null?void 0:F.append(v,{temporary:!0})[0],K=V==null?void 0:V.getEl(),Z=[{element:K,dragSource:l_({model:V},c)}];E.startSort(Z),this.sorter=E,this.draggedNode=(r=E.sourceNodes)===null||r===void 0?void 0:r[0],m=function(ct){ct?E.cancelDrag():E.endDrag()}}this.dragStop=m,a.trigger("canvas:dragenter",u,v)}},i.prototype.handleDragEnd=function(n,t){var e=this.em;this.over=!1,n&&(e.set("dragResult",n),e.trigger("canvas:drop",t,n)),e.runDefault({preserveSelected:1})},i.prototype.handleDragOver=function(n){n.preventDefault(),this.em.trigger("canvas:dragover",n)},i.prototype.handleDrop=function(n){var t;n.preventDefault();var e=n.dataTransfer,r=this.getContentByData(e).content||"";this.draggedNode&&(this.draggedNode.content=r),(t=this.setAbsoluteDragContent)===null||t===void 0||t.call(this,r),this.endDrop(!r,n)},i.prototype.getContentByData=function(n){var t=this.em,e=(n==null?void 0:n.types)||[],r=(n==null?void 0:n.files)||[],o=t.get("dragSource"),a=(n==null?void 0:n.getData("text"))||"";if(r.length){a=[];for(var s=0;s<r.length;s++){var u=r[s],c=u.type.split("/")[0];c=="image"&&a.push({type:c,file:u,attributes:{alt:u.name}})}}else if(o!=null&&o.content)a=o.content;else if((0,J.indexOf)(e,"text/html")>=0)a=n&&n.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,J.indexOf)(e,"text/uri-list")>=0)a={type:"link",attributes:{href:a},content:a};else if((0,J.indexOf)(e,"text/json")>=0){var h=n&&n.getData("text/json");h&&(a=JSON.parse(h))}else e.length===1&&e[0]==="text/plain"&&(a="<div>".concat(a,"</div>"));var v={content:a,setContent:function(m){v.content=m}};return t.trigger("canvas:dragdata",n,v),v},i}();const m7=g7;var y7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ja=function(){return Ja=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Ja.apply(this,arguments)},b7=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},w7=function(i){y7(n,i);function n(t,e){var r=i.call(this,{model:t})||this;r.dragging=!1,r.loaded=!1,r.lastMaxHeight=0,r.tools={},(0,J.bindAll)(r,"startAutoscroll","stopAutoscroll","_emitUpdate");var o=r.el;r.module._config=Ja(Ja({},r.config||{}),{frameView:r}),r.frameWrapView=e,r.showGlobalTools=(0,J.debounce)(r.showGlobalTools.bind(r),50);var a=r.getCanvasModel();return r.listenTo(t,"change:head",r.updateHead),r.listenTo(a,"change:styles",r.renderStyles),t.view=r,(0,Zt.setViewEl)(o,r),r.autoScroller=new qD(r.config.autoscrollLimit,{rectIsInScrollIframe:!0,onScroll:function(){var s=r.getGlobalToolsEl();s.style.opacity="0",r.showGlobalTools(),r.em.Canvas.spots.refreshDbn()}}),r}return Object.defineProperty(n.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),n.prototype.getBoxRect=function(){var t=this,e=t.el,r=t.module,o=r.getCanvasView(),a=r.getCoords(),s=e.getBoundingClientRect(),u=o.getCanvasOffset(),c=o.getViewportDelta(),h=r.getZoomMultiplier(),v=(s.x-u.left-c.x-a.x)*h,m=(s.y-u.top-c.y-a.y)*h,y=s.width*h,_=s.height*h;return{x:v,y:m,width:y,height:_}},n.prototype.updateHead=function(){var t=this.model,e=this.getHead(),r=[],o=[],a=t.head,s=t.previous("head"),u=function(h){return h===void 0&&(h={}),Object.keys(h).sort().map(function(v){return"[".concat(v,'="').concat(h[v],'"]')}).join("")},c=function(h,v,m){h.forEach(function(y){var _=y.tag,C=y.attributes,E=v.some(function(D){return D.tag===_&&u(D.attributes)===u(C)});!E&&m.push(y)})};c(a,s,o),c(s,a,r),r.forEach(function(h){var v,m=e.querySelector("".concat(h.tag).concat(u(h.attributes)));(v=m==null?void 0:m.parentNode)===null||v===void 0||v.removeChild(m)}),(0,Ce.af)(e,o)},n.prototype.getEl=function(){return this.el},n.prototype.getCanvasModel=function(){var t;return(t=this===null||this===void 0?void 0:this.em.Canvas)===null||t===void 0?void 0:t.getModel()},n.prototype.getWindow=function(){return this.getEl().contentWindow},n.prototype.getDoc=function(){return this.getEl().contentDocument},n.prototype.getHead=function(){return this.getDoc().querySelector("head")},n.prototype.getBody=function(){return this.getDoc().querySelector("body")},n.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},n.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,Ce.a_)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},n.prototype.getToolsEl=function(){var t;return(t=this.frameWrapView)===null||t===void 0?void 0:t.elTools},n.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},n.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},n.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},n.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},n.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},n.prototype.getOffsetRect=function(){var t=this.el,e=this.getBody(),r=e.scrollTop,o=e.scrollLeft,a=t.offsetHeight,s=t.offsetWidth;return{top:t.offsetTop,left:t.offsetLeft,height:a,width:s,scrollTop:r,scrollLeft:o,scrollBottom:r+a,scrollRight:o+s}},n.prototype._getTool=function(t){var e=this.tools,r=this.getToolsEl();return e[t]||(e[t]=r.querySelector(t)),e[t]},n.prototype.remove=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._toggleEffects(!1),this.tools={},(t=this.wrapper)===null||t===void 0||t.remove(),ls.prototype.remove.apply(this,e),this},n.prototype.startAutoscroll=function(){this.autoScroller.start(this.el,this.getWindow(),{lastMaxHeight:this.getWrapper().offsetHeight-this.el.offsetHeight,zoom:this.em.getZoomDecimal(),ignoredElement:this.em.Canvas.getSpotsEl()})},n.prototype.stopAutoscroll=function(){this.autoScroller.stop()},n.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},n.prototype.render=function(){var t=this,e=t.$el,r=t.ppfx,o=t.em;return e.attr({class:"".concat(r,"frame")}),this.renderScripts(),o.trigger("frame:render",this),this},n.prototype.renderScripts=function(){var t=this,e=this,r=e.el,o=e.model,a=e.em,s="frame:load",u={el:r,model:o,view:this},c=this.getCanvasModel(),h=function(v){var m;if(v.length>0){var y=v.shift(),_=(0,Ce.a_)("script",Ja({type:"text/javascript"},(0,J.isString)(y)?{src:y}:y));(m=r.contentDocument)===null||m===void 0||m.head.appendChild(_),_.hasAttribute("nomodule")&&"noModule"in HTMLScriptElement.prototype?h(v):_.onerror=_.onload=h.bind(null,v)}else a==null||a.trigger(zv.frameLoadHead,u),t.renderBody(),a==null||a.trigger(zv.frameLoadBody,u),a==null||a.trigger(s,u)};r.onload=function(){var v=t.config.frameContent;if(v){var m=t.getDoc();m.open(),m.write(v),m.close()}u.window=t.getWindow(),a==null||a.trigger("".concat(s,":before"),u),a==null||a.trigger(zv.frameLoad,u),t.renderHead(),h(b7([],c.get("scripts"),!0))}},n.prototype.renderStyles=function(t){t===void 0&&(t={});var e=this.getHead(),r=this.getCanvasModel(),o=function(v){return v===void 0&&(v=[]),v.map(function(m){return{tag:"link",attributes:Ja({rel:"stylesheet"},(0,J.isString)(m)?{href:m}:m)}})},a=o(t.prev||r.previous("styles")),s=o(r==null?void 0:r.get("styles")),u=[],c=[],h=function(v,m,y){v.forEach(function(_){var C=_.attributes.href,E=m.some(function(D){return D.attributes.href===C});!E&&y.push(_)})};h(s,a,c),h(a,s,u),u.forEach(function(v){var m,y=e.querySelector('link[href="'.concat(v.attributes.href,'"]'));(m=y==null?void 0:y.parentNode)===null||m===void 0||m.removeChild(y)}),(0,Ce.af)(e,c)},n.prototype.renderHead=function(){var t,e=this,r=e.model,o=e.em,a=r.root,s=(t=o==null?void 0:o.Components)===null||t===void 0?void 0:t.getType(Mh).view;s&&(this.headView=new s({el:this.getHead(),model:a.head,config:Ja(Ja({},a.config),{frameView:this})}).render())},n.prototype.renderBody=function(){var t=this,e,r=this,o=r.config,a=r.em,s=r.model,u=r.ppfx,c=this.getBody(),h=this.getWindow(),v=s.hasAutoHeight(),m=a.config;h._isEditor=!0,this.renderStyles({prev:[]});var y="#ffca6f";(0,Ce.BC)(c,`<style>
      `.concat(m.baseCss||o.frameStyle||"",`

      `).concat(v?"body { overflow: hidden }":"",`

      [data-gjs-type="wrapper"] {
        `).concat(v?"":"min-height: 100vh;",`
        padding-top: 0.001em;
      }

      .`).concat(u,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(u,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(u,`selected-parent {
        outline: 2px solid `).concat(y,` !important
      }

      .`).concat(u,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(u,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(u,`no-pointer {
        pointer-events: none;
      }

      .`).concat(u,`pointer-init {
        pointer-events: initial;
      }

      .`).concat(u,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(u,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(u,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(u,`is__grabbing,
      .`).concat(u,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat(m.canvasCss||"",`
      `).concat(m.protectedCss||"",`
    </style>`));var _=s.root,C=(((e=a==null?void 0:a.Components)===null||e===void 0?void 0:e.getType("wrapper"))||{}).view;C&&((0,J.isFunction)(o.customRenderer)?o.customRenderer({editor:a.Editor,frame:s,window:h,frameView:this,onMount:function(E){t.wrapper=E,t._onRootMount(E)}}):(this.wrapper=new C({model:_,config:Ja(Ja({},_.config),{em:a,frameView:this})}).render(),this._onRootMount(this.wrapper)))},n.prototype._onRootMount=function(t){var e=this,r,o=this,a=o.config,s=o.em,u=o.model,c=this.getDoc(),h=c.body;(0,Ce.BC)(h,t.el),(0,Ce.BC)(h,new n_({collection:u.getStyles(),config:Ja(Ja({},s.Css.getConfig()),{frameView:this})}).render().el),(0,Ce.BC)(h,this.getJsContainer()),(0,Ce.on)(h,"click",function(v){var m;return v&&((m=v.target)===null||m===void 0?void 0:m.tagName)=="A"&&v.preventDefault()}),(0,Ce.on)(h,"submit",function(v){return v&&v.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent",opts:{passive:!a.infiniteCanvas}}].forEach(function(v){return v.event.split(" ").forEach(function(m){c.addEventListener(m,function(y){return e.el.dispatchEvent((0,Ce.yL)(y,v.class))},v.opts)})}),this._toggleEffects(!0),(0,Zt.hasDnd)(s)&&(this.droppable=new m7(s,(r=this.wrapper)===null||r===void 0?void 0:r.el)),this.loaded=!0,u.trigger("loaded")},n.prototype._toggleEffects=function(t){var e=t?Ce.on:Ce.AU,r=this.getWindow();r&&e(r,"".concat(Ce.D8," resize"),this._emitUpdate)},n.prototype._emitUpdate=function(){this.model._emitUpdated()},n}(ls);const x7=w7;var $D=On(9966),S7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),dh=function(){return dh=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},dh.apply(this,arguments)},_7=function(i){S7(n,i);function n(t,e){var r=i.call(this,{model:t})||this;return(0,J.bindAll)(r,"onScroll","frameLoaded","updateOffset","remove","startDrag"),dh(dh({},t.config),{frameWrapView:r}),r.cv=e,r.frame=new x7(t,r),r.classAnim="".concat(r.ppfx,"frame-wrapper--anim"),r.updateOffset=(0,J.debounce)(r.updateOffset.bind(r),0),r.updateSize=(0,J.debounce)(r.updateSize.bind(r),0),r.listenTo(t,"loaded",r.frameLoaded),r.listenTo(t,"change:x change:y",r.updatePos),r.listenTo(t,"change:width change:height",r.updateSize),r.listenTo(t,"destroy remove",r.remove),r.updatePos(),r.setupDragger(),r}return n.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},n.prototype.setupDragger=function(){var t=this,e=this,r=e.module,o=e.model,a,s,u,c=function(h){r.toggleFramesEvents(h)};this.dragger=new $D.A({onStart:function(){var h=o.attributes,v=h.x,m=h.y;u=t.em.getZoomMultiplier(),a=v,s=m,c(!1)},onEnd:function(){return c(!0)},setPosition:function(h){o.set({x:a+h.x*u,y:s+h.y*u})}})},n.prototype.startDrag=function(t){var e;t&&((e=this.dragger)===null||e===void 0||e.start(t))},n.prototype.__clear=function(t){var e=this.frame;e&&e.remove(t),(0,Ce.YZ)(this.elTools)},n.prototype.remove=function(t){var e=this,r;return(r=this.sizeObserver)===null||r===void 0||r.disconnect(),this.__clear(t),ls.prototype.remove.apply(this,t),["frame","dragger","cv","elTools"].forEach(function(o){return e[o]=0}),this},n.prototype.updateOffset=function(){var t,e=this,r=e.em,o=e.$el,a=e.frame;!r||r.destroyed||(r.runDefault({preserveSelected:1}),o.removeClass(this.classAnim),(t=a==null?void 0:a.model)===null||t===void 0||t._emitUpdated())},n.prototype.updatePos=function(t){var e=this,r=e.model,o=e.el,a=r.attributes,s=a.x,u=a.y,c=o.style;this.frame.rect=void 0,c.left=isNaN(s)?s:"".concat(s,"px"),c.top=isNaN(u)?u:"".concat(u,"px"),t&&this.updateOffset()},n.prototype.updateSize=function(){this.updateDim()},n.prototype.updateDim=function(){var t=this,e=t.em,r=t.el,o=t.$el,a=t.model,s=t.classAnim,u=t.frame;if(u){u.rect=void 0,o.addClass(s);var c=this.__handleSize(),h=c.noChanges,v=c.width,m=c.height;((0,J.isNull)(v)||(0,J.isNull)(m))&&a.set(dh(dh({},v?{}:{width:r.offsetWidth}),m?{}:{height:r.offsetHeight}),{silent:1}),e.stopDefault({preserveSelected:1}),h?this.updateOffset():setTimeout(this.updateOffset,350)}},n.prototype.onScroll=function(){var t=this,e=t.frame,r=t.em;r.trigger("frame:scroll",{frame:e,body:e.getBody(),target:e.getWindow()})},n.prototype.frameLoaded=function(){var t=this,e=t.frame;t.config,e.getWindow().onscroll=this.onScroll,this.updateDim()},n.prototype.__handleSize=function(){var t,e="px",r=this,o=r.model,a=r.el,s=a.style,u=o.attributes,c=u.width,h=u.height,v=s.width||"",m=s.height||"",y=c||"",_=h||"",C=v==y&&m==_,E=(0,J.isNumber)(y)?"".concat(y).concat(e):y,D=(0,J.isNumber)(_)?"".concat(_).concat(e):_;if(s.width=E,(t=this.sizeObserver)===null||t===void 0||t.disconnect(),o.hasAutoHeight()){var F=this.frame.el,V=F.contentDocument;if(V){var K=new ResizeObserver(function(){requestAnimationFrame(function(){var Z=parseFloat(o.get("minHeight"))||0,ct=Math.max(V.body.scrollHeight,Z);s.height="".concat(ct,"px")})});K.observe(V.body),this.sizeObserver=K}}else s.height=D,delete this.sizeObserver;return{noChanges:C,width:c,height:h,newW:y,newH:_}},n.prototype.render=function(){var t=this,e=t.frame,r=t.$el,o=t.ppfx,a=t.cv,s=t.model,u=t.el,c=s.attributes.onRender;this.__clear(),this.__handleSize(),e.render(),r.empty().attr({class:"".concat(o,"frame-wrapper")}).append(`
      <div class="`.concat(o,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(o,`frame-wrapper__name" data-action-move>
          `).concat(s.get("name")||"",`
        </div>
        <div class="`).concat(o,`frame-wrapper__top-r">
          <div class="`).concat(o,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(o,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(o,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(o,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(e.el);var h=(0,Ce.a_)("div",{class:"".concat(o,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(o,`highlighter" data-hl></div>
      <div class="`).concat(o,`badge" data-badge></div>
      <div class="`).concat(o,`placeholder">
        <div class="`).concat(o,`placeholder-int"></div>
      </div>
      <div class="`).concat(o,`ghost"></div>
      <div class="`).concat(o,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(o,`resizer"></div>
      <div class="`).concat(o,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(o,`offset-fixed-v"></div>
    `));this.elTools=h;var v=a==null?void 0:a.toolsWrapper;return v&&v.appendChild(h),c&&c({el:u,elTop:u.querySelector("[data-frame-top]"),elRight:u.querySelector("[data-frame-right]"),elBottom:u.querySelector("[data-frame-bottom]"),elLeft:u.querySelector("[data-frame-left]"),frame:s,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},n}(ls);const C7=_7;var T7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),E7=function(i){T7(n,i);function n(t,e){t===void 0&&(t={});var r=i.call(this,t,!0)||this;return r.listenTo(r.collection,"reset",r.render),r.canvasView=e.canvasView,r._module=e.module,r}return n.prototype.onRemoveBefore=function(t,e){e===void 0&&(e={}),t.forEach(function(r){return r.remove(e)})},n.prototype.onRender=function(){var t=this,e=t.$el,r=t.ppfx;e.attr({class:"".concat(r,"frames")})},n.prototype.clearItems=function(){var t=this.viewCollection||[];t.forEach(function(e){return e.remove()}),this.viewCollection=[]},n.prototype.renderView=function(t,e){return new C7(t,this.canvasView)},n}(n8);const O7=E7;var A7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),S0=function(){return S0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},S0.apply(this,arguments)},k7=function(i){A7(n,i);function n(t){var e=i.call(this,{model:t})||this;e.ready=!1,(0,J.bindAll)(e,"clearOff","onKeyPress","onWheel","onPointer");var r=e,o=r.em,a=r.pfx,s=r.ppfx,u=e.module.events;return e.className="".concat(a,"canvas ").concat(s,"no-touch-actions").concat(o.config.customUI?"":" ".concat(a,"canvas-bg")),e.clsUnscale="".concat(a,"unscale"),e._initFrames(),e.listenTo(o,u.refresh,e.clearOff),e.listenTo(o,"component:selected",e.checkSelected),e.listenTo(o,"".concat(u.coords," ").concat(u.zoom),e.updateFrames),e.listenTo(t,"change:frames",e._onFramesUpdate),e.toggleListeners(!0),e}return n.prototype.template=function(){var t=this.pfx;return`
      <div class="`.concat(t,`canvas__frames" data-frames>
        <div class="`).concat(t,`canvas__spots" data-spots></div>
      </div>
      <div id="`).concat(t,'tools" class="').concat(t,`canvas__tools" data-tools></div>
      <style data-canvas-style></style>
    `)},n.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},n.prototype._initFrames=function(){var t=this,e=t.frames,r=t.model,o=t.config,a=t.em,s=r.frames;a.set("readyCanvas",0),s.once("loaded:all",function(){return a.set("readyCanvas",1)}),e==null||e.remove(),this.frames=new O7({collection:s},S0(S0({},o),{canvasView:this}))},n.prototype.checkSelected=function(t,e){var r;e===void 0&&(e={});var o=e.scroll,a=this.em.getCurrentFrame();o&&((r=t.views)===null||r===void 0||r.forEach(function(s){s.frameView===a&&s.scrollIntoView(o)}))},n.prototype.remove=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return clearTimeout(this.timerZoom),(t=this.frames)===null||t===void 0||t.remove(),this.frames=void 0,ls.prototype.remove.apply(this,e),this.toggleListeners(!1),this},n.prototype.preventDefault=function(t){var e;t&&(t.preventDefault(),(e=t._parentEvent)===null||e===void 0||e.preventDefault())},n.prototype.toggleListeners=function(t){var e=this,r=e.el,o=e.config,a=t?Ce.on:Ce.AU;a(document,"keypress",this.onKeyPress),a(window,"scroll resize",this.clearOff),a(r,"wheel",this.onWheel,{passive:!o.infiniteCanvas}),a(r,"pointermove",this.onPointer)},n.prototype.screenToWorld=function(t,e){var r=this.module,o=r.getCoords(),a=r.getZoomMultiplier(),s=this.getViewportDelta();return{x:(t-o.x-s.x)*a,y:(e-o.y-s.y)*a}},n.prototype.onPointer=function(t){if(this.config.infiniteCanvas){var e=this.getCanvasOffset(),r=(0,Ce.Xy)(),o={x:t.clientX-e.left+r.x,y:t.clientY-e.top+r.y};if(t._parentEvent){var a=t.target.getBoundingClientRect(),s=this.module.getZoomDecimal();o.x=a.left-e.left+r.x+t.clientX*s,o.y=a.top-e.top+r.y+t.clientY*s}this.model.set({pointerScreen:o,pointer:this.screenToWorld(o.x,o.y)})}},n.prototype.onKeyPress=function(t){var e=this.em,r=(0,Ce.Ch)(t);r===" "&&e.getZoomDecimal()!==1&&!e.Canvas.isInputFocused()&&(this.preventDefault(t),e.Editor.runCommand("core:canvas-move"))},n.prototype.onWheel=function(t){var e=this,r=e.module,o=e.config;if(o.infiniteCanvas){this.preventDefault(t);var a=t.deltaX,s=t.deltaY,u=r.getZoomDecimal(),c=(0,Ce.rp)(t),h=r.getCoords();if(c){var v=u-s*u*.01;r.setZoom(v*100);var m=this.model.getPointerCoords(ye.x2.Screen),y=this.getCanvasOffset(),_=m.x-y.width/2,C=m.y-y.height/2,E=v/u,D=_-(_-h.x)*E,F=C-(C-h.y)*E;r.setCoords(D,F)}else this.onPointer(t),r.setCoords(h.x-a,h.y-s)}},n.prototype.updateFrames=function(t){var e=this.em,r=this.toolsWrapper,o={preserveSelected:1};this.updateFramesArea(),this.clearOff(),r.style.display="none",e.trigger("canvas:update",t),clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){e.stopDefault(o),e.runDefault(o),r.style.display=""},300)},n.prototype.updateFramesArea=function(){var t=this,e=t.framesArea,r=t.model,o=t.module,a=t.cvStyle,s=t.clsUnscale,u=o.getZoomMultiplier();if(e){var c=r.attributes,h=c.x,v=c.y,m=o.getZoomDecimal();e.style.transform="scale(".concat(m,") translate(").concat(h*u,"px, ").concat(v*u,"px)")}a&&(a.innerHTML=`
        .`.concat(s," { scale: ").concat(u,` }
      `))},n.prototype.fitViewport=function(t){var e,r,o;t===void 0&&(t={});var a=this,s=a.em,u=a.module,c=a.model;this.clearOff();var h=this.getCanvasOffset(),v=t.el,m=v&&((e=(0,Zt.getComponentView)(v))===null||e===void 0?void 0:e.frameView),y=m?m.model:t.frame||s.getCurrentFrameModel()||c.frames.at(0),_=y.attributes,C=_.x,E=_.y,D={x:C??0,y:E??0,width:y.width,height:y.height};if(v){var F=this.getElBoxRect(v);D.x=D.x+F.x,D.y=D.y+F.y,D.width=F.width,D.height=F.height}var V=t.ignoreHeight,K=(r=t.gap)!==null&&r!==void 0?r:0,Z=(0,J.isNumber)(K),ct=Z?K:K.x,ht=Z?K:K.y,st=D.width+ct*2,et=D.height+ht*2,nt=h.width,it=h.height,$=nt/st,ft=it/et,lt=V?$:Math.min($,ft),St=lt*100,U=(o=(0,J.isFunction)(t.zoom)?t.zoom(St):t.zoom)!==null&&o!==void 0?o:St;u.setZoom(U,{from:"fitViewport"});var _t=-D.x+(y.width>=nt?nt/2-st/2:-ct),Ot=-D.y+it/2-et/2,zt=u.getZoomDecimal(),pt={x:(_t+ct)*zt,y:(Ot+ht)*zt};if(V){var Dt=u.getZoomMultiplier(),yt=it*Dt,kt=yt-it,Mt=kt/2;pt.y=(-D.y+ht)*zt-Mt/Dt}u.setCoords(pt.x,pt.y)},n.prototype.isElInViewport=function(t){var e=(0,Zt.getElement)(t),r=(0,Ce.C8)(e),o=this.getFrameOffset(e),a=r.top,s=r.left;return a>=0&&s>=0&&a<=o.height&&s<=o.width},n.prototype.offset=function(t,e){e===void 0&&(e={});var r=e.noScroll,o=(0,Ce.C8)(t),a=r?{x:0,y:0}:(0,Ce.Xy)(t);return{top:o.top+a.y,left:o.left+a.x,width:o.width,height:o.height}},n.prototype.getRectToScreen=function(t){var e,r,o,a,s=this.getCanvasScroll(),u=this.module.getZoomDecimal(),c=this.module.getCoords(),h=this.getViewportDelta(),v=((e=t.x)!==null&&e!==void 0?e:0)*u-s.scrollLeft+c.x+h.x||0,m=((r=t.y)!==null&&r!==void 0?r:0)*u-s.scrollTop+c.y+h.y||0;return{x:v,y:m,width:((o=t.width)!==null&&o!==void 0?o:0)*u,height:((a=t.height)!==null&&a!==void 0?a:0)*u}},n.prototype.getElBoxRect=function(t,e){var r,o,a;e===void 0&&(e={});var s=this.module,u=(0,Ce.C8)(t),c=u.width,h=u.height,v=u.left,m=u.top,y=(r=(0,Zt.getComponentView)(t))===null||r===void 0?void 0:r.frameView,_=y==null?void 0:y.getBoxRect(),C=s.getZoomMultiplier(),E=(o=_==null?void 0:_.x)!==null&&o!==void 0?o:0,D=(a=_==null?void 0:_.y)!==null&&a!==void 0?a:0,F=this.el,V=(0,Ce.Xy)(),K=v+E+(F.scrollLeft+V.x)*C,Z=m+D+(F.scrollTop+V.y)*C,ct={x:K,y:Z,width:c,height:h};return e.local&&(ct.x=v,ct.y=m),e.toScreen?this.getRectToScreen(ct):ct},n.prototype.getViewportRect=function(t){t===void 0&&(t={});var e=this.getCanvasOffset(),r=e.top,o=e.left,a=e.width,s=e.height,u=this.module;if(t.toWorld){var c=u.getZoomMultiplier(),h=u.getCoords(),v=this.getViewportDelta(),m=-h.x-v.x||0,y=-h.y-v.y||0;return{x:m*c,y:y*c,width:a*c,height:s*c}}else return{x:o,y:r,width:a,height:s}},n.prototype.getViewportDelta=function(t){var e=this.module.getZoomMultiplier(),r=this.getCanvasOffset(),o=r.width,a=r.height,s=o*e,u=a*e,c=s-o,h=u-a;return{x:c/2/e,y:h/2/e}},n.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},n.prototype.getFrameOffset=function(t){var e;if(!this.frmOff||t){var r=(e=this.frame)===null||e===void 0?void 0:e.el,o=t==null?void 0:t.ownerDocument.defaultView,a=o?o.frameElement:r;this.frmOff=this.offset(a||r)}return this.frmOff},n.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},n.prototype.getElementPos=function(t,e){e===void 0&&(e={});var r=this.module.getZoomDecimal(),o=this.getFrameOffset(t),a=this.el,s=this.getCanvasOffset(),u=this.offset(t,e),c=e.avoidFrameOffset?0:o.top,h=e.avoidFrameOffset?0:o.left,v=e.avoidFrameZoom?u.top:u.top*r,m=e.avoidFrameZoom?u.left:u.left*r,y=e.avoidFrameOffset?v:v+c-s.top+a.scrollTop,_=e.avoidFrameOffset?m:m+h-s.left+a.scrollLeft,C=e.avoidFrameZoom?u.height:u.height*r,E=e.avoidFrameZoom?u.width:u.width*r;return{top:y,left:_,height:C,width:E,zoom:r,rect:u}},n.prototype.getElementOffsets=function(t){if(!t||(0,Ce.ir)(t))return{};var e={},r=window.getComputedStyle(t),o=this.module.getZoomDecimal(),a=["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"];return a.forEach(function(s){e[s]=parseFloat(r[s])*o}),e},n.prototype.getPosition=function(t){var e;t===void 0&&(t={});var r=(e=this.frame)===null||e===void 0?void 0:e.el.contentDocument;if(!r)return{top:0,left:0,width:0,height:0};var o=r.body,a=this.module.getZoomDecimal(),s=this.getFrameOffset(),u=this.getCanvasOffset(),c=t.noScroll;return{top:s.top+(c?0:o.scrollTop)*a-u.top,left:s.left+(c?0:o.scrollLeft)*a-u.left,width:u.width,height:u.height}},n.prototype.getCanvasScroll=function(){return this.config.scrollableCanvas?{scrollTop:this.el.scrollTop,scrollLeft:this.el.scrollLeft}:{scrollTop:0,scrollLeft:0}},n.prototype.updateScript=function(t){var e=t.model,r=e.getId(),o={component:e,view:t,el:t.el};if(!t.scriptContainer){t.scriptContainer=(0,Ce.a_)("div",{"data-id":r});var a=this.getJsContainer();a==null||a.appendChild(t.scriptContainer)}t.el.id=r,t.scriptContainer.innerHTML="";var s=document.createElement("script"),u=e.getScriptString(),c=e.get("script-props")?u:`function(){
`.concat(u,`
;}`),h=JSON.stringify(e.__getScriptProps());s.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(r,`');
        if (!item) return;
        var script = (`).concat(c,`).bind(item);
        script(`).concat(h,`, { el: item });
      }, 1);`),setTimeout(function(){e.emitWithEditor(In.I.scriptMountBefore,o);var v=t.scriptContainer;v==null||v.appendChild(s),e.emitWithEditor(In.I.scriptMount,o)},0)},n.prototype.getJsContainer=function(t){var e=this.getFrameView(t);return e==null?void 0:e.getJsContainer()},n.prototype.getFrameView=function(t){return(t==null?void 0:t.frameView)||this.em.getCurrentFrame()},n.prototype._renderFrames=function(){if(this.ready){var t=this,e=t.model,r=t.frames,o=t.em,a=t.framesArea,s=e.frames;s.listenToLoad(),r.render();var u=s.at(0),c=u==null?void 0:u.view;o.setCurrentFrame(c),a==null||a.appendChild(r.el),this.frame=c,this.updateFramesArea()}},n.prototype.renderFrames=function(){this._renderFrames()},n.prototype.render=function(){var t=this,e=t.el,r=t.$el,o=t.ppfx,a=t.config,s=t.em;r.html(this.template());var u=r.find("[data-frames]");this.framesArea=u.get(0);var c=r.find("[data-tools]");return this.toolsWrapper=c.get(0),c.append(`
      <div class="`.concat(o,"tools ").concat(o,`tools-gl" style="pointer-events:none">
        <div class="`).concat(o,`placeholder">
          <div class="`).concat(o,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(o,`tools" style="pointer-events:none">
        `).concat(a.extHl?'<div class="'.concat(o,'highlighter-sel"></div>'):"",`
        <div class="`).concat(o,`badge"></div>
        <div class="`).concat(o,`ghost"></div>
        <div class="`).concat(o,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(o,`resizer"></div>
        <div class="`).concat(o,`offset-v"></div>
        <div class="`).concat(o,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=e.querySelector("#".concat(o,"tools")),this.hlEl=e.querySelector(".".concat(o,"highlighter")),this.badgeEl=e.querySelector(".".concat(o,"badge")),this.placerEl=e.querySelector(".".concat(o,"placeholder")),this.ghostEl=e.querySelector(".".concat(o,"ghost")),this.toolbarEl=e.querySelector(".".concat(o,"toolbar")),this.resizerEl=e.querySelector(".".concat(o,"resizer")),this.offsetEl=e.querySelector(".".concat(o,"offset-v")),this.fixedOffsetEl=e.querySelector(".".concat(o,"offset-fixed-v")),this.toolsGlobEl=e.querySelector(".".concat(o,"tools-gl")),this.spotsEl=e.querySelector("[data-spots]"),this.cvStyle=e.querySelector("[data-canvas-style]"),e.className=(0,Zt.getUiClass)(s,this.className),a.scrollableCanvas===!0&&(e.style.overflow="auto"),this.ready=!0,this._renderFrames(),this},n}(ls);const M7=k7;var D7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yf=function(){return yf=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},yf.apply(this,arguments)},P7=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},N7=function(i){D7(n,i);function n(t){var e=i.call(this,t,"Canvas",Uz())||this;return e.events=f0,e.framesById={},e.canvas=new Gz(e),e.spots=new Jz(e),e.model=e.canvas,e.startAutoscroll=e.startAutoscroll.bind(e),e.stopAutoscroll=e.stopAutoscroll.bind(e),e.autoScroller=new qD,e}return n.prototype.getCanvasView=function(){return this.canvasView},n.prototype.postLoad=function(){this.model.init()},n.prototype.getModel=function(){return this.canvas},n.prototype.getElement=function(){return this.getCanvasView().el},n.prototype.getFrame=function(t){return this.getFrames()[t||0]},n.prototype.getFrameEl=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.el},n.prototype.getFramesEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.framesArea},n.prototype.getWindow=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.getWindow()},n.prototype.getDocument=function(){var t=this.getFrameEl();return t==null?void 0:t.contentDocument},n.prototype.getBody=function(){var t=this.getDocument();return t==null?void 0:t.body},n.prototype._getLocalEl=function(t,e,r){var o=t,a=e==null?void 0:e.frameView;return o=a?a[r]():o,o},n.prototype.getGlobalToolsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.toolsGlobEl},n.prototype.getToolsEl=function(t){return this._getLocalEl(this.getCanvasView().toolsEl,t,"getToolsEl")},n.prototype.getHighlighter=function(t){return this._getLocalEl(this.getCanvasView().hlEl,t,"getHighlighter")},n.prototype.getBadgeEl=function(t){return this._getLocalEl(this.getCanvasView().badgeEl,t,"getBadgeEl")},n.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},n.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},n.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},n.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},n.prototype.getOffsetViewerEl=function(t){return this._getLocalEl(this.getCanvasView().offsetEl,t,"getOffsetViewerEl")},n.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},n.prototype.getSpotsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.spotsEl},n.prototype.render=function(){var t;return(t=this.canvasView)===null||t===void 0||t.remove(),this.canvasView=new M7(this.canvas),this.canvasView.render().el},n.prototype.getOffset=function(){var t=this.offset(this.getFrameEl()),e=this.offset(this.getElement());return{top:t.top-e.top,left:t.left-e.left}},n.prototype.offset=function(t){return this.getCanvasView().offset(t)},n.prototype.setCustomBadgeLabel=function(t){this.config.customBadgeLabel=t},n.prototype.getElementPos=function(t,e){return this.getCanvasView().getElementPos(t,e)},n.prototype.getElementOffsets=function(t){return this.getCanvasView().getElementOffsets(t)},n.prototype.getRect=function(){var t,e=(t=this.getCanvasView().getPosition())!==null&&t!==void 0?t:{},r=e.top,o=r===void 0?0:r,a=e.left,s=a===void 0?0:a;return yf(yf({},this.getCanvasView().getCanvasOffset()),{topScroll:o,leftScroll:s})},n.prototype.getTargetToElementDim=function(t,e,r){r===void 0&&(r={});var o=r||{},a=this.getCanvasView().getPosition();if(a){var s=o.elPos||this.getCanvasView().getElementPos(e),u=r.toRight||0,c=o.targetHeight||t.offsetHeight,h=o.targetWidth||t.offsetWidth,v=o.event||null,m=s.top-c,y=s.left;y+=u?s.width:0,y=u?y-h:y;var _=y<a.left?a.left:y,C=m<a.top?a.top:m;C=C>s.top+s.height?s.top+s.height:C;var E={top:C,left:_,elementTop:s.top,elementLeft:s.left,elementWidth:s.width,elementHeight:s.height,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,canvasTop:a.top,canvasLeft:a.left,canvasWidth:a.width,canvasHeight:a.height};return v&&this.em&&this.em.trigger(v,E),E}},n.prototype.canvasRectOffset=function(t,e,r){var o=this;r===void 0&&(r={});var a=function(u){var c=u.defaultView;return c==null?void 0:c.frameElement},s=function(u,c,h){c===void 0&&(c=1);var v=o.em.getZoomDecimal(),m=c?"top":"left",y=u.ownerDocument,_=r.offset?a(y):{},C=_.offsetTop,E=C===void 0?0:C,D=_.offsetLeft,F=D===void 0?0:D,V=y.body||{},K=V.scrollTop,Z=K===void 0?0:K,ct=V.scrollLeft,ht=ct===void 0?0:ct,st=c?Z:ht,et=c?E:F;return h[m]-(st-et)*v};return{top:s(t,1,e),left:s(t,0,e)}},n.prototype.getTargetToElementFixed=function(t,e,r){r===void 0&&(r={});var o=r.pos||this.getElementPos(t,{noScroll:!0}),a=r.canvasOff||this.canvasRectOffset(t,o),s=e.offsetHeight||0,u=e.offsetWidth||0,c=this.getCanvasView(),h=c.getCanvasScroll(),v=h.scrollTop,m=h.scrollLeft,y=c.getPosition(),_=r.event,C=o.width-u,E=-s,D=(0,J.isUndefined)(r.left)?C:r.left,F=Math.max(-o.left+m,0);D=Math.max(D,F);var V=o.width-u;D=Math.min(D,V);var K=y.width+m-u-o.left;D=Math.min(D,K);var Z=a.top<s+v,ct=E;if(Z){var ht=o.height+s,st=ht<y.height;if(st)ct=ct+ht;else{var et=-a.top+v;ct=et<o.height?et:o.height}}var nt={top:ct,left:D,canvasOffsetTop:a.top,canvasOffsetLeft:a.left,elRect:o,canvasOffset:a,canvasRect:y,targetWidth:u,targetHeight:s};return _&&this.em.trigger(_,nt),nt},n.prototype.getMouseRelativePos=function(t,e){e===void 0&&(e={});var r=e.subWinOffset,o=t.target,a=o.nodeType===Node.DOCUMENT_NODE?o:o.ownerDocument,s=a.defaultView||a.parentWindow,u=s.frameElement,c=r?s.pageYOffset:0,h=r?s.pageXOffset:0,v=this.getZoomMultiplier(),m=0,y=0;if(u){var _=u.getBoundingClientRect();m=_.top||0,y=_.left||0}return{y:(t.clientY+m-c)*v,x:(t.clientX+y-h)*v}},n.prototype.getMouseRelativeCanvas=function(t,e){var r,o=this.getZoomDecimal(),a=this.getCanvasView(),s=(r=a.getPosition(e))!==null&&r!==void 0?r:{top:0,left:0},u=a.getCanvasScroll(),c={top:s.top+u.scrollTop,left:s.left+u.scrollLeft},h=c.top,v=c.left;return{y:t.clientY*o+h,x:t.clientX*o+v}},n.prototype.startDrag=function(t){this.em.set("dragSource",t)},n.prototype.endDrag=function(){this.em.set({dragResult:null,dragSource:void 0})},n.prototype.hasFocus=function(){return this.getDocument().hasFocus()},n.prototype.isInputFocused=function(){var t=this.getDocument(),e=this.getFrameEl(),r=P7(["body"],this.config.notTextable,!0),o=e&&document.activeElement===e,a=o?t&&t.activeElement:document.activeElement;return a&&!r.some(function(s){return a.matches(s)})},n.prototype.scrollTo=function(t,e){e===void 0&&(e={});var r=(0,Zt.getElement)(t),o=r&&(0,Zt.getViewEl)(r);o&&o.scrollIntoView(e)},n.prototype.startAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();if(e&&e.startAutoscroll(),this.config.scrollableCanvas){var r=this.getCanvasView().el;this.autoScroller.start(r,r,{zoom:this.em.getZoomDecimal(),ignoredElement:this.getSpotsEl()})}},n.prototype.stopAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.stopAutoscroll(),this.config.scrollableCanvas&&this.autoScroller.stop()},n.prototype.setZoom=function(t,e){return e===void 0&&(e={}),this.canvas.set("zoom",typeof t=="string"?parseFloat(t):t,e),this},n.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},n.prototype.setCoords=function(t,e,r){var o;r===void 0&&(r={});var a=t||t===0,s=e||e===0,u={x:this.canvas.get("x"),y:this.canvas.get("y")};if(a&&(u.x=parseFloat("".concat(t))),s&&(u.y=parseFloat("".concat(e))),r.toWorld){var c=(o=this.canvasView)===null||o===void 0?void 0:o.getViewportDelta();c&&(a&&(u.x=u.x-c.x),s&&(u.y=u.y-c.y))}return this.canvas.set(u),this},n.prototype.getCoords=function(){var t=this.canvas.attributes,e=t.x,r=t.y;return{x:e,y:r}},n.prototype.getPointer=function(t){var e=this.canvas.attributes,r=e.pointer,o=e.pointerScreen;return t?o:r},n.prototype.getZoomDecimal=function(){return this.getZoom()/100},n.prototype.getZoomMultiplier=function(){var t=this.getZoomDecimal();return t?1/t:1},n.prototype.fitViewport=function(t){var e;(e=this.canvasView)===null||e===void 0||e.fitViewport(t)},n.prototype.toggleFramesEvents=function(t){var e=this.getFramesEl().style;e.pointerEvents=t?"":"none"},n.prototype.getFrames=function(){return this.canvas.frames.map(function(t){return t})},n.prototype.addFrame=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.canvas.frames.add(new OD(this,yf({},t)),e)},n.prototype.getLastDragResult=function(){return this.em.get("dragResult")},n.prototype.addSpot=function(t,e){var r;e===void 0&&(e={});var o=t,a=this.getSpots(o);if(a.length){var s=a[0];return s.set(o),s}var u=o.componentView||((r=o.component)===null||r===void 0?void 0:r.view),c=new rs.A(this,yf(yf({},o),{id:o.id||"cs_".concat(o.type,"_").concat(u==null?void 0:u.cid),type:o.type||""}));return this.spots.add(c,e),c},n.prototype.getSpots=function(t){return t===void 0&&(t={}),this.spots.where(t.id?{id:t.id}:t)},n.prototype.removeSpots=function(t){t===void 0&&(t={});var e=(0,J.isArray)(t)?t:this.getSpots(t),r=this.spots.remove(e);return r},n.prototype.hasCustomSpot=function(t){var e=this.config.customSpots;return!!(e===!0||e&&t&&e[t])},n.prototype.getWorldRectToScreen=function(t){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.getRectToScreen(t)},n.prototype.refresh=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.events,a=e.canvasView;a==null||a.clearOff(),(t.spots||t.all)&&(this.refreshSpots(),r.trigger("canvas:updateTools")),r.set("canvasOffset",this.getOffset()),r.trigger(o.refresh,t)},n.prototype.refreshSpots=function(){this.spots.refresh()},n.prototype.destroy=function(){var t=this,e;this.canvas.stopListening(),(e=this.canvasView)===null||e===void 0||e.remove(),["model","droppable"].forEach(function(r){return t[r]={}})},n}(da);const R7=N7;var L7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hh=function(){return hh=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},hh.apply(this,arguments)},GD=function(i){L7(n,i);function n(t,e){var r=i.call(this,t,e)||this;return r.dataResolver=r.initializeDataResolver(t,e),r.listenToPropsChange(),r}return n.prototype.initializeDataResolver=function(t,e){var r,o=(r=t.dataResolver)!==null&&r!==void 0?r:{type:t.type},a=this.createResolverInstance(o,hh(hh({},e),{collectionsStateMap:this.collectionsStateMap}));return a},n.prototype.getDataResolver=function(){return this.get("dataResolver")},n.prototype.setDataResolver=function(t){return this.set("dataResolver",t)},n.prototype.onCollectionsStateMapUpdate=function(t){this.dataResolver.updateCollectionsStateMap(t),i.prototype.onCollectionsStateMapUpdate.call(this,t)},n.prototype.listenToPropsChange=function(){var t=this;this.on("change:dataResolver",function(){t.dataResolver.set(t.get("dataResolver"))})},n.prototype.removePropsListeners=function(){this.stopListening(this.dataResolver),this.off("change:dataResolver"),this.off("change:".concat(this.collectionsStateMap))},n.prototype.destroy=function(t){return this.removePropsListeners(),i.prototype.destroy.call(this,t)},n.prototype.toJSON=function(t){var e=i.prototype.toJSON.call(this,t),r=this.dataResolver.toJSON();return delete r.type,hh(hh({},e),{dataResolver:r})},n}(Wr),j7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_0=function(){return _0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},_0.apply(this,arguments)},I7=function(i){j7(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return _0(_0({},i.prototype.defaults),{type:ks,dataResolver:{},droppable:!1})},enumerable:!1,configurable:!0}),n.prototype.getPath=function(){return this.dataResolver.get("path")},n.prototype.getCollectionId=function(){return this.dataResolver.get("collectionId")},n.prototype.getVariableType=function(){return this.dataResolver.get("variableType")},n.prototype.getDefaultValue=function(){return this.dataResolver.get("defaultValue")},n.prototype.getDataValue=function(){return this.dataResolver.getDataValue()},n.prototype.resolvesFromCollection=function(){return this.dataResolver.resolvesFromCollection()},n.prototype.getInnerHTML=function(){return this.getDataValue()},n.prototype.setPath=function(t){this.dataResolver.set("path",t)},n.prototype.setDefaultValue=function(t){this.dataResolver.set("defaultValue",t)},n.prototype.resetDataSourcePath=function(t){this.set("dataResolver",{path:t,collectionId:void 0,variableType:void 0})},n.prototype.createResolverInstance=function(t,e){return new Jh(t,e)},n.isComponent=function(t){return(0,Zt.toLowerCase)(t.tagName)===ks},n}(GD);const B7=I7;var U7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),C0=function(){return C0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},C0.apply(this,arguments)},V7=function(i){U7(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return C0(C0({},i.prototype.defaults),{droppable:!1,type:Zr.condition,dataResolver:{condition:{left:"",operator:Qa.equalsIgnoreCase,right:""}},components:[{type:Zr.conditionTrue},{type:Zr.conditionFalse}]})},enumerable:!1,configurable:!0}),n.prototype.isTrue=function(){return this.dataResolver.isTrue()},n.prototype.getCondition=function(){return this.dataResolver.getCondition()},n.prototype.getIfTrueContent=function(){return this.components().at(0)},n.prototype.getIfFalseContent=function(){return this.components().at(1)},n.prototype.getOutputContent=function(){return this.isTrue()?this.getIfTrueContent():this.getIfFalseContent()},n.prototype.setCondition=function(t){this.dataResolver.setCondition(t)},n.prototype.setIfTrueComponents=function(t){this.setComponentsAtIndex(0,t)},n.prototype.setIfFalseComponents=function(t){this.setComponentsAtIndex(1,t)},n.prototype.getInnerHTML=function(t){var e,r;return(r=(e=this.getOutputContent())===null||e===void 0?void 0:e.getInnerHTML(t))!==null&&r!==void 0?r:""},n.prototype.createResolverInstance=function(t,e){return new MD(t,e)},n.prototype.setComponentsAtIndex=function(t,e){var r=this.components().at(t);r==null||r.components(e)},n.isComponent=function(t){return(0,Zt.toLowerCase)(t.tagName)===Fh},n}(GD);const F7=V7;var H7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),T0=function(){return T0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},T0.apply(this,arguments)},z7=function(i){H7(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return T0(T0({},i.prototype.defaults),{removable:!1,draggable:!1})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return D8((0,Zt.toLowerCase)(t.tagName))},n}(Wr);const Dx=z7;var W7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),E0=function(){return E0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},E0.apply(this,arguments)},q7=function(i){W7(n,i);function n(t,e){e===void 0&&(e={});var r,o=i.call(this,t,e)||this;return o.mutable=(r=t.mutable)!==null&&r!==void 0?r:!0,o.on("change",o.handleChange),o}return Object.defineProperty(n.prototype,"cl",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dataSource",{get:function(){return this.cl.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"em",{get:function(){return this.dataSource.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"index",{get:function(){return this.cl.indexOf(this)},enumerable:!1,configurable:!0}),n.prototype.handleChange=function(t,e){var r=this,o=this.changedAttributes();(0,J.keys)(o).forEach(function(a){return r.triggerChange(a,e)})},n.prototype.getPath=function(t,e){e===void 0&&(e={});var r=this,o=r.dataSource,a=r.id,s=r.index,u=o.id,c=t?".".concat(t):"";return"".concat(u,".").concat(e.useIndex?s:a).concat(c)},n.prototype.getPaths=function(t){return[this.getPath(t),this.getPath(t,{useIndex:!0})]},n.prototype.triggerChange=function(t,e){e===void 0&&(e={});var r=this,o=r.dataSource,a=r.em,s=this.getPaths(t),u={dataSource:o,dataRecord:this,path:s[0],options:e};a.trigger(nu.path,u),a.trigger("".concat(nu.pathSource,":").concat(o.id),u),s.forEach(function(c){return a.trigger("".concat(nu.path,":").concat(c),E0(E0({},u),{path:c}))})},n.prototype.set=function(t,e,r){var o=this,a,s;if(!this.isNew()&&this.attributes.mutable===!1)throw new Error("Cannot modify immutable record");var u=(s=(a=this.dataSource)===null||a===void 0?void 0:a.transformers)===null||s===void 0?void 0:s.onRecordSetValue,c=function(E,D,F){F===void 0&&(F={});var V=F!=null&&F.avoidTransformers||!u?D:u({id:o.id,key:E,value:D});i.prototype.set.call(o,E,V,F),i.prototype.set.call(o,{__p:F.partial?!0:void 0},F)};if(typeof t=="object"&&t!==null)for(var h=t,v=0,m=Object.entries(h);v<m.length;v++){var y=m[v],_=y[0],C=y[1];c(_,C,e)}else c(t,e,r);return this},n}(ye.Kx);const K7=q7;var $7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),YD=function(i){$7(n,i);function n(t,e){var r=i.call(this,t,e)||this;return r.dataSource=e.dataSource,r}return n}(ye.pM);const XO=YD;YD.prototype.model=K7;var G7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gl=function(){return Gl=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Gl.apply(this,arguments)},JO=function(i,n,t,e){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(h){try{c(e.next(h))}catch(v){a(v)}}function u(h){try{c(e.throw(h))}catch(v){a(v)}}function c(h){h.done?o(h.value):r(h.value).then(s,u)}c((e=e.apply(i,n||[])).next())})},ZO=function(i,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(h){return u([c,h])}}function u(c){if(e)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(e=1,r&&(o=c[0]&2?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=n.call(i,t)}catch(h){c=[6,h],r=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Y7=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},X7=function(i){G7(n,i);function n(t,e){var r=i.call(this,Gl(Gl({schema:{}},t),{records:[]}),e)||this,o=t.records,a=t.transformers;return r.transformers=a||{},o instanceof XO||r.set({records:new XO(o,{dataSource:r})}),r.listenTo(r.records,"add",r.onAdd),r.listenTo(r.records,ye.e2,r.handleChanges),r}return n.prototype.defaults=function(){return{records:[],transformers:{}}},Object.defineProperty(n.prototype,"records",{get:function(){return this.attributes.records},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"schema",{get:function(){return this.attributes.schema},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"em",{get:function(){return this.collection.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasProvider",{get:function(){return!!this.attributes.provider},enumerable:!1,configurable:!0}),n.prototype.onAdd=function(t){t.triggerChange()},n.prototype.addRecord=function(t,e){return this.records.add(t,e)},n.prototype.getRecord=function(t){return this.records.get(t)},n.prototype.getRecords=function(){var t=this;return Y7([],this.records.models,!0).map(function(e){return t.getRecord(e.id)})},n.prototype.getResolvedRecords=function(){var t=this,e=Object.entries(this.schema),r=this.getRecords().map(function(o){var a=Gl({},o.attributes);return e.length===0||e.forEach(function(s){var u=s[0],c=s[1],h=c;if((h==null?void 0:h.type)===r_.relation&&h.target){var v=a[u];if(v){var m=t.em.DataSources.get(h.target);if(m){var y=m.records,_=h.targetField||M8;if(h.isMany){var C=Array.isArray(v)?v:[v],E=y.filter(function(F){return C.includes(F.attributes[_])});a[u]=E.map(function(F){return Gl({},F.attributes)})}else{var D=m.records.find(function(F){return F.attributes[_]===v});D&&(a[u]=Gl({},D.attributes))}}}}}),a});return r},n.prototype.loadProvider=function(){return JO(this,void 0,void 0,function(){var t,e,r,o,a,s,u,c,h,v,m=this;return ZO(this,function(y){switch(y.label){case 0:return t=this,e=t.attributes,r=t.em,o=e.provider,o?(0,J.isString)(o)?[2]:(a=(0,J.isString)(o.get)?{url:o.get}:o.get,s=a.url,u=a.method,c=a.headers,h=a.body,v=function(){return JO(m,void 0,void 0,function(){var _,C,E,D,F;return ZO(this,function(V){switch(V.label){case 0:_=this,V.label=1;case 1:return V.trys.push([1,6,,7]),r.trigger(r.DataSources.events.providerLoadBefore,{dataSource:_}),[4,fetch(s,{method:u,headers:c,body:h})];case 2:return C=V.sent(),C.ok?[3,4]:(E=Error.bind,[4,C.text()]);case 3:throw new(E.apply(Error,[void 0,V.sent()]));case 4:return[4,C.json()];case 5:return D=V.sent(),D!=null&&D.records&&this.setRecords(D.records),D!=null&&D.schema&&this.upSchema(D.schema),r.trigger(r.DataSources.events.providerLoad,{result:D,dataSource:_}),[3,7];case 6:return F=V.sent(),r.logError(F.message),r.trigger(r.DataSources.events.providerLoadError,{dataSource:_,error:F}),[3,7];case 7:return[2]}})})},[4,v()]):[2];case 1:return y.sent(),[2]}})})},n.prototype.removeRecord=function(t,e){var r=this.getRecord(t);if((r==null?void 0:r.mutable)===!1&&!(e!=null&&e.dangerously))throw new Error("Cannot remove immutable record");return this.records.remove(t,e)},n.prototype.setRecords=function(t){var e=this;this.records.reset([],{silent:!0}),t.forEach(function(r){e.records.add(r)})},n.prototype.upSchema=function(t,e){this.set("schema",Gl(Gl({},this.schema),t),e)},n.prototype.getSchemaField=function(t){return this.schema[t]},n.prototype.handleChanges=function(t,e,r){var o=r||e;this.em.changesUp(o,{dataRecord:t,options:o})},n}(ye.Kx);const XD=X7;var J7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),u_=function(){return u_=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},u_.apply(this,arguments)},Z7=function(i){J7(n,i);function n(t,e){var r=i.call(this,t,e)||this;return r.collectionsStateMap={},r.listenToPropsChange(),r}return n.prototype.onCollectionsStateMapUpdate=function(t){var e,r;this.collectionsStateMap=t,(r=(e=this.dataResolverWatchers)===null||e===void 0?void 0:e.onCollectionsStateMapUpdate)===null||r===void 0||r.call(e),this.components().forEach(function(o){var a;(a=o.onCollectionsStateMapUpdate)===null||a===void 0||a.call(o,t)})},n.prototype.syncOnComponentChange=function(t,e,r){var o=this.collectionsStateMap;this.collectionsStateMap={},i.prototype.syncOnComponentChange.call(this,t,e,r),this.collectionsStateMap=o,this.onCollectionsStateMapUpdate(o)},n.prototype.setDataResolver=function(t){return this.set("dataResolver",t)},n.prototype.getDataResolver=function(){return this.dataResolverProps},Object.defineProperty(n.prototype,"dataResolverProps",{get:function(){return this.get("dataResolver")},enumerable:!1,configurable:!0}),n.prototype.listenToDataSource=function(){var t=this,e,r=this.dataResolverPath;if(r){var o=this,a=o.em,s=o.collectionsStateMap;(e=this.dataSourceWatcher)===null||e===void 0||e.destroy(),this.dataSourceWatcher=new Ag({em:a,resolver:new Jh({type:ks,path:r},{em:a,collectionsStateMap:s}),onUpdate:function(){return t.onDataSourceChange()}})}},n.prototype.listenToPropsChange=function(){var t=this;this.on("change:dataResolver",function(){t.listenToDataSource()}),this.listenToDataSource()},Object.defineProperty(n.prototype,"dataSourceProps",{get:function(){return this.get("dataResolver")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dataResolverPath",{get:function(){var t;return(t=this.dataSourceProps)===null||t===void 0?void 0:t.path},enumerable:!1,configurable:!0}),n.prototype.onDataSourceChange=function(){this.onCollectionsStateMapUpdate(this.collectionsStateMap)},n.prototype.getDataSourceItems=function(){var t=this.dataSourceProps;if(!t)return[];var e=this.listDataSourceItems(t);if(e&&(0,J.isArray)(e))return e;var r=u_({},e);return r},n.prototype.listDataSourceItems=function(t){var e=t instanceof XD?t.get("id"):t.path;if(!e)return[];var r=this.em.DataSources.getValue(e,[]),o=e.split(".").length===1;return o&&(r=Object.entries(r).map(function(a){a[0];var s=a[1];return s})),r},n.prototype.getItemKey=function(t,e){return(0,J.isArray)(t)?e:Object.keys(t)[e]},n.prototype.removePropsListeners=function(){var t;this.off("change:dataResolver"),(t=this.dataSourceWatcher)===null||t===void 0||t.destroy(),this.dataSourceWatcher=void 0},n.prototype.destroy=function(t){return this.removePropsListeners(),i.prototype.destroy.call(this,t)},n}(Wr);const JD=Z7;var Q7=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),na=function(){return na=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},na.apply(this,arguments)},Px={avoidStore:!0,partial:!0},t9=function(i){Q7(n,i);function n(t,e){var r=this;if(e.forCloning)return r=i.call(this,t,e)||this;var o=na(na({},t),{droppable:!1}),a=r=i.call(this,o,e)||this;return r.rebuildChildrenFromCollection=r.rebuildChildrenFromCollection.bind(r),r.listenToPropsChange(),r.rebuildChildrenFromCollection(),a}return Object.defineProperty(n.prototype,"defaults",{get:function(){return na(na({},i.prototype.defaults),{droppable:!1,dataResolver:{},type:Zr.collection,components:[{type:Zr.collectionItem}]})},enumerable:!1,configurable:!0}),n.prototype.getItemsCount=function(){var t,e,r=this.getDataSourceItems(),o=n9(r),a=Math.max(0,(t=this.getConfigStartIndex())!==null&&t!==void 0?t:0),s=(e=this.getConfigEndIndex())!==null&&e!==void 0?e:Number.MAX_VALUE,u=Math.min(o-1,s),c=u-a+1;return Math.max(0,c)},n.prototype.getConfigStartIndex=function(){return this.dataResolver.startIndex},n.prototype.getConfigEndIndex=function(){return this.dataResolver.endIndex},n.prototype.getDataSource=function(){var t;return(t=this.dataResolver)===null||t===void 0?void 0:t.dataSource},n.prototype.getCollectionId=function(){var t;return(t=this.dataResolver)===null||t===void 0?void 0:t.collectionId},n.prototype.getCollectionItemComponents=function(){return this.firstChild.components()},n.prototype.setCollectionId=function(t){this.updateCollectionConfig({collectionId:t})},n.prototype.setStartIndex=function(t){if(t<0){this.em.logError("Start index should be greater than or equal to 0");return}this.updateCollectionConfig({startIndex:t})},n.prototype.setEndIndex=function(t){this.updateCollectionConfig({endIndex:t})},n.prototype.setDataSource=function(t){this.set(Ov,na(na({},this.dataResolver),{dataSource:t}))},n.prototype.setCollectionItemComponents=function(t){this.firstChild.components(t)},n.prototype.onCollectionsStateMapUpdate=function(t){var e=this;i.prototype.onCollectionsStateMapUpdate.call(this,t);var r=this.getDataSourceItems(),o=this.resolveCollectionConfig(r).startIndex,a=this.components();a.forEach(function(s,u){var c=e.getItemKey(r,o+u),h=e.getCollectionsStateMapForItem(r,c);s.onCollectionsStateMapUpdate(h)})},n.prototype.stopSyncComponentCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.onCollectionsStateMapUpdate({})},n.prototype.setCollectionStateMapAndPropagate=function(t,e){t.setSymbolOverride(["locked","layerable",lh]),t.syncComponentsCollectionState(),t.onCollectionsStateMapUpdate(e)},n.prototype.onDataSourceChange=function(){this.rebuildChildrenFromCollection()},n.prototype.listenToPropsChange=function(){var t=this;this.on("change:".concat(Ov),function(){t.rebuildChildrenFromCollection(),t.listenToDataSource()}),this.listenToDataSource()},Object.defineProperty(n.prototype,"dataSourceProps",{get:function(){return this.dataResolver.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dataResolver",{get:function(){return this.get(Ov)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"firstChild",{get:function(){return this.components().at(0)},enumerable:!1,configurable:!0}),n.prototype.updateCollectionConfig=function(t){this.set(Ov,na(na({},this.dataResolver),t))},n.prototype.rebuildChildrenFromCollection=function(){var t=this.getDataSourceItems(),e=this.resolveCollectionConfig(t).totalItems;if(e===this.components().length){this.onCollectionsStateMapUpdate(this.collectionsStateMap);return}var r=this.getCollectionItems(t);this.components().reset(r,vy)},n.prototype.getCollectionItems=function(t){var e,r=this.ensureFirstChild(),o=r.getStyle().display,a=!o||o==="none",s=a?"":o;r.addStyle({display:"none"},Px);var u=[r],c=i9(this.dataResolver,this.em);if(!c)return u;var h=this.collectionId,v=t??this.getDataSourceItems(),m=this.resolveCollectionConfig(v),y=m.startIndex,_=m.endIndex,C=this.hasDuplicateCollectionId();if(C)return this.em.logError('The collection ID "'.concat(h,'" already exists in the parent collection state. Overriding it is not allowed.')),u;for(var E=y;E<=_;E++){var D=E===y,F=this.getItemKey(v,E),V=this.getCollectionsStateMapForItem(v,F);if(D){(e=ua(r))===null||e===void 0||e.forEach(function(Z){return Vb(Z)}),this.setCollectionStateMapAndPropagate(r,V),r.addStyle({display:s},Px);continue}var K=r.clone({symbol:!0,symbolInv:!0});K.set({locked:!0,layerable:!1},Px),this.setCollectionStateMapAndPropagate(K,V),u.push(K)}return u},n.prototype.getCollectionsStateMapForItem=function(t,e){var r,o=this.resolveCollectionConfig(t),a=o.startIndex,s=o.endIndex,u=o.totalItems,c=this.collectionId,h=t[e],v=this.collectionsStateMap,m=typeof e=="string"?Object.keys(t).indexOf(e):e,y=m-a,_=u-(1+y),C={collectionId:c,currentIndex:m,currentItem:h,currentKey:e,startIndex:a,endIndex:s,totalItems:u,remainingItems:_},E=na(na({},v),(r={},r[c]=C,r));return E},n.prototype.hasDuplicateCollectionId=function(){var t=this.collectionId,e=this.collectionsStateMap;return!!e[t]},n.prototype.resolveCollectionConfig=function(t){var e,r,o=Array.isArray(t),a=o?t.length:Object.keys(t).length,s=(e=this.getConfigStartIndex())!==null&&e!==void 0?e:0,u=(r=this.getConfigEndIndex())!==null&&r!==void 0?r:Number.MAX_VALUE,c=Math.min(a-1,u),h=0;return a>0&&(h=Math.max(0,c-s+1)),{startIndex:s,endIndex:c,totalItems:h,isArray:o}},n.prototype.ensureFirstChild=function(){var t=this.em.Components.getType(Zr.collectionItem).model;return this.firstChild||new t({type:Zr.collectionItem},this.opt)},Object.defineProperty(n.prototype,"collectionId",{get:function(){var t,e;return(e=(t=this.dataResolverProps)===null||t===void 0?void 0:t.collectionId)!==null&&e!==void 0?e:""},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Zt.toLowerCase)(t.tagName)===Zr.collection},n.prototype.toJSON=function(t){var e=i.prototype.toJSON.call(this,t);delete e.droppable,delete e[oa];var r=this.firstChild;return na(na({},e),{components:[r]})},n}(JD);const e9=t9;function n9(i){return(0,J.isArray)(i)?i.length:Object.keys(i).length}function r9(i,n,t){return i?!0:(t.logError('The "'.concat(n,'" property is required in the collection definition.')),!1)}function i9(i,n){for(var t=[{property:i==null?void 0:i.collectionId,propertyPath:"dataResolver.collectionId"},{property:i==null?void 0:i.dataSource,propertyPath:"dataResolver.dataSource"}],e=0,r=t;e<r.length;e++){var o=r[e].propertyPath;if(!r9(i,o,n))return[]}var a=i==null?void 0:i.startIndex;return a!==void 0&&(a<0||!Number.isInteger(a))&&n.logError("Invalid startIndex: ".concat(a,". It must be a non-negative integer.")),!0}var o9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),a9=function(i){o9(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.compView=lr,t}return n.prototype.initialize=function(t){this.opts=t||{},this.config=t.config||{},this.em=this.config.em;var e=this.collection;this.listenTo(e,"add",this.addTo),this.listenTo(e,"reset",this.resetChildren),this.listenTo(e,"remove",this.removeChildren)},n.prototype.removeChildren=function(t,e,r){var o=this;r===void 0&&(r={}),t.views.forEach(function(s){if(s){var u=s.childrenView,c=s.scriptContainer;u&&u.stopListening(),(0,Ce.YZ)(c),s.remove.apply(s)}});var a=t.components();a.forEach(function(s){return o.removeChildren(s,e,r)})},n.prototype.addTo=function(t){this.addToCollection(t,null,this.collection.indexOf(t))},n.prototype.addToCollection=function(t,e,r){for(var o=this,a=o.config,s=o.opts,u=o.em,c=a.frameView,h=(c==null?void 0:c.model)&&t.getView(c.model),v=s.componentTypes||(u==null?void 0:u.Components.getTypes()),m=t.get("type")||"default",y=this.compView,_=0;_<v.length;_++)if(v[_].id==m){y=v[_].view;break}var C=h||new y({model:t,config:a,componentTypes:v}),E;try{E=C.render().el}catch(K){E=document.createTextNode(""),u.logError(K)}if(e)e.appendChild(E);else{var D=this.parentEl,F=D.childNodes;if((0,J.isUndefined)(r))D.appendChild(E);else{var V=F.length==r;V&&r--,V||!F.length?D.appendChild(E):D.insertBefore(E,F[r])}}return t.opt.temporary||u==null||u.trigger(In.I.mount,t),E},n.prototype.resetChildren=function(t,e){var r=this;if(e===void 0&&(e={}),!e.skipViewUpdate){var o=e.previousModels;e.skipDomReset||(this.parentEl.innerHTML=""),o==null||o.forEach(function(a){return r.removeChildren(a,r.collection)}),t.each(function(a){return r.addToCollection(a)})}},n.prototype.render=function(t){var e=this,r=this.el,o=document.createDocumentFragment();return this.parentEl=t||this.el,this.collection.each(function(a){return e.addToCollection(a,o)}),r.innerHTML="",r.appendChild(o),this},n}(ye.Ss);const ZD=a9;var s9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vl=function(){return vl=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},vl.apply(this,arguments)},l9=function(i){s9(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.rendered=!1,t}return n.prototype.className=function(){return this.getClasses()},n.prototype.tagName=function(){return this.model.get("tagName")},n.prototype.preinitialize=function(t){t===void 0&&(t={}),this.opts=t},n.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,r=t.config||{},o=r.em,a=e.opt||{},s=this,u=s.$el,c=s.el;this.opts=t,this.modelOpt=a,this.config=r,this.em=o,this.pfx=r.stylePrefix||"",this.ppfx=r.pStylePrefix||"",this.attr=e.get("attributes"),this.classe=this.attr.class||[],this.listenTo(e,"change:style",this.updateStyle),this.listenTo(e,"change:attributes",this.renderAttributes),this.listenTo(e,"change:highlightable",this.updateHighlight),this.listenTo(e,"change:status change:locked",this.updateStatus),this.listenTo(e,"change:script rerender",this.reset),this.listenTo(e,"change:content",this.updateContent),this.listenTo(e,"change",this.handleChange),this.listenTo(e,"active",this.onActive),this.listenTo(e,"disable",this.onDisable),u.data("model",e),(0,Zt.setViewEl)(c,this),e.view=this,this.frameView&&e.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=vl(vl({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!a.temporary&&this.init(this._clbObj())},Object.defineProperty(n.prototype,"__cmpStyleOpts",{get:function(){return{state:"",mediaText:""}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"createDoc",{get:function(){var t,e,r=((t=this.frameView)===null||t===void 0?void 0:t.getDoc())||document;return!((e=this.opts.config)===null||e===void 0)&&e.useFrameDoc?r:document},enumerable:!1,configurable:!0}),n.prototype.__isDraggable=function(){var t=this,e=t.model,r=t.config,o=e.attributes.draggable;return r.draggableComponents&&o},n.prototype._clbObj=function(){var t=this,e=t.em,r=t.model,o=t.el;return{editor:e==null?void 0:e.getEditor(),model:r,el:o}},n.prototype.init=function(t){},n.prototype.removed=function(t){},n.prototype.onRender=function(t){},n.prototype.onActive=function(t){},n.prototype.onDisable=function(t){},n.prototype.remove=function(){var t;i.prototype.remove.call(this);var e=this,r=e.model,o=e.$el,a=r.views,s=this.frameView||{};return r.components().forEach(function(u){var c=u.getView(s.model);c==null||c.remove()}),(t=this.childrenView)===null||t===void 0||t.remove(),a.splice(a.indexOf(this),1),this.removed(this._clbObj()),o.data({model:"",collection:"",view:""}),this},n.prototype.handleDragStart=function(t){if(!this.__isDraggable())return!1;t.stopPropagation(),t.preventDefault();var e=this.em.getSelectedAll(),r=e.includes(this.model)?e:[this.model];this.em.Commands.run("tlb-move",{target:r,event:t})},n.prototype.initClasses=function(){var t=this.model,e=t.classes,r="change:classes";e instanceof uc&&(this.stopListening(t,r,this.initClasses),this.listenTo(t,r,this.initClasses),this.listenTo(e,"add remove change reset",this.updateClasses),e.length&&this.importClasses())},n.prototype.initComponents=function(t){t===void 0&&(t={});var e=this,r=e.model,o=e.$el,a=e.childrenView,s="change:components",u=r.get("components"),c=[r,s,this.initComponents];u instanceof yg&&(o.data("collection",u),a&&a.remove(),this.stopListening.apply(this,c),!t.avoidRender&&this.renderChildren(),this.listenTo.apply(this,c))},n.prototype.handleChange=function(){var t=this.model,e=(0,J.keys)(t.changed);if(!(e.length===1&&e[0]==="status")){t.emitUpdate();for(var r in t.changed)t.emitUpdate(r)}},n.prototype.importClasses=function(){var t=this,e=t.em,r=t.model,o=e.Selectors;o&&r.classes.forEach(function(a){return o.add(a.getName())})},n.prototype.updateStatus=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.el,a=e.ppfx,s=e.model,u=r==null?void 0:r.Canvas,c=u==null?void 0:u.config.extHl,h=s.get("status"),v="".concat(a,"selected"),m="".concat(v,"-parent"),y="".concat(a,"freezed"),_="".concat(a,"hovered"),C="".concat(a,"no-pointer"),E="".concat(a,"pointer-init"),D=[v,m,y,_,C,E],F=c&&!t.noExtHl?"":v;this.$el.removeClass(D.join(" "));var V=o.getAttribute("class")||"",K=[V],Z=!(u!=null&&u.hasCustomSpot(rs.F.Select)),ct=!(u!=null&&u.hasCustomSpot(rs.F.Target));switch(h){case"selected":Z&&K.push(F);break;case"selected-parent":ct&&K.push(m);break;case"freezed":K.push(y);break;case"freezed-selected":K.push(y),Z&&K.push(F);break;case"hovered":!t.avoidHover&&K.push(_);break}(0,J.isBoolean)(s.locked)&&K.push(s.locked?C:E);var ht=K.filter(Boolean).join(" ");ht&&o.setAttribute("class",ht)},n.prototype.updateHighlight=function(){var t=this.model,e=t.get("textable"),r=t.get("highlightable")&&(e||!t.isChildOf("text"));this.setAttribute("data-gjs-highlightable",r?!0:"")},n.prototype.updateStyle=function(t,e,r){r===void 0&&(r={});var o=this,a=o.model,s=o.em;if(vf(s)&&!r.inline){var u=this.__cmpStyleOpts,c=a.getStyle(vl({inline:!0},u));!(0,J.isEmpty)(c)&&a.setStyle(c,u)}else this.setAttribute("style",a.styleToString(r))},n.prototype.updateStyles=function(){this.updateStyle()},n.prototype.updateClasses=function(){var t,e,r=((e=(t=this.model.classes).pluck)===null||e===void 0?void 0:e.call(t,"name").join(" "))||"";this.setAttribute("class",r),this.updateStatus(),this.onAttrUpdate()},n.prototype.setAttribute=function(t,e){var r=this.$el;e?r.attr(t,e):r.removeAttr(t)},n.prototype.getClasses=function(){return this.model.getClasses().join(" ")},n.prototype.updateAttributes=function(){var t=this,e=t.model,r=t.$el;t.el;var o=e.attributes,a=o.textable,s=o.type,u=vl(vl({id:e.getId(),"data-gjs-type":s||"default"},this.__isDraggable()&&{draggable:!0}),a&&{contenteditable:"false"});this.__clearAttributes(),this.updateStyle(),this.updateHighlight();var c=vl(vl({},u),e.getAttributes());(0,J.keys)(c).forEach(function(h){return c[h]===!1&&delete c[h]}),r.attr(c)},n.prototype.__clearAttributes=function(){var t=this,e=t.el,r=t.$el,o=[];(0,J.each)(e.attributes,function(a){return o.push(a.nodeName)}),o.forEach(function(a){return r.removeAttr(a)})},n.prototype.updateContent=function(){var t=this.model.content,e=this.model.components().length;this.getChildrenContainer().innerHTML=e?"":t},n.prototype.prevDef=function(t){t.preventDefault()},n.prototype.updateScript=function(){var t=this,e=t.model,r=t.em;e.get("script")&&(r==null||r.Canvas.getCanvasView().updateScript(this))},n.prototype.getChildrenContainer=function(){var t=this.el;return typeof this.getChildrenSelector=="function"?t=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,t},n.prototype.getOffsetRect=function(){var t={top:0,left:0,bottom:0,right:0},e=this.el,r=0,o=0,a=function(s){var u=s.offsetParent;u?(r+=u.offsetTop,o+=u.offsetLeft,a(u)):(t.top=e.offsetTop+r,t.left=e.offsetLeft+o,t.bottom=t.top+e.offsetHeight,t.right=t.left+e.offsetWidth)};return a(e),t},n.prototype.isInViewport=function(){var t=this,e=t.el,r=t.em,o=t.frameView,a=r.Canvas.getCanvasView(),s=a.getElBoxRect(e,{local:!0}),u=o.el,c=u.clientHeight,h=u.clientWidth,v=s.y,m=s.x,y=v+s.height,_=m+s.width,C=v>=0&&v<c,E=y>0&&y<c,D=_>=0&&_<h,F=m>0&&m<=h,V=(C||E)&&(D||F);return V},n.prototype.scrollIntoView=function(t){var e;t===void 0&&(t={});var r=this.isInViewport();if(!r||t.force){var o=this.el;if(t.behavior!=="smooth"){var a=this.getOffsetRect();(e=o.ownerDocument.defaultView)===null||e===void 0||e.scrollTo(0,a.top)}else o.scrollIntoView(vl({behavior:"smooth",block:"nearest"},t))}},n.prototype.reset=function(){var t=this,e=t.el,r=t.model;t.scriptContainer&&r.emitWithEditor(In.I.scriptUnmount,{component:r,view:t,el:e}),this.el="",this._ensureElement(),this._setData(),(0,Ce.bG)(e,this.el),this.render()},n.prototype._setData=function(){var t=this,e=t.model,r=t.el,o=e.components(),a=this;this.$el.data({model:e,collection:o,view:a}),(0,Zt.setViewEl)(r,this)},n.prototype._createElement=function(t){return this.createDoc.createElement(t)},n.prototype.renderChildren=function(){this.updateContent();var t=this.getChildrenContainer(),e=this.childrenView||new ZD({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});e.render(t),this.childrenView=e;for(var r=Array.prototype.slice.call(e.el.childNodes),o=0,a=r.length;o<a;o++)t.appendChild(r.shift())},n.prototype.renderAttributes=function(t,e,r){r===void 0&&(r={}),!r.skipViewUpdate&&(this.updateAttributes(),this.updateClasses())},n.prototype.onAttrUpdate=function(){},n.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary?this:(this.renderChildren(),this.updateScript(),(0,Zt.setViewEl)(this.el,this),this.postRender(),this)},n.prototype.postRender=function(){if(!this.modelOpt.temporary){var t=this,e=t.model,r=t.el;this.onRender(this._clbObj()),e.emitWithEditor(In.I.render,{component:e,view:this,el:r}),this.rendered=!0}},n.getEvents=function(){return(0,J.result)(this.prototype,"events")},n}(ye.Ss);const lr=l9;var u9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),c9=function(i){u9(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n}(lr);const f9=c9;var d9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),h9=function(i){d9(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.initialize=function(t){t===void 0&&(t={}),i.prototype.initialize.call(this,t),this.postRender=this.postRender.bind(this),this.listenTo(this.model.components(),"reset",this.postRender),this.dataResolverListener=new Ag({em:this.em,resolver:this.model.dataResolver,onUpdate:this.postRender})},n.prototype.renderDataResolver=function(){var t=this.model.getIfTrueContent(),e=this.model.getIfFalseContent(),r=t==null?void 0:t.getEl(),o=e==null?void 0:e.getEl(),a=this.model.isTrue();r&&(r.style.display=a?"":"none"),o&&(o.style.display=a?"none":"")},n.prototype.postRender=function(){this.renderDataResolver(),i.prototype.postRender.call(this)},n.prototype.remove=function(){return this.stopListening(this.model.components(),"reset",this.postRender),this.dataResolverListener.destroy(),i.prototype.remove.call(this)},n}(lr);const p9=h9;var v9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),g9=function(i){v9(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.initialize=function(t){var e=this;t===void 0&&(t={}),i.prototype.initialize.call(this,t),this.dataResolverListener=new Ag({em:this.em,resolver:this.model.dataResolver,onUpdate:function(){return e.postRender()}})},n.prototype.remove=function(){return this.dataResolverListener.destroy(),i.prototype.remove.call(this)},n.prototype.postRender=function(){var t=this.model,e=t.getDataResolver(),r=!!e.asPlainText;r?this.el.textContent=t.getDataValue():this.el.innerHTML=t.getDataValue(),i.prototype.postRender.call(this)},n}(lr);const m9=g9;var y9=function(){return{stylePrefix:"comp-",components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,useFrameDoc:!1,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]}};const b9=y9;var w9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),O0=function(){return O0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},O0.apply(this,arguments)},x9=function(i){w9(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return O0(O0({},i.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(){var t=this.content,e=this.parent();return e!=null&&e.is("script")?t:this.__escapeContent(t)},n.prototype.__escapeContent=function(t){return(0,Zt.escapeNodeContent)(t)},n.isComponent=function(t){var e;if(t.nodeType===3)return{type:"textnode",content:(e=t.textContent)!==null&&e!==void 0?e:""}},n}(Wr);const QD=x9;var S9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),c_=function(){return c_=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},c_.apply(this,arguments)},_9=function(i){S9(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return c_({},i.prototype.defaults)},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(){return"<!--".concat(this.content,"-->")},n.isComponent=function(t){var e;if(t.nodeType==8)return{type:"comment",content:(e=t.textContent)!==null&&e!==void 0?e:""}},n}(QD);const C9=_9;var T9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),A0=function(){return A0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},A0.apply(this,arguments)},Nx="iframe",E9=function(i){T9(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return A0(A0({},i.prototype.defaults),{type:Nx,tagName:Nx,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Zt.toLowerCase)(t.tagName)===Nx},n}(Wr);const O9=E9;var A9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),k0=function(){return k0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},k0.apply(this,arguments)},QO='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',k9=function(i){A9(n,i);function n(t,e){t===void 0&&(t={});var r=i.call(this,t,e)||this,o=r.get("attributes").src;return o&&(0,Zt.buildBase64UrlFromSvg)((0,J.result)(r,"defaults").src)!==o&&r.set("src",o,{silent:!0}),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return k0(k0({},i.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(QO,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat(QO,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),n.prototype.initToolbar=function(){i.prototype.initToolbar.call(this);var t=this.em;if(t){var e=t.Commands,r="image-editor";if(e.has(r)){for(var o=!1,a=this.get("toolbar"),s=0;s<a.length;s++)if(a[s].command==="image-editor"){o=!0;break}o||(a.push({attributes:{class:"fa fa-pencil"},command:r}),this.set("toolbar",a))}}},n.prototype.getAttrToHTML=function(){var t=i.prototype.getAttrToHTML.call(this),e=this.getSrcResult();return e&&(t.src=e),t},n.prototype.getSrcResult=function(t){t===void 0&&(t={});var e=this.get(t.fallback?"fallback":"src")||"",r=e;return e&&e.substr(0,4)==="<svg"&&(r=(0,Zt.buildBase64UrlFromSvg)(e)),r},n.prototype.isDefaultSrc=function(){var t=this.get("src"),e=(0,J.result)(this,"defaults").src;return t===e||t===(0,Zt.buildBase64UrlFromSvg)(e)},n.prototype.toJSON=function(t){var e=i.prototype.toJSON.call(this,t),r=e.attributes;return r&&e.src===r.src&&delete e.src,e},n.prototype.parseUri=function(t){var e={},r=function(o){o===void 0&&(o="");for(var a={},s=o.substring(1).split("&"),u=0;u<s.length;u++){var c=s[u].split("="),h=decodeURIComponent(c[0]);h&&(a[h]=decodeURIComponent(c[1]||""))}return a};if((0,Zt.hasWin)())e=document.createElement("a"),e.href=t;else if(typeof URL<"u")try{e=new URL(t)}catch{}return{hostname:e.hostname||"",pathname:e.pathname||"",protocol:e.protocol||"",search:e.search||"",hash:e.hash||"",port:e.port||"",query:r(e.search)}},n.isComponent=function(t){return(0,Zt.toLowerCase)(t.tagName)==="img"},n}(Wr);const U1=k9;var M9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),M0=function(){return M0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},M0.apply(this,arguments)},D9=function(i){M9(n,i);function n(t,e){t===void 0&&(t={});var r=i.call(this,t,e)||this;return r.__checkInnerChilds(),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return M0(M0({},i.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.__checkInnerChilds=function(){var t=this.em.Components.config.disableTextInnerChilds;if(t){var e=function(r){r.isInstanceOf("textnode")||r.set({locked:!0,layerable:!1})};(0,J.isFunction)(t)?this.forEachChild(function(r){t(r)&&e(r)}):this.forEachChild(e)}},n}(Wr);const V1=D9;var P9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),D0=function(){return D0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},D0.apply(this,arguments)},Rx="label",N9=function(i){P9(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return D0(D0({},i.prototype.defaults),{type:Rx,tagName:Rx,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Zt.toLowerCase)(t.tagName)===Rx},n}(V1);const R9=N9;var L9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),P0=function(){return P0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},P0.apply(this,arguments)},tA="link",j9=function(i){L9(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return P0(P0({},i.prototype.defaults),{type:tA,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t,e){e===void 0&&(e={});var r;if((0,Zt.toLowerCase)(t.tagName)==="a"){var o=e.textTags||[];r={type:tA,editable:!1};var a=t.childNodes,s=a.length;s||delete r.editable,(0,J.forEach)(a,function(u){var c=u.tagName;(u.nodeType==3&&u.textContent.trim()!==""||c&&o.indexOf((0,Zt.toLowerCase)(c))>=0)&&delete r.editable})}return r},n}(V1);const I9=j9;var B9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),N0=function(){return N0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},N0.apply(this,arguments)},U9=function(i){B9(n,i);function n(t,e){t===void 0&&(t={});var r=i.call(this,t,e)||this;return r.get("src")?r.parseFromSrc():r.updateSrc(),r.listenTo(r,"change:address change:zoom change:mapType",r.updateSrc),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){var t=i.prototype.defaults;return N0(N0({},t),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:t.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:!0},{type:"select",label:"Map type",name:"mapType",changeProp:!0,options:[{id:"q",label:"Roadmap"},{id:"w",label:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:1,max:20,changeProp:!0}]})},enumerable:!1,configurable:!0}),n.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},n.prototype.getMapUrl=function(){var t=this.get("address"),e=this.get("zoom"),r=this.get("mapType");t=t?"&q="+t:"",e=e?"&z="+e:"",r=r?"&t="+r:"";var o=this.get("mapUrl")+"?"+t+e+r;return o+="&output=embed",o},n.prototype.parseFromSrc=function(){var t=this.parseUri(this.get("src")),e=t.query;e.q&&this.set("address",e.q),e.z&&this.set("zoom",e.z),e.t&&this.set("mapType",e.t)},n.isComponent=function(t){if((0,Zt.toLowerCase)(t.tagName)=="iframe"&&/maps\.google\.com/.test(t.src))return{type:"map",src:t.src}},n}(U1);const V9=U9;var F9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),R0=function(){return R0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},R0.apply(this,arguments)},Lx="script",H9=function(i){F9(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return R0(R0({},i.prototype.defaults),{type:Lx,tagName:Lx,droppable:!1,draggable:!1,layerable:!1,highlightable:!1})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Zt.toLowerCase)(t.tagName)===Lx},n}(Wr);const z9=H9;var W9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),L0=function(){return L0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},L0.apply(this,arguments)},jx="svg",q9=function(i){W9(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return L0(L0({},i.prototype.defaults),{type:jx,tagName:jx,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),n.prototype.getName=function(){var t=this.get("tagName"),e=this.get("custom-name");return t=t.charAt(0).toUpperCase()+t.slice(1),e||t},n.isComponent=function(t){return(0,Zt.toLowerCase)(t.tagName)===jx},n}(Wr);const tP=q9;var K9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),j0=function(){return j0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},j0.apply(this,arguments)},$9=function(i){K9(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return j0(j0({},i.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),n.isComponent=function(t,e){return e===void 0&&(e={}),!!e.inSvg},n}(tP);const G9=$9;var Y9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),I0=function(){return I0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},I0.apply(this,arguments)},Ix="table",X9=function(i){Y9(n,i);function n(t,e){t===void 0&&(t={});var r=i.call(this,t,e)||this,o=r.get("components");return!o.length&&o.add({type:"tbody"}),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return I0(I0({},i.prototype.defaults),{type:Ix,tagName:Ix,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Zt.toLowerCase)(t.tagName)===Ix},n}(Wr);const J9=X9;var Z9=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),B0=function(){return B0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},B0.apply(this,arguments)},Bx="tbody",Q9=function(i){Z9(n,i);function n(t,e){t===void 0&&(t={});var r=i.call(this,t,e)||this,o=r.get("components"),a=r.get("columns"),s=r.get("rows");if(!o.length){for(var u=[];s--;){for(var c=[],h=a;h--;)c.push({type:"cell",classes:["cell"]});u.push({type:"row",classes:["row"],components:c})}o.add(u)}return r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return B0(B0({},i.prototype.defaults),{type:Bx,tagName:Bx,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Zt.toLowerCase)(t.tagName)===Bx},n}(Wr);const F1=Q9;var tW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),U0=function(){return U0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},U0.apply(this,arguments)},eW=function(i){tW(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return U0(U0({},i.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return["td","th"].indexOf((0,Zt.toLowerCase)(t.tagName))>=0},n}(Wr);const nW=eW;var rW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),V0=function(){return V0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},V0.apply(this,arguments)},Ux="tfoot",iW=function(i){rW(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return V0(V0({},i.prototype.defaults),{type:Ux,tagName:Ux})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Zt.toLowerCase)(t.tagName)===Ux},n}(F1);const oW=iW;var aW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),F0=function(){return F0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},F0.apply(this,arguments)},Vx="thead",sW=function(i){aW(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return F0(F0({},i.prototype.defaults),{type:Vx,tagName:Vx})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Zt.toLowerCase)(t.tagName)===Vx},n}(F1);const lW=sW;var uW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),H0=function(){return H0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},H0.apply(this,arguments)},eA="tr",cW=function(i){uW(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return H0(H0({},i.prototype.defaults),{tagName:eA,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Zt.toLowerCase)(t.tagName)===eA},n}(Wr);const fW=cW;var dW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),z0=function(){return z0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},z0.apply(this,arguments)},Fx="video",th="yt",eh="vi",nh="ytnc",nA="so",Hx=function(i){return i&&i!=="0"},hW=function(i){dW(n,i);function n(t,e){t===void 0&&(t={});var r=i.call(this,t,e)||this;return r.get("src")&&r.parseFromSrc(),r.updatePropsFromAttr(),r.updateTraits(),r.on("change:provider",r.updateTraits),r.on("change:videoId change:provider",r.updateSrc),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return z0(z0({},i.prototype.defaults),{type:Fx,tagName:Fx,videoId:"",void:!1,provider:nA,ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:!1,poster:"",muted:!1,autoplay:!1,controls:!0,color:"",list:"",src:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),n.prototype.updatePropsFromAttr=function(){if(this.get("provider")===nA){var t=this.get("attributes"),e=t.controls,r=t.autoplay,o=t.loop,a=t.muted,s={};(0,Zt.isDef)(e)&&(s.controls=!!e),(0,Zt.isDef)(r)&&(s.autoplay=!!r),(0,Zt.isDef)(o)&&(s.loop=!!o),(0,Zt.isDef)(a)&&(s.muted=!!a),(0,Zt.isEmptyObj)(s)||this.set(s)}},n.prototype.updateTraits=function(){var t=this.em,e=this.get("provider"),r="iframe",o;switch(e){case th:case nh:o=this.getYoutubeTraits();break;case eh:o=this.getVimeoTraits();break;default:r="video",o=this.getSourceTraits()}this.set({tagName:r},{silent:!0}),this.set({traits:o}),t.get("ready")&&t.trigger("component:toggled")},n.prototype.parseFromSrc=function(){var t=this.get("provider"),e=this.parseUri(this.get("src")),r=e.query;switch(t){case th:case nh:case eh:this.set("videoId",e.pathname.split("/").pop()),r.list&&this.set("list",r.list),Hx(r.autoplay)&&this.set("autoplay",!0),Hx(r.loop)&&this.set("loop",!0),parseInt(r.controls)===0&&this.set("controls",!1),Hx(r.color)&&this.set("color",r.color),r.rel==="0"&&this.set("rel",0),r.modestbranding==="1"&&this.set("modestbranding",1),r.muted==="1"&&this.set("muted",!0);break}},n.prototype.updateSrc=function(){var t=this.get("provider"),e="";switch(t){case th:e=this.getYoutubeSrc();break;case nh:e=this.getYoutubeNoCookieSrc();break;case eh:e=this.getVimeoSrc();break}this.set({src:e})},n.prototype.getAttrToHTML=function(){var t=i.prototype.getAttrToHTML.call(this),e=this.get("provider");switch(e){case th:case nh:case eh:break;default:t.loop=!!this.get("loop"),t.autoplay=!!this.get("autoplay"),t.controls=!!this.get("controls"),t.muted=!!this.get("muted")}return t},n.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:th,name:"Youtube"},{value:nh,name:"Youtube (no cookie)"},{value:eh,name:"Vimeo"}]}},n.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),this.getMutedTrait()]},n.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0},this.getMutedTrait()]},n.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getMutedTrait()]},n.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},n.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},n.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},n.prototype.getMutedTrait=function(){return{type:"checkbox",label:"Muted",name:"muted",changeProp:!0}},n.prototype.getYoutubeSrc=function(){var t=this.get("videoId"),e=this.get("ytUrl"),r=this.get("list");return e+=t+(t.indexOf("?")<0?"?":""),e+=r?"&list=".concat(r):"",e+=this.get("autoplay")?"&autoplay=1":"",e+=this.get("muted")?"&mute=1":"",e+=this.get("controls")?"":"&controls=0&showinfo=0",e+=this.get("loop")?"&loop=1&playlist=".concat(t):"",e+=this.get("rel")?"":"&rel=0",e+=this.get("modestbranding")?"&modestbranding=1":"",e},n.prototype.getYoutubeNoCookieSrc=function(){var t=this.getYoutubeSrc();return t=t.replace(this.get("ytUrl"),this.get("ytncUrl")),t},n.prototype.getVimeoSrc=function(){var t=this.get("viUrl");return t+=this.get("videoId")+"?",t+=this.get("autoplay")?"&autoplay=1":"",t+=this.get("muted")?"&muted=1":"",t+=this.get("loop")?"&loop=1":"",t+=this.get("controls")?"":"&title=0&portrait=0&badge=0",t+=this.get("color")?"&color="+this.get("color"):"",t},n.isComponent=function(t){var e=t.tagName,r=t.src,o=/youtube\.com\/embed/.test(r),a=/youtube-nocookie\.com\/embed/.test(r),s=/player\.vimeo\.com\/video/.test(r),u=o||a||s;if((0,Zt.toLowerCase)(e)==Fx||(0,Zt.toLowerCase)(e)=="iframe"&&u){var c={type:"video"};return r&&(c.src=r),u&&(o?c.provider=th:a?c.provider=nh:s&&(c.provider=eh)),c}},n}(U1);const pW=hW;var vW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ph=function(){return ph=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},ph.apply(this,arguments)},gW=function(i){vW(n,i);function n(t,e){t===void 0&&(t={});var r=i.call(this,t,e)||this;r._resolverCurrentItem=0,r._isWatchingCollectionStateMap=!1;var o=r.dataResolverProps;return o&&(r.onDataSourceChange(),r.syncComponentsCollectionState()),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return ph(ph({},i.prototype.defaults),{dataResolver:null,tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],doctype:"",head:null,docEl:null,stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),n.prototype.preInit=function(){var t,e,r=this,o=r.opt,a=r.attributes,s=(t=this.em)===null||t===void 0?void 0:t.Components,u=(e=s==null?void 0:s.getType(Mh))===null||e===void 0?void 0:e.model,c=s==null?void 0:s.getType("default").model;if(u){var h=a.head,v=a.docEl;this.set({head:h&&h instanceof Wr?h:new u(ph({},h),o),docEl:v&&v instanceof Wr?v:new c(ph({tagName:"html"},v),o)},{silent:!0})}},Object.defineProperty(n.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"docEl",{get:function(){return this.get("docEl")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"doctype",{get:function(){return this.attributes.doctype||""},enumerable:!1,configurable:!0}),n.prototype.clone=function(t){var e=i.prototype.clone.call(this,t);return e.set("head",this.get("head").clone(t)),e.set("docEl",this.get("docEl").clone(t)),e},n.prototype.toHTML=function(t){t===void 0&&(t={});var e=this.doctype,r=(0,J.isUndefined)(t.asDocument)?!!e:t.asDocument,o=this,a=o.head,s=o.docEl,u=i.prototype.toHTML.call(this,t),c=r&&(a==null?void 0:a.toHTML(t))||"",h=r&&(0,Ce.kk)(s==null?void 0:s.getAttrToHTML())||"",v=h?" ".concat(h):"";return r?"".concat(e,"<html").concat(v,">").concat(c).concat(u,"</html>"):u},n.prototype.onCollectionsStateMapUpdate=function(t){var e=this.head;i.prototype.onCollectionsStateMapUpdate.call(this,t),e.onCollectionsStateMapUpdate(t)},n.prototype.syncComponentsCollectionState=function(){i.prototype.syncComponentsCollectionState.call(this),this.head.syncComponentsCollectionState()},n.prototype.syncOnComponentChange=function(t,e,r){var o=this.getCollectionsStateMap();this.collectionsStateMap=o,i.prototype.syncOnComponentChange.call(this,t,e,r),this.onCollectionsStateMapUpdate(o)},Object.defineProperty(n.prototype,"resolverCurrentItem",{get:function(){return this._resolverCurrentItem},set:function(t){this._resolverCurrentItem=t,this.onCollectionsStateMapUpdate(this.getCollectionsStateMap())},enumerable:!1,configurable:!0}),n.prototype.setResolverCurrentItem=function(t){this.resolverCurrentItem=t},n.prototype.onDataSourceChange=function(){this.onCollectionsStateMapUpdate(this.getCollectionsStateMap())},n.prototype.listenToPropsChange=function(){var t=this;this.on("change:dataResolver",function(e,r){var o=!(0,J.isUndefined)(r);o&&!t._isWatchingCollectionStateMap?(t._isWatchingCollectionStateMap=!0,t.syncComponentsCollectionState(),t.onCollectionsStateMapUpdate(t.getCollectionsStateMap()),t.listenToDataSource()):!o&&t._isWatchingCollectionStateMap&&(t._isWatchingCollectionStateMap=!1,t.stopSyncComponentCollectionState())}),this.listenToDataSource()},n.prototype.getCollectionsStateMap=function(){var t,e=this,r=e.dataResolverPath,o=e.resolverCurrentItem,a=e.em,s=a.DataSources;if(!r)return{};var u=pg.rootData,c=this.getDataSourceItems(),h=(0,J.isNumber)(o)?c[o]:(0,J.isString)(o)?s.getValue("".concat(r,".").concat(o)):c;return t={},t[u]={collectionId:u,currentItem:h},t},n.prototype.__postAdd=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return!this.__hasUm&&(e==null||e.add(this)),i.prototype.__postAdd.call(this)},n.prototype.__postRemove=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return e==null||e.remove(this),i.prototype.__postRemove.call(this)},n.isComponent=function(){return!1},n}(JD);const mW=gW;var yW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),W0=function(){return W0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},W0.apply(this,arguments)},bW=function(i){yW(n,i);function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=i.apply(this,t)||this;r.refreshDbn=(0,J.debounce)(function(){return r.refresh()},0);var o=r.events;return r.on(o.update,r.onUpdate),r.on(o.updateInside,r.onUpdateDeep),r}return n.prototype.removeChildren=function(t,e,r){var o;r===void 0&&(r={}),i.prototype.removeChildren.call(this,t,e,r),(o=ua(t))===null||o===void 0||o.forEach(function(a){return Vb(a,{skipRefs:!0})}),this.__trgEvent(this.events.symbolMainRemove,{component:t})},n.prototype.onAdd=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.onAdd.apply(this,t);var r=t[0];this.__trgEvent(this.events.symbolMainAdd,{component:r})},n.prototype.onUpdate=function(t){this.__trgEvent(this.events.symbolMainUpdate,t)},n.prototype.onUpdateDeep=function(t){this.__trgEvent(this.events.symbolMainUpdateDeep,t)},n.prototype.refresh=function(){var t=this,e=t.em,r=t.events;e.trigger(r.symbol)},n.prototype.__trgEvent=function(t,e,r){r===void 0&&(r=!1);var o=this,a=o.em,s=o.events,u=r?s.symbolInstance:s.symbolMain;a.trigger(t,e),a.trigger(u,W0(W0({},e),{event:t})),this.refreshDbn()},n}(yg);const wW=bW;var xW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),SW=function(i){xW(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype._setAttributes=function(){},n.prototype.renderAttributes=function(){},n.prototype.updateStatus=function(){},n.prototype.updateClasses=function(){},n.prototype.setAttribute=function(){},n.prototype.updateAttributes=function(){},n.prototype.initClasses=function(){},n.prototype.initComponents=function(){},n.prototype.delegateEvents=function(){return this},n.prototype._createElement=function(){return document.createTextNode("")},n.prototype.render=function(){var t=this,e=t.model,r=t.el;return e.opt.temporary?this:(r.textContent=e.content,this)},n}(lr);const eP=SW;var _W=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),CW=function(i){_W(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype._createElement=function(){return document.createComment(this.model.content)},n}(eP);const TW=CW;var EW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),OW=function(i){EW(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.initialize=function(t){i.prototype.initialize.call(this,t),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},n.prototype.updateSrc=function(){var t=(0,Ce.I6)(this.el,"iframe")[0];t&&(0,Ce.X6)(t,{src:this.__getSrc()})},n.prototype.render=function(){i.prototype.render.call(this);var t=(0,Ce.a_)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(t),this},n.prototype.__getSrc=function(){return this.model.getAttributes().src||""},n}(lr);const AW=OW;var kW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),MW=function(i){kW(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.tagName=function(){return"img"},n.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},n.prototype.initialize=function(t){i.prototype.initialize.call(this,t),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},n.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var t=this,e=t.model,r=t.em,o=e.get("file");if(o&&r){var a=r.Assets.FileUploader();a==null||a.uploadFile({dataTransfer:{files:[o]}},function(s){var u=s&&s.data&&s.data[0],c=u&&((0,J.isString)(u)?u:u.src);c&&e.set({src:c})},{componentView:this,file:o}),e.set("file","")}}},n.prototype.updateSrc=function(){var t=this.model;t.addAttributes({src:t.getSrcResult()}),this.updateClasses()},n.prototype.updateClasses=function(){i.prototype.updateClasses.call(this);var t=this,e=t.el,r=t.classEmpty,o=t.model,a=o.getSrcResult()&&!o.isDefaultSrc(),s=a?"remove":"add";e.classList[s](r)},n.prototype.onActive=function(t){t==null||t.stopPropagation();var e=this,r=e.em,o=e.model,a=r==null?void 0:r.Assets;a&&o.get("editable")&&a.open({select:function(s,u){o.set({src:s.getSrc()}),u&&a.close()},target:o,types:["image"],accept:"image/*"})},n.prototype.onError=function(){var t=this,e=t.model,r=t.el,o=e.getSrcResult({fallback:!0});o&&(r.srcset&&(r.srcset=""),r.src=o)},n.prototype.onLoad=function(){this.em.Canvas.refresh({all:!0})},n.prototype.noDrag=function(t){return t.preventDefault(),!1},n.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var t=this,e=t.$el,r=t.model,o=e.attr("class")||"";return!r.get("src")&&e.attr("class","".concat(o," ").concat(this.classEmpty).trim()),this.postRender(),this},n}(lr);const H1=MW;var DW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bf=function(){return bf=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},bf.apply(this,arguments)},Ym=function(i,n,t,e){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(h){try{c(e.next(h))}catch(v){a(v)}}function u(h){try{c(e.throw(h))}catch(v){a(v)}}function c(h){h.done?o(h.value):r(h.value).then(s,u)}c((e=e.apply(i,n||[])).next())})},Xm=function(i,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(h){return u([c,h])}}function u(c){if(e)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(e=1,r&&(o=c[0]&2?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=n.call(i,t)}catch(h){c=[6,h],r=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},PW=function(i){DW(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},n.prototype.initialize=function(t){i.prototype.initialize.call(this,t),(0,J.bindAll)(this,"disableEditing","onDisable");var e=this.model,r=this.em;this.listenTo(e,"focus",this.onActive),this.listenTo(e,"change:content",this.updateContentText),this.listenTo(e,"sync:content",this.syncContent),this.rte=r==null?void 0:r.RichTextEditor},n.prototype.updateContentText=function(t,e,r){r===void 0&&(r={}),!r.fromDisable&&this.disableEditing()},n.prototype.canActivate=function(){var t=this,e=t.model,r=t.rteEnabled,o=t.em,a=o==null?void 0:o.getEditing(),s=a===e,u=!0,c=!1,h;if((r||!e.get("editable")||s||(c=e.isChildOf("text")))&&(u=!1,c&&!e.get("textable"))){for(var v=e.parent();v&&!v.isInstanceOf("text");)v=v.parent();v&&v.get("editable")?h=v:u=!0}return{result:u,delegate:h}},n.prototype.onActive=function(t){return Ym(this,void 0,void 0,function(){var e,r,o,a,s,u,c,h,v,m,y,_;return Xm(this,function(C){switch(C.label){case 0:return e=this,r=e.rte,o=e.em,a=this.canActivate(),s=a.result,u=a.delegate,s?((_=t==null?void 0:t.stopPropagation)===null||_===void 0||_.call(t),c=this,[4,this.getContent()]):(u&&((y=t==null?void 0:t.stopPropagation)===null||y===void 0||y.call(t),o.setSelected(u),u.trigger("active",t)),[2]);case 1:if(c.lastContent=C.sent(),!r)return[3,5];C.label=2;case 2:return C.trys.push([2,4,,5]),h=this,v=this,[4,r.enable(h,this.activeRte,{event:t,view:h})];case 3:return v.activeRte=C.sent(),[3,5];case 4:return m=C.sent(),o.logError(m),[3,5];case 5:return this.toggleEvents(!0),[2]}})})},n.prototype.onDisable=function(t){this.disableEditing(t)},n.prototype.disableEditing=function(){return Ym(this,arguments,void 0,function(t){var e,r,o,a,s,u,c,h,v;return t===void 0&&(t={}),Xm(this,function(m){switch(m.label){case 0:return e=this,r=e.model,o=e.rte,a=e.activeRte,s=e.em,u=r&&r.get("editable"),o?(c={},[4,this.getContent()]):[3,7];case 1:h=m.sent(),m.label=2;case 2:return m.trys.push([2,4,,5]),[4,o.disable(this,a,t)];case 3:return c=m.sent(),[3,5];case 4:return v=m.sent(),s.logError(v),[3,5];case 5:return u&&(h!==this.lastContent||c.forceSync)?[4,this.syncContent(bf(bf({},t),{content:h}))]:[3,7];case 6:m.sent(),this.lastContent="",m.label=7;case 7:return this.toggleEvents(),[2]}})})},n.prototype.getContent=function(){return Ym(this,void 0,void 0,function(){var t,e,r,o;return Xm(this,function(a){switch(a.label){case 0:return t=this,e=t.rte,r=t.activeRte,o="",e?[4,e.getContent(this,r)]:[3,2];case 1:o=a.sent(),a.label=2;case 2:return[2,o]}})})},n.prototype.syncContent=function(){return Ym(this,arguments,void 0,function(t){var e,r,o,a,s,u,c,h,v;return t===void 0&&(t={}),Xm(this,function(m){switch(m.label){case 0:return e=this,r=e.model,o=e.rte,a=e.rteEnabled,!a&&!t.force?[2]:(v=t.content)!==null&&v!==void 0?(u=v,[3,3]):[3,1];case 1:return[4,this.getContent()];case 2:u=m.sent(),m.label=3;case 3:return s=u,c=r.components(),h=bf({fromDisable:1},t),r.set("content","",h),o!=null&&o.customRte&&!o.customRte.parseContent?(c.length&&c.reset(void 0,bf(bf({},t),{keepIds:fh(c)})),r.set("content",s,h)):c.resetFromString(s,t),[2]}})})},n.prototype.insertComponent=function(t,e){var r;e===void 0&&(e={});var o=this,a=o.model,s=o.el,u=s.ownerDocument,c=u.getSelection();if(c!=null&&c.rangeCount){var h=c.getRangeAt(0),v=h.startContainer,m=h.startOffset,y=(0,Zt.getComponentModel)(v),_=[];if(y&&(!((r=y.is)===null||r===void 0)&&r.call(y,"textnode"))){var C=y.collection;C.forEach(function(F){if(F===y){var V="textnode",K=e.useDomContent?v.textContent||"":F.content;_.push({type:V,content:K.slice(0,m)}),_.push(t),_.push({type:V,content:K.slice(m)})}else _.push(F)});var E=_.filter(Boolean),D=E.indexOf(t);return C.reset(E,e),C.at(D)}}return a.append(t,e)},n.prototype.onInput=function(){var t=this.model,e=[In.I.update,In.I.input];e.forEach(function(r){return t.emitWithEditor(r,t)})},n.prototype.disablePropagation=function(t){t.stopPropagation()},n.prototype.toggleEvents=function(t){var e=this,r=e.em,o=e.model,a=e.$el,s={on:Ce.on,off:Ce.AU},u=t?"on":"off";r.setEditing(t?this:!1),this.rteEnabled=!!t;var c=[this.el.ownerDocument,document];if(s.off(c,"mousedown",this.onDisable),s[u](c,"mousedown",this.onDisable),r[u]("toolbar:run:before",this.onDisable),o){var h=r.RichTextEditor.events;o[u]("removed",this.onDisable),o.trigger(t?h.enable:h.disable)}if(a==null||a.off("mousedown",this.disablePropagation),a&&a[u]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var v=this.el;v;)v.draggable=!t,v=v.parentNode,v&&v.tagName=="BODY"&&(v=0)},n}(lr);const nP=PW;var NW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),RW=function(i){NW(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.render=function(){return i.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},n}(nP);const rP=RW;var LW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),jW=function(i){LW(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n}(rP);const IW=jW;var BW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),UW=function(i){BW(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.events=function(){return{}},n.prototype.initialize=function(t){i.prototype.initialize.call(this,t),this.classEmpty=this.ppfx+"plh-map"},n.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},n.prototype.getIframe=function(){if(!this.iframe){var t=document.createElement("iframe");t.src=this.model.get("src"),t.frameBorder="0",t.style.height="100%",t.style.width="100%",t.className=this.ppfx+"no-pointer",this.iframe=t}return this.iframe},n.prototype.render=function(){return i.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},n}(H1);const VW=UW;var FW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),HW=function(i){FW(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.tagName=function(){return"script"},n.prototype.events=function(){return{}},n}(lr);const zW=HW;var WW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qW=function(i){WW(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype._createElement=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},n}(lr);const rA=qW;var KW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$W=function(i){KW(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n}(lr);const GW=$W;var YW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),XW=function(i){YW(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n}(lr);const JW=XW;var ZW=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),QW=function(i){ZW(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n}(lr);const tq=QW;var eq=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nq=function(i){eq(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n}(lr);const rq=nq;var iq=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),oq=function(i){iq(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n}(lr);const aq=oq;var sq=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lq=function(i){sq(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.events=function(){return{}},n}(lr);const uq=lq;var cq=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fq=function(i){cq(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.events=function(){return{}},n.prototype.initialize=function(){lr.prototype.initialize.apply(this,arguments);var t=this.model,e=["loop","autoplay","controls","color","rel","modestbranding","poster","muted"],r=e.map(function(o){return"change:".concat(o)}).join(" ");this.listenTo(t,"change:provider",this.updateProvider),this.listenTo(t,"change:src",this.updateSrc),this.listenTo(t,r,this.updateVideo)},n.prototype.updateProvider=function(){var t=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(t))},n.prototype.updateSrc=function(){var t=this,e=t.model,r=t.videoEl;if(r){var o=e.get("provider"),a=e.get("src");switch(o){case"yt":a=e.getYoutubeSrc();break;case"ytnc":a=e.getYoutubeNoCookieSrc();break;case"vi":a=e.getVimeoSrc();break}r.src=a}},n.prototype.updateVideo=function(){var t=this,e=t.model,r=t.videoEl,o=e.get("provider");switch(o){case"yt":case"ytnc":case"vi":e.trigger("change:videoId");break;default:if(r){var a=r;a.loop=e.get("loop"),a.autoplay=e.get("autoplay"),a.controls=e.get("controls"),a.poster=e.get("poster"),a.muted=e.get("muted")}}},n.prototype.renderByProvider=function(t){var e;switch(t){case"yt":e=this.renderYoutube();break;case"ytnc":e=this.renderYoutubeNoCookie();break;case"vi":e=this.renderVimeo();break;default:e=this.renderSource()}return this.videoEl=e,e},n.prototype.renderSource=function(){var t=document.createElement("video");return t.src=this.model.get("src"),this.initVideoEl(t),t},n.prototype.renderYoutube=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.renderYoutubeNoCookie=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeNoCookieSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.renderVimeo=function(){var t=document.createElement("iframe");return t.src=this.model.getVimeoSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.initVideoEl=function(t){t.className=this.ppfx+"no-pointer",t.style.height="100%",t.style.width="100%"},n.prototype.render=function(){lr.prototype.render.apply(this),this.updateClasses();var t=this.model.get("provider");return this.el.appendChild(this.renderByProvider(t)),this.updateVideo(),this},n}(H1);const dq=fq;var hq=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pq=function(i){hq(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n}(lr);const vq=pq;var gq=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ii=function(){return Ii=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Ii.apply(this,arguments)},mq=function(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(i);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]]);return t},yq=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},vh;(function(i){i[i.InvalidSource=0]="InvalidSource",i[i.SourceReject=1]="SourceReject",i[i.TargetReject=2]="TargetReject"})(vh||(vh={}));var bq=function(i){gq(n,i);function n(t){var e=i.call(this,t,"DomComponents",new yg(void 0,{em:t}),In.I,b9())||this;e.componentTypes=[{id:Zr.collectionItem,model:Dx,view:lr},{id:Zr.conditionTrue,model:Dx,view:lr},{id:Zr.conditionFalse,model:Dx,view:lr},{id:Zr.collection,model:e9,view:f9},{id:Zr.condition,model:F7,view:p9},{id:Zr.variable,model:B7,view:m9},{id:"cell",model:nW,view:JW},{id:"row",model:fW,view:aq},{id:"table",model:J9,view:uq},{id:"thead",model:lW,view:rq},{id:"tbody",model:F1,view:GW},{id:"tfoot",model:oW,view:tq},{id:"map",model:V9,view:VW},{id:"link",model:I9,view:rP},{id:"label",model:R9,view:IW},{id:"video",model:pW,view:dq},{id:"image",model:U1,view:H1},{id:"script",model:z9,view:zW},{id:"svg-in",model:G9,view:rA},{id:"svg",model:tP,view:rA},{id:"iframe",model:O9,view:AW},{id:"comment",model:C9,view:TW},{id:"textnode",model:QD,view:eP},{id:Mh,model:f7,view:lr},{id:"wrapper",model:mW,view:vq},{id:"text",model:V1,view:nP},{id:"default",model:Wr,view:lr}],e.componentsById={},e.Component=Wr,e.Components=yg,e.ComponentView=lr,e.ComponentsView=ZD,e.storageKey="components",e.keySymbols="symbols",e.events=In.I;var r=e.config;e.symbols=new wW([],{em:t,config:r,domc:e}),t&&(e.config.components=t.config.components||e.config.components);var o=e.config.pStylePrefix;if(o&&(e.config.stylePrefix=o+e.config.stylePrefix),t){t.get("Parser").compTypes=e.componentTypes,t.on("change:componentHovered",e.componentHovered,e);var a=t.get("selected");t.listenTo(a,"add",function(s,u,c){return e.selectAdd(a.getComponent(s),c)}),t.listenTo(a,"remove",function(s,u,c){return e.selectRemove(a.getComponent(s),c)})}return e}return n.prototype.postLoad=function(){var t=this,e=t.em,r=t.symbols,o=e.UndoManager;o.add(r)},n.prototype.load=function(t){var e=this,r=this.loadProjectData(t,{onResult:function(o){var a=e.getWrapper();if(a||(e.em.Pages.add({},{select:!0}),a=e.getWrapper()),(0,J.isArray)(o))o.length&&a.components(o);else{var s=o.components,u=s===void 0?[]:s,c=mq(o,["components"]);a.set(c),a.components(u)}}});return this.symbols.reset(t[this.keySymbols]||[]),r},n.prototype.store=function(){var t;return t={},t[this.keySymbols]=this.symbols,t},n.prototype.getComponent=function(){var t=this.em.Pages.getSelected(),e=t==null?void 0:t.getMainFrame();return e==null?void 0:e.getComponent()},n.prototype.getWrapper=function(){return this.getComponent()},n.prototype.getComponents=function(){var t=this.getWrapper();return t==null?void 0:t.components()},n.prototype.addComponent=function(t,e){return e===void 0&&(e={}),this.getComponents().add(t,e)},n.prototype.render=function(){var t;return(t=this.componentView)===null||t===void 0?void 0:t.render().el},n.prototype.clear=function(t){t===void 0&&(t={});var e=this.getComponents();return e==null||e.filter(Boolean).forEach(function(r){return r.remove(t)}),this},n.prototype.setComponents=function(t,e){e===void 0&&(e={}),this.clear(e).addComponent(t,e)},n.prototype.addType=function(t,e){var r=this.em,o=e.model,a=o===void 0?{}:o,s=e.view,u=s===void 0?{}:s,c=e.isComponent,h=e.extend,v=e.extendView,m=e.extendFn,y=m===void 0?[]:m,_=e.extendFnView,C=_===void 0?[]:_,E=e.block,D=this.getType(t),F=this.getType(h),V=this.getType(v),K=F||D||this.getType("default"),Z=K.model,ct=V?V.view:K.view,ht=function(ft,lt,St){return ft.reduce(function(U,_t){var Ot=lt[_t],zt=St.prototype[_t];return Ot&&zt&&(U[_t]=function(){for(var pt=[],Dt=0;Dt<arguments.length;Dt++)pt[Dt]=arguments[Dt];zt.bind(this).apply(void 0,pt),Ot.bind(this).apply(void 0,pt)}),U},{})};if(typeof a=="object"){var st={defaults:a.defaults};delete a.defaults;var et=new Set(Z.typeExtends);et.add(Z.getDefaults().type),e.model=Z.extend(Ii(Ii({},a),ht(y,a,Z)),{typeExtends:et,isComponent:D&&!F&&!c?Z.isComponent:c||function(){return 0}}),Object.defineProperty(e.model.prototype,"defaults",{get:function(){return Ii(Ii({},(0,J.result)(Z.prototype,"defaults")||{}),(0,J.result)(st,"defaults")||{})}})}if(typeof u=="object"&&(e.view=ct.extend(Ii(Ii({},u),ht(C,u,ct)))),D?(D.model=e.model,D.view=e.view):(e.id=t,this.componentTypes.unshift(e)),E){var nt={id:t,label:t,content:{type:t}},it=E===!0?nt:Ii(Ii({},nt),E);r.Blocks.add(it.id||t,it)}var $="component:type:".concat(D?"update":"add");return r==null||r.trigger($,D||e),this},n.prototype.getType=function(t){for(var e=this.componentTypes,r=0;r<e.length;r++){var o=e[r].id;if(o==t)return e[r]}},n.prototype.removeType=function(t){var e=this.componentTypes,r=this.getType(t);if(r){var o=e.indexOf(r);return e.splice(o,1),r}},n.prototype.getTypes=function(){return this.componentTypes},n.prototype.selectAdd=function(t,e){var r=this;e===void 0&&(e={}),t&&(t.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(o){return r.em.trigger(o,t,e)}))},n.prototype.selectRemove=function(t,e){var r=this;e===void 0&&(e={}),t&&(this.em,t.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(o){return r.em.trigger(o,t,e)}))},n.prototype.componentHovered=function(){var t=this.em,e=t.get("componentHovered"),r=t.previous("componentHovered"),o="hovered";r&&r.get("status")==o&&r.set({status:"",state:""}),e&&(0,J.isEmpty)(e.get("status"))&&e.set("status",o)},n.prototype.getShallowWrapper=function(){var t=this,e=t.shallow,r=t.em;if(!e&&r){var o=r.shallow;if(!o)return;var a=o.Components;if(a.componentTypes=this.componentTypes,e=a.getWrapper(),e){var s=[my,s_].join(" ");e.on(s,(0,J.debounce)(function(){return e==null?void 0:e.components("")},100))}this.shallow=e}return e},n.prototype.isComponent=function(t){return(0,Zt.isComponent)(t)},n.prototype.addSymbol=function(t){if(!((0,J.isSymbol)(t)&&!Vf(t))){var e=t.clone({symbol:!0});return Of(e)&&this.symbols.add(e),this.em.trigger("component:toggled"),e}},n.prototype.getSymbols=function(){return yq([],this.symbols.models,!0)},n.prototype.detachSymbol=function(t){h0(t)&&Vb(t)},n.prototype.getSymbolInfo=function(t,e){e===void 0&&(e={});var r=Of(t),o=ss(t),a=!!o,s=ua(r?t:o)||[],u=o||(r?t:void 0),c=Zl(t,{changed:e.withChanges}),h=r||a,v=h&&Vf(t);return{isSymbol:h,isMain:r,isInstance:a,isRoot:v,main:u,instances:s,relatives:c||[]}},n.prototype.canMove=function(t,e,r){var o={result:!1,reason:vh.InvalidSource,target:t,source:null};if(!e||!t)return o;if(Ds(t)&&e instanceof Wr&&Ds(e)){var a=mg(t),s=Of(a)?a:ss(a),u=mg(e),c=Of(u)?u:ss(u),h=s===c,v=a!==u;if(h&&v)return Ii(Ii({},o),{reason:vh.TargetReject})}var m=(0,Zt.isComponent)(e)?e:null;if(!m){var y=this.getShallowWrapper();m=(y==null?void 0:y.append(e,{temporary:!0})[0])||null}if(o.source=m,!m)return o;var _=m.get("draggable");if((0,J.isFunction)(_))_=!!_(m,t,r);else{var C=t.getEl();_=(0,J.isArray)(_)?_.join(","):_,_=(0,J.isString)(_)?C==null?void 0:C.matches(_):_}if(!_)return Ii(Ii({},o),{reason:vh.SourceReject});var E=t.get("droppable");if((0,J.isFunction)(E))E=!!E(m,t,r);else if(E===!1&&t.isInstanceOf("text")&&m.get("textable"))E=!0;else{var C=m.getEl();E=(0,J.isArray)(E)?E.join(","):E,E=(0,J.isString)(E)?C==null?void 0:C.matches(E):E}var D=[t].concat(t.parents()).indexOf(m)>-1;return!E||D?Ii(Ii({},o),{reason:vh.TargetReject}):Ii(Ii({},o),{result:!0})},n.prototype.allById=function(){return this.componentsById},n.prototype.getById=function(t){return this.componentsById[t]||null},n.prototype.destroy=function(){var t,e=this.allById();Object.keys(e).forEach(function(r){return e[r]&&e[r].remove()}),(t=this.componentView)===null||t===void 0||t.remove(),[this.em,this.componentsById,this.componentView].forEach(function(r){return{}})},n}(lu);const wq=bq;var xq=function(){return{stylePrefix:"css-",rules:[]}};const Sq=xq;var _q=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cq=Number.MAX_VALUE,Tq=function(i){var n=/(-?\d*\.?\d+)\w{0,}/.exec(i);return n?n[0]:""},Eq=function(i){_q(n,i);function n(){var t=i.call(this)||this;return(0,J.bindAll)(t,"sortRules"),t.compCls=[],t.ids=[],t}return n.prototype.buildFromModel=function(t,e){var r=this;e===void 0&&(e={});var o="",a=this.em,s=a&&a.getConfig().avoidInlineStyle,u=t.styleToString(),c=t.classes;this.ids.push("#".concat(t.getId())),c.forEach(function(v){return r.compCls.push(v.getFullName())}),!s&&u&&(o="#".concat(t.getId(),"{").concat(u,"}"));var h=t.components();return h.forEach(function(v){return o+=r.buildFromModel(v,e)}),o},n.prototype.build=function(t,e){var r=this;e===void 0&&(e={});var o=e.json,a=e.em,s=e.cssc||(a==null?void 0:a.Css);this.em=a,this.compCls=[],this.ids=[],this.model=t;var u=[],c=t?this.buildFromModel(t,e):"",h=(0,J.isUndefined)(e.clearStyles)&&a?a.getConfig().clearStyles:e.clearStyles;if(s){var v=e.rules||s.getAll(),m={},y=[];e.onlyMatched&&t&&(0,Zt.hasWin)()&&(v=this.matchedRules(t,v)),v.forEach(function(_){var C=_.getAtRule();if(C){var E=m[C];E?E.push(_):m[C]=[_];return}var D=r.buildFromRule(_,y,e);o?u.push(D):c+=D}),this.sortMediaObject(m).forEach(function(_){var C="",E=_.key,D=_.value;D.forEach(function(F){var V=r.buildFromRule(F,y,e);F.get("singleAtRule")?c+="".concat(E,"{").concat(V,"}"):C+=V,o&&u.push(V)}),C&&(c+="".concat(E,"{").concat(C,"}"))}),a&&h&&v.remove&&v.remove(y)}return o?u.filter(function(_){return _}):c},n.prototype.buildFromRule=function(t,e,r){var o=this,a;r===void 0&&(r={});var s="",u=this.model,c=t.selectorsToString({skipAdd:1}),h=t.get("selectorsAdd"),v=t.get("singleAtRule"),m;if((a=t.get("selectors"))===null||a===void 0||a.forEach(function(_){var C=_.getFullName();(o.compCls.indexOf(C)>=0||o.ids.indexOf(C)>=0||r.keepUnusedStyles)&&(m=1)}),c&&m||h||v||!u){var y=t.getDeclaration();y&&(r.json?s=t:s+=y)}else e.push(t);return s},n.prototype.matchedRules=function(t,e){var r=this,o=t.getEl(),a=[];return e.forEach(function(s){try{s.selectorsToString().split(",").some(function(u){return o==null?void 0:o.matches(r.__cleanSelector(u))})&&a.push(s)}catch{}}),t.components().forEach(function(s){a=a.concat(r.matchedRules(s,e))}),a=a.filter(function(s,u){return a.indexOf(s)===u}),a},n.prototype.getQueryLength=function(t){var e=/(-?\d*\.?\d+)\w{0,}/.exec(t);return e?parseFloat(e[1]):Cq},n.prototype.sortMediaObject=function(t){var e=this;t===void 0&&(t={});var r=[];return(0,J.each)(t,function(o,a){return r.push({key:a,value:o})}),r.sort(function(o,a){var s=[o.key,a.key].every(function(h){return h.indexOf("min-width")!==-1}),u=s?o.key:a.key,c=s?a.key:o.key;return e.getQueryLength(u)-e.getQueryLength(c)})},n.prototype.sortRules=function(t,e){var r=function(u){return u.get("mediaText")||""},o=[r(t),r(e)].every(function(u){return u.indexOf("min-width")!==-1}),a=r(o?t:e),s=r(o?e:t);return this.getQueryLength(a)-this.getQueryLength(s)},n.prototype.__cleanSelector=function(t){return t.split(" ").map(function(e){return e.split(":")[0]}).join(" ")},n}(ye.Kx);const Oq=Eq;var Aq=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),f_=function(){return f_=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},f_.apply(this,arguments)},kq=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},zx=((0,Zt.hasWin)()?window:{}).CSS,Mq=function(i){Aq(n,i);function n(t,e){e===void 0&&(e={});var r=i.call(this,t,{em:e.em})||this;return r.views=[],r.config=t||{},r.opt=e,r.em=e.em,r.ensureSelectors(null,null,{}),r.setStyle(r.get("style"),{skipWatcherUpdates:!0}),r.on("change",r.__onChange),r}return n.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},n.prototype.__onChange=function(t,e){var r=this.em,o=this.changedAttributes();o&&!(0,Zt.isEmptyObj)(o)&&(r==null||r.changesUp(e,{rule:t,changed:o,options:e}))},n.prototype.clone=function(){var t=this.get("selectors").map(function(e){return e.clone()});return i.prototype.clone.call(this,{selectors:t})},n.prototype.ensureSelectors=function(t,e,r){var o=this.em,a=o==null?void 0:o.Selectors,s=[this,"change:selectors",this.ensureSelectors],u=this.getSelectors();if(this.stopListening.apply(this,s),u.models&&(u=kq([],u.models,!0)),u=(0,J.isString)(u)?[u]:u,Array.isArray(u)){var c=u.filter(function(h){return h}).map(function(h){return a?a.add(h):h});u=new uc(c)}this.set("selectors",u,r),this.listenTo.apply(this,s)},n.prototype.getAtRule=function(){return n.getAtRuleFromProps(this.attributes)},n.getAtRuleFromProps=function(t){var e=t.atRuleType,r=t.mediaText,o=e?"@".concat(e):r?"@media":"";return o+(r&&o?" ".concat(r):"")},n.prototype.selectorsToString=function(t){t===void 0&&(t={});var e=[],r=this.get("state"),o=this.get("selectorsAdd"),a={escape:function(c){return zx&&zx.escape?zx.escape(c):c}},s=this.getSelectors().getFullString(0,a),u=r&&!t.skipState?":".concat(r):"";return s&&e.push("".concat(s).concat(u)),o&&!t.skipAdd&&e.push(o),e.join(", ")},n.prototype.getDeclaration=function(t){t===void 0&&(t={});var e="",r=this.attributes.important,o=this.selectorsToString(t),a=this.styleToString(f_({important:r},t)),s=this.get("singleAtRule");return(o||s)&&(a||t.allowEmpty)&&(e=s?a:"".concat(o,"{").concat(a,"}")),e},n.prototype.getDevice=function(){var t=this.em,e=this.attributes,r=e.atRuleType,o=e.mediaText,a=(t==null?void 0:t.Devices.getDevices())||[],s=a.filter(function(u){return u.getWidthMedia()===""})[0];return r!=="media"||!o?s||null:a.filter(function(u){return u.getWidthMedia()===Tq(o)})[0]||null},n.prototype.getState=function(){var t=this.em,e=this.get("state"),r=(t==null?void 0:t.Selectors.getStates())||[];return r.filter(function(o){return o.getName()===e})[0]||null},n.prototype.getComponent=function(){var t,e=this.getSelectors(),r=e.length==1&&e.at(0),o=r&&r.isId()&&r.get("name");return o&&((t=this.em)===null||t===void 0?void 0:t.Components.getById(o))||null},n.prototype.toCSS=function(t){t===void 0&&(t={});var e="",r=this.getAtRule(),o=this.getDeclaration(t);return(o||t.allowEmpty)&&(e=o),r&&e&&(e="".concat(r,"{").concat(e,"}")),e},n.prototype.toJSON=function(t){var e,r=i.prototype.toJSON.call(this,t);if(!((e=this.em)===null||e===void 0)&&e.getConfig().avoidDefaults){var o=this.defaults();(0,J.forEach)(o,function(a,s){r[s]===a&&delete r[s]}),delete r.style.__p,(0,J.isEmpty)(r.selectors)&&delete r.selectors,(0,J.isEmpty)(r.style)&&delete r.style}return r},n.prototype.compare=function(t,e,r,o){var a;o===void 0&&(o={});var s=e||"",u=r||"",c=o.selectorsAdd||"",h=o.atRuleType||"",v=!(0,J.isArray)(t)&&!t.models?[t]:t.models||t;u&&!h&&(h="media");var m=v.map(function(E){return E.getFullName()}),y=(a=this.get("selectors"))===null||a===void 0?void 0:a.map(function(E){return E.getFullName()}),_=m.slice().sort(),C=y.slice().sort();return!(m.length!==y.length||!_.every(function(E,D){return E===C[D]})||this.get("state")!==s||this.get("mediaText")!==u||this.get("selectorsAdd")!==c||this.get("atRuleType")!==h)},n}(ID);const d_=Mq;var Dq=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),iP=function(i){Dq(n,i);function n(t,e){var r=i.call(this,t)||this;return r.editor=e==null?void 0:e.em,setTimeout(function(){r.on("remove",r.onRemove),r.on("add",r.onAdd)}),r}return n.prototype.toJSON=function(t){var e=ye.pM.prototype.toJSON.call(this,t);return e.filter(function(r){return r.style&&!r.shallow})},n.prototype.onAdd=function(t,e,r){t.ensureSelectors(t,e,r)},n.prototype.onRemove=function(t){var e=this.editor;e.stopListening(t),e.UndoManager.remove(t)},n.prototype.add=function(t,e){return e===void 0&&(e={}),typeof t=="string"&&(t=this.editor.get("Parser").parseCss(t)),e.em=this.editor,ye.pM.prototype.add.apply(this,[t,e])},n}(ye.pM);const iA=iP;iP.prototype.model=d_;var Pq=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Es=function(){return Es=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Es.apply(this,arguments)},Nq=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},Rq=function(i){Pq(n,i);function n(t){var e=i.call(this,t,"CssComposer",null,Vh,Sq())||this;e.classes={CssRule:d_,CssRules:iA,CssRuleView:I1,CssRulesView:n_},e.events=Vh,e.Selectors=uc,e.storageKey="styles",e._itemCache=new Map;var r=e.config,o=r.pStylePrefix;return o&&(r.stylePrefix=o+r.stylePrefix),r.rules=e.em.config.style||r.rules||"",e.rules=new iA([],r),e._setupCacheListeners(),e}return n.prototype._setupCacheListeners=function(){i.prototype._setupCacheListeners.call(this),this.em.listenTo(this.rules,"change:selectors change:state change:mediaText",this._onItemKeyChange.bind(this))},n.prototype._makeCacheKey=function(t){var e=t.getAtRule(),r=t.selectorsToString();return"".concat(e,"__").concat(r)},n.prototype._makeCacheKeyFromProps=function(t){var e=t.atRuleType,r=e===void 0?"":e,o=t.mediaText,a=o===void 0?"":o,s=t.state,u=s===void 0?"":s,c=t.selectorsAdd,h=c===void 0?"":c,v=t.selectors,m=v===void 0?[]:v,y=m.map(function(F){return(0,J.isString)(F)?F:F.toString()}).join(""),_=[];y&&_.push("".concat(y).concat(u?":".concat(u):"")),h&&_.push(h);var C=_.join(", "),E=r?"@".concat(r):a?"@media":"",D=E+(a&&E?" ".concat(a):"");return"".concat(D,"__").concat(C)},n.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0}),this._onItemsResetCache(this.rules)},n.prototype.postLoad=function(){this.em.UndoManager.add(this.getAll())},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){return this.loadProjectData(t,{all:this.rules})},n.prototype._findRule=function(t,e,r,o){var a=t;if((0,J.isString)(t)){var s=this.em.Selectors,u=t.split(",")[0].trim(),c=this.em.Parser.parserCss.checkNode({selectors:u})[0];a=s.get(c.selectors)}var h=this.rules.find(function(v){return v.compare(a,e,r,o)})||null;return h},n.prototype.add=function(t,e,r,o,a){o===void 0&&(o={}),a===void 0&&(a={});var s=e||"",u=r||"",c=Es({},o),h=this._makeCacheKeyFromProps(Es(Es({state:s,mediaText:u},c),{selectors:Array.isArray(t)?t:[t]})),v=this._itemCache.get(h);if(v&&v.config&&!v.config.singleAtRule)return v;var m=this._findRule(t,s,u,c);return m&&m.config&&!m.config.singleAtRule?(this._cacheItem(m),m):(c.state=s,c.mediaText=u,c.selectors=[],u&&!c.atRuleType&&(c.atRuleType="media"),m=new d_(c,this.config),m.get("selectors").add(t,a),this.rules.add(m,a),this._cacheItem(m),m)},n.prototype.get=function(t,e,r,o){var a=this._makeCacheKeyFromProps(Es(Es({},o),{selectors:Array.isArray(t)?t:[t],state:e,width:r,mediaText:r})),s=this._itemCache.get(a);if(s)return s;var u=this._findRule(t,e,r,o);return u&&this._cacheItem(u),u},n.prototype.getAll=function(){return this.rules},n.prototype.addCollection=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=this.em,a=[];(0,J.isString)(t)&&(t=o.Parser.parseCss(t));for(var s=t instanceof Array?t:[t],u=0,c=s.length;u<c;u++){var h=s[u]||{};if(h.selectors){var v=o==null?void 0:o.Selectors;v||console.warn("Selector Manager not found");for(var m=h.selectors,y=m instanceof Array?m:[m],_=[],C=0,E=y.length;C<E;C++){var D=v.add(y[C]);_.push(D)}var F=this.get(_,h.state,h.mediaText,h),V=this.add(_,h.state,h.mediaText,h,e),K=!F||!e.avoidUpdateStyle,Z=h.style||{};if((0,Zt.isObject)(r)&&V.set(r,e),K){var ct=e.extend?Es(Es({},V.getStyle("",{skipResolve:!0})),Z):Z;V.setStyle(ct,e)}a.push(V)}}return a},n.prototype.addRules=function(t){return this.addCollection(t)},n.prototype.setRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=r.atRuleType,a=r.atRuleParams,s=this.em.Parser.parserCss.checkNode({selectors:t,style:e})[0],u=s.state,c=s.selectorsAdd,h=this.em.Selectors,v=h.add(s.selectors),m=this.add(v,u,a,{selectorsAdd:c,atRule:o});return r.addStyles?m.addStyle(e,r):m.setStyle(e,r),m},n.prototype.getRule=function(t,e){e===void 0&&(e={});var r=this.em,o=r.Selectors,a=r.Parser.parserCss.checkNode({selectors:t})[0],s=o.get(a.selectors),u=a.state,c=a.selectorsAdd,h=e.atRuleType,v=e.atRuleParams;return s?this.get(s,u,v,{selectorsAdd:c,atRuleType:h}):void 0},n.prototype.getRules=function(t){var e=this.getAll();if(!t)return Nq([],e.models,!0);var r={sort:!0},o=(0,J.isString)(t)?t.split(",").map(function(s){return s.trim()}):t,a=e.filter(function(s){return o.indexOf(s.getSelectors().getFullString(null,r))>=0});return a},n.prototype.setIdRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=r.addOpts,a=o===void 0?{}:o,s=r.mediaText,u=r.state||"",c=(0,J.isUndefined)(s)?this.em.getCurrentMedia():s,h=this.em.Selectors,v=h.add({name:t,type:Po.TYPE_ID},a),m=this.add(v,u,c,{},a);return m.setStyle(e,Es(Es({},r),a)),m},n.prototype.getIdRule=function(t,e){e===void 0&&(e={});var r=e.mediaText,o=e.state||"",a=(0,J.isUndefined)(r)?this.em.getCurrentMedia():r,s=this.em.Selectors.get(t,Po.TYPE_ID);return s&&this.get(s,o,a)},n.prototype.setClassRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=r.state||"",a=r.mediaText||this.em.getCurrentMedia(),s=this.em.Selectors,u=s.add({name:t,type:Po.TYPE_CLASS}),c=this.add(u,o,a);return c.setStyle(e,r),c},n.prototype.getClassRule=function(t,e){e===void 0&&(e={});var r=e.state||"",o=e.mediaText||this.em.getCurrentMedia(),a=this.em.Selectors.get(t,Po.TYPE_CLASS);return a&&this.get(a,r,o)},n.prototype.remove=function(t,e){var r=(0,J.isString)(t)?this.getRules(t):t,o=Array.isArray(r)?r:[r],a=this.getAll().remove(o,e);return Array.isArray(a)?a:[a]},n.prototype.clear=function(t){return t===void 0&&(t={}),this._clearItemCache(),this.getAll().reset([],t),this},n.prototype.getComponentRules=function(t,e){e===void 0&&(e={});var r=e.state,o=e.mediaText,a=e.current;a&&(r=this.em.get("state")||"",o=this.em.getCurrentMedia());var s=t.getId(),u=this.getAll().filter(function(c){return!(0,J.isUndefined)(r)&&c.get("state")!==r||!(0,J.isUndefined)(o)&&c.get("mediaText")!==o?!1:c.getSelectorsString()==="#".concat(s)});return u},n.prototype.render=function(){var t;return(t=this.rulesView)===null||t===void 0||t.remove(),this.rulesView=new n_({collection:this.rules,config:this.config}),this.rulesView.render().el},n.prototype.checkId=function(t,e){e===void 0&&(e={});var r=e.idMap,o=r===void 0?{}:r,a=[];if(!Object.keys(o).length)return a;var s=Array.isArray(t)?t:[t];return s.forEach(function(u){var c=u.selectors;if(c&&c.length==1){var h=c[0];if((0,J.isString)(h)){if(h[0]==="#"){var v=h.substring(1),m=o[v];v&&m&&(c[0]="#".concat(m),a.push(u))}}else if(h.name&&h.type===Po.TYPE_ID){var m=o[h.name];m&&(h.name=m,a.push(u))}}}),a},n.prototype.destroy=function(){var t;this.rules.reset(),this.rules.stopListening(),(t=this.rulesView)===null||t===void 0||t.remove()},n}(lu);const Lq=Rq;var jq=function(){return{appendTo:"",blocks:[],appendOnClick:!1,custom:!1}};const Iq=jq;var Bq=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Uq=function(i){Bq(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{},dragDef:{}}},Object.defineProperty(n.prototype,"category",{get:function(){var t=this.get("category");return t instanceof kg?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),n.prototype.getId=function(){return this.id},n.prototype.getLabel=function(){return this.get("label")},n.prototype.getMedia=function(){return this.get("media")},n.prototype.getContent=function(){return this.get("content")},n.prototype.getDragDef=function(){return this.get("dragDef")},n.prototype.getCategoryLabel=function(){var t=this.get("category");return(0,J.isFunction)(t==null?void 0:t.get)?t.get("label"):t!=null&&t.label?t==null?void 0:t.label:t},n}(ye.Kx);const oP=Uq;var Vq=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),aP=function(i){Vq(n,i);function n(t,e){var r=i.call(this,t)||this;return r.em=e.em,r.on("add",r.handleAdd),r}return n.prototype.getCategories=function(){return this.em.Blocks.getCategories()},n.prototype.handleAdd=function(t){this.initCategory(t)},n}(HD);const Jm=aP;aP.prototype.model=oP;var qv;(function(i){i.add="block:add",i.remove="block:remove",i.removeBefore="block:remove:before",i.update="block:update",i.dragStart="block:drag:start",i.drag="block:drag",i.dragEnd="block:drag:stop",i.categoryUpdate="block:category:update",i.custom="block:custom",i.all="block"})(qv||(qv={}));var Fq=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gh=function(){return gh=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},gh.apply(this,arguments)},Hq=function(i){Fq(n,i);function n(t,e){e===void 0&&(e={});var r=i.call(this,t)||this,o=r.model;return r.em=e.em,r.config=e,r.endDrag=r.endDrag.bind(r),r.ppfx=e.pStylePrefix||"",r.listenTo(o,"destroy remove",r.remove),r.listenTo(o,"change",r.render),r}return n.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},n.prototype.__getModule=function(){return this.em.Blocks},n.prototype.handleClick=function(t){var e,r,o=this,a=o.config,s=o.model,u=o.em,c=s.get("onClick")||a.appendOnClick;if(u.trigger("block:click",s,t),c){if((0,J.isFunction)(c))return c(s,u==null?void 0:u.getEditor(),{event:t})}else return;var h=(e=a.getSorter)===null||e===void 0?void 0:e.call(a);if(h){var v=s.get("content"),m=this.getTempDropModel(v),y=(r=m.view)===null||r===void 0?void 0:r.el,_=y?[{element:y,dragSource:{content:v}}]:[],C=u.getSelected(),E,D,F,V=0;if(C)if(D=h.validTarget(C.getEl(),_,V),D)E=C;else{var K=C.parent();K&&(D=h.validTarget(K.getEl(),_,V),D&&(E=K,F=K.components().indexOf(C)+1))}if(!E){var Z=u.getWrapper();D=h.validTarget(Z.getEl(),_,V),D&&(E=Z)}var ct=E&&E.append(v,{at:F})[0];ct&&u.setSelected(ct,{scroll:!0})}},n.prototype.startDrag=function(t){var e,r=this,o=r.config,a=r.em,s=r.model,u=s.get("disable");if(!(t.button!==0||!o.getSorter||this.el.draggable||u)){a.refreshCanvas();var c=o.getSorter();c.__currentBlock=s;var h=this.model.get("content"),v=this.getTempDropModel(h),m=(e=v.view)===null||e===void 0?void 0:e.el,y=m?[{element:m,dragSource:{content:h}}]:[];c.startSort(y),(0,Ce.on)(document,"mouseup",this.endDrag)}},n.prototype.handleDragStart=function(t){this.__getModule().__startDrag(this.model,t)},n.prototype.handleDrag=function(t){this.__getModule().__drag(t)},n.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},n.prototype.endDrag=function(){var t,e;(0,Ce.AU)(document,"mouseup",this.endDrag);var r=(e=(t=this.config).getSorter)===null||e===void 0?void 0:e.call(t);r&&r.endDrag()},n.prototype.getTempDropModel=function(t){var e,r=this.em.Components.getComponents(),o={avoidChildren:1,avoidStore:1,avoidUpdateStyle:1},a=r.add(t,gh(gh({},o),{temporary:!0})),s=r.remove(a,gh(gh({},o),{temporary:!0}));return s=s instanceof Array?s[0]:s,(e=s.view)===null||e===void 0||e.$el.data("model",s),s},n.prototype.render=function(){var t,e=this,r=e.em,o=e.el,a=e.$el,s=e.ppfx,u=e.model,c=u.get("disable"),h=u.get("attributes")||{},v=h.class||"",m="".concat(s,"block"),y=r&&r.t("blockManager.labels.".concat(u.id))||u.get("label"),_=u.get("render"),C=u.get("media"),E=c?"".concat(m,"--disable"):"".concat(s,"four-color-h");a.attr(h),o.className="".concat(v," ").concat(m," ").concat(s,"one-bg ").concat(E).trim(),o.innerHTML=`
      `.concat(C?'<div class="'.concat(m,'__media">').concat(C,"</div>"):"",`
      <div class="`).concat(m,'-label">').concat(y,`</div>
    `),o.title=h.title||((t=o.textContent)===null||t===void 0?void 0:t.trim()),o.setAttribute("draggable","".concat(!!((0,Zt.hasDnd)(r)&&!c)));var D=_&&_({el:o,model:u,className:m,prefix:s});return D&&(o.innerHTML=D),this},n}(ye.Ss);const zq=Hq;var Wq=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qq=function(i,n){return Object.defineProperty?Object.defineProperty(i,"raw",{value:n}):i.raw=n,i},Kq=function(i){Wq(n,i);function n(t,e,r){var o=i.call(this,t)||this;o.config=e;var a=e.pStylePrefix||"";return o.em=e.em,o.catName=r,o.pfx=a,o.caretR="fa fa-caret-right",o.caretD="fa fa-caret-down",o.iconClass="".concat(a,"caret-icon"),o.activeClass="".concat(a,"open"),o.className="".concat(a).concat(r,"-category"),o.listenTo(o.model,"change:open",o.updateVisibility),o.model.view=o,o}return n.prototype.events=function(){return{"click [data-title]":"toggle"}},n.prototype.template=function(t){var e=t.pfx,r=t.label,o=t.catName;return sa(oA||(oA=qq([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `])),e,e,r,e,o)},n.prototype.attributes=function(){return this.model.get("attributes")||{}},n.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},n.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getTypeEl().style.display=""},n.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getTypeEl().style.display="none"},n.prototype.toggle=function(){var t=this.model;t.set("open",!t.get("open"))},n.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},n.prototype.getTypeEl=function(){return this.typeEl||(this.typeEl=this.el.querySelector(".".concat(this.pfx).concat(this.catName,"s-c"))),this.typeEl},n.prototype.append=function(t){this.getTypeEl().appendChild(t)},n.prototype.render=function(){var t=this,e=t.em,r=t.el,o=t.$el,a=t.model,s=t.pfx,u=t.catName,c=e.t("".concat(u,"Manager.categories.").concat(a.id))||a.get("label");return r.innerHTML=this.template({pfx:s,label:c,catName:u}),o.addClass(this.className),o.css({order:a.get("order")}),this.updateVisibility(),this},n}(ye.Ss);const sP=Kq;var oA,$q=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),q0=function(){return q0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},q0.apply(this,arguments)},Gq=function(i){$q(n,i);function n(t,e){var r=i.call(this,t)||this;r.renderedCategories=new Map,(0,J.bindAll)(r,"getSorter","onDrag","onDrop","onMove"),r.config=e||{},r.categories=t.categories||"";var o=r.config.pStylePrefix||"";r.ppfx=o,r.noCatClass="".concat(o,"blocks-no-cat"),r.blockContClass="".concat(o,"blocks-c"),r.catsClass="".concat(o,"block-categories");var a=r.collection;return r.listenTo(a,"add",r.addTo),r.listenTo(a,"reset",r.render),r.em=r.config.em,r.em&&(r.config.getSorter=r.getSorter),r}return n.prototype.__getModule=function(){return this.em.Blocks},n.prototype.updateConfig=function(t){t===void 0&&(t={}),this.config=q0(q0({},this.config),t)},n.prototype.getSorter=function(){var t=this.em;if(t){if(!this.sorter){var e=t.Utils,r=t.Canvas;this.sorter=new e.ComponentSorter({em:t,treeClass:KD,containerContext:{container:r.getBody(),containerSel:"*",itemSel:"*",pfx:this.ppfx,placeholderElement:r.getPlacerEl(),document:r.getBody().ownerDocument},dragBehavior:{dragDirection:Ff.A.BothDirections,nested:!0},positionOptions:{windowMargin:1,canvasRelative:!0},eventHandlers:{legacyOnStartSort:this.onDrag,legacyOnEndMove:this.onDrop,legacyOnMoveClb:this.onMove}})}return this.sorter}},n.prototype.onDrag=function(t){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,t)},n.prototype.onMove=function(t){this.__getModule().__drag(t)},n.prototype.onDrop=function(t){this.em.runDefault(),this.__getModule().__endDrag({component:t}),delete this.sorter.__currentBlock},n.prototype.addTo=function(t){this.add(t)},n.prototype.add=function(t,e){var r=this,o=r.config,a=r.renderedCategories,s=t.get("attributes"),u=new zq({model:t,attributes:s},o),c=u.render().el,h=t.parent.initCategory(t);if(h&&this.categories&&!o.ignoreCategories){var v=h.getId(),m=this.getCategoriesEl(),y=a.get(v);!y&&m&&(y=new sP({model:h},o,"block").render(),a.set(v,y),m.appendChild(y.el)),y==null||y.append(c);return}e?e.appendChild(c):this.append(c)},n.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},n.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},n.prototype.append=function(t){var e=this.getBlocksEl();e&&e.appendChild(t)},n.prototype.render=function(){var t=this,e=this.ppfx,r=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories=new Map,this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(a){return t.add(a,r)}),this.append(r);var o="".concat(this.blockContClass,"s ").concat(e,"one-bg ").concat(e,"two-color");return this.$el.addClass(o),this.rendered=!0,this},n}(ye.Ss);const aA=Gq;var Yq=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ec=function(){return ec=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},ec.apply(this,arguments)},Xq=function(i){Yq(n,i);function n(t){var e=i.call(this,t,"BlockManager",new Jm([],{em:t}),qv,Iq())||this;return e.events=qv,e.Block=oP,e.Blocks=Jm,e.Category=kg,e.Categories=g0,e.storageKey="",e.blocks=e.all,e.blocksVisible=new Jm(e.blocks.models,{em:t}),e.categories=new g0([],{em:t,events:{update:qv.categoryUpdate}}),e.__onAllEvent=(0,J.debounce)(function(){return e.__trgCustom()},0),e}return n.prototype.onInit=function(){var t=this,e=t.config,r=t.blocks,o=t.blocksVisible;r.on("add",function(a){return o.add(a)}),r.on("remove",function(a){return o.remove(a)}),r.on("reset",function(a){return o.reset(a.models)}),r.add(e.blocks||[])},n.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:e.container,dragStart:function(r,o){return t.startDrag(r,o)},drag:function(r){return t.__drag(r)},dragStop:function(r){return t.endDrag(r)}}},n.prototype.__startDrag=function(t,e){var r=this,o=r.em,a=r.events,s=r.blocks,u=t.getContent?t.getContent():t;this._dragBlock=t,o.set({dragResult:null,dragSource:{content:u,dragDef:t.getDragDef()}}),[o,s].map(function(c){return c.trigger(a.dragStart,t,e)})},n.prototype.__drag=function(t){var e=this,r=e.em,o=e.events,a=e.blocks,s=this._dragBlock;[r,a].map(function(u){return u.trigger(o.drag,s,t)})},n.prototype.__endDrag=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.events,a=e.blocks,s=this._dragBlock,u=t.component||r.get("dragResult");if(delete this._dragBlock,u&&s){var c="activeOnRender",h=u.get&&u.get(c),v=s.get("activate")||h,m=s.get("select"),y=(0,J.isArray)(u)?u[0]:u,_=m||v&&m!==!1;_?r.setSelected(y,{activate:v}):v&&y.trigger("active"),v&&h&&y.unset(c),s.get("resetId")&&y.onAll(function(C){return C.resetId()})}r.set({dragResult:null,dragSource:void 0}),s&&[r,a].map(function(C){return C.trigger(o.dragEnd,u,s)})},n.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map(function(t){return t.view}).filter(Boolean)},n.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=ec(ec({},this._bhv||{}),t)},n.prototype.__getBehaviour=function(){return this._bhv||{}},n.prototype.startDrag=function(t,e){this.__startDrag(t,e),this.__getFrameViews().forEach(function(r){var o;return(o=r.droppable)===null||o===void 0?void 0:o.startCustom()})},n.prototype.endDrag=function(t){this.__getFrameViews().forEach(function(e){var r;return(r=e.droppable)===null||r===void 0?void 0:r.endCustom(t)}),this.__endDrag()},n.prototype.postRender=function(){var t=this,e=t.categories,r=t.config,o=t.em,a=this.blocksVisible;this.blocksView=new aA({collection:a,categories:e},ec(ec({},r),{em:o})),this.__appendTo(a.models),this.__trgCustom()},n.prototype.add=function(t,e,r){r===void 0&&(r={});var o=e||{};return o.id=t,this.blocks.add(o,r)},n.prototype.get=function(t){return this.blocks.get(t)},n.prototype.getAll=function(){return this.blocks},n.prototype.getAllVisible=function(){return this.blocksVisible},n.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},n.prototype.getCategories=function(){return this.categories},n.prototype.getContainer=function(){var t;return(t=this.blocksView)===null||t===void 0?void 0:t.el},n.prototype.getDragBlock=function(){return this._dragBlock},n.prototype.getBlocksByCategory=function(t){return FD(t||this.getAll().models)},n.prototype.render=function(t,e){e===void 0&&(e={});var r=this,o=r.categories,a=r.config,s=r.em,u=t||this.getAll().models;if(e.external){var c=new Jm(u,{em:s});return new aA({collection:c,categories:o},ec(ec({em:s},a),e)).render().el}return this.blocksView&&(this.blocksView.updateConfig(e),this.blocksView.collection.reset(u),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},n.prototype.destroy=function(){var t,e=[this.blocks,this.blocksVisible,this.categories];e.map(function(r){return r.stopListening()}),e.map(function(r){return r.reset()}),(t=this.blocksView)===null||t===void 0||t.remove()},n}(lu);const Jq=Xq;var Zq=function(){return{stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1}};const Qq=Zq;var tK=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lP=function(i){tK(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.defaults=function(){return{name:"",label:""}},n.prototype.getName=function(){return this.get("name")},n.prototype.getLabel=function(){return this.get("label")||this.getName()},n}(ye.Kx);const Wx=lP;lP.prototype.idAttribute="name";var K0;(function(i){i.add="selector:add",i.remove="selector:remove",i.removeBefore="selector:remove:before",i.update="selector:update",i.state="selector:state",i.custom="selector:custom",i.all="selector"})(K0||(K0={}));var eK=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nK=function(i,n){return Object.defineProperty?Object.defineProperty(i,"raw",{value:n}):i.raw=n,i},sA="contentEditable",rK=function(i){eK(n,i);function n(t){t===void 0&&(t={});var e=i.call(this,t)||this,r=t.config||{};return e.config=r,e.module=t.module,e.coll=t.coll||null,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.em=r.em,e.listenTo(e.model,"change:active",e.updateStatus),e}return n.prototype.template=function(){var t=this,e=t.pfx,r=t.model,o=t.config,a=r.get("label")||"";return sa(lA||(lA=nK([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),e,e,e,a,e,e,o.iconTagRemove)},n.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},n.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},n.prototype.startEditTag=function(){var t=this.em,e=this.getInputEl();e[sA]="true",e.focus(),t==null||t.setEditing(!0)},n.prototype.endEditTag=function(){var t=this,e=t.model,r=t.em,o=this.getInputEl(),a=o.textContent||"",s=r==null?void 0:r.Selectors;o[sA]="false",r==null||r.setEditing(!1),s&&s.rename(e,a)!==e&&(o.innerText=e.getLabel())},n.prototype.changeStatus=function(){var t=this.model;t.set("active",!t.getActive())},n.prototype.removeTag=function(){this.module.removeSelected(this.model)},n.prototype.updateStatus=function(){var t=this,e=t.model,r=t.$el,o=t.config,a=o.iconTagOn,s=o.iconTagOff,u=r.find("[data-tag-status]");e.get("active")?(u.html(a),r.removeClass("opac50")):(u.html(s),r.addClass("opac50"))},n.prototype.render=function(){var t=this,e=t.pfx,r=t.ppfx,o=t.$el,a=t.model,s="".concat(e,"tag"),u=["".concat(s," ").concat(r,"three-bg")];return a.get("protected")&&u.push("".concat(s,"-protected")),o.html(this.template()),o.attr("class",u.join(" ")),this.updateStatus(),this},n}(ye.Ss);const iK=rK;var lA,oK=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bv=function(i,n){return Object.defineProperty?Object.defineProperty(i,"raw",{value:n}):i.raw=n,i},aK=function(i){oK(n,i);function n(t){t===void 0&&(t={});var e=i.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.className=e.pfx+"tags",e.stateInputId=e.pfx+"states",e.stateInputC=e.pfx+"input-c",e.states=e.config.states||[];var r=e.config.em,o=e.collection;e.target=r;var a=r.Selectors;e.module=a,e.em=r,e.componentChanged=(0,J.debounce)(e.componentChanged.bind(e),0),e.checkSync=(0,J.debounce)(e.checkSync.bind(e),0);var s=In.I.update,u="".concat(s,":classes"),c="component:toggled ".concat(u),h="".concat(u," ").concat(s,":attributes:id change:state");return e.listenTo(r,c,e.componentChanged),e.listenTo(r,"styleManager:update",e.componentChanged),e.listenTo(r,h,e.__handleStateChange),e.listenTo(r,"styleable:change change:device",e.checkSync),e.listenTo(o,"add",e.addNew),e.listenTo(o,"reset",e.renderClasses),e.listenTo(o,"remove",e.tagRemoved),e.listenTo(a.getAll(),a.events.state,(0,J.debounce)(function(){return e.renderStates()},0)),e.delegateEvents(),e}return n.prototype.template=function(t){var e=t.labelInfo,r=t.labelHead,o=t.iconSync,a=t.iconAdd,s=t.pfx,u=t.ppfx;return sa(uA||(uA=bv([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),s,s,s,s,r,s,s,s,u,u,u,s,u,u,s,u,s,s,s,s,s,a,s,s,o,s,s,e,s)},n.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},n.prototype.syncStyle=function(){var t=this.em,e=this.getTarget(),r=t.Css,o={noDisabled:1},a=this.getCommonSelectors({opts:o}),s=t.get("state"),u=t.getCurrentMedia(),c=[],h=r.get(a,s,u)||r.add(a,s,u),v;this.getTargets().forEach(function(m){var y=r.getIdRule(m.getId(),{state:s,mediaText:u});v=y.getStyle(),y.setStyle({}),c.push(y)}),v&&h.addStyle(v),t.trigger("component:toggled"),t.trigger("component:sync-style",{component:e,selectors:a,mediaText:u,rule:h,ruleComponents:c,state:s})},n.prototype.tagRemoved=function(t){this.updateStateVis()},n.prototype.addNew=function(t){this.addToClasses(t)},n.prototype.startNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:"none"}),(e=this.$input)===null||e===void 0||e.show().focus()},n.prototype.endNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:""}),(e=this.$input)===null||e===void 0||e.hide().val("")},n.prototype.onInputKeyUp=function(t){var e;t.keyCode===13?(t.preventDefault(),this.addNewTag((e=this.$input)===null||e===void 0?void 0:e.val())):t.keyCode===27&&this.endNewTag()},n.prototype.checkStates=function(){var t=this.em.getState(),e=this.getStates();e&&e.val(t)},n.prototype.componentChanged=function(t){var e=t===void 0?{}:t,r=e.targets;this.updateSelection(r)},n.prototype.updateSelection=function(t){var e=t||this.getTargets();e=(0,J.isArray)(e)?e:[e];var r=[];return e&&e.length&&(r=this.getCommonSelectors({targets:e}),this.checkSync({validSelectors:r})),this.collection.reset(r),this.updateStateVis(e),this.module.__trgCustom(),r},n.prototype.getCommonSelectors=function(t){var e=t===void 0?{}:t,r=e.targets,o=e.opts,a=o===void 0?{}:o,s=r||this.getTargets();return this.module.__getCommonSelectors(s,a)},n.prototype._commonSelectors=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=this.module).__common.apply(t,e)},n.prototype.checkSync=function(){var t=this,e=t.$btnSyncEl,r=t.config,o=t.collection,a=this.getTarget(),s;if(a&&r.componentFirst&&o.length){var u=a.getStyle();s=!(0,J.isEmpty)(u)}e&&e[s?"show":"hide"]()},n.prototype.getTarget=function(){return this.target.getSelected()},n.prototype.getTargets=function(){return this.target.getSelectedAll()},n.prototype.updateStateVis=function(t){var e=this.em,r=e&&e.getConfig().avoidInlineStyle,o=this.collection.length||r?"":"none";this.getStatesC().css("display",o),this.updateSelector(t)},n.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},n.prototype.updateSelector=function(t){var e=this,r=this.el.querySelector("[data-selected]"),o=[],a=t||this.getTargets();a=(0,J.isArray)(a)?a:[a],a.forEach(function(s){return o.push(e.__getName(s))}),r&&(r.innerHTML=o.join(", ")),this.checkStates()},n.prototype.__getName=function(t){var e=this,r=e.pfx,o=e.config,a=e.em,s=o.selectedName,u=o.componentFirst,c;if((0,J.isString)(t))c=sa(cA||(cA=bv(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),r,t);else{var h=t==null?void 0:t.getSelectors();if(!h)return"";var v=h.getStyleable(),m=a.get("state"),y=t.getId?sa(fA||(fA=bv(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),r,t.getName(),r,t.getId()):"";c=this.collection.getFullString(v),c=c?sa(dA||(dA=bv(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),r,c):t.get("selectorsAdd")||y,c=u&&y?y:c,c+=m?sa(hA||(hA=bv(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),r,m):"",c=s?s({result:c,state:m,target:t}):c}return c&&'<span class="'.concat(r,'sel">').concat(c,"</span>")},n.prototype.stateChanged=function(t){var e=this.em,r=t.target.value;e.set("state",r)},n.prototype.addNewTag=function(t){var e=t.trim();e&&(this.module.addSelected({label:e}),this.endNewTag())},n.prototype.addToClasses=function(t,e){var r=e,o=this.getClasses(),a=new iK({model:t,config:this.config,coll:this.collection,module:this.module}).render().el;return r?r.appendChild(a):o.append(a),a},n.prototype.renderClasses=function(){var t=this,e=document.createDocumentFragment(),r=this.getClasses();r.empty(),this.collection.each(function(o){return t.addToClasses(o,e)}),r.append(e)},n.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},n.prototype.getStates=function(){if(!this.$states){var t=this.$el.find("[data-states]");this.$states=t[0]&&t}return this.$states},n.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},n.prototype.renderStates=function(){var t=this,e=t.module,r=t.em,o=r.t("selectorManager.emptyState"),a=e.getStates().map(function(u){var c=r.t("selectorManager.states.".concat(u.id))||u.getLabel()||u.id;return'<option value="'.concat(u.id,'">').concat(c,"</option>")}).join(""),s=this.getStates();s&&s.html('<option value="">'.concat(o,"</option>").concat(a)),this.checkStates()},n.prototype.render=function(){var t=this,e=t.em,r=t.pfx,o=t.ppfx,a=t.config,s=t.$el,u=t.el,c=a.render,h=a.iconSync,v=a.iconAdd,m={iconSync:h,iconAdd:v,labelHead:e.t("selectorManager.label"),labelInfo:e.t("selectorManager.selected"),ppfx:o,pfx:r,el:u};s.html(this.template(m));var y=c&&c(m);return y&&y!==u&&s.empty().append(y),this.$input=s.find("[data-input]"),this.$addBtn=s.find("[data-add]"),this.$classes=s.find("#"+r+"tags-c"),this.$btnSyncEl=s.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),s.attr("class","".concat(this.className," ").concat(o,"one-bg ").concat(o,"two-color")),this},n}(ye.Ss);const sK=aK;var uA,cA,fA,dA,hA,lK=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Kv=function(){return Kv=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Kv.apply(this,arguments)},qx=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},pA=function(i){return(0,J.isString)(i)&&i[0]=="#"},vA=function(i){return(0,J.isString)(i)&&i[0]=="."},uK=function(i){lK(n,i);function n(t){var e=i.call(this,t,"SelectorManager",new uc([]),K0,Qq(),{skipListen:!0})||this;e.Selector=Po,e.Selectors=uc,e.events=K0,e.storageKey="",(0,J.bindAll)(e,"__updateSelectedByComponents");var r=e,o=r.config,a=r.events,s=o.pStylePrefix;s&&(o.stylePrefix=s+o.stylePrefix),e.all=new uc(o.selectors),e.selected=new uc([],{em:t,config:o}),e.states=new ye.pM(o.states.map(function(h){return new Wx(h)}),{model:Wx}),e.model=new ye.Kx({cFirst:o.componentFirst,_undo:!0}),e.__update=(0,J.debounce)(function(){return e.__trgCustom()},0),e.__initListen({collections:[e.states,e.selected],propagate:[{entity:e.states,event:a.state}]}),t.on("change:state",function(h,v){return t.trigger(a.state,v)}),e.model.on("change:cFirst",function(h,v){return t.trigger("selector:type",v)});var u="".concat(In.I.update,":classes");t.on("component:toggled ".concat(u),e.__updateSelectedByComponents);var c="component:toggled ".concat(u," change:device styleManager:update selector:state selector:type style:target");return e.model.listenTo(t,c,function(){return e.__update()}),e}return n.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,this.__customData(t))},n.prototype.getAll=function(t){return t===void 0&&(t={}),this.all?t.array?qx([],this.all.models,!0):this.all:[]},n.prototype.__customData=function(t){return t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},n.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},n.prototype.select=function(t,e){e===void 0&&(e={});var r=Array.isArray(t)?t:[t],o=this.em.Styles.select(r,e);this.selected.reset(this.__getCommonSelectors(o));var a=this.selectorTags,s=o.filter(function(u){return u}).map(function(u){return(0,Zt.isComponent)(u)||(0,Zt.isRule)(u)&&!u.get("selectorsAdd")?u:u.getSelectorsString()});return a&&a.componentChanged({targets:s}),this},n.prototype.addSelector=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=Kv({},e);(0,J.isObject)(t)?o=t:o.name=t,pA(o.name)?(o.name=o.name.substr(1),o.type=Po.TYPE_ID):vA(o.name)&&(o.name=o.name.substr(1)),o.label&&!o.name&&(o.name=this.escapeName(o.label));var a=this,s=a.all,u=a.em,c=a.config,h=s.get(o);if(!h){var v=o instanceof Po?o:new Po(o,Kv(Kv({},r),{config:c,em:u}));return s.add(v,r)}return h},n.prototype.getSelector=function(t,e){return e===void 0&&(e=Po.TYPE_CLASS),pA(t)?(t=t.substr(1),e=Po.TYPE_ID):vA(t)&&(t=t.substr(1)),this.all.get({name:t,type:e})},n.prototype.add=function(t,e){var r=this;e===void 0&&(e={});var o=(0,J.isString)(t)?{}:e;return(0,J.isArray)(t)?t.map(function(a){return r.addSelector(a,e,o)}):this.addSelector(t,e,o)},n.prototype.addClass=function(t){var e=this,r=[];return(0,J.isString)(t)&&(t=t.trim().split(" ").filter(Boolean)),t.forEach(function(o){return r.push(e.addSelector(o))}),r},n.prototype.get=function(t,e){var r=this;if((0,J.isArray)(t)){var o=[],a=t.map(function(s){return r.getSelector(s)}).filter(Boolean);return a.forEach(function(s){return o.indexOf(s)<0&&o.push(s)}),o}else return this.getSelector(t,e)},n.prototype.remove=function(t,e){return this.__remove(t,e)},n.prototype.rename=function(t,e,r){var o=this.escapeName(e),a=this.get(o);return a||t.set({name:o,label:e},r)},n.prototype.setState=function(t){return this.em.setState(t),this},n.prototype.getState=function(){return this.em.getState()},n.prototype.getStates=function(){return qx([],this.states.models,!0)},n.prototype.setStates=function(t,e){return this.states.reset(t.map(function(r){return new Wx(r)}),e)},n.prototype.getSelected=function(){return this.__getCommon()},n.prototype.getSelectedAll=function(){return qx([],this.selected.models,!0)},n.prototype.addSelected=function(t){var e=this.add(t);this.em.getSelectedAll().forEach(function(r){r.getSelectors().add(e)})},n.prototype.removeSelected=function(t){this.em.getSelectedAll().forEach(function(e){!t.get("protected")&&e&&e.getSelectors().remove(t)})},n.prototype.duplicateSelected=function(t,e){var r=this;e===void 0&&(e={});var o=this.em,a=this.getSelected();if(!(a.indexOf(t)<0)){var s=this.getState(),u=o.getCurrentMedia(),c=o.Css.get(a,s,u),h=c==null?void 0:c.getStyle();if(o.getSelectedAll().forEach(function(m){var y=m.getSelectors();if(y.includes(t)){var _=e.suffix||" copy",C=t.getLabel(),E=r.addSelector("".concat(C).concat(_)),D=y.indexOf(t);y.remove(t),y.add(E,{at:D})}}),h){var v=o.Css.add(this.getSelected(),s,u);v.setStyle(h)}}},n.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},n.prototype.setComponentFirst=function(t){this.getConfig().componentFirst=t,this.model.set({cFirst:t})},n.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},n.prototype.escapeName=function(t){var e=this.getConfig().escapeName;return e?e(t):Po.escapeName(t)},n.prototype.render=function(t){var e=this.selectorTags,r=this.getConfig(),o=e==null?void 0:e.el;return this.selected.reset(t),this.selectorTags=new sK({el:o,collection:this.selected,module:this,config:r}),this.selectorTags.render().el},n.prototype.destroy=function(){var t=this,e=t.selectorTags,r=t.model;r.stopListening(),this.__update.cancel(),this.__destroy(),e==null||e.remove(),this.selectorTags=void 0},n.prototype.load=function(){},n.prototype.store=function(){},n.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},n.prototype.__getCommonSelectors=function(t,e){e===void 0&&(e={});var r=t.map(function(o){return o.getSelectors&&o.getSelectors().getValid(e)}).filter(Boolean);return this.__common.apply(this,r)},n.prototype.__common=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length?e.length===1?e[0]:e.length===2?e[0].filter(function(o){return e[1].indexOf(o)>=0}):e.slice(1).reduce(function(o,a){return t.__common(o,a)},e[0]):[]},n.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},n}(lu);const uP=uK;var cK=function(){return{textTags:["br","b","i","u","a","ul","ol"],textTypes:["text","textnode","comment"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,allowUnsafeAttrValue:!1,keepEmptyTextNodes:!1,convertDataGjsAttributesHyphens:!1}}};const fK=cK;var Cs,ka={MEDIA_RULE:4,FONT_FACE_RULE:5,PAGE_RULE:6,KEYFRAMES_RULE:7,COUNTER_STYLE_RULE:11,SUPPORTS_RULE:12,DOCUMENT_RULE:13,FONT_FEATURE_VALUES_RULE:14,VIEWPORT_RULE:15},Dh=(Cs={},Cs[ka.MEDIA_RULE]="media",Cs[ka.FONT_FACE_RULE]="font-face",Cs[ka.PAGE_RULE]="page",Cs[ka.KEYFRAMES_RULE]="keyframes",Cs[ka.COUNTER_STYLE_RULE]="counter-style",Cs[ka.SUPPORTS_RULE]="supports",Cs[ka.DOCUMENT_RULE]="document",Cs[ka.FONT_FEATURE_VALUES_RULE]="font-feature-values",Cs[ka.VIEWPORT_RULE]="viewport",Cs),cP=(0,J.keys)(Dh),z1=[ka.FONT_FACE_RULE,ka.PAGE_RULE,ka.COUNTER_STYLE_RULE,ka.VIEWPORT_RULE],dK=cP.filter(function(i){return z1.indexOf(Number(i))<0}).map(function(i){return Dh[i]}).concat(["container","layer"]),hK=z1.map(function(i){return Dh[i]}),fP=function(i){i===void 0&&(i="");for(var n=[],t=[],e=i.split(","),r=0,o=e.length;r<o;r++){var a=e[r].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(a)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(a)){var s=a.split(".").filter(Boolean);t.push(s)}else n.push(a)}return{result:t,add:n}},pK=function(i){for(var n=i.style,t={},e=0,r=n.length;e<r;e++){var o=n[e],a=n.getPropertyValue(o),s=n.getPropertyPriority(o);t[o]="".concat(a).concat(s?" !".concat(s):"")}return t},gA=function(i){var n=i.conditionText||i.media&&i.media.mediaText||i.name||i.selectorText||"";return n.trim()},h_=function(i,n,t){n===void 0&&(n={}),t===void 0&&(t={});var e={},r=i.length,o=i[r-1],a=o?o.split(/:(.+)/):[],s=a[1],u=t.atRule,c=t.selectorsAdd,h=t.mediaText,v=hK.indexOf(u)>=0;return v&&(e.singleAtRule=!0),u&&(e.atRuleType=u),c&&(e.selectorsAdd=c),h&&(e.mediaText=h),s&&(i[r-1]=a[0],e.state=s,a.splice(a.length-1,1)),e.selectors=i,e.style=n,e},mA=function(i){var n=i.cssText,t=n===void 0?"":n;return dK.find(function(e){return t.indexOf("@".concat(e))===0})},dP=function(i){for(var n=[],t=i.cssRules||[],e=0,r=t.length;e<r;e++){var o=t[e],a=o.type,s=!1,u="",c="",h=o.selectorText||o.keyText||"",v=z1.indexOf(a)>=0;if(v)s=!0,u=Dh[a],c=gA(o);else if(cP.indexOf("".concat(a))>=0||!a&&mA(o)){var m=dP(o),y=Dh[a]||mA(o);c=gA(o);for(var _=0,C=m.length;_<C;_++){var E=m[_];c&&(E.mediaText=c),E.atRuleType=y}n=n.concat(m)}if(!(!h&&!v)){for(var D=pK(o),F=fP(h),V=F.add,K=F.result,Z=void 0,ct=0,ht=K.length;ct<ht;ct++){var st=h_(K[ct],D,{atRule:Dh[a]});n.push(st),Z=st}if(V.length){var et=V.join(", ");if(Z)Z.selectorsAdd=et;else{var st={selectors:[],selectorsAdd:et,style:D};s&&(st.singleAtRule=s),u&&(st.atRuleType=u),c&&(st.mediaText=c),n.push(st)}}}}return n};const vK=function(i){var n=document.createElement("style");n.innerHTML=i,document.head.appendChild(n);var t=n.sheet;return document.head.removeChild(n),t?dP(t):[]};var gK=function(i,n){return n===void 0&&(n={}),{parse:function(t,e){var r=this;e===void 0&&(e={});var o=[],a=n.parserCss,s=i==null?void 0:i.Editor,u=[],c,h=i==null?void 0:i.Parser,v={input:t};h==null||h.__emitEvent(vc.cssBefore,v);var m=v.input;try{u=a?a(m,s):vK(m)}catch(y){if(c=y,e.throwOnError)throw y}return u.forEach(function(y){return o=o.concat(r.checkNode(y))}),h==null||h.__emitEvent(vc.css,{input:m,output:o,nodes:u,error:c}),o},checkNode:function(t){var e=t.selectors,r=t.style,o=[t];if((0,J.isString)(e)){var a=[],s=t,u=fP(e),c=u.result,h=u.add.join(", "),v={atRule:s.atRule,mediaText:s.params};if(c.length?c.forEach(function(y){a.push(h_(y,r,v))}):a.push(h_([],r,v)),h){var m=a[a.length-1];m.selectorsAdd=h}o=a}return o}}};const mK=gK;var yK=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),p_=function(){return p_=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},p_.apply(this,arguments)},bK=function(i){yK(n,i);function n(t){var e=i.call(this,t,"Parser",fK())||this;e.events=vc;var r=e.config;return e.parserCss=mK(t,r),e.parserHtml=jD(t,r),e}return n.prototype.parseHtml=function(t,e){e===void 0&&(e={});var r=this,o=r.em,a=r.parserHtml;return a.compTypes=o.Components.getTypes()||[],a.parse(t,this.parserCss,e)},n.prototype.parseCss=function(t){return this.parserCss.parse(t)},n.prototype.__emitEvent=function(t,e){var r=this,o=r.em,a=r.events;o.trigger(t,e),o.trigger(a.all,p_({event:t},e))},n.prototype.destroy=function(){},n}(da);const wK=bK;var xK=function(){return{id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(i){return i},onLoad:function(i){return i},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(i){return i},onLoad:function(i){return i}}}}};const SK=xK;var yA=function(i,n,t,e){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(h){try{c(e.next(h))}catch(v){a(v)}}function u(h){try{c(e.throw(h))}catch(v){a(v)}}function c(h){h.done?o(h.value):r(h.value).then(s,u)}c((e=e.apply(i,n||[])).next())})},bA=function(i,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(h){return u([c,h])}}function u(c){if(e)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(e=1,r&&(o=c[0]&2?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=n.call(i,t)}catch(h){c=[6,h],r=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},_K=function(){function i(){}return i.prototype.store=function(n){return yA(this,arguments,void 0,function(t,e){return e===void 0&&(e={}),bA(this,function(r){return this.hasLocal(e,!0)&&localStorage.setItem(e.key,JSON.stringify(t)),[2,t]})})},i.prototype.load=function(){return yA(this,arguments,void 0,function(n){var t;return n===void 0&&(n={}),bA(this,function(e){return t={},this.hasLocal(n,!0)&&(t=JSON.parse(localStorage.getItem(n.key)||"{}")),[2,t]})})},i.prototype.hasLocal=function(n,t){if(n===void 0&&(n={}),n.checkLocal&&(!(0,Zt.hasWin)()||!localStorage)){if(t)throw new Error("localStorage not available");return!1}return!0},i}();const CK=_K;function Hf(i){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Hf(i)}function TK(i){var n=this.constructor;return this.then(function(t){return n.resolve(i()).then(function(){return t})},function(t){return n.resolve(i()).then(function(){return n.reject(t)})})}const EK=TK;function OK(i){var n=this;return new n(function(t,e){if(!(i&&typeof i.length<"u"))return e(new TypeError(Hf(i)+" "+i+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(i);if(r.length===0)return t([]);var o=r.length;function a(u,c){if(c&&(Hf(c)==="object"||typeof c=="function")){var h=c.then;if(typeof h=="function"){h.call(c,function(v){a(u,v)},function(v){r[u]={status:"rejected",reason:v},--o===0&&t(r)});return}}r[u]={status:"fulfilled",value:c},--o===0&&t(r)}for(var s=0;s<r.length;s++)a(s,r[s])})}const AK=OK;function hP(i,n){this.name="AggregateError",this.errors=i,this.message=n||""}hP.prototype=Error.prototype;function kK(i){var n=this;return new n(function(t,e){if(!(i&&typeof i.length<"u"))return e(new TypeError("Promise.any accepts an array"));var r=Array.prototype.slice.call(i);if(r.length===0)return e();for(var o=[],a=0;a<r.length;a++)try{n.resolve(r[a]).then(t).catch(function(s){o.push(s),o.length===r.length&&e(new hP(o,"All promises were rejected"))})}catch(s){e(s)}})}const MK=kK;var DK=setTimeout;function pP(i){return!!(i&&typeof i.length<"u")}function PK(){}function NK(i,n){return function(){i.apply(n,arguments)}}function Nr(i){if(!(this instanceof Nr))throw new TypeError("Promises must be constructed via new");if(typeof i!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],gP(i,this)}function vP(i,n){for(;i._state===3;)i=i._value;if(i._state===0){i._deferreds.push(n);return}i._handled=!0,Nr._immediateFn(function(){var t=i._state===1?n.onFulfilled:n.onRejected;if(t===null){(i._state===1?v_:bg)(n.promise,i._value);return}var e;try{e=t(i._value)}catch(r){bg(n.promise,r);return}v_(n.promise,e)})}function v_(i,n){try{if(n===i)throw new TypeError("A promise cannot be resolved with itself.");if(n&&(Hf(n)==="object"||typeof n=="function")){var t=n.then;if(n instanceof Nr){i._state=3,i._value=n,g_(i);return}else if(typeof t=="function"){gP(NK(t,n),i);return}}i._state=1,i._value=n,g_(i)}catch(e){bg(i,e)}}function bg(i,n){i._state=2,i._value=n,g_(i)}function g_(i){i._state===2&&i._deferreds.length===0&&Nr._immediateFn(function(){i._handled||Nr._unhandledRejectionFn(i._value)});for(var n=0,t=i._deferreds.length;n<t;n++)vP(i,i._deferreds[n]);i._deferreds=null}function RK(i,n,t){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof n=="function"?n:null,this.promise=t}function gP(i,n){var t=!1;try{i(function(e){t||(t=!0,v_(n,e))},function(e){t||(t=!0,bg(n,e))})}catch(e){if(t)return;t=!0,bg(n,e)}}Nr.prototype.catch=function(i){return this.then(null,i)};Nr.prototype.then=function(i,n){var t=new this.constructor(PK);return vP(this,new RK(i,n,t)),t};Nr.prototype.finally=EK;Nr.all=function(i){return new Nr(function(n,t){if(!pP(i))return t(new TypeError("Promise.all accepts an array"));var e=Array.prototype.slice.call(i);if(e.length===0)return n([]);var r=e.length;function o(s,u){try{if(u&&(Hf(u)==="object"||typeof u=="function")){var c=u.then;if(typeof c=="function"){c.call(u,function(h){o(s,h)},t);return}}e[s]=u,--r===0&&n(e)}catch(h){t(h)}}for(var a=0;a<e.length;a++)o(a,e[a])})};Nr.any=MK;Nr.allSettled=AK;Nr.resolve=function(i){return i&&Hf(i)==="object"&&i.constructor===Nr?i:new Nr(function(n){n(i)})};Nr.reject=function(i){return new Nr(function(n,t){t(i)})};Nr.race=function(i){return new Nr(function(n,t){if(!pP(i))return t(new TypeError("Promise.race accepts an array"));for(var e=0,r=i.length;e<r;e++)Nr.resolve(i[e]).then(n,t)})};Nr._immediateFn=typeof setImmediate=="function"&&function(i){setImmediate(i)}||function(i){DK(i,0)};Nr._unhandledRejectionFn=function(n){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",n)};const m_=Nr;(0,Zt.hasWin)()&&(window.Promise=window.Promise||m_);const mP=typeof fetch=="function"?fetch.bind():function(i,n){return new m_(function(t,e){var r=new XMLHttpRequest;r.open(n.method||"get",i),r.withCredentials=n.credentials=="include";for(var o in n.headers||{})r.setRequestHeader(o,n.headers[o]);r.onload=function(a){return t({status:r.status,statusText:r.statusText,text:function(){return m_.resolve(r.responseText)}})},r.onerror=e,r.upload&&n.onProgress&&(r.upload.onprogress=n.onProgress),n.body?r.send(n.body):r.send()})};var $0=function(){return $0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},$0.apply(this,arguments)},wA=function(i,n,t,e){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(h){try{c(e.next(h))}catch(v){a(v)}}function u(h){try{c(e.throw(h))}catch(v){a(v)}}function c(h){h.done?o(h.value):r(h.value).then(s,u)}c((e=e.apply(i,n||[])).next())})},xA=function(i,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(h){return u([c,h])}}function u(c){if(e)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(e=1,r&&(o=c[0]&2?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=n.call(i,t)}catch(h){c=[6,h],r=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},LK=function(){function i(){}return i.prototype.store=function(n){return wA(this,arguments,void 0,function(t,e){return e===void 0&&(e={}),xA(this,function(r){switch(r.label){case 0:return[4,this.request(e.urlStore,this.__props(e,t),e)];case 1:return[2,r.sent()]}})})},i.prototype.load=function(){return wA(this,arguments,void 0,function(n){return n===void 0&&(n={}),xA(this,function(t){switch(t.label){case 0:return[4,this.request(n.urlLoad,this.__props(n),n)];case 1:return[2,t.sent()]}})})},i.prototype.request=function(n,t,e){return t===void 0&&(t={}),e===void 0&&(e={}),mP(n,t).then(function(r){var o=r.text(),a=(r.status/200|0)===1;return a?o:o.then(Promise.reject)}).then(function(r){var o=r&&(0,J.isString)(r);return e.contentTypeJson&&o?JSON.parse(r):r})},i.prototype.__props=function(n,t){n===void 0&&(n={});var e=n.contentTypeJson,r=n.headers||{},o=n.fetchOptions||{},a="X-Requested-With",s="Content-Type",u;if((0,J.isUndefined)(r[a])&&(r[a]="XMLHttpRequest"),(0,J.isUndefined)(r[s])&&e&&(r[s]="application/json; charset=utf-8"),t)if(e)u=JSON.stringify(t);else{u=new FormData;for(var c in t)u.append(c,t[c])}var h={method:u?"POST":"GET",credentials:n.credentials,headers:r,body:u};return $0($0({},h),(0,J.isFunction)(o)?o(h):o)},i}();const jK=LK;var y_;(function(i){i.start="storage:start",i.startStore="storage:start:store",i.startLoad="storage:start:load",i.load="storage:load",i.store="storage:store",i.after="storage:after",i.afterStore="storage:after:store",i.afterLoad="storage:after:load",i.end="storage:end",i.endStore="storage:end:store",i.endLoad="storage:end:load",i.error="storage:error",i.errorStore="storage:error:store",i.errorLoad="storage:error:load"})(y_||(y_={}));const Oo=y_;var IK=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mh=function(){return mh=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},mh.apply(this,arguments)},Kx=function(i,n,t,e){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(h){try{c(e.next(h))}catch(v){a(v)}}function u(h){try{c(e.throw(h))}catch(v){a(v)}}function c(h){h.done?o(h.value):r(h.value).then(s,u)}c((e=e.apply(i,n||[])).next())})},$x=function(i,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(h){return u([c,h])}}function u(c){if(e)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(e=1,r&&(o=c[0]&2?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=n.call(i,t)}catch(h){c=[6,h],r=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Zm="local",SA="remote",BK=function(i){IK(n,i);function n(t){var e=i.call(this,t,"StorageManager",SK())||this;e.storages={},e.events=Oo;var r=e.config;return r._disable&&(r.type=void 0),e.storages={},e.add(Zm,new CK),e.add(SA,new jK),e.setCurrent(r.type),e}return n.prototype.isAutosave=function(){return!!this.config.autosave},n.prototype.setAutosave=function(t){return this.config.autosave=!!t,this},n.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},n.prototype.setStepsBeforeSave=function(t){return this.config.stepsBeforeSave=t,this},n.prototype.add=function(t,e){return this.storages[t]=e,this},n.prototype.get=function(t){return this.storages[t]},n.prototype.getStorages=function(){return this.storages},n.prototype.getCurrent=function(){return this.config.currentStorage},n.prototype.setCurrent=function(t){return this.getConfig().currentStorage=t,this},n.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},n.prototype.getStorageOptions=function(t){return this.getCurrentOptions(t)},n.prototype.store=function(t){return Kx(this,arguments,void 0,function(e,r){var o,a,s,u,c,h;return r===void 0&&(r={}),$x(this,function(v){switch(v.label){case 0:o=this.getCurrentStorage(),a=mh(mh({},this.getCurrentOptions()),r),s=this.getRecoveryStorage(),u=this.getCurrentOptions(Zm),v.label=1;case 1:return v.trys.push([1,5,,9]),[4,this.__exec(o,a,e)];case 2:return v.sent(),c=s,c?[4,this.__exec(s,u,{})]:[3,4];case 3:c=v.sent(),v.label=4;case 4:return[3,9];case 5:return h=v.sent(),s?[4,this.__exec(s,u,e)]:[3,7];case 6:return v.sent(),[3,8];case 7:throw h;case 8:return[3,9];case 9:return[2,e]}})})},n.prototype.load=function(){return Kx(this,arguments,void 0,function(t){var e,r,o,a,s;return t===void 0&&(t={}),$x(this,function(u){switch(u.label){case 0:return e=this.getCurrentStorage(),r=mh(mh({},this.getCurrentOptions()),t),o=this.getRecoveryStorage(),o?[4,this.__exec(o,this.getCurrentOptions(Zm))]:[3,5];case 1:if(s=u.sent(),(0,J.isEmpty)(s))return[3,5];u.label=2;case 2:return u.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return u.sent(),a=s,[3,5];case 4:return u.sent(),[3,5];case 5:return a?[3,7]:[4,this.__exec(e,r)];case 6:a=u.sent(),u.label=7;case 7:return[2,a||{}]}})})},n.prototype.__askRecovery=function(){var t=this.em,e=this.getRecovery();return new Promise(function(r,o){(0,J.isFunction)(e)?e(r,o,t==null?void 0:t.getEditor()):confirm(t==null?void 0:t.t("storageManager.recover"))?r(null):o()})},n.prototype.getRecovery=function(){return this.config.recovery},n.prototype.getRecoveryStorage=function(){var t=this.getRecovery();return t&&this.getCurrent()===SA&&this.get(Zm)},n.prototype.__exec=function(t,e,r){return Kx(this,void 0,void 0,function(){var o,a,s,u,c,h,v,m,y,_,C,E,D,F;return $x(this,function(V){switch(V.label){case 0:if(o=r?"store":"load",a=this.getConfig(),s=a.onStore,u=a.onLoad,!t)return[2,r||{}];this.onStart(o,r),V.label=1;case 1:return V.trys.push([1,14,,15]),h=(F=this.em)===null||F===void 0?void 0:F.getEditor(),v=void 0,r?(y=s,y?[4,s(r,h)]:[3,3]):[3,7];case 2:y=V.sent(),V.label=3;case 3:return m=y||r,_=e.onStore,_?[4,e.onStore(m,h)]:[3,5];case 4:_=V.sent(),V.label=5;case 5:return m=_||m,[4,t.store(m,e)];case 6:return v=V.sent(),c=r,[3,13];case 7:return[4,t.load(e)];case 8:return v=V.sent(),c=this.__clearKeys(v),C=e.onLoad,C?[4,e.onLoad(c,h)]:[3,10];case 9:C=V.sent(),V.label=10;case 10:return c=C||c,E=u,E?[4,u(c,h)]:[3,12];case 11:E=V.sent(),V.label=12;case 12:c=E||c,V.label=13;case 13:return this.onAfter(o,c,v),this.onEnd(o,c,v),[3,15];case 14:throw D=V.sent(),this.onError(o,D),D;case 15:return[2,c]}})})},n.prototype.__clearKeys=function(t){t===void 0&&(t={});var e=this.getConfig(),r=new RegExp("^".concat(e.id)),o={};for(var a in t){var s=a.replace(r,"");o[s]=t[a]}return o},n.prototype.getCurrentOptions=function(t){var e=this.getConfig(),r=t||this.getCurrent();return e.options[r]||{}},n.prototype.onStart=function(t,e){var r=this.em;if(r){var o=t==="load"?Oo.startLoad:Oo.startStore;r.trigger(Oo.start,t,e),r.trigger(o,e)}},n.prototype.onAfter=function(t,e,r){var o=this.em;if(o){var a=t==="load"?Oo.afterLoad:Oo.afterStore;o.trigger(Oo.after),o.trigger(a,e,r);var s=t==="load"?Oo.load:Oo.store;o.trigger(s,e,r)}},n.prototype.onEnd=function(t,e,r){var o=this.em;if(o){var a=t==="load"?Oo.endLoad:Oo.endStore;o.trigger(Oo.end,t,e,r),o.trigger(a,e,r)}},n.prototype.onError=function(t,e){var r=this.em;if(r){var o=t==="load"?Oo.errorLoad:Oo.errorStore;r.trigger(Oo.error,e,t),r.trigger(o,e),this.onEnd(t,e)}},n.prototype.canAutoload=function(){var t=this.getCurrentStorage();return!!t&&!!this.config.autoload},n.prototype.destroy=function(){this.storages={}},n}(da);const UK=BK;var VK=function(){return{stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}],custom:!1}};const FK=VK;var HK=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$v=function(){return $v=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},$v.apply(this,arguments)},yP=function(i){HK(n,i);function n(t){t===void 0&&(t={});var e=i.call(this,t)||this;e.events={},e.appendInput=!0;var r=t.config,o=r===void 0?{}:r,a=e,s=a.model,u=a.eventCapture,c=s.target,h=s.attributes.type;e.config=o,e.em=o.em,e.pfx=o.stylePrefix||"",e.ppfx=o.pStylePrefix||"",e.target=c,e.className=e.pfx+"trait",e.clsField="".concat(e.ppfx,"field ").concat(e.ppfx,"field-").concat(h);var v=[["change:value",e.onValueChange],["remove",e.removeView]];return v.forEach(function(m){var y=m[0],_=m[1];s.off(y,_),e.listenTo(s,y,_)}),s.view=e,e.listenTo(s,"change:label",e.render),e.listenTo(s,"change:placeholder",e.rerender),e.events={},u.forEach(function(m){return e.events[m]="onChange"}),e.delegateEvents(),e.init(),e}return n.prototype.attributes=function(){return this.model.get("attributes")||{}},n.prototype.templateLabel=function(t){var e=this.ppfx,r=this.getLabel();return'<div class="'.concat(e,'label" title="').concat(r,'">').concat(r,"</div>")},n.prototype.templateInput=function(t){var e=this.clsField;return'<div class="'.concat(e,'" data-input></div>')},n.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},n.prototype.removeView=function(){this.remove(),this.removed()},n.prototype.init=function(){},n.prototype.removed=function(){},n.prototype.onRender=function(t){},n.prototype.onUpdate=function(t){},n.prototype.onEvent=function(t){},n.prototype.onChange=function(t){var e=this.getInputElem();e&&!(0,J.isUndefined)(e.value)&&this.model.set("value",e.value),this.onEvent($v($v({},this.getClbOpts()),{event:t}))},n.prototype.getValueForTarget=function(){return this.model.get("value")},n.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.value=t)},n.prototype.onValueChange=function(t,e,r){r===void 0&&(r={});var o=this.model,a=this.getValueForTarget();r.fromTarget?(this.setInputValue(a),this.postUpdate()):o.setValue(a,r)},n.prototype.renderLabel=function(){var t=this,e=t.$el,r=t.target,o=this.getLabel(),a=this.templateLabel(r);this.createLabel&&(a=this.createLabel({label:o,component:r,trait:this})||""),e.find("[data-label]").append(a)},n.prototype.getLabel=function(){var t=this.em,e=this.model.attributes,r=e.label,o=e.name;return t.t("traitManager.traits.labels.".concat(o))||(0,Zt.capitalize)(r||o).replace(/-/g," ")},n.prototype.getComponent=function(){return this.target},n.prototype.getInputEl=function(){if(!this.$input){var t=this,e=t.em,r=t.model,o=r,a=r.attributes.name,s=o.get("placeholder")||o.get("default")||"",u=o.get("type")||"text",c=o.get("min"),h=o.get("max"),v=this.getModelValue(),m=(0,xi.default)('<input type="'.concat(u,'">')),y=e.t("traitManager.traits.attributes.".concat(a))||{};m.attr($v({placeholder:s},y)),(0,J.isUndefined)(v)||(o.set({value:v},{silent:!0}),m.prop("value",v)),c&&m.prop("min",c),h&&m.prop("max",h),this.$input=m}return this.$input.get(0)},n.prototype.getInputElem=function(){var t=this,e=t.input,r=t.$input;return e||r&&r.get&&r.get(0)||this.getElInput()},n.prototype.getModelValue=function(){return this.model.getValue()},n.prototype.getElInput=function(){return this.elInput},n.prototype.renderField=function(){var t=this,e=t.$el,r=t.appendInput,o=t.model,a=e.find("[data-input]"),s=a[a.length-1],u=o.el;u||(u=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,J.isString)(u)?(s.innerHTML=u,this.elInput=s.firstChild):(r?s.appendChild(u):s.insertBefore(u,s.firstChild),this.elInput=u),o.el=this.elInput},n.prototype.hasLabel=function(){var t=this.model.attributes.label;return!this.noLabel&&t!==!1},n.prototype.rerender=function(){delete this.model.el,this.render()},n.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},n.prototype.render=function(){var t=this,e=t.$el,r=t.pfx,o=t.ppfx,a=t.model,s=a.attributes,u=s.type,c=s.id,h=this.hasLabel&&this.hasLabel(),v="".concat(r,"trait");delete this.$input;var m='<div class="'.concat(v," ").concat(v,"--").concat(u,`">
      `).concat(h?'<div class="'.concat(o,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(o,"field-wrp ").concat(o,"field-wrp--").concat(u,`" data-input>
        `).concat(this.templateInput?(0,J.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return e.empty().append(m),h&&this.renderLabel(),this.renderField(),this.el.className="".concat(v,"__wrp ").concat(v,"__wrp-").concat(c),this.postUpdate(),this.onRender(this.getClbOpts()),this},n}(ye.Ss);const au=yP;yP.prototype.eventCapture=["change"];var zK=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bP=function(i){zK(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.templateInput=function(){return""},n.prototype.onChange=function(){this.handleClick()},n.prototype.handleClick=function(){this.model.runCommand()},n.prototype.renderLabel=function(){this.model.get("label")&&au.prototype.renderLabel.apply(this)},n.prototype.getInputEl=function(){var t=this,e=t.model,r=t.ppfx,o=e.props(),a=o.labelButton,s=o.text,u=o.full,c=a||s,h="".concat(r,"btn"),v='<button type="button" class="'.concat(h,"-prim").concat(u?" ".concat(h,"--full"):"",'">').concat(c,"</button>");return v},n}(au);const WK=bP;bP.prototype.eventCapture=["click button"];var qK=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),KK=function(i){qK(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.appendInput=!1,t}return n.prototype.templateInput=function(){var t=this,e=t.ppfx,r=t.clsField;return'<label class="'.concat(r,`" data-input>
    <i class="`).concat(e,`chk-icon"></i>
  </label>`)},n.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},n.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.checked=!!t)},n.prototype.getInputEl=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=!this.$input,o=au.prototype.getInputEl.apply(this,t);if(r){var a=void 0,s=void 0,u=this,c=u.model,h=u.target,v=c.attributes.valueFalse,m=c.getName();c.changeProp?(a=h.get(m),s=a):(s=h.get("attributes")[m],a=!!(s||s==="")),!(0,J.isUndefined)(v)&&s===v&&(a=!1),o.checked=a}return o},n}(au);const $K=KK;function GK(i,n){if(!(0,Zt.hasWin)())return;var t={beforeShow:y,move:y,change:y,show:y,hide:y,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},e=[],r=!!/msie/i.exec(window.navigator.userAgent),o=function(){function A(mt,dt){return!!~(""+mt).indexOf(dt)}var W=document.createElement("div"),B=W.style;return B.cssText="background-color:rgba(0,0,0,.5)",A(B.backgroundColor,"rgba")||A(B.backgroundColor,"hsla")}(),a=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),s=function(){var A="";if(r)for(var W=1;W<=6;W++)A+="<div class='sp-"+W+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",A,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function u(A,W,B,mt){for(var dt=[],qt=0;qt<A.length;qt++){var fe=A[qt];if(fe){var de=$(fe),ae=de.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";ae+=$.equals(W,fe)?" sp-thumb-active":"";var xe=de.toString(mt.preferredFormat||"rgb"),en=o?"background-color:"+de.toRgbString():"filter:"+de.toFilter();dt.push('<span title="'+xe+'" data-color="'+de.toRgbString()+'" class="'+ae+'"><span class="sp-thumb-inner" style="'+en+';"></span></span>')}else{var dn="sp-clear-display";dt.push(i("<div />").append(i('<span data-color="" style="background-color:transparent;" class="'+dn+'"></span>').attr("title",mt.noColorSelectedText)).html())}}return"<div class='sp-cf "+B+"'>"+dt.join("")+"</div>"}function c(){for(var A=0;A<e.length;A++)e[A]&&e[A].hide()}function h(A,W){var B=i.extend({},t,A);return B.callbacks={move:C(B.move,W),change:C(B.change,W),show:C(B.show,W),hide:C(B.hide,W),beforeShow:C(B.beforeShow,W)},B}function v(A,W){var B=h(W,A),mt=B.flat,dt=B.showSelectionPalette,qt=B.localStorageKey,fe=B.theme,de=B.callbacks,ae=D(Or,10),xe=!1,en=!1,dn=!0,sn=0,Un=0,Lr=0,ot=0,Ct=0,Lt=0,ee=0,we=0,Fe=0,We=0,cn=1,Sn=[],Pn=[],zi={},Gn=B.selectionPalette.slice(0),_i=B.maxSelectionSize,Wi="sp-dragging",gn=null,ir=A.ownerDocument;ir.body;var rn=i(A),br=!1,He=i(s,ir).addClass(fe),qr=He.find(".sp-picker-container"),An=He.find(".sp-color"),wr=He.find(".sp-dragger"),xr=He.find(".sp-hue"),Sr=He.find(".sp-slider"),pn=He.find(".sp-alpha-inner"),Me=He.find(".sp-alpha"),jr=He.find(".sp-alpha-handle"),Yn=He.find(".sp-input"),Kr=He.find(".sp-palette"),ln=He.find(".sp-initial"),kn=He.find(".sp-cancel"),_r=He.find(".sp-clear"),qi=He.find(".sp-choose"),le=He.find(".sp-palette-toggle"),Be=rn.is("input"),Ki=Be&&rn.attr("type")==="color"&&F(),tt=Be&&!mt,wt=tt?i(a).addClass(fe).addClass(B.className).addClass(B.replacerClassName):i([]),Jt=tt?wt:rn,oe=wt.find(".sp-preview-inner"),pe=B.color||Be&&rn.val(),nn=!1,on=B.preferredFormat,Hn=!B.showButtons||B.clickoutFiresChange,_n=!pe,oo=B.allowEmpty&&!Ki;function $r(){if(B.showPaletteOnly&&(B.showPalette=!0),le.text(B.showPaletteOnly?B.togglePaletteMoreText:B.togglePaletteLessText),B.palette){Sn=B.palette.slice(0),Pn=i.isArray(Sn[0])?Sn:[Sn],zi={};for(var je=0;je<Pn.length;je++)for(var Le=0;Le<Pn[je].length;Le++){var mn=$(Pn[je][Le]).toRgbString();zi[mn]=!0}}He.toggleClass("sp-flat",mt),He.toggleClass("sp-input-disabled",!B.showInput),He.toggleClass("sp-alpha-enabled",B.showAlpha),He.toggleClass("sp-clear-enabled",oo),He.toggleClass("sp-buttons-disabled",!B.showButtons),He.toggleClass("sp-palette-buttons-disabled",!B.togglePaletteOnly),He.toggleClass("sp-palette-disabled",!B.showPalette),He.toggleClass("sp-palette-only",B.showPaletteOnly),He.toggleClass("sp-initial-disabled",!B.showInitial),He.addClass(B.className).addClass(B.containerClassName),Or()}function ha(){if(r&&He.find("*:not(input)").attr("unselectable","on"),$r(),tt&&rn.after(wt).hide(),oo||_r.hide(),mt)rn.after(He).hide();else{var je=B.appendTo==="parent"?rn.parent():i(B.appendTo);je.length!==1&&(je=i("body")),je.append(He)}Na(),Jt.bind("click.spectrum touchstart.spectrum",function(Re){br||ds(),Re.stopPropagation(),i(Re.target).is("input")||Re.preventDefault()}),(rn.is(":disabled")||B.disabled===!0)&&so(),He.click(_),Yn.change(Vo),Yn.bind("paste",function(){setTimeout(Vo,1)}),Yn.keydown(function(Re){Re.keyCode==13&&Vo()}),kn.text(B.cancelText),kn.bind("click.spectrum",function(Re){Re.stopPropagation(),Re.preventDefault(),vo(),Ci()}),_r.attr("title",B.clearText),_r.bind("click.spectrum",function(Re){Re.stopPropagation(),Re.preventDefault(),_n=!0,Fo(),mt&&di(!0)}),qi.text(B.chooseText),qi.bind("click.spectrum",function(Re){Re.stopPropagation(),Re.preventDefault(),r&&Yn.is(":focus")&&Yn.trigger("change"),va()&&(di(!0),Ci())}),le.text(B.showPaletteOnly?B.togglePaletteMoreText:B.togglePaletteLessText),le.bind("click.spectrum",function(Re){Re.stopPropagation(),Re.preventDefault(),B.showPaletteOnly=!B.showPaletteOnly,!B.showPaletteOnly&&!mt&&He.css("left","-="+(qr.outerWidth(!0)+5)),$r()}),E(Me,function(Re,Nn,or){cn=Re/Ct,_n=!1,or.shiftKey&&(cn=Math.round(cn*10)/10),Fo()},ao,Ra),E(xr,function(Re,Nn){we=parseFloat(Nn/ot),_n=!1,B.showAlpha||(cn=1),Fo()},ao,Ra),E(An,function(Re,Nn,or){if(!or.shiftKey)gn=null;else if(!gn){var Br=Fe*sn,qo=Un-We*Un,hi=Math.abs(Re-Br)>Math.abs(Nn-qo);gn=hi?"x":"y"}var pi=!gn||gn==="x",ni=!gn||gn==="y";pi&&(Fe=parseFloat(Re/sn)),ni&&(We=parseFloat((Un-Nn)/Un)),_n=!1,B.showAlpha||(cn=1),Fo()},ao,Ra),pe?(ei(pe),$i(),on=B.preferredFormat||$(pe).getFormat(),pa(pe)):$i(),mt&&ur();function Le(Re){return Re.data&&Re.data.ignore?(ei(i(Re.target).closest(".sp-thumb-el").data("color")),Fo()):(ei(i(Re.target).closest(".sp-thumb-el").data("color")),Fo(),B.hideAfterPaletteSelect&&(di(!0),Ci())),!1}var mn=r?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Kr.delegate(".sp-thumb-el",mn,Le),ln.delegate(".sp-thumb-el:nth-child(1)",mn,{ignore:!0},Le)}function Na(){if(qt&&window.localStorage){try{var je=window.localStorage[qt].split(",#");je.length>1&&(delete window.localStorage[qt],i.each(je,function(Le,mn){pa(mn)}))}catch{}try{Gn=window.localStorage[qt].split(";")}catch{}}}function pa(je){if(dt){var Le=$(je).toRgbString();if(!zi[Le]&&i.inArray(Le,Gn)===-1)for(Gn.push(Le);Gn.length>_i;)Gn.shift();if(qt&&window.localStorage)try{window.localStorage[qt]=Gn.join(";")}catch{}}}function Uo(){var je=[];if(B.showPalette)for(var Le=0;Le<Gn.length;Le++){var mn=$(Gn[Le]).toRgbString();zi[mn]||je.push(Gn[Le])}return je.reverse().slice(0,B.maxSelectionSize)}function cs(){var je=Qn(),Le=i.map(Pn,function(mn,Re){return u(mn,je,"sp-palette-row sp-palette-row-"+Re,B)});Na(),Gn&&Le.push(u(Uo(),je,"sp-palette-row sp-palette-row-selection",B)),Kr.html(Le.join(""))}function fs(){if(B.showInitial){var je=nn,Le=Qn();ln.html(u([je,Le],Le,"sp-palette-row-initial",B))}}function ao(){(Un<=0||sn<=0||ot<=0)&&Or(),en=!0,He.addClass(Wi),gn=null,rn.trigger("dragstart.spectrum",[Qn()])}function Ra(){en=!1,He.removeClass(Wi),rn.trigger("dragstop.spectrum",[Qn()])}function Vo(){var je=Yn.val();if((je===null||je==="")&&oo)ei(null),di(!0);else{var Le=$(je);Le.isValid()?(ei(Le),di(!0)):Yn.addClass("sp-validation-error")}}function ds(){xe?Ci():ur()}function ur(){var je=i.Event("beforeShow.spectrum");if(xe){Or();return}if(rn.trigger("beforeShow.spectrum",[Qn()]),!(de.beforeShow(Qn())===!1||je.isDefaultPrevented())){c(),xe=!0;var Le=i(ir);Le.bind("keydown.spectrum",Ir),Le.bind("click.spectrum",bl),i(window).bind("resize.spectrum",ae),wt.addClass("sp-active"),He.removeClass("sp-hidden"),Or(),$i(),nn=Qn(),fs(),de.show(nn),rn.trigger("show.spectrum",[nn])}}function Ir(je){je.keyCode===27&&Ci()}function bl(je){je.button!=2&&(en||(Hn?di(!0):vo(),Ci()))}function Ci(){!xe||mt||(xe=!1,i(ir).unbind("keydown.spectrum",Ir),i(ir).unbind("click.spectrum",bl),i(window).unbind("resize.spectrum",ae),wt.removeClass("sp-active"),He.addClass("sp-hidden"),de.hide(Qn()),rn.trigger("hide.spectrum",[Qn()]))}function vo(){ei(nn,!0)}function ei(je,Le){if($.equals(je,Qn())){$i();return}var mn,Re;!je&&oo?_n=!0:(_n=!1,dn=!je,mn=$(je),Re=mn.toHsv(),we=Re.h%360/360,Fe=Re.s,We=Re.v,cn=Re.a),$i(),mn&&mn.isValid()&&!Le&&(on=B.preferredFormat||mn.getFormat())}function Qn(je){return je=je||{},oo&&_n?null:$.fromRatio({h:we,s:Fe,v:We,a:Math.round(cn*100)/100},{format:je.format||on})}function va(){return!Yn.hasClass("sp-validation-error")}function Fo(){$i(),de.move(Qn()),rn.trigger("move.spectrum",[Qn()])}function $i(){Yn.removeClass("sp-validation-error"),La();var je=$.fromRatio({h:we,s:1,v:1});An.css("background-color",je.toHexString());var Le=on;cn<1&&!(cn===0&&Le==="name")&&(Le==="hex"||Le==="hex3"||Le==="hex6"||Le==="name")&&(Le="rgb");var mn=Qn({format:Le}),Re="";if(oe.removeClass("sp-clear-display"),oe.css("background-color","transparent"),!mn&&oo)oe.addClass("sp-clear-display");else{var Nn=mn.toHexString(),or=mn.toRgbString();if(o||mn.alpha===1?oe.css("background-color",or):(oe.css("background-color","transparent"),oe.css("filter",mn.toFilter())),B.showAlpha){var Br=mn.toRgb();Br.a=0;var qo=$(Br).toRgbString(),hi="linear-gradient(left, "+qo+", "+Nn+")";r?pn.css("filter",$(qo).toFilter({gradientType:1},Nn)):(pn.css("background","-webkit-"+hi),pn.css("background","-moz-"+hi),pn.css("background","-ms-"+hi),pn.css("background","linear-gradient(to right, "+qo+", "+Nn+")"))}Re=mn.toString(Le)}B.showInput&&Yn.val(Re),B.showPalette&&cs(),fs()}function La(){var je=Fe,Le=We;if(oo&&_n)jr.hide(),Sr.hide(),wr.hide();else{jr.show(),Sr.show(),wr.show();var mn=je*sn,Re=Un-Le*Un;mn=Math.max(-Lr,Math.min(sn-Lr,mn-Lr)),Re=Math.max(-Lr,Math.min(Un-Lr,Re-Lr)),wr.css({top:Re+"px",left:mn+"px"});var Nn=cn*Ct;jr.css({left:Nn-Lt/2+"px"});var or=we*ot;Sr.css({top:or-ee+"px"})}}function di(je){var Le=Qn(),mn="",Re=dn?!0:!$.equals(Le,nn);Le&&(mn=Le.toString(on),!xe&&pa(Le)),Be&&rn.val(mn),je&&Re&&(de.change(Le),rn.trigger("change",[Le]))}function Or(){xe&&(sn=An.width(),Un=An.height(),Lr=wr.height(),xr.width(),ot=xr.height(),ee=Sr.height(),Ct=Me.width(),Lt=jr.width(),mt||(He.css("position","absolute"),B.offset?He.offset(B.offset):He.offset(m(He,Jt))),La(),B.showPalette&&cs(),rn.trigger("reflow.spectrum"))}function hs(){rn.show(),Jt.unbind("click.spectrum touchstart.spectrum"),He.remove(),wt.remove(),e[Wo.id]=null}function Ho(je,Le){if(je===n)return i.extend({},B);if(Le===n)return B[je];B[je]=Le,je==="preferredFormat"&&(on=B.preferredFormat),$r()}function Ti(){br=!1,rn.attr("disabled",!1),Jt.removeClass("sp-disabled")}function so(){Ci(),br=!0,rn.attr("disabled",!0),Jt.addClass("sp-disabled")}function zo(je){B.offset=je,Or()}ha();var Wo={show:ur,hide:Ci,toggle:ds,reflow:Or,option:Ho,enable:Ti,disable:so,offset:zo,set:function(je){ei(je),di()},get:Qn,destroy:hs,container:He};return Wo.id=e.push(Wo)-1,Wo}function m(A,W){for(var B=W[0],mt=A[0],dt=mt.parentElement,qt=B.getBoundingClientRect(),fe=mt.offsetWidth,de=mt.offsetHeight,ae={top:0,left:0,width:B.offsetWidth,height:B.offsetHeight};B&&(ae.top+=B.offsetTop-B.scrollTop,ae.left+=B.offsetLeft-B.scrollLeft,!(B===dt||!dt.contains(B.offsetParent)));)B=B.offsetParent;return qt.right+fe>window.innerWidth-window.scrollX&&qt.right-fe>0&&(ae.left-=fe-ae.width),qt.bottom+de<window.innerHeight-window.scrollY?ae.top+=ae.height:ae.top-=de,ae}function y(){}function _(A){A.stopPropagation()}function C(A,W){var B=Array.prototype.slice,mt=B.call(arguments,2);return function(){return A.apply(W,mt.concat(B.call(arguments)))}}function E(A,W,B,mt){W=W||function(){},B=B||function(){},mt=mt||function(){};var dt=document,qt=!1,fe={},de=0,ae=0,xe="ontouchstart"in window,en={};en.selectstart=dn,en.dragstart=dn,en["touchmove mousemove"]=sn,en["touchend mouseup"]=Lr;function dn(ot){ot.stopPropagation&&ot.stopPropagation(),ot.preventDefault&&ot.preventDefault(),ot.returnValue=!1}function sn(ot){if(qt){if(r&&dt.documentMode<9&&!ot.button)return Lr();var Ct=ot&&ot.touches&&ot.touches[0],Lt=Ct&&Ct.pageX||ot.pageX,ee=Ct&&Ct.pageY||ot.pageY,we=Math.max(0,Math.min(Lt-fe.left,ae)),Fe=Math.max(0,Math.min(ee-fe.top,de));xe&&dn(ot),W.apply(A,[we,Fe,ot])}}function Un(ot){var Ct=ot.which?ot.which==3:ot.button==2;!Ct&&!qt&&B.apply(A,arguments)!==!1&&(qt=!0,de=i(A).height(),ae=i(A).width(),fe=i(A).offset(),i(dt).bind(en),i(dt.body).addClass("sp-dragging"),sn(ot),dn(ot))}function Lr(){qt&&(i(dt).unbind(en),i(dt.body).removeClass("sp-dragging"),setTimeout(function(){mt.apply(A,arguments)},0)),qt=!1}i(A).bind("touchstart mousedown",Un)}function D(A,W,B){var mt;return function(){var dt=this,qt=arguments,fe=function(){mt=null,A.apply(dt,qt)};mt||(mt=setTimeout(fe,W))}}function F(){return i.fn.spectrum.inputTypeColorSupport()}var V="spectrum.id";i.fn.spectrum=function(A,W){if(typeof A=="string"){var B=this,mt=Array.prototype.slice.call(arguments,1);return this.each(function(){var dt=e[i(this).data(V)];if(dt){var qt=dt[A];if(!qt)throw new Error("Spectrum: no such method: '"+A+"'");A=="get"?B=dt.get():A=="container"?B=dt.container:A=="option"?B=dt.option.apply(dt,mt):A=="destroy"?(dt.destroy(),i(this).removeData(V)):qt.apply(dt,mt)}}),B}return this.spectrum("destroy").each(function(){var dt=i.extend({},A,i(this).data()),qt=v(this,dt);i(this).data(V,qt.id)})},i.fn.spectrum.load=!0,i.fn.spectrum.loadOpts={},i.fn.spectrum.draggable=E,i.fn.spectrum.defaults=t,i.fn.spectrum.inputTypeColorSupport=function A(){if(typeof A._cachedResult>"u"){var W=i("<input type='color'/>")[0];A._cachedResult=W.type==="color"&&W.value!==""}return A._cachedResult},i.spectrum={},i.spectrum.localization={},i.spectrum.palettes={},i.fn.spectrum.processNativeColorInputs=function(){var A=i("input[type=color]");A.length&&!F()&&A.spectrum({preferredFormat:"hex6"})};var K=/^[\s,#]+/,Z=/\s+$/,ct=0,ht=Math,st=ht.round,et=ht.min,nt=ht.max,it=ht.random,$=function(A,W){if(A=A||"",W=W||{},A instanceof $)return A;if(!(this instanceof $))return new $(A,W);var B=ft(A);this._originalInput=A,this._r=B.r,this._g=B.g,this._b=B.b,this._a=B.a,this._roundA=st(100*this._a)/100,this._format=W.format||B.format,this._gradientType=W.gradientType,this._r<1&&(this._r=st(this._r)),this._g<1&&(this._g=st(this._g)),this._b<1&&(this._b=st(this._b)),this._ok=B.ok,this._tc_id=ct++};$.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var A=this.toRgb();return(A.r*299+A.g*587+A.b*114)/1e3},setAlpha:function(A){return this._a=ie(A),this._roundA=st(100*this._a)/100,this},toHsv:function(){var A=_t(this._r,this._g,this._b);return{h:A.h*360,s:A.s,v:A.v,a:this._a}},toHsvString:function(){var A=_t(this._r,this._g,this._b),W=st(A.h*360),B=st(A.s*100),mt=st(A.v*100);return this._a==1?"hsv("+W+", "+B+"%, "+mt+"%)":"hsva("+W+", "+B+"%, "+mt+"%, "+this._roundA+")"},toHsl:function(){var A=St(this._r,this._g,this._b);return{h:A.h*360,s:A.s,l:A.l,a:this._a}},toHslString:function(){var A=St(this._r,this._g,this._b),W=st(A.h*360),B=st(A.s*100),mt=st(A.l*100);return this._a==1?"hsl("+W+", "+B+"%, "+mt+"%)":"hsla("+W+", "+B+"%, "+mt+"%, "+this._roundA+")"},toHex:function(A){return zt(this._r,this._g,this._b,A)},toHexString:function(A){return"#"+this.toHex(A)},toHex8:function(){return pt(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:st(this._r),g:st(this._g),b:st(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+st(this._r)+", "+st(this._g)+", "+st(this._b)+")":"rgba("+st(this._r)+", "+st(this._g)+", "+st(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:st(P(this._r,255)*100)+"%",g:st(P(this._g,255)*100)+"%",b:st(P(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+st(P(this._r,255)*100)+"%, "+st(P(this._g,255)*100)+"%, "+st(P(this._b,255)*100)+"%)":"rgba("+st(P(this._r,255)*100)+"%, "+st(P(this._g,255)*100)+"%, "+st(P(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Ut[zt(this._r,this._g,this._b,!0)]||!1},toFilter:function(A){var W="#"+pt(this._r,this._g,this._b,this._a),B=W,mt=this._gradientType?"GradientType = 1, ":"";if(A){var dt=$(A);B=dt.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+mt+"startColorstr="+W+",endColorstr="+B+")"},toString:function(A){var W=!!A;A=A||this._format;var B=!1,mt=this._a<1&&this._a>=0,dt=!W&&mt&&(A==="hex"||A==="hex6"||A==="hex3"||A==="name");return dt?A==="name"&&this._a===0?this.toName():this.toRgbString():(A==="rgb"&&(B=this.toRgbString()),A==="prgb"&&(B=this.toPercentageRgbString()),(A==="hex"||A==="hex6")&&(B=this.toHexString()),A==="hex3"&&(B=this.toHexString(!0)),A==="hex8"&&(B=this.toHex8String()),A==="name"&&(B=this.toName()),A==="hsl"&&(B=this.toHslString()),A==="hsv"&&(B=this.toHsvString()),B||this.toHexString())},_applyModification:function(A,W){var B=A.apply(null,[this].concat([].slice.call(W)));return this._r=B._r,this._g=B._g,this._b=B._b,this.setAlpha(B._a),this},lighten:function(){return this._applyModification(Mt,arguments)},brighten:function(){return this._applyModification(Kt,arguments)},darken:function(){return this._applyModification(Xt,arguments)},desaturate:function(){return this._applyModification(Dt,arguments)},saturate:function(){return this._applyModification(yt,arguments)},greyscale:function(){return this._applyModification(kt,arguments)},spin:function(){return this._applyModification(Qt,arguments)},_applyCombination:function(A,W){return A.apply(null,[this].concat([].slice.call(W)))},analogous:function(){return this._applyCombination(Oe,arguments)},complement:function(){return this._applyCombination(ne,arguments)},monochromatic:function(){return this._applyCombination(Ke,arguments)},splitcomplement:function(){return this._applyCombination(Ee,arguments)},triad:function(){return this._applyCombination(be,arguments)},tetrad:function(){return this._applyCombination(Pe,arguments)}},$.fromRatio=function(A,W){if(typeof A=="object"){var B={};for(var mt in A)A.hasOwnProperty(mt)&&(mt==="a"?B[mt]=A[mt]:B[mt]=gt(A[mt]));A=B}return $(A,W)};function ft(A){var W={r:0,g:0,b:0},B=1,mt=!1,dt=!1;return typeof A=="string"&&(A=L(A)),typeof A=="object"&&(A.hasOwnProperty("r")&&A.hasOwnProperty("g")&&A.hasOwnProperty("b")?(W=lt(A.r,A.g,A.b),mt=!0,dt=String(A.r).substr(-1)==="%"?"prgb":"rgb"):A.hasOwnProperty("h")&&A.hasOwnProperty("s")&&A.hasOwnProperty("v")?(A.s=gt(A.s),A.v=gt(A.v),W=Ot(A.h,A.s,A.v),mt=!0,dt="hsv"):A.hasOwnProperty("h")&&A.hasOwnProperty("s")&&A.hasOwnProperty("l")&&(A.s=gt(A.s),A.l=gt(A.l),W=U(A.h,A.s,A.l),mt=!0,dt="hsl"),A.hasOwnProperty("a")&&(B=A.a)),B=ie(B),{ok:mt,format:A.format||dt,r:et(255,nt(W.r,0)),g:et(255,nt(W.g,0)),b:et(255,nt(W.b,0)),a:B}}function lt(A,W,B){return{r:P(A,255)*255,g:P(W,255)*255,b:P(B,255)*255}}function St(A,W,B){A=P(A,255),W=P(W,255),B=P(B,255);var mt=nt(A,W,B),dt=et(A,W,B),qt,fe,de=(mt+dt)/2;if(mt==dt)qt=fe=0;else{var ae=mt-dt;switch(fe=de>.5?ae/(2-mt-dt):ae/(mt+dt),mt){case A:qt=(W-B)/ae+(W<B?6:0);break;case W:qt=(B-A)/ae+2;break;case B:qt=(A-W)/ae+4;break}qt/=6}return{h:qt,s:fe,l:de}}function U(A,W,B){var mt,dt,qt;A=P(A,360),W=P(W,100),B=P(B,100);function fe(xe,en,dn){return dn<0&&(dn+=1),dn>1&&(dn-=1),dn<1/6?xe+(en-xe)*6*dn:dn<1/2?en:dn<2/3?xe+(en-xe)*(2/3-dn)*6:xe}if(W===0)mt=dt=qt=B;else{var de=B<.5?B*(1+W):B+W-B*W,ae=2*B-de;mt=fe(ae,de,A+1/3),dt=fe(ae,de,A),qt=fe(ae,de,A-1/3)}return{r:mt*255,g:dt*255,b:qt*255}}function _t(A,W,B){A=P(A,255),W=P(W,255),B=P(B,255);var mt=nt(A,W,B),dt=et(A,W,B),qt,fe,de=mt,ae=mt-dt;if(fe=mt===0?0:ae/mt,mt==dt)qt=0;else{switch(mt){case A:qt=(W-B)/ae+(W<B?6:0);break;case W:qt=(B-A)/ae+2;break;case B:qt=(A-W)/ae+4;break}qt/=6}return{h:qt,s:fe,v:de}}function Ot(A,W,B){A=P(A,360)*6,W=P(W,100),B=P(B,100);var mt=ht.floor(A),dt=A-mt,qt=B*(1-W),fe=B*(1-dt*W),de=B*(1-(1-dt)*W),ae=mt%6,xe=[B,fe,qt,qt,de,B][ae],en=[de,B,B,fe,qt,qt][ae],dn=[qt,qt,de,B,B,fe][ae];return{r:xe*255,g:en*255,b:dn*255}}function zt(A,W,B,mt){var dt=[Q(st(A).toString(16)),Q(st(W).toString(16)),Q(st(B).toString(16))];return mt&&dt[0].charAt(0)==dt[0].charAt(1)&&dt[1].charAt(0)==dt[1].charAt(1)&&dt[2].charAt(0)==dt[2].charAt(1)?dt[0].charAt(0)+dt[1].charAt(0)+dt[2].charAt(0):dt.join("")}function pt(A,W,B,mt){var dt=[Q(Tt(mt)),Q(st(A).toString(16)),Q(st(W).toString(16)),Q(st(B).toString(16))];return dt.join("")}$.equals=function(A,W){return!A||!W?!1:$(A).toRgbString()==$(W).toRgbString()},$.random=function(){return $.fromRatio({r:it(),g:it(),b:it()})};function Dt(A,W){W=W===0?0:W||10;var B=$(A).toHsl();return B.s-=W/100,B.s=k(B.s),$(B)}function yt(A,W){W=W===0?0:W||10;var B=$(A).toHsl();return B.s+=W/100,B.s=k(B.s),$(B)}function kt(A){return $(A).desaturate(100)}function Mt(A,W){W=W===0?0:W||10;var B=$(A).toHsl();return B.l+=W/100,B.l=k(B.l),$(B)}function Kt(A,W){W=W===0?0:W||10;var B=$(A).toRgb();return B.r=nt(0,et(255,B.r-st(255*-(W/100)))),B.g=nt(0,et(255,B.g-st(255*-(W/100)))),B.b=nt(0,et(255,B.b-st(255*-(W/100)))),$(B)}function Xt(A,W){W=W===0?0:W||10;var B=$(A).toHsl();return B.l-=W/100,B.l=k(B.l),$(B)}function Qt(A,W){var B=$(A).toHsl(),mt=(st(B.h)+W)%360;return B.h=mt<0?360+mt:mt,$(B)}function ne(A){var W=$(A).toHsl();return W.h=(W.h+180)%360,$(W)}function be(A){var W=$(A).toHsl(),B=W.h;return[$(A),$({h:(B+120)%360,s:W.s,l:W.l}),$({h:(B+240)%360,s:W.s,l:W.l})]}function Pe(A){var W=$(A).toHsl(),B=W.h;return[$(A),$({h:(B+90)%360,s:W.s,l:W.l}),$({h:(B+180)%360,s:W.s,l:W.l}),$({h:(B+270)%360,s:W.s,l:W.l})]}function Ee(A){var W=$(A).toHsl(),B=W.h;return[$(A),$({h:(B+72)%360,s:W.s,l:W.l}),$({h:(B+216)%360,s:W.s,l:W.l})]}function Oe(A,W,B){W=W||6,B=B||30;var mt=$(A).toHsl(),dt=360/B,qt=[$(A)];for(mt.h=(mt.h-(dt*W>>1)+720)%360;--W;)mt.h=(mt.h+dt)%360,qt.push($(mt));return qt}function Ke(A,W){W=W||6;for(var B=$(A).toHsv(),mt=B.h,dt=B.s,qt=B.v,fe=[],de=1/W;W--;)fe.push($({h:mt,s:dt,v:qt})),qt=(qt+de)%1;return fe}$.mix=function(A,W,B){B=B===0?0:B||50;var mt=$(A).toRgb(),dt=$(W).toRgb(),qt=B/100,fe=qt*2-1,de=dt.a-mt.a,ae;fe*de==-1?ae=fe:ae=(fe+de)/(1+fe*de),ae=(ae+1)/2;var xe=1-ae,en={r:dt.r*ae+mt.r*xe,g:dt.g*ae+mt.g*xe,b:dt.b*ae+mt.b*xe,a:dt.a*qt+mt.a*(1-qt)};return $(en)},$.readability=function(A,W){var B=$(A),mt=$(W),dt=B.toRgb(),qt=mt.toRgb(),fe=B.getBrightness(),de=mt.getBrightness(),ae=Math.max(dt.r,qt.r)-Math.min(dt.r,qt.r)+Math.max(dt.g,qt.g)-Math.min(dt.g,qt.g)+Math.max(dt.b,qt.b)-Math.min(dt.b,qt.b);return{brightness:Math.abs(fe-de),color:ae}},$.isReadable=function(A,W){var B=$.readability(A,W);return B.brightness>125&&B.color>500},$.mostReadable=function(A,W){for(var B=null,mt=0,dt=!1,qt=0;qt<W.length;qt++){var fe=$.readability(A,W[qt]),de=fe.brightness>125&&fe.color>500,ae=3*(fe.brightness/125)+fe.color/500;(de&&!dt||de&&dt&&ae>mt||!de&&!dt&&ae>mt)&&(dt=de,mt=ae,B=$(W[qt]))}return B};var De=$.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ut=$.hexNames=ce(De);function ce(A){var W={};for(var B in A)A.hasOwnProperty(B)&&(W[A[B]]=B);return W}function ie(A){return A=parseFloat(A),(isNaN(A)||A<0||A>1)&&(A=1),A}function P(A,W){q(A)&&(A="100%");var B=ut(A);return A=et(W,nt(0,parseFloat(A))),B&&(A=parseInt(A*W,10)/100),ht.abs(A-W)<1e-6?1:A%W/parseFloat(W)}function k(A){return et(1,nt(0,A))}function N(A){return parseInt(A,16)}function q(A){return typeof A=="string"&&A.indexOf(".")!=-1&&parseFloat(A)===1}function ut(A){return typeof A=="string"&&A.indexOf("%")!=-1}function Q(A){return A.length==1?"0"+A:""+A}function gt(A){return A<=1&&(A=A*100+"%"),A}function Tt(A){return Math.round(parseFloat(A)*255).toString(16)}function he(A){return N(A)/255}var X=function(){var A="[-\\+]?\\d+%?",W="[-\\+]?\\d*\\.\\d+%?",B="(?:"+W+")|(?:"+A+")",mt="[\\s|\\(]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?",dt="[\\s|\\(]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?";return{rgb:new RegExp("rgb"+mt),rgba:new RegExp("rgba"+dt),hsl:new RegExp("hsl"+mt),hsla:new RegExp("hsla"+dt),hsv:new RegExp("hsv"+mt),hsva:new RegExp("hsva"+dt),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function L(A){A=A.replace(K,"").replace(Z,"").toLowerCase();var W=!1;if(De[A])A=De[A],W=!0;else if(A=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var B;return(B=X.rgb.exec(A))?{r:B[1],g:B[2],b:B[3]}:(B=X.rgba.exec(A))?{r:B[1],g:B[2],b:B[3],a:B[4]}:(B=X.hsl.exec(A))?{h:B[1],s:B[2],l:B[3]}:(B=X.hsla.exec(A))?{h:B[1],s:B[2],l:B[3],a:B[4]}:(B=X.hsv.exec(A))?{h:B[1],s:B[2],v:B[3]}:(B=X.hsva.exec(A))?{h:B[1],s:B[2],v:B[3],a:B[4]}:(B=X.hex8.exec(A))?{a:he(B[1]),r:N(B[2]),g:N(B[3]),b:N(B[4]),format:W?"name":"hex8"}:(B=X.hex6.exec(A))?{r:N(B[1]),g:N(B[2]),b:N(B[3]),format:W?"name":"hex"}:(B=X.hex3.exec(A))?{r:N(B[1]+""+B[1]),g:N(B[2]+""+B[2]),b:N(B[3]+""+B[3]),format:W?"name":"hex"}:!1}window.tinycolor=$,i(function(){i.fn.spectrum.load&&i.fn.spectrum.processNativeColorInputs()})}var YK=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wP=function(i){YK(n,i);function n(t){t===void 0&&(t={});var e=i.call(this,t)||this,r=t.ppfx||"";return e.opts=t,e.ppfx=r,e.em=t.target||{},!t.onChange&&e.listenTo(e.model,"change:value",e.handleModelChange),e}return n.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},n.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.elementUpdated=function(){this.model.trigger("el:change")},n.prototype.setValue=function(t,e){var r=this.model,o=t||r.get("defaults"),a=this.getInputEl();a&&(a.value=o)},n.prototype.handleModelChange=function(t,e,r){this.setValue(e,r)},n.prototype.handleChange=function(t){t.stopPropagation();var e=this.getInputEl().value;this.__onInputChange(e),this.elementUpdated()},n.prototype.__onInputChange=function(t){this.model.set({value:t},{fromInput:1})},n.prototype.getInputEl=function(){if(!this.inputEl){var t=this,e=t.model,r=t.opts,o=r.type||"text",a=e.get("placeholder")||e.get("defaults")||e.get("default")||"";this.inputEl=(0,xi.default)('<input type="'.concat(o,'" placeholder="').concat(a,'">'))}return this.inputEl.get(0)},n.prototype.render=function(){this.inputEl=null;var t=this.$el;return t.addClass(this.inputClass()),t.html(this.template()),t.find(".".concat(this.holderClass())).append(this.getInputEl()),this},n}(ye.Ss);const G0=wP;wP.prototype.events={change:"handleChange"};var XK=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gv=function(){return Gv=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Gv.apply(this,arguments)};xi.default&&GK(xi.default);var Qm=function(i){var n=i.getFormat()==="name"&&i.toName(),t=i.getAlpha()==1?i.toHexString():i.toRgbString();return n||t.replace(/ /g,"")},JK=function(i){XK(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.template=function(){var t=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(t,`field-colorp">
        <div class="`).concat(t,`field-colorp-c" data-colorp-c>
          <div class="`).concat(t,`checker-bg"></div>
        </div>
      </div>
    `)},n.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.remove=function(){return i.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},n.prototype.handleChange=function(t){t.stopPropagation();var e=t.target.value;(0,J.isUndefined)(e)||this.__onInputChange(e)},n.prototype.__onInputChange=function(t){var e=this,r=e.model,o=e.opts,a=o.onChange,s=t,u=this.getColorEl();if(u){u.spectrum("set",s);var c=u.spectrum("get"),h=s&&Qm(c);h&&(s=h)}a?a(s):r.set({value:s},{fromInput:1})},n.prototype.setValue=function(t,e){e===void 0&&(e={});var r=this.model,o=(0,J.isUndefined)(e.def)?r.get("defaults"):e.def,a=(0,J.isUndefined)(t)?(0,J.isUndefined)(o)?"":o:t,s=this.getInputEl(),u=this.getColorEl(),c=a!="none"?a:"";s.value=a,u.get(0).style.backgroundColor=c,(e.fromTarget||e.fromInput&&!e.avoidStore)&&(u.spectrum("set",c),this.noneColor=a=="none",this.movedColor=c)},n.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var e=this,r=e.em,o=e.model,a=e.opts,s=this.ppfx,u=a.onChange,c=(0,xi.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),h=c.get(0).style,v=r&&r.getConfig&&r.getConfig().colorPicker||{};this.movedColor="";var m=!1,y;this.$el.find("[data-colorp-c]").append(c);var _=function(C,E){E===void 0&&(E=!0),u?u(C,!E):(E&&o.setValueFromInput(0,!1),o.setValueFromInput(C,E))};c.spectrum(Gv(Gv(Gv({color:o.getValue()||!1,containerClassName:"".concat(s,"one-bg ").concat(s,"two-color ").concat(s,"editor-sp"),maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"",palette:[]},v),o.get("colorPicker")||{}),{move:function(C){var E=Qm(C);t.movedColor=E,h.backgroundColor=E,_(E,!1)},change:function(C){m=!0;var E=Qm(C);h.backgroundColor=E,_(E),t.noneColor=!1},show:function(C){m=!1,t.movedColor="",y=u?o.getValue({noDefault:!0}):Qm(C)},hide:function(){!m&&(y||u)&&(t.noneColor&&(y=""),h.backgroundColor=y,c.spectrum("set",y),_(y,!1))}})),r&&r.on&&this.listenTo(r,"component:selected",function(){t.movedColor&&_(t.movedColor),m=!0,t.movedColor="",c.spectrum("hide")}),this.colorEl=c}return this.colorEl},n.prototype.render=function(){return G0.prototype.render.call(this),this.getColorEl(),this},n}(G0);const xP=JK;var ZK=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),QK=function(i){ZK(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.templateInput=function(){return""},n.prototype.getInputEl=function(){if(!this.input){var t=this.model,e=this.getModelValue(),r=new xP({model:t,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}),o=r.render();o.setValue(e,{fromTarget:1}),this.input=o.el}return this.input},n}(au);const t$=QK;var e$=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),SP=function(i){e$(n,i);function n(t){t===void 0&&(t={});var e=i.call(this,t)||this;return(0,J.bindAll)(e,"moveIncrement","upIncrement"),e.doc=document,e.listenTo(e.model,"change:unit",e.handleModelChange),e}return n.prototype.template=function(){var t=this.ppfx;return`
      <span class="`.concat(t,`input-holder"></span>
      <span class="`).concat(t,`field-units"></span>
      <div class="`).concat(t,`field-arrows" data-arrows>
        <div class="`).concat(t,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(t,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},n.prototype.inputClass=function(){var t=this.ppfx;return this.opts.contClass||"".concat(t,"field ").concat(t,"field-integer")},n.prototype.setValue=function(t,e){var r=e||{},o=this.validateInputValue(t,{deepCheck:1}),a={value:o.value,unit:""};(o.unit||o.force)&&(a.unit=o.unit),this.model.set(a,r),r.silent&&this.handleModelChange()},n.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},n.prototype.handleUnitChange=function(t){t.stopPropagation();var e=this.getUnitEl().value;this.model.set("unit",e),this.elementUpdated()},n.prototype.handleKeyDown=function(t){t.key==="ArrowUp"&&(t.preventDefault(),this.upArrowClick()),t.key==="ArrowDown"&&(t.preventDefault(),this.downArrowClick())},n.prototype.elementUpdated=function(){this.model.trigger("el:change")},n.prototype.handleModelChange=function(){var t=this.model;this.getInputEl().value=t.get("value");var e=this.getUnitEl();e&&(e.value=t.get("unit")||"")},n.prototype.getUnitEl=function(){if(!this.unitEl){var t=this.model,e=t.get("units")||[];if(e.length){var r=['<option value="" disabled hidden>-</option>'];e.forEach(function(a){var s=a==t.get("unit")?"selected":"";r.push("<option ".concat(s,">").concat(a,"</option>"))});var o=document.createElement("div");o.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(r.join(""),"</select>"),this.unitEl=o.firstChild}}return this.unitEl},n.prototype.upArrowClick=function(){var t=this.model,e=t.get("step"),r=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(r+e)),this.elementUpdated()},n.prototype.downArrowClick=function(){var t=this.model,e=t.get("step"),r=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(r-e)),this.elementUpdated()},n.prototype.downIncrement=function(t){t.preventDefault(),this.moved=!1;var e=this.model.get("value")||0;e=this.normalizeValue(e),this.current={y:t.pageY,val:e},(0,Ce.on)(this.doc,"mousemove",this.moveIncrement),(0,Ce.on)(this.doc,"mouseup",this.upIncrement)},n.prototype.moveIncrement=function(t){this.moved=!0;var e=this.model,r=e.get("step"),o=this.current,a=this.normalizeValue(o.val+(o.y-t.pageY)*r),s=this.validateInputValue(a),u=s.value,c=s.unit;return this.prValue=u,e.set({value:u,unit:c},{avoidStore:1}),!1},n.prototype.upIncrement=function(){var t=this.model,e=t.get("step");if((0,Ce.AU)(this.doc,"mouseup",this.upIncrement),(0,Ce.AU)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var r=this.prValue-e;t.set("value",r,{avoidStore:1}).set("value",r+e),this.elementUpdated()}},n.prototype.normalizeValue=function(t,e){e===void 0&&(e=0);var r=this.model,o=r.get("step"),a=0;if(isNaN(t))return e;if(t=parseFloat(t),Math.floor(t)!==t){var s=o.toString().split(".")[1];a=s?s.length:0}return a?parseFloat(t.toFixed(a)):t},n.prototype.validateInputValue=function(t,e){e===void 0&&(e={});var r=0,o=e||{},a=this.model,s="",u=(0,J.isUndefined)(t)?s:t,c=e.units||a.get("units")||[],h=a.get("unit")||c.length&&c[0]||"",v=(0,J.isUndefined)(e.max)?a.get("max"):e.max,m=(0,J.isUndefined)(e.min)?a.get("min"):e.min,y=!!a.get("limitlessMax"),_=!!a.get("limitlessMin");if(o.deepCheck){var C=a.get("fixedValues")||[];if(u===""&&(h=""),u){var E=new RegExp("^"+C.join("|"),"g");if(C.length&&E.test(u))u=u.match(E)[0],h="",r=1;else{var D=u+"";u+="",u=parseFloat(u.replace(",",".")),u=isNaN(u)?s:u;var F=D.replace(u,"");(0,J.indexOf)(c,F)>=0&&(h=F)}}}return!isNaN(u)&&u!==""&&(!y&&!(0,J.isUndefined)(v)&&v!==""&&(u=u>v?v:u),!_&&!(0,J.isUndefined)(m)&&m!==""&&(u=u<m?m:u)),{force:r,value:u,unit:h}},n.prototype.render=function(){G0.prototype.render.call(this),this.unitEl=null;var t=this.getUnitEl();return t&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(t),this},n}(G0);const _P=SP;SP.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var n$=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),r$=function(i){n$(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getValueForTarget=function(){var t=this.model,e=t.attributes,r=e.value,o=e.unit;return!(0,J.isUndefined)(r)&&r!==""?r+o:t.get("default")},n.prototype.getInputEl=function(){if(!this.input){var t=this,e=t.ppfx,r=t.model,o=this.getModelValue(),a=new _P({contClass:"".concat(e,"field-int"),type:"number",model:r,ppfx:e});a.render(),this.$input=a.inputEl,this.$unit=a.unitEl,r.set("value",o,{fromTarget:!0}),this.$input.val(o),this.input=a.el}return this.input},n}(au);const i$=r$;var o$=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),a$=function(i){o$(n,i);function n(t){t===void 0&&(t={});var e=i.call(this,t)||this;return e.listenTo(e.model,"change:options",e.rerender),e}return n.prototype.templateInput=function(){var t=this,e=t.ppfx,r=t.clsField;return'<div class="'.concat(r,`">
      <div data-input></div>
      <div class="`).concat(e,`sel-arrow">
        <div class="`).concat(e,`d-s-arrow"></div>
      </div>
    </div>`)},n.prototype.getInputEl=function(){if(!this.$input){var t=this,e=t.model,r=t.em,o=e.get("name"),a=e.get("options")||[],s=[],u="<select>";a.forEach(function(v){var m="",y,_,C;(0,J.isString)(v)?(y=v,_=v):(y=v.name||v.label||v.value,_="".concat((0,J.isUndefined)(v.value)?v.id:v.value).replace(/"/g,"&quot;"),C=v.style?v.style.replace(/"/g,"&quot;"):"",m+=C?' style="'.concat(C,'"'):"");var E=r.t("traitManager.traits.options.".concat(o,".").concat(_))||y;u+='<option value="'.concat(_,'"').concat(m,">").concat(E,"</option>"),s.push(_)}),u+="</select>",this.$input=(0,xi.default)(u);var c=e.getTargetValue(),h=s.indexOf(c)>=0?c:e.get("default");!(0,J.isUndefined)(h)&&this.$input.val(h)}return this.$input.get(0)},n}(au);const s$=a$;var l$=On(8242),u$=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_A="data-categories",CA="data-no-categories",CP=function(i){u$(n,i);function n(t,e){var r=i.call(this,t)||this;r.reuseView=!0,r.renderedCategories=new Map,r.itemsView=e;var o=t.config||{};r.config=o;var a=t.editor;r.em=a;var s=o.pStylePrefix||"";return r.ppfx=s,r.pfx=s+o.stylePrefix||"",r.className="".concat(r.pfx,"traits"),r.traitContClass="".concat(s,"traits-c"),r.classNoCat="".concat(s,"traits-empty-c"),r.catsClass="".concat(s,"trait-categories"),r.collection=new w0([],{em:a}),r.listenTo(a,"component:toggled",r.updatedCollection),r.updatedCollection(),r}return n.prototype.updatedCollection=function(){var t=this,e=t.ppfx,r=t.em,o=r.getSelected();this.el.className="".concat(this.traitContClass,"s ").concat(e,"one-bg ").concat(e,"two-color"),this.collection=(o==null?void 0:o.traits)||new w0([],{em:r}),this.render()},n.prototype.add=function(t,e){var r=this,o=r.config,a=r.renderedCategories,s=this.itemView,u=t.get(this.itemType);this.itemsView&&this.itemsView[u]&&(s=this.itemsView[u]);var c=new s({config:o,model:t,attributes:t.get("attributes")}),h=c.render().el,v=t.parent.initCategory(t);if(v){var m=v.getId(),y=this.getCategoriesEl(),_=a.get(m);!_&&y&&(_=new sP({model:v},o,"trait").render(),a.set(m,_),y.appendChild(_.el)),_==null||_.append(h);return}e?e.appendChild(h):this.append(h)},n.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector("[".concat(_A,"]"))),this.catsEl},n.prototype.getTraitsEl=function(){return this.traitsEl||(this.traitsEl=this.el.querySelector("[".concat(CA,"]"))),this.traitsEl},n.prototype.append=function(t){var e=this.getTraitsEl();e==null||e.appendChild(t)},n.prototype.render=function(){var t=this,e=this,r=e.el,o=e.ppfx,a=e.catsClass,s=e.traitContClass,u=e.classNoCat,c=document.createDocumentFragment();delete this.catsEl,delete this.traitsEl,this.renderedCategories=new Map,r.innerHTML=`
      <div class="`.concat(a,'" ').concat(_A,`></div>
      <div class="`).concat(u," ").concat(s,'" ').concat(CA,`></div>
    `),this.collection.forEach(function(v){return t.add(v,c)}),this.append(c);var h="".concat(s,"s ").concat(o,"one-bg ").concat(o,"two-color");return this.$el.addClass(h),this.rendered=!0,this},n}(l$.A);const TA=CP;CP.prototype.itemView=au;var c$=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),f$=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},d$=function(i){c$(n,i);function n(t){var e=i.call(this,t,"TraitManager",FK())||this;e.TraitsView=TA,e.events=m0,e.state=new ye.Kx({traits:[]}),e.types={text:au,number:i$,select:s$,checkbox:$K,color:t$,button:WK};var r=e,o=r.state,a=r.config,s=r.events,u=a.pStylePrefix;u&&(a.stylePrefix="".concat(u).concat(a.stylePrefix)),(0,J.bindAll)(e,"__onSelect");var c=(0,J.debounce)(function(){return e.__upSel()},0),h=(0,J.debounce)(function(){return e.__onUp()},0);return o.listenTo(t,"component:toggled",c),o.listenTo(t,s.value,h),o.on("change:traits",e.__onSelect),e.debounced=[c,h],e}return n.prototype.select=function(t){var e=(t==null?void 0:t.getTraits())||[];this.state.set({component:t,traits:e}),this.__trgCustom()},n.prototype.getCategories=function(){var t,e=this.getComponent(),r=((t=e==null?void 0:e.traits.categories)===null||t===void 0?void 0:t.models)||[];return f$([],r,!0)},n.prototype.getTraits=function(){return this.getCurrent()},n.prototype.getTraitsByCategory=function(t){return FD(t||this.getTraits())},n.prototype.getComponent=function(){return this.state.attributes.component},n.prototype.addType=function(t,e){var r=this.getType("text");this.types[t]=r.extend(e)},n.prototype.getType=function(t){return this.getTypes()[t]},n.prototype.getTypes=function(){return this.types},n.prototype.getTraitsViewer=function(){return this.view},n.prototype.getCurrent=function(){return this.state.get("traits")||[]},n.prototype.render=function(){var t=this.view,e=this.em;return t=new TA({el:t==null?void 0:t.el,collection:[],editor:e,config:this.getConfig()},this.getTypes()),this.view=t,t.el},n.prototype.postRender=function(){this.__appendTo()},n.prototype.__onSelect=function(){var t=this,e=t.em,r=t.events,o=t.state,a=o.attributes,s=a.component,u=a.traits;e.trigger(r.select,{component:s,traits:u})},n.prototype.__trgCustom=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.events,a=e.__ctn;this.__ctn=a||t.container,r.trigger(o.custom,this.__customData())},n.prototype.__customData=function(){return{container:this.__ctn}},n.prototype.__upSel=function(){this.select(this.em.getSelected())},n.prototype.__onUp=function(){this.select(this.getComponent())},n}(da);const h$=d$;var p$=function(){return{stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}}};const v$=p$;var b_;(function(i){i.root="layer:root",i.component="layer:component",i.custom="layer:custom"})(b_||(b_={}));var g$=On(6756),m$=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),y$=function(i){m$(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t._dropAreaConfig={ratio:.4,minUndroppableDimension:3,maxUndroppableDimension:20},t}return Object.defineProperty(n.prototype,"view",{get:function(){return this.model.viewLayer},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"element",{get:function(){var t;return(t=this.model.viewLayer)===null||t===void 0?void 0:t.el},enumerable:!1,configurable:!0}),n}(g$.h);const b$=y$;var w$=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),x$=function(i){w$(n,i);function n(t){t===void 0&&(t={});var e=i.call(this,t)||this;e.items=[],e.opt=t;var r=t.config||{};e.config=r,e.module=t.module,e.parentView=t.parentView;var o=r.stylePrefix||"";r.pStylePrefix;var a=e.collection;e.listenTo(a,"add",e.addTo),e.listenTo(a,"reset resetNavigator",e.render),e.listenTo(a,"remove",e.removeChildren),e.className="".concat(o,"layers");var s=r.em;if(r.sortable&&!e.opt.sorter){var u=s.Utils,c=r.sortContainer||e.el,h=e.createPlaceholder(o);e.opt.sorter=new u.ComponentSorter({em:s,treeClass:b$,containerContext:{container:c,containerSel:".".concat(e.className),itemSel:".".concat(o,"layer"),pfx:r.pStylePrefix,document,placeholderElement:h},dragBehavior:{dragDirection:Ff.A.Vertical,nested:!0}})}return e.$el.data("collection",a),t.parent&&e.$el.data("model",t.parent),e}return n.prototype.createPlaceholder=function(t){var e=document.createElement("div"),r=document.createElement("div");return this.el.parentNode,e.className=t+"placeholder",e.style.display="none",e.style.pointerEvents="none",r.className=t+"placeholder-int",e.appendChild(r),e},n.prototype.removeChildren=function(t){var e=t.viewLayer;e&&(e.remove(),delete t.viewLayer)},n.prototype.addTo=function(t){this.addToCollection(t,null,this.collection.indexOf(t))},n.prototype.addToCollection=function(t,e,r){var o=this,a=o.parentView,s=o.opt,u=o.config,c=o.el,h=s.ItemView,v=s.opened,m=s.module,y=s.level,_=s.sorter,C=t.viewLayer||new h({ItemView:h,level:y,model:t,parentView:a,config:u,sorter:_,opened:v,module:m}),E=C.render().el;if(e)e.appendChild(E);else{var D=c,F=D.childNodes;if((0,J.isUndefined)(r))D.appendChild(E);else{var V=F.length==r;V&&r--,V||!F.length?D.appendChild(E):D.insertBefore(E,F[r])}}return this.items.push(C),E},n.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ye.Ss.prototype.remove.apply(this,t),this.items.map(function(r){return r.remove()}),this},n.prototype.render=function(){var t=this,e=this,r=e.el,o=e.module,a=document.createDocumentFragment();return r.innerHTML="",this.collection.map(function(s){return o.__getLayerFromComponent(s)}).forEach(function(s){return t.addToCollection(s,a)}),r.appendChild(a),r.className=this.className,this},n}(ye.Ss);const S$=x$;var Gx=On(9946),_$=function(){return{stylePrefix:"com-",defaults:{},strict:!0,defaultOptions:{}}};const C$=_$;var T$=On(1738),E$=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Y0=function(){return Y0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Y0.apply(this,arguments)},EA=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},OA=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],TP={preserveSelected:1},EP=function(i){return function(n){return i.trigger("".concat(B1,":start"),n)}},OP=function(i){return function(n){return i.trigger(B1,n)}},AP=function(i,n,t){return t===void 0&&(t={}),function(e,r,o){setTimeout(function(){n.forEach(function(a){return a.set("status",a.get("selectable")?"selected":"")}),i.setSelected(n),n[0].emitUpdate()}),i.trigger("".concat(B1,":end"),o),setTimeout(function(){return i.runDefault(TP)}),(t.altMode||o.cancelled)&&i.set("_cmpDrag",1)}},O$=function(i){E$(n,i);function n(t){var e=i.call(this,t,"Commands",C$())||this;e.CommandAbstract=Gx.default,e.defaultCommands={},e.commands={},e.active={},e.events=T$.A;var r=e.config,o=r.pStylePrefix,a=e.defaultCommands;o&&(r.stylePrefix=o+r.stylePrefix),Object.keys(r.defaults).forEach(function(u){var c=r.defaults[u];c.id&&e.add(c.id,c)}),a["tlb-delete"]={run:function(u){return u.runCommand("core:component-delete")}},a["tlb-clone"]={run:function(u){u.runCommand("core:copy"),u.runCommand("core:paste",{action:"clone-component"})}},a["tlb-move"]={run:function(u,c,h){var v,m;h===void 0&&(h={});var y=u.getModel(),_=h.event,C=h.target,E=Array.isArray(C)?C:C?[C]:EA([],u.getSelectedAll(),!0),D=E.map(function($){var ft,lt;return((lt=(ft=$.delegate)===null||ft===void 0?void 0:ft.move)===null||lt===void 0?void 0:lt.call(ft,$))||$}).filter(Boolean),F=D[D.length-1],V=(_==null?void 0:_.type)==="dragstart",K=["absolute","translate"];if(!(F!=null&&F.get("draggable")))return y.logWarning("The element is not draggable");var Z=h.mode||F.get("dmode")||y.get("dmode"),ct=function(){return y.stopDefault(TP)},ht=(0,J.includes)(K,Z);D.forEach(function($){return $.trigger("disable",{fromMove:!0})}),V?setTimeout(ct,0):ct();var st=EP(y),et=OP(y),nt=AP(y,D,{altMode:ht});if(ht)u.runCommand("core:component-drag",{guidesInfo:1,mode:Z,target:F,onStart:st,onDrag:et,onEnd:nt,event:_});else{V&&((v=_==null?void 0:_.dataTransfer)===null||v===void 0||v.setDragImage((m=F.view)===null||m===void 0?void 0:m.el,0,0));var it=u.Commands.get("move-comp");it.onStart=st,it.onDrag=et,it.onEndMoveFromModel=nt,it.initSorterFromModels(D)}D.filter(function($){return $.get("selectable")}).forEach(function($){return $.set("status","freezed-selected")})}},a["core:undo"]=function(u){return u.UndoManager.undo()},a["core:redo"]=function(u){return u.UndoManager.redo()},OA.forEach(function(u){var c=u[2],h=On(585)("./".concat(u[1])).default,v="core:".concat(u[0]);a[v]=h,c&&(a[c]=h,["run","stop"].forEach(function(m){t.on("".concat(m,":").concat(c),function(){for(var y=[],_=0;_<arguments.length;_++)y[_]=arguments[_];return t.trigger.apply(t,EA(["".concat(m,":").concat(v)],y,!1))})}))}),r.model=t.Canvas;for(var s in a)e.add(s,a[s]);return e}return n.prototype.add=function(t,e){var r=(0,J.isFunction)(e)?{run:e}:e;return r.stop||(r.noStop=!0),delete r.initialize,r.id=t,this.commands[t]=Gx.default.extend(r),this},n.prototype.get=function(t){var e=this.commands[t];return(0,J.isFunction)(e)?(e=new e(this.config),this.commands[t]=e):e||this.em.logWarning("'".concat(t,"' command not found")),e},n.prototype.extend=function(t,e){e===void 0&&(e={});var r=this.get(t);if(r){var o=Y0(Y0({},r.constructor.prototype),e);this.add(t,o);var a=OA.filter(function(s){return"core:".concat(s[0])===t&&s[2]})[0];a&&this.add(a[2],o)}return this},n.prototype.has=function(t){return!!this.commands[t]},n.prototype.getAll=function(){return this.commands},n.prototype.run=function(t,e){return e===void 0&&(e={}),this.runCommand(this.get(t),e)},n.prototype.stop=function(t,e){return e===void 0&&(e={}),this.stopCommand(this.get(t),e)},n.prototype.isActive=function(t){return this.getActive().hasOwnProperty(t)},n.prototype.getActive=function(){return this.active},n.prototype.runCommand=function(t,e){var r,o;e===void 0&&(e={});var a;if(t!=null&&t.run){var s=this,u=s.em,c=s.config,h=t.id,v=u.Editor;if(!this.isActive(h)||e.force||!c.strict){var m=(o=(r=c.defaultOptions)===null||r===void 0?void 0:r[h])===null||o===void 0?void 0:o.run;(0,J.isFunction)(m)&&(e=m(e)),a=v&&t.callRun(v,e)}}return a},n.prototype.stopCommand=function(t,e){var r,o;e===void 0&&(e={});var a;if(t!=null&&t.run){var s=this,u=s.em,c=s.config,h=t.id,v=u.Editor;if(this.isActive(h)||e.force||!c.strict){var m=(o=(r=c.defaultOptions)===null||r===void 0?void 0:r[h])===null||o===void 0?void 0:o.stop;(0,J.isFunction)(m)&&(e=m(e)),a=t.callStop(v,e)}}return a},n.prototype.create=function(t){t.stop||(t.noStop=!0);var e=Gx.default.extend(t);return new e(this.config)},n.prototype.__onRun=function(t,e){var r=this,o=r.em,a=r.events;o.on("".concat(a.runCommand).concat(t),e)},n.prototype.__onStop=function(t,e){var r=this,o=r.em,a=r.events;o.on("".concat(a.stopCommand).concat(t),e)},n.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},n}(da);const A$=O$;var k$=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),w_=function(){return w_=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},w_.apply(this,arguments)},AA="contentEditable",ty="data-toggle-move",M$=function(i){k$(n,i);function n(t){var e=i.call(this,t)||this;(0,J.bindAll)(e,"__render"),e.opt=t,e.module=t.module,e.config=t.config||{},e.sorter=t.sorter||"",e.parentView=t.parentView;var r=e,o=r.model,a=r.pfx,s=r.ppfx,u=o.get("type")||"default";return e.className="".concat(a,"layer ").concat(a,"layer__t-").concat(u," no-select ").concat(s,"two-color"),e.inputNameCls="".concat(s,"layer-name"),e.clsTitleC="".concat(a,"layer-title-c"),e.clsTitle="".concat(a,"layer-title"),e.clsCaret="".concat(a,"layer-caret"),e.clsCount="".concat(a,"layer-count"),e.clsMove="".concat(a,"layer-move"),e.clsChildren="".concat(a,"layer-children"),e.clsNoChild="".concat(a,"layer-no-chld"),e.clsEdit="".concat(e.inputNameCls,"--edit"),e.clsNoEdit="".concat(e.inputNameCls,"--no-edit"),e.initComponent(),e}return n.prototype.events=function(){var t;return t={},t["mousedown [".concat(ty,"]")]="startSort",t["touchstart [".concat(ty,"]")]="startSort",t["click [data-toggle-visible]"]="toggleVisibility",t["click [data-toggle-open]"]="toggleOpening",t["click [data-toggle-select]"]="handleSelect",t["mouseover [data-toggle-select]"]="handleHover",t["mouseout [data-toggle-select]"]="handleHoverOut",t["dblclick [data-name]"]="handleEdit",t["keydown [data-name]"]="handleEditKey",t["focusout [data-name]"]="handleEditEnd",t},n.prototype.template=function(t){var e=this,r=e.pfx,o=e.ppfx,a=e.config,s=e.clsNoEdit,u=e.module,c=e.opt,h=e.em,v=a.hidable,m=u.getComponents(t).length,y=m?"":this.clsNoChild,_="".concat(this.clsTitle," ").concat(y),C="".concat(this.clsTitleC),E="".concat(this.inputNameCls," ").concat(s," ").concat(o,"no-app"),D=c.level||0,F="".concat(D*10,"px"),V=t.getName(),K=t.getIcon(),Z="".concat(r,"layer"),ct=(h==null?void 0:h.getConfig()).icons,ht=ct,st=ht.move,et=ht.eye,nt=ht.eyeOff,it=ht.chevron;return`
      <div class="`.concat(r,"layer-item ").concat(o,`one-bg" data-toggle-select>
        <div class="`).concat(r,`layer-item-left">
          `).concat(v?'<i class="'.concat(r,`layer-vis" data-toggle-visible>
                <i class="`).concat(r,'layer-vis-on">').concat(et,`</i>
                <i class="`).concat(r,'layer-vis-off">').concat(nt,`</i>
              </i>`):"",`
          <div class="`).concat(C,`">
            <div class="`).concat(_,'" style="padding-left: ').concat(F,`">
              <div class="`).concat(r,'layer-title-inn" title="').concat(V,`">
                <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(it,`</i>
                  `).concat(K?'<span class="'.concat(Z,'__icon">').concat(K,"</span>"):"",`
                <span class="`).concat(E,'" data-name>').concat(V,`</span>
              </div>
            </div>
          </div>
        </div>
        <div class="`).concat(r,`layer-item-right">
          <div class="`).concat(this.clsCount,'" data-count>').concat(m||"",`</div>
          <div class="`).concat(this.clsMove,'" ').concat(ty,">").concat(st||"",`</div>
        </div>
      </div>
      <div class="`).concat(this.clsChildren,`"></div>
    `)},Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),n.prototype.initComponent=function(){var t=this,e=this,r=e.model,o=e.config,a=o.onInit,s=r.components();this.listenTo(s,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["change:draggable",this.updateMove],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(u){return t.listenTo(r,u[0],u[1])}),this.$el.data("model",r),this.$el.data("collection",s),r.viewLayer=this,a.bind(this)({component:r,render:this.__render,listenTo:this.listenTo})},n.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},n.prototype.getVisibilityEl=function(){return this.getItemContainer().find("[data-toggle-visible]")},n.prototype.updateVisibility=function(){var t=this,e=t.pfx,r=t.model,o=t.module,a="".concat(e,"layer-hidden"),s=!o.isVisible(r),u=s?"addClass":"removeClass";this.$el[u](a),this.getVisibilityEl()[u]("".concat(e,"layer-off"))},n.prototype.updateMove=function(){var t=this,e=t.model,r=t.config,o=this.getItemContainer().find("[".concat(ty,"]"))[0];if(o){var a=e.get("draggable")&&r.sortable;o.style.display=a?"":"none"}},n.prototype.toggleVisibility=function(t){t==null||t.stopImmediatePropagation();var e=this,r=e.module,o=e.model;r.setVisible(o,!r.isVisible(o))},n.prototype.handleEdit=function(t){t==null||t.stopPropagation();var e=this,r=e.em,o=e.$el,a=e.clsNoEdit,s=e.clsEdit,u=this.getInputName();u[AA]="true",u.focus(),document.execCommand("selectAll",!1),r.setEditing(!0),o.find(".".concat(this.inputNameCls)).removeClass(a).addClass(s)},n.prototype.handleEditKey=function(t){t.stopPropagation(),((0,Ce.v$)(t)||(0,Ce.Ci)(t))&&this.handleEditEnd(t)},n.prototype.handleEditEnd=function(t){t==null||t.stopPropagation();var e=this,r=e.em,o=e.$el,a=e.clsNoEdit,s=e.clsEdit,u=e.model,c=this.getInputName(),h=c.textContent;c.scrollLeft=0,c[AA]="false",u.setName(h),r.setEditing(!1),o.find(".".concat(this.inputNameCls)).addClass(a).removeClass(s),this.updateName()},n.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},n.prototype.updateOpening=function(){var t=this,e=t.$el,r=t.model,o=t.pfx,a="open",s="".concat(o,"layer-open"),u=this.getCaret();this.module.isOpen(r)?(e.addClass(a),u.addClass(s)):(e.removeClass(a),u.removeClass(s))},n.prototype.toggleOpening=function(t){var e=this,r=e.model,o=e.module;t==null||t.stopImmediatePropagation(),r.get("components").length&&o.setOpen(r,!o.isOpen(r))},n.prototype.handleSelect=function(t){t==null||t.stopPropagation();var e=this,r=e.module,o=e.model;r.setLayerData(o,{selected:!0},{event:t})},n.prototype.handleHover=function(t){t==null||t.stopPropagation();var e=this,r=e.module,o=e.model;r.setLayerData(o,{hovered:!0})},n.prototype.handleHoverOut=function(t){t==null||t.stopPropagation();var e=this,r=e.module,o=e.model;r.setLayerData(o,{hovered:!1})},n.prototype.startSort=function(t){var e,r,o;t.stopPropagation();var a=this,s=a.em,u=a.sorter,c=a.model;if(!(t.button&&t.button!==0)&&u){var h=((r=(e=c.delegate)===null||e===void 0?void 0:e.move)===null||r===void 0?void 0:r.call(e,c))||c;u.eventHandlers=w_({legacyOnStartSort:EP(s),legacyOnMoveClb:OP(s),legacyOnEndMove:AP(s,[h])},u.eventHandlers);var v=((o=h.viewLayer)===null||o===void 0?void 0:o.el)||t.target;u.startSort([{element:v}])}},n.prototype.updateStatus=function(){lr.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},n.prototype.getItemContainer=function(){return this.$el.children("[data-toggle-select]")},n.prototype.checkChildren=function(){var t=this,e=t.model,r=t.clsNoChild,o=t.module,a=o.getComponents(e).length,s=this.getItemContainer(),u=s.find(".".concat(this.clsTitle)),c=s.find("[data-count]");u[a?"removeClass":"addClass"](r),c.html("".concat(a||"")),!a&&o.setOpen(e,!1)},n.prototype.getCaret=function(){return(!this.caret||!this.caret.length)&&(this.caret=this.getItemContainer().find(".".concat(this.clsCaret))),this.caret},n.prototype.setRoot=function(t){var e,r=(0,J.isString)(t)?(e=this.em.getWrapper())===null||e===void 0?void 0:e.find(t)[0]:t;r&&(this.stopListening(),this.model=r,this.initComponent(),this._rendered&&this.render())},n.prototype.updateLayerable=function(){var t=this.parentView,e=t||this;e.render()},n.prototype.__clearItems=function(){var t;(t=this.items)===null||t===void 0||t.remove()},n.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ye.Ss.prototype.remove.apply(this,t),delete this.model.viewLayer,this.__clearItems(),this},n.prototype.render=function(){var t=this,e=t.model,r=t.config,o=t.pfx,a=t.ppfx,s=t.opt,u=t.sorter;this.__clearItems();var c=s.opened,h=s.module,v=s.ItemView,m=!h.__isLayerable(e),y=this.$el.empty(),_=s.level+1;delete this.inputName,this.items=new S$({ItemView:v,collection:e.get("components"),config:r,sorter:u,opened:c,parentView:this,parent:e,level:_,module:h});var C=this.items.render().$el;return!r.showWrapper&&_===1?y.append(C):(y.html(this.template(e)),y.find(".".concat(this.clsChildren)).append(C)),!h.isVisible(e)&&(this.className+=" ".concat(o,"hide")),m&&(this.className+=" ".concat(a,"hidden")),y.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.updateMove(),this.__render(),this._rendered=!0,this},n.prototype.__render=function(){var t=this,e=t.model,r=t.config,o=t.el,a=r.onRender,s={component:e,el:o};a.bind(this)(s),this.em.trigger("layer:render",s)},n}(ye.Ss);const D$=M$;var P$=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),x_=function(){return x_=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},x_.apply(this,arguments)},Yx={mediaText:""},N$=["open","status","locked","custom-name","components","classes"].map(function(i){return"".concat(In.I.update,":").concat(i)}).join(" "),R$=function(i){return i===void 0&&(i={}),(i.display||"").trim().indexOf("none")===0},L$=function(i){P$(n,i);function n(t){var e=i.call(this,t,"LayerManager",v$())||this;return e.events=b_,(0,J.bindAll)(e,"componentChanged","__onRootChange","__onComponent"),e.model=new bc.A(e,{opened:{}}),e.config.stylePrefix=e.config.pStylePrefix,e}return n.prototype.onLoad=function(){var t=this,e=this,r=e.em,o=e.config,a=e.model;a.listenTo(r,"component:selected",this.componentChanged),a.on("change:root",this.__onRootChange),a.listenTo(r,N$,this.__onComponent),this.componentChanged(),a.listenToOnce(r,"load",function(){t.setRoot(o.root),t.__appendTo()})},n.prototype.setRoot=function(t){var e=this.em.getWrapper(),r=(0,Zt.isComponent)(t)?t:e;t&&(0,J.isString)(t)&&(0,Zt.hasWin)()&&(r=e.find(t)[0]||e);var o=this.__getLayerFromComponent(r);return this.model.set("root",o),o},n.prototype.getRoot=function(){return this.model.get("root")},n.prototype.getComponents=function(t){var e=this;return t.components().map(function(r){return e.__getLayerFromComponent(r)}).filter(function(r){return e.__isLayerable(r)})},n.prototype.setOpen=function(t,e){t.set("open",e)},n.prototype.isOpen=function(t){return!!t.get("open")},n.prototype.setVisible=function(t,e){var r="__prev-display",o=t.getStyle(Yx),a=o.display;if(e){var s=t.get(r);delete o.display,s&&(o.display=s,t.unset(r))}else a&&t.set(r,a),o.display="none";t.setStyle(o,Yx),this.updateLayer(t),this.em.trigger("component:toggled")},n.prototype.isVisible=function(t){return!R$(t.getStyle(Yx))},n.prototype.setLocked=function(t,e){t.set("locked",e)},n.prototype.isLocked=function(t){return!!t.get("locked")},n.prototype.setName=function(t,e){t.set("custom-name",e)},n.prototype.getName=function(t){return t.getName()},n.prototype.getLayerData=function(t){var e=t.get("status");return{name:t.getName(),open:this.isOpen(t),selected:e==="selected",hovered:e==="hovered",visible:this.isVisible(t),locked:this.isLocked(t),components:this.getComponents(t)}},n.prototype.setLayerData=function(t,e,r){var o;r===void 0&&(r={});var a=this,s=a.em,u=a.config,c=e.open,h=e.selected,v=e.hovered,m=e.visible,y=e.locked,_=e.name,C=x_({fromLayers:!0},r);if((0,Zt.isDef)(c)&&this.setOpen(t,c),(0,Zt.isDef)(h))if(h){s.setSelected(t,C);var E=u.scrollCanvas;E&&((o=t.views)===null||o===void 0||o.forEach(function(D){return D.scrollIntoView(E)}))}else s.removeSelected(t,C);(0,Zt.isDef)(v)&&u.showHover&&(v?s.setHovered(t,C):s.setHovered(null,C)),(0,Zt.isDef)(m)&&m!==this.isVisible(t)&&this.setVisible(t,m),(0,Zt.isDef)(y)&&this.setLocked(t,y),(0,Zt.isDef)(_)&&this.setName(t,_)},n.prototype.componentChanged=function(t,e){var r;if(e===void 0&&(e={}),!e.fromLayers){var o=this,a=o.em,s=o.config,u=s.scrollLayers,c=this.model.get("opened"),h=a.getSelected(),v=h==null?void 0:h.parent();for(var m in c)c[m].set("open",!1),delete c[m];for(;v;)v.set("open",!0),c[v.cid]=v,v=v.parent();if(h&&u){var y=(r=h.viewLayer)===null||r===void 0?void 0:r.el;y==null||y.scrollIntoView(u)}}},n.prototype.getAll=function(){return this.view},n.prototype.render=function(){var t,e,r=this,o=r.config,a=r.model,s=D$.extend(o.extend);return this.view=new s({el:(t=this.view)===null||t===void 0?void 0:t.el,ItemView:s,level:0,config:o,opened:a.get("opened"),model:this.getRoot(),module:this}),(e=this.view)===null||e===void 0?void 0:e.render().el},n.prototype.destroy=function(){var t;(t=this.view)===null||t===void 0||t.remove()},n.prototype.__onRootChange=function(){var t,e=this,r=e.em,o=e.events,a=this.getRoot();(t=this.view)===null||t===void 0||t.setRoot(a),r.trigger(o.root,a),this.__trgCustom()},n.prototype.__getLayerFromComponent=function(t){var e,r;return((r=(e=t.delegate)===null||e===void 0?void 0:e.layer)===null||r===void 0?void 0:r.call(e,t))||t},n.prototype.__onComponent=function(t){this.updateLayer(t)},n.prototype.__isLayerable=function(t){var e=t.tagName,r=this.config.hideTextnode,o=!r||!t.isInstanceOf("textnode")&&e!=="br";return o&&t.get("layerable")},n.prototype.__trgCustom=function(t){var e=this,r=e.__ctn,o=e.em,a=e.events;this.__ctn=r||(t==null?void 0:t.container),o.trigger(a.custom,{container:this.__ctn,root:this.getRoot()})},n.prototype.updateLayer=function(t,e){var r=this,o=r.em,a=r.events;o.trigger(a.component,t,e)},n}(da);const j$=L$;var I$=function(){return{assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,multiUploadSuffix:"[]",autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""}};const B$=I$;var U$=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kP=function(i){U$(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.getDefaults=function(){return(0,J.result)(this.prototype,"defaults")},n.prototype.defaults=function(){return{type:"",src:""}},n.prototype.getType=function(){return this.get("type")},n.prototype.getSrc=function(){return this.get("src")||""},n.prototype.getFilename=function(){return this.getSrc().split("/").pop().split("?").shift()},n.prototype.getExtension=function(){return this.getFilename().split(".").pop()},n}(ye.Kx);const S_=kP;kP.prototype.idAttribute="src";var V$=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),X0=function(){return X0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},X0.apply(this,arguments)},F$=function(i){V$(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.defaults=function(){return X0(X0({},S_.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},n}(S_);const H$=F$;var z$=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),W$=function(i){z$(n,i);function n(t){var e=i.call(this,t)||this;e.options=t,e.collection=t.collection;var r=t.config||{};e.config=r,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.em=r.em,e.className=e.pfx+"asset",e.listenTo(e.model,"destroy remove",e.remove),e.model.view=e;var o=e.init&&e.init.bind(e);return o&&o(t),e}return n.prototype.__getBhv=function(){var t=this.em,e=t==null?void 0:t.Assets;return(e==null?void 0:e.__getBehaviour())||{}},n.prototype.template=function(t,e){var r=this.pfx;return`
      <div class="`.concat(r,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(r,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(r,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},n.prototype.updateTarget=function(t){t&&t.set&&(t.set("attributes",(0,J.clone)(t.get("attributes"))),t.set("src",this.model.get("src")))},n.prototype.getPreview=function(){return""},n.prototype.getInfo=function(){return""},n.prototype.render=function(){var t=this.el;return t.innerHTML=this.template(this,this.model),t.className=this.className,this},n}(ye.Ss);const q$=W$;var K$=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kA=function(i,n){return Object.defineProperty?Object.defineProperty(i,"raw",{value:n}):i.raw=n,i},MP=function(i){K$(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getPreview=function(){var t=this,e=t.pfx,r=t.ppfx,o=t.model,a=o.get("src");return sa(MA||(MA=kA([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),e,a,e,r)},n.prototype.getInfo=function(){var t=this,e=t.pfx,r=t.model,o=r.get("name"),a=r.get("width"),s=r.get("height"),u=r.get("unitDim"),c=a&&s?"".concat(a,"x").concat(s).concat(u):"";return o=o||r.getFilename(),sa(DA||(DA=kA([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),e,o,e,c)},n.prototype.init=function(t){var e=this.pfx;this.className+=" ".concat(e,"asset-image")},n.prototype.onClick=function(){var t=this,e=t.model,r=t.pfx,o=this.__getBhv().select,a=this.config.onClick,s=this.collection;s.trigger("deselectAll"),this.$el.addClass(r+"highlight"),(0,J.isFunction)(o)?o(e,!1):(0,J.isFunction)(a)?a(e):this.updateTarget(s.target)},n.prototype.onDblClick=function(){var t=this,e=t.em,r=t.model,o=this.__getBhv().select,a=this.config.onDblClick,s=this.collection,u=s.target,c=s.onSelect;(0,J.isFunction)(o)?o(r,!0):(0,J.isFunction)(a)?a(r):(this.updateTarget(u),e==null||e.Modal.close()),(0,J.isFunction)(c)&&c(r)},n.prototype.onRemove=function(t){t.stopImmediatePropagation(),this.model.collection.remove(this.model)},n}(q$);const $$=MP;MP.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var MA,DA,J0=function(){return J0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},J0.apply(this,arguments)},G$={types:[],initialize:function(i,n){var t=this;n===void 0&&(n={});var e=n.em;this.em=e,this.opts=n,this.model=function(o,a){o===void 0&&(o={}),a===void 0&&(a={});var s,u,c;if(o&&o.type){var h=t.getBaseType();c=t.getType(o.type),s=c?c.model:h.model,u=c?c.view:h.view}else{var v=t.recognizeType(o);c=v.type,s=c.model,u=c.view,o=v.attributes}var m=new s(o,J0(J0({},a),{em:e}));return m.typeView=u,t.model.prototype=s.prototype,m};var r=this.init&&this.init.bind(this);r&&r()},recognizeType:function(i){for(var n=this.getTypes(),t=0;t<n.length;t++){var e=n[t],r=e.isType(i);if(r=typeof r=="boolean"&&r?{type:e.id}:r,r)return{type:e,attributes:r}}return{type:this.getBaseType(),attributes:i}},getBaseType:function(){var i=this.getTypes();return i[i.length-1]},getTypes:function(){return this.types},getType:function(i){for(var n=this.getTypes(),t=0;t<n.length;t++){var e=n[t];if(e.id===i)return e}},addType:function(i,n){var t=this.getType(i),e=this.getBaseType(),r=t?t.model:e.model,o=t?t.view:e.view,a=n.model,s=n.view,u=n.isType;a=a instanceof ye.Kx||(0,J.isFunction)(a)?a:r.extend(a||{}),s=s instanceof ye.Ss||(0,J.isFunction)(s)?s:o.extend(s||{}),this.extendViewApi&&!n.model&&!n.view&&(s=s.extend(n)),t?(t.model=a,t.view=s,t.isType=u||t.isType):(n.id=i,n.model=a,n.view=s,n.isType=u||function(c){if(c&&c.type==i)return!0},this.getTypes().unshift(n))}};const DP=G$;var Y$=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),X$=ye.pM.extend(DP),PP=function(i){Y$(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n}(X$);const Xx=PP;PP.prototype.types=[{id:"image",model:H$,view:$$,isType:function(i){return typeof i=="string"?{type:"image",src:i}:i}}];var __;(function(i){i.add="asset:add",i.remove="asset:remove",i.removeBefore="asset:remove:before",i.update="asset:update",i.open="asset:open",i.close="asset:close",i.uploadStart="asset:upload:start",i.uploadEnd="asset:upload:end",i.uploadError="asset:upload:error",i.uploadResponse="asset:upload:response",i.custom="asset:custom",i.all="asset"})(__||(__={}));const PA=__;var J$=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),NP=function(i){J$(n,i);function n(t){t===void 0&&(t={});var e=i.call(this,t)||this;e.options=t,e.config=t.config,e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.em=e.config.em;var r=e.collection;return e.listenTo(r,"reset",e.renderAssets),e.listenTo(r,"add",e.addToAsset),e.listenTo(r,"remove",e.removedAsset),e.listenTo(r,"deselectAll",e.deselectAll),e}return n.prototype.template=function(t){var e=t.pfx,r=t.ppfx,o=t.em,a="";return this.config.showUrlInput&&(a=`
          <form class="`.concat(e,`add-asset">
            <div class="`).concat(r,"field ").concat(e,`add-field">
              <input placeholder="`).concat(o==null?void 0:o.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(r,'btn-prim">').concat(o==null?void 0:o.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(e,`assets-cont">
      <div class="`).concat(e,`assets-header">
        `).concat(a,`
      </div>
      <div class="`).concat(e,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},n.prototype.handleSubmit=function(t){t.preventDefault();var e=this.getAddInput(),r=e&&e.value.trim(),o=this.config.handleAdd;if(r){e.value="";var a=this.getAssetsEl();a&&(a.scrollTop=0),o?o.bind(this)(r):this.options.globalCollection.add(r,{at:0})}},n.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},n.prototype.getAddInput=function(){return(!this.inputUrl||!this.inputUrl.value)&&(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},n.prototype.removedAsset=function(t){this.collection.length||this.toggleNoAssets()},n.prototype.addToAsset=function(t){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(t)},n.prototype.addAsset=function(t,e){e===void 0&&(e=null);var r=e,o=this.collection,a=this.config,s=new t.typeView({model:t,collection:o,config:a}).render().el;if(r)r.appendChild(s);else{var u=this.getAssetsEl();u&&u.insertBefore(s,u.firstChild)}return s},n.prototype.toggleNoAssets=function(t){t===void 0&&(t=!1);var e=this.$el.find(".".concat(this.pfx,"assets"));if(t)e.empty();else{var r=this.config.noAssets;r&&e.append(r)}},n.prototype.deselectAll=function(){var t=this.pfx;this.$el.find(".".concat(t,"highlight")).removeClass("".concat(t,"highlight"))},n.prototype.renderAssets=function(){var t=this,e=document.createDocumentFragment(),r=this.$el.find(".".concat(this.pfx,"assets"));r.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(o){return t.addAsset(o,e)}),r.append(e)},n.prototype.render=function(){var t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},n}(ye.Ss);const Z$=NP;NP.prototype.events={submit:"handleSubmit"};var Q$=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tG=function(i,n){return Object.defineProperty?Object.defineProperty(i,"raw",{value:n}):i.raw=n,i},eG=function(i){Q$(n,i);function n(t){t===void 0&&(t={});var e=i.call(this,t)||this;e.options=t;var r=t.config||{};e.module=t.module,e.config=r,e.em=e.config.em,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.target=e.options.globalCollection||{},e.uploadId=e.pfx+"uploadFile",e.disabled=r.disableUpload!==void 0?r.disableUpload:!r.upload&&!r.embedAsBase64,e.multiUpload=r.multiUpload!==void 0?r.multiUpload:!0;var o=r.uploadFile;return o?e.uploadFile=o.bind(e):!r.upload&&r.embedAsBase64&&(e.uploadFile=n.embedAsBase64),e.delegateEvents(),e}return n.prototype.template=function(t){var e=t.pfx,r=t.title,o=t.uploadId,a=t.disabled,s=t.multiUpload;return sa(NA||(NA=tG([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),e,r,o,a?"disabled":"",s?"multiple":"")},n.prototype.events=function(){return{"change [data-input]":"uploadFile"}},n.prototype.onUploadStart=function(){var t=this.module;t==null||t.__propEv(t.events.uploadStart)},n.prototype.onUploadEnd=function(t){var e=this,r=e.$el,o=e.module;o==null||o.__propEv(o.events.uploadEnd,t);var a=r.find("input");a&&a.val("")},n.prototype.onUploadError=function(t){var e=this.module;console.error(t),this.onUploadEnd(t),e==null||e.__propEv(e.events.uploadError,t)},n.prototype.onUploadResponse=function(t,e){var r=this,o=r.module,a=r.config,s=r.target,u;try{u=typeof t=="string"?JSON.parse(t):t}catch{u=t}o==null||o.__propEv(o.events.uploadResponse,u),a.autoAdd&&s&&s.add(u.data,{at:0}),this.onUploadEnd(t),e==null||e(u)},n.prototype.uploadFile=function(t,e,r){var o=this,a,s=t.dataTransfer?t.dataTransfer.files:(a=t.target)===null||a===void 0?void 0:a.files,u=this.config,c=u.beforeUpload,h=c&&c(s);if(h!==!1){var v=new FormData,m=u.params,y=u.customFetch,_=u.fetchOptions;for(var C in m)v.append(C,m[C]);if(this.multiUpload)for(var E=0;E<s.length;E++)v.append("".concat(u.uploadName).concat(u.multiUploadSuffix),s[E]);else s.length&&v.append(u.uploadName,s[0]);var D=u.upload,F=u.headers,V="X-Requested-With";if(typeof F[V]>"u"&&(F[V]="XMLHttpRequest"),D){this.onUploadStart();var K={method:"post",credentials:u.credentials||"include",headers:F,body:v},Z=(_==null?void 0:_(K))||K,ct=y?y(D,Z):mP(D,Z).then(function(ht){return(ht.status/200|0)==1?ht.text():ht.text().then(function(st){return Promise.reject(st)})});return ct.then(function(ht){return o.onUploadResponse(ht,e)}).catch(function(ht){return o.onUploadError(ht)})}}},n.prototype.initDrop=function(){var t=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var e=this.uploadForm;"draggable"in e&&(this.uploadForm.ondragover=function(){return e.className=t.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return e.className="",!1},this.uploadForm.ondrop=function(r){e.className="",r.preventDefault(),t.uploadFile(r)})}},n.prototype.initDropzone=function(t){var e=this,r=0,o=this.config,a=t.model,s=t.el,u=a.Editor,c=a.Canvas.getBody(),h=this.ppfx,v="".concat(h,"dropzone-active"),m="".concat(h,"dropzone"),y=function(){s.className=s.className.replace(v,"").trim(),r=0},_=function(){return r||(s.className+=" ".concat(v),r=1),!1},C=function(){return y(),!1},E=function(D){if(y(),D.preventDefault(),D.stopPropagation(),e.uploadFile(D),o.openAssetsOnDrop&&u){var F=u.getSelected();u.runCommand("open-assets",{target:F,onSelect:function(){u.Modal.close(),u.AssetManager.setTarget(null)}})}return!1};t.$el.append('<div class="'.concat(m,'">').concat(o.dropzoneContent,"</div>")),y(),"draggable"in s&&[s,c].forEach(function(D){D.ondragover=_,D.ondragleave=C,D.ondrop=E})},n.prototype.render=function(){var t=this,e=t.$el,r=t.pfx,o=t.em;return e.html(this.template({title:o&&o.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:r})),this.initDrop(),e.attr("class",r+"file-uploader"),this},n.embedAsBase64=function(t,e){var r=this,o=t.dataTransfer?t.dataTransfer.files:t.target.files,a={data:[]};if(!FileReader){this.onUploadError(new Error("Unsupported platform, FileReader is not defined"));return}for(var s=[],u=/^(.+)\/(.+)$/,c=function(y){var _=new Promise(function(C,E){var D=new FileReader;D.addEventListener("load",function(F){var V,K=y.name,Z=u.exec(y.type);if(Z?V=Z[1]:V=y.type,V==="image"){var ct={src:D.result,name:K,type:V,height:0,width:0},ht=new Image;ht.addEventListener("error",function(st){E(st)}),ht.addEventListener("load",function(){ct.height=ht.height,ct.width=ht.width,C(ct)}),ht.src=ct.src}else C(V?{src:D.result,name:K,type:V}:D.result)}),D.addEventListener("error",function(F){E(F)}),D.addEventListener("abort",function(F){E("Aborted")}),D.readAsDataURL(y)});s.push(_)},h=0,v=o;h<v.length;h++){var m=v[h];c(m)}return Promise.all(s).then(function(y){a.data=y,r.onUploadResponse(a,e)},function(y){r.onUploadError(y)})},n}(ye.Ss);const nG=eG;var NA,rG=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yh=function(){return yh=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},yh.apply(this,arguments)},RA=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},wv="open-assets",iG=function(i){rG(n,i);function n(t){var e=i.call(this,t,"AssetManager",new Xx([],t),PA,B$())||this;e.storageKey="assets",e.Asset=S_,e.Assets=Xx,e.events=PA;var r=e,o=r.all,a=r.config;e.assetsVis=new Xx([]);var s=a.pStylePrefix;return s&&(a.stylePrefix="".concat(s).concat(a.stylePrefix)),o.on("add",function(u){return e.getAllVisible().add(u)}),o.on("remove",function(u){return e.getAllVisible().remove(u)}),e.__onAllEvent=(0,J.debounce)(function(){return e.__trgCustom()},0),e}return n.prototype.open=function(t){t===void 0&&(t={});var e=this.em.Commands;e.run(wv,yh({types:["image"],select:function(){}},t))},n.prototype.close=function(){var t=this.em.Commands;t.stop(wv)},n.prototype.isOpen=function(){var t=this.em.Commands;return!!(t!=null&&t.isActive(wv))},n.prototype.add=function(t,e){return e===void 0&&(e={}),typeof e.at>"u"&&(e.at=0),this.all.add(t,e)},n.prototype.get=function(t){return this.all.where({src:t})[0]||null},n.prototype.getAll=function(){return this.all},n.prototype.getAllVisible=function(){return this.assetsVis},n.prototype.remove=function(t,e){return this.__remove(t,e)},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){return this.loadProjectData(t)},n.prototype.getContainer=function(){var t,e=this.__getBehaviour();return e.container||((t=this.am)===null||t===void 0?void 0:t.el)},n.prototype.getAssetsEl=function(){var t;return(t=this.am)===null||t===void 0?void 0:t.el.querySelector("[data-el=assets]")},n.prototype.render=function(t){if(!this.getConfig().custom){var e=t||this.getAll().models;if(!this.am){var r=this.__viewParams();r.fu=this.FileUploader(),this.am=new Z$(yh({},r)),this.am.render()}return this.assetsVis.reset(e),this.getContainer()}},n.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},n.prototype.addType=function(t,e){this.getAll().addType(t,e)},n.prototype.getType=function(t){return this.getAll().getType(t)},n.prototype.getTypes=function(){return this.getAll().getTypes()},n.prototype.AssetsView=function(){return this.am},n.prototype.FileUploader=function(){return this.fu||(this.fu=new nG(this.__viewParams())),this.fu},n.prototype.onLoad=function(){var t=this;this.getAll().reset(this.config.assets);var e=this,r=e.em,o=e.events;r.Commands.__onRun(wv,function(){return t.__propEv(o.open)}),r.Commands.__onStop(wv,function(){return t.__propEv(o.close)})},n.prototype.postRender=function(t){var e;this.config.dropzone&&((e=this.fu)===null||e===void 0||e.initDropzone(t))},n.prototype.setTarget=function(t){this.assetsVis.target=t},n.prototype.onSelect=function(t){this.assetsVis.onSelect=t},n.prototype.onClick=function(t){this.config.onClick=t},n.prototype.onDblClick=function(t){this.config.onDblClick=t},n.prototype.__propEv=function(t){for(var e,r,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];(e=this.em).trigger.apply(e,RA([t],o,!1)),(r=this.getAll()).trigger.apply(r,RA([t],o,!1))},n.prototype.__trgCustom=function(){var t=this.__getBehaviour(),e=this.getConfig().custom;!t.container&&!e.open||this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:e.types||[],container:e.container,close:function(){return t.close()},remove:function(r,o){return t.remove(r,o)},select:function(r,o){var a=t.add(r);(0,J.isFunction)(e.select)&&e.select(a,o)},options:e.options||{}}},n.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=yh(yh({},this._bhv||{}),t)},n.prototype.__getBehaviour=function(t){return this._bhv||{}},n.prototype.destroy=function(){var t,e;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(t=this.fu)===null||t===void 0||t.remove(),(e=this.am)===null||e===void 0||e.remove(),this._bhv={}},n}(lu);const oG=iG;var aG=function(){return{default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]}};const sG=aG;var lG=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),uG=function(i){lG(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},n.prototype.initialize=function(){var t=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0);var e=["width","height","widthMedia"];e.forEach(function(r){return t.checkUnit(r)})},n.prototype.checkUnit=function(t){var e=this.get(t)||"",r=(parseFloat(e)||0).toString()===e.toString();r&&this.set(t,"".concat(e,"px"))},n.prototype.getName=function(){return this.get("name")||this.get("id")},n.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},n}(ye.Kx);const RP=uG;var cG=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),LP=function(i){cG(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n}(ye.pM);const LA=LP;LP.prototype.model=RP;var fG=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),dG=function(i,n){return Object.defineProperty?Object.defineProperty(i,"raw",{value:n}):i.raw=n,i},hG=function(i){fG(n,i);function n(t){var e=i.call(this,t)||this;return e.config=t.config||{},e.em=e.config.em,e.ppfx=e.config.pStylePrefix||"",e.listenTo(e.em,"change:device",e.updateSelect),e}return n.prototype.template=function(t){var e=t.ppfx,r=t.label;return sa(jA||(jA=dG([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),e,r,e,e,e,e,e,e,e)},n.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},n.prototype.startAdd=function(){},n.prototype.updateDevice=function(){var t=this.em;if(t){var e=this.devicesEl;t.set("device",e?e.val():"")}},n.prototype.updateSelect=function(){var t=this,e=t.em,r=t.devicesEl;if(e&&e.getDeviceModel&&r){var o=e.getDeviceModel();r.val(o?o.get("id"):"")}},n.prototype.getOptions=function(){var t=this,e=t.collection,r=t.em,o="";return e.forEach(function(a){var s=a.attributes,u=s.name,c=s.id,h=r&&r.t&&r.t("deviceManager.devices.".concat(c))||u;o+='<option value="'.concat(c||u,'">').concat(h,"</option>")}),o},n.prototype.render=function(){var t=this,e=t.em,r=t.ppfx,o=t.$el,a=t.el,s=e&&e.t&&e.t("deviceManager.device");return o.html(this.template({ppfx:r,label:s})),this.devicesEl=o.find(".".concat(r,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(e.get("device")),a.className="".concat(r,"devices-c"),this},n}(ye.Ss);const pG=hG;var jA,vG=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yv=function(){return Yv=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Yv.apply(this,arguments)},gG=function(i){vG(n,i);function n(t){var e,r=i.call(this,t,"DeviceManager",new LA,ED,sG())||this;return r.Device=RP,r.Devices=LA,r.storageKey="",r.devices=r.all,(e=r.config.devices)===null||e===void 0||e.forEach(function(o){return r.add(o,{silent:!0})}),r.select(r.config.default||r.devices.at(0)),t.on("change:device",r._onSelect,r),r}return n.prototype._onSelect=function(t,e,r){var o=this,a=o.em,s=o.events,u=t.previous("device"),c=this.get(e),h=s.select;a.trigger(h,c,this.get(u)),this.__catchAllEvent(h,c,r)},n.prototype.add=function(t,e){e===void 0&&(e={});var r,o=e;if((0,J.isString)(t)){var a=e;o=arguments[2]||{},r=Yv(Yv({},o),{id:t,name:o.name||t,width:a})}else r=t;return r.id||(r.id=r.name||this._createId()),this.devices.add(r,o)},n.prototype.get=function(t){var e=this.getAll().filter(function(r){return r.get("name")===t})[0];return e||this.devices.get(t)||null},n.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},n.prototype.getDevices=function(){return this.devices.models},n.prototype.select=function(t,e){e===void 0&&(e={});var r=(0,J.isString)(t)?this.get(t):t;return r&&this.em.set("device",r.get("id"),e),this},n.prototype.getSelected=function(){return this.get(this.em.get("device"))},n.prototype.getAll=function(){return this.devices},n.prototype.render=function(){var t,e=this.em;return(t=this.view)===null||t===void 0||t.remove(),this.view=new pG({collection:this.devices,config:Yv({em:e},this.config)}),this.view.render().el},n.prototype.destroy=function(){this.__destroy()},n}(lu);const mG=gG;var yG=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bG=function(i){yG(n,i);function n(t,e){e===void 0&&(e={});var r=i.call(this,t,e)||this,o=e.em,a={};r.em=o,t.frames||(a.component=t.component,a.styles=t.styles,["component","styles"].map(function(c){return r.unset(c)}));var s=t.frames||[a],u=new AD(o.Canvas,s);return u.page=r,r.set("frames",u),!r.getId()&&r.set("id",o==null?void 0:o.Pages._createId()),o==null||o.UndoManager.add(u),r}return n.prototype.defaults=function(){return{name:"",frames:[],_undo:!0}},n.prototype.onRemove=function(){this.getFrames().reset()},n.prototype.getFrames=function(){return this.get("frames")},n.prototype.getId=function(){return this.id},n.prototype.getName=function(){return this.get("name")},n.prototype.setName=function(t){return this.set({name:t})},n.prototype.getAllFrames=function(){return this.getFrames().models||[]},n.prototype.getMainFrame=function(){return this.getFrames().at(0)},n.prototype.getMainComponent=function(){var t=this.getMainFrame();return t==null?void 0:t.getComponent()},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=ye.Kx.prototype.toJSON.call(this,t),r=(0,J.result)(this,"defaults");return(0,J.forEach)(e,function(o,a){a.indexOf("_")===0&&delete e[a]}),(0,J.forEach)(r,function(o,a){e[a]===o&&delete e[a]}),e},n}(ye.Kx);const C_=bG;var wG=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Z0=function(){return Z0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Z0.apply(this,arguments)},xG=function(i){wG(n,i);function n(t,e){var r=i.call(this,t)||this;return r.on("reset",r.onReset),r.on("remove",r.onRemove),r.model=function(o,a){return a===void 0&&(a={}),new C_(o,Z0(Z0({},a),{em:e}))},r}return n.prototype.onReset=function(t,e){var r=this,o;(o=e==null?void 0:e.previousModels)===null||o===void 0||o.map(function(a){return r.onRemove(a,r,e)})},n.prototype.onRemove=function(t,e,r){r===void 0&&(r={}),!(r.fromUndo||r.temporary)&&(t==null||t.onRemove())},n}(ye.pM);const SG=xG;var _G=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bh=function(){return bh=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},bh.apply(this,arguments)},CG=function(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(i);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]]);return t},TG=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},IA="change:selected",BA="main",EG=function(i){_G(n,i);function n(t){var e=i.call(this,t,"PageManager",new SG([],t),t_)||this;e.events=t_,e.storageKey="pages",(0,J.bindAll)(e,"_onPageChange");var r=new bc.A(e,{_undo:!0});return e.model=r,e.pages.on("reset",e.__onReset,e),e.pages.on("all",e.__onChange,e),r.on(IA,e._onPageChange),e}return Object.defineProperty(n.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),n.prototype.getAll=function(){return TG([],this.all.models,!0)},n.prototype.__onChange=function(t,e,r,o){var a=this,s=a.em,u=a.events,c=o||r;s.trigger(u.all,{event:t,page:e,options:c})},n.prototype.__onReset=function(){var t=this.pages.at(0);t&&this.select(t)},n.prototype.onLoad=function(){var t,e=this,r=e.pages,o=e.config,a=e.em,s={silent:!0},u=((t=o.pages)===null||t===void 0?void 0:t.map(function(h){return new C_(h,{em:a,config:o})}))||[];r.add(u,s);var c=r.length?this._initPage():this.add({type:BA},s);c&&this.select(c,s)},n.prototype._onPageChange=function(t,e,r){var o=this,a=o.em,s=o.events,u=a.Layers,c=e.getMainComponent();u&&c&&u.setRoot(c),a.trigger(s.select,e,t.previous("selected")),this.__onChange(IA,e,r)},n.prototype.postLoad=function(){var t=this,e=t.em,r=t.model,o=t.pages,a=e.UndoManager;a.add(r),a.add(o),o.on("add remove reset change",function(s,u,c){var h=c||u;e.changesUp(c||u,{page:s,options:h})})},n.prototype.add=function(t,e){var r=this;e===void 0&&(e={});var o=this,a=o.em,s=o.events;t.id=t.id||this._createId();var u=function(){var c=r.pages.add(new C_(t,{em:r.em,config:r.config}),e);return e.select&&r.select(c),c};return!e.silent&&a.trigger(s.addBefore,t,u,e),e.abort?void 0:u()},n.prototype.remove=function(t,e){var r=this;e===void 0&&(e={});var o=this,a=o.em,s=o.events,u=(0,J.isString)(t)?this.get(t):t,c=function(){return u&&r.pages.remove(u,e),u};return!e.silent&&a.trigger(s.removeBefore,u,c,e),!e.abort&&c()},n.prototype.move=function(t,e){e===void 0&&(e={});var r=this.pages,o=(0,J.isString)(t)?this.get(t):t,a=e.at,s=a===void 0?0:a,u=CG(e,["at"]);if(o){var c=r.indexOf(o),h=c===s;if(!(s<0||s>=r.length||h))return this.remove(o,bh(bh({},u),{temporary:!0})),r.add(o,bh(bh({},u),{at:s})),o}},n.prototype.get=function(t){return this.pages.filter(function(e){return e.get(e.idAttribute)===t})[0]},n.prototype.getMain=function(){var t=this.pages;return t.filter(function(e){return e.get("type")===BA})[0]||t.at(0)},n.prototype.getAllWrappers=function(){var t=this.getAll();return(0,J.unique)((0,J.flatten)(t.map(function(e){return e.getAllFrames().map(function(r){return r.getComponent()})})))},n.prototype.select=function(t,e){e===void 0&&(e={});var r=this,o=r.em,a=r.model,s=r.events,u=(0,J.isString)(t)?this.get(t):t;return u&&(o.trigger(s.selectBefore,u,e),a.set("selected",u,e)),this},n.prototype.getSelected=function(){return this.model.get("selected")},n.prototype.destroy=function(){var t=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(e){return t[e]=0})},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){var e=this,r=this.loadProjectData(t,{all:this.pages,reset:!0,onResult:function(o,a){o.forEach(function(s){return e.add(s,a)}),e.__onReset()}});return this.pages.forEach(function(o){return o.getFrames().initRefs()}),r},n.prototype._initPage=function(){return this.get(this.config.selected)||this.getMain()},n.prototype._createId=function(){var t=this.getAll(),e=t.length+16,r=this.getAllMap(),o;do o=(0,Zt.createId)(e);while(r[o]);return o},n}(lu);const OG=EG;var Jx={placeholder:"eg. Text here"};const AG={assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",categories:{},traits:{labels:{},attributes:{id:Jx,alt:Jx,title:Jx,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}};var kG=function(){return{locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:AG},messagesAdd:void 0}};const MG=kG;var T_;(function(i){i.add="i18n:add",i.update="i18n:update",i.locale="i18n:locale"})(T_||(T_={}));const DG=T_;var PG=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),NG=function(i){PG(n,i);function n(t){var e=i.call(this,t,"I18n",MG())||this;e.events=DG;var r=e.config.messagesAdd;return r&&e.addMessages(r),e.config.detectLocale&&(e.config.locale=e._localLang()),e}return n.prototype.setLocale=function(t){var e=this,r=e.em,o=e.config,a=e.events;return r.trigger(a.locale,{value:t,valuePrev:o.locale}),o.locale=t,this},n.prototype.getLocale=function(){return this.config.locale},n.prototype.getMessages=function(t,e){e===void 0&&(e={});var r=this.config.messages;return t&&!r[t]&&this._debug("'".concat(t,"' i18n lang not found"),e),t?r[t]:r},n.prototype.setMessages=function(t){var e=this,r=e.em,o=e.config,a=e.events;return o.messages=t,r.trigger(a.update,t),this},n.prototype.addMessages=function(t){var e=this,r=e.em,o=e.events,a=e.config,s=a.messages;return r.trigger(o.add,t),this.setMessages((0,Zt.deepMerge)(s,t)),this},n.prototype.t=function(t,e){e===void 0&&(e={});var r=this.config,o=e.params||{},a=e.l||this.getLocale(),s=e.lFlb||r.localeFallback,u=this._getMsg(t,a,e);return u||(u=this._getMsg(t,s,e)),!u&&this._debug("'".concat(t,"' i18n key not found in '").concat(a,"' lang"),e),u=u&&(0,J.isString)(u)?this._addParams(u,o):u,u},n.prototype._localLang=function(){var t=(0,Zt.hasWin)()&&window.navigator||{},e=t.language||t.userLanguage;return e?e.split("-")[0]:"en"},n.prototype._addParams=function(t,e){var r=new RegExp("{([\\w\\d-]*)}","g");return t.replace(r,function(o,a){return e[a]||""}).trim()},n.prototype._getMsg=function(t,e,r){r===void 0&&(r={});var o=this.getMessages(e,r);if(o){var a=o[t];return!a&&t.indexOf(".")>0&&(a=t.split(".").reduce(function(s,u){if(!(0,J.isUndefined)(s))return s[u]},o)),a}},n.prototype._debug=function(t,e){e===void 0&&(e={});var r=this,o=r.em,a=r.config;(e.debug||a.debug)&&o&&o.logWarning(t)},n.prototype.destroy=function(){},n}(da);const RG=NG;var wf=function(){return wf=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},wf.apply(this,arguments)},LG=function(i,n){n===void 0&&(n={});var t=n.prefix||"",e=document.createElement("i");return e.className=t+"resizer-h "+t+"resizer-h-"+i,e.setAttribute("data-"+t+"handler",i),e},jG=function(i,n){var t=window,e=i.getBoundingClientRect();return{left:e.left+t.pageXOffset,top:e.top+t.pageYOffset,width:e.width,height:e.height}},IG=function(){function i(n){n===void 0&&(n={}),this.moved=!1,this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=wf({},this.defOpts),this.setOptions(n),(0,J.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return i.prototype.getConfig=function(){return this.opts},i.prototype.setOptions=function(n,t){n===void 0&&(n={}),this.opts=wf(wf({},t?this.defOpts:this.opts),n),this.setup()},i.prototype.setup=function(){var n=this.opts,t=n.prefix||"",e=n.appendTo||document.body,r=this.container;for(r||(r=document.createElement("div"),r.className="".concat(t,"resizer-c"),e.appendChild(r),this.container=r);r.firstChild;)r.removeChild(r.firstChild);var o={};["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(u){return o[u]=n[u]?LG(u,n):null});for(var a in o){var s=o[a];s&&r.appendChild(s)}this.handlers=o,this.mousePosFetcher=n.mousePosFetcher,this.updateTarget=n.updateTarget,this.posFetcher=n.posFetcher,this.onStart=n.onStart,this.onMove=n.onMove,this.onEnd=n.onEnd,this.onUpdateContainer=n.onUpdateContainer},i.prototype.toggleFrames=function(n){if(this.opts.silentFrames){var t=document.querySelectorAll("iframe");(0,J.each)(t,function(e){return e.style.pointerEvents=n?"none":""})}},i.prototype.isHandler=function(n){var t=this.handlers;for(var e in t)if(t[e]===n)return!0;return!1},i.prototype.getFocusedEl=function(){return this.el},i.prototype.getParentEl=function(){var n;return(n=this.el)===null||n===void 0?void 0:n.parentElement},i.prototype.getDocumentEl=function(){return this.opts.docs||[this.el.ownerDocument,document]},i.prototype.getElementPos=function(n,t){t===void 0&&(t={});var e=this.posFetcher;return e?e(n,t):jG(n)},i.prototype.focus=function(n){n&&n===this.el||(this.el=n,this.updateContainer({forceShow:!0}),(0,Ce.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},i.prototype.blur=function(){this.container.style.display="none",this.el&&((0,Ce.AU)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},i.prototype.start=function(n){var t,e=this,r=e.el,o=e.opts,a=o===void 0?{}:o;if(this.moved=!1,!(n.button!==0||!r)){n.preventDefault(),n.stopPropagation(),(t=this.selectedHandler)===null||t===void 0||t.setPointerCapture(n.pointerId);var s=this.getParentEl(),u=this,c=a,h=this.mousePosFetcher,v="data-"+c.prefix+"handler",m=this.getElementPos(r,{avoidFrameZoom:!0,avoidFrameOffset:!0}),y=this.getElementPos(s),_=n.target;this.handlerAttr=_.getAttribute(v),this.clickedHandler=_,this.startDim={t:m.top,l:m.left,w:m.width,h:m.height},this.rectDim={t:m.top,l:m.left,w:m.width,h:m.height},this.startPos=h?h(n):{x:n.clientX,y:n.clientY},this.parentDim={t:y.top,l:y.left,w:y.width,h:y.height};var C=this.getDocumentEl();this.docs=C,(0,Ce.on)(C,"pointermove",this.move),(0,Ce.on)(C,"keydown",this.handleKeyDown),(0,Ce.on)(C,"pointerup",this.stop),(0,J.isFunction)(this.onStart)&&this.onStart(n,{docs:C,config:c,el:r,resizer:u}),this.toggleFrames(!0),!c.updateOnMove&&this.move(n)}},i.prototype.move=function(n){var t,e;this.moved=!0;var r=this.el,o=this.opts,a=this.docs||this.getDocumentEl(),s=((t=this.mousePosFetcher)===null||t===void 0?void 0:t.call(this,n))||{x:n.clientX,y:n.clientY};this.currentPos=s,this.delta={x:s.x-this.startPos.x,y:s.y-this.startPos.y},this.keys={shift:n.shiftKey,ctrl:n.ctrlKey,alt:n.altKey},this.rectDim=this.calc(this),this.updateRect(!1,n),(e=this.onMove)===null||e===void 0||e.call(this,n,{docs:a,config:o,el:r,resizer:this})},i.prototype.stop=function(n){var t,e,r=this.el,o=this.opts,a=this.docs||this.getDocumentEl();(0,Ce.AU)(a,"pointermove",this.move),(0,Ce.AU)(a,"keydown",this.handleKeyDown),(0,Ce.AU)(a,"pointerup",this.stop),(this.moved||!o.updateOnMove)&&this.updateRect(!0,n),n.pointerId&&((t=this.selectedHandler)===null||t===void 0||t.releasePointerCapture(n.pointerId)),this.toggleFrames(),(e=this.onEnd)===null||e===void 0||e.call(this,n,{docs:a,config:o,el:r,resizer:this}),this.moved=!1,delete this.docs},i.prototype.updateRect=function(n,t){var e=this.el,r=this,o=this.opts,a=this.rectDim,s=this.updateTarget,u=this.getSelectedHandler(),c=o.unitHeight,h=o.unitWidth,v=o.keyWidth,m=o.keyHeight;if((0,J.isFunction)(s))s(e,a,{store:n,selectedHandler:u,resizer:r,config:o,event:t});else{var y=e.style;y[v]=a.w+h,y[m]=a.h+c}this.updateContainer()},i.prototype.updateContainer=function(n){var t;n===void 0&&(n={});var e=this,r=e.opts,o=e.container,a=e.el,s=o.style;!r.avoidContainerUpdate&&a&&n.forceShow&&(s.display="block"),(t=this.onUpdateContainer)===null||t===void 0||t.call(this,{el:o,resizer:this,opts:wf(wf({},r),n)})},i.prototype.getSelectedHandler=function(){var n=this.handlers;if(this.selectedHandler){for(var t in n)if(n[t]===this.selectedHandler)return t}},i.prototype.handleKeyDown=function(n){n.keyCode===27&&(this.rectDim=this.startDim,this.stop(n))},i.prototype.handleMouseDown=function(n){var t=n.target;this.isHandler(t)?(this.selectedHandler=t,this.start(n)):t!==this.el&&(delete this.selectedHandler,this.blur())},i.prototype.calc=function(n){var t,e=this.opts||{},r=e.step,o=this.startDim,a=e.minDim,s=e.maxDim,u=n.delta.x,c=n.delta.y,h=this.parentDim.w,v=this.parentDim.h,m=e.unitWidth,y=e.unitHeight,_=e.skipUnitAdjustments,C=this.getParentRect(),E=m==="%"&&!_,D=y==="%"&&!_,F=E?o.w/100*h:o.w,V=D?o.h/100*v:o.h,K={t:o.t-C.top,l:o.l-C.left,w:F,h:V};if(n){var Z=n.handlerAttr;~Z.indexOf("r")&&(t=E?(0,Zt.normalizeFloat)((F+u*r)/h*100,.01):(0,Zt.normalizeFloat)(F+u*r,r),t=Math.max(a,t),s&&(t=Math.min(s,t)),K.w=t),~Z.indexOf("b")&&(t=D?(0,Zt.normalizeFloat)((V+c*r)/v*100,.01):(0,Zt.normalizeFloat)(V+c*r,r),t=Math.max(a,t),s&&(t=Math.min(s,t)),K.h=t),~Z.indexOf("l")&&(t=E?(0,Zt.normalizeFloat)((F-u*r)/h*100,.01):(0,Zt.normalizeFloat)(F-u*r,r),t=Math.max(a,t),s&&(t=Math.min(s,t)),K.w=t),~Z.indexOf("t")&&(t=D?(0,Zt.normalizeFloat)((V-c*r)/v*100,.01):(0,Zt.normalizeFloat)(V-c*r,r),t=Math.max(a,t),s&&(t=Math.min(s,t)),K.h=t);var ct=e.ratioDefault?!n.keys.shift:n.keys.shift;if(Z.indexOf("c")<0&&ct){var ht=o.w/o.h;K.w/K.h>ht?K.h=Math.round(K.w/ht):K.w=Math.round(K.h*ht)}~Z.indexOf("l")&&(K.l+=o.w-K.w),~Z.indexOf("t")&&(K.t+=o.h-K.h);for(var st in K){var et=st;K[et]=parseInt("".concat(K[et]),10)}return K}},i.prototype.getParentRect=function(){var n={left:0,top:0,width:0,height:0},t=this.el;if(!t)return n;var e=t.offsetParent;return e&&e.tagName!=="BODY"&&(n=this.getElementPos(e)),n},i}();const BG=IG;var Aa=function(){return Aa=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Aa.apply(this,arguments)};function UG(i,n,t){for(var e={index:0,placement:"before"},r=0,o=0,a=0,s=0,u=0,c=0,h=0,v,m=0,y=i.length;m<y;m++){v=i[m];var _=v.top,C=v.left,E=v.height,D=v.width;if(a=C+D,h=_+E,u=C+D/2,c=_+E/2,!(o&&C>o||s&&c>=s||r&&a<r))if(e.index=m,!v.dir)t<h&&(s=h),n<u?(o=u,e.placement="before"):(r=u,e.placement="after");else if(t<c){e.placement="before";break}else e.placement="after"}return e}function UA(i){var n=i.getBoundingClientRect();return{top:n.top+document.body.scrollTop,left:n.left+document.body.scrollLeft}}function W1(i,n){return Zt.matches.call(i,n)}function VG(i,n){var t=E_(i),e=E_(n),r=e.filter(function(u){return t.includes(u)}),o=r[0];if(!o)return i.model.index()-n.model.index();var a=e[e.indexOf(o)-1],s=t[t.indexOf(o)-1];return s.index()-a.index()}function E_(i){return i?[i].concat(E_(i.parent())):[]}function FG(i,n){if(i)for(var t=i.parentNode;t&&t.nodeType===1;){if(W1(t,n))return t;t=t.parentNode}}function HG(i,n){if((0,Ce.ir)(i))return!1;var t=i.style||{},e=(0,xi.default)(i),r=(0,xi.default)(n);if(t.overflow&&t.overflow!=="visible")return!1;var o=e.css("float");return o&&o!=="none"||r.css("display")==="flex"&&r.css("flex-direction")!=="column"||!zG(t.position)?!1:WG(i)||qG(e)}function zG(i){switch(i){case"static":case"relative":case"":return!0;default:return!1}}function WG(i){var n=["TR","TBODY","THEAD","TFOOT"];return n.includes(i.tagName)}function qG(i){var n=i.css("display"),t=["block","list-item","table","flex","grid"];return t.includes(n)}function KG(i){var n={containerContext:{container:"",placeholderElement:"",containerSel:"*",itemSel:"*",pfx:"",document},positionOptions:{borderOffset:10,relative:!1,windowMargin:0,offsetTop:0,offsetLeft:0,scale:1,canvasRelative:!1},dragBehavior:{dragDirection:Ff.A.Vertical,nested:!1,selectOnEnd:!0},eventHandlers:{}},t=Aa(Aa(Aa({},n),i),{containerContext:Aa(Aa({},n.containerContext),i.containerContext),positionOptions:Aa(Aa({},n.positionOptions),i.positionOptions),dragBehavior:Aa(Aa({},n.dragBehavior),i.dragBehavior),eventHandlers:Aa(Aa({},n.eventHandlers),i.eventHandlers)});return t}var jP=function(){function i(n){this.timeout=null,this.threshold=n}return i.prototype.updateArgs=function(n){this.lastArgs=n},i.prototype.execute=function(n){var t=this;this.timeout||(this.timeout=setTimeout(function(){t.lastArgs&&n(t.lastArgs),t.timeout=null},this.threshold))},i.prototype.clearTimeout=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),delete this.lastArgs},i}(),O_=function(){return O_=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},O_.apply(this,arguments)},$G=function(){function i(n){this.top=n.top,this.left=n.left,this.height=n.height,this.width=n.width,this.offsets=n.offsets,this.dir=n.dir}return i.prototype.calculateDimensionDifference=function(n){var t=n.top-this.top,e=n.left-this.left;return{topDifference:t,leftDifference:e}},i.prototype.adjustDimensions=function(n){return this.top+=n.topDifference,this.left+=n.leftDifference,this},i.prototype.determinePlacement=function(n,t){var e=this.left+this.width/2,r=this.top+this.height/2;return this.dir?t<r?"before":"after":n<e?"before":"after"},i.prototype.equals=function(n){return n?this.top===n.top&&this.left===n.left&&this.height===n.height&&this.width===n.width&&this.dir===n.dir&&JSON.stringify(this.offsets)===JSON.stringify(n.offsets):!1},i.prototype.clone=function(){return new i({top:this.top,left:this.left,height:this.height,width:this.width,offsets:O_({},this.offsets),dir:this.dir})},i.prototype.getDropArea=function(n){var t=this.clone(),e=this.adjustDropDimension(this.width,this.left,n),r=e.newSize,o=e.newPosition;t.width=r,t.left=o;var a=this.adjustDropDimension(this.height,this.top,n),s=a.newSize,u=a.newPosition;return t.height=s,t.top=u,t},i.prototype.adjustDropDimension=function(n,t,e){var r=e.ratio,o=e.minUndroppableDimension,a=e.maxUndroppableDimension,s=n*(1-r)/2;s=Math.max(s,o),s=Math.min(s,a);var u=n-s*2,c=t+s;return{newSize:u,newPosition:c}},i.prototype.isWithinBounds=function(n,t){return n>=this.left&&n<=this.left+this.width&&t>=this.top&&t<=this.top+this.height},i}();const GG=$G;var YG=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),XG=function(i){YG(n,i);function n(t){var e=i.call(this)||this;return e.sourceNodes=[],e.containerOffset={top:0,left:0},e.moveThreshold=20,e.treeClass=t.treeClass,e.em=t.em,e.containerContext=t.containerContext,e.positionOptions=t.positionOptions,e.dragDirection=t.dragDirection,e.eventHandlers=t.eventHandlers,(0,J.bindAll)(e,"endDrag","cancelDrag","recalculateTargetOnScroll","startSort","onDragStart","onMove"),e.restLastMoveData(),e.rateLimiter=new jP(e.moveThreshold),e}return n.prototype.startSort=function(t){this.sourceNodes=t,this.bindDragEventHandlers()},n.prototype.bindDragEventHandlers=function(){(0,Ce.on)(this.containerContext.container,"dragstart",this.onDragStart),(0,Ce.on)(this.containerContext.container,"mousemove dragover",this.onMove),(0,Ce.on)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},n.prototype.recalculateTargetOnScroll=function(){var t=this.lastMoveData.mouseEvent;t&&this.onMove(t)},n.prototype.onMove=function(t){this.rateLimiter.updateArgs(t),this.rateLimiter.execute(this.handleMove.bind(this))},n.prototype.handleMove=function(t){var e,r,o,a,s,u,c;this.adjustForScroll();var h=this.lastMoveData.targetNode;(r=(e=this.eventHandlers).onMouseMove)===null||r===void 0||r.call(e,t),this.cacheContainerPosition();var v=this.getMousePositionRelativeToContainer(t.clientX,t.clientY),m=v.mouseXRelative,y=v.mouseYRelative,_=this.getMouseTargetElement(t),C=this.getFirstElementWithAModel(_),E=C?(o=(0,xi.default)(C))===null||o===void 0?void 0:o.data("model"):void 0,D=E?this.getOrCreateHoveredNode(E):void 0,F=D?this.getIndexInParent(D,D.nodeDimensions,m,y):0,V=D?this.getValidParent(D,0,m,y):void 0,K=!(V!=null&&V.equals(h));if(K&&((s=(a=this.eventHandlers).onTargetChange)===null||s===void 0||s.call(a,h,V)),!V||!D){this.triggerLegacyOnMoveCallback(t,0),this.triggerMoveEvent(m,y),this.restLastMoveData();return}var Z=this.getDropPosition(V,m,y),ct=Z.index,ht=Z.placement,st=Z.placeholderDimensions,et=!st.equals(this.lastMoveData.placeholderDimensions)||ht!==this.lastMoveData.placement;et&&((c=(u=this.eventHandlers).onPlaceholderPositionChange)===null||c===void 0||c.call(u,st,ht)),this.lastMoveData={targetNode:V,hoveredNode:D,mouseEvent:t,index:ct,hoveredIndex:F,placement:ht,placeholderDimensions:st},this.triggerMoveEvent(m,y),this.triggerLegacyOnMoveCallback(t,ct)},n.prototype.adjustForScroll=function(){var t,e,r=this.lastMoveData.targetNode;if(r!=null&&r.element){var o=this.getDim(r==null?void 0:r.element),a=(t=r.nodeDimensions)===null||t===void 0?void 0:t.calculateDimensionDifference(o);a&&r.adjustDimensions(a)}var s=this.lastMoveData.hoveredNode;if(s!=null&&s.element){var o=this.getDim(s==null?void 0:s.element),a=(e=s.nodeDimensions)===null||e===void 0?void 0:e.calculateDimensionDifference(o);a&&s.adjustDimensions(a)}},n.prototype.restLastMoveData=function(){this.lastMoveData={targetNode:void 0,index:void 0,placement:void 0,mouseEvent:void 0}},n.prototype.triggerLegacyOnMoveCallback=function(t,e){var r,o,a,s,u=(r=this.sourceNodes[0])===null||r===void 0?void 0:r.model;(a=(o=this.eventHandlers).legacyOnMoveClb)===null||a===void 0||a.call(o,{event:t,target:u,parent:(s=this.lastMoveData.targetNode)===null||s===void 0?void 0:s.model,index:e})},n.prototype.triggerMoveEvent=function(t,e){var r,o=this.lastMoveData,a=o.targetNode,s=o.placement,u=o.index,c=u?u+(s==="after"?-1:0):0;this.em.trigger("sorter:drag",{target:(a==null?void 0:a.element)||null,targetModel:(r=this.lastMoveData.targetNode)===null||r===void 0?void 0:r.model,sourceModel:this.sourceNodes[0].model,dims:(a==null?void 0:a.childrenDimensions)||[],pos:{index:c,indexEl:c,placement:s},x:t,y:e})},n.prototype.getDropPosition=function(t,e,r){var o,a=t.nodeDimensions,s=t.childrenDimensions,u=t.getChildren(),c=u&&u.length>0;a=a||this.getDim(t.element),t.nodeDimensions=a,s=s||this.getChildrenDim(t),t.childrenDimensions=s;var h=a.clone(),v=0,m="inside";return c&&(o=UG(s,e,r),v=o.index,m=o.placement,h=s[v].clone(),v=v+(m=="after"?1:0)),{index:v,placement:m,placeholderDimensions:h}},n.prototype.getOrCreateHoveredNode=function(t){var e=this.lastMoveData.hoveredNode,r=new this.treeClass(t),o=r.equals(e),a=o?e:r;return a.nodeDimensions=o?e.nodeDimensions:this.getDim(r.element),a},n.prototype.getMouseTargetElement=function(t){var e=this.containerContext.customTarget,r=this.containerContext.document.elementFromPoint(t.clientX,t.clientY),o=e?e({event:t}):r;return o},n.prototype.onDragStart=function(t){this.eventHandlers.onDragStart&&this.eventHandlers.onDragStart(t)},n.prototype.endDrag=function(){this.dropDragged()},n.prototype.cancelDrag=function(){var t,e,r=this.lastMoveData.targetNode;(e=(t=this.eventHandlers).onTargetChange)===null||e===void 0||e.call(t,r,void 0),this.finalizeMove()},n.prototype.finalizeMove=function(){var t,e,r,o;this.cleanupEventListeners(),this.triggerOnDragEndEvent(),(e=(t=this.eventHandlers).onEnd)===null||e===void 0||e.call(t),(o=(r=this.eventHandlers).legacyOnEnd)===null||o===void 0||o.call(r),this.restLastMoveData(),this.rateLimiter.clearTimeout()},n.prototype.dropDragged=function(){var t,e,r=this.lastMoveData,o=r.targetNode,a=r.index;(e=(t=this.eventHandlers).onDrop)===null||e===void 0||e.call(t,o,this.sourceNodes,a),this.finalizeMove()},n.prototype.triggerOnDragEndEvent=function(){var t=this.lastMoveData.targetNode,e=this.sourceNodes[0];this.em.trigger("sorter:drag:end",{targetCollection:t?t.getChildren():null,modelToDrop:e==null?void 0:e.model,warns:[""],validResult:{result:!0,src:this.sourceNodes.map(function(r){return r.element}),srcModel:e==null?void 0:e.model,trg:t==null?void 0:t.element,trgModel:t==null?void 0:t.model,draggable:!0,droppable:!0},dst:t==null?void 0:t.element,srcEl:e==null?void 0:e.element})},n.prototype.getFirstElementWithAModel=function(t){for(var e=function(r){return(0,xi.default)(r).data("model")!==void 0};t&&this.containerContext.container.contains(t);){if(e(t))return t;t=t.parentElement}return null},n.prototype.getValidParent=function(t,e,r,o){var a,s;if(t){var u=this.lastMoveData,c=u.targetNode,h=u.hoveredNode,v=u.hoveredIndex,m=u.mouseEvent,y=t.equals(h);t.nodeDimensions=y?h.nodeDimensions:this.getDim(t.element);var _=this.getIndexInParent(t,t.nodeDimensions,r,o),C=_===v,E=t.isWithinDropBounds(r,o),D=y&&C&&E===t.isWithinDropBounds((a=m==null?void 0:m.clientX)!==null&&a!==void 0?a:0,(s=m==null?void 0:m.clientY)!==null&&s!==void 0?s:0);if(D&&c)return c;if(!E)return this.handleParentTraversal(t,r,o);var F=this.sourceNodes.some(function(V){return t.canMove(V,e)});return this.triggerDragValidation(F,t),F?t:this.handleParentTraversal(t,r,o)}},n.prototype.handleParentTraversal=function(t,e,r){var o=t.getParent();if(o){var a=this.getIndexInParent(t,t.nodeDimensions,e,r);if(a!==void 0)return this.getValidParent(o,a,e,r)}},n.prototype.getIndexInParent=function(t,e,r,o){var a=t.getParent();if(a){var s=a==null?void 0:a.indexOfChild(t);return e.dir=this.getDirection(t.element,a.element),s=s+(e.determinePlacement(r,o)=="after"?1:0),s}},n.prototype.triggerDragValidation=function(t,e){var r=this.sourceNodes[0];return this.em.trigger("sorter:drag:validation",{valid:t,src:r==null?void 0:r.element,srcModel:r==null?void 0:r.model,trg:e.element,trgModel:e.model}),r},n.prototype.cleanupEventListeners=function(){var t=this.containerContext.container;(0,Ce.AU)(t,"dragstart",this.onDragStart),(0,Ce.AU)(t,"mousemove dragover",this.onMove),(0,Ce.AU)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},n.prototype.getDirection=function(t,e){var r;return this.dragDirection===Ff.A.Vertical?r=!0:this.dragDirection===Ff.A.Horizontal?r=!1:r=HG(t,e),r},n.prototype.getChildrenDim=function(t){var e=this,r=[],o=t.element;if(!o)return[];var a=t.getChildren();return!a||a.length===0?[]:((0,J.each)(a,function(s,u){var c=s.element;if(c&&!(!(0,Ce.ir)(c)&&!W1(c,e.containerContext.itemSel))){var h=e.getDim(c);h.dir=e.getDirection(c,o),r.push(h)}}),r)},n.prototype.getMousePositionRelativeToContainer=function(t,e){var r=e-this.containerOffset.top+this.containerContext.container.scrollTop,o=t-this.containerOffset.left+this.containerContext.container.scrollLeft;if(this.positionOptions.canvasRelative){var a=this.em.Canvas.getMouseRelativeCanvas({clientX:t,clientY:e},{noScroll:1});o=a.x,r=a.y}return{mouseXRelative:o,mouseYRelative:r}},n.prototype.cacheContainerPosition=function(){var t=this.containerContext.container,e=UA(t),r=this.positionOptions.windowMargin?Math.abs(e.top):e.top,o=this.positionOptions.windowMargin?Math.abs(e.left):e.left;this.containerOffset={top:r,left:o}},n.prototype.getDim=function(t){var e=this.em,r=this.positionOptions.relative,o=this.positionOptions.windowMargin,a=e==null?void 0:e.Canvas,s=a?a.getElementOffsets(t):{},u,c,h,v;if(this.positionOptions.canvasRelative&&this.em){var m=a.getElementPos(t,{noScroll:1});u=m.top,c=m.left,h=m.height,v=m.width}else{var y=UA(t);u=r?t.offsetTop:y.top-(o?-1:1)*this.containerOffset.top,c=r?t.offsetLeft:y.left-(o?-1:1)*this.containerOffset.left,h=t.offsetHeight,v=t.offsetWidth}return new GG({top:u,left:c,height:h,width:v,offsets:s})},n}(ye.Ss),JG=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ZG=function(i){JG(n,i);function n(t){var e=i.call(this)||this;return e.pfx=t.pfx||"",e.allowNesting=t.allowNesting||!1,e.container=t.container,e.setElement(t.el),e.offset={top:t.offset.top||0,left:t.offset.left||0},e.moveLimiter=new jP(100),e}return n.prototype.show=function(){this.el.style.display="block"},n.prototype.hide=function(){this.moveLimiter.clearTimeout(),this.el.style.display="none"},n.prototype.move=function(t,e){var r=this,o={elementDimension:t,placement:e};this.moveLimiter.updateArgs(o),this.moveLimiter.execute(function(a){var s=a.elementDimension,u=a.placement;r._move(s,u)})},n.prototype._move=function(t,e){var r=0,o="px",a=0,s=0,u="",c="";this.setOrientationForDimension(t);var h=t.top,v=t.left,m=t.height,y=t.width,_=t.dir,C=t.offsets;if(e==="inside"){if(this.setOrientation("horizontal"),!this.allowNesting){this.hide();return}var E=5,D=(C==null?void 0:C.paddingTop)||E,F=(C==null?void 0:C.paddingLeft)||E,V=(C==null?void 0:C.borderTopWidth)||0,K=(C==null?void 0:C.borderLeftWidth)||0,Z=(C==null?void 0:C.borderRightWidth)||0,ct=K+Z;a=h+D+V,s=v+F+K,u=Math.max(y-F*2-ct,1)+"px",c="auto"}else _?(u=y+o,c="auto",a=e==="before"?h-r:h+m-r,s=v):(u="auto",c=m-r*2+o,a=h+r,s=e==="before"?v-r:v+y-r,this.setOrientation("vertical"));this.updateStyles(a,s,u,c),this.adjustOffset()},n.prototype.setOrientationForDimension=function(t){this.el.classList.remove("vertical"),this.el.classList.add("horizontal"),t&&!t.dir&&this.setOrientation("vertical")},n.prototype.setOrientation=function(t){this.el.classList.remove("horizontal"),this.el.classList.remove("vertical"),this.el.classList.add(t)},n.prototype.updateStyles=function(t,e,r,o){this.el.style.top=t+"px",this.el.style.left=e+"px",r&&(this.el.style.width=r),o&&(this.el.style.height=o)},n.prototype.adjustOffset=function(){this.$el.css("top","+="+this.offset.top+"px"),this.$el.css("left","+="+this.offset.left+"px")},n}(ye.Ss),wh=function(){return wh=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},wh.apply(this,arguments)},QG=function(){function i(n){var t=KG(n);(0,J.bindAll)(this,"startSort","cancelDrag","recalculateTargetOnScroll","rollback","updateOffset","handlePlaceholderMove","finalizeMove"),this.containerContext=t.containerContext,this.positionOptions=t.positionOptions,this.dragBehavior=t.dragBehavior,this.eventHandlers=wh(wh({},t.eventHandlers),{onPlaceholderPositionChange:this.handlePlaceholderMove,onEnd:this.finalizeMove}),this.em=n.em,this.treeClass=n.treeClass,this.updateOffset(),this.em.on(this.em.Canvas.events.refresh,this.updateOffset),this.placeholder=this.createPlaceholder(),this.dropLocationDeterminer=new XG({em:this.em,treeClass:this.treeClass,containerContext:this.containerContext,positionOptions:this.positionOptions,dragDirection:this.dragBehavior.dragDirection,eventHandlers:this.eventHandlers})}return i.prototype.startSort=function(n){var t,e,r,o,a,s,u,c=this.getSourceNodes(n),h=c.sourceNodes,v=c.sourcesWithModel;this.sourceNodes=h,this.dropLocationDeterminer.startSort(h),this.bindDragEventHandlers(),(e=(t=this.eventHandlers).onStartSort)===null||e===void 0||e.call(t,this.sourceNodes,this.containerContext.container);var m=(r=this.sourceNodes[0])===null||r===void 0?void 0:r.model;(a=(o=this.eventHandlers).legacyOnStartSort)===null||a===void 0||a.call(o,{sorter:this,target:m,parent:m&&((s=m.parent)===null||s===void 0?void 0:s.call(m)),index:m&&((u=m.index)===null||u===void 0?void 0:u.call(m))}),this.em.trigger("sorter:drag:start",n[0],v[0])},i.prototype.validTarget=function(n,t,e){if(!n)return!1;var r=(0,xi.default)(n).data("model");if(!r)return!1;var o=new this.treeClass(r),a=this.getSourceNodes(t).sourceNodes,s=a.some(function(u){return o.canMove(u,e)});return s},i.prototype.getSourceNodes=function(n){var t=this,e=n.filter(function(s){return!!s.dragSource||t.findValidSourceElement(s.element)}),r=e.map(function(s){var u,c;return{model:((u=s.dragSource)===null||u===void 0?void 0:u.model)||((c=(0,xi.default)(s.element))===null||c===void 0?void 0:c.data("model")),content:s.dragSource}}),o=r.sort(function(s,u){return VG(s.model,u.model)}),a=o.map(function(s){return new t.treeClass(s.model,s.content)});return{sourceNodes:a,sourcesWithModel:r}},i.prototype.recalculateTargetOnScroll=function(){this.dropLocationDeterminer.recalculateTargetOnScroll()},i.prototype.cancelDrag=function(){this.triggerNullOnEndMove(!0),this.dropLocationDeterminer.cancelDrag()},i.prototype.endDrag=function(){this.dropLocationDeterminer.endDrag()},i.prototype.handlePlaceholderMove=function(n,t){this.ensurePlaceholderElement(),this.updatePlaceholderPosition(n,t)},i.prototype.createPlaceholder=function(){return new ZG({container:this.containerContext.container,allowNesting:this.dragBehavior.nested,pfx:this.containerContext.pfx,el:this.containerContext.placeholderElement,offset:{top:this.positionOptions.offsetTop,left:this.positionOptions.offsetLeft}})},i.prototype.ensurePlaceholderElement=function(){var n=this.placeholder.el,t=this.containerContext.container;n.ownerDocument.contains(n)||t.append(this.placeholder.el)},i.prototype.updateOffset=function(){var n,t=((n=this.em)===null||n===void 0?void 0:n.get("canvasOffset"))||{};this.positionOptions.offsetTop=t.top,this.positionOptions.offsetLeft=t.left},i.prototype.findValidSourceElement=function(n){return n&&!W1(n,"".concat(this.containerContext.itemSel,", ").concat(this.containerContext.containerSel))&&(n=FG(n,this.containerContext.itemSel)),n},i.prototype.bindDragEventHandlers=function(){(0,Ce.on)(this.containerContext.document,"keydown",this.rollback)},i.prototype.updatePlaceholderPosition=function(n,t){this.placeholder.move(n,t)},i.prototype.cleanupEventListeners=function(){(0,Ce.AU)(this.containerContext.document,"keydown",this.rollback)},i.prototype.finalizeMove=function(){this.cleanupEventListeners(),this.placeholder.hide(),delete this.sourceNodes},i.prototype.rollback=function(n){(0,Ce.AU)(this.containerContext.document,"keydown",this.rollback);var t="Escape";n.key===t&&this.cancelDrag()},i.prototype.triggerNullOnEndMove=function(n){var t,e,r,o,a,s=(t=this.sourceNodes)===null||t===void 0?void 0:t[0].model,u={target:s,parent:s&&((e=s.parent)===null||e===void 0?void 0:e.call(s)),index:s&&((r=s.index)===null||r===void 0?void 0:r.call(s))};(a=(o=this.eventHandlers).legacyOnEndMove)===null||a===void 0||a.call(o,null,this,wh(wh({},u),{cancelled:n}))},i}();const IP=QG;var tY=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xh=function(){return xh=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},xh.apply(this,arguments)},eY=rs.F.Target,Zx={id:"sorter-target",type:eY},nY=function(i){tY(n,i);function n(t){var e=t.em,r=t.treeClass,o=t.containerContext,a=t.dragBehavior,s=t.positionOptions,u=s===void 0?{}:s,c=t.eventHandlers,h=c===void 0?{}:c,v=i.call(this,{em:e,treeClass:r,containerContext:o,positionOptions:u,dragBehavior:a,eventHandlers:xh(xh({},h),{onStartSort:function(m,y){var _;(_=h.onStartSort)===null||_===void 0||_.call(h,m,y),v.onStartSort()},onDrop:function(m,y,_){var C;(C=h.onDrop)===null||C===void 0||C.call(h,m,y,_),v.onDrop(m,y,_)},onTargetChange:function(m,y){var _;(_=h.onTargetChange)===null||_===void 0||_.call(h,m,y),v.onTargetChange(m,y)},onMouseMove:function(m){var y;(y=h.onMouseMove)===null||y===void 0||y.call(h,m),v.onMouseMove(m)}})})||this;return v.targetIsText=!1,v.onMouseMove=function(m){var y,_=v.targetIsText&&((y=v.sourceNodes)===null||y===void 0?void 0:y.some(function(C){return C.isTextable()}));_&&v.updateTextViewCursorPosition(m)},v.onDrop=function(m,y,_){var C=typeof _=="number"?_:-1;if(m&&y.length>0){var E=v.handleNodeAddition(m,y,C);E.length===0&&v.triggerNullOnEndMove(!1)}else v.triggerNullOnEndMove(!0);m==null||m.restNodeState(),v.placeholder.hide()},v.onTargetChange=function(m,y){var _;m==null||m.restNodeState();var C=v.em.Canvas;if(!y){v.placeholder.hide(),C.removeSpots(Zx);return}y==null||y.setSelectedParentState(),v.targetIsText=y.isTextNode();var E=v.targetIsText&&((_=v.sourceNodes)===null||_===void 0?void 0:_.some(function(K){return K.isTextable()}));E?(y.setContentEditable(!0),v.placeholder.hide()):v.placeholder.show();var D=rs.F.Select,F=rs.F.Hover,V=rs.F.Spacing;[D,F,V].forEach(function(K){return C.removeSpots({type:K})}),C.addSpot(xh(xh({},Zx),{component:y.model}))},(0,J.bindAll)(v,"handleScrollEvent"),v}return n.prototype.onStartSort=function(){this.em.clearSelection(),this.setAutoCanvasScroll(!0)},n.prototype.bindDragEventHandlers=function(){this.em.on("frame:scroll",this.handleScrollEvent),i.prototype.bindDragEventHandlers.call(this)},n.prototype.cleanupEventListeners=function(){this.em.off("frame:scroll",this.handleScrollEvent),i.prototype.cleanupEventListeners.call(this)},n.prototype.handleScrollEvent=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=(t=e==null?void 0:e[0])===null||t===void 0?void 0:t.frame,a=this.em.Canvas.getCanvasView().frame===o;a&&this.recalculateTargetOnScroll()},n.prototype.handleNodeAddition=function(t,e,r){var o=this;return e.reduce(function(a,s){if(!t.canMove(s,r))return a;if(o.isPositionChanged(t,s,r)){var u=o.moveNode(t,s,r),c=u.index,h=u.addedNode;a.push(h),r=c}return r++,a},[])},n.prototype.isPositionChanged=function(t,e,r){var o=e.getParent(),a=o?o.indexOfChild(e):-1;(o==null?void 0:o.model.cid)===t.model.cid&&a<r&&r--;var s=(o==null?void 0:o.model.cid)===t.model.cid,u=a===r,c=this.targetIsText&&e.isTextable();return!(s&&u&&!c)},n.prototype.moveNode=function(t,e,r){var o=e.getParent();if(o){var a=o.indexOfChild(e);o.removeChildAt(a,{temporary:!0}),o.model.cid===t.model.cid&&a<r&&r--}var s=t.addChildAt(e,r,{action:"move-component"});return s&&this.triggerEndMoveEvent(s),{addedNode:s,index:r}},n.prototype.triggerEndMoveEvent=function(t){var e,r,o,a,s,u;(r=(e=this.eventHandlers).legacyOnEndMove)===null||r===void 0||r.call(e,t.model,this,{target:t.model,parent:t.model&&((a=(o=t.model).parent)===null||a===void 0?void 0:a.call(o)),index:t.model&&((u=(s=t.model).index)===null||u===void 0?void 0:u.call(s))})},n.prototype.finalizeMove=function(){var t,e;(t=this.em)===null||t===void 0||t.Canvas.removeSpots(Zx),(e=this.sourceNodes)===null||e===void 0||e.forEach(function(r){return r.restNodeState()}),this.setAutoCanvasScroll(!1),i.prototype.finalizeMove.call(this)},n.prototype.updateTextViewCursorPosition=function(t){var e=this.em;if(e){var r=e.Canvas,o=r.getDocument(),a=null,s=(0,Ce.G2)(t);if(o.caretPositionFromPoint){var u=o.caretPositionFromPoint(s.clientX,s.clientY);u&&(a=o.createRange(),a.setStart(u.offsetNode,u.offset))}else o.caretRangeFromPoint?a=o.caretRangeFromPoint(s.clientX,s.clientY):t.rangeParent&&(a=o.createRange(),a.setStart(t.rangeParent,t.rangeOffset));var c=r.getWindow().getSelection();r.getFrameEl().focus(),c==null||c.removeAllRanges(),a&&(c==null||c.addRange(a))}},n.prototype.setAutoCanvasScroll=function(t){var e=this.em,r=e==null?void 0:e.Canvas;r&&(t?r.startAutoscroll():r.stopAutoscroll())},n}(IP);const VA=nY;var rY=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Q0=function(){return Q0=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Q0.apply(this,arguments)},iY=function(i){rY(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.defaults=function(){return{values:{}}},n.prototype.initialize=function(){var t=this.collection;this.prop=t==null?void 0:t.prop},n.prototype.getId=function(){return this.cid},n.prototype.getIndex=function(){var t=this.collection;return t?t.indexOf(this):-1},n.prototype.getValues=function(t){t===void 0&&(t={});var e=this.get("values");return t.camelCase?Object.keys(e).reduce(function(r,o){return r[(0,Zt.camelCase)(o)]=e[o],r},{}):e},n.prototype.getLabel=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.getLayerLabel(this)},n.prototype.isSelected=function(){var t;return((t=this.prop)===null||t===void 0?void 0:t.getSelectedLayer())===this},n.prototype.select=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.selectLayer(this)},n.prototype.remove=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.removeLayer(this)},n.prototype.move=function(t){var e;return(e=this.prop)===null||e===void 0?void 0:e.moveLayer(this,t)},n.prototype.getStylePreview=function(t){var e;return t===void 0&&(t={}),(e=this.prop)===null||e===void 0?void 0:e.getStylePreview(this,t)},n.prototype.hasPreview=function(){var t;return!!(!((t=this.prop)===null||t===void 0)&&t.get("preview"))},n.prototype.upValues=function(t){return t===void 0&&(t={}),this.set("values",Q0(Q0({},this.getValues()),t))},n}(ye.Kx);const Av=iY;var oY=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),BP=function(i){oY(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.initialize=function(t,e){e===void 0&&(e={}),this.prop=e.prop},n}(ye.pM);const yy=BP;BP.prototype.model=Av;var aY=On(3178),sY=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lY=function(i){sY(n,i);function n(t){return i.call(this,t)||this}return n.prototype.getChildren=function(){return this.model instanceof yy?this.model.models.map(function(t){return new n(t)}):null},n.prototype.getParent=function(){var t=this.model instanceof Av?this.model.collection:null;return t?new n(t):null},n.prototype.addChildAt=function(t,e){if(this.model instanceof Av)throw Error("Cannot add a layer model to another layer model");var r=this.model.add(t.model,{at:e});return new n(r)},n.prototype.removeChildAt=function(t){if(this.model instanceof Av)throw Error("Cannot remove a layer model from another layer model");var e=this.model.at(t);e&&this.model.remove(e)},n.prototype.indexOfChild=function(t){return!(t.model instanceof Av)||!(this.model instanceof yy)?-1:this.model.indexOf(t.model)},n.prototype.canMove=function(t,e){return this.model instanceof yy&&!!t.model},Object.defineProperty(n.prototype,"view",{get:function(){return this.model.view},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"element",{get:function(){var t;return(t=this.view)===null||t===void 0?void 0:t.el},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),n}(aY.$),uY=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),A_=function(){return A_=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},A_.apply(this,arguments)},cY=function(i){uY(n,i);function n(t){var e=t.em,r=t.containerContext,o=t.dragBehavior,a=t.positionOptions,s=a===void 0?{}:a,u=t.eventHandlers,c=u===void 0?{}:u,h=i.call(this,{em:e,treeClass:lY,containerContext:r,positionOptions:s,dragBehavior:o,eventHandlers:A_({onStartSort:function(v,m){var y;(y=c.onStartSort)===null||y===void 0||y.call(c,v,m),h.onLayerStartSort(v)},onDrop:function(v,m,y){var _;(_=c.onDrop)===null||_===void 0||_.call(c,v,m,y),h.onLayerDrop(v,m,y)},onEnd:function(){h.placeholder.hide()}},c)})||this;return h.onLayerStartSort=function(v){h.em.clearSelection();var m=v[0];h.em.trigger("sorter:drag:start",m==null?void 0:m.element,m==null?void 0:m.model),h.placeholder.show()},h.onLayerDrop=function(v,m,y){if(v){y=typeof y=="number"?y:-1;for(var _=0;_<m.length;_++){var C=m[_];if(v.canMove(C,_)){var E=C.getParent(),D=-1;E&&(D=E.indexOfChild(C),E.removeChildAt(D)),y=D<y?y-1:y,v.addChildAt(C,y)}}h.placeholder.hide()}},h}return n}(IP);const fY=cY;var dY=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),k_=function(){return k_=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},k_.apply(this,arguments)},hY=function(i){dY(n,i);function n(t){var e=i.call(this,t,"Utils")||this;return e.Sorter=VA,e.Resizer=BG,e.Dragger=$D.A,e.ComponentSorter=VA,e.StyleManagerSorter=fY,e.helpers=k_({},Zt),e}return n.prototype.destroy=function(){},n}(da);const pY=hY;var la,Da={},Mo={16:!1,18:!1,17:!1,91:!1},UP="all",zf={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,command:91},VP={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},q1=function(i){return VP[i]||i.toUpperCase().charCodeAt(0)},zh=[];for(la=1;la<20;la++)VP["f"+la]=111+la;function Xv(i,n){for(var t=i.length;t--;)if(i[t]===n)return t;return-1}function vY(i,n){if(i.length!=n.length)return!1;for(var t=0;t<i.length;t++)if(i[t]!==n[t])return!1;return!0}var gY={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function mY(i){for(la in Mo)Mo[la]=i[gY[la]]}function yY(i){var n,t,e,r,o,a;if(n=i.keyCode,Xv(zh,n)==-1&&zh.push(n),(n==93||n==224)&&(n=91),n in Mo){Mo[n]=!0;for(e in zf)zf[e]==n&&(Bo[e]=!0);return}if(mY(i),!!Bo.filter.call(this,i)&&n in Da){for(a=K1(),r=0;r<Da[n].length;r++)if(t=Da[n][r],t.scope==a||t.scope=="all"){o=t.mods.length>0;for(e in Mo)(!Mo[e]&&Xv(t.mods,+e)>-1||Mo[e]&&Xv(t.mods,+e)==-1)&&(o=!1);(t.mods.length==0&&!Mo[16]&&!Mo[18]&&!Mo[17]&&!Mo[91]||o)&&t.method(i,t)===!1&&(i.preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation&&i.stopPropagation(),i.cancelBubble&&(i.cancelBubble=!0))}}}function bY(i){var n=i.keyCode,t,e=Xv(zh,n);if(e>=0&&zh.splice(e,1),(n==93||n==224)&&(n=91),n in Mo){Mo[n]=!1;for(t in zf)zf[t]==n&&(Bo[t]=!1)}}function wY(){for(la in Mo)Mo[la]=!1;for(la in zf)Bo[la]=!1}function Bo(i,n,t){var e,r;e=FP(i),t===void 0&&(t=n,n="all");for(var o=0;o<e.length;o++)r=[],i=e[o].split("+"),i.length>1&&(r=HP(i),i=[i[i.length-1]]),i=i[0],i=q1(i),i in Da||(Da[i]=[]),Da[i].push({shortcut:e[o],scope:n,method:t,key:e[o],mods:r})}function xY(i,n){var t,e,r=[],o,a,s;for(t=FP(i),a=0;a<t.length;a++){if(e=t[a].split("+"),e.length>1&&(r=HP(e)),i=e[e.length-1],i=q1(i),n===void 0&&(n=K1()),!Da[i])return;for(o=0;o<Da[i].length;o++)s=Da[i][o],s.scope===n&&vY(s.mods,r)&&(Da[i][o]={})}}function SY(i){return typeof i=="string"&&(i=q1(i)),Xv(zh,i)!=-1}function _Y(){return zh.slice(0)}function CY(i){var n=(i.target||i.srcElement).tagName;return!(n=="INPUT"||n=="SELECT"||n=="TEXTAREA")}for(la in zf)Bo[la]=!1;function TY(i){UP=i||"all"}function K1(){return UP||"all"}function EY(i){var n,t,e;for(n in Da)for(t=Da[n],e=0;e<t.length;)t[e].scope===i?t.splice(e,1):e++}function FP(i){var n;return i=i.replace(/\s/g,""),n=i.split(","),n[n.length-1]==""&&(n[n.length-2]+=","),n}function HP(i){for(var n=i.slice(0,i.length-1),t=0;t<n.length;t++)n[t]=zf[n[t]];return n}function Qx(i,n,t){i.addEventListener?i.addEventListener(n,t,!1):i.attachEvent&&i.attachEvent("on"+n,function(){t(window.event)})}Bo.setScope=TY;Bo.getScope=K1;Bo.deleteScope=EY;Bo.filter=CY;Bo.isPressed=SY;Bo.getPressedKeyCodes=_Y;Bo.unbind=xY;Bo.handlers=Da;Bo.init=function(i){Qx(i.document,"keydown",function(n){yY(n)}),Qx(i.document,"keyup",bY),Qx(i,"focus",wY)};const kv=Bo;var OY=function(){return{defaults:{"core:undo":{keys:"+z, ctrl+z",handler:"core:undo",opts:{prevent:!0}},"core:redo":{keys:"+shift+z, ctrl+shift+z",handler:"core:redo",opts:{prevent:!0}},"core:copy":{keys:"+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}}};const AY=OY;var M_;(function(i){i.add="keymap:add",i.remove="keymap:remove",i.emit="keymap:emit",i.emitId="keymap:emit:"})(M_||(M_={}));var kY=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),FA=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))};(0,Zt.hasWin)()&&kv.init(window);var MY=function(i){kY(n,i);function n(t){var e=i.call(this,t,"Keymaps",AY())||this;return e.keymaster=kv,e.events=M_,e.keymaps={},e}return n.prototype.onLoad=function(){if(!this.em.isHeadless){var t=this.config.defaults;for(var e in t){var r=t[e];this.add(e,r.keys,r.handler,r.opts||{})}}},n.prototype.add=function(t,e,r,o){o===void 0&&(o={});var a=this,s=a.em,u=a.events,c=s.Commands,h=s.getEditor(),v=s.Canvas,m={id:t,keys:e,handler:r},y=this.keymaps[t];return y&&this.remove(t),this.keymaps[t]=m,kv(e,function(_,C){var E,D={event:_,h:C},F=(0,J.isString)(r)?c.get(r):r,V=!s.isEditing()&&!h.Canvas.isInputFocused();if(V||o.force){o.prevent&&((E=v.getCanvasView())===null||E===void 0||E.preventDefault(_)),(0,J.isFunction)(F)?F(h,0,D):c.runCommand(F,D);var K=[t,C.shortcut,_];s.trigger.apply(s,FA([u.emit],K,!1)),s.trigger.apply(s,FA(["".concat(u.emitId).concat(t)],K,!1))}},void 0),s.trigger(u.add,m),m},n.prototype.get=function(t){return this.keymaps[t]},n.prototype.getAll=function(){return this.keymaps},n.prototype.remove=function(t){var e=this,r=e.em,o=e.events,a=this.get(t);if(a)return delete this.keymaps[t],a.keys.split(", ").forEach(function(s){kv.unbind(s.trim())}),r==null||r.trigger(o.remove,a),a},n.prototype.removeAll=function(){var t=this;return Object.keys(this.keymaps).forEach(function(e){return t.remove(e)}),kv.handlers={},this},n.prototype.destroy=function(){this.removeAll(),this.keymaps={}},n}(da);const DY=MY;var PY=function(){return{stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}}};const NY=PY;var RY=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),LY=function(i){RY(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},n.prototype.open=function(){this.set("open",!0)},n.prototype.close=function(){this.set("open",!1)},n}(bc.A);const jY=LY;var D_;(function(i){i.open="modal:open",i.close="modal:close",i.all="modal"})(D_||(D_={}));var IY=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tb=function(){return tb=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},tb.apply(this,arguments)},BY=function(i){IY(n,i);function n(t){var e=i.call(this,t)||this,r=e.model;return e.listenTo(r,"change:open",e.updateOpen),e.listenTo(r,"change:title",e.updateTitle),e.listenTo(r,"change:content",e.updateContent),e}return n.prototype.template=function(t){var e=t.pfx,r=t.ppfx,o=t.content,a=t.title;return'<div class="'.concat(e,"dialog ").concat(r,"one-bg ").concat(r,`two-color">
      <div class="`).concat(e,`header">
        <div class="`).concat(e,'title">').concat(a,`</div>
        <div class="`).concat(e,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(e,`content">
        <div id="`).concat(e,'c">').concat(o,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(e,'collector" style="display: none"></div>')},n.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},n.prototype.onClick=function(t){var e=this.config.backdrop;e&&t.target===this.el&&this.hide()},n.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},n.prototype.getContent=function(){var t=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(t,"content #").concat(t,"c"))),this.$content},n.prototype.getTitle=function(t){return t===void 0&&(t={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),t.$?this.$title:this.$title.get(0)},n.prototype.updateContent=function(){var t=this.getContent(),e=t.children(),r=this.getCollector(),o=this.model.get("content");e.length&&r.append(e),t.empty().append(o)},n.prototype.updateTitle=function(){var t=this.getTitle({$:!0});t&&t.empty().append(this.model.get("title"))},n.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},n.prototype.hide=function(){this.model.close()},n.prototype.show=function(){this.model.open()},n.prototype.updateAttr=function(t){var e=this,r=e.pfx,o=e.$el,a=e.el,s=[].slice.call(a.attributes).map(function(u){return u.name});o.removeAttr(s.join(" ")),o.attr(tb(tb({},t||{}),{class:"".concat(r,"container ").concat(t&&t.class||"").trim()}))},n.prototype.render=function(){var t=this.$el,e=this.model.toJSON();return e.pfx=this.pfx,e.ppfx=this.ppfx,t.html(this.template(e)),this.updateAttr(),this.updateOpen(),this},n}(ls);const UY=BY;var VY=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),FY=function(i){VY(n,i);function n(t){var e=i.call(this,t,"Modal",NY())||this;e.events=D_;var r=e.events;return e.model=new jY(e),e.model.on("change:open",function(o,a){t.trigger(a?r.open:r.close)}),e.model.on("change",(0,J.debounce)(function(){var o=e._evData(),a=e.config.custom;(0,J.isFunction)(a)&&a(o),t.trigger(r.all,o)},0)),e}return n.prototype._evData=function(){var t=this,e=this.getTitle(),r=this.getContent(),o=this.model.attributes,a=o.open,s=o.attributes;return{open:a,attributes:s,title:(0,J.isString)(e)?(0,Ce.GZ)(e):e,content:(0,J.isString)(r)?(0,Ce.GZ)(r):r.get?r.get(0):r,close:function(){t.close()}}},n.prototype.postRender=function(t){var e=t.model.config.el||t.el,r=this.render();r&&(e==null||e.appendChild(r))},n.prototype.open=function(t){t===void 0&&(t={});var e=t.attributes||{};return t.title&&this.setTitle(t.title),t.content&&this.setContent(t.content),this.model.set("attributes",e),this.model.open(),this.modal&&this.modal.updateAttr(e),this},n.prototype.close=function(){return this.model.close(),this},n.prototype.onceClose=function(t){var e=this,r=e.em,o=e.events;return r.once(o.close,t),this},n.prototype.onceOpen=function(t){var e=this,r=e.em,o=e.events;return r.once(o.open,t),this},n.prototype.isOpen=function(){return!!this.model.get("open")},n.prototype.setTitle=function(t){return this.model.set("title",t),this},n.prototype.getTitle=function(){return this.model.get("title")},n.prototype.setContent=function(t){return this.model.set("content"," "),this.model.set("content",t),this},n.prototype.getContent=function(){return this.model.get("content")},n.prototype.getContentEl=function(){var t;return(t=this.modal)===null||t===void 0?void 0:t.getContent().get(0)},n.prototype.getModel=function(){return this.model},n.prototype.render=function(){var t;if(!this.config.custom){var e=UY.extend(this.config.extend),r=this.modal&&this.modal.el;return this.modal=new e({el:r,model:this.model,config:this.config}),(t=this.modal)===null||t===void 0?void 0:t.render().el}},n.prototype.destroy=function(){var t;(t=this.modal)===null||t===void 0||t.remove()},n}(da);const HY=FY;var HA="sw-visibility",zA="export-template",WA="open-sm",qA="open-tm",KA="open-layers",$A="open-blocks",tS="fullscreen",eS="preview",zY=function(){return{stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:HA,className:"fa fa-square-o",command:"core:component-outline",context:HA,attributes:{title:"View components"}},{id:eS,className:"fa fa-eye",command:eS,context:eS,attributes:{title:"Preview"}},{id:tS,className:"fa fa-arrows-alt",command:tS,context:tS,attributes:{title:"Fullscreen"}},{id:zA,className:"fa fa-code",command:zA,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:WA,className:"fa fa-paint-brush",command:WA,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:qA,className:"fa fa-cog",command:qA,togglable:!1,attributes:{title:"Settings"}},{id:KA,className:"fa fa-bars",command:KA,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:$A,className:"fa fa-th-large",command:$A,togglable:!1,attributes:{title:"Open Blocks"}}]}]}};const WY=zY;var qY=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),KY=function(i){qY(n,i);function n(t,e){var r=i.call(this,t,e)||this;return r.get("buttons").length&&r.set("buttons",new qP(r.module,r.get("buttons"))),r}return n.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(n.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return this.get("active")},set:function(t){this.set("active",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),n}(bc.A);const zP=KY;var $Y=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),WP=function(i){$Y(n,i);function n(t,e){return i.call(this,t,e,zP)||this}return n.prototype.deactivateAllExceptOne=function(t,e){this.forEach(function(r,o){r!==t&&(r.set("active",!1),e&&r.get("buttons").length&&r.get("buttons").deactivateAllExceptOne(t,e))})},n.prototype.deactivateAll=function(t,e){var r=t||"";this.forEach(function(o){o.get("context")==r&&o!==e&&o.set("active",!1,{fromCollection:!0})})},n.prototype.disableAllButtons=function(t){var e=t||"";this.forEach(function(r,o){r.get("context")==e&&r.set("disable",!0)})},n.prototype.disableAllButtonsExceptOne=function(t,e){this.forEach(function(r,o){r!==t&&(r.set("disable",!0),e&&r.get("buttons").length&&r.get("buttons").disableAllButtonsExceptOne(t,e))})},n}(Bb);const qP=WP;WP.prototype.model=zP;var GY=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),YY=function(i){GY(n,i);function n(t,e){var r=i.call(this,t,e)||this,o=r.get("buttons")||[];return r.buttons=new qP(t,o),r}return n.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(n.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(t){this.set("buttons",t)},enumerable:!1,configurable:!0}),n}(bc.A);const KP=YY;var XY=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$P=function(i){XY(n,i);function n(t,e){return i.call(this,t,e,KP)||this}return n}(Bb);const JY=$P;$P.prototype.model=KP;var ZY=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Sh=function(){return Sh=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Sh.apply(this,arguments)},QY=function(i){ZY(n,i);function n(t){var e=i.call(this,t)||this,r=e,o=r.model,a=r.em,s=r.pfx,u=r.ppfx,c=o.className,h=o.attributes,v=h.command,m=h.listen;if(e.id=s+o.get("id"),e.activeCls="".concat(s,"active ").concat(u,"four-color"),e.disableCls="".concat(u,"disabled"),e.btnsVisCls="".concat(s,"visible"),e.className=s+"btn"+(c?" "+c:""),e.listenTo(o,"change",e.render),e.listenTo(o,"change:active updateActive",e.updateActive),e.listenTo(o,"checkActive",e.checkActive),e.listenTo(o,"change:bntsVis",e.updateBtnsVis),e.listenTo(o,"change:attributes",e.updateAttributes),e.listenTo(o,"change:className",e.updateClassName),e.listenTo(o,"change:disable",e.updateDisable),a&&(0,J.isString)(v)&&m){var y={fromListen:!0};e.listenTo(a,"run:".concat(v),function(){return o.set("active",!0,y)}),e.listenTo(a,"stop:".concat(v),function(){return o.set("active",!1,y)})}return a&&a.get&&(e.commands=a.get("Commands")),e}return n.prototype.tagName=function(){return this.model.get("tagName")},n.prototype.events=function(){return{click:"clicked"}},n.prototype.updateClassName=function(){var t=this,e=t.model,r=t.pfx,o=e.className,a=e.get("attributes").class,s="".concat(a||""," ").concat(r,"btn ").concat(o||"");this.$el.attr("class",s.trim())},n.prototype.updateAttributes=function(){var t=this,e=t.em,r=t.model,o=t.$el,a=r.get("attributes")||{},s=e&&e.t&&e.t("panels.buttons.titles.".concat(r.id));o.attr(a),s&&o.attr({title:s}),this.updateClassName()},n.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},n.prototype.updateActive=function(t,e,r){var o;r===void 0&&(r={});var a=this,s=a.model,u=a.commands,c=a.$el,h=a.activeCls,v=r.fromCollection,m=r.fromListen,y=s.get("context"),_=s.get("options"),C=s.command,E={};C&&(u&&(0,J.isString)(C)?E=u.get(C)||{}:(0,J.isFunction)(C)?E=u.create({run:C}):C!==null&&(0,J.isObject)(C)&&(E=u.create(C)),s.active?(!v&&((o=s.collection)===null||o===void 0||o.deactivateAll(y,s)),s.set("active",!0,{silent:!0}).trigger("checkActive"),!m&&u.runCommand(E,Sh(Sh({},_),{sender:s})),E.noStop&&s.set("active",!1)):(c.removeClass(h),!m&&u.stopCommand(E,Sh(Sh({},_),{sender:s,force:1}))))},n.prototype.updateDisable=function(){var t=this,e=t.disableCls,r=t.model,o=r.disable;this.$el[o?"addClass":"removeClass"](e)},n.prototype.checkActive=function(){var t=this,e=t.model,r=t.$el,o=t.activeCls;e.active?r.addClass(o):r.removeClass(o)},n.prototype.clicked=function(){var t=this.model;t.get("bntsVis")||t.disable||!t.command||this.toggleActive()},n.prototype.toggleActive=function(){var t=this,e=t.model,r=t.em,o=e.active,a=e.togglable;o&&!a||(e.active=!o,o?e.runDefaultCommand&&r.runDefault():e.stopDefaultCommand&&r.stopDefault())},n.prototype.render=function(){var t=this.model,e=t.get("label"),r=this.$el;return!t.get("el")&&r.empty(),this.updateAttributes(),e&&r.append(e),this.checkActive(),this.updateDisable(),this},n}(ls);const tX=QY;var eX=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nX=function(i){eX(n,i);function n(t){var e=i.call(this,{collection:t})||this;return e.listenTo(e.collection,"add",e.addTo),e.listenTo(e.collection,"reset remove",e.render),e.className=e.pfx+"buttons",e}return n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){var r=e||null,o=t.get("el"),a=new tX({el:o,model:t}),s=a.render().el;return r?r.appendChild(s):this.$el.append(s),s},n.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(r){return t.addToCollection(r,e)}),this.$el.append(e),this.$el.attr("class",(0,J.result)(this,"className")),this},n}(ls);const rX=nX;var iX=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),P_=function(){return P_=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},P_.apply(this,arguments)},oX=function(i){iX(n,i);function n(t){var e=i.call(this,{model:t,el:t.get("el")})||this;return e.className=e.pfx+"panel",e.id=e.pfx+t.get("id"),e.listenTo(t,"change:appendContent",e.appendContent),e.listenTo(t,"change:content",e.updateContent),e.listenTo(t,"change:visible",e.toggleVisible),t.view=e,e}return n.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},n.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},n.prototype.toggleVisible=function(){if(!this.model.get("visible")){this.$el.addClass("".concat(this.ppfx,"hidden"));return}this.$el.removeClass("".concat(this.ppfx,"hidden"))},n.prototype.attributes=function(){return this.model.get("attributes")},n.prototype.initResize=function(){var t=this.em,e=t==null?void 0:t.Editor,r=this.model.get("resizable");if(e&&r){var o=r===!0?[!0,!0,!0,!0]:r,a=o.length,s=void 0,u=void 0,c=void 0,h=!1;if(a==2){var v=o;s=v[0],c=v[0],u=v[1],h=v[1]}else if(a==4){var v=o;s=v[0],u=v[1],c=v[2],h=v[3]}var m=new e.Utils.Resizer(P_({tc:s,cr:u,bc:c,cl:h,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:e.getConfig().stylePrefix,onEnd:function(){t.Canvas.refresh({all:!0})},posFetcher:function(y,_){var C=_.target,E=y.style,D=m.getConfig(),F=D.keyWidth,V=D.keyHeight,K=y.getBoundingClientRect(),Z=C=="container",ct=E[F],ht=E[V],st=ct&&!Z?parseFloat(ct):K.width,et=ht&&!Z?parseFloat(ht):K.height;return{left:0,top:0,width:st,height:et}}},r&&typeof r!="boolean"?r:{}));m.blur=function(){},m.focus(this.el)}},n.prototype.render=function(){var t=this.model.buttons,e=this.$el,r=this.ppfx,o="".concat(this.className," ").concat(this.id," ").concat(r,"one-bg ").concat(r,"two-color");if(e.addClass(o),this.toggleVisible(),t.length){var a=new rX(t);e.append(a.render().el)}return e.append(this.model.get("content")),this},n}(ls);const aX=oX;var sX=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lX=function(i){sX(n,i);function n(t){var e=i.call(this,{collection:t})||this;return e.listenTo(t,"add",e.addTo),e.listenTo(t,"reset",e.render),e.listenTo(t,"remove",e.onRemove),e.className=e.pfx+"panels",e}return n.prototype.onRemove=function(t){var e=t.view;e&&e.remove()},n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){var r=e||null,o=t.get("el"),a=new aX(t),s=a.render().el,u=t.get("appendTo");if(!o)if(u){var c=document.querySelector(u);c==null||c.appendChild(s)}else r?r.appendChild(s):this.$el.append(s);return a.initResize(),s},n.prototype.render=function(){var t=this,e=this.$el,r=document.createDocumentFragment();return e.empty(),this.collection.each(function(o){return t.addToCollection(o,r)}),e.append(r),e.attr("class",this.className),this},n}(ls);const uX=lX;var cX=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fX=function(i){cX(n,i);function n(t){var e=i.call(this,t,"Panels",WY())||this;return e.panels=new JY(e,e.config.defaults),e}return n.prototype.getPanels=function(){return this.panels},n.prototype.getPanelsEl=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0?void 0:t.el},n.prototype.addPanel=function(t){return this.panels.add(t)},n.prototype.removePanel=function(t){return this.panels.remove(t)},n.prototype.getPanel=function(t){var e=this.panels.where({id:t});return e.length?e[0]:null},n.prototype.addButton=function(t,e){var r=this.getPanel(t);return r?r.buttons.add(e):null},n.prototype.removeButton=function(t,e){var r=this.getPanel(t);return r&&r.buttons.remove(e)},n.prototype.getButton=function(t,e){var r=this.getPanel(t);if(r){var o=r.buttons.where({id:e});return o.length?o[0]:null}return null},n.prototype.render=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0||t.remove(),this.PanelsViewObj=new uX(this.panels),this.PanelsViewObj.render().el},n.prototype.active=function(){this.getPanels().each(function(t){t.buttons.each(function(e){e.get("active")&&e.trigger("updateActive")})})},n.prototype.disableButtons=function(){this.getPanels().each(function(t){t.buttons.each(function(e){e.get("disable")&&e.trigger("change:disable")})})},n.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},n}(da);const dX=fX;var hX=function(){return{stylePrefix:"cm-",optsCodeViewer:{}}};const pX=hX;var vX=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gX=function(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(i);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]]);return t},mX=function(i){vX(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.build=function(t,e){e===void 0&&(e={});var r=e.em,o=gX(e,["em"]),a=o;if(e.cleanId&&r){var s=r.Css.getAll(),u=s.toJSON().map(function(h){var v=h.selectors,m=v&&v.length===1&&v.models[0];return m&&m.isId()&&m.get("name")}).filter(Boolean),c=a.attributes;a.attributes=function(h,v){v=typeof c=="function"?c(h,v):v;var m=v.id;return m&&m[0]==="i"&&!h.get("script")&&!h.get("script-export")&&!h.get("attributes").id&&u.indexOf(m)<0&&delete v.id,v}}return t.toHTML(a)},n}(ye.Kx);const yX=mX;var bX=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wX=function(i){bX(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.build=function(t){var e=this,r=t.toJSON();return this.beforeEach(r),(0,J.each)(r,function(o,a){var s=r[a];if(s instanceof ye.Kx)r[a]=e.build(s);else if(s instanceof ye.pM){var u=s;r[a]=[],u.length&&u.forEach(function(c,h){r[a][h]=e.build(c)})}}),r},n.prototype.beforeEach=function(t){delete t.status},n}(ye.Kx);const xX=wX;var SX=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();function _X(i){var n,t=((n=i.toString().match(/\{([\s\S]*)\}/m))===null||n===void 0?void 0:n[1])||"";return t.replace(/^\s*\/\/.*$/gm,"").trim().length===0}var CX=function(i){SX(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.mapModel=function(t){var e,r=this,o="",a=t.get("script-export")||t.get("script"),s=t.get("type"),u=t.get("components"),c=t.getId();if(a){var h=t.get("attributes");h=(0,J.extend)({},h,{id:c}),t.set("attributes",h,{silent:!0});var v=t.getScriptString(a),m=t.get("script-props");if(t.get("scriptUpdated")&&!m)this.mapJs[s+"-"+c]={ids:[c],code:v};else{var y=void 0,_=this.mapJs[s];if(m&&(y=t.__getScriptProps()),_)_.ids.push(c),y&&(_.props[c]=y);else{var C={ids:[c],code:v};y&&(C.props=(e={},e[c]=y,e)),this.mapJs[s]=C}}}return u.forEach(function(E){o+=r.mapModel(E)}),o},n.prototype.build=function(t){this.mapJs={},this.mapModel(t);var e="";for(var r in this.mapJs){var o=this.mapJs[r];if(o.code)if(o.props){if(_X(o.code))continue;e+=`
          var props = `.concat(JSON.stringify(o.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(o.code,`.bind(el))(props[el.id]);
          }`)}else{var a="#"+o.ids.join(", #");e+=`
          var items = document.querySelectorAll('`.concat(a,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(o.code,`
}.bind(items[i]))();
          }`)}}return e},n}(ye.Kx);const TX=CX;var EX=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),N_=function(){return N_=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},N_.apply(this,arguments)},Jv;(0,Zt.hasWin)()&&(Jv=On(4408),On(8253),On(7389),On(3640));var GP=function(i){EX(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0,autoFormat:!0}},n.prototype.init=function(t){return(0,J.bindAll)(this,"onChange"),this.editor=Jv.fromTextArea(t,N_({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=t,this.editor.on("change",this.onChange),this},n.prototype.onChange=function(){this.trigger("update",this)},n.prototype.getEditor=function(){return this.editor},n.prototype.getElement=function(){return this.element},n.prototype.setElement=function(t){return this.element=t,this},n.prototype.refresh=function(){return this.getEditor().refresh(),this},n.prototype.focus=function(){return this.getEditor().focus(),this},n.prototype.getContent=function(){var t=this.getEditor();return t&&t.getValue()},n.prototype.setContent=function(t,e){var r=this;e===void 0&&(e={});var o=this.editor;if(o){o.setValue(t);var a=this.get("autoFormat"),s=o.autoFormatRange&&(a===!0||Array.isArray(a)&&a.includes(this.get("codeName")));s&&(Jv.commands.selectAll(o),o.autoFormatRange(o.getCursor(!0),o.getCursor(!1)),Jv.commands.goDocStart(o)),!e.noRefresh&&setTimeout(function(){return r.refresh()})}},n}(ye.Kx);const OX=GP;GP.prototype.CodeMirror=Jv;var AX=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kX=function(i,n){return Object.defineProperty?Object.defineProperty(i,"raw",{value:n}):i.raw=n,i},MX=function(i){AX(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.template=function(t){var e=t.pfx,r=t.codeName,o=t.label;return sa(GA||(GA=kX([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),e,e,r,e,o,e)},n.prototype.initialize=function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix},n.prototype.render=function(){var t,e,r=this,o=r.model,a=r.pfx,s=r.$el,u=o.toJSON(),c=o.get("input")||((e=(t=o).getElement)===null||e===void 0?void 0:e.call(t));return u.pfx=a,s.html(this.template(u)),s.attr("class","".concat(a,"editor-c")),s.find("#".concat(a,"code")).append(c),this},n}(ye.Ss);const DX=MX;var GA,PX=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),eb=function(){return eb=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},eb.apply(this,arguments)},NX="CodeMirror",RX=function(i){PX(n,i);function n(t){var e=i.call(this,t,"CodeManager",pX())||this;e.EditorView=DX;var r=e.config,o=r.pStylePrefix;return o&&(r.stylePrefix=o+r.stylePrefix),e.generators={},e.viewers={},e.defGenerators={html:new yX,css:new Oq,json:new xX,js:new TX},e.defViewers={CodeMirror:new OX},e.loadDefaultGenerators().loadDefaultViewers(),e}return n.prototype.addGenerator=function(t,e){return this.generators[t]=e,this},n.prototype.getGenerator=function(t){return this.generators[t]},n.prototype.getGenerators=function(){return this.generators},n.prototype.addViewer=function(t,e){return this.viewers[t]=e,this},n.prototype.getViewer=function(t){return this.viewers[t]},n.prototype.getViewers=function(){return this.viewers},n.prototype.createViewer=function(t){t===void 0&&(t={});var e=(0,J.isUndefined)(t.type)?NX:t.type,r=this.getViewer(e)&&this.getViewer(e).clone(),o=document.createElement("div"),a=document.createElement("textarea");return o.appendChild(a),r.set(eb(eb({},this.config.optsCodeViewer),t)),r.init(a),r.setElement(o),r},n.prototype.updateViewer=function(t,e){t.setContent(e)},n.prototype.getCode=function(t,e,r){r===void 0&&(r={}),r.em=this.em;var o=this.getGenerator(e);return o?o.build(t,r):""},n.prototype.loadDefaultGenerators=function(){for(var t in this.defGenerators)this.addGenerator(t,this.defGenerators[t]);return this},n.prototype.loadDefaultViewers=function(){for(var t in this.defViewers)this.addViewer(t,this.defViewers[t]);return this},n.prototype.destroy=function(){},n}(da);const LX=RX;var jX=On(4729),IX=On.n(jX),BX=function(){return{maximumStackLength:500,trackSelection:!0}};const UX=BX;var Do;(function(i){i.update="update",i.updateBefore="updateBefore",i.undo="undo",i.redo="redo",i.load="load",i.projectLoad="project:load",i.projectLoaded="project:loaded",i.projectGet="project:get",i.log="log",i.telemetryInit="telemetry:init",i.destroy="destroy",i.destroyed="destroyed"})(Do||(Do={}));var VX=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yl=function(){return Yl=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Yl.apply(this,arguments)},FX=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},ey=function(i){return i.avoidStore||i.noUndo||i.partial},YA=function(i){return Object.keys(i.changedAttributes())},ny=new WeakMap,HX=function(i){VX(n,i);function n(t){var e=i.call(this,t,"UndoManager",UX())||this;e.config._disable&&(e.config.maximumStackLength=0);var r=!0;return e.um=new(IX())(Yl({track:!0,register:[]},e.config)),e.um.changeUndoType("change",{condition:function(o){var a=o.get("_undo");if(a){var s=o.get("_undoexc");if((0,J.isArray)(s)&&YA(o).some(function(u){return s.indexOf(u)>=0}))return!1;if((0,J.isBoolean)(a)||(0,J.isArray)(a)&&YA(o).some(function(u){return a.indexOf(u)>=0}))return!0}return!1},on:function(o,a,s){var u=ny.get(o);u||(u=o.previousAttributes(),ny.set(o,u));var c=s||a||{};if(c.noUndo&&setTimeout(function(){ny.delete(o)}),!ey(c)){var h=o.toJSON({fromUndo:r}),v={object:o,before:u,after:h};return ny.delete(o),(0,J.isEmpty)(h)?void 0:v}}}),e.um.changeUndoType("add",{on:function(o,a,s){if(s===void 0&&(s={}),!(ey(s)||!e.isRegistered(a)))return{object:a,before:void 0,after:o,options:Yl(Yl({},s),{fromUndo:r})}}}),e.um.changeUndoType("remove",{on:function(o,a,s){if(s===void 0&&(s={}),!(ey(s)||!e.isRegistered(a)))return{object:a,before:o,after:void 0,options:Yl(Yl({},s),{fromUndo:r})}}}),e.um.changeUndoType("reset",{undo:function(o,a){o.reset(a,{fromUndo:r})},redo:function(o,a,s){o.reset(s,{fromUndo:r})},on:function(o,a){if(a===void 0&&(a={}),!(ey(a)||!e.isRegistered(o)))return{object:o,before:a.previousModels,after:FX([],o.models,!0),options:Yl(Yl({},a),{fromUndo:r})}}}),e.um.on("undo redo",function(){t.getSelectedAll().map(function(o){return o.trigger("rerender:layer")})}),[Do.undo,Do.redo].forEach(function(o){return e.um.on(o,function(){return t.trigger(o)})}),e}return n.prototype.postLoad=function(){var t=this,e=t.config,r=t.em;e.trackSelection&&r&&this.add(r.get("selected"))},n.prototype.add=function(t){return this.um.register(t),this},n.prototype.remove=function(t){return this.um.unregister(t),this},n.prototype.removeAll=function(){return this.um.unregisterAll(),this},n.prototype.start=function(){return this.um.startTracking(),this},n.prototype.stop=function(){return this.um.stopTracking(),this},n.prototype.undo=function(t){t===void 0&&(t=!0);var e=this,r=e.em,o=e.um;return!r.isEditing()&&o.undo(t),this},n.prototype.undoAll=function(){return this.um.undoAll(),this},n.prototype.redo=function(t){t===void 0&&(t=!0);var e=this,r=e.em,o=e.um;return!r.isEditing()&&o.redo(t),this},n.prototype.redoAll=function(){return this.um.redoAll(),this},n.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},n.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},n.prototype.isRegistered=function(t){return!!this.getInstance().objectRegistry.isRegistered(t)},n.prototype.getStack=function(){return this.um.stack},n.prototype.getStackGroup=function(){var t=[],e=[];return this.getStack().forEach(function(r){var o=r.get("magicFusionIndex");e.indexOf(o)<0&&(e.push(o),t.push(r))}),t},n.prototype.skip=function(t){var e=!!this.um.isTracking();e&&this.stop(),t(),e&&this.start()},n.prototype.getGroupedStack=function(){var t={},e=this.getStack(),r=function(o,a){var s=o.attributes,u=s.type,c=s.after,h=s.before,v=s.object,m=s.options,y=m===void 0?{}:m;return{index:a,type:u,after:c,before:h,object:v,options:y}};return e.forEach(function(o,a){var s=o.get("magicFusionIndex"),u=r(o,a);t[s]?t[s].push(u):t[s]=[u]}),Object.keys(t).map(function(o){var a=t[o];return{index:a[a.length-1].index,actions:a,labels:(0,J.unique)(a.reduce(function(s,u){var c,h=(c=u.options)===null||c===void 0?void 0:c.action;return h&&s.push(h),s},[]))}})},n.prototype.goToGroup=function(t){var e=this;if(t){var r=this.getPointer(),o=t.index-r;(0,J.times)(Math.abs(o),function(){e[o<0?"undo":"redo"](!1)})}},n.prototype.getPointer=function(){return this.getStack().pointer},n.prototype.clear=function(){return this.um.clear(),this},n.prototype.getInstance=function(){return this.um},n.prototype.destroy=function(){this.clear().removeAll()},n}(da);const zX=HX;var WX=function(){return{stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"],custom:!1}};const qX=WX;var _h=function(){return _h=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},_h.apply(this,arguments)},nb;(function(i){i[i.ACTIVE=1]="ACTIVE",i[i.INACTIVE=0]="INACTIVE",i[i.DISABLED=-1]="DISABLED"})(nb||(nb={}));var nS="_rte",kf={ACTIVE:1,INACTIVE:0,DISABLED:-1},ry=function(i,n){n===void 0&&(n="A");var t=i.selection()||{},e=t.anchorNode,r=t.focusNode,o=e==null?void 0:e.parentNode,a=r==null?void 0:r.parentNode;return(o==null?void 0:o.nodeName)==n||(a==null?void 0:a.nodeName)==n},rb="data-selectme",xv={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(i){return i.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(i){return i.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(i){return i.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(i){return i.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(i){return i&&i.selection()&&ry(i)?kf.ACTIVE:kf.INACTIVE},result:function(i){ry(i)?i.exec("unlink"):i.insertHTML('<a href="" '.concat(rb,">").concat(i.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(i){return i!=null&&i.selection()&&ry(i,"SPAN")?kf.DISABLED:kf.INACTIVE},result:function(i){!ry(i,"SPAN")&&i.insertHTML("<span ".concat(rb,">").concat(i.selection(),"</span>"),{select:!0})}}},KX=function(){function i(n,t,e){e===void 0&&(e={});var r=this;if(this.em=n,this.settings=e,t[nS])return t[nS];t[nS]=this,this.setEl(t),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var o=(e.actions||[]).map(function(h){var v=h;return(0,J.isString)(h)?v=_h({},xv[h]):xv[h.name]&&(v=_h(_h({},xv[h.name]),h)),v}),a=o.length?o:Object.keys(xv).map(function(h){return xv[h]});e.classes=_h({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},e.classes);var s=e.classes,u=e.actionbar;if(this.actionbar=u,this.classes=s,this.actions=a,!u){if(!this.isCustom(e.module)){var c=e.actionbarContainer;u=document.createElement("div"),u.className=s.actionbar,c==null||c.appendChild(u),this.actionbar=u}a.forEach(function(h){return r.addAction(h)})}return e.styleWithCSS&&this.exec("styleWithCSS"),this}return i.prototype.isCustom=function(n){var t=n||this.em.RichTextEditor;return!!(t!=null&&t.config.custom||t!=null&&t.customRte)},i.prototype.destroy=function(){},i.prototype.setEl=function(n){this.el=n,this.doc=n.ownerDocument},i.prototype.updateActiveActions=function(){var n=this,t=this.getActions();t.forEach(function(e){var r=e.update,o=e.btn,a=n.classes,s=a.active,u=a.inactive,c=a.disabled,h=e.state,v=e.name,m=n.doc,y=nb.INACTIVE;if(o&&(o.className=o.className.replace(s,"").trim(),o.className=o.className.replace(u,"").trim(),o.className=o.className.replace(c,"").trim()),h){var _=h(n,m);if(y=_,o)switch(_){case kf.ACTIVE:o.className+=" ".concat(s);break;case kf.INACTIVE:o.className+=" ".concat(u);break;case kf.DISABLED:o.className+=" ".concat(c);break}}else m.queryCommandSupported(v)&&m.queryCommandState(v)&&(o&&(o.className+=" ".concat(s)),y=nb.ACTIVE);e.currentState=y,r==null||r(n,e)}),t.length&&this.em.RichTextEditor.__dbdTrgCustom()},i.prototype.enable=function(n){return this.enabled?this:this.__toggleEffects(!0,n)},i.prototype.disable=function(){return this.__toggleEffects(!1)},i.prototype.__toggleEffects=function(n,t){n===void 0&&(n=!1),t===void 0&&(t={});var e=n?Ce.on:Ce.AU,r=this,o=r.el,a=r.doc,s=this.actionbarEl();if(s&&(s.style.display=n?"":"none"),o.contentEditable="".concat(!!n),e(o,"mouseup keyup",this.updateActiveActions),e(a,"keydown",this.__onKeydown),e(a,"paste",this.__onPaste),this.enabled=n,n){var u=t.event;if(this.syncActions(),this.updateActiveActions(),u){var c=null;if(a.caretRangeFromPoint){var h=(0,Ce.G2)(u);c=a.caretRangeFromPoint(h.clientX,h.clientY)}else u.rangeParent&&(c=a.createRange(),c.setStart(u.rangeParent,u.rangeOffset));var v=a.getSelection();v==null||v.removeAllRanges(),c&&(v==null||v.addRange(c))}o.focus()}return this},i.prototype.__onKeydown=function(n){var t=this.em,e=t.RichTextEditor.getConfig().onKeydown;if(e)return e({ev:n,rte:this,editor:t.getEditor()});var r=this.doc,o=["insertOrderedList","insertUnorderedList"];n.key==="Enter"&&!o.some(function(a){return r.queryCommandState(a)})&&(r.execCommand("insertLineBreak"),n.preventDefault())},i.prototype.__onPaste=function(n){var t=this.em,e=t.RichTextEditor.getConfig().onPaste;if(e)return e({ev:n,rte:this,editor:t.getEditor()});var r=n.clipboardData,o=r.getData("text"),a=r.getData("text/html");if(o&&!a){n.preventDefault();var s=o.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,s)}},i.prototype.syncActions=function(){var n=this;this.getActions().forEach(function(t){if(n.actionbar&&(!t.state||t.state&&t.state(n,n.doc)>=0)){var e=t.event||"click",r=t.btn;r&&(r["on".concat(e)]=function(){t.result(n,t),n.updateActiveActions()})}})},i.prototype.addAction=function(n,t){t===void 0&&(t={});var e=t.sync,r=this.actionbarEl();if(r){var o=n.icon,a=n.attributes,s=a===void 0?{}:a,u=document.createElement("span");u.className=this.classes.button,n.btn=u;for(var c in s)u.setAttribute(c,s[c]);typeof o=="string"?u.innerHTML=o:u.appendChild(o),r.appendChild(u)}e&&(this.actions.push(n),this.syncActions())},i.prototype.getActions=function(){return this.actions},i.prototype.selection=function(){return this.doc.getSelection()},i.prototype.exec=function(n,t){this.doc.execCommand(n,!1,t)},i.prototype.actionbarEl=function(){return this.actionbar},i.prototype.insertHTML=function(n,t){var e=t===void 0?{}:t,r=e.select,o=this,a=o.em,s=o.doc,u=o.el,c=s.getSelection();if(c&&c.rangeCount){var h=(0,Zt.getComponentModel)(u)||a.getSelected(),v=s.createElement("div"),m=c.getRangeAt(0);m.deleteContents(),(0,J.isString)(n)?v.innerHTML=n:n&&v.appendChild(n),Array.prototype.slice.call(v.childNodes).forEach(function(y){m.insertNode(y)}),c.removeAllRanges(),c.addRange(m),u.focus(),r&&h&&(h.once("rte:disable",function(){var y=h.find("[".concat(rb,"]"))[0];y&&(a.setSelected(y),y.removeAttributes(rb))}),h.trigger("disable"))}},i}();const $X=KX;var R_;(function(i){i.enable="rte:enable",i.disable="rte:disable",i.custom="rte:custom"})(R_||(R_={}));var GX=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ib=function(){return ib=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},ib.apply(this,arguments)},rS=function(i,n,t,e){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(h){try{c(e.next(h))}catch(v){a(v)}}function u(h){try{c(e.throw(h))}catch(v){a(v)}}function c(h){h.done?o(h.value):r(h.value).then(s,u)}c((e=e.apply(i,n||[])).next())})},iS=function(i,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(h){return u([c,h])}}function u(c){if(e)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(e=1,r&&(o=c[0]&2?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=n.call(i,t)}catch(h){c=[6,h],r=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},YX=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},oS="".concat(zv.refresh," frame:scroll ").concat(In.I.update),XX=function(i){GX(n,i);function n(t){var e=i.call(this,t,"RichTextEditor",qX())||this;e.events=R_;var r=e.config,o=r.pStylePrefix;o&&(r.stylePrefix=o+r.stylePrefix),e.pfx=r.stylePrefix,e.actions=r.actions||[];var a=new ye.Kx;return e.model=a,a.on("change:currentView",e.__trgCustom,e),e.__dbdTrgCustom=(0,J.debounce)(function(){return e.__trgCustom()},0),e}return n.prototype.onLoad=function(){if((0,Zt.hasWin)()){var t=this.config,e=t.pStylePrefix,r=t.custom,o=(0,Ce.a_)("div",{class:(0,Ce.cx)("".concat(e,"rte-toolbar"),!r&&"".concat(e,"one-bg ").concat(e,"rte-toolbar-ui"))});this.toolbar=o,this.initRte((0,Ce.a_)("div")),(0,Ce.on)(o,"mousedown",function(a){return a.stopPropagation()})}},n.prototype.__trgCustom=function(){var t=this,e=t.model,r=t.em,o=t.events;r.trigger(o.custom,{enabled:!!e.get("currentView"),container:this.getToolbarEl(),actions:this.getAll()})},n.prototype.destroy=function(){var t,e,r;(t=this.globalRte)===null||t===void 0||t.destroy(),(r=(e=this.customRte)===null||e===void 0?void 0:e.destroy)===null||r===void 0||r.call(e),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,Ce.YZ)(this.toolbar)},n.prototype.postRender=function(t){var e=t.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),e.getToolsEl().appendChild(this.toolbar)},n.prototype.initRte=function(t){var e=this.globalRte,r=this,o=r.em,a=r.pfx,s=r.actionbar,u=r.config,c=this.actions||YX([],u.actions,!0),h={actionbar:"".concat(a,"actionbar"),button:"".concat(a,"action"),active:"".concat(a,"active"),inactive:"".concat(a,"inactive"),disabled:"".concat(a,"disabled")};return e?(e.em=o,e.setEl(t)):(e=new $X(o,t,{classes:h,actions:c,actionbar:s,actionbarContainer:this.toolbar,module:this}),this.globalRte=e),e.actionbar&&(this.actionbar=e.actionbar),e.actions&&(this.actions=e.actions),e},n.prototype.add=function(t,e){var r;e===void 0&&(e={}),e.name=t,(r=this.globalRte)===null||r===void 0||r.addAction(e,{sync:!0})},n.prototype.get=function(t){var e,r;return(e=this.globalRte)===null||e===void 0||e.getActions().forEach(function(o){o.name==t&&(r=o)}),r},n.prototype.getAll=function(){var t;return((t=this.globalRte)===null||t===void 0?void 0:t.getActions())||[]},n.prototype.remove=function(t){var e,r=this.getAll(),o=this.get(t);if(o){var a=o.btn,s=r.indexOf(o);(e=a==null?void 0:a.parentNode)===null||e===void 0||e.removeChild(a),r.splice(s,1)}return o},n.prototype.run=function(t){var e=this.globalRte,r=(0,J.isString)(t)?this.get(t):t;e&&r&&(r.result(e,r),e.updateActiveActions())},n.prototype.getToolbarEl=function(){return this.toolbar},n.prototype.updatePosition=function(){var t=this,e=t.em,r=t.toolbar,o="px",a=e.Canvas,s=r.style,u=a.getTargetToElementFixed(this.lastEl,r,{event:"rteToolbarPosUpdate",left:0});["top","left","bottom","right"].forEach(function(c){var h=u[c];(0,Zt.isDef)(h)&&(s[c]=(0,J.isString)(h)?h:(h||0)+o)})},n.prototype.enable=function(t,e,r){return rS(this,void 0,void 0,function(){var o,a,s,u,c,h;return iS(this,function(v){switch(v.label){case 0:return this.lastEl=t.el,o=this,a=o.customRte,s=o.em,u=o.events,c=t.getChildrenContainer(),this.toolbar.style.display="",[4,a?a.enable(c,e,r):this.initRte(c).enable(r)];case 1:return h=v.sent(),s&&(setTimeout(this.updatePosition.bind(this),0),s.off(oS,this.updatePosition,this),s.on(oS,this.updatePosition,this),s.trigger(u.enable,t,h)),this.model.set({currentView:t}),[2,h]}})})},n.prototype.getContent=function(t,e){return rS(this,void 0,void 0,function(){var r,o;return iS(this,function(a){switch(a.label){case 0:return r=this.customRte,o=t.getChildrenContainer(),r&&e&&(0,J.isFunction)(r.getContent)?[4,r.getContent(o,e,{view:t})]:[3,2];case 1:return[2,a.sent()];case 2:return[2,o.innerHTML]}})})},n.prototype.hideToolbar=function(){var t=this.toolbar.style,e="-1000px";t.top=e,t.left=e,t.display="none"},n.prototype.disable=function(t,e){return rS(this,arguments,void 0,function(r,o,a){var s,u,c,h,v,m;return a===void 0&&(a={}),iS(this,function(y){switch(y.label){case 0:return s={},u=this,c=u.em,h=u.events,v=this.customRte,v?[4,v.disable(r.getChildrenContainer(),o,ib(ib({},a),{view:r}))]:[3,2];case 1:return m=y.sent(),m&&(s=m),[3,3];case 2:o&&o.disable(),y.label=3;case 3:return this.hideToolbar(),c&&(c.off(oS,this.updatePosition,this),!a.fromMove&&c.trigger(h.disable,r,o)),this.model.unset("currentView"),[2,s]}})})},n}(da);const JX=XX;var ZX=function(){return{sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]}};const QX=ZX;var tJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ao=function(){return Ao=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Ao.apply(this,arguments)},eJ=function(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(i);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]]);return t},XA=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},$1=function(i){tJ(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.getDefaults=function(){return(0,J.result)(this.prototype,"defaults")},n.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.em=e.em;var r=this.getId()||"",o=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(o||r).replace(/ /g,"-"));var a=this.get("property");!this.get("id")&&this.set("id",a),!o&&this.set("name",(0,Zt.capitalize)(a).replace(/-/g," ")),this.on("change",this.__upTargets),n.callInit(this,t,e)},n.prototype.__getParentProp=function(){var t,e;return(e=(t=this.collection)===null||t===void 0?void 0:t.opts)===null||e===void 0?void 0:e.parentProp},n.prototype.__upTargets=function(t,e){var r,o=this;e===void 0&&(e={});var a=this.em,s=a.Styles,u=this.getName(),c=e.__clear,h=c?"":this.__getFullValue(e),v=this.__getParentProp(),m=this.changedAttributes(),y=(0,J.keys)(m).reduce(function(V,K){return V[K]=o.previous(K),V},{}),_=XA(XA([],(0,J.keys)(this.__getClearProps()),!0),["__p"],!1),C=(0,J.keys)(m),E=!e.__up&&!v&&(c||_.some(function(V){return C.indexOf(V)>=0})),D=this.get("onChange"),F={property:this,from:y,to:m,value:h,opts:e};s.__trgEv(s.events.propertyUpdate,F),D&&D(F),E&&this.__upTargetsStyle((r={},r[u]=h,r),e)},n.prototype.__upTargetsStyle=function(t,e){var r,o=(r=this.em)===null||r===void 0?void 0:r.get("StyleManager");o==null||o.addStyleTargets(Ao(Ao({},t),{__p:!!e.avoidStore}),e)},n.prototype._up=function(t,e){e===void 0&&(e={}),e.noTarget&&(e.__up=!0);var r=e.partial,o=eJ(e,["partial"]);return t.__p=!!(o.avoidStore||r),this.set(t,Ao(Ao({},o),{avoidStore:t.__p}))},n.prototype.up=function(t,e){e===void 0&&(e={}),this.set(t,Ao(Ao({},e),{__up:!0}))},n.prototype.init=function(){},n.prototype.getId=function(){return this.get("id")},n.prototype.getType=function(){return this.get("type")},n.prototype.getName=function(){return this.get("property")},n.prototype.getLabel=function(t){var e;t===void 0&&(t={});var r=t.locale,o=r===void 0?!0:r,a=this.getId(),s=this.get("name")||this.get("label");return o&&((e=this.em)===null||e===void 0?void 0:e.t("styleManager.properties.".concat(a)))||s},n.prototype.getValue=function(t){t===void 0&&(t={});var e=t.noDefault,r=this.get("value");return!this.hasValue()&&!e?this.getDefaultValue():r},n.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent,r=e&&this.getParentTarget(),o=this.get("value");return!(0,J.isUndefined)(o)&&o!==""&&!r},n.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},n.prototype.getStyle=function(t){var e;t===void 0&&(t={});var r=this.getName(),o=t.camelCase?(0,Zt.camelCase)(r):r;return e={},e[o]=this.__getFullValue(t),e},n.prototype.getDefaultValue=function(){var t=this.get("default");return"".concat((0,J.isUndefined)(t)?this.get("defaults"):t)},n.prototype.upValue=function(t,e){e===void 0&&(e={});var r=t===null||t===""?this.__getClearProps():this.__parseValue(t,e);return this._up(r,e)},n.prototype.isVisible=function(){return!!this.get("visible")},n.prototype.clear=function(t){return t===void 0&&(t={}),this._up(this.__getClearProps(),Ao(Ao({},t),{__clear:!0})),this},n.prototype.canClear=function(){var t=this.getParent();return t?t.__canClearProp(this):this.hasValue({noParent:!0})},n.prototype.getParent=function(){return this.__getParentProp()},n.prototype.isFull=function(){return!!this.get("full")},n.prototype.__parseValue=function(t,e){return this.parseValue(t,e)},n.prototype.__getClearProps=function(){return{value:"",important:!1}},n.prototype.setValue=function(t,e,r){e===void 0&&(e=!0),r===void 0&&(r={});var o=this.parseValue(t),a=!e;!a&&this.set({value:void 0},{avoidStore:a,silent:!0}),this.set(o,Ao({avoidStore:a},r))},n.prototype.setValueFromInput=function(t,e,r){r===void 0&&(r={}),this.setValue(t,e,Ao(Ao({},r),{fromInput:1}))},n.prototype.parseValue=function(t,e){e===void 0&&(e={});var r={value:t},o="!important",a=this.get("functionName")||"";if((0,J.isString)(t)&&t.indexOf(o)!==-1&&(r.value=t.replace(o,"").trim(),r.important=!0),!a&&!e.complete)return r;var s=[],u="".concat(r.value).trim(),c=u.indexOf("(")+1,h=a||u.substring(0,c-1);if(h&&(r.functionName=h),!a||u.indexOf("".concat(a,"("))===0){var v=u.lastIndexOf(")");s.push(c),v>=0&&s.push(v),r.value=String.prototype.substring.apply(u,s)}if(e.numeric){var m=parseFloat(r.value);r.unit=r.value.replace(m,""),r.value=m}return r},n.prototype.__getFullValue=function(t){var e=t===void 0?{}:t,r=e.withDefault;return!this.hasValue()&&r?this.getDefaultValue():this.getFullValue()},n.prototype.getFullValue=function(t,e){e===void 0&&(e={});var r=this.get("functionName"),o=this.getDefaultValue(),a=(0,J.isUndefined)(t)?this.get("value"):t,s=this.hasValue();if(a&&o&&a===o)return o;if(r&&s){var u=r==="url"?"'".concat(a.replace(/'|"/g,""),"'"):a;a="".concat(r,"(").concat(u,")")}return s&&this.get("important")&&!e.skipImportant&&(a="".concat(a," !important")),a||""},n.prototype.__setParentTarget=function(t){this.up({parentTarget:t})},n.prototype.getParentTarget=function(){return this.get("parentTarget")||null},n.prototype.__parseFn=function(t){t===void 0&&(t="");var e=t.indexOf("(")+1,r=t.lastIndexOf(")");return{name:t.substring(0,e-1).trim(),value:String.prototype.substring.apply(t,[e,r>=0?r:void 0]).trim()}},n.prototype.__checkVisibility=function(t){var e=t.target,r=t.component,o=t.sector,a=t.sectors,s=r||e;if(!s)return!1;var u=this.getId(),c=this.getName(),h=this.attributes,v=h.requires,m=h.requiresParent,y=h.toRequire,_=h.isVisible,C=s.get("unstylable"),E=s.get("stylable-require"),D=s.get("stylable");if((0,J.isFunction)(_))return!!_({property:this,sector:o,target:e,component:r});if((0,J.isArray)(D)&&(D=D.indexOf(c)>=0),(0,J.isArray)(C)&&(D=C.indexOf(c)<0),y&&(D=!e||E&&(E.indexOf(u)>=0||E.indexOf(c)>=0)),a&&v){var F=(0,J.keys)(v);a.forEach(function(ct){ct.getProperties().forEach(function(ht){if((0,J.includes)(F,ht.id)){var st=v[ht.id];D=D&&(0,J.includes)(st,ht.get("value"))}})})}if(m){var V=r&&r.parent(),K=V&&V.getEl();if(K){var Z=(0,Zt.hasWin)()?window.getComputedStyle(K):{};(0,J.each)(m,function(ct,ht){D=D&&Z[ht]&&(0,J.includes)(ct,Z[ht])})}else D=!1}return!!D},n}(ye.Kx);const yr=$1;$1.callParentInit=function(i,n,t,e){e===void 0&&(e={}),i.prototype.initialize.apply(n,[t,Ao(Ao({},e),{skipInit:1})])};$1.callInit=function(i,n,t){t===void 0&&(t={}),!t.skipInit&&i.init(n,t)};var nJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ch=function(){return Ch=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Ch.apply(this,arguments)},JA=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},YP=function(i){return i==="integer"||i==="number"},rJ=function(i){nJ(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.defaults=function(){return Ch(Ch({},yr.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),yr.callParentInit(yr,this,t,e);var r=this.em,o=new Y1(this.get("properties")||[],{em:r,parentProp:this});this.set("properties",o,{silent:!0}),this.listenTo(o,"change",this.__upProperties),yr.callInit(this,t,e)},Object.defineProperty(n.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),n.prototype.getProperties=function(){return JA([],this.get("properties").models,!0)},n.prototype.getProperty=function(t){return this.properties.filter(function(e){return e.getId()===t||e.getName()===t})[0]},n.prototype.getPropertyAt=function(t){return this.get("properties").at(t)},n.prototype.isDetached=function(){return!!this.get("detached")},n.prototype.getValues=function(t){var e=t===void 0?{}:t,r=e.byName;return this.getProperties().reduce(function(o,a){var s=r?a.getName():a.getId();return o[s]="".concat(a.__getFullValue()),o},{})},n.prototype.getSeparator=function(){return this.getSplitSeparator()},n.prototype.getJoin=function(){return this.__getJoin()},n.prototype.getStyleFromProps=function(t){var e;t===void 0&&(t={});var r=this.getName(),o=this.__getJoin(),a=this.get("toStyle"),s=this.getValues(),u={};if(a)u=a(s,{join:o,name:r,property:this});else if(s=this.getValues({byName:!0}),this.isDetached())u=s;else{var c=this.getProperties().map(function(h){return h.__getFullValue({withDefault:1})}).filter(Boolean).join(o);u=(e={},e[r]=c,e)}return this.isDetached()?u[r]="":(u[r]=u[r]||"",u=Ch(Ch({},u),this.getProperties().reduce(function(h,v){return h[v.getName()]="",h},{}))),t.camelCase?Object.keys(u).reduce(function(h,v){return h[(0,Zt.camelCase)(v)]=u[v],h},{}):u},n.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},n.prototype.__upProperties=function(t,e){if(e===void 0&&(e={}),!(e.__up||e.__clearIn)){var r=this.__getParentProp();if(r)return r.__upProperties(this,e);this.__upTargetsStyleProps(e,t)}},n.prototype.__upTargetsStyleProps=function(t,e){var r;t===void 0&&(t={});var o=this.getStyleFromProps();if(this.isDetached()&&e){var a=e.getName();o=(r={},r[a]=o[a],r)}this.__upTargetsStyle(o,t)},n.prototype._up=function(t,e){return e===void 0&&(e={}),this.__setProperties(this.__getSplitValue(t.value),e),yr.prototype._up.call(this,t,e),this},n.prototype.getStyle=function(t){return this.getStyleFromProps(t)},n.prototype.__getFullValue=function(t){if(t===void 0&&(t={}),this.isDetached()||t.__clear)return"";var e=this.getStyleFromProps()[this.getName()]||"";return o_(e)},n.prototype.__getJoin=function(){var t=this.get("join");return(0,J.isString)(t)?t:this.get("separator")},n.prototype.__styleHasProps=function(t){t===void 0&&(t={});var e=this.getName(),r=this.getProperties(),o=r.map(function(s){return s.getName()}),a=JA([e],o,!0);return a.some(function(s){return!(0,J.isUndefined)(t[s])&&t[s]!==""})},n.prototype.__splitValue=function(t,e){return o_(t).split(e).map(function(r){return r.trim()}).filter(Boolean)},n.prototype.__splitStyleName=function(t,e,r){var o=t[e];return this.__splitValue(o||"",r)},n.prototype.__getSplitValue=function(t,e){t===void 0&&(t="");var r=e===void 0?{}:e,o=r.byName,a=this.getProperties(),s=a.length===4&&a.every(function(h){return YP(h.getType())}),u=this.__splitValue(t,this.getSplitSeparator()),c={};return a.forEach(function(h,v){var m=u[v],y=(0,J.isUndefined)(m)?"":m;if(s){var _=u.length;y=u[v]||u[v%_+(_!=1&&_%2?1:0)]||y}var C=o?h.getName():h.getId();c[C]=y||""}),c},n.prototype.__getPropsFromStyle=function(t,e){if(t===void 0&&(t={}),e===void 0&&(e={}),!this.__styleHasProps(t))return null;var r=e.byName,o=this.getName(),a=this.getProperties(),s=this.getSplitSeparator(),u=this.get("fromStyle"),c=u?u(t,{property:this,name:o,separator:s}):{};if(!u){var h=t[o];c=this.__getSplitValue(h||"",{byName:r}),a.forEach(function(v){var m=t[v.getName()],y=r?v.getName():v.getId();!(0,J.isUndefined)(m)&&m!==""&&(c[y]=m)})}return c},n.prototype.__setProperties=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.getProperties().forEach(function(o){var a=t[o.getId()];o.__getFullValue()!==a&&o.upValue(a,e)});var r=(0,J.keys)(t).map(function(o){return t[o]}).join(" ");this.set("value",r,{silent:!0})},n.prototype.clear=function(){var t=this;return this.getProperties().map(function(e){return e.clear({__clearIn:!t.isDetached()})}),yr.prototype.clear.call(this),this},n.prototype.hasValue=function(t){return this.getProperties().some(function(e){return e.hasValue(t)})},n.prototype.getFullValue=function(){return this.__getFullValue()},n.prototype.__canClearProp=function(t){return this.isDetached()&&t.hasValue({noParent:!0})},n}(yr);const uh=rJ;var iJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ra=function(){return ra=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},ra.apply(this,arguments)},oJ=function(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(i);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]]);return t},aJ=/,(?![^\(]*\))/,sJ=/\s(?![^(]*\))/,lJ=function(i){iJ(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.defaults=function(){return ra(ra({},uh.getDefaults()),{layers:[],emptyValue:"unset",layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),uh.callParentInit(uh,this,t,e);var r=this.get("layers"),o=new yy(r,{prop:this});o.property=this,o.properties=this.get("properties"),this.set("layers",o,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(o,"add remove",this.__upLayers),uh.callInit(this,t,e)},Object.defineProperty(n.prototype,"layers",{get:function(){return this.get("layers")},enumerable:!1,configurable:!0}),n.prototype.getLayers=function(){return this.layers.models},n.prototype.hasLayers=function(){return this.getLayers().length>0},n.prototype.getLayer=function(t){return t===void 0&&(t=0),this.layers.at(t)||void 0},n.prototype.getSelectedLayer=function(){var t=this.get("selectedLayer");return t&&t.getIndex()>=0?t:void 0},n.prototype.selectLayer=function(t){return this.set("selectedLayer",t,{__select:!0})},n.prototype.selectLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e&&this.selectLayer(e)},n.prototype.moveLayer=function(t,e){e===void 0&&(e=0);var r=this.layers,o=t?t.getIndex():-1;o>=0&&(0,J.isNumber)(e)&&e>=0&&e<r.length&&o!==e&&(this.removeLayer(t),r.add(t,{at:e}))},n.prototype.addLayer=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r={};this.getProperties().forEach(function(a){var s=a.getId(),u=t[s];r[s]=(0,J.isUndefined)(u)?a.getDefaultValue():u});var o=this.layers.push({values:r},e);return o},n.prototype.removeLayer=function(t){return this.layers.remove(t)},n.prototype.removeLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e?this.removeLayer(e):null},n.prototype.getLayerLabel=function(t){var e="";if(t){var r=this.get("layerLabel"),o=t.getValues(),a=t.getIndex();if(r)e=r(t,{index:a,values:o,property:this});else{var s=[];this.getProperties().map(function(u){s.push(o[u.getId()])}),e=s.filter(Boolean).join(" ")}}return e},n.prototype.getStyleFromLayer=function(t,e){var r;e===void 0&&(e={});var o=this.__getJoin(),a=this.__getJoinLayers(),s=this.get("toStyle"),u=this.getName(),c=t.getValues(),h;if(s)h=s(c,{join:o,joinLayers:a,name:u,layer:t,property:this});else{var v=this.getProperties().map(function(m){var y=m.getName(),_=c[m.getId()],C=(0,J.isUndefined)(_)?m.getDefaultValue():_;if(e.number&&YP(m.getType())){var E=m.parseValue(_,e.number);C="".concat(E.value).concat(E.unit)}return{name:y,value:C}});h=this.isDetached()?v.reduce(function(m,y){return m[y.name]=y.value,m},{}):(r={},r[this.getName()]=v.map(function(m){return m.value}).join(o),r)}return e.camelCase?Object.keys(h).reduce(function(m,y){return m[(0,Zt.camelCase)(y)]=h[y],m},{}):h},n.prototype.getStylePreview=function(t,e){e===void 0&&(e={});var r={},o=this.get("preview");return o&&(r=this.getStyleFromLayer(t,e)),r},n.prototype.getLayerSeparator=function(){var t=this.get("layerSeparator");return(0,J.isString)(t)?new RegExp("".concat(t,"(?![^\\(]*\\))")):t},n.prototype.hasEmptyValue=function(){return!this.hasLayers()&&!!this.attributes.isEmptyValue},n.prototype.__upProperties=function(t,e){var r;e===void 0&&(e={});var o=this.getSelectedLayer();o&&(o.upValues((r={},r[t.getId()]=t.__getFullValue(),r)),!e.__up&&this.__upTargetsStyleProps(e))},n.prototype.__upLayers=function(t,e,r){this.__upTargetsStyleProps(r||e)},n.prototype.__upTargets=function(t,e){if(e===void 0&&(e={}),!e.__select)return yr.prototype.__upTargets.call(this,t,e)},n.prototype.__upTargetsStyleProps=function(t){t===void 0&&(t={}),this.__upTargetsStyle(this.getStyleFromLayers(t),t)},n.prototype.__upTargetsStyle=function(t,e){return yr.prototype.__upTargetsStyle.call(this,t,e)},n.prototype.__upSelected=function(t,e){var r=t===void 0?{}:t,o=r.noEvent;e===void 0&&(e={});var a=this.em.Styles,s=this.getSelectedLayer(),u=s==null?void 0:s.getValues();u&&this.getProperties().forEach(function(c){var h,v=(h=u[c.getId()])!==null&&h!==void 0?h:"";c.__getFullValue()!==v&&c.upValue(v,ra(ra({},e),{__up:!0}))}),!o&&a.__trgEv(a.events.layerSelect,{property:this})},n.prototype._up=function(t,e){e===void 0&&(e={});var r=t.__layers,o=r===void 0?[]:r,a=oJ(t,["__layers"]);return!this.isDetached()&&this.__setLayers(o),this.__upSelected({noEvent:!0},e),yr.prototype._up.call(this,a,e),this},n.prototype.__setLayers=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var r=this.layers,o=t.map(function(a){return{values:a}});r.length===o.length?o.map(function(a,s){var u;return(u=r.at(s))===null||u===void 0?void 0:u.upValues(a.values)}):r.reset(o),this.set({isEmptyValue:!!e.isEmptyValue}),this.__upSelected({noEvent:!0})},n.prototype.__parseValue=function(t){var e=this,r=this.parseValue(t);return r.__layers=t.split(aJ).map(function(o){return o.trim()}).map(function(o){return e.__parseLayer(o)}).filter(Boolean),r},n.prototype.__parseLayer=function(t){var e=this.get("parseLayer"),r=t.split(sJ),o=this.getProperties();return e?e({value:t,values:r}):o.reduce(function(a,s,u){var c=r[u];return a[s.getId()]=(0,J.isUndefined)(c)?s.getDefaultValue():c,a},{})},n.prototype.__getLayersFromStyle=function(t){var e=this;if(t===void 0&&(t={}),!this.__styleHasProps(t))return null;if(this.isEmptyValueStyle(t))return[];var r=this.getName(),o=this.getProperties(),a=this.getLayerSeparator(),s=this.attributes.fromStyle,u=s?s(t,{property:this,name:r,separatorLayers:a}):[];if(!s){var c=this.__splitStyleName(t,r,a).map(function(h){return h.split(e.getSplitSeparator())}).map(function(h){var v={};return o.forEach(function(m,y){var _=h[y];v[m.getId()]=(0,J.isUndefined)(_)?m.getDefaultValue():_}),v});o.forEach(function(h){var v=h.getId();e.__splitStyleName(t,h.getName(),a).map(function(m){var y;return y={},y[v]=m||h.getDefaultValue(),y}).forEach(function(m,y){c[y]=c[y]?ra(ra({},c[y]),m):m})}),u=c}return(0,J.isArray)(u)?u:[u]},n.prototype.getStyle=function(t){return t===void 0&&(t={}),this.getStyleFromLayers(t)},n.prototype.getStyleFromLayers=function(t){var e=this;t===void 0&&(t={});var r={},o=this.getName(),a=this.getLayers(),s=this.getProperties(),u=a.map(function(h){return e.getStyleFromLayer(h,t)});if(u.forEach(function(h){(0,J.keys)(h).map(function(v){r[v]||(r[v]=[]),r[v].push(h[v])})}),(0,J.keys)(r).map(function(h){r[h]=r[h].join(e.__getJoinLayers())}),this.isDetached())r[o]="",!a.length&&s.map(function(h){r[h.getName()]=""});else{var c=s.reduce(function(h,v){return h[v.getName()]="",h},{});r[o]=r[o]||"",r=ra(ra({},r),c)}return ra(ra({},r),t.__clear?{}:this.getEmptyValueStyle())},n.prototype.isEmptyValueStyle=function(t){t===void 0&&(t={});var e=this.getEmptyValueStyle({force:!0}),r=(0,J.keys)(e);return!!r.length&&r.every(function(o){return e[o]===t[o]})},n.prototype.getEmptyValueStyle=function(t){t===void 0&&(t={});var e=this.attributes.emptyValue;if(e&&(!this.hasLayers()||t.force)){var r=this.getName(),o=this.getProperties(),a=(0,J.isString)(e)?e:e({property:this});if((0,J.isString)(a)){var s={};return this.isDetached()?o.map(function(u){s[u.getName()]=a}):s[r]=a,s}else return a}else return{}},n.prototype.__getJoinLayers=function(){var t=this.get("layerJoin"),e=this.get("layerSeparator");return t||((0,J.isString)(e)?e:t)},n.prototype.__getFullValue=function(){if(this.get("detached"))return"";var t=this.getStyleFromLayers();return o_(t[this.getName()])},n.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent,r=e&&this.getParentTarget();return(this.hasLayers()||this.hasEmptyValue())&&!r},n.prototype.clear=function(t){return t===void 0&&(t={}),this.layers.reset(),this.__upTargetsStyleProps(ra(ra({},t),{__clear:!0})),yr.prototype.clear.call(this),this},n.prototype.__canClearProp=function(){return!1},n.prototype.__getLayers=function(){return this.layers},n}(uh);const uJ=lJ;var cJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ob=function(){return ob=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},ob.apply(this,arguments)},fJ=function(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(i);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]]);return t},dJ=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},aS="data-clear-style",hJ=function(i){cJ(n,i);function n(t){t===void 0&&(t={});var e=i.call(this,t)||this;(0,J.bindAll)(e,"__change","__updateStyle");var r=t.config||{},o=r.em;e.config=r,e.em=o,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.__destroyFn=e.destroy?e.destroy.bind(e):function(){};var a=e.model;a.view=e,e.onValueChange=(0,J.debounce)(e.onValueChange.bind(e),10),e.updateStatus=(0,J.debounce)(e.updateStatus.bind(e),0),e.listenTo(a,"destroy remove",e.remove),e.listenTo(a,"change:visible",e.updateVisibility),e.listenTo(a,"change:name change:className change:full",e.render),e.listenTo(a,"change:value",e.onValueChange),e.listenTo(a,"change:parentTarget",e.updateStatus),e.listenTo(o,"change:device",e.onValueChange);var s=e.init&&e.init.bind(e);return s&&s(),e}return n.prototype.events=function(){var t;return t={change:"inputValueChanged"},t["click [".concat(aS,"]")]="clear",t},n.prototype.template=function(t){var e=this,r=e.pfx,o=e.ppfx;return`
      <div class="`.concat(r,`label" data-sm-label></div>
      <div class="`).concat(o,`fields" data-sm-fields></div>
    `)},n.prototype.templateLabel=function(t){var e=this,r=e.pfx,o=e.em,a=t.parent,s=t.attributes,u=s.icon,c=u===void 0?"":u,h=s.info,v=h===void 0?"":h,m=o==null?void 0:o.getConfig().icons,y=(m==null?void 0:m.close)||"";return`
      <span class="`.concat(r,"icon ").concat(c,'" title="').concat(v,`">
        `).concat(t.getLabel(),`
      </span>
      `).concat(a?"":'<div class="'.concat(r,'clear" style="display: none" ').concat(aS,">").concat(y,"</div>"),`
    `)},n.prototype.templateInput=function(t){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(t.getDefaultValue(),`"/>
      </div>
    `)},n.prototype.remove=function(){var t=this;return ye.Ss.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(e){return t[e]=null}),this.__destroyFn(this._getClbOpts()),this},n.prototype.updateStatus=function(){var t,e=this,r=e.model,o=e.pfx,a=e.ppfx,s=e.config,u="".concat(a,"four-color"),c="".concat(a,"color-warn"),h=this.$el.children(".".concat(o,"label")),v=this.getClearEl(),m=v?v.style:{};h.removeClass("".concat(u," ").concat(c)),m.display="none",r.hasValue({noParent:!0})&&s.highlightChanged?(h.addClass(u),s.clearProperties&&(m.display="")):r.hasValue()&&s.highlightComputed&&h.addClass(c),(t=this.parent)===null||t===void 0||t.updateStatus()},n.prototype.clear=function(t){t&&t.stopPropagation(),this.model.clear()},n.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(aS,"]"))),this.clearEl},n.prototype.inputValueChanged=function(t){t&&t.stopPropagation(),!this.emit&&this.model.upValue(t.target.value)},n.prototype.onValueChange=function(t,e,r){this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},n.prototype.setValue=function(t){var e=this.model,r=(0,J.isUndefined)(t)||t===""?e.getDefaultValue():t;if(this.update)return this.__update(r);this.__setValueInput(r)},n.prototype.__setValueInput=function(t){var e=this.getInputEl();e&&(e.value=t)},n.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},n.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},n.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},n.prototype.__unset=function(){var t=this.unset&&this.unset.bind(this);t&&t(this._getClbOpts())},n.prototype.__update=function(t){var e=this.update&&this.update.bind(this);e&&e(ob(ob({},this._getClbOpts()),{value:t}))},n.prototype.__change=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.emit&&this.emit.bind(this);r&&r.apply(void 0,dJ([this._getClbOpts()],t,!1))},n.prototype.__updateStyle=function(t,e){e===void 0&&(e={});var r=e.complete,o=e.partial;fJ(e,["complete","partial"]);var a=this.model,s=r!==!1&&o!==!0;(0,Zt.isObject)(t)?a.__upTargetsStyle(t,{avoidStore:!s}):a.upValue(t,{partial:!s})},n.prototype._getClbOpts=function(){var t=this,e=t.model,r=t.el,o=t.createdEl;return{el:r,createdEl:o,property:e,props:e.attributes,change:this.__change,updateStyle:this.__updateStyle}},n.prototype.render=function(){this.clearCached();var t=this,e=t.pfx,r=t.model,o=t.el,a=t.$el,s=r.getName(),u=r.getType(),c=r.get("className")||"",h="".concat(e,"property"),v=u==="number"?"".concat(e).concat(u," ").concat(e,"integer"):"".concat(e).concat(u);this.createdEl&&this.__destroyFn(this._getClbOpts()),a.empty().append(this.template(r)),a.find("[data-sm-label]").append(this.templateLabel(r));var m=this.create&&this.create.bind(this);this.createdEl=m&&m(this._getClbOpts()),a.find("[data-sm-fields]").append(this.createdEl||this.templateInput(r)),o.className="".concat(h," ").concat(v," ").concat(h,"__").concat(s," ").concat(c).trim(),o.className+=r.isFull()?" ".concat(h,"--full"):"";var y=this.onRender&&this.onRender.bind(this);return y&&y(),this.setValue(r.getValue()),this},n.prototype.onRender=function(){},n}(ye.Ss);const ru=hJ;var pJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vJ=function(i){pJ(n,i);function n(t){var e=i.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.properties=[],e.parent=t.parent;var r=e.collection;return e.listenTo(r,"add",e.addTo),e.listenTo(r,"reset",e.render),e}return n.prototype.addTo=function(t,e,r){this.add(t,null,r)},n.prototype.add=function(t,e,r){r===void 0&&(r={});var o=this,a=o.parent,s=o.config,u=e||this.el,c=new t.typeView({model:t,config:s});a&&(c.parent=a),c.render();var h=c.el;this.properties.push(c),(0,Ce.Sc)(u,h,r.at)},n.prototype.remove=function(){return ye.Ss.prototype.remove.apply(this,arguments),this.clearItems(),this},n.prototype.clearItems=function(){this.properties.forEach(function(t){return t.remove()}),this.properties=[]},n.prototype.render=function(){var t=this,e=this,r=e.$el,o=e.pfx;this.clearItems();var a=document.createDocumentFragment();return this.collection.forEach(function(s){return t.add(s,a)}),r.empty(),r.append(a),r.attr("class","".concat(o,"properties")),this},n}(ye.Ss);const G1=vJ;var gJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ab=function(){return ab=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},ab.apply(this,arguments)},mJ=function(i){gJ(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.templateInput=function(){var t=this.pfx;return`
      <div class="`.concat(t,"field ").concat(t,`composite">
        <span id="`).concat(t,`input-holder"></span>
      </div>
    `)},n.prototype.remove=function(){var t;return(t=this.props)===null||t===void 0||t.remove(),ru.prototype.remove.apply(this,arguments),this},n.prototype.onValueChange=function(){},n.prototype.onRender=function(){var t=this.pfx,e=this.model,r=e.get("properties");if(r.length&&!this.props){var o=e.isDetached(),a=new G1({config:ab(ab({},this.config),{highlightComputed:o,highlightChanged:o}),collection:r,parent:this});a.render(),this.$el.find("#".concat(t,"input-holder")).append(a.el),this.props=a}},n.prototype.clearCached=function(){ru.prototype.clearCached.apply(this,arguments),delete this.props},n}(ru);const Mv=mJ;var yJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bJ=function(i){yJ(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},n.prototype.template=function(){var t=this,e=t.pfx,r=t.ppfx,o=t.em,a=o==null?void 0:o.getConfig().icons,s=(a==null?void 0:a.close)||"",u=(a==null?void 0:a.move)||"";return`
      <div class="`.concat(e,`label-wrp">
        <div id="`).concat(e,'move" class="').concat(r,`no-touch-actions" data-move-layer>
          `).concat(u,`
        </div>
        <div id="`).concat(e,`label" data-label></div>
        <div id="`).concat(e,'preview-box" class="').concat(e,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(e,'preview" class="').concat(e,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(e,'close-layer" class="').concat(e,`btn-close" data-close-layer>
          `).concat(s,`
        </div>
      </div>
      <div id="`).concat(e,`inputs" data-properties></div>
    `)},n.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,r=t.config||{};this.em=r.em,this.config=r,this.sorter=t.sorter,this.pfx=r.stylePrefix||"",this.ppfx=r.pStylePrefix||"",this.propertyView=t.propertyView;var o=this.propertyView.model;this.listenTo(e,"destroy remove",this.remove),this.listenTo(e,"change:values",this.updateLabel),this.listenTo(o,"change:selectedLayer",this.updateVisibility),e.view=this,e.set({droppable:0,draggable:1}),this.$el.data("model",e)},n.prototype.initSorter=function(){var t;(t=this.sorter)===null||t===void 0||t.startSort([{element:this.el}])},n.prototype.removeItem=function(t){t&&t.stopPropagation(),this.model.remove()},n.prototype.select=function(){this.model.select()},n.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},n.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},n.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},n.prototype.updateLabel=function(){var t=this.model,e=t.getLabel();if(this.getLabelEl().innerHTML=e,t.hasPreview()){var r=this.getPreviewEl(),o=t.getStylePreview({number:{min:-3,max:3}}),a=(0,J.keys)(o).map(function(s){return"".concat(s,":").concat(o[s])}).join(";");r.setAttribute("style",a)}},n.prototype.updateVisibility=function(){var t,e=this,r=e.pfx,o=e.model,a=e.propertyView,s=this.getPropertiesWrapper(),u=o.isSelected();s.style.display=u?"":"none",this.$el[u?"addClass":"removeClass"]("".concat(r,"active")),u&&s.appendChild((t=a.props)===null||t===void 0?void 0:t.el)},n.prototype.render=function(){var t=this,e=t.el,r=t.pfx,o=t.model;return e.innerHTML=this.template(),e.className="".concat(r,"layer"),o.hasPreview()&&(e.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},n}(ye.Ss);const wJ=bJ;var xJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),SJ=function(i){xJ(n,i);function n(t){var e=i.call(this,t)||this,r=e.collection,o=t.config||{},a=o.em,s=o.stylePrefix||"",u=o.pStylePrefix||"";e.config=o,e.pfx=s,e.ppfx=u,e.propertyView=t.propertyView,e.className="".concat(s,"layers ").concat(u,"field"),e.listenTo(r,"add",e.addTo),e.listenTo(r,"reset",e.reset),e.items=[];var c=e.createPlaceholder(o.pStylePrefix);e.$el.append(c);var h=a==null?void 0:a.Utils;return e.sorter=h?new h.StyleManagerSorter({em:a,containerContext:{container:e.el,containerSel:".".concat(s,"layers"),itemSel:".".concat(s,"layer"),pfx:o.pStylePrefix,document,placeholderElement:c},dragBehavior:{dragDirection:Ff.A.Vertical,nested:!1}}):void 0,r.view=e,e.$el.data("model",r),e.$el.data("collection",r),e}return n.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},n.prototype.addToCollection=function(t,e,r){var o=e||null,a=this,s=a.propertyView,u=a.config,c=a.sorter,h=a.$el,v=new wJ({model:t,config:u,sorter:c,propertyView:s}),m=v.render().el;if(this.items.push(v),o)o.appendChild(m);else if(typeof r<"u"){var y="before";h.children().length===r&&(r--,y="after"),r<0?h.append(m):h.children().eq(r)[y](m)}else h.append(m);return m},n.prototype.reset=function(t,e){this.clearItems(),this.render()},n.prototype.remove=function(){return this.clearItems(),ye.Ss.prototype.remove.apply(this,arguments),this},n.prototype.clearItems=function(){this.items.forEach(function(t){return t.remove()}),this.items=[]},n.prototype.render=function(){var t=this,e=this.$el,r=document.createDocumentFragment();return e.empty(),this.collection.forEach(function(o){return t.addToCollection(o,r)}),e.append(r),e.attr("class",this.className),this},n.prototype.createPlaceholder=function(t){var e=document.createElement("div"),r=document.createElement("div");return this.el.parentNode,e.className=t+"placeholder",e.style.display="none",e.style.pointerEvents="none",r.className=t+"placeholder-int",e.appendChild(r),e},n}(ye.Ss);const _J=SJ;var CJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Th=function(){return Th=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Th.apply(this,arguments)},TJ=function(i){CJ(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.events=function(){return Th(Th({},Mv.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},n.prototype.templateInput=function(){var t=this,e=t.pfx,r=t.em,o=r==null?void 0:r.getConfig().icons,a=(o==null?void 0:o.plus)||"+";return`
      <div class="`.concat(e,"field ").concat(e,`stack">
        <button type="button" id="`).concat(e,`add" data-add-layer>
          `).concat(a,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},n.prototype.init=function(){var t=this.model;this.listenTo(t.layers,"change reset",this.updateStatus),this.listenTo(t,"change:isEmptyValue",this.updateStatus)},n.prototype.addLayer=function(){this.model.addLayer({},{at:0})},n.prototype.setValue=function(){},n.prototype.remove=function(){var t;return(t=this.layersView)===null||t===void 0||t.remove(),Mv.prototype.remove.apply(this,arguments),this},n.prototype.clearCached=function(){Mv.prototype.clearCached.apply(this,arguments),delete this.layersView},n.prototype.onRender=function(){var t=this,e=t.model,r=t.el,o=t.config,a=e.get("properties");if(a.length&&!this.props){var s=new G1({config:Th(Th({},o),{highlightComputed:!1,highlightChanged:!1}),collection:a,parent:this});s.render();var u=new _J({collection:e.layers,config:o,propertyView:this});u.render();var c=r.querySelector("[data-layers-wrapper]");c.appendChild(u.el),this.props=s,this.layersView=u}},n}(Mv);const EJ=TJ;var OJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),sb=function(){return sb=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},sb.apply(this,arguments)},AJ=function(i){OJ(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.events=function(){return sb(sb({},ru.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},n.prototype.templateInput=function(){var t,e=this,r=e.pfx,o=e.em,a=(t=this.em)===null||t===void 0?void 0:t.getConfig().icons,s=a==null?void 0:a.close;return`
      <div class="`.concat(r,"field ").concat(r,`file">
        <div id='`).concat(r,`input-holder'>
          <div class="`).concat(r,`btn-c">
            <button class="`).concat(r,'btn" id="').concat(r,`images" type="button" data-open-assets>
              `).concat(o.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(r,'preview-box" class="').concat(r,`preview-file" data-preview-box>
          <div id="`).concat(r,'preview-file" class="').concat(r,`preview-file-cnt" data-preview></div>
          <div id="`).concat(r,'close" class="').concat(r,'preview-file-close" data-clear-asset>').concat(s,`</div>
        </div>
      </div>
    `)},n.prototype.__setValueInput=function(t){var e=this,r=e.model,o=e.el,a=r.getDefaultValue(),s=o.querySelector("[data-preview-box]"),u=o.querySelector("[data-preview]");s.style.display=!t||t===a?"none":"",u.style.backgroundImage=t||r.getDefaultValue()},n.prototype.openAssetManager=function(){var t=this,e,r=(e=this.em)===null||e===void 0?void 0:e.Assets;r==null||r.open({select:function(o,a){var s=(0,J.isString)(o)?o:o.get("src");t.model.upValue(s,{partial:!a}),a&&r.close()},types:["image"],accept:"image/*"})},n}(ru);const kJ=AJ;var MJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),DJ=function(i){MJ(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.templateInput=function(t){return""},n.prototype.init=function(){var t=this.model;this.listenTo(t,"change:unit",this.onValueChange),this.listenTo(t,"change:units",this.render)},n.prototype.setValue=function(t){},n.prototype.onRender=function(){var t=this,e=t.ppfx,r=t.model,o=t.el;if(!this.inputInst){var a=r.input;a.ppfx=e,a.render();var s=o.querySelector(".".concat(e,"fields"));s.appendChild(a.el),this.input=a.inputEl.get(0),this.inputInst=a}},n.prototype.clearCached=function(){ru.prototype.clearCached.apply(this,arguments),this.inputInst=null},n}(ru);const Xl=DJ;var PJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),NJ=function(i){PJ(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.setValue=function(t){var e;(e=this.inputInst)===null||e===void 0||e.setValue(t,{fromTarget:1,def:this.model.getDefaultValue()})},n.prototype.remove=function(){var t=this;Xl.prototype.remove.apply(this,arguments);var e=this.inputInst;return e&&e.remove&&e.remove(),["inputInst","$color"].forEach(function(r){return t[r]=null}),this},n.prototype.__handleChange=function(t,e){this.model.upValue(t,{partial:e})},n.prototype.onRender=function(){var t;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var e=this,r=e.ppfx,o=e.model,a=e.em,s=e.el,u=new xP({target:a,model:o,ppfx:r,onChange:this.__handleChange}),c=u.render();s.querySelector(".".concat(r,"fields")).appendChild(c.el),this.input=(t=c.inputEl)===null||t===void 0?void 0:t.get(0),this.inputInst=c}},n}(Xl);const RJ=NJ;var LJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lb=function(){return lb=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},lb.apply(this,arguments)},ZA=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},jJ=function(i){LJ(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.defaults=function(){return lb(lb({},yr.getDefaults()),{options:[],full:0})},n.prototype.getOptions=function(){var t=this.attributes,e=t.options,r=t.list;return(e&&e.length?e:r)||[]},n.prototype.getOption=function(t){var e=this,r=(0,Zt.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(o){return e.getOptionId(o)===r})[0]||null},n.prototype.setOptions=function(t){return t===void 0&&(t=[]),this.set("options",t),this},n.prototype.addOption=function(t){if(t){var e=this.getOptions();this.setOptions(ZA(ZA([],e,!0),[t],!1))}return this},n.prototype.getOptionId=function(t){return(0,Zt.isDef)(t.id)?t.id:t.value},n.prototype.getOptionLabel=function(t,e){var r;e===void 0&&(e={});var o=e.locale,a=o===void 0?!0:o,s=((0,J.isString)(t)?this.getOption(t):t)||{},u=this.getOptionId(s),c=s.label||s.name||u,h=e.property||this.getId();return a&&((r=this.em)===null||r===void 0?void 0:r.t("styleManager.options.".concat(h,".").concat(u)))||c},n.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];yr.prototype.initialize.apply(this,t),this.listenTo(this,"change:options",this.__onOptionChange)},n.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},n}(yr);const L_=jJ;var IJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),BJ=function(i){IJ(n,i);function n(t){var e=i.call(this,t)||this;return e.listenTo(e.model,"change:options",e.updateOptions),e}return n.prototype.templateInput=function(){var t=this,e=t.pfx,r=t.ppfx;return`
      <div class="`.concat(r,"field ").concat(r,`select">
        <span id="`).concat(e,`input-holder"></span>
        <div class="`).concat(r,`sel-arrow">
          <div class="`).concat(r,`d-s-arrow"></div>
        </div>
      </div>
    `)},n.prototype.updateOptions=function(){delete this.input,this.onRender()},n.prototype.onRender=function(){var t=this.pfx,e=this.model,r=e.getOptions();if(!this.input){var o=[];r.forEach(function(s){var u=e.getOptionId(s),c=e.getOptionLabel(u),h=s.style?s.style.replace(/"/g,"&quot;"):"",v=h?'style="'.concat(h,'"'):"",m=u.replace(/"/g,"&quot;");o.push('<option value="'.concat(m,'" ').concat(v,">").concat(c,"</option>"))});var a=this.el.querySelector("#".concat(t,"input-holder"));a.innerHTML="<select>".concat(o.join(""),"</select>"),this.input=a.firstChild}},n.prototype.__setValueInput=function(t){var e=this.model,r=this.getInputEl(),o=e.getOptions()[0],a=o?e.getOptionId(o):"";r&&(r.value=t||a)},n}(ru);const XP=BJ;var UJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ub=function(){return ub=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},ub.apply(this,arguments)},VJ=function(i){UJ(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.defaults=function(){return ub(ub({},L_.getDefaults()),{full:1})},n}(L_);const FJ=VJ;var HJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zJ=function(i){HJ(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.templateInput=function(){var t=this.ppfx;return'<div class="'.concat(t,"field ").concat(t,'field-radio"></div>')},n.prototype.onRender=function(){var t=this,e=t.pfx,r=t.ppfx,o=this.model,a="".concat(r,"radio-item-label"),s=o.getName(),u=o.getOptions(),c="".concat(e,"radio ").concat(e,"radio-").concat(s),h=o.cid;if(!this.input){var v=[];u.forEach(function(y){var _=y.className?"".concat(y.className," ").concat(e,"icon ").concat(a):"",C=o.getOptionId(y),E="".concat(s,"-").concat(C,"-").concat(h),D=_?"":o.getOptionLabel(C),F=y.title?'title="'.concat(y.title,'"'):"",V=o.getValue()===C?"checked":"";v.push(`
          <div class="`.concat(r,`radio-item">
            <input type="radio" class="`).concat(c,'" id="').concat(E,'" name="').concat(s,"-").concat(h,'" value="').concat(C,'" ').concat(V,`/>
            <label class="`).concat(_||a,'" ').concat(F,' for="').concat(E,'">').concat(D,`</label>
          </div>
        `))});var m=this.el.querySelector(".".concat(r,"field"));m.innerHTML='<div class="'.concat(r,'radio-items">').concat(v.join(""),"</div>"),this.input=m.firstChild}},n.prototype.__setValueInput=function(t){var e,r=this.model,o=t||r.getDefaultValue(),a=(e=this.getInputEl())===null||e===void 0?void 0:e.querySelector('[value="'.concat(o,'"]'));a&&(a.checked=!0)},n}(XP);const WJ=zJ;var qJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xf=function(){return xf=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},xf.apply(this,arguments)},KJ=function(i){qJ(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.defaults=function(){return xf(xf({},yr.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},n.prototype.getUnits=function(){return this.get("units")||[]},n.prototype.getUnit=function(){return this.get("unit")},n.prototype.getMin=function(){return this.get("min")},n.prototype.getMax=function(){return this.get("max")},n.prototype.getStep=function(){return this.get("step")},n.prototype.upUnit=function(t,e){return e===void 0&&(e={}),this._up({unit:t},e)},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),yr.callParentInit(yr,this,t,e);var r=this.get("unit"),o=this.getUnits();this.input=(0,Zt.hasWin)()?new _P({model:this}):void 0,o.length&&!r&&this.set("unit",o[0],{silent:!0}),yr.callInit(this,t,e)},n.prototype.__getClearProps=function(){return xf(xf({},yr.prototype.__getClearProps()),{unit:""})},n.prototype.parseValue=function(t,e){e===void 0&&(e={});var r=yr.prototype.parseValue.apply(this,arguments),o=this.input.validateInputValue(r.value,xf({deepCheck:1},e)),a=o.value,s=o.unit;return r.value=a,r.unit=s,r},n.prototype.getFullValue=function(){var t=this.get("value"),e=this.get("unit"),r=(0,J.isUndefined)(t)?"":"".concat(t),o=!(0,J.isUndefined)(e)&&r?e:"",a="".concat(r).concat(o);return yr.prototype.getFullValue.apply(this,[a])},n}(yr);const cb=KJ;var $J=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fb=function(){return fb=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},fb.apply(this,arguments)},GJ=function(i){$J(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.defaults=function(){return fb(fb({},cb.getDefaults()),{showInput:1})},n}(cb);const YJ=GJ;var XJ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),db=function(){return db=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},db.apply(this,arguments)},JJ=function(i){XJ(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.events=function(){return db(db({},Xl.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},n.prototype.templateInput=function(t){var e=this.ppfx;return`
      <div class="`.concat(e,"field ").concat(e,`field-range">
        <input type="range" min="`).concat(t.get("min"),'" max="').concat(t.get("max"),'" step="').concat(t.get("step"),`"/>
      </div>
    `)},n.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},n.prototype.inputValueChanged=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value)},n.prototype.inputValueChangedSoft=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},n.prototype.setValue=function(t){var e=this.model,r=e.parseValue(t);this.getSliderEl().value=t===""?e.getDefaultValue():parseFloat(r.value),Xl.prototype.setValue.apply(this,arguments)},n.prototype.onRender=function(){Xl.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},n.prototype.clearCached=function(){Xl.prototype.clearCached.apply(this,arguments),delete this.slider},n}(Xl);const ZJ=JJ;var QJ=ye.pM.extend(DP),tZ=QJ.extend({extendViewApi:1,init:function(){var i=this,n=i.opts,t=i.em,e=n.module||(t==null?void 0:t.get("StyleManager"));e&&(e.__listenAdd(this,e.events.propertyAdd),e.__listenRemove(this,e.events.propertyRemove))},types:[{id:"stack",model:uJ,view:EJ,isType:function(i){if(i&&i.type=="stack")return i}},{id:"composite",model:uh,view:Mv,isType:function(i){if(i&&i.type=="composite")return i}},{id:"file",model:yr,view:kJ,isType:function(i){if(i&&i.type=="file")return i}},{id:"color",model:yr,view:RJ,isType:function(i){if(i&&i.type=="color")return i}},{id:"select",model:L_,view:XP,isType:function(i){if(i&&i.type=="select")return i}},{id:"radio",model:FJ,view:WJ,isType:function(i){if(i&&i.type=="radio")return i}},{id:"slider",model:YJ,view:ZJ,isType:function(i){if(i&&i.type=="slider")return i}},{id:"integer",model:cb,view:Xl,isType:function(i){if(i&&i.type=="integer")return i}},{id:"number",model:cb,view:Xl,isType:function(i){if(i&&i.type=="number")return i}},{id:"base",model:yr,view:ru,isType:function(i){return i.type="base",i}}]});const Y1=tZ;var nc=function(){return nc=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},nc.apply(this,arguments)},eZ=function(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(i);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]]);return t},hf=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},wi=function(i){return i.map(function(n){return{id:n}})},nZ=function(){function i(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var n=", sans-serif",t=["flex-start","flex-end","center"],e=hf(hf([],t,!0),["baseline","stretch"],!1);this.optsBgSize=wi(["auto","cover","contain"]),this.optsBgAttach=wi(["scroll","fixed","local"]),this.optsBgRepeat=wi(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=wi(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=wi(["visible","hidden","scroll","auto"]),this.optsDir=wi(["row","row-reverse","column","column-reverse"]),this.opstDisplay=wi(["block","inline","inline-block","flex","none"]),this.optsTransitFn=wi(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=wi(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=wi(["none","left","right"]),this.optsPos=wi(["static","relative","absolute","fixed"]),this.optsTextAlign=wi(["left","center","right","justify"]),this.optsFlexAlign=wi(e),this.optsJustCont=wi(hf(hf([],t,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=wi(hf(hf([],t,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=wi(hf(["auto"],e,!0)),this.optsTransitProp=wi(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=wi(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=wi(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+n,"Arial Black, Gadget"+n,"Brush Script MT"+n,"Comic Sans MS, cursive"+n,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+n,"Impact, Charcoal"+n,"Lucida Sans Unicode, Lucida Grande"+n,"Tahoma, Geneva"+n,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+n,"Verdana, Geneva"+n].map(function(r){return{id:r,label:r.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return i.prototype.__sub=function(n){var t=this;return function(){return n.map(function(e){if((0,J.isString)(e))return t.get(e);var r=e.extend,o=eZ(e,["extend"]);return nc(nc({},t.get(r)),o)})}},i.prototype.init=function(){var n=this,t=this,e=t.fixedValues,r=t.requireFlex,o=t.typeNumber;this.props={};var a=[["text-shadow-h",{type:o,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:e},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:r},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:o,default:"0",requiresParent:r}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black",full:!0}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01,full:!0}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:r},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:r},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(s,u){var c=u.values,h=c["box-shadow-h"],v=c["box-shadow-v"],m=c["box-shadow-blur"],y=c["box-shadow-spread"];return"".concat(h," ").concat(v," ").concat(m," ").concat(y)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(s,u){var c=u.values,h=c["text-shadow-h"],v=c["text-shadow-v"],m=c["text-shadow-blur"];return"".concat(h," ").concat(v," ").concat(m)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(s,u){var c=u.values,h=c["background-repeat-sub"]||"",v=c["background-position-sub"]||"",m=c["background-attachment-sub"]||"",y=c["background-size-sub"]||"";return[h,v,m,y].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(s,u){var c=u.property,h=u.name,v=s[h]||"",m=c.getLayerSeparator();return v?v.split(m).map(function(y){var _=c.__parseFn(y),C=_.name,E=_.value;return{"transform-type":C,"transform-value":E}}):[]},toStyle:function(s,u){var c,h=u.name;return c={},c[h]="".concat(s["transform-type"],"(").concat(s["transform-value"],")"),c},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(s){var u=s.property,c=s.to;if(c.value){var h=u.getOption(),v=nc({},h.propValue||{}),m=u.getParent().getProperty("transform-value"),y=m.getUnit();(!y||(v==null?void 0:v.units.indexOf(y))<0)&&(v.unit=(v==null?void 0:v.units[0])||""),m.up(v)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return a.forEach(function(s){var u=s[0],c=s[1],h=s[2];n.add(u,c||{},{from:h})}),this},i.prototype.add=function(n,t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=e.from||"",o=this.props[r||n]||{},a=nc(nc(nc({},o),{property:n}),t);return a.properties&&(0,J.isFunction)(a.properties)&&(a.properties=a.properties()),this.props[n]=a,a},i.prototype.get=function(n){return this.props[n]},i.prototype.build=function(n){var t=this,e=[],r=(0,J.isString)(n)?[n]:n;return r.forEach(function(o){e.push(t.get(o)||{property:o})}),e},i}();const rZ=nZ;var iZ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hb=function(){return hb=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},hb.apply(this,arguments)},oZ=function(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(i);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]]);return t},aZ=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},sZ=function(i){iZ(n,i);function n(t,e){e===void 0&&(e={});var r=i.call(this,t)||this,o=e.em;r.em=o;var a=t||{},s=r.buildProperties(a.buildProps),u=r.get("name")||"",c=[];!r.get("id")&&r.set("id",u.replace(/ /g,"_").toLowerCase()),s?c=r.extendProperties(s):c=r.get("properties").map(function(v){return(0,J.isString)(v)?r.buildProperties(v)[0]:v}).filter(Boolean),c=c.map(function(v){return r.checkExtend(v)});var h=new Y1(c,{em:o});return h.sector=r,r.set("properties",h),r}return n.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(n.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),n.prototype.getId=function(){return this.get("id")},n.prototype.getName=function(){var t,e=this.getId();return((t=this.em)===null||t===void 0?void 0:t.t("styleManager.sectors.".concat(e)))||this.get("name")},n.prototype.setName=function(t){return this.set("name",t)},n.prototype.isOpen=function(){return!!this.get("open")},n.prototype.setOpen=function(t){return this.set("open",t)},n.prototype.isVisible=function(){return!!this.get("visible")},n.prototype.getProperties=function(t){t===void 0&&(t={});var e=this.properties,r=e.models?aZ([],e.models,!0):e;return r.filter(function(o){var a=!0;if(t.withValue&&(a=o.hasValue({noParent:!0})),t.withParentValue){var s=o.hasValue({noParent:!0});a=!s&&o.hasValue()}return a})},n.prototype.getProperty=function(t){return this.getProperties().filter(function(e){return e.get("id")===t})[0]||void 0},n.prototype.addProperty=function(t,e){return this.properties.add(this.checkExtend(t),e)},n.prototype.extendProperties=function(t,e,r){r===void 0&&(r=!1);for(var o=t.length,a=e||this.get("properties"),s=this.get("extendBuilded"),u=[],c=0,h=a.length;c<h;c++){for(var v=a[c],m=0,y=0;y<o;y++){var _=t[y];if(v.property==_.property||v.id==_.property){var C=v.properties;C&&C.length&&(v.properties=this.extendProperties(_.properties||[],C,1)),t[y]=s?(0,J.extend)(_,v):v,u[y]=t[y],m=1;continue}}m||(t.push(v),u.push(v))}return r?u.filter(function(E){return E}):t},n.prototype.checkExtend=function(t){var e=((0,J.isString)(t)?{extend:t}:t)||{},r=e.extend,o=oZ(e,["extend"]);return r?hb(hb({},this.buildProperties([r])[0]||{}),o):t},n.prototype.buildProperties=function(t){var e,r=t||[];if(!r.length)return[];var o=(e=this.em)===null||e===void 0?void 0:e.Styles.builtIn;return o==null?void 0:o.build(r)},n}(ye.Kx);const JP=sZ;var lZ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pb=function(){return pb=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},pb.apply(this,arguments)},uZ=function(i){lZ(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.initialize=function(t,e){e===void 0&&(e={});var r=e.module,o=e.em;this.em=o,this.module=r,this.listenTo(this,"reset",this.onReset)},n.prototype.model=function(t,e){e===void 0&&(e={});var r=e.collection.em;return new JP(t,pb(pb({},e),{em:r}))},n.prototype.onReset=function(t,e){e===void 0&&(e={});var r=e.previousModels||[];r.forEach(function(o){return o.get("properties").reset()})},n}(ye.pM);const cZ=uZ;var vb;(function(i){i.sectorAdd="style:sector:add",i.sectorRemove="style:sector:remove",i.sectorUpdate="style:sector:update",i.propertyAdd="style:property:add",i.propertyRemove="style:property:remove",i.propertyUpdate="style:property:update",i.target="style:target",i.layerSelect="style:layer:select",i.custom="style:custom",i.all="style"})(vb||(vb={}));var fZ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),dZ=function(i,n){return Object.defineProperty?Object.defineProperty(i,"raw",{value:n}):i.raw=n,i},hZ=function(i){fZ(n,i);function n(t){var e=i.call(this,t)||this,r=t.config||{},o=e.model,a=r.em;return e.config=r,e.em=a,e.pfx=r.stylePrefix||"",e.listenTo(o,"destroy remove",e.remove),e.listenTo(o,"change:open",e.updateOpen),e.listenTo(o,"change:visible",e.updateVisibility),e}return n.prototype.template=function(t){var e,r=t.pfx,o=t.label,a=(e=this.em)===null||e===void 0?void 0:e.getConfig().icons,s=(a==null?void 0:a.caret)||"",u="".concat(r,"sector-");return sa(QA||(QA=dZ([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),u,u,s,u,o)},n.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},n.prototype.updateOpen=function(){var t=this,e=t.$el,r=t.model,o=t.pfx,a=r.isOpen();e[a?"addClass":"removeClass"]("".concat(o,"open")),this.getPropertiesEl().style.display=a?"":"none"},n.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},n.prototype.getPropertiesEl=function(){var t=this,e=t.$el,r=t.pfx;return e.find(".".concat(r,"properties")).get(0)},n.prototype.toggle=function(){var t=this.model;t.setOpen(!t.get("open"))},n.prototype.renderProperties=function(){var t=this,e=t.model,r=t.config,o=e.get("properties");if(o){var a=new G1({collection:o,config:r});this.$el.append(a.render().el)}},n.prototype.render=function(){var t=this,e=t.pfx,r=t.model,o=t.$el,a=r.getId(),s=r.getName();return o.html(this.template({pfx:e,label:s})),this.renderProperties(),o.attr("class","".concat(e,"sector ").concat(e,"sector__").concat(a," no-select")),this.updateOpen(),this},n}(ye.Ss);const pZ=hZ;var QA,vZ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gZ=function(i){vZ(n,i);function n(t){t===void 0&&(t={});var e=i.call(this,t)||this,r=t.module,o=t.config,a=e.collection;return e.pfx=(o==null?void 0:o.stylePrefix)||"",e.ppfx=(o==null?void 0:o.pStylePrefix)||"",e.config=o,e.module=r,e.listenTo(a,"add",e.addTo),e.listenTo(a,"reset",e.render),e}return n.prototype.remove=function(){var t=this;return ye.Ss.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(e){return t[e]={}}),this},n.prototype.addTo=function(t,e,r){r===void 0&&(r={}),this.addToCollection(t,null,r)},n.prototype.addToCollection=function(t,e,r){r===void 0&&(r={});var o=this,a=o.config,s=o.el,u=e||s,c=new pZ({model:t,config:a}).render().el;return(0,Ce.Sc)(u,c,r.at),c},n.prototype.render=function(){var t=this,e=this,r=e.$el,o=e.pfx,a=e.ppfx;r.empty();var s=document.createDocumentFragment();return this.collection.each(function(u){return t.addToCollection(u,s)}),r.append(s),r.addClass("".concat(o,"sectors ").concat(a,"one-bg ").concat(a,"two-color")),this},n}(ye.Ss);const mZ=gZ;var yZ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rc=function(){return rc=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},rc.apply(this,arguments)},tk=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},ek=function(i){return i||i===0},bZ=function(i){yZ(n,i);function n(t){var e=i.call(this,t,"StyleManager",new cZ([],{em:t}),vb,QX())||this;e.events=vb,e.Sector=JP,e.storageKey="",(0,J.bindAll)(e,"__clearStateTarget");var r=e.events,o=e.config,a=o.pStylePrefix;a&&(o.stylePrefix=a+o.stylePrefix),e.builtIn=new rZ,e.properties=new Y1([],{em:t,module:e}),e.sectors=e.all;var s=new ye.Kx({targets:[]});e.model=s;var u=In.I.update,c="component:toggled ".concat(u,":classes change:state change:device frame:resized selector:type");e.upAll=(0,J.debounce)(function(){return e.__upSel()},0),s.listenTo(t,c,e.upAll),s.listenTo(t,"component:toggled",e.__clearStateTarget);var h=(0,J.debounce)(function(){e.__upProps(),e.__trgCustom()},0);s.listenTo(t,"styleable:change undo redo",h);var v=(0,J.debounce)(function(){return e.__trgCustom()},0);return s.listenTo(t,"".concat(r.layerSelect," ").concat(r.target),v),s.on("change:lastTarget",function(){return t.trigger(r.target,e.getSelected())}),e}return n.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},n.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},n.prototype.__trgEv=function(t){for(var e,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];(e=this.em).trigger.apply(e,tk([t],r,!1))},n.prototype.__clearStateTarget=function(){var t=this,e=this.em,r=this.__getStateTarget();r&&(e==null||e.skip(function(){e.Css.remove(r),t.model.set({stateTarget:null})}))},n.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},n.prototype.postRender=function(){this.__appendTo()},n.prototype.addSector=function(t,e,r){r===void 0&&(r={});var o=this.getSector(t);return o||(e.id=t,o=this.sectors.add(e,r)),o},n.prototype.getSector=function(t,e){e===void 0&&(e={});var r=this.sectors.where({id:t})[0];return!r&&e.warn&&this._logNoSector(t),r||null},n.prototype.getSectors=function(t){t===void 0&&(t={});var e=this.sectors,r=e&&e.models?t.array?tk([],e.models,!0):e:[];return t.visible?r.filter(function(o){return o.isVisible()}):r},n.prototype.removeSector=function(t){return this.getSectors().remove(this.getSector(t,{warn:!0}))},n.prototype.addProperty=function(t,e,r){r===void 0&&(r={});var o=this.getSector(t,{warn:!0}),a;return o&&(a=o.addProperty(e,r)),a},n.prototype.getProperty=function(t,e){var r=this.getSector(t,{warn:!0}),o;return r&&(o=r.properties.filter(function(a){return a.get("property")===e||a.get("id")===e})[0]),o},n.prototype.getProperties=function(t){var e,r=this.getSector(t,{warn:!0});return r&&(e=r.properties),e},n.prototype.removeProperty=function(t,e){var r=this.getProperties(t);return r?r.remove(this.getProperty(t,e)):null},n.prototype.select=function(t,e){var r=this;e===void 0&&(e={});var o=this.em,a=(0,J.isArray)(t)?t:[t],s=e.stylable,u=o.Css,c=[];a.filter(Boolean).forEach(function(C){var E=C;if((0,J.isString)(C)){var D=u.getRule(C)||u.setRule(C);!(0,J.isUndefined)(s)&&D.set({stylable:s}),E=D}c.push(E)});var h=e.component||c.filter(function(C){return(0,Zt.isComponent)(C)}).reverse()[0];c=c.map(function(C){return r.getModelToStyle(C)});var v=o.getState(),m=c.slice().reverse()[0],y=this.getParentRules(m,{state:v,component:h}),_=this.__getStateTarget();return o.skip(function(){var C;if(v&&(!((C=m==null?void 0:m.getState)===null||C===void 0)&&C.call(m))){var E=m.getStyle();_?_.setStyle(E):_=u.getAll().add({selectors:"gjs-selected",style:E,shallow:!0,important:!0})}else _&&(u.remove(_),_=void 0)}),this.model.set({targets:c,lastTarget:m,lastTargetParents:y,stateTarget:_,component:h}),this.__upProps(e),c},n.prototype.getSelected=function(){return this.model.get("lastTarget")},n.prototype.getSelectedAll=function(){return this.model.get("targets")},n.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},n.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},n.prototype.addStyleTargets=function(t,e){this.getSelectedAll().map(function(a){return a.addStyle(t,e)});var r=this.getSelected();r&&this.__emitCmpStyleUpdate(t);var o=this.__getStateTarget();r&&(o==null||o.setStyle(r.getStyle(),e))},n.prototype.getBuiltIn=function(t){return this.builtIn.get(t)},n.prototype.getBuiltInAll=function(){return this.builtIn.props},n.prototype.addBuiltIn=function(t,e){return this.builtIn.add(t,e)},n.prototype.getModelToStyle=function(t,e){e===void 0&&(e={});var r=this.em,o=e.skipAdd;if(r&&(t!=null&&t.toHTML)){var a=r.getConfig(),s=r.UndoManager,u=r.Css,c=r.Selectors,h=c?c.getConfig():{},v=a.devicePreviewMode?"":r.get("state"),m=t.get("classes"),y=m.getStyleable(),_=y.length,C=!h.componentFirst||e.useClasses,E={noCount:1},D={state:v,addOpts:E};s.skip(function(){var F;if(_&&C){var V=r.getCurrentMedia();F=u.get(y,v,V),!F&&!o&&(F=u.add(y,v,V,{},E))}else if(a.avoidInlineStyle){var K=t.getId();F=u.getIdRule(K,D),!F&&!o&&(F=u.setIdRule(K,{},D)),t.is("wrapper")&&F.set("wrapper",1,E)}F&&(t=F)})}return t},n.prototype.getParentRules=function(t,e){var r=e===void 0?{}:e,o=r.state,a=r.component,s=this.em,u=[];if(s&&t){var c=a,h=s.Css,v=s.CodeManager.getGenerator("css"),m=t.toHTML?t:t.getComponent(),y={array:!0},_=[],C=[],E=[],D=[],F=[],V=function(st){return st.length?h.getRules().filter(function(et){var nt=et.getSelectors().map(function(it){return it.getFullName()});return nt.length===0?!1:nt.every(function(it){return st.indexOf(it)>=0})}):[]},K=function(st){return st?h.getRules().filter(function(et){return et.selectorsToString()===st}):[]};if(m)_=h.getRules("#".concat(m.getId())),C=K(m.get("tagName")),D=c?V(c.getSelectors().getFullName(y)):[],F=D.concat(C).concat(_);else{_=c?h.getRules("#".concat(c.getId())):[],C=K((c==null?void 0:c.get("tagName"))||"");var Z=(c==null?void 0:c.getSelectors().getFullName(y))||[],ct=Z.filter(function(st){return t.getSelectors().getFullName(y).findIndex(function(et){return et===st})===-1});E=V(ct.concat(t.getSelectors().getFullName(y))),F=C.concat(_).concat(E)}var ht=F.filter(function(st){return(0,J.isUndefined)(o)?1:st.get("state")===o}).sort(v.sortRules).reverse();u=ht.slice(ht.indexOf(t)+1)}return u},n.prototype.addType=function(t,e){this.properties.addType(t,e)},n.prototype.getType=function(t){return this.properties.getType(t)},n.prototype.getTypes=function(){return this.properties.getTypes()},n.prototype.createType=function(t,e){var r=e===void 0?{}:e,o=r.model,a=o===void 0?{}:o,s=r.view,u=s===void 0?{}:s,c=this.config,h=this.getType(t);if(h)return new h.view(rc({model:new h.model(a),config:c},u))},n.prototype.render=function(){var t=this,e=t.config,r=t.em,o=t.SectView,a=o&&o.el;return this.SectView=new mZ({el:a,em:r,config:e,module:this,collection:this.sectors}),this.SectView.render().el},n.prototype._logNoSector=function(t){var e=this.em;e&&e.logWarning("'".concat(t,"' sector not found"))},n.prototype.__emitCmpStyleUpdate=function(t,e){e===void 0&&(e={});var r=this.em;if(!t.__p){var o=this.getSelectedAll(),a=e.components||r.getSelectedAll(),s=Array.isArray(a)?a:[a],u=rc({},t);delete u.__p,s.forEach(function(c){return!o.includes(c)&&c.__onStyleChange(u)})}},n.prototype.__upProps=function(t){var e=this;t===void 0&&(t={});var r=this.getSelected();if(r){var o=this.sectors,a=this.model.get("component"),s=this.getSelectedParents(),u=r.getStyle(),c=s.map(function(h){return{target:h,style:h.getStyle()}});o.map(function(h){h.getProperties().map(function(v){e.__upProp(v,u,c,t)})}),o.forEach(function(h){var v=h.getProperties();v.forEach(function(y){var _=y.__checkVisibility({target:r,sector:h,component:a,sectors:o.models});y.set("visible",_)});var m=v.some(function(y){return y.isVisible()});h.set("visible",m)})}},n.prototype.__upProp=function(t,e,r,o){var a=this,s=t.getName(),u=e[s],c=ek(u),h=t.getType()==="stack",v=t.getType()==="composite",m=rc(rc({},o),{__up:!0}),y=!v&&!h,_=t,C=t,E=h?_.__getLayersFromStyle(e):[],D=v?C.__getPropsFromStyle(e):{},F=c?u:null,V=null;if(h&&E===null||v&&D===null){var K=h?"__getLayersFromStyle":"__getPropsFromStyle",Z=r.filter(function(nt){return _[K](nt.style)!==null})[0];if(Z){F=Z.style[s],V=Z.target;var ct=_[K](Z.style);h?E=ct:D=ct}}else if(!c){F=null;var Z=r.filter(function(it){return ek(it.style[s])})[0];Z&&(F=Z.style[s],V=Z.target)}if(t.__setParentTarget(V),y&&t.__getFullValue()!==F&&t.upValue(F,m),h&&_.__setLayers(E||[],{isEmptyValue:_.isEmptyValueStyle(e)}),v){var ht=C.getProperties();if(C.isDetached()){var st=C.__getPropsFromStyle(e,{byName:!0})||{},et=r.map(function(nt){return rc(rc({},nt),{style:C.__getPropsFromStyle(nt.style,{byName:!0})||{}})});ht.map(function(nt){return a.__upProp(nt,st,et,o)})}else C.__setProperties(D||{},m),C.getProperties().map(function(nt){return nt.__setParentTarget(V)})}},n.prototype.destroy=function(){var t;[this.properties,this.sectors].forEach(function(e){e.reset(),e.stopListening()}),(t=this.SectView)===null||t===void 0||t.remove(),this.model.stopListening(),this.upAll.cancel()},n}(lu);const wZ=bZ;var xZ=function(){return{autoloadProviders:!1}};const SZ=xZ;var j_;(function(i){i.currentIndex="currentIndex",i.startIndex="startIndex",i.currentItem="currentItem",i.currentKey="currentKey",i.endIndex="endIndex",i.collectionId="collectionId",i.totalItems="totalItems",i.remainingItems="remainingItems"})(j_||(j_={}));var _Z=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gb=function(){return gb=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},gb.apply(this,arguments)},CZ=function(i){_Z(n,i);function n(t,e){var r=i.call(this,t,e)||this;return r.em=e,r.model=function(o,a){return a===void 0&&(a={}),new XD(o,gb(gb({},a),{em:e}))},r}return n}(ye.pM);const TZ=CZ;var EZ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Eh=function(){return Eh=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Eh.apply(this,arguments)},OZ=function(i,n,t,e){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(h){try{c(e.next(h))}catch(v){a(v)}}function u(h){try{c(e.throw(h))}catch(v){a(v)}}function c(h){h.done?o(h.value):r(h.value).then(s,u)}c((e=e.apply(i,n||[])).next())})},AZ=function(i,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(h){return u([c,h])}}function u(c){if(e)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(e=1,r&&(o=c[0]&2?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=n.call(i,t)}catch(h){c=[6,h],r=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},kZ=function(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(i);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]]);return t},MZ=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},DZ=function(i){EZ(n,i);function n(t){var e=i.call(this,t,"DataSources",new TZ([],t),nu,SZ())||this;return e.storageKey="dataSources",e.events=nu,e.dataComponentTypes=Zr,e.dataCollectionKeys=pg,e.dataCollectionStateTypes=j_,e.dataOperationTypes={any:vg,boolean:Ef,number:gl,string:Qa},Object.assign(e,j1.Events),e}return n.prototype.destroy=function(){},n.prototype.add=function(t,e){e===void 0&&(e={});var r=this.all;return t.id=t.id||this._createId(),r.add(t,e)},n.prototype.get=function(t){return this.all.get(t)},n.prototype.getAll=function(){return MZ([],this.all.models,!0)},n.prototype.getValue=function(t,e,r){return(0,Zt.get)((r==null?void 0:r.context)||this.getContext(),t,e)},n.prototype.setValue=function(t,e){var r=this.fromPath(t);r[0];var o=r[1],a=r[2];if(o&&(a||a==="")){var s=Eh({},o.attributes);if((0,Zt.set)(s,a||"",e))return o.set(s),!0}return!1},n.prototype.getContext=function(){return this.all.reduce(function(t,e){return t[e.id]=e.records.reduce(function(r,o,a){var s=o,u=Eh({},s.attributes);return delete u.__p,r[s.id||a]=u,r},{}),t},{})},n.prototype.remove=function(t,e){return this.__remove(t,e)},n.prototype.fromPath=function(t){var e=[],r=(0,Zt.stringToPath)(t||""),o=r[0],a=r[1],s=r.slice(2),u=this.get(o),c=u==null?void 0:u.records.get(a);return u&&e.push(u),c&&(e.push(c),s.length&&e.push(s.join("."))),e},n.prototype.store=function(){var t,e=[];return this.all.forEach(function(r){var o=r.attributes,a=o.skipFromStorage;o.transformers;var s=o.records,u=o.schema,c=kZ(o,["skipFromStorage","transformers","records","schema"]);a||e.push(Eh(Eh({},c),{id:c.id,schema:(0,J.isEmpty)(u)?void 0:u,records:c.provider?void 0:s}))}),t={},t[this.storageKey]=e,t},n.prototype.load=function(t){var e=this,r=this,o=r.config,a=r.all,s=r.events,u=r.em,c=this.loadProjectData(t);if(o.autoloadProviders){var h=a.filter(function(m){return m.hasProvider});if(h.length){var v=function(){return OZ(e,void 0,void 0,function(){var m;return AZ(this,function(y){switch(y.label){case 0:return u.trigger(s.providerLoadAllBefore),m=h.map(function(_){return _.loadProvider()}),[4,Promise.all(m)];case 1:return y.sent(),u.trigger(s.providerLoadAll),[2]}})})};v()}}return c},n.prototype.postLoad=function(){var t=this,e=t.em,r=t.all;e.listenTo(r,ye.e2,function(o,a,s){var u=s||a;e.changesUp(u,{dataSource:o,options:u})}),this.em.UndoManager.add(r)},n}(lu);const ZP=DZ;var PZ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bi=function(){return Bi=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Bi.apply(this,arguments)},sS=function(i,n,t,e){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(h){try{c(e.next(h))}catch(v){a(v)}}function u(h){try{c(e.throw(h))}catch(v){a(v)}}function c(h){h.done?o(h.value):r(h.value).then(s,u)}c((e=e.apply(i,n||[])).next())})},lS=function(i,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(h){return u([c,h])}}function u(c){if(e)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(e=1,r&&(o=c[0]&2?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=n.call(i,t)}catch(h){c=[6,h],r=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},NZ=function(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(i);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]]);return t},RZ=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))};Dz().$=xi.default;var LZ=[pY,RG,DY,zX,UK,mG,wK,wZ,uP,HY,LX,dX,JX,h$,j$,R7,A$,Jq,ZP],jZ=[ZP,oG,Lq,OG,wq,uP];Pz({$:xi.default});var nk={debug:console.log,info:console.info,warning:console.warn,error:console.error},IZ=function(i){PZ(n,i);function n(t){t===void 0&&(t={});var e=i.call(this)||this;e.Model=ye.Kx,e.Collection=ye.pM,e.events=Do,e.__skip=!1,e.defaultRunning=!1,e.loadTriggered=!1,e.destroyed=!1,e._isStoring=!1,e._config=t;var r=e.config;e.set("Config",t),e.set("modules",[]),e.set("toLoad",[]),e.set("storables",[]),e.set("selected",new Lz),e.set("dmode",r.dragMode);var o=r.el,a=r.log,s=a===!0?(0,J.keys)(nk):(0,J.isArray)(a)?a:[];return(0,J.bindAll)(e,"initBaseColorPicker"),o&&r.fromElement&&(r.components=o.innerHTML),e.attrsOrig=o?(0,J.toArray)(o.attributes).reduce(function(u,c){return u[c.nodeName]=c.nodeValue,u},{}):"",r.components&&!r.pageManager&&(r.pageManager={pages:[{component:r.components}]}),LZ.forEach(function(u){return e.loadModule(u)}),jZ.forEach(function(u){return e.loadStorableModule(u)}),e.on("change:componentHovered",e.componentHovered,e),e.on("change:changesCount",e.updateChanges,e),e.on("change:readyLoad change:readyCanvas",e._checkReady,e),s.forEach(function(u){return e.listenLog(u)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(u){var c=u.from,h=u.to;e.listenTo(e,c,function(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];e.trigger.apply(e,RZ([h],v,!1)),e.logWarning("The event '".concat(c,"' is deprecated, replace it with '").concat(h,"'"))})}),e}return n.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(n.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"DataSources",{get:function(){return this.get("DataSources")},enumerable:!1,configurable:!0}),n.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},n.prototype.getContainer=function(){return this.config.el},n.prototype.listenLog=function(t){var e=this;this.listenTo(this,"log:".concat(t),function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(e.config.log){var a=nk[t];a==null||a.apply(void 0,r)}})},Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"version",{get:function(){var t;return((t=this.config.grapesjs)===null||t===void 0?void 0:t.version)||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isHeadless",{get:function(){return!!this.config.headless},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isShallow",{get:function(){return!!this.get("isShallow")},enumerable:!1,configurable:!0}),n.prototype.initModules=function(){this.modules.forEach(function(t){return t.onInit()})},n.prototype.getConfig=function(t){var e=this.config;return(0,J.isUndefined)(t)?e:e[t]},n.prototype.loadOnStart=function(){var t=this,e=this.config,r=e.projectData,o=e.headless,a={initial:!0},s=this.Storage;this.toLoad.reverse().forEach(function(h){return h.onLoad()});var u=function(){t.modules.forEach(function(h){return h.postLoad&&h.postLoad(t)}),t.set("readyLoad",1)};o?(r&&this.loadData(r,a),u()):this._storageTimeout=setTimeout(function(){return sS(t,void 0,void 0,function(){var h;return lS(this,function(v){switch(v.label){case 0:return r?(this.loadData(r,a),[3,5]):[3,1];case 1:if(!(s!=null&&s.canAutoload()))return[3,5];v.label=2;case 2:return v.trys.push([2,4,,5]),[4,this.load({},a)];case 3:return v.sent(),[3,5];case 4:return h=v.sent(),this.logError(h),[3,5];case 5:return u(),[2]}})})});var c=new n({noticeOnUnload:!1,storageManager:!1,undoManager:!1});c.set({isShallow:!0}),c.Pages.onLoad(),c.Canvas.postLoad(),this.set("shallow",c)},n.prototype.updateChanges=function(t,e,r){var o=this,a=this.Storage,s=this.getDirtyCount();r.isClear||(this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return o.trigger(Do.update)})),this.config.noticeOnUnload&&(window.onbeforeunload=s?function(){return!0}:null),a.isAutosave()&&s>=a.getStepsBeforeSave()&&this.store().catch(function(u){return o.logError(u)})},n.prototype.loadModule=function(t){var e=new t(this);return this.set(e.name,e),e.onLoad&&this.toLoad.push(e),this.modules.push(e),e},n.prototype.loadStorableModule=function(t){var e=this.loadModule(t);return this.storables.push(e),e},n.prototype.init=function(t,e){e===void 0&&(e={}),this.destroyed&&(this.initialize(e),this.destroyed=!1),this.set("Editor",t)},n.prototype.getEditor=function(){return this.get("Editor")},n.prototype.handleUpdates=function(t,e){var r=this;t===void 0&&(t={}),!(this.__skip||!this.loadTriggered||t.temporary||t.noCount||t.avoidStore||t.partial)&&(this.trigger(this.events.updateBefore,e),this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var o=r.getDirtyCount()||0;t.unset;var a=NZ(t,["unset"]);r.set("changesCount",o+1,a)},0))},n.prototype.changesUp=function(t,e){this.handleUpdates(t,e)},n.prototype.componentHovered=function(t,e,r){var o=this.previous("componentHovered");o&&this.trigger("component:unhovered",o,r),e&&this.trigger("component:hovered",e,r)},n.prototype.getSelected=function(){return this.selected.lastComponent()},n.prototype.getSelectedAll=function(){return this.selected.allComponents()},n.prototype.setSelected=function(t,e){var r=this;e===void 0&&(e={});var o=e.event,a=o&&(o.ctrlKey||o.metaKey),s=(o||{}).shiftKey,u=((0,J.isArray)(t)?t:[t]).map(function(m){var y,_;return((_=(y=m==null?void 0:m.delegate)===null||y===void 0?void 0:y.select)===null||_===void 0?void 0:_.call(y,m))||m}).filter(Boolean),c=this.getSelectedAll(),h=this.getConfig().multipleSelection,v=(0,J.isArray)(t);(v||!t)&&this.removeSelected(c.filter(function(m){return!(0,J.contains)(u,m)})),u.forEach(function(m){if(m&&(r.trigger(In.I.selectBefore,m,e),!m.get("selectable")||e.abort))if(e.useValid){for(var y=m.parent();y&&!y.get("selectable");)y=y.parent();m=y}else return;if(a&&h)return r.toggleSelected(m);if(s&&h){if(r.isEditing())return;r.clearSelection(r.Canvas.getWindow());var _=m.collection,C=m.index(),E,D;if(r.getSelectedAll().forEach(function(F){var V=F.collection,K=F.index();V===_&&(K<C?E=(0,J.isUndefined)(E)?K:Math.max(E,K):K>C&&(D=(0,J.isUndefined)(D)?K:Math.min(D,K)))}),!(0,J.isUndefined)(E))for(;E!==C;)r.addSelected(_.at(E),e),E++;if(!(0,J.isUndefined)(D))for(;D!==C;)r.addSelected(_.at(D),e),D--;return r.addSelected(m,e)}!v&&r.removeSelected(c.filter(function(F){return F!==m})),r.addSelected(m,e)})},n.prototype.addSelected=function(t,e){var r=this;e===void 0&&(e={});var o=(0,J.isArray)(t)?t:[t];o.forEach(function(a){var s=r.selected;if(!(!a||!a.get("selectable")||a.parents().some(function(h){return s.hasComponent(h)}))){e.forceChange&&r.removeSelected(a,e);var u=s.allComponents().filter(function(h){return(0,J.contains)(h.parents(),a)});if(u.forEach(function(h){return r.removeSelected(h,e)}),s.addComponent(a,e),r.trigger(In.I.select,a,e),r.Canvas.addSpot({type:rs.F.Select,component:a}),e.activate){var c=a.getView();c!=null&&c.rendered?c.onActive(e.event):a.once(In.I.render,function(h){var v=h.view;return v.onActive(e.event)})}}})},n.prototype.removeSelected=function(t,e){var r=this;e===void 0&&(e={}),this.selected.removeComponent(t,e);var o=(0,J.isArray)(t)?t:[t];o.forEach(function(a){return r.Canvas.removeSpots({type:rs.F.Select,component:a})})},n.prototype.toggleSelected=function(t,e){var r=this;e===void 0&&(e={});var o=(0,J.isArray)(t)?t:[t];o.forEach(function(a){r.selected.hasComponent(a)?r.removeSelected(a,e):r.addSelected(a,e)})},n.prototype.setHovered=function(t,e){var r=this;e===void 0&&(e={});var o=function(u,c){var h=r,v=h.config,m=h.Canvas,y=r.getHovered(),_=r.getSelectedAll(),C=rs.F.Hover,E=rs.F.Spacing;r.set("componentHovered",u||null,c),y&&(m.removeSpots({type:C,component:y}),m.removeSpots({type:E,component:y})),u&&(m.addSpot({type:C,component:u}),(!_.includes(u)||v.showOffsetsSelected)&&m.addSpot({type:E,component:u}))};if(!t)return o();var a="component:hover";if(e.forceChange&&o(),this.trigger("".concat(a,":before"),t,e),!t.get("hoverable"))if(e.useValid&&!e.abort){for(var s=t.parent();s&&!s.get("hoverable");)s=s.parent();t=s}else return;e.abort||(o(t,e),this.trigger(a,t,e))},n.prototype.getHovered=function(){return this.get("componentHovered")},n.prototype.setComponents=function(t,e){return e===void 0&&(e={}),this.Components.setComponents(t,e)},n.prototype.getComponents=function(){var t=this.Components,e=this.CodeManager;if(!(!t||!e)){var r=t.getComponents();return e.getCode(r,"json")}},n.prototype.setStyle=function(t,e){e===void 0&&(e={});var r=this.Css;return r.clear(e),r.getAll().add(t,e),this},n.prototype.addStyle=function(t,e){e===void 0&&(e={});var r=this.getStyle().add(t,e);return(0,J.isArray)(r)?r:[r]},n.prototype.getStyle=function(){return this.Css.getAll()},n.prototype.setState=function(t){return this.set("state",t),this},n.prototype.getState=function(){return this.get("state")||""},n.prototype.getHtml=function(t){t===void 0&&(t={});var e=this.config,r=e.optsHtml,o=e.jsInHtml?this.getJs(t):"",a=t.component||this.Components.getComponent(),s=a?this.CodeManager.getCode(a,"html",Bi(Bi({},r),t)):"";return s+=o?"<script>".concat(o,"<\/script>"):"",s},n.prototype.getCss=function(t){t===void 0&&(t={});var e=this.config,r=e.optsCss,o=t.avoidProtected,a=(0,J.isUndefined)(t.keepUnusedStyles)?e.keepUnusedStyles:t.keepUnusedStyles,s=this.Css,u=t.component||this.Components.getComponent(),c=o?"":e.protectedCss||"",h=u&&this.CodeManager.getCode(u,"css",Bi(Bi({cssc:s,keepUnusedStyles:a},r),t));return u?t.json?h:c+h:""},n.prototype.getJs=function(t){t===void 0&&(t={});var e=t.component||this.Components.getWrapper();return e?this.CodeManager.getCode(e,"js").trim():""},n.prototype.store=function(t){return sS(this,void 0,void 0,function(){var e,r=this;return lS(this,function(o){switch(o.label){case 0:return this._isStoring?[2]:(this._isStoring=!0,setTimeout(function(){r.clearDirtyCount()},1),e=this.storeData(),[4,this.Storage.store(e,t)]);case 1:return o.sent(),setTimeout(function(){r._isStoring=!1},1),[2,e]}})})},n.prototype.load=function(t){return sS(this,arguments,void 0,function(e,r){var o;return r===void 0&&(r={}),lS(this,function(a){switch(a.label){case 0:return[4,this.Storage.load(e)];case 1:return o=a.sent(),this.loadData(o,r),[4,(0,Zt.wait)()];case 2:return a.sent(),r.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,o]}})})},n.prototype.storeData=function(){var t={},e=this.getEditing();e&&e.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(o){t=Bi(Bi({},t),o.store(1))});var r=JSON.parse(JSON.stringify(t));return this.trigger(Do.projectGet,{project:r}),r},n.prototype.loadData=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r={project:t,options:e,initial:!!e.initial},o=!1;return(0,Zt.isEmptyObj)(t)||(this.storables.forEach(function(a){return a.clear()}),this.storables.forEach(function(a){return a.load(t)}),o=!0),this.trigger(Do.projectLoad,Bi(Bi({},r),{loaded:o})),o&&this.trigger(Do.projectLoaded,r),t},n.prototype.getDeviceModel=function(){var t=this.get("device");return this.Devices.get(t)},n.prototype.runDefault=function(t){t===void 0&&(t={});var e=this.Commands.get(this.config.defaultCommand);!e||this.defaultRunning||(e.stop(this,this,t),e.run(this,this,t),this.defaultRunning=!0)},n.prototype.stopDefault=function(t){t===void 0&&(t={});var e=this.Commands;if(e){var r=e.get(this.config.defaultCommand);!r||!this.defaultRunning||(r.stop(this,this,t),this.defaultRunning=!1)}},n.prototype.refreshCanvas=function(t){t===void 0&&(t={}),this.Canvas.refresh({spots:t.tools})},n.prototype.clearSelection=function(t){var e,r=t||window;(e=r.getSelection())===null||e===void 0||e.removeAllRanges()},n.prototype.getCurrentMedia=function(){var t=this.config,e=this.getDeviceModel(),r=t.mediaCondition,o=t.devicePreviewMode,a=e&&e.get("widthMedia");return e&&a&&!o?"(".concat(r,": ").concat(a,")"):""},n.prototype.getWrapper=function(){return this.Components.getWrapper()},n.prototype.setCurrentFrame=function(t){return this.set("currentFrame",t)},n.prototype.getCurrentFrame=function(){return this.get("currentFrame")},n.prototype.getCurrentFrameModel=function(){var t;return(t=this.getCurrentFrame()||{})===null||t===void 0?void 0:t.model},n.prototype.getIcon=function(t){var e=this.config.icons||{};return e[t]||""},n.prototype.getDirtyCount=function(){return this.get("changesCount")},n.prototype.clearDirtyCount=function(){return this.set({changesCount:0},{isClear:!0})},n.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},n.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},n.prototype.setDragMode=function(t){return this.set("dmode",t)},n.prototype.getDragMode=function(t){var e=(t==null?void 0:t.getDragMode())||this.get("dmode");return e||""},n.prototype.t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.get("I18n");return r==null?void 0:r.t.apply(r,t)},n.prototype.inAbsoluteMode=function(t){return this.getDragMode(t)==="absolute"},n.prototype.destroyAll=function(){var t=this,e=this,r=e.config,o=e.view;this.trigger(Do.destroy);var a=this.getEditor(),s=(r.grapesjs||{}).editors,u=s===void 0?[]:s,c=this.get("shallow");this._storageTimeout&&clearTimeout(this._storageTimeout),c==null||c.destroyAll(),this.stopListening(),this.stopDefault(),(this.modules||[]).slice().reverse().forEach(function(h){return h.destroy()}),o!=null&&o.remove&&o.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(h){return t[h]={}}),u.splice(u.indexOf(a),1),(0,Zt.hasWin)()&&(0,xi.default)(r.el).empty().attr(this.attrsOrig),this.trigger(Do.destroyed)},n.prototype.getEditing=function(){var t=this.get("editing");return t&&t.model||void 0},n.prototype.setEditing=function(t){return this.set("editing",t),this},n.prototype.isEditing=function(){return!!this.get("editing")},n.prototype.log=function(t,e){e===void 0&&(e={});var r=Do.log,o=e.ns,a=e.level,s=a===void 0?"debug":a;if(this.trigger(r,t,e),s&&this.trigger("".concat(r,":").concat(s),t,e),o){var u="".concat(r,"-").concat(o);this.trigger(u,t,e),s&&this.trigger("".concat(u,":").concat(s),t,e)}},n.prototype.logInfo=function(t,e){this.log(t,Bi(Bi({},e),{level:"info"}))},n.prototype.logWarning=function(t,e){this.log(t,Bi(Bi({},e),{level:"warning"}))},n.prototype.logError=function(t,e){this.log(t,Bi(Bi({},e),{level:"error"}))},n.prototype.initBaseColorPicker=function(t,e){e===void 0&&(e={});var r=this.config,o=r.colorPicker,a=o===void 0?{}:o,s=r.el,u=r.stylePrefix;return(0,xi.default)(t).spectrum(Bi(Bi({containerClassName:"".concat(u,"one-bg ").concat(u,"two-color"),appendTo:s||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:""},e),a))},n.prototype.skip=function(t){this.__skip=!0;var e=this.UndoManager;e?e.skip(t):t(),this.__skip=!1},n.prototype.data=function(t,e,r){var o="_gjs-data";if(t[o]||(t[o]={}),(0,J.isUndefined)(r))return t[o][e];t[o][e]=r},n}(ye.Kx);const BZ=IZ;function UZ(){return window.location.hostname}var VZ=function(){var i=function(n,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},i(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),FZ=function(i,n,t,e){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(h){try{c(e.next(h))}catch(v){a(v)}}function u(h){try{c(e.throw(h))}catch(v){a(v)}}function c(h){h.done?o(h.value):r(h.value).then(s,u)}c((e=e.apply(i,n||[])).next())})},HZ=function(i,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(h){return u([c,h])}}function u(c){if(e)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(e=1,r&&(o=c[0]&2?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=n.call(i,t)}catch(h){c=[6,h],r=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},zZ=function(i){VZ(n,i);function n(t){var e=i.call(this,{model:t})||this,r=t.Panels,o=t.UndoManager;return t.view=e,t.once("change:ready",function(){r.active(),r.disableButtons(),t.getConfig().telemetry&&e.sendTelemetryData().catch(function(){}),setTimeout(function(){t.trigger(Do.load,t.Editor),t.loadTriggered=!0,o.clear(),t.clearDirtyCount()})}),e}return n.prototype.render=function(){var t=this,e=this,r=e.$el,o=e.model,a=o.Panels,s=o.Canvas,u=o.config,c=o.modules,h=u.stylePrefix,v=["".concat(h,"editor")];!u.customUI&&v.push("".concat(h,"one-bg ").concat(h,"two-color"));var m=(0,xi.default)(u.el||"body ".concat(u.container));u.cssIcons&&(0,Zt.appendStyles)(u.cssIcons,{unique:!0,prepand:!0}),r.empty(),u.width&&m.css("width",u.width),u.height&&m.css("height",u.height),r.append(s.render()),r.append(a.render());var y=o.shallow,_=y.Canvas.render();return _.style.display="none",r.append(_),r.attr("class",v.join(" ")),m.addClass("".concat(h,"editor-cont")).empty().append(r),c.forEach(function(C){var E;return(E=C.postRender)===null||E===void 0?void 0:E.call(C,t)}),this},n.prototype.sendTelemetryData=function(){return FZ(this,void 0,void 0,function(){var t,e,r,o,a,s,u,c;return HZ(this,function(h){switch(h.label){case 0:return t=UZ(),t==="localhost"||t.includes("localhost")?[2]:(e="gjs_telemetry_sent_",r=this.model.version,o="".concat(e).concat(r),sessionStorage.getItem(o)?[2]:(a="https://app.grapesjs.com",[4,fetch("".concat(a,"/api/gjs/telemetry/collect"),{method:"POST",body:JSON.stringify({domain:t,version:r})})]));case 1:return s=h.sent(),s.ok?[3,3]:(u=Error.bind,c="Failed to send telemetry data ".concat,[4,s.text()]);case 2:throw new(u.apply(Error,[void 0,c.apply("Failed to send telemetry data ",[h.sent()])]));case 3:return sessionStorage.setItem(o,"true"),Object.keys(sessionStorage).forEach(function(v){v.startsWith(e)&&v!==o&&sessionStorage.removeItem(v)}),this.trigger(Do.telemetryInit),[2]}})})},n}(ye.Ss);const WZ=zZ;var Zv=function(){return Zv=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Zv.apply(this,arguments)},rk=function(i,n,t,e){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(h){try{c(e.next(h))}catch(v){a(v)}}function u(h){try{c(e.throw(h))}catch(v){a(v)}}function c(h){h.done?o(h.value):r(h.value).then(s,u)}c((e=e.apply(i,n||[])).next())})},ik=function(i,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(h){return u([c,h])}}function u(c){if(e)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(e=1,r&&(o=c[0]&2?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=n.call(i,t)}catch(h){c=[6,h],r=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},qZ=function(i,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return i.concat(o||Array.prototype.slice.call(n))},KZ=function(){function i(n,t){n===void 0&&(n={}),t===void 0&&(t={});var e;this.events=Do,this.html=sa;var r=Mz();this.config=Zv(Zv(Zv({},r),n),{pStylePrefix:(e=n.stylePrefix)!==null&&e!==void 0?e:r.stylePrefix}),this.em=new BZ(this.config),this.$=t.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(i.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"DataSources",{get:function(){return this.em.DataSources},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),i.prototype.getConfig=function(n){return this.em.getConfig(n)},i.prototype.getHtml=function(n){return this.em.getHtml(n)},i.prototype.getCss=function(n){return this.em.getCss(n)},i.prototype.getJs=function(n){return this.em.getJs(n)},i.prototype.getComponents=function(){return this.Components.getComponents()},i.prototype.getWrapper=function(){return this.Components.getWrapper()},i.prototype.setComponents=function(n,t){return t===void 0&&(t={}),this.em.setComponents(n,t),this},i.prototype.addComponents=function(n,t){return this.getWrapper().append(n,t)},i.prototype.getStyle=function(){return this.em.Css.getAll()},i.prototype.setStyle=function(n,t){return t===void 0&&(t={}),this.em.setStyle(n,t),this},i.prototype.addStyle=function(n,t){return t===void 0&&(t={}),this.em.addStyle(n,t)},i.prototype.getSelected=function(){return this.em.getSelected()},i.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},i.prototype.getSelectedToStyle=function(){var n=this.em.getSelected();if(n)return this.StyleManager.getModelToStyle(n)},i.prototype.select=function(n,t){return this.em.setSelected(n,t),this},i.prototype.selectAdd=function(n){return this.em.addSelected(n),this},i.prototype.selectRemove=function(n){return this.em.removeSelected(n),this},i.prototype.selectToggle=function(n){return this.em.toggleSelected(n),this},i.prototype.getEditing=function(){return this.em.getEditing()},i.prototype.setDevice=function(n){return this.em.set("device",n),this},i.prototype.getDevice=function(){return this.em.get("device")},i.prototype.runCommand=function(n,t){return t===void 0&&(t={}),this.Commands.run(n,t)},i.prototype.stopCommand=function(n,t){return t===void 0&&(t={}),this.Commands.stop(n,t)},i.prototype.store=function(n){return rk(this,void 0,void 0,function(){return ik(this,function(t){switch(t.label){case 0:return[4,this.em.store(n)];case 1:return[2,t.sent()]}})})},i.prototype.load=function(n){return rk(this,arguments,void 0,function(t,e){return e===void 0&&(e={}),ik(this,function(r){switch(r.label){case 0:return[4,this.em.load(t,e)];case 1:return[2,r.sent()]}})})},i.prototype.getProjectData=function(){return this.em.storeData()},i.prototype.loadProjectData=function(n,t){return t===void 0&&(t={}),this.em.loadData(n,t)},i.prototype.storeData=function(){return this.em.storeData()},i.prototype.loadData=function(n){return this.em.loadData(n)},i.prototype.getContainer=function(){return this.config.el},i.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},i.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},i.prototype.refresh=function(n){this.em.refreshCanvas(n)},i.prototype.setCustomRte=function(n){this.RichTextEditor.customRte=n},i.prototype.setCustomParserCss=function(n){return this.Parser.getConfig().parserCss=n,this},i.prototype.setDragMode=function(n){return this.em.setDragMode(n),this},i.prototype.log=function(n,t){return t===void 0&&(t={}),this.em.log(n,t),this},i.prototype.t=function(){for(var n,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(n=this.em).t.apply(n,t)},i.prototype.on=function(n,t){return this.em.on(n,t),this},i.prototype.once=function(n,t){return this.em.once(n,t),this},i.prototype.off=function(n,t){return this.em.off(n,t),this},i.prototype.trigger=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return this.em.trigger.apply(this.em,qZ([n],t,!0)),this},i.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},i.prototype.getEl=function(){var n;return(n=this.editorView)===null||n===void 0?void 0:n.el},i.prototype.getModel=function(){return this.em},i.prototype.render=function(){var n;return(n=this.editorView)===null||n===void 0||n.remove(),this.editorView=new WZ(this.em),this.editorView.render().el},i.prototype.onReady=function(n){this.em.get("ready")?n(this):this.em.on("load",n)},i}();const $Z=KZ;var GZ=function(i,n){var t=n.get(i);if(!t){var e=(0,Zt.getGlobal)()[i];t=(e==null?void 0:e.default)||e}return t},QP=function(i,n){return(0,J.isString)(i)?GZ(i,n):(i==null?void 0:i.default)||i},tN=function(i,n){i.getModel().logWarning("Plugin ".concat(n," not found"),{context:"plugins",plugin:n})},YZ=function(){function i(){this.plugins={}}return i.prototype.add=function(n,t){var e=this.get(n);return e||(this.plugins[n]=t,t)},i.prototype.get=function(n){return this.plugins[n]},i.prototype.getAll=function(){return this.plugins},i}();const XZ=YZ,JZ=function(){var i=function(){for(var t,e=window.navigator.userAgent,r=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],o=0;o<r.length;o++){var a=r[o];if(t=a[1].exec(e),t)break}return!!t};if((0,Zt.hasWin)()&&i()){var n=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(t){return t||(t=""),n.apply(document.implementation,[t])}}};var mb=function(){return mb=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},mb.apply(this,arguments)};JZ();var I_=new XZ,ok=[],eN=function(i,n){var t=QP(i,I_);return function(e){t?t(e,n||{}):tN(e,i)}},nN={$:xi.default,editors:ok,plugins:I_,usePlugin:eN,version:"0.22.14",init:function(i){i===void 0&&(i={});var n=i.headless,t=i.container;if(!t&&!n)throw new Error("'container' is required");var e=mb(mb({autorender:!0,plugins:[],pluginsOpts:{}},i),{grapesjs:this,el:n?void 0:(0,J.isElement)(t)?t:document.querySelector(t)}),r=new $Z(e,{$:xi.default}),o=r.getModel();return o.initModules(),e.plugins.forEach(function(a){var s=QP(a,I_),u=e.pluginsOpts[a]||{};s?s(r,u):tN(r,a)}),o.loadOnStart(),e.autorender&&!n&&r.render(),ok.push(r),r}};const ZZ=nN;var QZ=Ib.Ay;Ib.I0;Ib.nu;var by={exports:{}};/*! grapesjs-preset-webpage - 1.0.3 */var tQ=by.exports,ak;function eQ(){return ak||(ak=1,function(i,n){(function(t,e){i.exports=e()})(typeof globalThis<"u"?globalThis:typeof window<"u"?window:tQ,()=>(()=>{var t={d:(_,C)=>{for(var E in C)t.o(C,E)&&!t.o(_,E)&&Object.defineProperty(_,E,{enumerable:!0,get:C[E]})},o:(_,C)=>Object.prototype.hasOwnProperty.call(_,C),r:_=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>y});var r=function(){return r=Object.assign||function(_){for(var C,E=1,D=arguments.length;E<D;E++)for(var F in C=arguments[E])Object.prototype.hasOwnProperty.call(C,F)&&(_[F]=C[F]);return _},r.apply(this,arguments)},o="gjs-open-import-webpage",a="set-device-desktop",s="set-device-tablet",u="set-device-mobile",c="canvas-clear",h=function(){return h=Object.assign||function(_){for(var C,E=1,D=arguments.length;E<D;E++)for(var F in C=arguments[E])Object.prototype.hasOwnProperty.call(C,F)&&(_[F]=C[F]);return _},h.apply(this,arguments)};const v=function(_,C){var E=_.Commands,D=C.textCleanCanvas;(function(F,V){var K=F.getConfig("stylePrefix"),Z=V.modalImportLabel,ct=V.modalImportContent;F.Commands.add(o,{codeViewer:null,container:null,run:function(ht){var st=typeof ct=="function"?ct(ht):ct,et=this.getCodeViewer();ht.Modal.open({title:V.modalImportTitle,content:this.getContainer()}).onceClose(function(){return ht.stopCommand(o)}),et.setContent(st??""),et.refresh(),setTimeout(function(){return et.focus()},0)},stop:function(){F.Modal.close()},getContainer:function(){if(!this.container){var ht=this.getCodeViewer(),st=document.createElement("div");if(st.className="".concat(K,"import-container"),Z){var et=document.createElement("div");et.className="".concat(K,"import-label"),et.innerHTML=Z,st.appendChild(et)}st.appendChild(ht.getElement());var nt=document.createElement("button");nt.type="button",nt.innerHTML=V.modalImportButton,nt.className="".concat(K,"btn-prim ").concat(K,"btn-import"),nt.onclick=function(){F.Css.clear(),F.setComponents(ht.getContent().trim()),F.Modal.close()},st.appendChild(nt),this.container=st}return this.container},getCodeViewer:function(){return this.codeViewer||(this.codeViewer=F.CodeManager.createViewer(h({codeName:"htmlmixed",theme:"hopscotch",readOnly:!1},V.importViewerOptions))),this.codeViewer}})})(_,C),E.add(a,{run:function(F){return F.setDevice("Desktop")},stop:function(){}}),E.add(s,{run:function(F){return F.setDevice("Tablet")},stop:function(){}}),E.add(u,{run:function(F){return F.setDevice("Mobile portrait")},stop:function(){}}),E.add(c,function(F){return confirm(D)&&F.runCommand("core:canvas-clear")})};var m=function(){return m=Object.assign||function(_){for(var C,E=1,D=arguments.length;E<D;E++)for(var F in C=arguments[E])Object.prototype.hasOwnProperty.call(C,F)&&(_[F]=C[F]);return _},m.apply(this,arguments)};const y=function(_,C){C===void 0&&(C={});var E=m({blocks:["link-block","quote","text-basic"],block:function(){return{}},modalImportTitle:"Import",modalImportButton:"Import",modalImportLabel:"",modalImportContent:"",importViewerOptions:{},textCleanCanvas:"Are you sure you want to clear the canvas?",showStylesOnChange:!0,useCustomTheme:!0},C);if(E.useCustomTheme&&typeof window<"u"){var D="gjs-",F="";[["one","#463a3c"],["two","#b9a5a6"],["three","#804f7b"],["four","#d97aa6"]].forEach(function(K){var Z=K[0],ct=K[1];F+=`
        .`.concat(D).concat(Z,`-bg {
          background-color: `).concat(ct,`;
        }

        .`).concat(D).concat(Z,`-color {
          color: `).concat(ct,`;
        }

        .`).concat(D).concat(Z,`-color-h:hover {
          color: `).concat(ct,`;
        }
      `)});var V=document.createElement("style");V.innerText=F,document.head.appendChild(V)}(function(K,Z){var ct=function(ht,st){Z.blocks.indexOf(ht)>=0&&K.Blocks.add(ht,r(r({select:!0,category:"Basic"},st),Z.block(ht)))};ct("link-block",{label:"Link Block",media:`<svg viewBox="0 0 24 24">
      <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path>
    </svg>`,content:{type:"link",editable:!1,droppable:!0,style:{display:"inline-block",padding:"5px","min-height":"50px","min-width":"50px"}}}),ct("quote",{label:"Quote",media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M14,17H17L19,13V7H13V13H16M6,17H9L11,13V7H5V13H8L6,17Z" />
    </svg>`,content:`<blockquote class="quote">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore ipsum dolor sit
      </blockquote>`}),ct("text-basic",{label:"Text section",media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z" />
    </svg>`,content:`<section class="bdg-sect">
      <h1 class="heading">Insert title here</h1>
      <p class="paragraph">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
      </section>`})})(_,E),v(_,E),function(K,Z){var ct=K.Panels,ht=K.getConfig(),st="sw-visibility",et="export-template",nt="open-sm",it="open-tm",$="open-layers",ft="open-blocks",lt="fullscreen",St="preview",U='style="display: block; max-width:22px"';ht.showDevices=!1,ct.getPanels().reset([{id:"commands",buttons:[{}]},{id:"devices-c",buttons:[{id:a,command:a,active:!0,label:"<svg ".concat(U,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M21,16H3V4H21M21,2H3C1.89,2 1,2.89 1,4V16A2,2 0 0,0 3,18H10V20H8V22H16V20H14V18H21A2,2 0 0,0 23,16V4C23,2.89 22.1,2 21,2Z" />
        </svg>`)},{id:s,command:s,label:"<svg ".concat(U,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M19,18H5V6H19M21,4H3C1.89,4 1,4.89 1,6V18A2,2 0 0,0 3,20H21A2,2 0 0,0 23,18V6C23,4.89 22.1,4 21,4Z" />
        </svg>`)},{id:u,command:u,label:"<svg ".concat(U,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z" />
        </svg>`)}]},{id:"options",buttons:[{id:st,command:st,context:st,label:"<svg ".concat(U,` viewBox="0 0 24 24">
        <path fill="currentColor" d="M15,5H17V3H15M15,21H17V19H15M11,5H13V3H11M19,5H21V3H19M19,9H21V7H19M19,21H21V19H19M19,13H21V11H19M19,17H21V15H19M3,5H5V3H3M3,9H5V7H3M3,13H5V11H3M3,17H5V15H3M3,21H5V19H3M11,21H13V19H11M7,21H9V19H7M7,5H9V3H7V5Z" />
    </svg>`)},{id:St,context:St,command:function(){return K.runCommand(St)},label:"<svg ".concat(U,' viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"></path></svg>')},{id:lt,command:lt,context:lt,label:"<svg ".concat(U,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z" />
        </svg>`)},{id:et,command:function(){return K.runCommand(et)},label:"<svg ".concat(U,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M12.89,3L14.85,3.4L11.11,21L9.15,20.6L12.89,3M19.59,12L16,8.41V5.58L22.42,12L16,18.41V15.58L19.59,12M1.58,12L8,5.58V8.41L4.41,12L8,15.58V18.41L1.58,12Z" />
        </svg>`)},{id:"undo",command:function(){return K.runCommand("core:undo")},label:"<svg ".concat(U,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M20 13.5C20 17.09 17.09 20 13.5 20H6V18H13.5C16 18 18 16 18 13.5S16 9 13.5 9H7.83L10.91 12.09L9.5 13.5L4 8L9.5 2.5L10.92 3.91L7.83 7H13.5C17.09 7 20 9.91 20 13.5Z" />
        </svg>`)},{id:"redo",command:function(){return K.runCommand("core:redo")},label:"<svg ".concat(U,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M10.5 18H18V20H10.5C6.91 20 4 17.09 4 13.5S6.91 7 10.5 7H16.17L13.08 3.91L14.5 2.5L20 8L14.5 13.5L13.09 12.09L16.17 9H10.5C8 9 6 11 6 13.5S8 18 10.5 18Z" />
        </svg>`)},{id:o,command:function(){return K.runCommand(o)},label:"<svg ".concat(U,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
        </svg>`)},{id:c,command:function(){return K.runCommand(c)},label:"<svg ".concat(U,` viewBox="0 0 24 24">
              <path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />
          </svg>`)}]},{id:"views",buttons:[{id:nt,command:nt,active:!0,label:"<svg ".concat(U,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`)},{id:it,command:it,label:"<svg ".concat(U,` viewBox="0 0 24 24">
          <path fill="currentColor" d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" />
      </svg>`)},{id:$,command:$,label:"<svg ".concat(U,` viewBox="0 0 24 24">
          <path fill="currentColor" d="M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z" />
      </svg>`)},{id:ft,command:ft,label:"<svg ".concat(U,` viewBox="0 0 24 24">
          <path fill="currentColor" d="M17,13H13V17H11V13H7V11H11V7H13V11H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z" />
      </svg>`)}]}]);var _t=ct.getButton("views",ft);K.on("load",function(){return _t==null?void 0:_t.set("active",!0)}),Z.showStylesOnChange&&K.on("component:selected",function(){var Ot=ct.getButton("views",nt),zt=ct.getButton("views",$);zt&&zt.get("active")||!K.getSelected()||Ot==null||Ot.set("active",!0)})}(_,E)};return e})())}(by)),by.exports}var nQ=eQ();const sk=Wh(nQ);function rQ(){var m,y;const i=Nt.useRef(null),[n,t]=Nt.useState(null),[e,r]=Nt.useState(!1),o=Rs(),a=us(),s=((m=a.state)==null?void 0:m.templateName)||"New Template",u=(y=a.state)==null?void 0:y.templateId;Nt.useEffect(()=>{if(!i.current||n)return;const _=`gjs-template-${u||"new"}`;Object.keys(localStorage).forEach(D=>{D.startsWith("gjs-")&&localStorage.removeItem(D)});const C=QZ.init({container:"#gjs",height:"100vh",width:"100%",fromElement:!1,storageManager:{type:"local",autosave:!1,autoload:!1,id:_},plugins:[sk],pluginsOpts:{[sk]:{formsOpts:!0,navbarOpts:!0}},canvas:{styles:["https://cdn.tailwindcss.com","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"]}}),E=c(u);return E&&C.setComponents(E),t(C),()=>{if(C)try{C.destroy()}catch(D){console.error("Error destroying editor:",D)}}},[u]);const c=_=>({1:`
        <div style="padding:60px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); text-align:center; color:white;">
          <h1 style="font-size:48px; margin-bottom:20px;"> Hello {{email}}!</h1>
          <p style="font-size:24px; margin-bottom:40px;">Welcome to an amazing journey!</p>
          <a href="#" style="background:#fff; color:#667eea; padding:16px 40px; border-radius:50px; font-weight:bold; text-decoration:none;">Get Started</a>
        </div>
      `,2:`
        <div style="padding:80px 20px; background: linear-gradient(135deg, #ff0844 0%, #ffb199 100%); text-align:center; color:white;">
          <h1 style="font-size:60px; font-weight:bold; margin-bottom:20px;"> BLACK FRIDAY SALE </h1>
          <p style="font-size:28px; margin-bottom:30px;">Up to 70% OFF - Limited 48 Hours!</p>
          <a href="#" style="background:#fff; color:#ff0844; padding:20px 50px; border-radius:50px; font-weight:bold; text-decoration:none; font-size:24px;">SHOP NOW</a>
        </div>
      `,3:`
        <div style="padding:60px 20px; background:#f3f4f6; text-align:center;">
          <h1 style="font-size:48px; color:#1f2937; margin-bottom:20px;"> You have items in your cart!</h1>
          <p style="font-size:24px; color:#6b7280; margin-bottom:40px;">Don't miss 20% OFF when you complete your order today!</p>
          <a href="#" style="background:#10b981; color:white; padding:16px 40px; border-radius:12px; font-weight:bold; text-decoration:none;">Complete Order</a>
        </div>
      `,4:`
        <div style="padding:60px 20px; background:white;">
          <h1 style="font-size:48px; color:#1f2937; text-align:center; margin-bottom:40px;"> This Week's Newsletter</h1>
          <div style="max-width:600px; margin:0 auto; line-height:1.8; font-size:18px; color:#374151;">
            <h2 style="font-size:28px; color:#7c3aed; margin:30px 0 15px;"> Highlights</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore.</p>
            <h2 style="font-size:28px; color:#7c3aed; margin:30px 0 15px;"> Tips & Tricks</h2>
            <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo.</p>
            <a href="#" style="display:inline-block; margin-top:30px; background:#7c3aed; color:white; padding:14px 32px; border-radius:8px; text-decoration:none; font-weight:bold;">Read More</a>
          </div>
        </div>
      `})[_]||null,h=()=>{if(!n)return;r(!0);const _=n.getHtml(),C=n.getCss(),E=Date.now(),D={html:_,css:C,name:s,createdAt:new Date().toISOString(),templateId:u||"custom"};localStorage.setItem(`template_${E}`,JSON.stringify(D)),alert(" Template saved successfully!"),r(!1)},v=()=>{n&&window.confirm(" Clear all content and start over?")&&(n.setComponents(""),n.setStyle(""))};return j.jsxs("div",{className:"h-screen flex flex-col bg-gray-100",children:[j.jsxs("div",{className:"bg-white shadow-2xl px-8 py-5 flex justify-between items-center",children:[j.jsxs("div",{className:"flex items-center gap-6",children:[j.jsx("button",{onClick:()=>o(-1),className:"p-3 bg-gray-100 rounded-xl hover:bg-gray-200 transition",children:j.jsx(FL,{size:28})}),j.jsxs("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:[" ",s]})]}),j.jsxs("div",{className:"flex gap-4",children:[j.jsxs("button",{onClick:v,className:"px-6 py-3 bg-red-100 text-red-600 rounded-xl font-bold flex items-center gap-3 hover:bg-red-200 transition",title:"Clear canvas",children:[j.jsx(Ek,{size:24}),"Clear"]}),j.jsxs("button",{className:"px-6 py-3 bg-gray-200 rounded-xl font-bold flex items-center gap-3 hover:bg-gray-300 transition",onClick:()=>alert(" Version Control feature is under development!"),children:[j.jsx(ZL,{size:24}),"Version"]}),j.jsxs("button",{onClick:h,disabled:e,className:`px-10 py-4 rounded-2xl font-bold text-xl flex items-center gap-3 transition shadow-2xl ${e?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:scale-105"}`,children:[j.jsx(Tj,{size:28}),e?"Saving...":"Save Template"]})]})]}),j.jsx("div",{id:"gjs",ref:i,className:"flex-1"})]})}function iQ(){return j.jsxs(_L,{children:[j.jsx(uH,{}),j.jsxs(QR,{children:[j.jsx(ea,{path:"/login",element:j.jsx(iH,{})}),j.jsx(ea,{path:"/register",element:j.jsx(rH,{})}),j.jsx(ea,{path:"/confirm",element:j.jsx(oH,{})}),j.jsx(ea,{path:"/forgot-password",element:j.jsx(aH,{})}),j.jsx(ea,{path:"/",element:localStorage.getItem("token")?j.jsx(Dv,{to:"/campaigns",replace:!0}):j.jsx(Dv,{to:"/login",replace:!0})}),j.jsx(ea,{path:"/campaigns",element:j.jsx(Yu,{children:j.jsx(Uj,{})})}),j.jsx(ea,{path:"/create",element:j.jsx(Yu,{children:j.jsx(Q6,{})})}),j.jsx(ea,{path:"/campaign/:id",element:j.jsx(Yu,{children:j.jsx(t5,{})})}),j.jsx(ea,{path:"/tracking/:campaignId",element:j.jsx(Yu,{children:j.jsx(e5,{})})}),j.jsx(ea,{path:"/drip-builder",element:j.jsx(Yu,{children:j.jsx(Tz,{})})}),j.jsx(ea,{path:"/drip-dashboard",element:j.jsx(Yu,{children:j.jsx(Ez,{})})}),j.jsx(ea,{path:"/templates",element:j.jsx(Yu,{children:j.jsx(Oz,{})})}),j.jsx(ea,{path:"/template-editor",element:j.jsx(Yu,{children:j.jsx(rQ,{})})})]})]})}uR.createRoot(document.getElementById("root")).render(j.jsx(gc.StrictMode,{children:j.jsx(iQ,{})}));
